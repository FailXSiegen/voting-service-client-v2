const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Feedback-NVYWrMVW.js","assets/FaqCard-DmidSXKP.js","assets/GeneralInfo-CKwKEjeZ.js","assets/Legal-dX-1Z-DU.js","assets/Registration-5TgI9OJa.js","assets/Requirements-B00wPUk-.js","assets/Results-D9eRi3wn.js","assets/Security-BzGuQjLg.js","assets/Support-DN_HZWmm.js","assets/OrganizerGlobalSettings-4_qpgsVx.js","assets/OrganizerGlobalSettings-B2efLVkl.css"])))=>i.map(i=>d[i]);
var fj=Object.defineProperty;var hj=(n,t,e)=>t in n?fj(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var y=(n,t,e)=>hj(n,typeof t!="symbol"?t+"":t,e);function mj(n,t){for(var e=0;e<t.length;e++){const i=t[e];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}})();/**
* @vue/shared v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function w_(n){const t=Object.create(null);for(const e of n.split(","))t[e]=1;return e=>e in t}const Sn={},mh=[],Vo=()=>{},D$=()=>!1,mv=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),VS=n=>n.startsWith("onUpdate:"),pi=Object.assign,DS=(n,t)=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)},gj=Object.prototype.hasOwnProperty,Yn=(n,t)=>gj.call(n,t),xt=Array.isArray,gh=n=>vm(n)==="[object Map]",Ud=n=>vm(n)==="[object Set]",Fx=n=>vm(n)==="[object Date]",pj=n=>vm(n)==="[object RegExp]",Gt=n=>typeof n=="function",_i=n=>typeof n=="string",ba=n=>typeof n=="symbol",hi=n=>n!==null&&typeof n=="object",NS=n=>(hi(n)||Gt(n))&&Gt(n.then)&&Gt(n.catch),N$=Object.prototype.toString,vm=n=>N$.call(n),vj=n=>vm(n).slice(8,-1),y_=n=>vm(n)==="[object Object]",LS=n=>_i(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,ph=w_(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),__=n=>{const t=Object.create(null);return e=>t[e]||(t[e]=n(e))},bj=/-\w/g,Hr=__(n=>n.replace(bj,t=>t.slice(1).toUpperCase())),wj=/\B([A-Z])/g,zs=__(n=>n.replace(wj,"-$1").toLowerCase()),gv=__(n=>n.charAt(0).toUpperCase()+n.slice(1)),Fg=__(n=>n?`on${gv(n)}`:""),ws=(n,t)=>!Object.is(n,t),vh=(n,...t)=>{for(let e=0;e<n.length;e++)n[e](...t)},L$=(n,t,e,i=!1)=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!1,writable:i,value:e})},Lw=n=>{const t=parseFloat(n);return isNaN(t)?n:t},Mw=n=>{const t=_i(n)?Number(n):NaN;return isNaN(t)?n:t};let Ux;const k_=()=>Ux||(Ux=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),yj="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",_j=w_(yj);function Di(n){if(xt(n)){const t={};for(let e=0;e<n.length;e++){const i=n[e],r=_i(i)?Tj(i):Di(i);if(r)for(const s in r)t[s]=r[s]}return t}else if(_i(n)||hi(n))return n}const kj=/;(?![^(]*\))/g,Ej=/:([^]+)/,Cj=/\/\*[^]*?\*\//g;function Tj(n){const t={};return n.replace(Cj,"").split(kj).forEach(e=>{if(e){const i=e.split(Ej);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Ze(n){let t="";if(_i(n))t=n;else if(xt(n))for(let e=0;e<n.length;e++){const i=Ze(n[e]);i&&(t+=i+" ")}else if(hi(n))for(const e in n)n[e]&&(t+=e+" ");return t.trim()}function zn(n){if(!n)return null;let{class:t,style:e}=n;return t&&!_i(t)&&(n.class=Ze(t)),e&&(n.style=Di(e)),n}const Sj="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Aj=w_(Sj);function M$(n){return!!n||n===""}function Ij(n,t){if(n.length!==t.length)return!1;let e=!0;for(let i=0;e&&i<n.length;i++)e=ru(n[i],t[i]);return e}function ru(n,t){if(n===t)return!0;let e=Fx(n),i=Fx(t);if(e||i)return e&&i?n.getTime()===t.getTime():!1;if(e=ba(n),i=ba(t),e||i)return n===t;if(e=xt(n),i=xt(t),e||i)return e&&i?Ij(n,t):!1;if(e=hi(n),i=hi(t),e||i){if(!e||!i)return!1;const r=Object.keys(n).length,s=Object.keys(t).length;if(r!==s)return!1;for(const o in n){const a=n.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!ru(n[o],t[o]))return!1}}return String(n)===String(t)}function E_(n,t){return n.findIndex(e=>ru(e,t))}const $$=n=>!!(n&&n.__v_isRef===!0),B=n=>_i(n)?n:n==null?"":xt(n)||hi(n)&&(n.toString===N$||!Gt(n.toString))?$$(n)?B(n.value):JSON.stringify(n,B$,2):String(n),B$=(n,t)=>$$(t)?B$(n,t.value):gh(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[i,r],s)=>(e[C1(i,s)+" =>"]=r,e),{})}:Ud(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>C1(e))}:ba(t)?C1(t):hi(t)&&!xt(t)&&!y_(t)?String(t):t,C1=(n,t="")=>{var e;return ba(n)?`Symbol(${(e=n.description)!=null?e:t})`:n};function Pj(n){return n==null?"initial":typeof n=="string"?n===""?" ":n:String(n)}/**
* @vue/reactivity v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let es;class MS{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=es,!t&&es&&(this.index=(es.scopes||(es.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=es;try{return es=this,t()}finally{es=e}}}on(){++this._on===1&&(this.prevScope=es,es=this)}off(){this._on>0&&--this._on===0&&(es=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let e,i;for(e=0,i=this.effects.length;e<i;e++)this.effects[e].stop();for(this.effects.length=0,e=0,i=this.cleanups.length;e<i;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function $S(n){return new MS(n)}function yu(){return es}function _u(n,t=!1){es&&es.cleanups.push(n)}let bi;const T1=new WeakSet;class _p{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,es&&es.active&&es.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,T1.has(this)&&(T1.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||U$(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,zx(this),z$(this);const t=bi,e=fa;bi=this,fa=!0;try{return this.fn()}finally{H$(this),bi=t,fa=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)US(t);this.deps=this.depsTail=void 0,zx(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?T1.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){zE(this)&&this.run()}get dirty(){return zE(this)}}let F$=0,Ug,zg;function U$(n,t=!1){if(n.flags|=8,t){n.next=zg,zg=n;return}n.next=Ug,Ug=n}function BS(){F$++}function FS(){if(--F$>0)return;if(zg){let t=zg;for(zg=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let n;for(;Ug;){let t=Ug;for(Ug=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){n||(n=i)}t=e}}if(n)throw n}function z$(n){for(let t=n.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function H$(n){let t,e=n.depsTail,i=e;for(;i;){const r=i.prevDep;i.version===-1?(i===e&&(e=r),US(i),xj(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=r}n.deps=t,n.depsTail=e}function zE(n){for(let t=n.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(W$(t.dep.computed)||t.dep.version!==t.version))return!0;return!!n._dirty}function W$(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===kp)||(n.globalVersion=kp,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!zE(n))))return;n.flags|=2;const t=n.dep,e=bi,i=fa;bi=n,fa=!0;try{z$(n);const r=n.fn(n._value);(t.version===0||ws(r,n._value))&&(n.flags|=128,n._value=r,t.version++)}catch(r){throw t.version++,r}finally{bi=e,fa=i,H$(n),n.flags&=-3}}function US(n,t=!1){const{dep:e,prevSub:i,nextSub:r}=n;if(i&&(i.nextSub=r,n.prevSub=void 0),r&&(r.prevSub=i,n.nextSub=void 0),e.subs===n&&(e.subs=i,!i&&e.computed)){e.computed.flags&=-5;for(let s=e.computed.deps;s;s=s.nextDep)US(s,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function xj(n){const{prevDep:t,nextDep:e}=n;t&&(t.nextDep=e,n.prevDep=void 0),e&&(e.prevDep=t,n.nextDep=void 0)}function Oj(n,t){n.effect instanceof _p&&(n=n.effect.fn);const e=new _p(n);t&&pi(e,t);try{e.run()}catch(r){throw e.stop(),r}const i=e.run.bind(e);return i.effect=e,i}function Rj(n){n.effect.stop()}let fa=!0;const j$=[];function Ql(){j$.push(fa),fa=!1}function Zl(){const n=j$.pop();fa=n===void 0?!0:n}function zx(n){const{cleanup:t}=n;if(n.cleanup=void 0,t){const e=bi;bi=void 0;try{t()}finally{bi=e}}}let kp=0,Vj=class{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}};class C_{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!bi||!fa||bi===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==bi)e=this.activeLink=new Vj(bi,this),bi.deps?(e.prevDep=bi.depsTail,bi.depsTail.nextDep=e,bi.depsTail=e):bi.deps=bi.depsTail=e,q$(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const i=e.nextDep;i.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=i),e.prevDep=bi.depsTail,e.nextDep=void 0,bi.depsTail.nextDep=e,bi.depsTail=e,bi.deps===e&&(bi.deps=i)}return e}trigger(t){this.version++,kp++,this.notify(t)}notify(t){BS();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{FS()}}}function q$(n){if(n.dep.sc++,n.sub.flags&4){const t=n.dep.computed;if(t&&!n.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)q$(i)}const e=n.dep.subs;e!==n&&(n.prevSub=e,e&&(e.nextSub=n)),n.dep.subs=n}}const $w=new WeakMap,dd=Symbol(""),HE=Symbol(""),Ep=Symbol("");function ns(n,t,e){if(fa&&bi){let i=$w.get(n);i||$w.set(n,i=new Map);let r=i.get(e);r||(i.set(e,r=new C_),r.map=i,r.key=e),r.track()}}function Ml(n,t,e,i,r,s){const o=$w.get(n);if(!o){kp++;return}const a=l=>{l&&l.trigger()};if(BS(),t==="clear")o.forEach(a);else{const l=xt(n),c=l&&LS(e);if(l&&e==="length"){const u=Number(i);o.forEach((d,f)=>{(f==="length"||f===Ep||!ba(f)&&f>=u)&&a(d)})}else switch((e!==void 0||o.has(void 0))&&a(o.get(e)),c&&a(o.get(Ep)),t){case"add":l?c&&a(o.get("length")):(a(o.get(dd)),gh(n)&&a(o.get(HE)));break;case"delete":l||(a(o.get(dd)),gh(n)&&a(o.get(HE)));break;case"set":gh(n)&&a(o.get(dd));break}}FS()}function Dj(n,t){const e=$w.get(n);return e&&e.get(t)}function hf(n){const t=en(n);return t===n?t:(ns(t,"iterate",Ep),ao(n)?t:t.map(Mr))}function T_(n){return ns(n=en(n),"iterate",Ep),n}const Nj={__proto__:null,[Symbol.iterator](){return S1(this,Symbol.iterator,Mr)},concat(...n){return hf(this).concat(...n.map(t=>xt(t)?hf(t):t))},entries(){return S1(this,"entries",n=>(n[1]=Mr(n[1]),n))},every(n,t){return Cl(this,"every",n,t,void 0,arguments)},filter(n,t){return Cl(this,"filter",n,t,e=>e.map(Mr),arguments)},find(n,t){return Cl(this,"find",n,t,Mr,arguments)},findIndex(n,t){return Cl(this,"findIndex",n,t,void 0,arguments)},findLast(n,t){return Cl(this,"findLast",n,t,Mr,arguments)},findLastIndex(n,t){return Cl(this,"findLastIndex",n,t,void 0,arguments)},forEach(n,t){return Cl(this,"forEach",n,t,void 0,arguments)},includes(...n){return A1(this,"includes",n)},indexOf(...n){return A1(this,"indexOf",n)},join(n){return hf(this).join(n)},lastIndexOf(...n){return A1(this,"lastIndexOf",n)},map(n,t){return Cl(this,"map",n,t,void 0,arguments)},pop(){return Ym(this,"pop")},push(...n){return Ym(this,"push",n)},reduce(n,...t){return Hx(this,"reduce",n,t)},reduceRight(n,...t){return Hx(this,"reduceRight",n,t)},shift(){return Ym(this,"shift")},some(n,t){return Cl(this,"some",n,t,void 0,arguments)},splice(...n){return Ym(this,"splice",n)},toReversed(){return hf(this).toReversed()},toSorted(n){return hf(this).toSorted(n)},toSpliced(...n){return hf(this).toSpliced(...n)},unshift(...n){return Ym(this,"unshift",n)},values(){return S1(this,"values",Mr)}};function S1(n,t,e){const i=T_(n),r=i[t]();return i!==n&&!ao(n)&&(r._next=r.next,r.next=()=>{const s=r._next();return s.value&&(s.value=e(s.value)),s}),r}const Lj=Array.prototype;function Cl(n,t,e,i,r,s){const o=T_(n),a=o!==n&&!ao(n),l=o[t];if(l!==Lj[t]){const d=l.apply(n,s);return a?Mr(d):d}let c=e;o!==n&&(a?c=function(d,f){return e.call(this,Mr(d),f,n)}:e.length>2&&(c=function(d,f){return e.call(this,d,f,n)}));const u=l.call(o,c,i);return a&&r?r(u):u}function Hx(n,t,e,i){const r=T_(n);let s=e;return r!==n&&(ao(n)?e.length>3&&(s=function(o,a,l){return e.call(this,o,a,l,n)}):s=function(o,a,l){return e.call(this,o,Mr(a),l,n)}),r[t](s,...i)}function A1(n,t,e){const i=en(n);ns(i,"iterate",Ep);const r=i[t](...e);return(r===-1||r===!1)&&I_(e[0])?(e[0]=en(e[0]),i[t](...e)):r}function Ym(n,t,e=[]){Ql(),BS();const i=en(n)[t].apply(n,e);return FS(),Zl(),i}const Mj=w_("__proto__,__v_isRef,__isVue"),G$=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(ba));function $j(n){ba(n)||(n=String(n));const t=en(this);return ns(t,"has",n),t.hasOwnProperty(n)}class K${constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,i){if(e==="__v_skip")return t.__v_skip;const r=this._isReadonly,s=this._isShallow;if(e==="__v_isReactive")return!r;if(e==="__v_isReadonly")return r;if(e==="__v_isShallow")return s;if(e==="__v_raw")return i===(r?s?e5:X$:s?J$:Z$).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const o=xt(t);if(!r){let l;if(o&&(l=Nj[e]))return l;if(e==="hasOwnProperty")return $j}const a=Reflect.get(t,e,En(t)?t:i);return(ba(e)?G$.has(e):Mj(e))||(r||ns(t,"get",e),s)?a:En(a)?o&&LS(e)?a:a.value:hi(a)?r?HS(a):Kt(a):a}}class Y$ extends K${constructor(t=!1){super(!1,t)}set(t,e,i,r){let s=t[e];if(!this._isShallow){const l=ol(s);if(!ao(i)&&!ol(i)&&(s=en(s),i=en(i)),!xt(t)&&En(s)&&!En(i))return l||(s.value=i),!0}const o=xt(t)&&LS(e)?Number(e)<t.length:Yn(t,e),a=Reflect.set(t,e,i,En(t)?t:r);return t===en(r)&&(o?ws(i,s)&&Ml(t,"set",e,i):Ml(t,"add",e,i)),a}deleteProperty(t,e){const i=Yn(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&i&&Ml(t,"delete",e,void 0),r}has(t,e){const i=Reflect.has(t,e);return(!ba(e)||!G$.has(e))&&ns(t,"has",e),i}ownKeys(t){return ns(t,"iterate",xt(t)?"length":dd),Reflect.ownKeys(t)}}class Q$ extends K${constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const Bj=new Y$,Fj=new Q$,Uj=new Y$(!0),zj=new Q$(!0),WE=n=>n,Zv=n=>Reflect.getPrototypeOf(n);function Hj(n,t,e){return function(...i){const r=this.__v_raw,s=en(r),o=gh(s),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=r[n](...i),u=e?WE:t?Bw:Mr;return!t&&ns(s,"iterate",l?HE:dd),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function Jv(n){return function(...t){return n==="delete"?!1:n==="clear"?void 0:this}}function Wj(n,t){const e={get(r){const s=this.__v_raw,o=en(s),a=en(r);n||(ws(r,a)&&ns(o,"get",r),ns(o,"get",a));const{has:l}=Zv(o),c=t?WE:n?Bw:Mr;if(l.call(o,r))return c(s.get(r));if(l.call(o,a))return c(s.get(a));s!==o&&s.get(r)},get size(){const r=this.__v_raw;return!n&&ns(en(r),"iterate",dd),r.size},has(r){const s=this.__v_raw,o=en(s),a=en(r);return n||(ws(r,a)&&ns(o,"has",r),ns(o,"has",a)),r===a?s.has(r):s.has(r)||s.has(a)},forEach(r,s){const o=this,a=o.__v_raw,l=en(a),c=t?WE:n?Bw:Mr;return!n&&ns(l,"iterate",dd),a.forEach((u,d)=>r.call(s,c(u),c(d),o))}};return pi(e,n?{add:Jv("add"),set:Jv("set"),delete:Jv("delete"),clear:Jv("clear")}:{add(r){!t&&!ao(r)&&!ol(r)&&(r=en(r));const s=en(this);return Zv(s).has.call(s,r)||(s.add(r),Ml(s,"add",r,r)),this},set(r,s){!t&&!ao(s)&&!ol(s)&&(s=en(s));const o=en(this),{has:a,get:l}=Zv(o);let c=a.call(o,r);c||(r=en(r),c=a.call(o,r));const u=l.call(o,r);return o.set(r,s),c?ws(s,u)&&Ml(o,"set",r,s):Ml(o,"add",r,s),this},delete(r){const s=en(this),{has:o,get:a}=Zv(s);let l=o.call(s,r);l||(r=en(r),l=o.call(s,r)),a&&a.call(s,r);const c=s.delete(r);return l&&Ml(s,"delete",r,void 0),c},clear(){const r=en(this),s=r.size!==0,o=r.clear();return s&&Ml(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{e[r]=Hj(r,n,t)}),e}function S_(n,t){const e=Wj(n,t);return(i,r,s)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?i:Reflect.get(Yn(e,r)&&r in i?e:i,r,s)}const jj={get:S_(!1,!1)},qj={get:S_(!1,!0)},Gj={get:S_(!0,!1)},Kj={get:S_(!0,!0)},Z$=new WeakMap,J$=new WeakMap,X$=new WeakMap,e5=new WeakMap;function Yj(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Qj(n){return n.__v_skip||!Object.isExtensible(n)?0:Yj(vj(n))}function Kt(n){return ol(n)?n:A_(n,!1,Bj,jj,Z$)}function zS(n){return A_(n,!1,Uj,qj,J$)}function HS(n){return A_(n,!0,Fj,Gj,X$)}function Zj(n){return A_(n,!0,zj,Kj,e5)}function A_(n,t,e,i,r){if(!hi(n)||n.__v_raw&&!(t&&n.__v_isReactive))return n;const s=Qj(n);if(s===0)return n;const o=r.get(n);if(o)return o;const a=new Proxy(n,s===2?i:e);return r.set(n,a),a}function Do(n){return ol(n)?Do(n.__v_raw):!!(n&&n.__v_isReactive)}function ol(n){return!!(n&&n.__v_isReadonly)}function ao(n){return!!(n&&n.__v_isShallow)}function I_(n){return n?!!n.__v_raw:!1}function en(n){const t=n&&n.__v_raw;return t?en(t):n}function bm(n){return!Yn(n,"__v_skip")&&Object.isExtensible(n)&&L$(n,"__v_skip",!0),n}const Mr=n=>hi(n)?Kt(n):n,Bw=n=>hi(n)?HS(n):n;function En(n){return n?n.__v_isRef===!0:!1}function Z(n){return t5(n,!1)}function ha(n){return t5(n,!0)}function t5(n,t){return En(n)?n:new Jj(n,t)}class Jj{constructor(t,e){this.dep=new C_,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:en(t),this._value=e?t:Mr(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,i=this.__v_isShallow||ao(t)||ol(t);t=i?t:en(t),ws(t,e)&&(this._rawValue=t,this._value=i?t:Mr(t),this.dep.trigger())}}function Xj(n){n.dep&&n.dep.trigger()}function M(n){return En(n)?n.value:n}function eq(n){return Gt(n)?n():M(n)}const tq={get:(n,t,e)=>t==="__v_raw"?n:M(Reflect.get(n,t,e)),set:(n,t,e,i)=>{const r=n[t];return En(r)&&!En(e)?(r.value=e,!0):Reflect.set(n,t,e,i)}};function WS(n){return Do(n)?n:new Proxy(n,tq)}class nq{constructor(t){this.__v_isRef=!0,this._value=void 0;const e=this.dep=new C_,{get:i,set:r}=t(e.track.bind(e),e.trigger.bind(e));this._get=i,this._set=r}get value(){return this._value=this._get()}set value(t){this._set(t)}}function n5(n){return new nq(n)}function jS(n){const t=xt(n)?new Array(n.length):{};for(const e in n)t[e]=i5(n,e);return t}class iq{constructor(t,e,i){this._object=t,this._key=e,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Dj(en(this._object),this._key)}}class rq{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Oh(n,t,e){return En(n)?n:Gt(n)?new rq(n):hi(n)&&arguments.length>1?i5(n,t,e):Z(n)}function i5(n,t,e){const i=n[t];return En(i)?i:new iq(n,t,e)}class sq{constructor(t,e,i){this.fn=t,this.setter=e,this._value=void 0,this.dep=new C_(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=kp-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&bi!==this)return U$(this,!0),!0}get value(){const t=this.dep.track();return W$(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function oq(n,t,e=!1){let i,r;return Gt(n)?i=n:(i=n.get,r=n.set),new sq(i,r,e)}const aq={GET:"get",HAS:"has",ITERATE:"iterate"},lq={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},Xv={},Fw=new WeakMap;let Nc;function cq(){return Nc}function r5(n,t=!1,e=Nc){if(e){let i=Fw.get(e);i||Fw.set(e,i=[]),i.push(n)}}function uq(n,t,e=Sn){const{immediate:i,deep:r,once:s,scheduler:o,augmentJob:a,call:l}=e,c=E=>r?E:ao(E)||r===!1||r===0?$l(E,1):$l(E);let u,d,f,h,g=!1,v=!1;if(En(n)?(d=()=>n.value,g=ao(n)):Do(n)?(d=()=>c(n),g=!0):xt(n)?(v=!0,g=n.some(E=>Do(E)||ao(E)),d=()=>n.map(E=>{if(En(E))return E.value;if(Do(E))return c(E);if(Gt(E))return l?l(E,2):E()})):Gt(n)?t?d=l?()=>l(n,2):n:d=()=>{if(f){Ql();try{f()}finally{Zl()}}const E=Nc;Nc=u;try{return l?l(n,3,[h]):n(h)}finally{Nc=E}}:d=Vo,t&&r){const E=d,A=r===!0?1/0:r;d=()=>$l(E(),A)}const _=yu(),w=()=>{u.stop(),_&&_.active&&DS(_.effects,u)};if(s&&t){const E=t;t=(...A)=>{E(...A),w()}}let C=v?new Array(n.length).fill(Xv):Xv;const k=E=>{if(!(!(u.flags&1)||!u.dirty&&!E))if(t){const A=u.run();if(r||g||(v?A.some((x,p)=>ws(x,C[p])):ws(A,C))){f&&f();const x=Nc;Nc=u;try{const p=[A,C===Xv?void 0:v&&C[0]===Xv?[]:C,h];C=A,l?l(t,3,p):t(...p)}finally{Nc=x}}}else u.run()};return a&&a(k),u=new _p(d),u.scheduler=o?()=>o(k,!1):k,h=E=>r5(E,!1,u),f=u.onStop=()=>{const E=Fw.get(u);if(E){if(l)l(E,4);else for(const A of E)A();Fw.delete(u)}},t?i?k(!0):C=u.run():o?o(k.bind(null,!0),!0):u.run(),w.pause=u.pause.bind(u),w.resume=u.resume.bind(u),w.stop=w,w}function $l(n,t=1/0,e){if(t<=0||!hi(n)||n.__v_skip||(e=e||new Map,(e.get(n)||0)>=t))return n;if(e.set(n,t),t--,En(n))$l(n.value,t,e);else if(xt(n))for(let i=0;i<n.length;i++)$l(n[i],t,e);else if(Ud(n)||gh(n))n.forEach(i=>{$l(i,t,e)});else if(y_(n)){for(const i in n)$l(n[i],t,e);for(const i of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,i)&&$l(n[i],t,e)}return n}/**
* @vue/runtime-core v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const s5=[];function dq(n){s5.push(n)}function fq(){s5.pop()}function hq(n,t){}const mq={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},gq={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function wm(n,t,e,i){try{return i?n(...i):n()}catch(r){zd(r,t,e)}}function $o(n,t,e,i){if(Gt(n)){const r=wm(n,t,e,i);return r&&NS(r)&&r.catch(s=>{zd(s,t,e)}),r}if(xt(n)){const r=[];for(let s=0;s<n.length;s++)r.push($o(n[s],t,e,i));return r}}function zd(n,t,e,i=!0){const r=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Sn;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${e}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](n,l,c)===!1)return}a=a.parent}if(s){Ql(),wm(s,null,10,[n,l,c]),Zl();return}}pq(n,e,r,i,o)}function pq(n,t,e,i=!0,r=!1){if(r)throw n;console.error(n)}const ys=[];let Ba=-1;const bh=[];let Lc=null,Vf=0;const o5=Promise.resolve();let Uw=null;function Zn(n){const t=Uw||o5;return n?t.then(this?n.bind(this):n):t}function vq(n){let t=Ba+1,e=ys.length;for(;t<e;){const i=t+e>>>1,r=ys[i],s=Tp(r);s<n||s===n&&r.flags&2?t=i+1:e=i}return t}function qS(n){if(!(n.flags&1)){const t=Tp(n),e=ys[ys.length-1];!e||!(n.flags&2)&&t>=Tp(e)?ys.push(n):ys.splice(vq(t),0,n),n.flags|=1,a5()}}function a5(){Uw||(Uw=o5.then(l5))}function Cp(n){xt(n)?bh.push(...n):Lc&&n.id===-1?Lc.splice(Vf+1,0,n):n.flags&1||(bh.push(n),n.flags|=1),a5()}function Wx(n,t,e=Ba+1){for(;e<ys.length;e++){const i=ys[e];if(i&&i.flags&2){if(n&&i.id!==n.uid)continue;ys.splice(e,1),e--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function zw(n){if(bh.length){const t=[...new Set(bh)].sort((e,i)=>Tp(e)-Tp(i));if(bh.length=0,Lc){Lc.push(...t);return}for(Lc=t,Vf=0;Vf<Lc.length;Vf++){const e=Lc[Vf];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}Lc=null,Vf=0}}const Tp=n=>n.id==null?n.flags&2?-1:1/0:n.id;function l5(n){try{for(Ba=0;Ba<ys.length;Ba++){const t=ys[Ba];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),wm(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ba<ys.length;Ba++){const t=ys[Ba];t&&(t.flags&=-2)}Ba=-1,ys.length=0,zw(),Uw=null,(ys.length||bh.length)&&l5()}}let Df,eb=[];function c5(n,t){var e,i;Df=n,Df?(Df.enabled=!0,eb.forEach(({event:r,args:s})=>Df.emit(r,...s)),eb=[]):typeof window<"u"&&window.HTMLElement&&!((i=(e=window.navigator)==null?void 0:e.userAgent)!=null&&i.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{c5(s,t)}),setTimeout(()=>{Df||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,eb=[])},3e3)):eb=[]}let Fr=null,P_=null;function Sp(n){const t=Fr;return Fr=n,P_=n&&n.type.__scopeId||null,t}function Hd(n){P_=n}function Wd(){P_=null}const bq=n=>$e;function $e(n,t=Fr,e){if(!t||n._n)return n;const i=(...r)=>{i._d&&Pp(-1);const s=Sp(t);let o;try{o=n(...r)}finally{Sp(s),i._d&&Pp(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function vn(n,t){if(Fr===null)return n;const e=bv(Fr),i=n.dirs||(n.dirs=[]);for(let r=0;r<t.length;r++){let[s,o,a,l=Sn]=t[r];s&&(Gt(s)&&(s={mounted:s,updated:s}),s.deep&&$l(o),i.push({dir:s,instance:e,value:o,oldValue:void 0,arg:a,modifiers:l}))}return n}function Fa(n,t,e,i){const r=n.dirs,s=t&&t.dirs;for(let o=0;o<r.length;o++){const a=r[o];s&&(a.oldValue=s[o].value);let l=a.dir[i];l&&(Ql(),$o(l,e,8,[n.el,a,n,t]),Zl())}}const u5=Symbol("_vte"),d5=n=>n.__isTeleport,Hg=n=>n&&(n.disabled||n.disabled===""),jx=n=>n&&(n.defer||n.defer===""),qx=n=>typeof SVGElement<"u"&&n instanceof SVGElement,Gx=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,jE=(n,t)=>{const e=n&&n.to;return _i(e)?t?t(e):null:e},f5={name:"Teleport",__isTeleport:!0,process(n,t,e,i,r,s,o,a,l,c){const{mc:u,pc:d,pbc:f,o:{insert:h,querySelector:g,createText:v,createComment:_}}=c,w=Hg(t.props);let{shapeFlag:C,children:k,dynamicChildren:E}=t;if(n==null){const A=t.el=v(""),x=t.anchor=v("");h(A,e,i),h(x,e,i);const p=(R,S)=>{C&16&&(r&&r.isCE&&(r.ce._teleportTarget=R),u(k,R,S,r,s,o,a,l))},D=()=>{const R=t.target=jE(t.props,g),S=m5(R,t,v,h);R&&(o!=="svg"&&qx(R)?o="svg":o!=="mathml"&&Gx(R)&&(o="mathml"),w||(p(R,S),Xb(t,!1)))};w&&(p(e,x),Xb(t,!0)),jx(t.props)?(t.el.__isMounted=!1,fr(()=>{D(),delete t.el.__isMounted},s)):D()}else{if(jx(t.props)&&n.el.__isMounted===!1){fr(()=>{f5.process(n,t,e,i,r,s,o,a,l,c)},s);return}t.el=n.el,t.targetStart=n.targetStart;const A=t.anchor=n.anchor,x=t.target=n.target,p=t.targetAnchor=n.targetAnchor,D=Hg(n.props),R=D?e:x,S=D?A:p;if(o==="svg"||qx(x)?o="svg":(o==="mathml"||Gx(x))&&(o="mathml"),E?(f(n.dynamicChildren,E,R,r,s,o,a),aA(n,t,!0)):l||d(n,t,R,S,r,s,o,a,!1),w)D?t.props&&n.props&&t.props.to!==n.props.to&&(t.props.to=n.props.to):tb(t,e,A,c,1);else if((t.props&&t.props.to)!==(n.props&&n.props.to)){const I=t.target=jE(t.props,g);I&&tb(t,I,null,c,0)}else D&&tb(t,x,p,c,1);Xb(t,w)}},remove(n,t,e,{um:i,o:{remove:r}},s){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:u,target:d,props:f}=n;if(d&&(r(c),r(u)),s&&r(l),o&16){const h=s||!Hg(f);for(let g=0;g<a.length;g++){const v=a[g];i(v,t,e,h,!!v.dynamicChildren)}}},move:tb,hydrate:wq};function tb(n,t,e,{o:{insert:i},m:r},s=2){s===0&&i(n.targetAnchor,t,e);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=n,d=s===2;if(d&&i(o,t,e),(!d||Hg(u))&&l&16)for(let f=0;f<c.length;f++)r(c[f],t,e,2);d&&i(a,t,e)}function wq(n,t,e,i,r,s,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:u}},d){function f(v,_,w,C){_.anchor=d(o(v),_,a(v),e,i,r,s),_.targetStart=w,_.targetAnchor=C}const h=t.target=jE(t.props,l),g=Hg(t.props);if(h){const v=h._lpa||h.firstChild;if(t.shapeFlag&16)if(g)f(n,t,v,v&&o(v));else{t.anchor=o(n);let _=v;for(;_;){if(_&&_.nodeType===8){if(_.data==="teleport start anchor")t.targetStart=_;else if(_.data==="teleport anchor"){t.targetAnchor=_,h._lpa=t.targetAnchor&&o(t.targetAnchor);break}}_=o(_)}t.targetAnchor||m5(h,t,u,c),d(v&&o(v),t,h,e,i,r,s)}Xb(t,g)}else g&&t.shapeFlag&16&&f(n,t,n,o(n));return t.anchor&&o(t.anchor)}const h5=f5;function Xb(n,t){const e=n.ctx;if(e&&e.ut){let i,r;for(t?(i=n.el,r=n.anchor):(i=n.targetStart,r=n.targetAnchor);i&&i!==r;)i.nodeType===1&&i.setAttribute("data-v-owner",e.uid),i=i.nextSibling;e.ut()}}function m5(n,t,e,i){const r=t.targetStart=e(""),s=t.targetAnchor=e("");return r[u5]=s,n&&(i(r,n),i(s,n)),s}const Nl=Symbol("_leaveCb"),nb=Symbol("_enterCb");function GS(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Jt(()=>{n.isMounted=!0}),wa(()=>{n.isUnmounting=!0}),n}const So=[Function,Array],KS={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:So,onEnter:So,onAfterEnter:So,onEnterCancelled:So,onBeforeLeave:So,onLeave:So,onAfterLeave:So,onLeaveCancelled:So,onBeforeAppear:So,onAppear:So,onAfterAppear:So,onAppearCancelled:So},g5=n=>{const t=n.subTree;return t.component?g5(t.component):t},yq={name:"BaseTransition",props:KS,setup(n,{slots:t}){const e=Yr(),i=GS();return()=>{const r=t.default&&x_(t.default(),!0);if(!r||!r.length)return;const s=p5(r),o=en(n),{mode:a}=o;if(i.isLeaving)return I1(s);const l=Kx(s);if(!l)return I1(s);let c=Rh(l,o,i,e,d=>c=d);l.type!==Zi&&Jl(l,c);let u=e.subTree&&Kx(e.subTree);if(u&&u.type!==Zi&&!oa(u,l)&&g5(e).type!==Zi){let d=Rh(u,o,i,e);if(Jl(u,d),a==="out-in"&&l.type!==Zi)return i.isLeaving=!0,d.afterLeave=()=>{i.isLeaving=!1,e.job.flags&8||e.update(),delete d.afterLeave,u=void 0},I1(s);a==="in-out"&&l.type!==Zi?d.delayLeave=(f,h,g)=>{const v=b5(i,u);v[String(u.key)]=u,f[Nl]=()=>{h(),f[Nl]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{g(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return s}}};function p5(n){let t=n[0];if(n.length>1){for(const e of n)if(e.type!==Zi){t=e;break}}return t}const v5=yq;function b5(n,t){const{leavingVNodes:e}=n;let i=e.get(t.type);return i||(i=Object.create(null),e.set(t.type,i)),i}function Rh(n,t,e,i,r){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:f,onLeave:h,onAfterLeave:g,onLeaveCancelled:v,onBeforeAppear:_,onAppear:w,onAfterAppear:C,onAppearCancelled:k}=t,E=String(n.key),A=b5(e,n),x=(R,S)=>{R&&$o(R,i,9,S)},p=(R,S)=>{const I=S[1];x(R,S),xt(R)?R.every(F=>F.length<=1)&&I():R.length<=1&&I()},D={mode:o,persisted:a,beforeEnter(R){let S=l;if(!e.isMounted)if(s)S=_||l;else return;R[Nl]&&R[Nl](!0);const I=A[E];I&&oa(n,I)&&I.el[Nl]&&I.el[Nl](),x(S,[R])},enter(R){let S=c,I=u,F=d;if(!e.isMounted)if(s)S=w||c,I=C||u,F=k||d;else return;let H=!1;const q=R[nb]=N=>{H||(H=!0,N?x(F,[R]):x(I,[R]),D.delayedLeave&&D.delayedLeave(),R[nb]=void 0)};S?p(S,[R,q]):q()},leave(R,S){const I=String(n.key);if(R[nb]&&R[nb](!0),e.isUnmounting)return S();x(f,[R]);let F=!1;const H=R[Nl]=q=>{F||(F=!0,S(),q?x(v,[R]):x(g,[R]),R[Nl]=void 0,A[I]===n&&delete A[I])};A[I]=n,h?p(h,[R,H]):H()},clone(R){const S=Rh(R,t,e,i,r);return r&&r(S),S}};return D}function I1(n){if(pv(n))return n=_a(n),n.children=null,n}function Kx(n){if(!pv(n))return d5(n.type)&&n.children?p5(n.children):n;if(n.component)return n.component.subTree;const{shapeFlag:t,children:e}=n;if(e){if(t&16)return e[0];if(t&32&&Gt(e.default))return e.default()}}function Jl(n,t){n.shapeFlag&6&&n.component?(n.transition=t,Jl(n.component.subTree,t)):n.shapeFlag&128?(n.ssContent.transition=t.clone(n.ssContent),n.ssFallback.transition=t.clone(n.ssFallback)):n.transition=t}function x_(n,t=!1,e){let i=[],r=0;for(let s=0;s<n.length;s++){let o=n[s];const a=e==null?o.key:String(e)+String(o.key!=null?o.key:s);o.type===Fe?(o.patchFlag&128&&r++,i=i.concat(x_(o.children,t,a))):(t||o.type!==Zi)&&i.push(a!=null?_a(o,{key:a}):o)}if(r>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}function Cn(n,t){return Gt(n)?pi({name:n.name},t,{setup:n}):n}function _q(){const n=Yr();return n?(n.appContext.config.idPrefix||"v")+"-"+n.ids[0]+n.ids[1]++:""}function YS(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function w5(n){const t=Yr(),e=ha(null);if(t){const r=t.refs===Sn?t.refs={}:t.refs;Object.defineProperty(r,n,{enumerable:!0,get:()=>e.value,set:s=>e.value=s})}return e}const Hw=new WeakMap;function wh(n,t,e,i,r=!1){if(xt(n)){n.forEach((g,v)=>wh(g,t&&(xt(t)?t[v]:t),e,i,r));return}if(Gc(i)&&!r){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&wh(n,t,e,i.component.subTree);return}const s=i.shapeFlag&4?bv(i.component):i.el,o=r?null:s,{i:a,r:l}=n,c=t&&t.r,u=a.refs===Sn?a.refs={}:a.refs,d=a.setupState,f=en(d),h=d===Sn?D$:g=>Yn(f,g);if(c!=null&&c!==l){if(Yx(t),_i(c))u[c]=null,h(c)&&(d[c]=null);else if(En(c)){c.value=null;const g=t;g.k&&(u[g.k]=null)}}if(Gt(l))wm(l,a,12,[o,u]);else{const g=_i(l),v=En(l);if(g||v){const _=()=>{if(n.f){const w=g?h(l)?d[l]:u[l]:l.value;if(r)xt(w)&&DS(w,s);else if(xt(w))w.includes(s)||w.push(s);else if(g)u[l]=[s],h(l)&&(d[l]=u[l]);else{const C=[s];l.value=C,n.k&&(u[n.k]=C)}}else g?(u[l]=o,h(l)&&(d[l]=o)):v&&(l.value=o,n.k&&(u[n.k]=o))};if(o){const w=()=>{_(),Hw.delete(n)};w.id=-1,Hw.set(n,w),fr(w,e)}else Yx(n),_()}}}function Yx(n){const t=Hw.get(n);t&&(t.flags|=8,Hw.delete(n))}let Qx=!1;const mf=()=>{Qx||(console.error("Hydration completed but contains mismatches."),Qx=!0)},kq=n=>n.namespaceURI.includes("svg")&&n.tagName!=="foreignObject",Eq=n=>n.namespaceURI.includes("MathML"),ib=n=>{if(n.nodeType===1){if(kq(n))return"svg";if(Eq(n))return"mathml"}},Jf=n=>n.nodeType===8;function Cq(n){const{mt:t,p:e,o:{patchProp:i,createText:r,nextSibling:s,parentNode:o,remove:a,insert:l,createComment:c}}=n,u=(k,E)=>{if(!E.hasChildNodes()){e(null,k,E),zw(),E._vnode=k;return}d(E.firstChild,k,null,null,null),zw(),E._vnode=k},d=(k,E,A,x,p,D=!1)=>{D=D||!!E.dynamicChildren;const R=Jf(k)&&k.data==="[",S=()=>v(k,E,A,x,p,R),{type:I,ref:F,shapeFlag:H,patchFlag:q}=E;let N=k.nodeType;E.el=k,q===-2&&(D=!1,E.dynamicChildren=null);let $=null;switch(I){case Kc:N!==3?E.children===""?(l(E.el=r(""),o(k),k),$=k):$=S():(k.data!==E.children&&(mf(),k.data=E.children),$=s(k));break;case Zi:C(k)?($=s(k),w(E.el=k.content.firstChild,k,A)):N!==8||R?$=S():$=s(k);break;case hd:if(R&&(k=s(k),N=k.nodeType),N===1||N===3){$=k;const U=!E.children.length;for(let re=0;re<E.staticCount;re++)U&&(E.children+=$.nodeType===1?$.outerHTML:$.data),re===E.staticCount-1&&(E.anchor=$),$=s($);return R?s($):$}else S();break;case Fe:R?$=g(k,E,A,x,p,D):$=S();break;default:if(H&1)(N!==1||E.type.toLowerCase()!==k.tagName.toLowerCase())&&!C(k)?$=S():$=f(k,E,A,x,p,D);else if(H&6){E.slotScopeIds=p;const U=o(k);if(R?$=_(k):Jf(k)&&k.data==="teleport start"?$=_(k,k.data,"teleport end"):$=s(k),t(E,U,null,A,x,ib(U),D),Gc(E)&&!E.type.__asyncResolved){let re;R?(re=Ce(Fe),re.anchor=$?$.previousSibling:U.lastChild):re=k.nodeType===3?fe(""):Ce("div"),re.el=k,E.component.subTree=re}}else H&64?N!==8?$=S():$=E.type.hydrate(k,E,A,x,p,D,n,h):H&128&&($=E.type.hydrate(k,E,A,x,ib(o(k)),p,D,n,d))}return F!=null&&wh(F,null,x,E),$},f=(k,E,A,x,p,D)=>{D=D||!!E.dynamicChildren;const{type:R,props:S,patchFlag:I,shapeFlag:F,dirs:H,transition:q}=E,N=R==="input"||R==="option";if(N||I!==-1){H&&Fa(E,null,A,"created");let $=!1;if(C(k)){$=F5(null,q)&&A&&A.vnode.props&&A.vnode.props.appear;const re=k.content.firstChild;if($){const K=re.getAttribute("class");K&&(re.$cls=K),q.beforeEnter(re)}w(re,k,A),E.el=k=re}if(F&16&&!(S&&(S.innerHTML||S.textContent))){let re=h(k.firstChild,E,k,A,x,p,D);for(;re;){rb(k,1)||mf();const K=re;re=re.nextSibling,a(K)}}else if(F&8){let re=E.children;re[0]===`
`&&(k.tagName==="PRE"||k.tagName==="TEXTAREA")&&(re=re.slice(1)),k.textContent!==re&&(rb(k,0)||mf(),k.textContent=E.children)}if(S){if(N||!D||I&48){const re=k.tagName.includes("-");for(const K in S)(N&&(K.endsWith("value")||K==="indeterminate")||mv(K)&&!ph(K)||K[0]==="."||re)&&i(k,K,null,S[K],void 0,A)}else if(S.onClick)i(k,"onClick",null,S.onClick,void 0,A);else if(I&4&&Do(S.style))for(const re in S.style)S.style[re]}let U;(U=S&&S.onVnodeBeforeMount)&&Bs(U,A,E),H&&Fa(E,null,A,"beforeMount"),((U=S&&S.onVnodeMounted)||H||$)&&Q5(()=>{U&&Bs(U,A,E),$&&q.enter(k),H&&Fa(E,null,A,"mounted")},x)}return k.nextSibling},h=(k,E,A,x,p,D,R)=>{R=R||!!E.dynamicChildren;const S=E.children,I=S.length;for(let F=0;F<I;F++){const H=R?S[F]:S[F]=Us(S[F]),q=H.type===Kc;k?(q&&!R&&F+1<I&&Us(S[F+1]).type===Kc&&(l(r(k.data.slice(H.children.length)),A,s(k)),k.data=H.children),k=d(k,H,x,p,D,R)):q&&!H.children?l(H.el=r(""),A):(rb(A,1)||mf(),e(null,H,A,null,x,p,ib(A),D))}return k},g=(k,E,A,x,p,D)=>{const{slotScopeIds:R}=E;R&&(p=p?p.concat(R):R);const S=o(k),I=h(s(k),E,S,A,x,p,D);return I&&Jf(I)&&I.data==="]"?s(E.anchor=I):(mf(),l(E.anchor=c("]"),S,I),I)},v=(k,E,A,x,p,D)=>{if(rb(k.parentElement,1)||mf(),E.el=null,D){const I=_(k);for(;;){const F=s(k);if(F&&F!==I)a(F);else break}}const R=s(k),S=o(k);return a(k),e(null,E,S,R,A,x,ib(S),p),A&&(A.vnode.el=E.el,N_(A,E.el)),R},_=(k,E="[",A="]")=>{let x=0;for(;k;)if(k=s(k),k&&Jf(k)&&(k.data===E&&x++,k.data===A)){if(x===0)return s(k);x--}return k},w=(k,E,A)=>{const x=E.parentNode;x&&x.replaceChild(k,E);let p=A;for(;p;)p.vnode.el===E&&(p.vnode.el=p.subTree.el=k),p=p.parent},C=k=>k.nodeType===1&&k.tagName==="TEMPLATE";return[u,d]}const Zx="data-allow-mismatch",Tq={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function rb(n,t){if(t===0||t===1)for(;n&&!n.hasAttribute(Zx);)n=n.parentElement;const e=n&&n.getAttribute(Zx);if(e==null)return!1;if(e==="")return!0;{const i=e.split(",");return t===0&&i.includes("children")?!0:i.includes(Tq[t])}}const Sq=k_().requestIdleCallback||(n=>setTimeout(n,1)),Aq=k_().cancelIdleCallback||(n=>clearTimeout(n)),Iq=(n=1e4)=>t=>{const e=Sq(t,{timeout:n});return()=>Aq(e)};function Pq(n){const{top:t,left:e,bottom:i,right:r}=n.getBoundingClientRect(),{innerHeight:s,innerWidth:o}=window;return(t>0&&t<s||i>0&&i<s)&&(e>0&&e<o||r>0&&r<o)}const xq=n=>(t,e)=>{const i=new IntersectionObserver(r=>{for(const s of r)if(s.isIntersecting){i.disconnect(),t();break}},n);return e(r=>{if(r instanceof Element){if(Pq(r))return t(),i.disconnect(),!1;i.observe(r)}}),()=>i.disconnect()},Oq=n=>t=>{if(n){const e=matchMedia(n);if(e.matches)t();else return e.addEventListener("change",t,{once:!0}),()=>e.removeEventListener("change",t)}},Rq=(n=[])=>(t,e)=>{_i(n)&&(n=[n]);let i=!1;const r=o=>{i||(i=!0,s(),t(),o.target.dispatchEvent(new o.constructor(o.type,o)))},s=()=>{e(o=>{for(const a of n)o.removeEventListener(a,r)})};return e(o=>{for(const a of n)o.addEventListener(a,r,{once:!0})}),s};function Vq(n,t){if(Jf(n)&&n.data==="["){let e=1,i=n.nextSibling;for(;i;){if(i.nodeType===1){if(t(i)===!1)break}else if(Jf(i))if(i.data==="]"){if(--e===0)break}else i.data==="["&&e++;i=i.nextSibling}}else t(n)}const Gc=n=>!!n.type.__asyncLoader;function y5(n){Gt(n)&&(n={loader:n});const{loader:t,loadingComponent:e,errorComponent:i,delay:r=200,hydrate:s,timeout:o,suspensible:a=!0,onError:l}=n;let c=null,u,d=0;const f=()=>(d++,c=null,h()),h=()=>{let g;return c||(g=c=t().catch(v=>{if(v=v instanceof Error?v:new Error(String(v)),l)return new Promise((_,w)=>{l(v,()=>_(f()),()=>w(v),d+1)});throw v}).then(v=>g!==c&&c?c:(v&&(v.__esModule||v[Symbol.toStringTag]==="Module")&&(v=v.default),u=v,v)))};return Cn({name:"AsyncComponentWrapper",__asyncLoader:h,__asyncHydrate(g,v,_){let w=!1;(v.bu||(v.bu=[])).push(()=>w=!0);const C=()=>{w||_()},k=s?()=>{const E=s(C,A=>Vq(g,A));E&&(v.bum||(v.bum=[])).push(E)}:C;u?k():h().then(()=>!v.isUnmounted&&k())},get __asyncResolved(){return u},setup(){const g=$r;if(YS(g),u)return()=>P1(u,g);const v=k=>{c=null,zd(k,g,13,!i)};if(a&&g.suspense||Vh)return h().then(k=>()=>P1(k,g)).catch(k=>(v(k),()=>i?Ce(i,{error:k}):null));const _=Z(!1),w=Z(),C=Z(!!r);return r&&setTimeout(()=>{C.value=!1},r),o!=null&&setTimeout(()=>{if(!_.value&&!w.value){const k=new Error(`Async component timed out after ${o}ms.`);v(k),w.value=k}},o),h().then(()=>{_.value=!0,g.parent&&pv(g.parent.vnode)&&g.parent.update()}).catch(k=>{v(k),w.value=k}),()=>{if(_.value&&u)return P1(u,g);if(w.value&&i)return Ce(i,{error:w.value});if(e&&!C.value)return Ce(e)}}})}function P1(n,t){const{ref:e,props:i,children:r,ce:s}=t.vnode,o=Ce(n,i,r);return o.ref=e,o.ce=s,delete t.vnode.ce,o}const pv=n=>n.type.__isKeepAlive,Dq={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(n,{slots:t}){const e=Yr(),i=e.ctx;if(!i.renderer)return()=>{const C=t.default&&t.default();return C&&C.length===1?C[0]:C};const r=new Map,s=new Set;let o=null;const a=e.suspense,{renderer:{p:l,m:c,um:u,o:{createElement:d}}}=i,f=d("div");i.activate=(C,k,E,A,x)=>{const p=C.component;c(C,k,E,0,a),l(p.vnode,C,k,E,p,a,A,C.slotScopeIds,x),fr(()=>{p.isDeactivated=!1,p.a&&vh(p.a);const D=C.props&&C.props.onVnodeMounted;D&&Bs(D,p.parent,C)},a)},i.deactivate=C=>{const k=C.component;jw(k.m),jw(k.a),c(C,f,null,1,a),fr(()=>{k.da&&vh(k.da);const E=C.props&&C.props.onVnodeUnmounted;E&&Bs(E,k.parent,C),k.isDeactivated=!0},a)};function h(C){x1(C),u(C,e,a,!0)}function g(C){r.forEach((k,E)=>{const A=rC(k.type);A&&!C(A)&&v(E)})}function v(C){const k=r.get(C);k&&(!o||!oa(k,o))?h(k):o&&x1(o),r.delete(C),s.delete(C)}gt(()=>[n.include,n.exclude],([C,k])=>{C&&g(E=>Sg(C,E)),k&&g(E=>!Sg(k,E))},{flush:"post",deep:!0});let _=null;const w=()=>{_!=null&&(qw(e.subTree.type)?fr(()=>{r.set(_,sb(e.subTree))},e.subTree.suspense):r.set(_,sb(e.subTree)))};return Jt(w),V_(w),wa(()=>{r.forEach(C=>{const{subTree:k,suspense:E}=e,A=sb(k);if(C.type===A.type&&C.key===A.key){x1(A);const x=A.component.da;x&&fr(x,E);return}h(C)})}),()=>{if(_=null,!t.default)return o=null;const C=t.default(),k=C[0];if(C.length>1)return o=null,C;if(!ya(k)||!(k.shapeFlag&4)&&!(k.shapeFlag&128))return o=null,k;let E=sb(k);if(E.type===Zi)return o=null,E;const A=E.type,x=rC(Gc(E)?E.type.__asyncResolved||{}:A),{include:p,exclude:D,max:R}=n;if(p&&(!x||!Sg(p,x))||D&&x&&Sg(D,x))return E.shapeFlag&=-257,o=E,k;const S=E.key==null?A:E.key,I=r.get(S);return E.el&&(E=_a(E),k.shapeFlag&128&&(k.ssContent=E)),_=S,I?(E.el=I.el,E.component=I.component,E.transition&&Jl(E,E.transition),E.shapeFlag|=512,s.delete(S),s.add(S)):(s.add(S),R&&s.size>parseInt(R,10)&&v(s.values().next().value)),E.shapeFlag|=256,o=E,qw(k.type)?k:E}}},Nq=Dq;function Sg(n,t){return xt(n)?n.some(e=>Sg(e,t)):_i(n)?n.split(",").includes(t):pj(n)?(n.lastIndex=0,n.test(t)):!1}function QS(n,t){_5(n,"a",t)}function ZS(n,t){_5(n,"da",t)}function _5(n,t,e=$r){const i=n.__wdc||(n.__wdc=()=>{let r=e;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(O_(t,i,e),e){let r=e.parent;for(;r&&r.parent;)pv(r.parent.vnode)&&Lq(i,t,e,r),r=r.parent}}function Lq(n,t,e,i){const r=O_(t,n,i,!0);wo(()=>{DS(i[t],r)},e)}function x1(n){n.shapeFlag&=-257,n.shapeFlag&=-513}function sb(n){return n.shapeFlag&128?n.ssContent:n}function O_(n,t,e=$r,i=!1){if(e){const r=e[n]||(e[n]=[]),s=t.__weh||(t.__weh=(...o)=>{Ql();const a=Cd(e),l=$o(t,e,n,o);return a(),Zl(),l});return i?r.unshift(s):r.push(s),s}}const cc=n=>(t,e=$r)=>{(!Vh||n==="sp")&&O_(n,(...i)=>t(...i),e)},JS=cc("bm"),Jt=cc("m"),R_=cc("bu"),V_=cc("u"),wa=cc("bum"),wo=cc("um"),XS=cc("sp"),k5=cc("rtg"),E5=cc("rtc");function C5(n,t=$r){O_("ec",n,t)}const eA="components",Mq="directives";function si(n,t){return tA(eA,n,!0,t)||n}const T5=Symbol.for("v-ndc");function Xl(n){return _i(n)?tA(eA,n,!1)||n:n||T5}function $q(n){return tA(Mq,n)}function tA(n,t,e=!0,i=!1){const r=Fr||$r;if(r){const s=r.type;if(n===eA){const a=rC(s,!1);if(a&&(a===t||a===Hr(t)||a===gv(Hr(t))))return s}const o=Jx(r[n]||s[n],t)||Jx(r.appContext[n],t);return!o&&i?s:o}}function Jx(n,t){return n&&(n[t]||n[Hr(t)]||n[gv(Hr(t))])}function ct(n,t,e,i){let r;const s=e&&e[i],o=xt(n);if(o||_i(n)){const a=o&&Do(n);let l=!1,c=!1;a&&(l=!ao(n),c=ol(n),n=T_(n)),r=new Array(n.length);for(let u=0,d=n.length;u<d;u++)r[u]=t(l?c?Bw(Mr(n[u])):Mr(n[u]):n[u],u,void 0,s&&s[u])}else if(typeof n=="number"){r=new Array(n);for(let a=0;a<n;a++)r[a]=t(a+1,a,void 0,s&&s[a])}else if(hi(n))if(n[Symbol.iterator])r=Array.from(n,(a,l)=>t(a,l,void 0,s&&s[l]));else{const a=Object.keys(n);r=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];r[l]=t(n[u],u,l,s&&s[l])}}else r=[];return e&&(e[i]=r),r}function Wr(n,t){for(let e=0;e<t.length;e++){const i=t[e];if(xt(i))for(let r=0;r<i.length;r++)n[i[r].name]=i[r].fn;else i&&(n[i.name]=i.key?(...r)=>{const s=i.fn(...r);return s&&(s.key=i.key),s}:i.fn)}return n}function ht(n,t,e={},i,r){if(Fr.ce||Fr.parent&&Gc(Fr.parent)&&Fr.parent.ce)return t!=="default"&&(e.name=t),P(),Ge(Fe,null,[Ce("slot",e,i&&i())],64);let s=n[t];s&&s._c&&(s._d=!1),P();const o=s&&nA(s(e)),a=e.key||o&&o.key,l=Ge(Fe,{key:(a&&!ba(a)?a:`_${t}`)+(!o&&i?"_fb":"")},o||(i?i():[]),o&&n._===1?64:-2);return!r&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function nA(n){return n.some(t=>ya(t)?!(t.type===Zi||t.type===Fe&&!nA(t.children)):!0)?n:null}function Bq(n,t){const e={};for(const i in n)e[t&&/[A-Z]/.test(i)?`on:${i}`:Fg(i)]=n[i];return e}const qE=n=>n?tB(n)?bv(n):qE(n.parent):null,Wg=pi(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>qE(n.parent),$root:n=>qE(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>iA(n),$forceUpdate:n=>n.f||(n.f=()=>{qS(n.update)}),$nextTick:n=>n.n||(n.n=Zn.bind(n.proxy)),$watch:n=>hG.bind(n)}),O1=(n,t)=>n!==Sn&&!n.__isScriptSetup&&Yn(n,t),GE={get({_:n},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:i,data:r,props:s,accessCache:o,type:a,appContext:l}=n;let c;if(t[0]!=="$"){const h=o[t];if(h!==void 0)switch(h){case 1:return i[t];case 2:return r[t];case 4:return e[t];case 3:return s[t]}else{if(O1(i,t))return o[t]=1,i[t];if(r!==Sn&&Yn(r,t))return o[t]=2,r[t];if((c=n.propsOptions[0])&&Yn(c,t))return o[t]=3,s[t];if(e!==Sn&&Yn(e,t))return o[t]=4,e[t];YE&&(o[t]=0)}}const u=Wg[t];let d,f;if(u)return t==="$attrs"&&ns(n.attrs,"get",""),u(n);if((d=a.__cssModules)&&(d=d[t]))return d;if(e!==Sn&&Yn(e,t))return o[t]=4,e[t];if(f=l.config.globalProperties,Yn(f,t))return f[t]},set({_:n},t,e){const{data:i,setupState:r,ctx:s}=n;return O1(r,t)?(r[t]=e,!0):i!==Sn&&Yn(i,t)?(i[t]=e,!0):Yn(n.props,t)||t[0]==="$"&&t.slice(1)in n?!1:(s[t]=e,!0)},has({_:{data:n,setupState:t,accessCache:e,ctx:i,appContext:r,propsOptions:s,type:o}},a){let l,c;return!!(e[a]||n!==Sn&&a[0]!=="$"&&Yn(n,a)||O1(t,a)||(l=s[0])&&Yn(l,a)||Yn(i,a)||Yn(Wg,a)||Yn(r.config.globalProperties,a)||(c=o.__cssModules)&&c[a])},defineProperty(n,t,e){return e.get!=null?n._.accessCache[t]=0:Yn(e,"value")&&this.set(n,t,e.value,null),Reflect.defineProperty(n,t,e)}},Fq=pi({},GE,{get(n,t){if(t!==Symbol.unscopables)return GE.get(n,t,n)},has(n,t){return t[0]!=="_"&&!_j(t)}});function Uq(){return null}function zq(){return null}function Hq(n){}function Wq(n){}function jq(){return null}function qq(){}function Gq(n,t){return null}function ml(){return S5().slots}function Kq(){return S5().attrs}function S5(n){const t=Yr();return t.setupContext||(t.setupContext=rB(t))}function Ap(n){return xt(n)?n.reduce((t,e)=>(t[e]=null,t),{}):n}function Yq(n,t){const e=Ap(n);for(const i in t){if(i.startsWith("__skip"))continue;let r=e[i];r?xt(r)||Gt(r)?r=e[i]={type:r,default:t[i]}:r.default=t[i]:r===null&&(r=e[i]={default:t[i]}),r&&t[`__skip_${i}`]&&(r.skipFactory=!0)}return e}function KE(n,t){return!n||!t?n||t:xt(n)&&xt(t)?n.concat(t):pi({},Ap(n),Ap(t))}function Qq(n,t){const e={};for(const i in n)t.includes(i)||Object.defineProperty(e,i,{enumerable:!0,get:()=>n[i]});return e}function Zq(n){const t=Yr();let e=n();return tC(),NS(e)&&(e=e.catch(i=>{throw Cd(t),i})),[e,()=>Cd(t)]}let YE=!0;function Jq(n){const t=iA(n),e=n.proxy,i=n.ctx;YE=!1,t.beforeCreate&&Xx(t.beforeCreate,n,"bc");const{data:r,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:h,updated:g,activated:v,deactivated:_,beforeDestroy:w,beforeUnmount:C,destroyed:k,unmounted:E,render:A,renderTracked:x,renderTriggered:p,errorCaptured:D,serverPrefetch:R,expose:S,inheritAttrs:I,components:F,directives:H,filters:q}=t;if(c&&Xq(c,i,null),o)for(const U in o){const re=o[U];Gt(re)&&(i[U]=re.bind(e))}if(r){const U=r.call(e,e);hi(U)&&(n.data=Kt(U))}if(YE=!0,s)for(const U in s){const re=s[U],K=Gt(re)?re.bind(e,e):Gt(re.get)?re.get.bind(e,e):Vo,z=!Gt(re)&&Gt(re.set)?re.set.bind(e):Vo,ge=le({get:K,set:z});Object.defineProperty(i,U,{enumerable:!0,configurable:!0,get:()=>ge.value,set:Q=>ge.value=Q})}if(a)for(const U in a)A5(a[U],i,e,U);if(l){const U=Gt(l)?l.call(e):l;Reflect.ownKeys(U).forEach(re=>{Qa(re,U[re])})}u&&Xx(u,n,"c");function $(U,re){xt(re)?re.forEach(K=>U(K.bind(e))):re&&U(re.bind(e))}if($(JS,d),$(Jt,f),$(R_,h),$(V_,g),$(QS,v),$(ZS,_),$(C5,D),$(E5,x),$(k5,p),$(wa,C),$(wo,E),$(XS,R),xt(S))if(S.length){const U=n.exposed||(n.exposed={});S.forEach(re=>{Object.defineProperty(U,re,{get:()=>e[re],set:K=>e[re]=K,enumerable:!0})})}else n.exposed||(n.exposed={});A&&n.render===Vo&&(n.render=A),I!=null&&(n.inheritAttrs=I),F&&(n.components=F),H&&(n.directives=H),R&&YS(n)}function Xq(n,t,e=Vo){xt(n)&&(n=QE(n));for(const i in n){const r=n[i];let s;hi(r)?"default"in r?s=Ci(r.from||i,r.default,!0):s=Ci(r.from||i):s=Ci(r),En(s)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[i]=s}}function Xx(n,t,e){$o(xt(n)?n.map(i=>i.bind(t.proxy)):n.bind(t.proxy),t,e)}function A5(n,t,e,i){let r=i.includes(".")?j5(e,i):()=>e[i];if(_i(n)){const s=t[n];Gt(s)&&gt(r,s)}else if(Gt(n))gt(r,n.bind(e));else if(hi(n))if(xt(n))n.forEach(s=>A5(s,t,e,i));else{const s=Gt(n.handler)?n.handler.bind(e):t[n.handler];Gt(s)&&gt(r,s,n)}}function iA(n){const t=n.type,{mixins:e,extends:i}=t,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=n.appContext,a=s.get(t);let l;return a?l=a:!r.length&&!e&&!i?l=t:(l={},r.length&&r.forEach(c=>Ww(l,c,o,!0)),Ww(l,t,o)),hi(t)&&s.set(t,l),l}function Ww(n,t,e,i=!1){const{mixins:r,extends:s}=t;s&&Ww(n,s,e,!0),r&&r.forEach(o=>Ww(n,o,e,!0));for(const o in t)if(!(i&&o==="expose")){const a=eG[o]||e&&e[o];n[o]=a?a(n[o],t[o]):t[o]}return n}const eG={data:eO,props:tO,emits:tO,methods:Ag,computed:Ag,beforeCreate:ms,created:ms,beforeMount:ms,mounted:ms,beforeUpdate:ms,updated:ms,beforeDestroy:ms,beforeUnmount:ms,destroyed:ms,unmounted:ms,activated:ms,deactivated:ms,errorCaptured:ms,serverPrefetch:ms,components:Ag,directives:Ag,watch:nG,provide:eO,inject:tG};function eO(n,t){return t?n?function(){return pi(Gt(n)?n.call(this,this):n,Gt(t)?t.call(this,this):t)}:t:n}function tG(n,t){return Ag(QE(n),QE(t))}function QE(n){if(xt(n)){const t={};for(let e=0;e<n.length;e++)t[n[e]]=n[e];return t}return n}function ms(n,t){return n?[...new Set([].concat(n,t))]:t}function Ag(n,t){return n?pi(Object.create(null),n,t):t}function tO(n,t){return n?xt(n)&&xt(t)?[...new Set([...n,...t])]:pi(Object.create(null),Ap(n),Ap(t??{})):t}function nG(n,t){if(!n)return t;if(!t)return n;const e=pi(Object.create(null),n);for(const i in t)e[i]=ms(n[i],t[i]);return e}function I5(){return{app:null,config:{isNativeTag:D$,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let iG=0;function rG(n,t){return function(i,r=null){Gt(i)||(i=pi({},i)),r!=null&&!hi(r)&&(r=null);const s=I5(),o=new WeakSet,a=[];let l=!1;const c=s.app={_uid:iG++,_component:i,_props:r,_container:null,_context:s,_instance:null,version:wv,get config(){return s.config},set config(u){},use(u,...d){return o.has(u)||(u&&Gt(u.install)?(o.add(u),u.install(c,...d)):Gt(u)&&(o.add(u),u(c,...d))),c},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),c},component(u,d){return d?(s.components[u]=d,c):s.components[u]},directive(u,d){return d?(s.directives[u]=d,c):s.directives[u]},mount(u,d,f){if(!l){const h=c._ceVNode||Ce(i,r);return h.appContext=s,f===!0?f="svg":f===!1&&(f=void 0),d&&t?t(h,u):n(h,u,f),l=!0,c._container=u,u.__vue_app__=c,bv(h.component)}},onUnmount(u){a.push(u)},unmount(){l&&($o(a,c._instance,16),n(null,c._container),delete c._container.__vue_app__)},provide(u,d){return s.provides[u]=d,c},runWithContext(u){const d=fd;fd=c;try{return u()}finally{fd=d}}};return c}}let fd=null;function Qa(n,t){if($r){let e=$r.provides;const i=$r.parent&&$r.parent.provides;i===e&&(e=$r.provides=Object.create(i)),e[n]=t}}function Ci(n,t,e=!1){const i=Yr();if(i||fd){let r=fd?fd._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(r&&n in r)return r[n];if(arguments.length>1)return e&&Gt(t)?t.call(i&&i.proxy):t}}function rA(){return!!(Yr()||fd)}const P5={},x5=()=>Object.create(P5),O5=n=>Object.getPrototypeOf(n)===P5;function sG(n,t,e,i=!1){const r={},s=x5();n.propsDefaults=Object.create(null),R5(n,t,r,s);for(const o in n.propsOptions[0])o in r||(r[o]=void 0);e?n.props=i?r:zS(r):n.type.props?n.props=r:n.props=s,n.attrs=s}function oG(n,t,e,i){const{props:r,attrs:s,vnode:{patchFlag:o}}=n,a=en(r),[l]=n.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=n.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(D_(n.emitsOptions,f))continue;const h=t[f];if(l)if(Yn(s,f))h!==s[f]&&(s[f]=h,c=!0);else{const g=Hr(f);r[g]=ZE(l,a,g,h,n,!1)}else h!==s[f]&&(s[f]=h,c=!0)}}}else{R5(n,t,r,s)&&(c=!0);let u;for(const d in a)(!t||!Yn(t,d)&&((u=zs(d))===d||!Yn(t,u)))&&(l?e&&(e[d]!==void 0||e[u]!==void 0)&&(r[d]=ZE(l,a,d,void 0,n,!0)):delete r[d]);if(s!==a)for(const d in s)(!t||!Yn(t,d))&&(delete s[d],c=!0)}c&&Ml(n.attrs,"set","")}function R5(n,t,e,i){const[r,s]=n.propsOptions;let o=!1,a;if(t)for(let l in t){if(ph(l))continue;const c=t[l];let u;r&&Yn(r,u=Hr(l))?!s||!s.includes(u)?e[u]=c:(a||(a={}))[u]=c:D_(n.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(s){const l=en(e),c=a||Sn;for(let u=0;u<s.length;u++){const d=s[u];e[d]=ZE(r,l,d,c[d],n,!Yn(c,d))}}return o}function ZE(n,t,e,i,r,s){const o=n[e];if(o!=null){const a=Yn(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Gt(l)){const{propsDefaults:c}=r;if(e in c)i=c[e];else{const u=Cd(r);i=c[e]=l.call(null,t),u()}}else i=l;r.ce&&r.ce._setProp(e,i)}o[0]&&(s&&!a?i=!1:o[1]&&(i===""||i===zs(e))&&(i=!0))}return i}const aG=new WeakMap;function V5(n,t,e=!1){const i=e?aG:t.propsCache,r=i.get(n);if(r)return r;const s=n.props,o={},a=[];let l=!1;if(!Gt(n)){const u=d=>{l=!0;const[f,h]=V5(d,t,!0);pi(o,f),h&&a.push(...h)};!e&&t.mixins.length&&t.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!s&&!l)return hi(n)&&i.set(n,mh),mh;if(xt(s))for(let u=0;u<s.length;u++){const d=Hr(s[u]);nO(d)&&(o[d]=Sn)}else if(s)for(const u in s){const d=Hr(u);if(nO(d)){const f=s[u],h=o[d]=xt(f)||Gt(f)?{type:f}:pi({},f),g=h.type;let v=!1,_=!0;if(xt(g))for(let w=0;w<g.length;++w){const C=g[w],k=Gt(C)&&C.name;if(k==="Boolean"){v=!0;break}else k==="String"&&(_=!1)}else v=Gt(g)&&g.name==="Boolean";h[0]=v,h[1]=_,(v||Yn(h,"default"))&&a.push(d)}}const c=[o,a];return hi(n)&&i.set(n,c),c}function nO(n){return n[0]!=="$"&&!ph(n)}const sA=n=>n==="_"||n==="_ctx"||n==="$stable",oA=n=>xt(n)?n.map(Us):[Us(n)],lG=(n,t,e)=>{if(t._n)return t;const i=$e((...r)=>oA(t(...r)),e);return i._c=!1,i},D5=(n,t,e)=>{const i=n._ctx;for(const r in n){if(sA(r))continue;const s=n[r];if(Gt(s))t[r]=lG(r,s,i);else if(s!=null){const o=oA(s);t[r]=()=>o}}},N5=(n,t)=>{const e=oA(t);n.slots.default=()=>e},L5=(n,t,e)=>{for(const i in t)(e||!sA(i))&&(n[i]=t[i])},cG=(n,t,e)=>{const i=n.slots=x5();if(n.vnode.shapeFlag&32){const r=t._;r?(L5(i,t,e),e&&L$(i,"_",r,!0)):D5(t,i)}else t&&N5(n,t)},uG=(n,t,e)=>{const{vnode:i,slots:r}=n;let s=!0,o=Sn;if(i.shapeFlag&32){const a=t._;a?e&&a===1?s=!1:L5(r,t,e):(s=!t.$stable,D5(t,r)),o=t}else t&&(N5(n,t),o={default:1});if(s)for(const a in r)!sA(a)&&o[a]==null&&delete r[a]},fr=Q5;function M5(n){return B5(n)}function $5(n){return B5(n,Cq)}function B5(n,t){const e=k_();e.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:h=Vo,insertStaticContent:g}=n,v=(G,Y,oe,Ue=null,Oe=null,Le=null,Ye=void 0,te=null,se=!!Y.dynamicChildren)=>{if(G===Y)return;G&&!oa(G,Y)&&(Ue=ae(G),Q(G,Oe,Le,!0),G=null),Y.patchFlag===-2&&(se=!1,Y.dynamicChildren=null);const{type:pe,ref:Re,shapeFlag:Me}=Y;switch(pe){case Kc:_(G,Y,oe,Ue);break;case Zi:w(G,Y,oe,Ue);break;case hd:G==null&&C(Y,oe,Ue,Ye);break;case Fe:F(G,Y,oe,Ue,Oe,Le,Ye,te,se);break;default:Me&1?A(G,Y,oe,Ue,Oe,Le,Ye,te,se):Me&6?H(G,Y,oe,Ue,Oe,Le,Ye,te,se):(Me&64||Me&128)&&pe.process(G,Y,oe,Ue,Oe,Le,Ye,te,se,Ae)}Re!=null&&Oe?wh(Re,G&&G.ref,Le,Y||G,!Y):Re==null&&G&&G.ref!=null&&wh(G.ref,null,Le,G,!0)},_=(G,Y,oe,Ue)=>{if(G==null)i(Y.el=a(Y.children),oe,Ue);else{const Oe=Y.el=G.el;Y.children!==G.children&&c(Oe,Y.children)}},w=(G,Y,oe,Ue)=>{G==null?i(Y.el=l(Y.children||""),oe,Ue):Y.el=G.el},C=(G,Y,oe,Ue)=>{[G.el,G.anchor]=g(G.children,Y,oe,Ue,G.el,G.anchor)},k=({el:G,anchor:Y},oe,Ue)=>{let Oe;for(;G&&G!==Y;)Oe=f(G),i(G,oe,Ue),G=Oe;i(Y,oe,Ue)},E=({el:G,anchor:Y})=>{let oe;for(;G&&G!==Y;)oe=f(G),r(G),G=oe;r(Y)},A=(G,Y,oe,Ue,Oe,Le,Ye,te,se)=>{Y.type==="svg"?Ye="svg":Y.type==="math"&&(Ye="mathml"),G==null?x(Y,oe,Ue,Oe,Le,Ye,te,se):R(G,Y,Oe,Le,Ye,te,se)},x=(G,Y,oe,Ue,Oe,Le,Ye,te)=>{let se,pe;const{props:Re,shapeFlag:Me,transition:Ie,dirs:Se}=G;if(se=G.el=o(G.type,Le,Re&&Re.is,Re),Me&8?u(se,G.children):Me&16&&D(G.children,se,null,Ue,Oe,R1(G,Le),Ye,te),Se&&Fa(G,null,Ue,"created"),p(se,G,G.scopeId,Ye,Ue),Re){for(const ie in Re)ie!=="value"&&!ph(ie)&&s(se,ie,null,Re[ie],Le,Ue);"value"in Re&&s(se,"value",null,Re.value,Le),(pe=Re.onVnodeBeforeMount)&&Bs(pe,Ue,G)}Se&&Fa(G,null,Ue,"beforeMount");const ye=F5(Oe,Ie);ye&&Ie.beforeEnter(se),i(se,Y,oe),((pe=Re&&Re.onVnodeMounted)||ye||Se)&&fr(()=>{pe&&Bs(pe,Ue,G),ye&&Ie.enter(se),Se&&Fa(G,null,Ue,"mounted")},Oe)},p=(G,Y,oe,Ue,Oe)=>{if(oe&&h(G,oe),Ue)for(let Le=0;Le<Ue.length;Le++)h(G,Ue[Le]);if(Oe){let Le=Oe.subTree;if(Y===Le||qw(Le.type)&&(Le.ssContent===Y||Le.ssFallback===Y)){const Ye=Oe.vnode;p(G,Ye,Ye.scopeId,Ye.slotScopeIds,Oe.parent)}}},D=(G,Y,oe,Ue,Oe,Le,Ye,te,se=0)=>{for(let pe=se;pe<G.length;pe++){const Re=G[pe]=te?Mc(G[pe]):Us(G[pe]);v(null,Re,Y,oe,Ue,Oe,Le,Ye,te)}},R=(G,Y,oe,Ue,Oe,Le,Ye)=>{const te=Y.el=G.el;let{patchFlag:se,dynamicChildren:pe,dirs:Re}=Y;se|=G.patchFlag&16;const Me=G.props||Sn,Ie=Y.props||Sn;let Se;if(oe&&Fu(oe,!1),(Se=Ie.onVnodeBeforeUpdate)&&Bs(Se,oe,Y,G),Re&&Fa(Y,G,oe,"beforeUpdate"),oe&&Fu(oe,!0),(Me.innerHTML&&Ie.innerHTML==null||Me.textContent&&Ie.textContent==null)&&u(te,""),pe?S(G.dynamicChildren,pe,te,oe,Ue,R1(Y,Oe),Le):Ye||re(G,Y,te,null,oe,Ue,R1(Y,Oe),Le,!1),se>0){if(se&16)I(te,Me,Ie,oe,Oe);else if(se&2&&Me.class!==Ie.class&&s(te,"class",null,Ie.class,Oe),se&4&&s(te,"style",Me.style,Ie.style,Oe),se&8){const ye=Y.dynamicProps;for(let ie=0;ie<ye.length;ie++){const _e=ye[ie],Je=Me[_e],ut=Ie[_e];(ut!==Je||_e==="value")&&s(te,_e,Je,ut,Oe,oe)}}se&1&&G.children!==Y.children&&u(te,Y.children)}else!Ye&&pe==null&&I(te,Me,Ie,oe,Oe);((Se=Ie.onVnodeUpdated)||Re)&&fr(()=>{Se&&Bs(Se,oe,Y,G),Re&&Fa(Y,G,oe,"updated")},Ue)},S=(G,Y,oe,Ue,Oe,Le,Ye)=>{for(let te=0;te<Y.length;te++){const se=G[te],pe=Y[te],Re=se.el&&(se.type===Fe||!oa(se,pe)||se.shapeFlag&198)?d(se.el):oe;v(se,pe,Re,null,Ue,Oe,Le,Ye,!0)}},I=(G,Y,oe,Ue,Oe)=>{if(Y!==oe){if(Y!==Sn)for(const Le in Y)!ph(Le)&&!(Le in oe)&&s(G,Le,Y[Le],null,Oe,Ue);for(const Le in oe){if(ph(Le))continue;const Ye=oe[Le],te=Y[Le];Ye!==te&&Le!=="value"&&s(G,Le,te,Ye,Oe,Ue)}"value"in oe&&s(G,"value",Y.value,oe.value,Oe)}},F=(G,Y,oe,Ue,Oe,Le,Ye,te,se)=>{const pe=Y.el=G?G.el:a(""),Re=Y.anchor=G?G.anchor:a("");let{patchFlag:Me,dynamicChildren:Ie,slotScopeIds:Se}=Y;Se&&(te=te?te.concat(Se):Se),G==null?(i(pe,oe,Ue),i(Re,oe,Ue),D(Y.children||[],oe,Re,Oe,Le,Ye,te,se)):Me>0&&Me&64&&Ie&&G.dynamicChildren?(S(G.dynamicChildren,Ie,oe,Oe,Le,Ye,te),(Y.key!=null||Oe&&Y===Oe.subTree)&&aA(G,Y,!0)):re(G,Y,oe,Re,Oe,Le,Ye,te,se)},H=(G,Y,oe,Ue,Oe,Le,Ye,te,se)=>{Y.slotScopeIds=te,G==null?Y.shapeFlag&512?Oe.ctx.activate(Y,oe,Ue,Ye,se):q(Y,oe,Ue,Oe,Le,Ye,se):N(G,Y,se)},q=(G,Y,oe,Ue,Oe,Le,Ye)=>{const te=G.component=eB(G,Ue,Oe);if(pv(G)&&(te.ctx.renderer=Ae),nB(te,!1,Ye),te.asyncDep){if(Oe&&Oe.registerDep(te,$,Ye),!G.el){const se=te.subTree=Ce(Zi);w(null,se,Y,oe),G.placeholder=se.el}}else $(te,G,Y,oe,Oe,Le,Ye)},N=(G,Y,oe)=>{const Ue=Y.component=G.component;if(wG(G,Y,oe))if(Ue.asyncDep&&!Ue.asyncResolved){U(Ue,Y,oe);return}else Ue.next=Y,Ue.update();else Y.el=G.el,Ue.vnode=Y},$=(G,Y,oe,Ue,Oe,Le,Ye)=>{const te=()=>{if(G.isMounted){let{next:Me,bu:Ie,u:Se,parent:ye,vnode:ie}=G;{const Ot=U5(G);if(Ot){Me&&(Me.el=ie.el,U(G,Me,Ye)),Ot.asyncDep.then(()=>{G.isUnmounted||te()});return}}let _e=Me,Je;Fu(G,!1),Me?(Me.el=ie.el,U(G,Me,Ye)):Me=ie,Ie&&vh(Ie),(Je=Me.props&&Me.props.onVnodeBeforeUpdate)&&Bs(Je,ye,Me,ie),Fu(G,!0);const ut=ew(G),ft=G.subTree;G.subTree=ut,v(ft,ut,d(ft.el),ae(ft),G,Oe,Le),Me.el=ut.el,_e===null&&N_(G,ut.el),Se&&fr(Se,Oe),(Je=Me.props&&Me.props.onVnodeUpdated)&&fr(()=>Bs(Je,ye,Me,ie),Oe)}else{let Me;const{el:Ie,props:Se}=Y,{bm:ye,m:ie,parent:_e,root:Je,type:ut}=G,ft=Gc(Y);if(Fu(G,!1),ye&&vh(ye),!ft&&(Me=Se&&Se.onVnodeBeforeMount)&&Bs(Me,_e,Y),Fu(G,!0),Ie&&Ee){const Ot=()=>{G.subTree=ew(G),Ee(Ie,G.subTree,G,Oe,null)};ft&&ut.__asyncHydrate?ut.__asyncHydrate(Ie,G,Ot):Ot()}else{Je.ce&&Je.ce._def.shadowRoot!==!1&&Je.ce._injectChildStyle(ut);const Ot=G.subTree=ew(G);v(null,Ot,oe,Ue,G,Oe,Le),Y.el=Ot.el}if(ie&&fr(ie,Oe),!ft&&(Me=Se&&Se.onVnodeMounted)){const Ot=Y;fr(()=>Bs(Me,_e,Ot),Oe)}(Y.shapeFlag&256||_e&&Gc(_e.vnode)&&_e.vnode.shapeFlag&256)&&G.a&&fr(G.a,Oe),G.isMounted=!0,Y=oe=Ue=null}};G.scope.on();const se=G.effect=new _p(te);G.scope.off();const pe=G.update=se.run.bind(se),Re=G.job=se.runIfDirty.bind(se);Re.i=G,Re.id=G.uid,se.scheduler=()=>qS(Re),Fu(G,!0),pe()},U=(G,Y,oe)=>{Y.component=G;const Ue=G.vnode.props;G.vnode=Y,G.next=null,oG(G,Y.props,Ue,oe),uG(G,Y.children,oe),Ql(),Wx(G),Zl()},re=(G,Y,oe,Ue,Oe,Le,Ye,te,se=!1)=>{const pe=G&&G.children,Re=G?G.shapeFlag:0,Me=Y.children,{patchFlag:Ie,shapeFlag:Se}=Y;if(Ie>0){if(Ie&128){z(pe,Me,oe,Ue,Oe,Le,Ye,te,se);return}else if(Ie&256){K(pe,Me,oe,Ue,Oe,Le,Ye,te,se);return}}Se&8?(Re&16&&J(pe,Oe,Le),Me!==pe&&u(oe,Me)):Re&16?Se&16?z(pe,Me,oe,Ue,Oe,Le,Ye,te,se):J(pe,Oe,Le,!0):(Re&8&&u(oe,""),Se&16&&D(Me,oe,Ue,Oe,Le,Ye,te,se))},K=(G,Y,oe,Ue,Oe,Le,Ye,te,se)=>{G=G||mh,Y=Y||mh;const pe=G.length,Re=Y.length,Me=Math.min(pe,Re);let Ie;for(Ie=0;Ie<Me;Ie++){const Se=Y[Ie]=se?Mc(Y[Ie]):Us(Y[Ie]);v(G[Ie],Se,oe,null,Oe,Le,Ye,te,se)}pe>Re?J(G,Oe,Le,!0,!1,Me):D(Y,oe,Ue,Oe,Le,Ye,te,se,Me)},z=(G,Y,oe,Ue,Oe,Le,Ye,te,se)=>{let pe=0;const Re=Y.length;let Me=G.length-1,Ie=Re-1;for(;pe<=Me&&pe<=Ie;){const Se=G[pe],ye=Y[pe]=se?Mc(Y[pe]):Us(Y[pe]);if(oa(Se,ye))v(Se,ye,oe,null,Oe,Le,Ye,te,se);else break;pe++}for(;pe<=Me&&pe<=Ie;){const Se=G[Me],ye=Y[Ie]=se?Mc(Y[Ie]):Us(Y[Ie]);if(oa(Se,ye))v(Se,ye,oe,null,Oe,Le,Ye,te,se);else break;Me--,Ie--}if(pe>Me){if(pe<=Ie){const Se=Ie+1,ye=Se<Re?Y[Se].el:Ue;for(;pe<=Ie;)v(null,Y[pe]=se?Mc(Y[pe]):Us(Y[pe]),oe,ye,Oe,Le,Ye,te,se),pe++}}else if(pe>Ie)for(;pe<=Me;)Q(G[pe],Oe,Le,!0),pe++;else{const Se=pe,ye=pe,ie=new Map;for(pe=ye;pe<=Ie;pe++){const ee=Y[pe]=se?Mc(Y[pe]):Us(Y[pe]);ee.key!=null&&ie.set(ee.key,pe)}let _e,Je=0;const ut=Ie-ye+1;let ft=!1,Ot=0;const Qt=new Array(ut);for(pe=0;pe<ut;pe++)Qt[pe]=0;for(pe=Se;pe<=Me;pe++){const ee=G[pe];if(Je>=ut){Q(ee,Oe,Le,!0);continue}let Te;if(ee.key!=null)Te=ie.get(ee.key);else for(_e=ye;_e<=Ie;_e++)if(Qt[_e-ye]===0&&oa(ee,Y[_e])){Te=_e;break}Te===void 0?Q(ee,Oe,Le,!0):(Qt[Te-ye]=pe+1,Te>=Ot?Ot=Te:ft=!0,v(ee,Y[Te],oe,null,Oe,Le,Ye,te,se),Je++)}const me=ft?dG(Qt):mh;for(_e=me.length-1,pe=ut-1;pe>=0;pe--){const ee=ye+pe,Te=Y[ee],rt=Y[ee+1],Rt=ee+1<Re?rt.el||rt.placeholder:Ue;Qt[pe]===0?v(null,Te,oe,Rt,Oe,Le,Ye,te,se):ft&&(_e<0||pe!==me[_e]?ge(Te,oe,Rt,2):_e--)}}},ge=(G,Y,oe,Ue,Oe=null)=>{const{el:Le,type:Ye,transition:te,children:se,shapeFlag:pe}=G;if(pe&6){ge(G.component.subTree,Y,oe,Ue);return}if(pe&128){G.suspense.move(Y,oe,Ue);return}if(pe&64){Ye.move(G,Y,oe,Ae);return}if(Ye===Fe){i(Le,Y,oe);for(let Me=0;Me<se.length;Me++)ge(se[Me],Y,oe,Ue);i(G.anchor,Y,oe);return}if(Ye===hd){k(G,Y,oe);return}if(Ue!==2&&pe&1&&te)if(Ue===0)te.beforeEnter(Le),i(Le,Y,oe),fr(()=>te.enter(Le),Oe);else{const{leave:Me,delayLeave:Ie,afterLeave:Se}=te,ye=()=>{G.ctx.isUnmounted?r(Le):i(Le,Y,oe)},ie=()=>{Le._isLeaving&&Le[Nl](!0),Me(Le,()=>{ye(),Se&&Se()})};Ie?Ie(Le,ye,ie):ie()}else i(Le,Y,oe)},Q=(G,Y,oe,Ue=!1,Oe=!1)=>{const{type:Le,props:Ye,ref:te,children:se,dynamicChildren:pe,shapeFlag:Re,patchFlag:Me,dirs:Ie,cacheIndex:Se}=G;if(Me===-2&&(Oe=!1),te!=null&&(Ql(),wh(te,null,oe,G,!0),Zl()),Se!=null&&(Y.renderCache[Se]=void 0),Re&256){Y.ctx.deactivate(G);return}const ye=Re&1&&Ie,ie=!Gc(G);let _e;if(ie&&(_e=Ye&&Ye.onVnodeBeforeUnmount)&&Bs(_e,Y,G),Re&6)ce(G.component,oe,Ue);else{if(Re&128){G.suspense.unmount(oe,Ue);return}ye&&Fa(G,null,Y,"beforeUnmount"),Re&64?G.type.remove(G,Y,oe,Ae,Ue):pe&&!pe.hasOnce&&(Le!==Fe||Me>0&&Me&64)?J(pe,Y,oe,!1,!0):(Le===Fe&&Me&384||!Oe&&Re&16)&&J(se,Y,oe),Ue&&ue(G)}(ie&&(_e=Ye&&Ye.onVnodeUnmounted)||ye)&&fr(()=>{_e&&Bs(_e,Y,G),ye&&Fa(G,null,Y,"unmounted")},oe)},ue=G=>{const{type:Y,el:oe,anchor:Ue,transition:Oe}=G;if(Y===Fe){ve(oe,Ue);return}if(Y===hd){E(G);return}const Le=()=>{r(oe),Oe&&!Oe.persisted&&Oe.afterLeave&&Oe.afterLeave()};if(G.shapeFlag&1&&Oe&&!Oe.persisted){const{leave:Ye,delayLeave:te}=Oe,se=()=>Ye(oe,Le);te?te(G.el,Le,se):se()}else Le()},ve=(G,Y)=>{let oe;for(;G!==Y;)oe=f(G),r(G),G=oe;r(Y)},ce=(G,Y,oe)=>{const{bum:Ue,scope:Oe,job:Le,subTree:Ye,um:te,m:se,a:pe}=G;jw(se),jw(pe),Ue&&vh(Ue),Oe.stop(),Le&&(Le.flags|=8,Q(Ye,G,Y,oe)),te&&fr(te,Y),fr(()=>{G.isUnmounted=!0},Y)},J=(G,Y,oe,Ue=!1,Oe=!1,Le=0)=>{for(let Ye=Le;Ye<G.length;Ye++)Q(G[Ye],Y,oe,Ue,Oe)},ae=G=>{if(G.shapeFlag&6)return ae(G.component.subTree);if(G.shapeFlag&128)return G.suspense.next();const Y=f(G.anchor||G.el),oe=Y&&Y[u5];return oe?f(oe):Y};let xe=!1;const he=(G,Y,oe)=>{G==null?Y._vnode&&Q(Y._vnode,null,null,!0):v(Y._vnode||null,G,Y,null,null,null,oe),Y._vnode=G,xe||(xe=!0,Wx(),zw(),xe=!1)},Ae={p:v,um:Q,m:ge,r:ue,mt:q,mc:D,pc:re,pbc:S,n:ae,o:n};let We,Ee;return t&&([We,Ee]=t(Ae)),{render:he,hydrate:We,createApp:rG(he,We)}}function R1({type:n,props:t},e){return e==="svg"&&n==="foreignObject"||e==="mathml"&&n==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function Fu({effect:n,job:t},e){e?(n.flags|=32,t.flags|=4):(n.flags&=-33,t.flags&=-5)}function F5(n,t){return(!n||n&&!n.pendingBranch)&&t&&!t.persisted}function aA(n,t,e=!1){const i=n.children,r=t.children;if(xt(i)&&xt(r))for(let s=0;s<i.length;s++){const o=i[s];let a=r[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[s]=Mc(r[s]),a.el=o.el),!e&&a.patchFlag!==-2&&aA(o,a)),a.type===Kc&&a.patchFlag!==-1&&(a.el=o.el),a.type===Zi&&!a.el&&(a.el=o.el)}}function dG(n){const t=n.slice(),e=[0];let i,r,s,o,a;const l=n.length;for(i=0;i<l;i++){const c=n[i];if(c!==0){if(r=e[e.length-1],n[r]<c){t[i]=r,e.push(i);continue}for(s=0,o=e.length-1;s<o;)a=s+o>>1,n[e[a]]<c?s=a+1:o=a;c<n[e[s]]&&(s>0&&(t[i]=e[s-1]),e[s]=i)}}for(s=e.length,o=e[s-1];s-- >0;)e[s]=o,o=t[o];return e}function U5(n){const t=n.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:U5(t)}function jw(n){if(n)for(let t=0;t<n.length;t++)n[t].flags|=8}const z5=Symbol.for("v-scx"),H5=()=>Ci(z5);function yh(n,t){return vv(n,null,t)}function fG(n,t){return vv(n,null,{flush:"post"})}function W5(n,t){return vv(n,null,{flush:"sync"})}function gt(n,t,e){return vv(n,t,e)}function vv(n,t,e=Sn){const{immediate:i,deep:r,flush:s,once:o}=e,a=pi({},e),l=t&&i||!t&&s!=="post";let c;if(Vh){if(s==="sync"){const h=H5();c=h.__watcherHandles||(h.__watcherHandles=[])}else if(!l){const h=()=>{};return h.stop=Vo,h.resume=Vo,h.pause=Vo,h}}const u=$r;a.call=(h,g,v)=>$o(h,u,g,v);let d=!1;s==="post"?a.scheduler=h=>{fr(h,u&&u.suspense)}:s!=="sync"&&(d=!0,a.scheduler=(h,g)=>{g?h():qS(h)}),a.augmentJob=h=>{t&&(h.flags|=4),d&&(h.flags|=2,u&&(h.id=u.uid,h.i=u))};const f=uq(n,t,a);return Vh&&(c?c.push(f):l&&f()),f}function hG(n,t,e){const i=this.proxy,r=_i(n)?n.includes(".")?j5(i,n):()=>i[n]:n.bind(i,i);let s;Gt(t)?s=t:(s=t.handler,e=t);const o=Cd(this),a=vv(r,s.bind(i),e);return o(),a}function j5(n,t){const e=t.split(".");return()=>{let i=n;for(let r=0;r<e.length&&i;r++)i=i[e[r]];return i}}function q5(n,t,e=Sn){const i=Yr(),r=Hr(t),s=zs(t),o=G5(n,r),a=n5((l,c)=>{let u,d=Sn,f;return W5(()=>{const h=n[r];ws(u,h)&&(u=h,c())}),{get(){return l(),e.get?e.get(u):u},set(h){const g=e.set?e.set(h):h;if(!ws(g,u)&&!(d!==Sn&&ws(h,d)))return;const v=i.vnode.props;v&&(t in v||r in v||s in v)&&(`onUpdate:${t}`in v||`onUpdate:${r}`in v||`onUpdate:${s}`in v)||(u=h,c()),i.emit(`update:${t}`,g),ws(h,g)&&ws(h,d)&&!ws(g,f)&&c(),d=h,f=g}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||Sn:a,done:!1}:{done:!0}}}},a}const G5=(n,t)=>t==="modelValue"||t==="model-value"?n.modelModifiers:n[`${t}Modifiers`]||n[`${Hr(t)}Modifiers`]||n[`${zs(t)}Modifiers`];function mG(n,t,...e){if(n.isUnmounted)return;const i=n.vnode.props||Sn;let r=e;const s=t.startsWith("update:"),o=s&&G5(i,t.slice(7));o&&(o.trim&&(r=e.map(u=>_i(u)?u.trim():u)),o.number&&(r=e.map(Lw)));let a,l=i[a=Fg(t)]||i[a=Fg(Hr(t))];!l&&s&&(l=i[a=Fg(zs(t))]),l&&$o(l,n,6,r);const c=i[a+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,$o(c,n,6,r)}}const gG=new WeakMap;function K5(n,t,e=!1){const i=e?gG:t.emitsCache,r=i.get(n);if(r!==void 0)return r;const s=n.emits;let o={},a=!1;if(!Gt(n)){const l=c=>{const u=K5(c,t,!0);u&&(a=!0,pi(o,u))};!e&&t.mixins.length&&t.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!s&&!a?(hi(n)&&i.set(n,null),null):(xt(s)?s.forEach(l=>o[l]=null):pi(o,s),hi(n)&&i.set(n,o),o)}function D_(n,t){return!n||!mv(t)?!1:(t=t.slice(2).replace(/Once$/,""),Yn(n,t[0].toLowerCase()+t.slice(1))||Yn(n,zs(t))||Yn(n,t))}function ew(n){const{type:t,vnode:e,proxy:i,withProxy:r,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:d,data:f,setupState:h,ctx:g,inheritAttrs:v}=n,_=Sp(n);let w,C;try{if(e.shapeFlag&4){const E=r||i,A=E;w=Us(c.call(A,E,u,d,h,f,g)),C=a}else{const E=t;w=Us(E.length>1?E(d,{attrs:a,slots:o,emit:l}):E(d,null)),C=t.props?a:vG(a)}}catch(E){jg.length=0,zd(E,n,1),w=Ce(Zi)}let k=w;if(C&&v!==!1){const E=Object.keys(C),{shapeFlag:A}=k;E.length&&A&7&&(s&&E.some(VS)&&(C=bG(C,s)),k=_a(k,C,!1,!0))}return e.dirs&&(k=_a(k,null,!1,!0),k.dirs=k.dirs?k.dirs.concat(e.dirs):e.dirs),e.transition&&Jl(k,e.transition),w=k,Sp(_),w}function pG(n,t=!0){let e;for(let i=0;i<n.length;i++){const r=n[i];if(ya(r)){if(r.type!==Zi||r.children==="v-if"){if(e)return;e=r}}else return}return e}const vG=n=>{let t;for(const e in n)(e==="class"||e==="style"||mv(e))&&((t||(t={}))[e]=n[e]);return t},bG=(n,t)=>{const e={};for(const i in n)(!VS(i)||!(i.slice(9)in t))&&(e[i]=n[i]);return e};function wG(n,t,e){const{props:i,children:r,component:s}=n,{props:o,children:a,patchFlag:l}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&l>=0){if(l&1024)return!0;if(l&16)return i?iO(i,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(o[f]!==i[f]&&!D_(c,f))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?iO(i,o,c):!0:!!o;return!1}function iO(n,t,e){const i=Object.keys(t);if(i.length!==Object.keys(n).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(t[s]!==n[s]&&!D_(e,s))return!0}return!1}function N_({vnode:n,parent:t},e){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===n&&(i.el=n.el),i===n)(n=t.vnode).el=e,t=t.parent;else break}}const qw=n=>n.__isSuspense;let JE=0;const yG={name:"Suspense",__isSuspense:!0,process(n,t,e,i,r,s,o,a,l,c){if(n==null)kG(t,e,i,r,s,o,a,l,c);else{if(s&&s.deps>0&&!n.suspense.isInFallback){t.suspense=n.suspense,t.suspense.vnode=t,t.el=n.el;return}EG(n,t,e,i,r,o,a,l,c)}},hydrate:CG,normalize:TG},_G=yG;function Ip(n,t){const e=n.props&&n.props[t];Gt(e)&&e()}function kG(n,t,e,i,r,s,o,a,l){const{p:c,o:{createElement:u}}=l,d=u("div"),f=n.suspense=Y5(n,r,i,t,d,e,s,o,a,l);c(null,f.pendingBranch=n.ssContent,d,null,i,f,s,o),f.deps>0?(Ip(n,"onPending"),Ip(n,"onFallback"),c(null,n.ssFallback,t,e,i,null,s,o),_h(f,n.ssFallback)):f.resolve(!1,!0)}function EG(n,t,e,i,r,s,o,a,{p:l,um:c,o:{createElement:u}}){const d=t.suspense=n.suspense;d.vnode=t,t.el=n.el;const f=t.ssContent,h=t.ssFallback,{activeBranch:g,pendingBranch:v,isInFallback:_,isHydrating:w}=d;if(v)d.pendingBranch=f,oa(v,f)?(l(v,f,d.hiddenContainer,null,r,d,s,o,a),d.deps<=0?d.resolve():_&&(w||(l(g,h,e,i,r,null,s,o,a),_h(d,h)))):(d.pendingId=JE++,w?(d.isHydrating=!1,d.activeBranch=v):c(v,r,d),d.deps=0,d.effects.length=0,d.hiddenContainer=u("div"),_?(l(null,f,d.hiddenContainer,null,r,d,s,o,a),d.deps<=0?d.resolve():(l(g,h,e,i,r,null,s,o,a),_h(d,h))):g&&oa(g,f)?(l(g,f,e,i,r,d,s,o,a),d.resolve(!0)):(l(null,f,d.hiddenContainer,null,r,d,s,o,a),d.deps<=0&&d.resolve()));else if(g&&oa(g,f))l(g,f,e,i,r,d,s,o,a),_h(d,f);else if(Ip(t,"onPending"),d.pendingBranch=f,f.shapeFlag&512?d.pendingId=f.component.suspenseId:d.pendingId=JE++,l(null,f,d.hiddenContainer,null,r,d,s,o,a),d.deps<=0)d.resolve();else{const{timeout:C,pendingId:k}=d;C>0?setTimeout(()=>{d.pendingId===k&&d.fallback(h)},C):C===0&&d.fallback(h)}}function Y5(n,t,e,i,r,s,o,a,l,c,u=!1){const{p:d,m:f,um:h,n:g,o:{parentNode:v,remove:_}}=c;let w;const C=SG(n);C&&t&&t.pendingBranch&&(w=t.pendingId,t.deps++);const k=n.props?Mw(n.props.timeout):void 0,E=s,A={vnode:n,parent:t,parentComponent:e,namespace:o,container:i,hiddenContainer:r,deps:0,pendingId:JE++,timeout:typeof k=="number"?k:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(x=!1,p=!1){const{vnode:D,activeBranch:R,pendingBranch:S,pendingId:I,effects:F,parentComponent:H,container:q}=A;let N=!1;A.isHydrating?A.isHydrating=!1:x||(N=R&&S.transition&&S.transition.mode==="out-in",N&&(R.transition.afterLeave=()=>{I===A.pendingId&&(f(S,q,s===E?g(R):s,0),Cp(F))}),R&&(v(R.el)===q&&(s=g(R)),h(R,H,A,!0)),N||f(S,q,s,0)),_h(A,S),A.pendingBranch=null,A.isInFallback=!1;let $=A.parent,U=!1;for(;$;){if($.pendingBranch){$.effects.push(...F),U=!0;break}$=$.parent}!U&&!N&&Cp(F),A.effects=[],C&&t&&t.pendingBranch&&w===t.pendingId&&(t.deps--,t.deps===0&&!p&&t.resolve()),Ip(D,"onResolve")},fallback(x){if(!A.pendingBranch)return;const{vnode:p,activeBranch:D,parentComponent:R,container:S,namespace:I}=A;Ip(p,"onFallback");const F=g(D),H=()=>{A.isInFallback&&(d(null,x,S,F,R,null,I,a,l),_h(A,x))},q=x.transition&&x.transition.mode==="out-in";q&&(D.transition.afterLeave=H),A.isInFallback=!0,h(D,R,null,!0),q||H()},move(x,p,D){A.activeBranch&&f(A.activeBranch,x,p,D),A.container=x},next(){return A.activeBranch&&g(A.activeBranch)},registerDep(x,p,D){const R=!!A.pendingBranch;R&&A.deps++;const S=x.vnode.el;x.asyncDep.catch(I=>{zd(I,x,0)}).then(I=>{if(x.isUnmounted||A.isUnmounted||A.pendingId!==x.suspenseId)return;x.asyncResolved=!0;const{vnode:F}=x;nC(x,I,!1),S&&(F.el=S);const H=!S&&x.subTree.el;p(x,F,v(S||x.subTree.el),S?null:g(x.subTree),A,o,D),H&&_(H),N_(x,F.el),R&&--A.deps===0&&A.resolve()})},unmount(x,p){A.isUnmounted=!0,A.activeBranch&&h(A.activeBranch,e,x,p),A.pendingBranch&&h(A.pendingBranch,e,x,p)}};return A}function CG(n,t,e,i,r,s,o,a,l){const c=t.suspense=Y5(t,i,e,n.parentNode,document.createElement("div"),null,r,s,o,a,!0),u=l(n,c.pendingBranch=t.ssContent,e,c,s,o);return c.deps===0&&c.resolve(!1,!0),u}function TG(n){const{shapeFlag:t,children:e}=n,i=t&32;n.ssContent=rO(i?e.default:e),n.ssFallback=i?rO(e.fallback):Ce(Zi)}function rO(n){let t;if(Gt(n)){const e=Ed&&n._c;e&&(n._d=!1,P()),n=n(),e&&(n._d=!0,t=rs,Z5())}return xt(n)&&(n=pG(n)),n=Us(n),t&&!n.dynamicChildren&&(n.dynamicChildren=t.filter(e=>e!==n)),n}function Q5(n,t){t&&t.pendingBranch?xt(n)?t.effects.push(...n):t.effects.push(n):Cp(n)}function _h(n,t){n.activeBranch=t;const{vnode:e,parentComponent:i}=n;let r=t.el;for(;!r&&t.component;)t=t.component.subTree,r=t.el;e.el=r,i&&i.subTree===e&&(i.vnode.el=r,N_(i,r))}function SG(n){const t=n.props&&n.props.suspensible;return t!=null&&t!==!1}const Fe=Symbol.for("v-fgt"),Kc=Symbol.for("v-txt"),Zi=Symbol.for("v-cmt"),hd=Symbol.for("v-stc"),jg=[];let rs=null;function P(n=!1){jg.push(rs=n?null:[])}function Z5(){jg.pop(),rs=jg[jg.length-1]||null}let Ed=1;function Pp(n,t=!1){Ed+=n,n<0&&rs&&t&&(rs.hasOnce=!0)}function J5(n){return n.dynamicChildren=Ed>0?rs||mh:null,Z5(),Ed>0&&rs&&rs.push(n),n}function V(n,t,e,i,r,s){return J5(m(n,t,e,i,r,s,!0))}function Ge(n,t,e,i,r){return J5(Ce(n,t,e,i,r,!0))}function ya(n){return n?n.__v_isVNode===!0:!1}function oa(n,t){return n.type===t.type&&n.key===t.key}function AG(n){}const X5=({key:n})=>n??null,tw=({ref:n,ref_key:t,ref_for:e})=>(typeof n=="number"&&(n=""+n),n!=null?_i(n)||En(n)||Gt(n)?{i:Fr,r:n,k:t,f:!!e}:n:null);function m(n,t=null,e=null,i=0,r=null,s=n===Fe?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:t,key:t&&X5(t),ref:t&&tw(t),scopeId:P_,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Fr};return a?(lA(l,e),s&128&&n.normalize(l)):e&&(l.shapeFlag|=_i(e)?8:16),Ed>0&&!o&&rs&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&rs.push(l),l}const Ce=IG;function IG(n,t=null,e=null,i=0,r=null,s=!1){if((!n||n===T5)&&(n=Zi),ya(n)){const a=_a(n,t,!0);return e&&lA(a,e),Ed>0&&!s&&rs&&(a.shapeFlag&6?rs[rs.indexOf(n)]=a:rs.push(a)),a.patchFlag=-2,a}if(NG(n)&&(n=n.__vccOpts),t){t=lr(t);let{class:a,style:l}=t;a&&!_i(a)&&(t.class=Ze(a)),hi(l)&&(I_(l)&&!xt(l)&&(l=pi({},l)),t.style=Di(l))}const o=_i(n)?1:qw(n)?128:d5(n)?64:hi(n)?4:Gt(n)?2:0;return m(n,t,e,i,r,o,s,!0)}function lr(n){return n?I_(n)||O5(n)?pi({},n):n:null}function _a(n,t,e=!1,i=!1){const{props:r,ref:s,patchFlag:o,children:a,transition:l}=n,c=t?An(r||{},t):r,u={__v_isVNode:!0,__v_skip:!0,type:n.type,props:c,key:c&&X5(c),ref:t&&t.ref?e&&s?xt(s)?s.concat(tw(t)):[s,tw(t)]:tw(t):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:t&&n.type!==Fe?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&_a(n.ssContent),ssFallback:n.ssFallback&&_a(n.ssFallback),placeholder:n.placeholder,el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&i&&Jl(u,l.clone(u)),u}function fe(n=" ",t=0){return Ce(Kc,null,n,t)}function XE(n,t){const e=Ce(hd,null,n);return e.staticCount=t,e}function ne(n="",t=!1){return t?(P(),Ge(Zi,null,n)):Ce(Zi,null,n)}function Us(n){return n==null||typeof n=="boolean"?Ce(Zi):xt(n)?Ce(Fe,null,n.slice()):ya(n)?Mc(n):Ce(Kc,null,String(n))}function Mc(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:_a(n)}function lA(n,t){let e=0;const{shapeFlag:i}=n;if(t==null)t=null;else if(xt(t))e=16;else if(typeof t=="object")if(i&65){const r=t.default;r&&(r._c&&(r._d=!1),lA(n,r()),r._c&&(r._d=!0));return}else{e=32;const r=t._;!r&&!O5(t)?t._ctx=Fr:r===3&&Fr&&(Fr.slots._===1?t._=1:(t._=2,n.patchFlag|=1024))}else Gt(t)?(t={default:t,_ctx:Fr},e=32):(t=String(t),i&64?(e=16,t=[fe(t)]):e=8);n.children=t,n.shapeFlag|=e}function An(...n){const t={};for(let e=0;e<n.length;e++){const i=n[e];for(const r in i)if(r==="class")t.class!==i.class&&(t.class=Ze([t.class,i.class]));else if(r==="style")t.style=Di([t.style,i.style]);else if(mv(r)){const s=t[r],o=i[r];o&&s!==o&&!(xt(s)&&s.includes(o))&&(t[r]=s?[].concat(s,o):o)}else r!==""&&(t[r]=i[r])}return t}function Bs(n,t,e,i=null){$o(n,t,7,[e,i])}const PG=I5();let xG=0;function eB(n,t,e){const i=n.type,r=(t?t.appContext:n.appContext)||PG,s={uid:xG++,vnode:n,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new MS(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:V5(i,r),emitsOptions:K5(i,r),emit:null,emitted:null,propsDefaults:Sn,inheritAttrs:i.inheritAttrs,ctx:Sn,data:Sn,props:Sn,attrs:Sn,slots:Sn,refs:Sn,setupState:Sn,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=mG.bind(null,s),n.ce&&n.ce(s),s}let $r=null;const Yr=()=>$r||Fr;let Gw,eC;{const n=k_(),t=(e,i)=>{let r;return(r=n[e])||(r=n[e]=[]),r.push(i),s=>{r.length>1?r.forEach(o=>o(s)):r[0](s)}};Gw=t("__VUE_INSTANCE_SETTERS__",e=>$r=e),eC=t("__VUE_SSR_SETTERS__",e=>Vh=e)}const Cd=n=>{const t=$r;return Gw(n),n.scope.on(),()=>{n.scope.off(),Gw(t)}},tC=()=>{$r&&$r.scope.off(),Gw(null)};function tB(n){return n.vnode.shapeFlag&4}let Vh=!1;function nB(n,t=!1,e=!1){t&&eC(t);const{props:i,children:r}=n.vnode,s=tB(n);sG(n,i,s,t),cG(n,r,e||t);const o=s?OG(n,t):void 0;return t&&eC(!1),o}function OG(n,t){const e=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,GE);const{setup:i}=e;if(i){Ql();const r=n.setupContext=i.length>1?rB(n):null,s=Cd(n),o=wm(i,n,0,[n.props,r]),a=NS(o);if(Zl(),s(),(a||n.sp)&&!Gc(n)&&YS(n),a){if(o.then(tC,tC),t)return o.then(l=>{nC(n,l,t)}).catch(l=>{zd(l,n,0)});n.asyncDep=o}else nC(n,o,t)}else iB(n,t)}function nC(n,t,e){Gt(t)?n.type.__ssrInlineRender?n.ssrRender=t:n.render=t:hi(t)&&(n.setupState=WS(t)),iB(n,e)}let Kw,iC;function RG(n){Kw=n,iC=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,Fq))}}const VG=()=>!Kw;function iB(n,t,e){const i=n.type;if(!n.render){if(!t&&Kw&&!i.render){const r=i.template||iA(n).template;if(r){const{isCustomElement:s,compilerOptions:o}=n.appContext.config,{delimiters:a,compilerOptions:l}=i,c=pi(pi({isCustomElement:s,delimiters:a},o),l);i.render=Kw(r,c)}}n.render=i.render||Vo,iC&&iC(n)}{const r=Cd(n);Ql();try{Jq(n)}finally{Zl(),r()}}}const DG={get(n,t){return ns(n,"get",""),n[t]}};function rB(n){const t=e=>{n.exposed=e||{}};return{attrs:new Proxy(n.attrs,DG),slots:n.slots,emit:n.emit,expose:t}}function bv(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(WS(bm(n.exposed)),{get(t,e){if(e in t)return t[e];if(e in Wg)return Wg[e](n)},has(t,e){return e in t||e in Wg}})):n.proxy}function rC(n,t=!0){return Gt(n)?n.displayName||n.name:n.name||t&&n.__name}function NG(n){return Gt(n)&&"__vccOpts"in n}const le=(n,t)=>oq(n,t,Vh);function ca(n,t,e){const i=(s,o,a)=>{Pp(-1);try{return Ce(s,o,a)}finally{Pp(1)}},r=arguments.length;return r===2?hi(t)&&!xt(t)?ya(t)?i(n,null,[t]):i(n,t):i(n,null,t):(r>3?e=Array.prototype.slice.call(arguments,2):r===3&&ya(e)&&(e=[e]),i(n,t,e))}function LG(){}function MG(n,t,e,i){const r=e[i];if(r&&sB(r,n))return r;const s=t();return s.memo=n.slice(),s.cacheIndex=i,e[i]=s}function sB(n,t){const e=n.memo;if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(ws(e[i],t[i]))return!1;return Ed>0&&rs&&rs.push(n),!0}const wv="3.5.21",$G=Vo,BG=gq,FG=Df,UG=c5,zG={createComponentInstance:eB,setupComponent:nB,renderComponentRoot:ew,setCurrentRenderingInstance:Sp,isVNode:ya,normalizeVNode:Us,getComponentPublicInstance:bv,ensureValidVNode:nA,pushWarningContext:dq,popWarningContext:fq},HG=zG,WG=null,jG=null,qG=null;/**
* @vue/runtime-dom v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let sC;const sO=typeof window<"u"&&window.trustedTypes;if(sO)try{sC=sO.createPolicy("vue",{createHTML:n=>n})}catch{}const oB=sC?n=>sC.createHTML(n):n=>n,GG="http://www.w3.org/2000/svg",KG="http://www.w3.org/1998/Math/MathML",Dl=typeof document<"u"?document:null,oO=Dl&&Dl.createElement("template"),YG={insert:(n,t,e)=>{t.insertBefore(n,e||null)},remove:n=>{const t=n.parentNode;t&&t.removeChild(n)},createElement:(n,t,e,i)=>{const r=t==="svg"?Dl.createElementNS(GG,n):t==="mathml"?Dl.createElementNS(KG,n):e?Dl.createElement(n,{is:e}):Dl.createElement(n);return n==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:n=>Dl.createTextNode(n),createComment:n=>Dl.createComment(n),setText:(n,t)=>{n.nodeValue=t},setElementText:(n,t)=>{n.textContent=t},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Dl.querySelector(n),setScopeId(n,t){n.setAttribute(t,"")},insertStaticContent(n,t,e,i,r,s){const o=e?e.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),e),!(r===s||!(r=r.nextSibling)););else{oO.innerHTML=oB(i==="svg"?`<svg>${n}</svg>`:i==="mathml"?`<math>${n}</math>`:n);const a=oO.content;if(i==="svg"||i==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},kc="transition",Qm="animation",Dh=Symbol("_vtc"),aB={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},lB=pi({},KS,aB),QG=n=>(n.displayName="Transition",n.props=lB,n),jd=QG((n,{slots:t})=>ca(v5,cB(n),t)),Uu=(n,t=[])=>{xt(n)?n.forEach(e=>e(...t)):n&&n(...t)},aO=n=>n?xt(n)?n.some(t=>t.length>1):n.length>1:!1;function cB(n){const t={};for(const F in n)F in aB||(t[F]=n[F]);if(n.css===!1)return t;const{name:e="v",type:i,duration:r,enterFromClass:s=`${e}-enter-from`,enterActiveClass:o=`${e}-enter-active`,enterToClass:a=`${e}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:d=`${e}-leave-from`,leaveActiveClass:f=`${e}-leave-active`,leaveToClass:h=`${e}-leave-to`}=n,g=ZG(r),v=g&&g[0],_=g&&g[1],{onBeforeEnter:w,onEnter:C,onEnterCancelled:k,onLeave:E,onLeaveCancelled:A,onBeforeAppear:x=w,onAppear:p=C,onAppearCancelled:D=k}=t,R=(F,H,q,N)=>{F._enterCancelled=N,xc(F,H?u:a),xc(F,H?c:o),q&&q()},S=(F,H)=>{F._isLeaving=!1,xc(F,d),xc(F,h),xc(F,f),H&&H()},I=F=>(H,q)=>{const N=F?p:C,$=()=>R(H,F,q);Uu(N,[H,$]),lO(()=>{xc(H,F?l:s),$a(H,F?u:a),aO(N)||cO(H,i,v,$)})};return pi(t,{onBeforeEnter(F){Uu(w,[F]),$a(F,s),$a(F,o)},onBeforeAppear(F){Uu(x,[F]),$a(F,l),$a(F,c)},onEnter:I(!1),onAppear:I(!0),onLeave(F,H){F._isLeaving=!0;const q=()=>S(F,H);$a(F,d),F._enterCancelled?($a(F,f),oC()):(oC(),$a(F,f)),lO(()=>{F._isLeaving&&(xc(F,d),$a(F,h),aO(E)||cO(F,i,_,q))}),Uu(E,[F,q])},onEnterCancelled(F){R(F,!1,void 0,!0),Uu(k,[F])},onAppearCancelled(F){R(F,!0,void 0,!0),Uu(D,[F])},onLeaveCancelled(F){S(F),Uu(A,[F])}})}function ZG(n){if(n==null)return null;if(hi(n))return[V1(n.enter),V1(n.leave)];{const t=V1(n);return[t,t]}}function V1(n){return Mw(n)}function $a(n,t){t.split(/\s+/).forEach(e=>e&&n.classList.add(e)),(n[Dh]||(n[Dh]=new Set)).add(t)}function xc(n,t){t.split(/\s+/).forEach(i=>i&&n.classList.remove(i));const e=n[Dh];e&&(e.delete(t),e.size||(n[Dh]=void 0))}function lO(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let JG=0;function cO(n,t,e,i){const r=n._endId=++JG,s=()=>{r===n._endId&&i()};if(e!=null)return setTimeout(s,e);const{type:o,timeout:a,propCount:l}=uB(n,t);if(!o)return i();const c=o+"end";let u=0;const d=()=>{n.removeEventListener(c,f),s()},f=h=>{h.target===n&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),n.addEventListener(c,f)}function uB(n,t){const e=window.getComputedStyle(n),i=g=>(e[g]||"").split(", "),r=i(`${kc}Delay`),s=i(`${kc}Duration`),o=uO(r,s),a=i(`${Qm}Delay`),l=i(`${Qm}Duration`),c=uO(a,l);let u=null,d=0,f=0;t===kc?o>0&&(u=kc,d=o,f=s.length):t===Qm?c>0&&(u=Qm,d=c,f=l.length):(d=Math.max(o,c),u=d>0?o>c?kc:Qm:null,f=u?u===kc?s.length:l.length:0);const h=u===kc&&/\b(?:transform|all)(?:,|$)/.test(i(`${kc}Property`).toString());return{type:u,timeout:d,propCount:f,hasTransform:h}}function uO(n,t){for(;n.length<t.length;)n=n.concat(n);return Math.max(...t.map((e,i)=>dO(e)+dO(n[i])))}function dO(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function oC(){return document.body.offsetHeight}function XG(n,t,e){const i=n[Dh];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?n.removeAttribute("class"):e?n.setAttribute("class",t):n.className=t}const Yw=Symbol("_vod"),dB=Symbol("_vsh"),md={name:"show",beforeMount(n,{value:t},{transition:e}){n[Yw]=n.style.display==="none"?"":n.style.display,e&&t?e.beforeEnter(n):Zm(n,t)},mounted(n,{value:t},{transition:e}){e&&t&&e.enter(n)},updated(n,{value:t,oldValue:e},{transition:i}){!t!=!e&&(i?t?(i.beforeEnter(n),Zm(n,!0),i.enter(n)):i.leave(n,()=>{Zm(n,!1)}):Zm(n,t))},beforeUnmount(n,{value:t}){Zm(n,t)}};function Zm(n,t){n.style.display=t?n[Yw]:"none",n[dB]=!t}function eK(){md.getSSRProps=({value:n})=>{if(!n)return{style:{display:"none"}}}}const fB=Symbol("");function ku(n){const t=Yr();if(!t)return;const e=t.ut=(r=n(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(s=>Qw(s,r))},i=()=>{const r=n(t.proxy);t.ce?Qw(t.ce,r):aC(t.subTree,r),e(r)};R_(()=>{Cp(i)}),Jt(()=>{gt(i,Vo,{flush:"post"});const r=new MutationObserver(i);r.observe(t.subTree.el.parentNode,{childList:!0}),wo(()=>r.disconnect())})}function aC(n,t){if(n.shapeFlag&128){const e=n.suspense;n=e.activeBranch,e.pendingBranch&&!e.isHydrating&&e.effects.push(()=>{aC(e.activeBranch,t)})}for(;n.component;)n=n.component.subTree;if(n.shapeFlag&1&&n.el)Qw(n.el,t);else if(n.type===Fe)n.children.forEach(e=>aC(e,t));else if(n.type===hd){let{el:e,anchor:i}=n;for(;e&&(Qw(e,t),e!==i);)e=e.nextSibling}}function Qw(n,t){if(n.nodeType===1){const e=n.style;let i="";for(const r in t){const s=Pj(t[r]);e.setProperty(`--${r}`,s),i+=`--${r}: ${s};`}e[fB]=i}}const tK=/(?:^|;)\s*display\s*:/;function nK(n,t,e){const i=n.style,r=_i(e);let s=!1;if(e&&!r){if(t)if(_i(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();e[a]==null&&nw(i,a,"")}else for(const o in t)e[o]==null&&nw(i,o,"");for(const o in e)o==="display"&&(s=!0),nw(i,o,e[o])}else if(r){if(t!==e){const o=i[fB];o&&(e+=";"+o),i.cssText=e,s=tK.test(e)}}else t&&n.removeAttribute("style");Yw in n&&(n[Yw]=s?i.display:"",n[dB]&&(i.display="none"))}const fO=/\s*!important$/;function nw(n,t,e){if(xt(e))e.forEach(i=>nw(n,t,i));else if(e==null&&(e=""),t.startsWith("--"))n.setProperty(t,e);else{const i=iK(n,t);fO.test(e)?n.setProperty(zs(i),e.replace(fO,""),"important"):n[i]=e}}const hO=["Webkit","Moz","ms"],D1={};function iK(n,t){const e=D1[t];if(e)return e;let i=Hr(t);if(i!=="filter"&&i in n)return D1[t]=i;i=gv(i);for(let r=0;r<hO.length;r++){const s=hO[r]+i;if(s in n)return D1[t]=s}return t}const mO="http://www.w3.org/1999/xlink";function gO(n,t,e,i,r,s=Aj(t)){i&&t.startsWith("xlink:")?e==null?n.removeAttributeNS(mO,t.slice(6,t.length)):n.setAttributeNS(mO,t,e):e==null||s&&!M$(e)?n.removeAttribute(t):n.setAttribute(t,s?"":ba(e)?String(e):e)}function pO(n,t,e,i,r){if(t==="innerHTML"||t==="textContent"){e!=null&&(n[t]=t==="innerHTML"?oB(e):e);return}const s=n.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?n.getAttribute("value")||"":n.value,l=e==null?n.type==="checkbox"?"on":"":String(e);(a!==l||!("_value"in n))&&(n.value=l),e==null&&n.removeAttribute(t),n._value=e;return}let o=!1;if(e===""||e==null){const a=typeof n[t];a==="boolean"?e=M$(e):e==null&&a==="string"?(e="",o=!0):a==="number"&&(e=0,o=!0)}try{n[t]=e}catch{}o&&n.removeAttribute(r||t)}function Bl(n,t,e,i){n.addEventListener(t,e,i)}function rK(n,t,e,i){n.removeEventListener(t,e,i)}const vO=Symbol("_vei");function sK(n,t,e,i,r=null){const s=n[vO]||(n[vO]={}),o=s[t];if(i&&o)o.value=i;else{const[a,l]=oK(t);if(i){const c=s[t]=cK(i,r);Bl(n,a,c,l)}else o&&(rK(n,a,o,l),s[t]=void 0)}}const bO=/(?:Once|Passive|Capture)$/;function oK(n){let t;if(bO.test(n)){t={};let i;for(;i=n.match(bO);)n=n.slice(0,n.length-i[0].length),t[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):zs(n.slice(2)),t]}let N1=0;const aK=Promise.resolve(),lK=()=>N1||(aK.then(()=>N1=0),N1=Date.now());function cK(n,t){const e=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=e.attached)return;$o(uK(i,e.value),t,5,[i])};return e.value=n,e.attached=lK(),e}function uK(n,t){if(xt(t)){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{e.call(n),n._stopped=!0},t.map(i=>r=>!r._stopped&&i&&i(r))}else return t}const wO=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,dK=(n,t,e,i,r,s)=>{const o=r==="svg";t==="class"?XG(n,i,o):t==="style"?nK(n,e,i):mv(t)?VS(t)||sK(n,t,e,i,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):fK(n,t,i,o))?(pO(n,t,i),!n.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&gO(n,t,i,o,s,t!=="value")):n._isVueCE&&(/[A-Z]/.test(t)||!_i(i))?pO(n,Hr(t),i,s,t):(t==="true-value"?n._trueValue=i:t==="false-value"&&(n._falseValue=i),gO(n,t,i,o))};function fK(n,t,e,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in n&&wO(t)&&Gt(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&n.tagName==="INPUT"||t==="type"&&n.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=n.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return wO(t)&&_i(e)?!1:t in n}const yO={};function hB(n,t,e){let i=Cn(n,t);y_(i)&&(i=pi({},i,t));class r extends L_{constructor(o){super(i,o,e)}}return r.def=i,r}const hK=(n,t)=>hB(n,t,kB),mK=typeof HTMLElement<"u"?HTMLElement:class{};class L_ extends mK{constructor(t,e={},i=xp){super(),this._def=t,this._props=e,this._createApp=i,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&i!==xp?this._root=this.shadowRoot:t.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this}connectedCallback(){if(!this.isConnected)return;!this.shadowRoot&&!this._resolved&&this._parseSlots(),this._connected=!0;let t=this;for(;t=t&&(t.parentNode||t.host);)if(t instanceof L_){this._parent=t;break}this._instance||(this._resolved?this._mount(this._def):t&&t._pendingResolve?this._pendingResolve=t._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(t=this._parent){t&&(this._instance.parent=t._instance,this._inheritParentContext(t))}_inheritParentContext(t=this._parent){t&&this._app&&Object.setPrototypeOf(this._app._context.provides,t._instance.provides)}disconnectedCallback(){this._connected=!1,Zn(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let i=0;i<this.attributes.length;i++)this._setAttr(this.attributes[i].name);this._ob=new MutationObserver(i=>{for(const r of i)this._setAttr(r.attributeName)}),this._ob.observe(this,{attributes:!0});const t=(i,r=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:s,styles:o}=i;let a;if(s&&!xt(s))for(const l in s){const c=s[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=Mw(this._props[l])),(a||(a=Object.create(null)))[Hr(l)]=!0)}this._numberProps=a,this._resolveProps(i),this.shadowRoot&&this._applyStyles(o),this._mount(i)},e=this._def.__asyncLoader;e?this._pendingResolve=e().then(i=>{i.configureApp=this._def.configureApp,t(this._def=i,!0)}):t(this._def)}_mount(t){this._app=this._createApp(t),this._inheritParentContext(),t.configureApp&&t.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const e=this._instance&&this._instance.exposed;if(e)for(const i in e)Yn(this,i)||Object.defineProperty(this,i,{get:()=>M(e[i])})}_resolveProps(t){const{props:e}=t,i=xt(e)?e:Object.keys(e||{});for(const r of Object.keys(this))r[0]!=="_"&&i.includes(r)&&this._setProp(r,this[r]);for(const r of i.map(Hr))Object.defineProperty(this,r,{get(){return this._getProp(r)},set(s){this._setProp(r,s,!0,!0)}})}_setAttr(t){if(t.startsWith("data-v-"))return;const e=this.hasAttribute(t);let i=e?this.getAttribute(t):yO;const r=Hr(t);e&&this._numberProps&&this._numberProps[r]&&(i=Mw(i)),this._setProp(r,i,!1,!0)}_getProp(t){return this._props[t]}_setProp(t,e,i=!0,r=!1){if(e!==this._props[t]&&(e===yO?delete this._props[t]:(this._props[t]=e,t==="key"&&this._app&&(this._app._ceVNode.key=e)),r&&this._instance&&this._update(),i)){const s=this._ob;s&&s.disconnect(),e===!0?this.setAttribute(zs(t),""):typeof e=="string"||typeof e=="number"?this.setAttribute(zs(t),e+""):e||this.removeAttribute(zs(t)),s&&s.observe(this,{attributes:!0})}}_update(){const t=this._createVNode();this._app&&(t.appContext=this._app._context),Jw(t,this._root)}_createVNode(){const t={};this.shadowRoot||(t.onVnodeMounted=t.onVnodeUpdated=this._renderSlots.bind(this));const e=Ce(this._def,pi(t,this._props));return this._instance||(e.ce=i=>{this._instance=i,i.ce=this,i.isCE=!0;const r=(s,o)=>{this.dispatchEvent(new CustomEvent(s,y_(o[0])?pi({detail:o},o[0]):{detail:o}))};i.emit=(s,...o)=>{r(s,o),zs(s)!==s&&r(zs(s),o)},this._setParent()}),e}_applyStyles(t,e){if(!t)return;if(e){if(e===this._def||this._styleChildren.has(e))return;this._styleChildren.add(e)}const i=this._nonce;for(let r=t.length-1;r>=0;r--){const s=document.createElement("style");i&&s.setAttribute("nonce",i),s.textContent=t[r],this.shadowRoot.prepend(s)}}_parseSlots(){const t=this._slots={};let e;for(;e=this.firstChild;){const i=e.nodeType===1&&e.getAttribute("slot")||"default";(t[i]||(t[i]=[])).push(e),this.removeChild(e)}}_renderSlots(){const t=(this._teleportTarget||this).querySelectorAll("slot"),e=this._instance.type.__scopeId;for(let i=0;i<t.length;i++){const r=t[i],s=r.getAttribute("name")||"default",o=this._slots[s],a=r.parentNode;if(o)for(const l of o){if(e&&l.nodeType===1){const c=e+"-s",u=document.createTreeWalker(l,1);l.setAttribute(c,"");let d;for(;d=u.nextNode();)d.setAttribute(c,"")}a.insertBefore(l,r)}else for(;r.firstChild;)a.insertBefore(r.firstChild,r);a.removeChild(r)}}_injectChildStyle(t){this._applyStyles(t.styles,t)}_removeChildStyle(t){}}function mB(n){const t=Yr(),e=t&&t.ce;return e||null}function gK(){const n=mB();return n&&n.shadowRoot}function pK(n="$style"){{const t=Yr();if(!t)return Sn;const e=t.type.__cssModules;if(!e)return Sn;const i=e[n];return i||Sn}}const gB=new WeakMap,pB=new WeakMap,Zw=Symbol("_moveCb"),_O=Symbol("_enterCb"),vK=n=>(delete n.props.mode,n),bK=vK({name:"TransitionGroup",props:pi({},lB,{tag:String,moveClass:String}),setup(n,{slots:t}){const e=Yr(),i=GS();let r,s;return V_(()=>{if(!r.length)return;const o=n.moveClass||`${n.name||"v"}-move`;if(!EK(r[0].el,e.vnode.el,o)){r=[];return}r.forEach(yK),r.forEach(_K);const a=r.filter(kK);oC(),a.forEach(l=>{const c=l.el,u=c.style;$a(c,o),u.transform=u.webkitTransform=u.transitionDuration="";const d=c[Zw]=f=>{f&&f.target!==c||(!f||f.propertyName.endsWith("transform"))&&(c.removeEventListener("transitionend",d),c[Zw]=null,xc(c,o))};c.addEventListener("transitionend",d)}),r=[]}),()=>{const o=en(n),a=cB(o);let l=o.tag||Fe;if(r=[],s)for(let c=0;c<s.length;c++){const u=s[c];u.el&&u.el instanceof Element&&(r.push(u),Jl(u,Rh(u,a,i,e)),gB.set(u,u.el.getBoundingClientRect()))}s=t.default?x_(t.default()):[];for(let c=0;c<s.length;c++){const u=s[c];u.key!=null&&Jl(u,Rh(u,a,i,e))}return Ce(l,null,s)}}}),wK=bK;function yK(n){const t=n.el;t[Zw]&&t[Zw](),t[_O]&&t[_O]()}function _K(n){pB.set(n,n.el.getBoundingClientRect())}function kK(n){const t=gB.get(n),e=pB.get(n),i=t.left-e.left,r=t.top-e.top;if(i||r){const s=n.el.style;return s.transform=s.webkitTransform=`translate(${i}px,${r}px)`,s.transitionDuration="0s",n}}function EK(n,t,e){const i=n.cloneNode(),r=n[Dh];r&&r.forEach(a=>{a.split(/\s+/).forEach(l=>l&&i.classList.remove(l))}),e.split(/\s+/).forEach(a=>a&&i.classList.add(a)),i.style.display="none";const s=t.nodeType===1?t:t.parentNode;s.appendChild(i);const{hasTransform:o}=uB(i);return s.removeChild(i),o}const su=n=>{const t=n.props["onUpdate:modelValue"]||!1;return xt(t)?e=>vh(t,e):t};function CK(n){n.target.composing=!0}function kO(n){const t=n.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const No=Symbol("_assign"),Bi={created(n,{modifiers:{lazy:t,trim:e,number:i}},r){n[No]=su(r);const s=i||r.props&&r.props.type==="number";Bl(n,t?"change":"input",o=>{if(o.target.composing)return;let a=n.value;e&&(a=a.trim()),s&&(a=Lw(a)),n[No](a)}),e&&Bl(n,"change",()=>{n.value=n.value.trim()}),t||(Bl(n,"compositionstart",CK),Bl(n,"compositionend",kO),Bl(n,"change",kO))},mounted(n,{value:t}){n.value=t??""},beforeUpdate(n,{value:t,oldValue:e,modifiers:{lazy:i,trim:r,number:s}},o){if(n[No]=su(o),n.composing)return;const a=(s||n.type==="number")&&!/^0\d/.test(n.value)?Lw(n.value):n.value,l=t??"";a!==l&&(document.activeElement===n&&n.type!=="range"&&(i&&t===e||r&&n.value.trim()===l)||(n.value=l))}},gd={deep:!0,created(n,t,e){n[No]=su(e),Bl(n,"change",()=>{const i=n._modelValue,r=Nh(n),s=n.checked,o=n[No];if(xt(i)){const a=E_(i,r),l=a!==-1;if(s&&!l)o(i.concat(r));else if(!s&&l){const c=[...i];c.splice(a,1),o(c)}}else if(Ud(i)){const a=new Set(i);s?a.add(r):a.delete(r),o(a)}else o(vB(n,s))})},mounted:EO,beforeUpdate(n,t,e){n[No]=su(e),EO(n,t,e)}};function EO(n,{value:t,oldValue:e},i){n._modelValue=t;let r;if(xt(t))r=E_(t,i.props.value)>-1;else if(Ud(t))r=t.has(i.props.value);else{if(t===e)return;r=ru(t,vB(n,!0))}n.checked!==r&&(n.checked=r)}const M_={created(n,{value:t},e){n.checked=ru(t,e.props.value),n[No]=su(e),Bl(n,"change",()=>{n[No](Nh(n))})},beforeUpdate(n,{value:t,oldValue:e},i){n[No]=su(i),t!==e&&(n.checked=ru(t,i.props.value))}},ou={deep:!0,created(n,{value:t,modifiers:{number:e}},i){const r=Ud(t);Bl(n,"change",()=>{const s=Array.prototype.filter.call(n.options,o=>o.selected).map(o=>e?Lw(Nh(o)):Nh(o));n[No](n.multiple?r?new Set(s):s:s[0]),n._assigning=!0,Zn(()=>{n._assigning=!1})}),n[No]=su(i)},mounted(n,{value:t}){CO(n,t)},beforeUpdate(n,t,e){n[No]=su(e)},updated(n,{value:t}){n._assigning||CO(n,t)}};function CO(n,t){const e=n.multiple,i=xt(t);if(!(e&&!i&&!Ud(t))){for(let r=0,s=n.options.length;r<s;r++){const o=n.options[r],a=Nh(o);if(e)if(i){const l=typeof a;l==="string"||l==="number"?o.selected=t.some(c=>String(c)===String(a)):o.selected=E_(t,a)>-1}else o.selected=t.has(a);else if(ru(Nh(o),t)){n.selectedIndex!==r&&(n.selectedIndex=r);return}}!e&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function Nh(n){return"_value"in n?n._value:n.value}function vB(n,t){const e=t?"_trueValue":"_falseValue";return e in n?n[e]:t}const $_={created(n,t,e){ob(n,t,e,null,"created")},mounted(n,t,e){ob(n,t,e,null,"mounted")},beforeUpdate(n,t,e,i){ob(n,t,e,i,"beforeUpdate")},updated(n,t,e,i){ob(n,t,e,i,"updated")}};function bB(n,t){switch(n){case"SELECT":return ou;case"TEXTAREA":return Bi;default:switch(t){case"checkbox":return gd;case"radio":return M_;default:return Bi}}}function ob(n,t,e,i,r){const o=bB(n.tagName,e.props&&e.props.type)[r];o&&o(n,t,e,i)}function TK(){Bi.getSSRProps=({value:n})=>({value:n}),M_.getSSRProps=({value:n},t)=>{if(t.props&&ru(t.props.value,n))return{checked:!0}},gd.getSSRProps=({value:n},t)=>{if(xt(n)){if(t.props&&E_(n,t.props.value)>-1)return{checked:!0}}else if(Ud(n)){if(t.props&&n.has(t.props.value))return{checked:!0}}else if(n)return{checked:!0}},$_.getSSRProps=(n,t)=>{if(typeof t.type!="string")return;const e=bB(t.type.toUpperCase(),t.props&&t.props.type);if(e.getSSRProps)return e.getSSRProps(n,t)}}const SK=["ctrl","shift","alt","meta"],AK={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,t)=>SK.some(e=>n[`${e}Key`]&&!t.includes(e))},bt=(n,t)=>{const e=n._withMods||(n._withMods={}),i=t.join(".");return e[i]||(e[i]=(r,...s)=>{for(let o=0;o<t.length;o++){const a=AK[t[o]];if(a&&a(r,t))return}return n(r,...s)})},IK={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},on=(n,t)=>{const e=n._withKeys||(n._withKeys={}),i=t.join(".");return e[i]||(e[i]=r=>{if(!("key"in r))return;const s=zs(r.key);if(t.some(o=>o===s||IK[o]===s))return n(r)})},wB=pi({patchProp:dK},YG);let qg,TO=!1;function yB(){return qg||(qg=M5(wB))}function _B(){return qg=TO?qg:$5(wB),TO=!0,qg}const Jw=(...n)=>{yB().render(...n)},PK=(...n)=>{_B().hydrate(...n)},xp=(...n)=>{const t=yB().createApp(...n),{mount:e}=t;return t.mount=i=>{const r=CB(i);if(!r)return;const s=t._component;!Gt(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=e(r,!1,EB(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t},kB=(...n)=>{const t=_B().createApp(...n),{mount:e}=t;return t.mount=i=>{const r=CB(i);if(r)return e(r,!0,EB(r))},t};function EB(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function CB(n){return _i(n)?document.querySelector(n):n}let SO=!1;const xK=()=>{SO||(SO=!0,TK(),eK())};/**
* vue v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const OK=()=>{},RK=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:v5,BaseTransitionPropsValidators:KS,Comment:Zi,DeprecationTypes:qG,EffectScope:MS,ErrorCodes:mq,ErrorTypeStrings:BG,Fragment:Fe,KeepAlive:Nq,ReactiveEffect:_p,Static:hd,Suspense:_G,Teleport:h5,Text:Kc,TrackOpTypes:aq,Transition:jd,TransitionGroup:wK,TriggerOpTypes:lq,VueElement:L_,assertNumber:hq,callWithAsyncErrorHandling:$o,callWithErrorHandling:wm,camelize:Hr,capitalize:gv,cloneVNode:_a,compatUtils:jG,compile:OK,computed:le,createApp:xp,createBlock:Ge,createCommentVNode:ne,createElementBlock:V,createElementVNode:m,createHydrationRenderer:$5,createPropsRestProxy:Qq,createRenderer:M5,createSSRApp:kB,createSlots:Wr,createStaticVNode:XE,createTextVNode:fe,createVNode:Ce,customRef:n5,defineAsyncComponent:y5,defineComponent:Cn,defineCustomElement:hB,defineEmits:zq,defineExpose:Hq,defineModel:qq,defineOptions:Wq,defineProps:Uq,defineSSRCustomElement:hK,defineSlots:jq,devtools:FG,effect:Oj,effectScope:$S,getCurrentInstance:Yr,getCurrentScope:yu,getCurrentWatcher:cq,getTransitionRawChildren:x_,guardReactiveProps:lr,h:ca,handleError:zd,hasInjectionContext:rA,hydrate:PK,hydrateOnIdle:Iq,hydrateOnInteraction:Rq,hydrateOnMediaQuery:Oq,hydrateOnVisible:xq,initCustomFormatter:LG,initDirectivesForSSR:xK,inject:Ci,isMemoSame:sB,isProxy:I_,isReactive:Do,isReadonly:ol,isRef:En,isRuntimeOnly:VG,isShallow:ao,isVNode:ya,markRaw:bm,mergeDefaults:Yq,mergeModels:KE,mergeProps:An,nextTick:Zn,normalizeClass:Ze,normalizeProps:zn,normalizeStyle:Di,onActivated:QS,onBeforeMount:JS,onBeforeUnmount:wa,onBeforeUpdate:R_,onDeactivated:ZS,onErrorCaptured:C5,onMounted:Jt,onRenderTracked:E5,onRenderTriggered:k5,onScopeDispose:_u,onServerPrefetch:XS,onUnmounted:wo,onUpdated:V_,onWatcherCleanup:r5,openBlock:P,popScopeId:Wd,provide:Qa,proxyRefs:WS,pushScopeId:Hd,queuePostFlushCb:Cp,reactive:Kt,readonly:HS,ref:Z,registerRuntimeCompiler:RG,render:Jw,renderList:ct,renderSlot:ht,resolveComponent:si,resolveDirective:$q,resolveDynamicComponent:Xl,resolveFilter:WG,resolveTransitionHooks:Rh,setBlockTracking:Pp,setDevtoolsHook:UG,setTransitionHooks:Jl,shallowReactive:zS,shallowReadonly:Zj,shallowRef:ha,ssrContextKey:z5,ssrUtils:HG,stop:Rj,toDisplayString:B,toHandlerKey:Fg,toHandlers:Bq,toRaw:en,toRef:Oh,toRefs:jS,toValue:eq,transformVNodeArgs:AG,triggerRef:Xj,unref:M,useAttrs:Kq,useCssModule:pK,useCssVars:ku,useHost:mB,useId:_q,useModel:q5,useSSRContext:H5,useShadowRoot:gK,useSlots:ml,useTemplateRef:w5,useTransitionState:GS,vModelCheckbox:gd,vModelDynamic:$_,vModelRadio:M_,vModelSelect:ou,vModelText:Bi,vShow:md,version:wv,warn:$G,watch:gt,watchEffect:yh,watchPostEffect:fG,watchSyncEffect:W5,withAsyncContext:Zq,withCtx:$e,withDefaults:Gq,withDirectives:vn,withKeys:on,withMemo:MG,withModifiers:bt,withScopeId:bq},Symbol.toStringTag,{value:"Module"}));function cA(n,t,e){var i=e||{},r=i.noTrailing,s=r===void 0?!1:r,o=i.noLeading,a=o===void 0?!1:o,l=i.debounceMode,c=l===void 0?void 0:l,u,d=!1,f=0;function h(){u&&clearTimeout(u)}function g(_){var w=_||{},C=w.upcomingOnly,k=C===void 0?!1:C;h(),d=!k}function v(){for(var _=arguments.length,w=new Array(_),C=0;C<_;C++)w[C]=arguments[C];var k=this,E=Date.now()-f;if(d)return;function A(){f=Date.now(),t.apply(k,w)}function x(){u=void 0}!a&&c&&!u&&A(),h(),c===void 0&&E>n?a?(f=Date.now(),s||(u=setTimeout(c?x:A,n))):A():s!==!0&&(u=setTimeout(c?x:A,c===void 0?n-E:n))}return v.cancel=g,v}function TB(n,t,e){var i={},r=i.atBegin,s=r===void 0?!1:r;return cA(n,t,{debounceMode:s!==!1})}var lC=function(n,t){return lC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])},lC(n,t)};function Wo(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");lC(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Be=function(){return Be=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++){e=arguments[i];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Be.apply(this,arguments)};function jl(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e}function $c(n,t,e,i){function r(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,t||[])).next())})}function Bc(n,t){var e={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,r,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(e=0)),e;)try{if(i=1,r&&(s=c[0]&2?r.return:c[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,c[1])).done)return s;switch(r=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,r=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(s=e.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){e.label=c[1];break}if(c[0]===6&&e.label<s[1]){e.label=s[1],s=c;break}if(s&&e.label<s[2]){e.label=s[2],e.ops.push(c);break}s[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(n,e)}catch(u){c=[6,u],r=0}finally{i=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function jr(n,t,e){if(e||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))}var L1="Invariant Violation",AO=Object.setPrototypeOf,VK=AO===void 0?function(n,t){return n.__proto__=t,n}:AO,SB=function(n){Wo(t,n);function t(e){e===void 0&&(e=L1);var i=n.call(this,typeof e=="number"?L1+": "+e+" (see https://github.com/apollographql/invariant-packages)":e)||this;return i.framesToPop=1,i.name=L1,VK(i,t.prototype),i}return t}(Error);function nd(n,t){if(!n)throw new SB(t)}var AB=["debug","log","warn","error","silent"],DK=AB.indexOf("log");function ab(n){return function(){if(AB.indexOf(n)>=DK){var t=console[n]||console.log;return t.apply(console,arguments)}}}(function(n){n.debug=ab("debug"),n.log=ab("log"),n.warn=ab("warn"),n.error=ab("error")})(nd||(nd={}));var uA="3.14.0";function ia(n){try{return n()}catch{}}const Xw=ia(function(){return globalThis})||ia(function(){return window})||ia(function(){return self})||ia(function(){return global})||ia(function(){return ia.constructor("return this")()});var IO=new Map;function cC(n){var t=IO.get(n)||1;return IO.set(n,t+1),"".concat(n,":").concat(t,":").concat(Math.random().toString(36).slice(2))}function IB(n,t){t===void 0&&(t=0);var e=cC("stringifyForDisplay");return JSON.stringify(n,function(i,r){return r===void 0?e:r},t).split(JSON.stringify(e)).join("<undefined>")}function lb(n){return function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(typeof t=="number"){var r=t;t=dA(r),t||(t=fA(r,e),e=[])}n.apply(void 0,[t].concat(e))}}var kt=Object.assign(function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];t||nd(t,dA(e,i)||fA(e,i))},{debug:lb(nd.debug),log:lb(nd.log),warn:lb(nd.warn),error:lb(nd.error)});function xs(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return new SB(dA(n,t)||fA(n,t))}var PO=Symbol.for("ApolloErrorMessageHandler_"+uA);function PB(n){if(typeof n=="string")return n;try{return IB(n,2).slice(0,1e3)}catch{return"<non-serializable>"}}function dA(n,t){if(t===void 0&&(t=[]),!!n)return Xw[PO]&&Xw[PO](n,t.map(PB))}function fA(n,t){if(t===void 0&&(t=[]),!!n)return"An error occurred! For more details, see the full error text at https://go.apollo.dev/c/err#".concat(encodeURIComponent(JSON.stringify({version:uA,message:n,args:t.map(PB)})))}function iw(n,t){if(!!!n)throw new Error(t)}function NK(n){return typeof n=="object"&&n!==null}function LK(n,t){if(!!!n)throw new Error("Unexpected invariant triggered.")}const MK=/\r\n|[\n\r]/g;function uC(n,t){let e=0,i=1;for(const r of n.body.matchAll(MK)){if(typeof r.index=="number"||LK(!1),r.index>=t)break;e=r.index+r[0].length,i+=1}return{line:i,column:t+1-e}}function $K(n){return xB(n.source,uC(n.source,n.start))}function xB(n,t){const e=n.locationOffset.column-1,i="".padStart(e)+n.body,r=t.line-1,s=n.locationOffset.line-1,o=t.line+s,a=t.line===1?e:0,l=t.column+a,c=`${n.name}:${o}:${l}
`,u=i.split(/\r\n|[\n\r]/g),d=u[r];if(d.length>120){const f=Math.floor(l/80),h=l%80,g=[];for(let v=0;v<d.length;v+=80)g.push(d.slice(v,v+80));return c+xO([[`${o} |`,g[0]],...g.slice(1,f+1).map(v=>["|",v]),["|","^".padStart(h)],["|",g[f+1]]])}return c+xO([[`${o-1} |`,u[r-1]],[`${o} |`,d],["|","^".padStart(l)],[`${o+1} |`,u[r+1]]])}function xO(n){const t=n.filter(([i,r])=>r!==void 0),e=Math.max(...t.map(([i])=>i.length));return t.map(([i,r])=>i.padStart(e)+(r?" "+r:"")).join(`
`)}function BK(n){const t=n[0];return t==null||"kind"in t||"length"in t?{nodes:t,source:n[1],positions:n[2],path:n[3],originalError:n[4],extensions:n[5]}:t}let FK=class OB extends Error{constructor(t,...e){var i,r,s;const{nodes:o,source:a,positions:l,path:c,originalError:u,extensions:d}=BK(e);super(t),this.name="GraphQLError",this.path=c??void 0,this.originalError=u??void 0,this.nodes=OO(Array.isArray(o)?o:o?[o]:void 0);const f=OO((i=this.nodes)===null||i===void 0?void 0:i.map(g=>g.loc).filter(g=>g!=null));this.source=a??(f==null||(r=f[0])===null||r===void 0?void 0:r.source),this.positions=l??(f==null?void 0:f.map(g=>g.start)),this.locations=l&&a?l.map(g=>uC(a,g)):f==null?void 0:f.map(g=>uC(g.source,g.start));const h=NK(u==null?void 0:u.extensions)?u==null?void 0:u.extensions:void 0;this.extensions=(s=d??h)!==null&&s!==void 0?s:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),u!=null&&u.stack?Object.defineProperty(this,"stack",{value:u.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,OB):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let t=this.message;if(this.nodes)for(const e of this.nodes)e.loc&&(t+=`

`+$K(e.loc));else if(this.source&&this.locations)for(const e of this.locations)t+=`

`+xB(this.source,e);return t}toJSON(){const t={message:this.message};return this.locations!=null&&(t.locations=this.locations),this.path!=null&&(t.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(t.extensions=this.extensions),t}};function OO(n){return n===void 0||n.length===0?void 0:n}function kr(n,t,e){return new FK(`Syntax Error: ${e}`,{source:n,positions:[t]})}class UK{constructor(t,e,i){this.start=t.start,this.end=e.end,this.startToken=t,this.endToken=e,this.source=i}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}let RB=class{constructor(t,e,i,r,s,o){this.kind=t,this.start=e,this.end=i,this.line=r,this.column=s,this.value=o,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}};const VB={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},zK=new Set(Object.keys(VB));function RO(n){const t=n==null?void 0:n.kind;return typeof t=="string"&&zK.has(t)}var Xf;(function(n){n.QUERY="query",n.MUTATION="mutation",n.SUBSCRIPTION="subscription"})(Xf||(Xf={}));var dC;(function(n){n.QUERY="QUERY",n.MUTATION="MUTATION",n.SUBSCRIPTION="SUBSCRIPTION",n.FIELD="FIELD",n.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",n.FRAGMENT_SPREAD="FRAGMENT_SPREAD",n.INLINE_FRAGMENT="INLINE_FRAGMENT",n.VARIABLE_DEFINITION="VARIABLE_DEFINITION",n.SCHEMA="SCHEMA",n.SCALAR="SCALAR",n.OBJECT="OBJECT",n.FIELD_DEFINITION="FIELD_DEFINITION",n.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",n.INTERFACE="INTERFACE",n.UNION="UNION",n.ENUM="ENUM",n.ENUM_VALUE="ENUM_VALUE",n.INPUT_OBJECT="INPUT_OBJECT",n.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(dC||(dC={}));var _t;(function(n){n.NAME="Name",n.DOCUMENT="Document",n.OPERATION_DEFINITION="OperationDefinition",n.VARIABLE_DEFINITION="VariableDefinition",n.SELECTION_SET="SelectionSet",n.FIELD="Field",n.ARGUMENT="Argument",n.FRAGMENT_SPREAD="FragmentSpread",n.INLINE_FRAGMENT="InlineFragment",n.FRAGMENT_DEFINITION="FragmentDefinition",n.VARIABLE="Variable",n.INT="IntValue",n.FLOAT="FloatValue",n.STRING="StringValue",n.BOOLEAN="BooleanValue",n.NULL="NullValue",n.ENUM="EnumValue",n.LIST="ListValue",n.OBJECT="ObjectValue",n.OBJECT_FIELD="ObjectField",n.DIRECTIVE="Directive",n.NAMED_TYPE="NamedType",n.LIST_TYPE="ListType",n.NON_NULL_TYPE="NonNullType",n.SCHEMA_DEFINITION="SchemaDefinition",n.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",n.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",n.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",n.FIELD_DEFINITION="FieldDefinition",n.INPUT_VALUE_DEFINITION="InputValueDefinition",n.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",n.UNION_TYPE_DEFINITION="UnionTypeDefinition",n.ENUM_TYPE_DEFINITION="EnumTypeDefinition",n.ENUM_VALUE_DEFINITION="EnumValueDefinition",n.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",n.DIRECTIVE_DEFINITION="DirectiveDefinition",n.SCHEMA_EXTENSION="SchemaExtension",n.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",n.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",n.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",n.UNION_TYPE_EXTENSION="UnionTypeExtension",n.ENUM_TYPE_EXTENSION="EnumTypeExtension",n.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(_t||(_t={}));function fC(n){return n===9||n===32}function Op(n){return n>=48&&n<=57}function DB(n){return n>=97&&n<=122||n>=65&&n<=90}function NB(n){return DB(n)||n===95}function HK(n){return DB(n)||Op(n)||n===95}function WK(n){var t;let e=Number.MAX_SAFE_INTEGER,i=null,r=-1;for(let o=0;o<n.length;++o){var s;const a=n[o],l=jK(a);l!==a.length&&(i=(s=i)!==null&&s!==void 0?s:o,r=o,o!==0&&l<e&&(e=l))}return n.map((o,a)=>a===0?o:o.slice(e)).slice((t=i)!==null&&t!==void 0?t:0,r+1)}function jK(n){let t=0;for(;t<n.length&&fC(n.charCodeAt(t));)++t;return t}function qK(n,t){const e=n.replace(/"""/g,'\\"""'),i=e.split(/\r\n|[\n\r]/g),r=i.length===1,s=i.length>1&&i.slice(1).every(h=>h.length===0||fC(h.charCodeAt(0))),o=e.endsWith('\\"""'),a=n.endsWith('"')&&!o,l=n.endsWith("\\"),c=a||l,u=!r||n.length>70||c||s||o;let d="";const f=r&&fC(n.charCodeAt(0));return(u&&!f||s)&&(d+=`
`),d+=e,(u||c)&&(d+=`
`),'"""'+d+'"""'}var nt;(function(n){n.SOF="<SOF>",n.EOF="<EOF>",n.BANG="!",n.DOLLAR="$",n.AMP="&",n.PAREN_L="(",n.PAREN_R=")",n.SPREAD="...",n.COLON=":",n.EQUALS="=",n.AT="@",n.BRACKET_L="[",n.BRACKET_R="]",n.BRACE_L="{",n.PIPE="|",n.BRACE_R="}",n.NAME="Name",n.INT="Int",n.FLOAT="Float",n.STRING="String",n.BLOCK_STRING="BlockString",n.COMMENT="Comment"})(nt||(nt={}));class GK{constructor(t){const e=new RB(nt.SOF,0,0,0,0);this.source=t,this.lastToken=e,this.token=e,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let t=this.token;if(t.kind!==nt.EOF)do if(t.next)t=t.next;else{const e=YK(this,t.end);t.next=e,e.prev=t,t=e}while(t.kind===nt.COMMENT);return t}}function KK(n){return n===nt.BANG||n===nt.DOLLAR||n===nt.AMP||n===nt.PAREN_L||n===nt.PAREN_R||n===nt.SPREAD||n===nt.COLON||n===nt.EQUALS||n===nt.AT||n===nt.BRACKET_L||n===nt.BRACKET_R||n===nt.BRACE_L||n===nt.PIPE||n===nt.BRACE_R}function ym(n){return n>=0&&n<=55295||n>=57344&&n<=1114111}function B_(n,t){return LB(n.charCodeAt(t))&&MB(n.charCodeAt(t+1))}function LB(n){return n>=55296&&n<=56319}function MB(n){return n>=56320&&n<=57343}function Td(n,t){const e=n.source.body.codePointAt(t);if(e===void 0)return nt.EOF;if(e>=32&&e<=126){const i=String.fromCodePoint(e);return i==='"'?`'"'`:`"${i}"`}return"U+"+e.toString(16).toUpperCase().padStart(4,"0")}function sr(n,t,e,i,r){const s=n.line,o=1+e-n.lineStart;return new RB(t,e,i,s,o,r)}function YK(n,t){const e=n.source.body,i=e.length;let r=t;for(;r<i;){const s=e.charCodeAt(r);switch(s){case 65279:case 9:case 32:case 44:++r;continue;case 10:++r,++n.line,n.lineStart=r;continue;case 13:e.charCodeAt(r+1)===10?r+=2:++r,++n.line,n.lineStart=r;continue;case 35:return QK(n,r);case 33:return sr(n,nt.BANG,r,r+1);case 36:return sr(n,nt.DOLLAR,r,r+1);case 38:return sr(n,nt.AMP,r,r+1);case 40:return sr(n,nt.PAREN_L,r,r+1);case 41:return sr(n,nt.PAREN_R,r,r+1);case 46:if(e.charCodeAt(r+1)===46&&e.charCodeAt(r+2)===46)return sr(n,nt.SPREAD,r,r+3);break;case 58:return sr(n,nt.COLON,r,r+1);case 61:return sr(n,nt.EQUALS,r,r+1);case 64:return sr(n,nt.AT,r,r+1);case 91:return sr(n,nt.BRACKET_L,r,r+1);case 93:return sr(n,nt.BRACKET_R,r,r+1);case 123:return sr(n,nt.BRACE_L,r,r+1);case 124:return sr(n,nt.PIPE,r,r+1);case 125:return sr(n,nt.BRACE_R,r,r+1);case 34:return e.charCodeAt(r+1)===34&&e.charCodeAt(r+2)===34?nY(n,r):JK(n,r)}if(Op(s)||s===45)return ZK(n,r,s);if(NB(s))return iY(n,r);throw kr(n.source,r,s===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:ym(s)||B_(e,r)?`Unexpected character: ${Td(n,r)}.`:`Invalid character: ${Td(n,r)}.`)}return sr(n,nt.EOF,i,i)}function QK(n,t){const e=n.source.body,i=e.length;let r=t+1;for(;r<i;){const s=e.charCodeAt(r);if(s===10||s===13)break;if(ym(s))++r;else if(B_(e,r))r+=2;else break}return sr(n,nt.COMMENT,t,r,e.slice(t+1,r))}function ZK(n,t,e){const i=n.source.body;let r=t,s=e,o=!1;if(s===45&&(s=i.charCodeAt(++r)),s===48){if(s=i.charCodeAt(++r),Op(s))throw kr(n.source,r,`Invalid number, unexpected digit after 0: ${Td(n,r)}.`)}else r=M1(n,r,s),s=i.charCodeAt(r);if(s===46&&(o=!0,s=i.charCodeAt(++r),r=M1(n,r,s),s=i.charCodeAt(r)),(s===69||s===101)&&(o=!0,s=i.charCodeAt(++r),(s===43||s===45)&&(s=i.charCodeAt(++r)),r=M1(n,r,s),s=i.charCodeAt(r)),s===46||NB(s))throw kr(n.source,r,`Invalid number, expected digit but got: ${Td(n,r)}.`);return sr(n,o?nt.FLOAT:nt.INT,t,r,i.slice(t,r))}function M1(n,t,e){if(!Op(e))throw kr(n.source,t,`Invalid number, expected digit but got: ${Td(n,t)}.`);const i=n.source.body;let r=t+1;for(;Op(i.charCodeAt(r));)++r;return r}function JK(n,t){const e=n.source.body,i=e.length;let r=t+1,s=r,o="";for(;r<i;){const a=e.charCodeAt(r);if(a===34)return o+=e.slice(s,r),sr(n,nt.STRING,t,r+1,o);if(a===92){o+=e.slice(s,r);const l=e.charCodeAt(r+1)===117?e.charCodeAt(r+2)===123?XK(n,r):eY(n,r):tY(n,r);o+=l.value,r+=l.size,s=r;continue}if(a===10||a===13)break;if(ym(a))++r;else if(B_(e,r))r+=2;else throw kr(n.source,r,`Invalid character within String: ${Td(n,r)}.`)}throw kr(n.source,r,"Unterminated string.")}function XK(n,t){const e=n.source.body;let i=0,r=3;for(;r<12;){const s=e.charCodeAt(t+r++);if(s===125){if(r<5||!ym(i))break;return{value:String.fromCodePoint(i),size:r}}if(i=i<<4|Ig(s),i<0)break}throw kr(n.source,t,`Invalid Unicode escape sequence: "${e.slice(t,t+r)}".`)}function eY(n,t){const e=n.source.body,i=VO(e,t+2);if(ym(i))return{value:String.fromCodePoint(i),size:6};if(LB(i)&&e.charCodeAt(t+6)===92&&e.charCodeAt(t+7)===117){const r=VO(e,t+8);if(MB(r))return{value:String.fromCodePoint(i,r),size:12}}throw kr(n.source,t,`Invalid Unicode escape sequence: "${e.slice(t,t+6)}".`)}function VO(n,t){return Ig(n.charCodeAt(t))<<12|Ig(n.charCodeAt(t+1))<<8|Ig(n.charCodeAt(t+2))<<4|Ig(n.charCodeAt(t+3))}function Ig(n){return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:-1}function tY(n,t){const e=n.source.body;switch(e.charCodeAt(t+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw kr(n.source,t,`Invalid character escape sequence: "${e.slice(t,t+2)}".`)}function nY(n,t){const e=n.source.body,i=e.length;let r=n.lineStart,s=t+3,o=s,a="";const l=[];for(;s<i;){const c=e.charCodeAt(s);if(c===34&&e.charCodeAt(s+1)===34&&e.charCodeAt(s+2)===34){a+=e.slice(o,s),l.push(a);const u=sr(n,nt.BLOCK_STRING,t,s+3,WK(l).join(`
`));return n.line+=l.length-1,n.lineStart=r,u}if(c===92&&e.charCodeAt(s+1)===34&&e.charCodeAt(s+2)===34&&e.charCodeAt(s+3)===34){a+=e.slice(o,s),o=s+1,s+=4;continue}if(c===10||c===13){a+=e.slice(o,s),l.push(a),c===13&&e.charCodeAt(s+1)===10?s+=2:++s,a="",o=s,r=s;continue}if(ym(c))++s;else if(B_(e,s))s+=2;else throw kr(n.source,s,`Invalid character within String: ${Td(n,s)}.`)}throw kr(n.source,s,"Unterminated string.")}function iY(n,t){const e=n.source.body,i=e.length;let r=t+1;for(;r<i;){const s=e.charCodeAt(r);if(HK(s))++r;else break}return sr(n,nt.NAME,t,r,e.slice(t,r))}const rY=10,$B=2;function hA(n){return F_(n,[])}function F_(n,t){switch(typeof n){case"string":return JSON.stringify(n);case"function":return n.name?`[function ${n.name}]`:"[function]";case"object":return sY(n,t);default:return String(n)}}function sY(n,t){if(n===null)return"null";if(t.includes(n))return"[Circular]";const e=[...t,n];if(oY(n)){const i=n.toJSON();if(i!==n)return typeof i=="string"?i:F_(i,e)}else if(Array.isArray(n))return lY(n,e);return aY(n,e)}function oY(n){return typeof n.toJSON=="function"}function aY(n,t){const e=Object.entries(n);return e.length===0?"{}":t.length>$B?"["+cY(n)+"]":"{ "+e.map(([r,s])=>r+": "+F_(s,t)).join(", ")+" }"}function lY(n,t){if(n.length===0)return"[]";if(t.length>$B)return"[Array]";const e=Math.min(rY,n.length),i=n.length-e,r=[];for(let s=0;s<e;++s)r.push(F_(n[s],t));return i===1?r.push("... 1 more item"):i>1&&r.push(`... ${i} more items`),"["+r.join(", ")+"]"}function cY(n){const t=Object.prototype.toString.call(n).replace(/^\[object /,"").replace(/]$/,"");if(t==="Object"&&typeof n.constructor=="function"){const e=n.constructor.name;if(typeof e=="string"&&e!=="")return e}return t}const uY=globalThis.process&&!0,dY=uY?function(t,e){return t instanceof e}:function(t,e){if(t instanceof e)return!0;if(typeof t=="object"&&t!==null){var i;const r=e.prototype[Symbol.toStringTag],s=Symbol.toStringTag in t?t[Symbol.toStringTag]:(i=t.constructor)===null||i===void 0?void 0:i.name;if(r===s){const o=hA(t);throw new Error(`Cannot use ${r} "${o}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};class BB{constructor(t,e="GraphQL request",i={line:1,column:1}){typeof t=="string"||iw(!1,`Body must be a string. Received: ${hA(t)}.`),this.body=t,this.name=e,this.locationOffset=i,this.locationOffset.line>0||iw(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||iw(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function fY(n){return dY(n,BB)}function hY(n,t){const e=new mY(n,t),i=e.parseDocument();return Object.defineProperty(i,"tokenCount",{enumerable:!1,value:e.tokenCount}),i}let mY=class{constructor(t,e={}){const i=fY(t)?t:new BB(t);this._lexer=new GK(i),this._options=e,this._tokenCounter=0}get tokenCount(){return this._tokenCounter}parseName(){const t=this.expectToken(nt.NAME);return this.node(t,{kind:_t.NAME,value:t.value})}parseDocument(){return this.node(this._lexer.token,{kind:_t.DOCUMENT,definitions:this.many(nt.SOF,this.parseDefinition,nt.EOF)})}parseDefinition(){if(this.peek(nt.BRACE_L))return this.parseOperationDefinition();const t=this.peekDescription(),e=t?this._lexer.lookahead():this._lexer.token;if(e.kind===nt.NAME){switch(e.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(t)throw kr(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(e.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(e)}parseOperationDefinition(){const t=this._lexer.token;if(this.peek(nt.BRACE_L))return this.node(t,{kind:_t.OPERATION_DEFINITION,operation:Xf.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const e=this.parseOperationType();let i;return this.peek(nt.NAME)&&(i=this.parseName()),this.node(t,{kind:_t.OPERATION_DEFINITION,operation:e,name:i,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const t=this.expectToken(nt.NAME);switch(t.value){case"query":return Xf.QUERY;case"mutation":return Xf.MUTATION;case"subscription":return Xf.SUBSCRIPTION}throw this.unexpected(t)}parseVariableDefinitions(){return this.optionalMany(nt.PAREN_L,this.parseVariableDefinition,nt.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:_t.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(nt.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(nt.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const t=this._lexer.token;return this.expectToken(nt.DOLLAR),this.node(t,{kind:_t.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:_t.SELECTION_SET,selections:this.many(nt.BRACE_L,this.parseSelection,nt.BRACE_R)})}parseSelection(){return this.peek(nt.SPREAD)?this.parseFragment():this.parseField()}parseField(){const t=this._lexer.token,e=this.parseName();let i,r;return this.expectOptionalToken(nt.COLON)?(i=e,r=this.parseName()):r=e,this.node(t,{kind:_t.FIELD,alias:i,name:r,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(nt.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(t){const e=t?this.parseConstArgument:this.parseArgument;return this.optionalMany(nt.PAREN_L,e,nt.PAREN_R)}parseArgument(t=!1){const e=this._lexer.token,i=this.parseName();return this.expectToken(nt.COLON),this.node(e,{kind:_t.ARGUMENT,name:i,value:this.parseValueLiteral(t)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const t=this._lexer.token;this.expectToken(nt.SPREAD);const e=this.expectOptionalKeyword("on");return!e&&this.peek(nt.NAME)?this.node(t,{kind:_t.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(t,{kind:_t.INLINE_FRAGMENT,typeCondition:e?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const t=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(t,{kind:_t.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(t,{kind:_t.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(t){const e=this._lexer.token;switch(e.kind){case nt.BRACKET_L:return this.parseList(t);case nt.BRACE_L:return this.parseObject(t);case nt.INT:return this.advanceLexer(),this.node(e,{kind:_t.INT,value:e.value});case nt.FLOAT:return this.advanceLexer(),this.node(e,{kind:_t.FLOAT,value:e.value});case nt.STRING:case nt.BLOCK_STRING:return this.parseStringLiteral();case nt.NAME:switch(this.advanceLexer(),e.value){case"true":return this.node(e,{kind:_t.BOOLEAN,value:!0});case"false":return this.node(e,{kind:_t.BOOLEAN,value:!1});case"null":return this.node(e,{kind:_t.NULL});default:return this.node(e,{kind:_t.ENUM,value:e.value})}case nt.DOLLAR:if(t)if(this.expectToken(nt.DOLLAR),this._lexer.token.kind===nt.NAME){const i=this._lexer.token.value;throw kr(this._lexer.source,e.start,`Unexpected variable "$${i}" in constant value.`)}else throw this.unexpected(e);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const t=this._lexer.token;return this.advanceLexer(),this.node(t,{kind:_t.STRING,value:t.value,block:t.kind===nt.BLOCK_STRING})}parseList(t){const e=()=>this.parseValueLiteral(t);return this.node(this._lexer.token,{kind:_t.LIST,values:this.any(nt.BRACKET_L,e,nt.BRACKET_R)})}parseObject(t){const e=()=>this.parseObjectField(t);return this.node(this._lexer.token,{kind:_t.OBJECT,fields:this.any(nt.BRACE_L,e,nt.BRACE_R)})}parseObjectField(t){const e=this._lexer.token,i=this.parseName();return this.expectToken(nt.COLON),this.node(e,{kind:_t.OBJECT_FIELD,name:i,value:this.parseValueLiteral(t)})}parseDirectives(t){const e=[];for(;this.peek(nt.AT);)e.push(this.parseDirective(t));return e}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(t){const e=this._lexer.token;return this.expectToken(nt.AT),this.node(e,{kind:_t.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(t)})}parseTypeReference(){const t=this._lexer.token;let e;if(this.expectOptionalToken(nt.BRACKET_L)){const i=this.parseTypeReference();this.expectToken(nt.BRACKET_R),e=this.node(t,{kind:_t.LIST_TYPE,type:i})}else e=this.parseNamedType();return this.expectOptionalToken(nt.BANG)?this.node(t,{kind:_t.NON_NULL_TYPE,type:e}):e}parseNamedType(){return this.node(this._lexer.token,{kind:_t.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(nt.STRING)||this.peek(nt.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const t=this._lexer.token,e=this.parseDescription();this.expectKeyword("schema");const i=this.parseConstDirectives(),r=this.many(nt.BRACE_L,this.parseOperationTypeDefinition,nt.BRACE_R);return this.node(t,{kind:_t.SCHEMA_DEFINITION,description:e,directives:i,operationTypes:r})}parseOperationTypeDefinition(){const t=this._lexer.token,e=this.parseOperationType();this.expectToken(nt.COLON);const i=this.parseNamedType();return this.node(t,{kind:_t.OPERATION_TYPE_DEFINITION,operation:e,type:i})}parseScalarTypeDefinition(){const t=this._lexer.token,e=this.parseDescription();this.expectKeyword("scalar");const i=this.parseName(),r=this.parseConstDirectives();return this.node(t,{kind:_t.SCALAR_TYPE_DEFINITION,description:e,name:i,directives:r})}parseObjectTypeDefinition(){const t=this._lexer.token,e=this.parseDescription();this.expectKeyword("type");const i=this.parseName(),r=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(t,{kind:_t.OBJECT_TYPE_DEFINITION,description:e,name:i,interfaces:r,directives:s,fields:o})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(nt.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(nt.BRACE_L,this.parseFieldDefinition,nt.BRACE_R)}parseFieldDefinition(){const t=this._lexer.token,e=this.parseDescription(),i=this.parseName(),r=this.parseArgumentDefs();this.expectToken(nt.COLON);const s=this.parseTypeReference(),o=this.parseConstDirectives();return this.node(t,{kind:_t.FIELD_DEFINITION,description:e,name:i,arguments:r,type:s,directives:o})}parseArgumentDefs(){return this.optionalMany(nt.PAREN_L,this.parseInputValueDef,nt.PAREN_R)}parseInputValueDef(){const t=this._lexer.token,e=this.parseDescription(),i=this.parseName();this.expectToken(nt.COLON);const r=this.parseTypeReference();let s;this.expectOptionalToken(nt.EQUALS)&&(s=this.parseConstValueLiteral());const o=this.parseConstDirectives();return this.node(t,{kind:_t.INPUT_VALUE_DEFINITION,description:e,name:i,type:r,defaultValue:s,directives:o})}parseInterfaceTypeDefinition(){const t=this._lexer.token,e=this.parseDescription();this.expectKeyword("interface");const i=this.parseName(),r=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(t,{kind:_t.INTERFACE_TYPE_DEFINITION,description:e,name:i,interfaces:r,directives:s,fields:o})}parseUnionTypeDefinition(){const t=this._lexer.token,e=this.parseDescription();this.expectKeyword("union");const i=this.parseName(),r=this.parseConstDirectives(),s=this.parseUnionMemberTypes();return this.node(t,{kind:_t.UNION_TYPE_DEFINITION,description:e,name:i,directives:r,types:s})}parseUnionMemberTypes(){return this.expectOptionalToken(nt.EQUALS)?this.delimitedMany(nt.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const t=this._lexer.token,e=this.parseDescription();this.expectKeyword("enum");const i=this.parseName(),r=this.parseConstDirectives(),s=this.parseEnumValuesDefinition();return this.node(t,{kind:_t.ENUM_TYPE_DEFINITION,description:e,name:i,directives:r,values:s})}parseEnumValuesDefinition(){return this.optionalMany(nt.BRACE_L,this.parseEnumValueDefinition,nt.BRACE_R)}parseEnumValueDefinition(){const t=this._lexer.token,e=this.parseDescription(),i=this.parseEnumValueName(),r=this.parseConstDirectives();return this.node(t,{kind:_t.ENUM_VALUE_DEFINITION,description:e,name:i,directives:r})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw kr(this._lexer.source,this._lexer.token.start,`${cb(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const t=this._lexer.token,e=this.parseDescription();this.expectKeyword("input");const i=this.parseName(),r=this.parseConstDirectives(),s=this.parseInputFieldsDefinition();return this.node(t,{kind:_t.INPUT_OBJECT_TYPE_DEFINITION,description:e,name:i,directives:r,fields:s})}parseInputFieldsDefinition(){return this.optionalMany(nt.BRACE_L,this.parseInputValueDef,nt.BRACE_R)}parseTypeSystemExtension(){const t=this._lexer.lookahead();if(t.kind===nt.NAME)switch(t.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(t)}parseSchemaExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const e=this.parseConstDirectives(),i=this.optionalMany(nt.BRACE_L,this.parseOperationTypeDefinition,nt.BRACE_R);if(e.length===0&&i.length===0)throw this.unexpected();return this.node(t,{kind:_t.SCHEMA_EXTENSION,directives:e,operationTypes:i})}parseScalarTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const e=this.parseName(),i=this.parseConstDirectives();if(i.length===0)throw this.unexpected();return this.node(t,{kind:_t.SCALAR_TYPE_EXTENSION,name:e,directives:i})}parseObjectTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const e=this.parseName(),i=this.parseImplementsInterfaces(),r=this.parseConstDirectives(),s=this.parseFieldsDefinition();if(i.length===0&&r.length===0&&s.length===0)throw this.unexpected();return this.node(t,{kind:_t.OBJECT_TYPE_EXTENSION,name:e,interfaces:i,directives:r,fields:s})}parseInterfaceTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const e=this.parseName(),i=this.parseImplementsInterfaces(),r=this.parseConstDirectives(),s=this.parseFieldsDefinition();if(i.length===0&&r.length===0&&s.length===0)throw this.unexpected();return this.node(t,{kind:_t.INTERFACE_TYPE_EXTENSION,name:e,interfaces:i,directives:r,fields:s})}parseUnionTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const e=this.parseName(),i=this.parseConstDirectives(),r=this.parseUnionMemberTypes();if(i.length===0&&r.length===0)throw this.unexpected();return this.node(t,{kind:_t.UNION_TYPE_EXTENSION,name:e,directives:i,types:r})}parseEnumTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const e=this.parseName(),i=this.parseConstDirectives(),r=this.parseEnumValuesDefinition();if(i.length===0&&r.length===0)throw this.unexpected();return this.node(t,{kind:_t.ENUM_TYPE_EXTENSION,name:e,directives:i,values:r})}parseInputObjectTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const e=this.parseName(),i=this.parseConstDirectives(),r=this.parseInputFieldsDefinition();if(i.length===0&&r.length===0)throw this.unexpected();return this.node(t,{kind:_t.INPUT_OBJECT_TYPE_EXTENSION,name:e,directives:i,fields:r})}parseDirectiveDefinition(){const t=this._lexer.token,e=this.parseDescription();this.expectKeyword("directive"),this.expectToken(nt.AT);const i=this.parseName(),r=this.parseArgumentDefs(),s=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const o=this.parseDirectiveLocations();return this.node(t,{kind:_t.DIRECTIVE_DEFINITION,description:e,name:i,arguments:r,repeatable:s,locations:o})}parseDirectiveLocations(){return this.delimitedMany(nt.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const t=this._lexer.token,e=this.parseName();if(Object.prototype.hasOwnProperty.call(dC,e.value))return e;throw this.unexpected(t)}node(t,e){return this._options.noLocation!==!0&&(e.loc=new UK(t,this._lexer.lastToken,this._lexer.source)),e}peek(t){return this._lexer.token.kind===t}expectToken(t){const e=this._lexer.token;if(e.kind===t)return this.advanceLexer(),e;throw kr(this._lexer.source,e.start,`Expected ${FB(t)}, found ${cb(e)}.`)}expectOptionalToken(t){return this._lexer.token.kind===t?(this.advanceLexer(),!0):!1}expectKeyword(t){const e=this._lexer.token;if(e.kind===nt.NAME&&e.value===t)this.advanceLexer();else throw kr(this._lexer.source,e.start,`Expected "${t}", found ${cb(e)}.`)}expectOptionalKeyword(t){const e=this._lexer.token;return e.kind===nt.NAME&&e.value===t?(this.advanceLexer(),!0):!1}unexpected(t){const e=t??this._lexer.token;return kr(this._lexer.source,e.start,`Unexpected ${cb(e)}.`)}any(t,e,i){this.expectToken(t);const r=[];for(;!this.expectOptionalToken(i);)r.push(e.call(this));return r}optionalMany(t,e,i){if(this.expectOptionalToken(t)){const r=[];do r.push(e.call(this));while(!this.expectOptionalToken(i));return r}return[]}many(t,e,i){this.expectToken(t);const r=[];do r.push(e.call(this));while(!this.expectOptionalToken(i));return r}delimitedMany(t,e){this.expectOptionalToken(t);const i=[];do i.push(e.call(this));while(this.expectOptionalToken(t));return i}advanceLexer(){const{maxTokens:t}=this._options,e=this._lexer.advance();if(e.kind!==nt.EOF&&(++this._tokenCounter,t!==void 0&&this._tokenCounter>t))throw kr(this._lexer.source,e.start,`Document contains more that ${t} tokens. Parsing aborted.`)}};function cb(n){const t=n.value;return FB(n.kind)+(t!=null?` "${t}"`:"")}function FB(n){return KK(n)?`"${n}"`:n}function gY(n){return`"${n.replace(pY,vY)}"`}const pY=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function vY(n){return bY[n.charCodeAt(0)]}const bY=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],U_=Object.freeze({});function ka(n,t,e=VB){const i=new Map;for(const w of Object.values(_t))i.set(w,wY(t,w));let r,s=Array.isArray(n),o=[n],a=-1,l=[],c=n,u,d;const f=[],h=[];do{a++;const w=a===o.length,C=w&&l.length!==0;if(w){if(u=h.length===0?void 0:f[f.length-1],c=d,d=h.pop(),C)if(s){c=c.slice();let E=0;for(const[A,x]of l){const p=A-E;x===null?(c.splice(p,1),E++):c[p]=x}}else{c={...c};for(const[E,A]of l)c[E]=A}a=r.index,o=r.keys,l=r.edits,s=r.inArray,r=r.prev}else if(d){if(u=s?a:o[a],c=d[u],c==null)continue;f.push(u)}let k;if(!Array.isArray(c)){var g,v;RO(c)||iw(!1,`Invalid AST Node: ${hA(c)}.`);const E=w?(g=i.get(c.kind))===null||g===void 0?void 0:g.leave:(v=i.get(c.kind))===null||v===void 0?void 0:v.enter;if(k=E==null?void 0:E.call(t,c,u,d,f,h),k===U_)break;if(k===!1){if(!w){f.pop();continue}}else if(k!==void 0&&(l.push([u,k]),!w))if(RO(k))c=k;else{f.pop();continue}}if(k===void 0&&C&&l.push([u,c]),w)f.pop();else{var _;r={inArray:s,index:a,keys:o,edits:l,prev:r},s=Array.isArray(c),o=s?c:(_=e[c.kind])!==null&&_!==void 0?_:[],a=-1,l=[],d&&h.push(d),d=c}}while(r!==void 0);return l.length!==0?l[l.length-1][1]:n}function wY(n,t){const e=n[t];return typeof e=="object"?e:typeof e=="function"?{enter:e,leave:void 0}:{enter:n.enter,leave:n.leave}}function yY(n){return ka(n,kY)}const _Y=80,kY={Name:{leave:n=>n.value},Variable:{leave:n=>"$"+n.name},Document:{leave:n=>Pt(n.definitions,`

`)},OperationDefinition:{leave(n){const t=kn("(",Pt(n.variableDefinitions,", "),")"),e=Pt([n.operation,Pt([n.name,t]),Pt(n.directives," ")]," ");return(e==="query"?"":e+" ")+n.selectionSet}},VariableDefinition:{leave:({variable:n,type:t,defaultValue:e,directives:i})=>n+": "+t+kn(" = ",e)+kn(" ",Pt(i," "))},SelectionSet:{leave:({selections:n})=>Jo(n)},Field:{leave({alias:n,name:t,arguments:e,directives:i,selectionSet:r}){const s=kn("",n,": ")+t;let o=s+kn("(",Pt(e,", "),")");return o.length>_Y&&(o=s+kn(`(
`,rw(Pt(e,`
`)),`
)`)),Pt([o,Pt(i," "),r]," ")}},Argument:{leave:({name:n,value:t})=>n+": "+t},FragmentSpread:{leave:({name:n,directives:t})=>"..."+n+kn(" ",Pt(t," "))},InlineFragment:{leave:({typeCondition:n,directives:t,selectionSet:e})=>Pt(["...",kn("on ",n),Pt(t," "),e]," ")},FragmentDefinition:{leave:({name:n,typeCondition:t,variableDefinitions:e,directives:i,selectionSet:r})=>`fragment ${n}${kn("(",Pt(e,", "),")")} on ${t} ${kn("",Pt(i," ")," ")}`+r},IntValue:{leave:({value:n})=>n},FloatValue:{leave:({value:n})=>n},StringValue:{leave:({value:n,block:t})=>t?qK(n):gY(n)},BooleanValue:{leave:({value:n})=>n?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:n})=>n},ListValue:{leave:({values:n})=>"["+Pt(n,", ")+"]"},ObjectValue:{leave:({fields:n})=>"{"+Pt(n,", ")+"}"},ObjectField:{leave:({name:n,value:t})=>n+": "+t},Directive:{leave:({name:n,arguments:t})=>"@"+n+kn("(",Pt(t,", "),")")},NamedType:{leave:({name:n})=>n},ListType:{leave:({type:n})=>"["+n+"]"},NonNullType:{leave:({type:n})=>n+"!"},SchemaDefinition:{leave:({description:n,directives:t,operationTypes:e})=>kn("",n,`
`)+Pt(["schema",Pt(t," "),Jo(e)]," ")},OperationTypeDefinition:{leave:({operation:n,type:t})=>n+": "+t},ScalarTypeDefinition:{leave:({description:n,name:t,directives:e})=>kn("",n,`
`)+Pt(["scalar",t,Pt(e," ")]," ")},ObjectTypeDefinition:{leave:({description:n,name:t,interfaces:e,directives:i,fields:r})=>kn("",n,`
`)+Pt(["type",t,kn("implements ",Pt(e," & ")),Pt(i," "),Jo(r)]," ")},FieldDefinition:{leave:({description:n,name:t,arguments:e,type:i,directives:r})=>kn("",n,`
`)+t+(DO(e)?kn(`(
`,rw(Pt(e,`
`)),`
)`):kn("(",Pt(e,", "),")"))+": "+i+kn(" ",Pt(r," "))},InputValueDefinition:{leave:({description:n,name:t,type:e,defaultValue:i,directives:r})=>kn("",n,`
`)+Pt([t+": "+e,kn("= ",i),Pt(r," ")]," ")},InterfaceTypeDefinition:{leave:({description:n,name:t,interfaces:e,directives:i,fields:r})=>kn("",n,`
`)+Pt(["interface",t,kn("implements ",Pt(e," & ")),Pt(i," "),Jo(r)]," ")},UnionTypeDefinition:{leave:({description:n,name:t,directives:e,types:i})=>kn("",n,`
`)+Pt(["union",t,Pt(e," "),kn("= ",Pt(i," | "))]," ")},EnumTypeDefinition:{leave:({description:n,name:t,directives:e,values:i})=>kn("",n,`
`)+Pt(["enum",t,Pt(e," "),Jo(i)]," ")},EnumValueDefinition:{leave:({description:n,name:t,directives:e})=>kn("",n,`
`)+Pt([t,Pt(e," ")]," ")},InputObjectTypeDefinition:{leave:({description:n,name:t,directives:e,fields:i})=>kn("",n,`
`)+Pt(["input",t,Pt(e," "),Jo(i)]," ")},DirectiveDefinition:{leave:({description:n,name:t,arguments:e,repeatable:i,locations:r})=>kn("",n,`
`)+"directive @"+t+(DO(e)?kn(`(
`,rw(Pt(e,`
`)),`
)`):kn("(",Pt(e,", "),")"))+(i?" repeatable":"")+" on "+Pt(r," | ")},SchemaExtension:{leave:({directives:n,operationTypes:t})=>Pt(["extend schema",Pt(n," "),Jo(t)]," ")},ScalarTypeExtension:{leave:({name:n,directives:t})=>Pt(["extend scalar",n,Pt(t," ")]," ")},ObjectTypeExtension:{leave:({name:n,interfaces:t,directives:e,fields:i})=>Pt(["extend type",n,kn("implements ",Pt(t," & ")),Pt(e," "),Jo(i)]," ")},InterfaceTypeExtension:{leave:({name:n,interfaces:t,directives:e,fields:i})=>Pt(["extend interface",n,kn("implements ",Pt(t," & ")),Pt(e," "),Jo(i)]," ")},UnionTypeExtension:{leave:({name:n,directives:t,types:e})=>Pt(["extend union",n,Pt(t," "),kn("= ",Pt(e," | "))]," ")},EnumTypeExtension:{leave:({name:n,directives:t,values:e})=>Pt(["extend enum",n,Pt(t," "),Jo(e)]," ")},InputObjectTypeExtension:{leave:({name:n,directives:t,fields:e})=>Pt(["extend input",n,Pt(t," "),Jo(e)]," ")}};function Pt(n,t=""){var e;return(e=n==null?void 0:n.filter(i=>i).join(t))!==null&&e!==void 0?e:""}function Jo(n){return kn(`{
`,rw(Pt(n,`
`)),`
}`)}function kn(n,t,e=""){return t!=null&&t!==""?n+t+e:""}function rw(n){return kn("  ",n.replace(/\n/g,`
  `))}function DO(n){var t;return(t=n==null?void 0:n.some(e=>e.includes(`
`)))!==null&&t!==void 0?t:!1}function NO(n){return n.kind===_t.FIELD||n.kind===_t.FRAGMENT_SPREAD||n.kind===_t.INLINE_FRAGMENT}function yv(n,t){var e=n.directives;return!e||!e.length?!0:TY(e).every(function(i){var r=i.directive,s=i.ifArgument,o=!1;return s.value.kind==="Variable"?(o=t&&t[s.value.name.value],kt(o!==void 0,106,r.name.value)):o=s.value.value,r.name.value==="skip"?!o:o})}function Rp(n,t,e){var i=new Set(n),r=i.size;return ka(t,{Directive:function(s){if(i.delete(s.name.value)&&(!e||!i.size))return U_}}),e?!i.size:i.size<r}function EY(n){return n&&Rp(["client","export"],n,!0)}function CY(n){var t=n.name.value;return t==="skip"||t==="include"}function TY(n){var t=[];return n&&n.length&&n.forEach(function(e){if(CY(e)){var i=e.arguments,r=e.name.value;kt(i&&i.length===1,107,r);var s=i[0];kt(s.name&&s.name.value==="if",108,r);var o=s.value;kt(o&&(o.kind==="Variable"||o.kind==="BooleanValue"),109,r),t.push({directive:e,ifArgument:s})}}),t}function SY(n){var t,e,i=(t=n.directives)===null||t===void 0?void 0:t.find(function(s){var o=s.name;return o.value==="unmask"});if(!i)return"mask";var r=(e=i.arguments)===null||e===void 0?void 0:e.find(function(s){var o=s.name;return o.value==="mode"});return globalThis.__DEV__!==!1&&r&&(r.value.kind===_t.VARIABLE?globalThis.__DEV__!==!1&&kt.warn(110):r.value.kind!==_t.STRING?globalThis.__DEV__!==!1&&kt.warn(111):r.value.value!=="migrate"&&globalThis.__DEV__!==!1&&kt.warn(112,r.value.value)),r&&"value"in r.value&&r.value.value==="migrate"?"migrate":"unmask"}const AY=()=>Object.create(null),{forEach:IY,slice:LO}=Array.prototype,{hasOwnProperty:PY}=Object.prototype;class uc{constructor(t=!0,e=AY){this.weakness=t,this.makeData=e}lookup(){return this.lookupArray(arguments)}lookupArray(t){let e=this;return IY.call(t,i=>e=e.getChildTrie(i)),PY.call(e,"data")?e.data:e.data=this.makeData(LO.call(t))}peek(){return this.peekArray(arguments)}peekArray(t){let e=this;for(let i=0,r=t.length;e&&i<r;++i){const s=e.mapFor(t[i],!1);e=s&&s.get(t[i])}return e&&e.data}remove(){return this.removeArray(arguments)}removeArray(t){let e;if(t.length){const i=t[0],r=this.mapFor(i,!1),s=r&&r.get(i);s&&(e=s.removeArray(LO.call(t,1)),!s.data&&!s.weak&&!(s.strong&&s.strong.size)&&r.delete(i))}else e=this.data,delete this.data;return e}getChildTrie(t){const e=this.mapFor(t,!0);let i=e.get(t);return i||e.set(t,i=new uc(this.weakness,this.makeData)),i}mapFor(t,e){return this.weakness&&xY(t)?this.weak||(e?this.weak=new WeakMap:void 0):this.strong||(e?this.strong=new Map:void 0)}}function xY(n){switch(typeof n){case"object":if(n===null)break;case"function":return!0}return!1}var OY=ia(function(){return navigator.product})=="ReactNative",qd=typeof WeakMap=="function"&&!(OY&&!global.HermesInternal),mA=typeof WeakSet=="function",UB=typeof Symbol=="function"&&typeof Symbol.for=="function",z_=UB&&Symbol.asyncIterator;ia(function(){return window.document.createElement});ia(function(){return navigator.userAgent.indexOf("jsdom")>=0});function Ni(n){return n!==null&&typeof n=="object"}function RY(n,t){var e=t,i=[];n.definitions.forEach(function(s){if(s.kind==="OperationDefinition")throw xs(113,s.operation,s.name?" named '".concat(s.name.value,"'"):"");s.kind==="FragmentDefinition"&&i.push(s)}),typeof e>"u"&&(kt(i.length===1,114,i.length),e=i[0].name.value);var r=Be(Be({},n),{definitions:jr([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:e}}]}}],n.definitions,!0)});return r}function _m(n){n===void 0&&(n=[]);var t={};return n.forEach(function(e){t[e.name.value]=e}),t}function H_(n,t){switch(n.kind){case"InlineFragment":return n;case"FragmentSpread":{var e=n.name.value;if(typeof t=="function")return t(e);var i=t&&t[e];return kt(i,115,e),i||null}default:return null}}function VY(n){var t=!0;return ka(n,{FragmentSpread:function(e){if(t=!!e.directives&&e.directives.some(function(i){return i.name.value==="unmask"}),!t)return U_}}),t}function DY(){}class hC{constructor(t=1/0,e=DY){this.max=t,this.dispose=e,this.map=new Map,this.newest=null,this.oldest=null}has(t){return this.map.has(t)}get(t){const e=this.getNode(t);return e&&e.value}get size(){return this.map.size}getNode(t){const e=this.map.get(t);if(e&&e!==this.newest){const{older:i,newer:r}=e;r&&(r.older=i),i&&(i.newer=r),e.older=this.newest,e.older.newer=e,e.newer=null,this.newest=e,e===this.oldest&&(this.oldest=r)}return e}set(t,e){let i=this.getNode(t);return i?i.value=e:(i={key:t,value:e,newer:null,older:this.newest},this.newest&&(this.newest.newer=i),this.newest=i,this.oldest=this.oldest||i,this.map.set(t,i),i.value)}clean(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)}delete(t){const e=this.map.get(t);return e?(e===this.newest&&(this.newest=e.older),e===this.oldest&&(this.oldest=e.newer),e.newer&&(e.newer.older=e.older),e.older&&(e.older.newer=e.newer),this.map.delete(t),this.dispose(e.value,t),!0):!1}}function mC(){}const NY=mC,LY=typeof WeakRef<"u"?WeakRef:function(n){return{deref:()=>n}},MY=typeof WeakMap<"u"?WeakMap:Map,$Y=typeof FinalizationRegistry<"u"?FinalizationRegistry:function(){return{register:mC,unregister:mC}},BY=10024;class ey{constructor(t=1/0,e=NY){this.max=t,this.dispose=e,this.map=new MY,this.newest=null,this.oldest=null,this.unfinalizedNodes=new Set,this.finalizationScheduled=!1,this.size=0,this.finalize=()=>{const i=this.unfinalizedNodes.values();for(let r=0;r<BY;r++){const s=i.next().value;if(!s)break;this.unfinalizedNodes.delete(s);const o=s.key;delete s.key,s.keyRef=new LY(o),this.registry.register(o,s,s)}this.unfinalizedNodes.size>0?queueMicrotask(this.finalize):this.finalizationScheduled=!1},this.registry=new $Y(this.deleteNode.bind(this))}has(t){return this.map.has(t)}get(t){const e=this.getNode(t);return e&&e.value}getNode(t){const e=this.map.get(t);if(e&&e!==this.newest){const{older:i,newer:r}=e;r&&(r.older=i),i&&(i.newer=r),e.older=this.newest,e.older.newer=e,e.newer=null,this.newest=e,e===this.oldest&&(this.oldest=r)}return e}set(t,e){let i=this.getNode(t);return i?i.value=e:(i={key:t,value:e,newer:null,older:this.newest},this.newest&&(this.newest.newer=i),this.newest=i,this.oldest=this.oldest||i,this.scheduleFinalization(i),this.map.set(t,i),this.size++,i.value)}clean(){for(;this.oldest&&this.size>this.max;)this.deleteNode(this.oldest)}deleteNode(t){t===this.newest&&(this.newest=t.older),t===this.oldest&&(this.oldest=t.newer),t.newer&&(t.newer.older=t.older),t.older&&(t.older.newer=t.newer),this.size--;const e=t.key||t.keyRef&&t.keyRef.deref();this.dispose(t.value,e),t.keyRef?this.registry.unregister(t):this.unfinalizedNodes.delete(t),e&&this.map.delete(e)}delete(t){const e=this.map.get(t);return e?(this.deleteNode(e),!0):!1}scheduleFinalization(t){this.unfinalizedNodes.add(t),this.finalizationScheduled||(this.finalizationScheduled=!0,queueMicrotask(this.finalize))}}var $1=new WeakSet;function zB(n){n.size<=(n.max||-1)||$1.has(n)||($1.add(n),setTimeout(function(){n.clean(),$1.delete(n)},100))}var HB=function(n,t){var e=new ey(n,t);return e.set=function(i,r){var s=ey.prototype.set.call(this,i,r);return zB(this),s},e},FY=function(n,t){var e=new hC(n,t);return e.set=function(i,r){var s=hC.prototype.set.call(this,i,r);return zB(this),s},e},UY=Symbol.for("apollo.cacheSize"),ec=Be({},Xw[UY]),Zu={};function WB(n,t){Zu[n]=t}var zY=globalThis.__DEV__!==!1?qY:void 0,HY=globalThis.__DEV__!==!1?GY:void 0,WY=globalThis.__DEV__!==!1?jB:void 0;function jY(){var n={parser:1e3,canonicalStringify:1e3,print:2e3,"documentTransform.cache":2e3,"queryManager.getDocumentInfo":2e3,"PersistedQueryLink.persistedQueryHashes":2e3,"fragmentRegistry.transform":2e3,"fragmentRegistry.lookup":1e3,"fragmentRegistry.findFragmentSpreads":4e3,"cache.fragmentQueryDocuments":1e3,"removeTypenameFromVariables.getVariableDefinitions":2e3,"inMemoryCache.maybeBroadcastWatch":5e3,"inMemoryCache.executeSelectionSet":5e4,"inMemoryCache.executeSubSelectedArray":1e4};return Object.fromEntries(Object.entries(n).map(function(t){var e=t[0],i=t[1];return[e,ec[e]||i]}))}function qY(){var n,t,e,i,r;if(globalThis.__DEV__===!1)throw new Error("only supported in development mode");return{limits:jY(),sizes:Be({print:(n=Zu.print)===null||n===void 0?void 0:n.call(Zu),parser:(t=Zu.parser)===null||t===void 0?void 0:t.call(Zu),canonicalStringify:(e=Zu.canonicalStringify)===null||e===void 0?void 0:e.call(Zu),links:pC(this.link),queryManager:{getDocumentInfo:this.queryManager.transformCache.size,documentTransforms:GB(this.queryManager.documentTransform)}},(r=(i=this.cache).getMemoryInternals)===null||r===void 0?void 0:r.call(i))}}function jB(){return{cache:{fragmentQueryDocuments:Fc(this.getFragmentDoc)}}}function GY(){var n=this.config.fragments;return Be(Be({},jB.apply(this)),{addTypenameDocumentTransform:GB(this.addTypenameTransform),inMemoryCache:{executeSelectionSet:Fc(this.storeReader.executeSelectionSet),executeSubSelectedArray:Fc(this.storeReader.executeSubSelectedArray),maybeBroadcastWatch:Fc(this.maybeBroadcastWatch)},fragmentRegistry:{findFragmentSpreads:Fc(n==null?void 0:n.findFragmentSpreads),lookup:Fc(n==null?void 0:n.lookup),transform:Fc(n==null?void 0:n.transform)}})}function KY(n){return!!n&&"dirtyKey"in n}function Fc(n){return KY(n)?n.size:void 0}function qB(n){return n!=null}function GB(n){return gC(n).map(function(t){return{cache:t}})}function gC(n){return n?jr(jr([Fc(n==null?void 0:n.performWork)],gC(n==null?void 0:n.left),!0),gC(n==null?void 0:n.right),!0).filter(qB):[]}function pC(n){var t;return n?jr(jr([(t=n==null?void 0:n.getMemoryInternals)===null||t===void 0?void 0:t.call(n)],pC(n==null?void 0:n.left),!0),pC(n==null?void 0:n.right),!0).filter(qB):[]}var Yc=Object.assign(function(t){return JSON.stringify(t,YY)},{reset:function(){eh=new FY(ec.canonicalStringify||1e3)}});globalThis.__DEV__!==!1&&WB("canonicalStringify",function(){return eh.size});var eh;Yc.reset();function YY(n,t){if(t&&typeof t=="object"){var e=Object.getPrototypeOf(t);if(e===Object.prototype||e===null){var i=Object.keys(t);if(i.every(QY))return t;var r=JSON.stringify(i),s=eh.get(r);if(!s){i.sort();var o=JSON.stringify(i);s=eh.get(o)||i,eh.set(r,s),eh.set(o,s)}var a=Object.create(e);return s.forEach(function(l){a[l]=t[l]}),a}}return t}function QY(n,t,e){return t===0||e[t-1]<=n}function kh(n){return{__ref:String(n)}}function ti(n){return!!(n&&typeof n=="object"&&typeof n.__ref=="string")}function ZY(n){return Ni(n)&&n.kind==="Document"&&Array.isArray(n.definitions)}function JY(n){return n.kind==="StringValue"}function XY(n){return n.kind==="BooleanValue"}function eQ(n){return n.kind==="IntValue"}function tQ(n){return n.kind==="FloatValue"}function nQ(n){return n.kind==="Variable"}function iQ(n){return n.kind==="ObjectValue"}function rQ(n){return n.kind==="ListValue"}function sQ(n){return n.kind==="EnumValue"}function oQ(n){return n.kind==="NullValue"}function Lh(n,t,e,i){if(eQ(e)||tQ(e))n[t.value]=Number(e.value);else if(XY(e)||JY(e))n[t.value]=e.value;else if(iQ(e)){var r={};e.fields.map(function(o){return Lh(r,o.name,o.value,i)}),n[t.value]=r}else if(nQ(e)){var s=(i||{})[e.name.value];n[t.value]=s}else if(rQ(e))n[t.value]=e.values.map(function(o){var a={};return Lh(a,t,o,i),a[t.value]});else if(sQ(e))n[t.value]=e.value;else if(oQ(e))n[t.value]=null;else throw xs(124,t.value,e.kind)}function aQ(n,t){var e=null;n.directives&&(e={},n.directives.forEach(function(r){e[r.name.value]={},r.arguments&&r.arguments.forEach(function(s){var o=s.name,a=s.value;return Lh(e[r.name.value],o,a,t)})}));var i=null;return n.arguments&&n.arguments.length&&(i={},n.arguments.forEach(function(r){var s=r.name,o=r.value;return Lh(i,s,o,t)})),KB(n.name.value,i,e)}var lQ=["connection","include","skip","client","rest","export","nonreactive"],Jm=Yc,KB=Object.assign(function(n,t,e){if(t&&e&&e.connection&&e.connection.key)if(e.connection.filter&&e.connection.filter.length>0){var i=e.connection.filter?e.connection.filter:[];i.sort();var r={};return i.forEach(function(a){r[a]=t[a]}),"".concat(e.connection.key,"(").concat(Jm(r),")")}else return e.connection.key;var s=n;if(t){var o=Jm(t);s+="(".concat(o,")")}return e&&Object.keys(e).forEach(function(a){lQ.indexOf(a)===-1&&(e[a]&&Object.keys(e[a]).length?s+="@".concat(a,"(").concat(Jm(e[a]),")"):s+="@".concat(a))}),s},{setStringify:function(n){var t=Jm;return Jm=n,t}});function W_(n,t){if(n.arguments&&n.arguments.length){var e={};return n.arguments.forEach(function(i){var r=i.name,s=i.value;return Lh(e,r,s,t)}),e}return null}function tc(n){return n.alias?n.alias.value:n.name.value}function vC(n,t,e){for(var i,r=0,s=t.selections;r<s.length;r++){var o=s[r];if(au(o)){if(o.name.value==="__typename")return n[tc(o)]}else i?i.push(o):i=[o]}if(typeof n.__typename=="string")return n.__typename;if(i)for(var a=0,l=i;a<l.length;a++){var o=l[a],c=vC(n,H_(o,e).selectionSet,e);if(typeof c=="string")return c}}function au(n){return n.kind==="Field"}function cQ(n){return n.kind==="InlineFragment"}function km(n){kt(n&&n.kind==="Document",116);var t=n.definitions.filter(function(e){return e.kind!=="FragmentDefinition"}).map(function(e){if(e.kind!=="OperationDefinition")throw xs(117,e.kind);return e});return kt(t.length<=1,118,t.length),n}function Sd(n){return km(n),n.definitions.filter(function(t){return t.kind==="OperationDefinition"})[0]}function Pg(n){return n.definitions.filter(function(t){return t.kind==="OperationDefinition"&&!!t.name}).map(function(t){return t.name.value})[0]||null}function Em(n){return n.definitions.filter(function(t){return t.kind==="FragmentDefinition"})}function YB(n){var t=Sd(n);return kt(t&&t.operation==="query",119),t}function QB(n){kt(n.kind==="Document",120),kt(n.definitions.length<=1,121);var t=n.definitions[0];return kt(t.kind==="FragmentDefinition",122),t}function Cm(n){km(n);for(var t,e=0,i=n.definitions;e<i.length;e++){var r=i[e];if(r.kind==="OperationDefinition"){var s=r.operation;if(s==="query"||s==="mutation"||s==="subscription")return r}r.kind==="FragmentDefinition"&&!t&&(t=r)}if(t)return t;throw xs(123)}function gA(n){var t=Object.create(null),e=n&&n.variableDefinitions;return e&&e.length&&e.forEach(function(i){i.defaultValue&&Lh(t,i.variable.name,i.defaultValue)}),t}let Vr=null;const MO={};let uQ=1;const dQ=()=>class{constructor(){this.id=["slot",uQ++,Date.now(),Math.random().toString(36).slice(2)].join(":")}hasValue(){for(let t=Vr;t;t=t.parent)if(this.id in t.slots){const e=t.slots[this.id];if(e===MO)break;return t!==Vr&&(Vr.slots[this.id]=e),!0}return Vr&&(Vr.slots[this.id]=MO),!1}getValue(){if(this.hasValue())return Vr.slots[this.id]}withValue(t,e,i,r){const s={__proto__:null,[this.id]:t},o=Vr;Vr={parent:o,slots:s};try{return e.apply(r,i)}finally{Vr=o}}static bind(t){const e=Vr;return function(){const i=Vr;try{return Vr=e,t.apply(this,arguments)}finally{Vr=i}}}static noContext(t,e,i){if(Vr){const r=Vr;try{return Vr=null,t.apply(i,e)}finally{Vr=r}}else return t.apply(i,e)}};function $O(n){try{return n()}catch{}}const B1="@wry/context:Slot",fQ=$O(()=>globalThis)||$O(()=>global)||Object.create(null),BO=fQ,Tm=BO[B1]||Array[B1]||function(n){try{Object.defineProperty(BO,B1,{value:n,enumerable:!1,writable:!1,configurable:!0})}finally{return n}}(dQ()),{bind:VJe,noContext:DJe}=Tm,j_=new Tm,{hasOwnProperty:hQ}=Object.prototype,pA=Array.from||function(n){const t=[];return n.forEach(e=>t.push(e)),t};function vA(n){const{unsubscribe:t}=n;typeof t=="function"&&(n.unsubscribe=void 0,t())}const Vp=[],mQ=100;function Mh(n,t){if(!n)throw new Error(t||"assertion failure")}function ZB(n,t){const e=n.length;return e>0&&e===t.length&&n[e-1]===t[e-1]}function JB(n){switch(n.length){case 0:throw new Error("unknown value");case 1:return n[0];case 2:throw n[1]}}function XB(n){return n.slice(0)}class q_{constructor(t){this.fn=t,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++q_.count}peek(){if(this.value.length===1&&!lu(this))return FO(this),this.value[0]}recompute(t){return Mh(!this.recomputing,"already recomputing"),FO(this),lu(this)?gQ(this,t):JB(this.value)}setDirty(){this.dirty||(this.dirty=!0,e3(this),vA(this))}dispose(){this.setDirty(),s3(this),bA(this,(t,e)=>{t.setDirty(),o3(t,this)})}forget(){this.dispose()}dependOn(t){t.add(this),this.deps||(this.deps=Vp.pop()||new Set),this.deps.add(t)}forgetDeps(){this.deps&&(pA(this.deps).forEach(t=>t.delete(this)),this.deps.clear(),Vp.push(this.deps),this.deps=null)}}q_.count=0;function FO(n){const t=j_.getValue();if(t)return n.parents.add(t),t.childValues.has(n)||t.childValues.set(n,[]),lu(n)?n3(t,n):i3(t,n),t}function gQ(n,t){return s3(n),j_.withValue(n,pQ,[n,t]),bQ(n,t)&&vQ(n),JB(n.value)}function pQ(n,t){n.recomputing=!0;const{normalizeResult:e}=n;let i;e&&n.value.length===1&&(i=XB(n.value)),n.value.length=0;try{if(n.value[0]=n.fn.apply(null,t),e&&i&&!ZB(i,n.value))try{n.value[0]=e(n.value[0],i[0])}catch{}}catch(r){n.value[1]=r}n.recomputing=!1}function lu(n){return n.dirty||!!(n.dirtyChildren&&n.dirtyChildren.size)}function vQ(n){n.dirty=!1,!lu(n)&&t3(n)}function e3(n){bA(n,n3)}function t3(n){bA(n,i3)}function bA(n,t){const e=n.parents.size;if(e){const i=pA(n.parents);for(let r=0;r<e;++r)t(i[r],n)}}function n3(n,t){Mh(n.childValues.has(t)),Mh(lu(t));const e=!lu(n);if(!n.dirtyChildren)n.dirtyChildren=Vp.pop()||new Set;else if(n.dirtyChildren.has(t))return;n.dirtyChildren.add(t),e&&e3(n)}function i3(n,t){Mh(n.childValues.has(t)),Mh(!lu(t));const e=n.childValues.get(t);e.length===0?n.childValues.set(t,XB(t.value)):ZB(e,t.value)||n.setDirty(),r3(n,t),!lu(n)&&t3(n)}function r3(n,t){const e=n.dirtyChildren;e&&(e.delete(t),e.size===0&&(Vp.length<mQ&&Vp.push(e),n.dirtyChildren=null))}function s3(n){n.childValues.size>0&&n.childValues.forEach((t,e)=>{o3(n,e)}),n.forgetDeps(),Mh(n.dirtyChildren===null)}function o3(n,t){t.parents.delete(n),n.childValues.delete(t),r3(n,t)}function bQ(n,t){if(typeof n.subscribe=="function")try{vA(n),n.unsubscribe=n.subscribe.apply(null,t)}catch{return n.setDirty(),!1}return!0}const wQ={setDirty:!0,dispose:!0,forget:!0};function a3(n){const t=new Map;function e(i){const r=j_.getValue();if(r){let s=t.get(i);s||t.set(i,s=new Set),r.dependOn(s)}}return e.dirty=function(r,s){const o=t.get(r);if(o){const a=s&&hQ.call(wQ,s)?s:"setDirty";pA(o).forEach(l=>l[a]()),t.delete(r),vA(o)}},e}let UO;function yQ(...n){return(UO||(UO=new uc(typeof WeakMap=="function"))).lookupArray(n)}const F1=new Set;function Dp(n,{max:t=Math.pow(2,16),keyArgs:e,makeCacheKey:i=yQ,normalizeResult:r,subscribe:s,cache:o=hC}=Object.create(null)){const a=typeof o=="function"?new o(t,f=>f.dispose()):o,l=function(){const f=i.apply(null,e?e.apply(null,arguments):arguments);if(f===void 0)return n.apply(null,arguments);let h=a.get(f);h||(a.set(f,h=new q_(n)),h.normalizeResult=r,h.subscribe=s,h.forget=()=>a.delete(f));const g=h.recompute(Array.prototype.slice.call(arguments));return a.set(f,h),F1.add(a),j_.hasValue()||(F1.forEach(v=>v.clean()),F1.clear()),g};Object.defineProperty(l,"size",{get:()=>a.size,configurable:!1,enumerable:!1}),Object.freeze(l.options={max:t,keyArgs:e,makeCacheKey:i,normalizeResult:r,subscribe:s,cache:a});function c(f){const h=f&&a.get(f);h&&h.setDirty()}l.dirtyKey=c,l.dirty=function(){c(i.apply(null,arguments))};function u(f){const h=f&&a.get(f);if(h)return h.peek()}l.peekKey=u,l.peek=function(){return u(i.apply(null,arguments))};function d(f){return f?a.delete(f):!1}return l.forgetKey=d,l.forget=function(){return d(i.apply(null,arguments))},l.makeCacheKey=i,l.getKey=e?function(){return i.apply(null,e.apply(null,arguments))}:i,Object.freeze(l)}function _Q(n){return n}var l3=function(){function n(t,e){e===void 0&&(e=Object.create(null)),this.resultCache=mA?new WeakSet:new Set,this.transform=t,e.getCacheKey&&(this.getCacheKey=e.getCacheKey),this.cached=e.cache!==!1,this.resetCache()}return n.prototype.getCacheKey=function(t){return[t]},n.identity=function(){return new n(_Q,{cache:!1})},n.split=function(t,e,i){return i===void 0&&(i=n.identity()),Object.assign(new n(function(r){var s=t(r)?e:i;return s.transformDocument(r)},{cache:!1}),{left:e,right:i})},n.prototype.resetCache=function(){var t=this;if(this.cached){var e=new uc(qd);this.performWork=Dp(n.prototype.performWork.bind(this),{makeCacheKey:function(i){var r=t.getCacheKey(i);if(r)return kt(Array.isArray(r),105),e.lookupArray(r)},max:ec["documentTransform.cache"],cache:ey})}},n.prototype.performWork=function(t){return km(t),this.transform(t)},n.prototype.transformDocument=function(t){if(this.resultCache.has(t))return t;var e=this.performWork(t);return this.resultCache.add(e),e},n.prototype.concat=function(t){var e=this;return Object.assign(new n(function(i){return t.transformDocument(e.transformDocument(i))},{cache:!1}),{left:this,right:t})},n}(),Gg,jc=Object.assign(function(n){var t=Gg.get(n);return t||(t=yY(n),Gg.set(n,t)),t},{reset:function(){Gg=new HB(ec.print||2e3)}});jc.reset();globalThis.__DEV__!==!1&&WB("print",function(){return Gg?Gg.size:0});var qi=Array.isArray;function al(n){return Array.isArray(n)&&n.length>0}var zO={kind:_t.FIELD,name:{kind:_t.NAME,value:"__typename"}};function c3(n,t){return!n||n.selectionSet.selections.every(function(e){return e.kind===_t.FRAGMENT_SPREAD&&c3(t[e.name.value],t)})}function kQ(n){return c3(Sd(n)||QB(n),_m(Em(n)))?null:n}function EQ(n){var t=new Map,e=new Map;return n.forEach(function(i){i&&(i.name?t.set(i.name,i):i.test&&e.set(i.test,i))}),function(i){var r=t.get(i.name.value);return!r&&e.size&&e.forEach(function(s,o){o(i)&&(r=s)}),r}}function HO(n){var t=new Map;return function(i){i===void 0&&(i=n);var r=t.get(i);return r||t.set(i,r={variables:new Set,fragmentSpreads:new Set}),r}}function u3(n,t){km(t);for(var e=HO(""),i=HO(""),r=function(w){for(var C=0,k=void 0;C<w.length&&(k=w[C]);++C)if(!qi(k)){if(k.kind===_t.OPERATION_DEFINITION)return e(k.name&&k.name.value);if(k.kind===_t.FRAGMENT_DEFINITION)return i(k.name.value)}return globalThis.__DEV__!==!1&&kt.error(125),null},s=0,o=t.definitions.length-1;o>=0;--o)t.definitions[o].kind===_t.OPERATION_DEFINITION&&++s;var a=EQ(n),l=function(w){return al(w)&&w.map(a).some(function(C){return C&&C.remove})},c=new Map,u=!1,d={enter:function(w){if(l(w.directives))return u=!0,null}},f=ka(t,{Field:d,InlineFragment:d,VariableDefinition:{enter:function(){return!1}},Variable:{enter:function(w,C,k,E,A){var x=r(A);x&&x.variables.add(w.name.value)}},FragmentSpread:{enter:function(w,C,k,E,A){if(l(w.directives))return u=!0,null;var x=r(A);x&&x.fragmentSpreads.add(w.name.value)}},FragmentDefinition:{enter:function(w,C,k,E){c.set(JSON.stringify(E),w)},leave:function(w,C,k,E){var A=c.get(JSON.stringify(E));if(w===A)return w;if(s>0&&w.selectionSet.selections.every(function(x){return x.kind===_t.FIELD&&x.name.value==="__typename"}))return i(w.name.value).removed=!0,u=!0,null}},Directive:{leave:function(w){if(a(w))return u=!0,null}}});if(!u)return t;var h=function(w){return w.transitiveVars||(w.transitiveVars=new Set(w.variables),w.removed||w.fragmentSpreads.forEach(function(C){h(i(C)).transitiveVars.forEach(function(k){w.transitiveVars.add(k)})})),w},g=new Set;f.definitions.forEach(function(w){w.kind===_t.OPERATION_DEFINITION?h(e(w.name&&w.name.value)).fragmentSpreads.forEach(function(C){g.add(C)}):w.kind===_t.FRAGMENT_DEFINITION&&s===0&&!i(w.name.value).removed&&g.add(w.name.value)}),g.forEach(function(w){h(i(w)).fragmentSpreads.forEach(function(C){g.add(C)})});var v=function(w){return!!(!g.has(w)||i(w).removed)},_={enter:function(w){if(v(w.name.value))return null}};return kQ(ka(f,{FragmentSpread:_,FragmentDefinition:_,OperationDefinition:{leave:function(w){if(w.variableDefinitions){var C=h(e(w.name&&w.name.value)).transitiveVars;if(C.size<w.variableDefinitions.length)return Be(Be({},w),{variableDefinitions:w.variableDefinitions.filter(function(k){return C.has(k.variable.name.value)})})}}}}))}var wA=Object.assign(function(n){return ka(n,{SelectionSet:{enter:function(t,e,i){if(!(i&&i.kind===_t.OPERATION_DEFINITION)){var r=t.selections;if(r){var s=r.some(function(a){return au(a)&&(a.name.value==="__typename"||a.name.value.lastIndexOf("__",0)===0)});if(!s){var o=i;if(!(au(o)&&o.directives&&o.directives.some(function(a){return a.name.value==="export"})))return Be(Be({},t),{selections:jr(jr([],r,!0),[zO],!1)})}}}}}})},{added:function(n){return n===zO}});function CQ(n){var t=Cm(n),e=t.operation;if(e==="query")return n;var i=ka(n,{OperationDefinition:{enter:function(r){return Be(Be({},r),{operation:"query"})}}});return i}function d3(n){km(n);var t=u3([{test:function(e){return e.name.value==="client"},remove:!0}],n);return t}function TQ(n){return km(n),ka(n,{FragmentSpread:function(t){var e;if(!(!((e=t.directives)===null||e===void 0)&&e.some(function(i){return i.name.value==="unmask"})))return Be(Be({},t),{directives:jr(jr([],t.directives||[],!0),[{kind:_t.DIRECTIVE,name:{kind:_t.NAME,value:"nonreactive"}}],!1)})}})}var SQ=Object.prototype.hasOwnProperty;function WO(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return G_(n)}function G_(n){var t=n[0]||{},e=n.length;if(e>1)for(var i=new cu,r=1;r<e;++r)t=i.merge(t,n[r]);return t}var AQ=function(n,t,e){return this.merge(n[e],t[e])},cu=function(){function n(t){t===void 0&&(t=AQ),this.reconciler=t,this.isObject=Ni,this.pastCopies=new Set}return n.prototype.merge=function(t,e){for(var i=this,r=[],s=2;s<arguments.length;s++)r[s-2]=arguments[s];return Ni(e)&&Ni(t)?(Object.keys(e).forEach(function(o){if(SQ.call(t,o)){var a=t[o];if(e[o]!==a){var l=i.reconciler.apply(i,jr([t,e,o],r,!1));l!==a&&(t=i.shallowCopyForMerge(t),t[o]=l)}}else t=i.shallowCopyForMerge(t),t[o]=e[o]}),t):e},n.prototype.shallowCopyForMerge=function(t){return Ni(t)&&(this.pastCopies.has(t)||(Array.isArray(t)?t=t.slice(0):t=Be({__proto__:Object.getPrototypeOf(t)},t),this.pastCopies.add(t))),t},n}();function IQ(n,t){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e)return(e=e.call(n)).next.bind(e);if(Array.isArray(n)||(e=PQ(n))||t){e&&(n=e);var i=0;return function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PQ(n,t){if(n){if(typeof n=="string")return jO(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return jO(n,t)}}function jO(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}function qO(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function yA(n,t,e){return t&&qO(n.prototype,t),e&&qO(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}var _A=function(){return typeof Symbol=="function"},kA=function(n){return _A()&&!!Symbol[n]},EA=function(n){return kA(n)?Symbol[n]:"@@"+n};_A()&&!kA("observable")&&(Symbol.observable=Symbol("observable"));var xQ=EA("iterator"),bC=EA("observable"),f3=EA("species");function ty(n,t){var e=n[t];if(e!=null){if(typeof e!="function")throw new TypeError(e+" is not a function");return e}}function Xm(n){var t=n.constructor;return t!==void 0&&(t=t[f3],t===null&&(t=void 0)),t!==void 0?t:ui}function OQ(n){return n instanceof ui}function $h(n){$h.log?$h.log(n):setTimeout(function(){throw n})}function sw(n){Promise.resolve().then(function(){try{n()}catch(t){$h(t)}})}function h3(n){var t=n._cleanup;if(t!==void 0&&(n._cleanup=void 0,!!t))try{if(typeof t=="function")t();else{var e=ty(t,"unsubscribe");e&&e.call(t)}}catch(i){$h(i)}}function wC(n){n._observer=void 0,n._queue=void 0,n._state="closed"}function RQ(n){var t=n._queue;if(t){n._queue=void 0,n._state="ready";for(var e=0;e<t.length&&(m3(n,t[e].type,t[e].value),n._state!=="closed");++e);}}function m3(n,t,e){n._state="running";var i=n._observer;try{var r=ty(i,t);switch(t){case"next":r&&r.call(i,e);break;case"error":if(wC(n),r)r.call(i,e);else throw e;break;case"complete":wC(n),r&&r.call(i);break}}catch(s){$h(s)}n._state==="closed"?h3(n):n._state==="running"&&(n._state="ready")}function U1(n,t,e){if(n._state!=="closed"){if(n._state==="buffering"){n._queue.push({type:t,value:e});return}if(n._state!=="ready"){n._state="buffering",n._queue=[{type:t,value:e}],sw(function(){return RQ(n)});return}m3(n,t,e)}}var VQ=function(){function n(e,i){this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state="initializing";var r=new DQ(this);try{this._cleanup=i.call(void 0,r)}catch(s){r.error(s)}this._state==="initializing"&&(this._state="ready")}var t=n.prototype;return t.unsubscribe=function(){this._state!=="closed"&&(wC(this),h3(this))},yA(n,[{key:"closed",get:function(){return this._state==="closed"}}]),n}(),DQ=function(){function n(e){this._subscription=e}var t=n.prototype;return t.next=function(i){U1(this._subscription,"next",i)},t.error=function(i){U1(this._subscription,"error",i)},t.complete=function(){U1(this._subscription,"complete")},yA(n,[{key:"closed",get:function(){return this._subscription._state==="closed"}}]),n}(),ui=function(){function n(e){if(!(this instanceof n))throw new TypeError("Observable cannot be called as a function");if(typeof e!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=e}var t=n.prototype;return t.subscribe=function(i){return(typeof i!="object"||i===null)&&(i={next:i,error:arguments[1],complete:arguments[2]}),new VQ(i,this._subscriber)},t.forEach=function(i){var r=this;return new Promise(function(s,o){if(typeof i!="function"){o(new TypeError(i+" is not a function"));return}function a(){l.unsubscribe(),s()}var l=r.subscribe({next:function(c){try{i(c,a)}catch(u){o(u),l.unsubscribe()}},error:o,complete:s})})},t.map=function(i){var r=this;if(typeof i!="function")throw new TypeError(i+" is not a function");var s=Xm(this);return new s(function(o){return r.subscribe({next:function(a){try{a=i(a)}catch(l){return o.error(l)}o.next(a)},error:function(a){o.error(a)},complete:function(){o.complete()}})})},t.filter=function(i){var r=this;if(typeof i!="function")throw new TypeError(i+" is not a function");var s=Xm(this);return new s(function(o){return r.subscribe({next:function(a){try{if(!i(a))return}catch(l){return o.error(l)}o.next(a)},error:function(a){o.error(a)},complete:function(){o.complete()}})})},t.reduce=function(i){var r=this;if(typeof i!="function")throw new TypeError(i+" is not a function");var s=Xm(this),o=arguments.length>1,a=!1,l=arguments[1],c=l;return new s(function(u){return r.subscribe({next:function(d){var f=!a;if(a=!0,!f||o)try{c=i(c,d)}catch(h){return u.error(h)}else c=d},error:function(d){u.error(d)},complete:function(){if(!a&&!o)return u.error(new TypeError("Cannot reduce an empty sequence"));u.next(c),u.complete()}})})},t.concat=function(){for(var i=this,r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];var a=Xm(this);return new a(function(l){var c,u=0;function d(f){c=f.subscribe({next:function(h){l.next(h)},error:function(h){l.error(h)},complete:function(){u===s.length?(c=void 0,l.complete()):d(a.from(s[u++]))}})}return d(i),function(){c&&(c.unsubscribe(),c=void 0)}})},t.flatMap=function(i){var r=this;if(typeof i!="function")throw new TypeError(i+" is not a function");var s=Xm(this);return new s(function(o){var a=[],l=r.subscribe({next:function(u){if(i)try{u=i(u)}catch(f){return o.error(f)}var d=s.from(u).subscribe({next:function(f){o.next(f)},error:function(f){o.error(f)},complete:function(){var f=a.indexOf(d);f>=0&&a.splice(f,1),c()}});a.push(d)},error:function(u){o.error(u)},complete:function(){c()}});function c(){l.closed&&a.length===0&&o.complete()}return function(){a.forEach(function(u){return u.unsubscribe()}),l.unsubscribe()}})},t[bC]=function(){return this},n.from=function(i){var r=typeof this=="function"?this:n;if(i==null)throw new TypeError(i+" is not an object");var s=ty(i,bC);if(s){var o=s.call(i);if(Object(o)!==o)throw new TypeError(o+" is not an object");return OQ(o)&&o.constructor===r?o:new r(function(a){return o.subscribe(a)})}if(kA("iterator")&&(s=ty(i,xQ),s))return new r(function(a){sw(function(){if(!a.closed){for(var l=IQ(s.call(i)),c;!(c=l()).done;){var u=c.value;if(a.next(u),a.closed)return}a.complete()}})});if(Array.isArray(i))return new r(function(a){sw(function(){if(!a.closed){for(var l=0;l<i.length;++l)if(a.next(i[l]),a.closed)return;a.complete()}})});throw new TypeError(i+" is not observable")},n.of=function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];var o=typeof this=="function"?this:n;return new o(function(a){sw(function(){if(!a.closed){for(var l=0;l<r.length;++l)if(a.next(r[l]),a.closed)return;a.complete()}})})},yA(n,null,[{key:f3,get:function(){return this}}]),n}();_A()&&Object.defineProperty(ui,Symbol("extensions"),{value:{symbol:bC,hostReportError:$h},configurable:!0});function NQ(n){var t,e=n.Symbol;if(typeof e=="function")if(e.observable)t=e.observable;else{typeof e.for=="function"?t=e.for("https://github.com/benlesh/symbol-observable"):t=e("https://github.com/benlesh/symbol-observable");try{e.observable=t}catch{}}else t="@@observable";return t}var Nf;typeof self<"u"?Nf=self:typeof window<"u"?Nf=window:typeof global<"u"?Nf=global:typeof module<"u"?Nf=module:Nf=Function("return this")();NQ(Nf);var GO=ui.prototype,KO="@@observable";GO[KO]||(GO[KO]=function(){return this});function LQ(n){return n.catch(function(){}),n}var MQ=Object.prototype.toString;function g3(n){return yC(n)}function yC(n,t){switch(MQ.call(n)){case"[object Array]":{if(t=t||new Map,t.has(n))return t.get(n);var e=n.slice(0);return t.set(n,e),e.forEach(function(r,s){e[s]=yC(r,t)}),e}case"[object Object]":{if(t=t||new Map,t.has(n))return t.get(n);var i=Object.create(Object.getPrototypeOf(n));return t.set(n,i),Object.keys(n).forEach(function(r){i[r]=yC(n[r],t)}),i}default:return n}}function $Q(n){var t=new Set([n]);return t.forEach(function(e){Ni(e)&&BQ(e)===e&&Object.getOwnPropertyNames(e).forEach(function(i){Ni(e[i])&&t.add(e[i])})}),n}function BQ(n){if(globalThis.__DEV__!==!1&&!Object.isFrozen(n))try{Object.freeze(n)}catch(t){if(t instanceof TypeError)return null;throw t}return n}function ny(n){return globalThis.__DEV__!==!1&&$Q(n),n}function Kg(n,t,e){var i=[];n.forEach(function(r){return r[t]&&i.push(r)}),i.forEach(function(r){return r[t](e)})}function z1(n,t,e){return new ui(function(i){var r={then:function(l){return new Promise(function(c){return c(l())})}};function s(l,c){return function(u){if(l){var d=function(){return i.closed?0:l(u)};r=r.then(d,d).then(function(f){return i.next(f)},function(f){return i.error(f)})}else i[c](u)}}var o={next:s(t,"next"),error:s(e,"error"),complete:function(){r.then(function(){return i.complete()})}},a=n.subscribe(o);return function(){return a.unsubscribe()}})}function p3(n){function t(e){Object.defineProperty(n,e,{value:ui})}return UB&&Symbol.species&&t(Symbol.species),t("@@species"),n}function YO(n){return n&&typeof n.then=="function"}var Lf=function(n){Wo(t,n);function t(e){var i=n.call(this,function(r){return i.addObserver(r),function(){return i.removeObserver(r)}})||this;return i.observers=new Set,i.promise=new Promise(function(r,s){i.resolve=r,i.reject=s}),i.handlers={next:function(r){i.sub!==null&&(i.latest=["next",r],i.notify("next",r),Kg(i.observers,"next",r))},error:function(r){var s=i.sub;s!==null&&(s&&setTimeout(function(){return s.unsubscribe()}),i.sub=null,i.latest=["error",r],i.reject(r),i.notify("error",r),Kg(i.observers,"error",r))},complete:function(){var r=i,s=r.sub,o=r.sources,a=o===void 0?[]:o;if(s!==null){var l=a.shift();l?YO(l)?l.then(function(c){return i.sub=c.subscribe(i.handlers)},i.handlers.error):i.sub=l.subscribe(i.handlers):(s&&setTimeout(function(){return s.unsubscribe()}),i.sub=null,i.latest&&i.latest[0]==="next"?i.resolve(i.latest[1]):i.resolve(),i.notify("complete"),Kg(i.observers,"complete"))}}},i.nextResultListeners=new Set,i.cancel=function(r){i.reject(r),i.sources=[],i.handlers.error(r)},i.promise.catch(function(r){}),typeof e=="function"&&(e=[new ui(e)]),YO(e)?e.then(function(r){return i.start(r)},i.handlers.error):i.start(e),i}return t.prototype.start=function(e){this.sub===void 0&&(this.sources=Array.from(e),this.handlers.complete())},t.prototype.deliverLastMessage=function(e){if(this.latest){var i=this.latest[0],r=e[i];r&&r.call(e,this.latest[1]),this.sub===null&&i==="next"&&e.complete&&e.complete()}},t.prototype.addObserver=function(e){this.observers.has(e)||(this.deliverLastMessage(e),this.observers.add(e))},t.prototype.removeObserver=function(e){this.observers.delete(e)&&this.observers.size<1&&this.handlers.complete()},t.prototype.notify=function(e,i){var r=this.nextResultListeners;r.size&&(this.nextResultListeners=new Set,r.forEach(function(s){return s(e,i)}))},t.prototype.beforeNext=function(e){var i=!1;this.nextResultListeners.add(function(r,s){i||(i=!0,e(r,s))})},t}(ui);p3(Lf);function Eh(n){return"incremental"in n}function FQ(n){return"hasNext"in n&&"data"in n}function UQ(n){return Eh(n)||FQ(n)}function zQ(n){return Ni(n)&&"payload"in n}function v3(n,t){var e=n,i=new cu;return Eh(t)&&al(t.incremental)&&t.incremental.forEach(function(r){for(var s=r.data,o=r.path,a=o.length-1;a>=0;--a){var l=o[a],c=!isNaN(+l),u=c?[]:{};u[l]=s,s=u}e=i.merge(e,s)}),e}function ow(n){var t=_C(n);return al(t)}function _C(n){var t=al(n.errors)?n.errors.slice(0):[];return Eh(n)&&al(n.incremental)&&n.incremental.forEach(function(e){e.errors&&t.push.apply(t,e.errors)}),t}function Bh(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=Object.create(null);return n.forEach(function(i){i&&Object.keys(i).forEach(function(r){var s=i[r];s!==void 0&&(e[r]=s)})}),e}function H1(n,t){return Bh(n,t,t.variables&&{variables:Bh(Be(Be({},n&&n.variables),t.variables))})}function W1(n){return new ui(function(t){t.error(n)})}var b3=function(n,t,e){var i=new Error(e);throw i.name="ServerError",i.response=n,i.statusCode=n.status,i.result=t,i};function HQ(n){for(var t=["query","operationName","variables","extensions","context"],e=0,i=Object.keys(n);e<i.length;e++){var r=i[e];if(t.indexOf(r)<0)throw xs(58,r)}return n}function WQ(n,t){var e=Be({},n),i=function(s){typeof s=="function"?e=Be(Be({},e),s(e)):e=Be(Be({},e),s)},r=function(){return Be({},e)};return Object.defineProperty(t,"setContext",{enumerable:!1,value:i}),Object.defineProperty(t,"getContext",{enumerable:!1,value:r}),t}function jQ(n){var t={variables:n.variables||{},extensions:n.extensions||{},operationName:n.operationName,query:n.query};return t.operationName||(t.operationName=typeof t.query!="string"?Pg(t.query)||void 0:""),t}function qQ(n,t){var e=Be({},n),i=new Set(Object.keys(n));return ka(t,{Variable:function(r,s,o){o&&o.kind!=="VariableDefinition"&&i.delete(r.name.value)}}),i.forEach(function(r){delete e[r]}),e}var GQ=Symbol.for("apollo.deprecations"),KQ=Xw,kC=new Tm;function YQ(n){return KQ[GQ]||(kC.getValue()||[]).includes(n)}function is(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return kC.withValue.apply(kC,jr([Array.isArray(n)?n:[n]],t,!1))}function Yi(n,t,e,i){i===void 0&&(i="Please remove this option."),id(t,function(){t in n&&globalThis.__DEV__!==!1&&kt.warn(104,e,t,i)})}function id(n,t){YQ(n)||t()}function QO(n,t){return t?t(n):ui.of()}function eg(n){return typeof n=="function"?new gl(n):n}function ub(n){return n.request.length<=1}var gl=function(){function n(t){t&&(this.request=t)}return n.empty=function(){return new n(function(){return ui.of()})},n.from=function(t){return t.length===0?n.empty():t.map(eg).reduce(function(e,i){return e.concat(i)})},n.split=function(t,e,i){var r=eg(e),s=eg(i||new n(QO)),o;return ub(r)&&ub(s)?o=new n(function(a){return t(a)?r.request(a)||ui.of():s.request(a)||ui.of()}):o=new n(function(a,l){return t(a)?r.request(a,l)||ui.of():s.request(a,l)||ui.of()}),Object.assign(o,{left:r,right:s})},n.execute=function(t,e){return t.request(WQ(e.context,jQ(HQ(e))))||ui.of()},n.concat=function(t,e){var i=eg(t);if(ub(i))return globalThis.__DEV__!==!1&&kt.warn(47,i),i;var r=eg(e),s;return ub(r)?s=new n(function(o){return i.request(o,function(a){return r.request(a)||ui.of()})||ui.of()}):s=new n(function(o,a){return i.request(o,function(l){return r.request(l,a)||ui.of()})||ui.of()}),Object.assign(s,{left:i,right:r})},n.prototype.split=function(t,e,i){return this.concat(n.split(t,e,i||new n(QO)))},n.prototype.concat=function(t){return n.concat(this,t)},n.prototype.request=function(t,e){throw xs(48)},n.prototype.onError=function(t,e){if(globalThis.__DEV__!==!1&&id("onError",function(){globalThis.__DEV__!==!1&&kt.warn(49)}),e&&e.error)return e.error(t),!1;throw t},n.prototype.setOnError=function(t){return globalThis.__DEV__!==!1&&globalThis.__DEV__!==!1&&kt.warn(50),this.onError=t,this},n}(),QQ=gl.split,EC=gl.execute;function ZQ(n){var t,e=n[Symbol.asyncIterator]();return t={next:function(){return e.next()}},t[Symbol.asyncIterator]=function(){return this},t}function JQ(n){var t=null,e=null,i=!1,r=[],s=[];function o(d){if(!e){if(s.length){var f=s.shift();if(Array.isArray(f)&&f[0])return f[0]({value:d,done:!1})}r.push(d)}}function a(d){e=d;var f=s.slice();f.forEach(function(h){h[1](d)}),!t||t()}function l(){i=!0;var d=s.slice();d.forEach(function(f){f[0]({value:void 0,done:!0})}),!t||t()}t=function(){t=null,n.removeListener("data",o),n.removeListener("error",a),n.removeListener("end",l),n.removeListener("finish",l),n.removeListener("close",l)},n.on("data",o),n.on("error",a),n.on("end",l),n.on("finish",l),n.on("close",l);function c(){return new Promise(function(d,f){if(e)return f(e);if(r.length)return d({value:r.shift(),done:!1});if(i)return d({value:void 0,done:!0});s.push([d,f])})}var u={next:function(){return c()}};return z_&&(u[Symbol.asyncIterator]=function(){return this}),u}function XQ(n){var t=!1,e={next:function(){return t?Promise.resolve({value:void 0,done:!0}):(t=!0,new Promise(function(i,r){n.then(function(s){i({value:s,done:!1})}).catch(r)}))}};return z_&&(e[Symbol.asyncIterator]=function(){return this}),e}function ZO(n){var t={next:function(){return n.read()}};return z_&&(t[Symbol.asyncIterator]=function(){return this}),t}function eZ(n){return!!n.body}function tZ(n){return!!n.getReader}function nZ(n){return!!(z_&&n[Symbol.asyncIterator])}function iZ(n){return!!n.stream}function rZ(n){return!!n.arrayBuffer}function sZ(n){return!!n.pipe}function oZ(n){var t=n;if(eZ(n)&&(t=n.body),nZ(t))return ZQ(t);if(tZ(t))return ZO(t.getReader());if(iZ(t))return ZO(t.stream().getReader());if(rZ(t))return XQ(t.arrayBuffer());if(sZ(t))return JQ(t);throw new Error("Unknown body type for responseIterator. Please pass a streamable response.")}var K_=Symbol();function w3(n){return n.extensions?Array.isArray(n.extensions[K_]):!1}function CA(n){return n.hasOwnProperty("graphQLErrors")}var aZ=function(n){var t=jr(jr(jr([],n.graphQLErrors,!0),n.clientErrors,!0),n.protocolErrors,!0);return n.networkError&&t.push(n.networkError),t.map(function(e){return Ni(e)&&e.message||"Error message not found."}).join(`
`)},ra=function(n){Wo(t,n);function t(e){var i=e.graphQLErrors,r=e.protocolErrors,s=e.clientErrors,o=e.networkError,a=e.errorMessage,l=e.extraInfo,c=n.call(this,a)||this;return c.name="ApolloError",c.graphQLErrors=i||[],c.protocolErrors=r||[],c.clientErrors=s||[],c.networkError=o||null,c.message=a||aZ(c),c.extraInfo=l,c.cause=jr(jr(jr([o],i||[],!0),r||[],!0),s||[],!0).find(function(u){return!!u})||null,c.__proto__=t.prototype,c}return t}(Error),JO=Object.prototype.hasOwnProperty;function lZ(n,t){return $c(this,void 0,void 0,function(){var e,i,r,s,o,a,l,c,u,d,f,h,g,v,_,w,C,k,E,A,x,p,D,R;return Bc(this,function(S){switch(S.label){case 0:if(TextDecoder===void 0)throw new Error("TextDecoder must be defined in the environment: please import a polyfill.");e=new TextDecoder("utf-8"),i=(R=n.headers)===null||R===void 0?void 0:R.get("content-type"),r="boundary=",s=i!=null&&i.includes(r)?i==null?void 0:i.substring((i==null?void 0:i.indexOf(r))+r.length).replace(/['"]/g,"").replace(/\;(.*)/gm,"").trim():"-",o=`\r
--`.concat(s),a="",l=oZ(n),c=!0,S.label=1;case 1:return c?[4,l.next()]:[3,3];case 2:for(u=S.sent(),d=u.value,f=u.done,h=typeof d=="string"?d:e.decode(d),g=a.length-o.length+1,c=!f,a+=h,v=a.indexOf(o,g);v>-1;){if(_=void 0,p=[a.slice(0,v),a.slice(v+o.length)],_=p[0],a=p[1],w=_.indexOf(`\r
\r
`),C=cZ(_.slice(0,w)),k=C["content-type"],k&&k.toLowerCase().indexOf("application/json")===-1)throw new Error("Unsupported patch content type: application/json is required.");if(E=_.slice(w),E){if(A=y3(n,E),Object.keys(A).length>1||"data"in A||"incremental"in A||"errors"in A||"payload"in A)if(zQ(A)){if(x={},"payload"in A){if(Object.keys(A).length===1&&A.payload===null)return[2];x=Be({},A.payload)}"errors"in A&&(x=Be(Be({},x),{extensions:Be(Be({},"extensions"in x?x.extensions:null),(D={},D[K_]=A.errors,D))})),t(x)}else t(A);else if(Object.keys(A).length===1&&"hasNext"in A&&!A.hasNext)return[2]}v=a.indexOf(o)}return[3,1];case 3:return[2]}})})}function cZ(n){var t={};return n.split(`
`).forEach(function(e){var i=e.indexOf(":");if(i>-1){var r=e.slice(0,i).trim().toLowerCase(),s=e.slice(i+1).trim();t[r]=s}}),t}function y3(n,t){if(n.status>=300){var e=function(){try{return JSON.parse(t)}catch{return t}};b3(n,e(),"Response not successful: Received status code ".concat(n.status))}try{return JSON.parse(t)}catch(r){var i=r;throw i.name="ServerParseError",i.response=n,i.statusCode=n.status,i.bodyText=t,i}}function uZ(n,t){n.result&&n.result.errors&&n.result.data&&t.next(n.result),t.error(n)}function dZ(n){return function(t){return t.text().then(function(e){return y3(t,e)}).then(function(e){return!Array.isArray(e)&&!JO.call(e,"data")&&!JO.call(e,"errors")&&b3(t,e,"Server response was missing for query '".concat(Array.isArray(n)?n.map(function(i){return i.operationName}):n.operationName,"'.")),e})}}var CC=function(n,t){var e;try{e=JSON.stringify(n)}catch(r){var i=xs(54,t,r.message);throw i.parseError=r,i}return e},fZ={includeQuery:!0,includeExtensions:!1,preserveHeaderCase:!1},hZ={accept:"*/*","content-type":"application/json"},mZ={method:"POST"},gZ={http:fZ,headers:hZ,options:mZ},pZ=function(n,t){return t(n)};function vZ(n,t){for(var e=[],i=2;i<arguments.length;i++)e[i-2]=arguments[i];var r={},s={};e.forEach(function(d){r=Be(Be(Be({},r),d.options),{headers:Be(Be({},r.headers),d.headers)}),d.credentials&&(r.credentials=d.credentials),s=Be(Be({},s),d.http)}),r.headers&&(r.headers=bZ(r.headers,s.preserveHeaderCase));var o=n.operationName,a=n.extensions,l=n.variables,c=n.query,u={operationName:o,variables:l};return s.includeExtensions&&(u.extensions=a),s.includeQuery&&(u.query=t(c,jc)),{options:r,body:u}}function bZ(n,t){if(!t){var e={};return Object.keys(Object(n)).forEach(function(s){e[s.toLowerCase()]=n[s]}),e}var i={};Object.keys(Object(n)).forEach(function(s){i[s.toLowerCase()]={originalName:s,value:n[s]}});var r={};return Object.keys(i).forEach(function(s){r[i[s].originalName]=i[s].value}),r}var wZ=function(n){if(!n&&typeof fetch>"u")throw xs(51)},yZ=function(n,t){var e=n.getContext(),i=e.uri;return i||(typeof t=="function"?t(n):t||"/graphql")};function _Z(n,t){var e=[],i=function(d,f){e.push("".concat(d,"=").concat(encodeURIComponent(f)))};if("query"in t&&i("query",t.query),t.operationName&&i("operationName",t.operationName),t.variables){var r=void 0;try{r=CC(t.variables,"Variables map")}catch(d){return{parseError:d}}i("variables",r)}if(t.extensions){var s=void 0;try{s=CC(t.extensions,"Extensions map")}catch(d){return{parseError:d}}i("extensions",s)}var o="",a=n,l=n.indexOf("#");l!==-1&&(o=n.substr(l),a=n.substr(0,l));var c=a.indexOf("?")===-1?"?":"&",u=a+c+e.join("&")+o;return{newURI:u}}var XO=ia(function(){return fetch}),kZ=function(n){n===void 0&&(n={});var t=n.uri,e=t===void 0?"/graphql":t,i=n.fetch,r=n.print,s=r===void 0?pZ:r,o=n.includeExtensions,a=n.preserveHeaderCase,l=n.useGETForQueries,c=n.includeUnusedVariables,u=c===void 0?!1:c,d=jl(n,["uri","fetch","print","includeExtensions","preserveHeaderCase","useGETForQueries","includeUnusedVariables"]);globalThis.__DEV__!==!1&&wZ(i||XO);var f={http:{includeExtensions:o,preserveHeaderCase:a},options:d.fetchOptions,credentials:d.credentials,headers:d.headers};return new gl(function(h){var g=yZ(h,e),v=h.getContext(),_={};if(v.clientAwareness){var w=v.clientAwareness,C=w.name,k=w.version;C&&(_["apollographql-client-name"]=C),k&&(_["apollographql-client-version"]=k)}var E=Be(Be({},_),v.headers),A={http:v.http,options:v.fetchOptions,credentials:v.credentials,headers:E};if(Rp(["client"],h.query)){globalThis.__DEV__!==!1&&globalThis.__DEV__!==!1&&kt.warn(52);var x=d3(h.query);if(!x)return W1(new Error("HttpLink: Trying to send a client-only query to the server. To send to the server, ensure a non-client field is added to the query or set the `transformOptions.removeClientFields` option to `true`."));h.query=x}var p=vZ(h,s,gZ,f,A),D=p.options,R=p.body;R.variables&&!u&&(R.variables=qQ(R.variables,h.query));var S;!D.signal&&typeof AbortController<"u"&&(S=new AbortController,D.signal=S.signal);var I=function(K){return K.kind==="OperationDefinition"&&K.operation==="mutation"},F=function(K){return K.kind==="OperationDefinition"&&K.operation==="subscription"},H=F(Cm(h.query)),q=Rp(["defer"],h.query);if(l&&!h.query.definitions.some(I)&&(D.method="GET"),q||H){D.headers=D.headers||{};var N="multipart/mixed;";H&&q&&globalThis.__DEV__!==!1&&kt.warn(53),H?N+="boundary=graphql;subscriptionSpec=1.0,application/json":q&&(N+="deferSpec=20220824,application/json"),D.headers.accept=N}if(D.method==="GET"){var $=_Z(g,R),U=$.newURI,re=$.parseError;if(re)return W1(re);g=U}else try{D.body=CC(R,"Payload")}catch(K){return W1(K)}return new ui(function(K){var z=i||ia(function(){return fetch})||XO,ge=K.next.bind(K);return z(g,D).then(function(Q){var ue;h.setContext({response:Q});var ve=(ue=Q.headers)===null||ue===void 0?void 0:ue.get("content-type");return ve!==null&&/^multipart\/mixed/i.test(ve)?lZ(Q,ge):dZ(h)(Q).then(ge)}).then(function(){S=void 0,K.complete()}).catch(function(Q){S=void 0,uZ(Q,K)}),function(){S&&S.abort()}})})},_3=function(n){Wo(t,n);function t(e){e===void 0&&(e={});var i=n.call(this,kZ(e).request)||this;return i.options=e,i}return t}(gl);const{toString:e2,hasOwnProperty:EZ}=Object.prototype,t2=Function.prototype.toString,TC=new Map;function wi(n,t){try{return SC(n,t)}finally{TC.clear()}}function SC(n,t){if(n===t)return!0;const e=e2.call(n),i=e2.call(t);if(e!==i)return!1;switch(e){case"[object Array]":if(n.length!==t.length)return!1;case"[object Object]":{if(i2(n,t))return!0;const r=n2(n),s=n2(t),o=r.length;if(o!==s.length)return!1;for(let a=0;a<o;++a)if(!EZ.call(t,r[a]))return!1;for(let a=0;a<o;++a){const l=r[a];if(!SC(n[l],t[l]))return!1}return!0}case"[object Error]":return n.name===t.name&&n.message===t.message;case"[object Number]":if(n!==n)return t!==t;case"[object Boolean]":case"[object Date]":return+n==+t;case"[object RegExp]":case"[object String]":return n==`${t}`;case"[object Map]":case"[object Set]":{if(n.size!==t.size)return!1;if(i2(n,t))return!0;const r=n.entries(),s=e==="[object Map]";for(;;){const o=r.next();if(o.done)break;const[a,l]=o.value;if(!t.has(a)||s&&!SC(l,t.get(a)))return!1}return!0}case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":n=new Uint8Array(n),t=new Uint8Array(t);case"[object DataView]":{let r=n.byteLength;if(r===t.byteLength)for(;r--&&n[r]===t[r];);return r===-1}case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":{const r=t2.call(n);return r!==t2.call(t)?!1:!SZ(r,TZ)}}return!1}function n2(n){return Object.keys(n).filter(CZ,n)}function CZ(n){return this[n]!==void 0}const TZ="{ [native code] }";function SZ(n,t){const e=n.length-t.length;return e>=0&&n.indexOf(t,e)===e}function i2(n,t){let e=TC.get(n);if(e){if(e.has(t))return!0}else TC.set(n,e=new Set);return e.add(t),!1}function k3(n,t,e,i){var r=t.data,s=jl(t,["data"]),o=e.data,a=jl(e,["data"]);return wi(s,a)&&aw(Cm(n).selectionSet,r,o,{fragmentMap:_m(Em(n)),variables:i})}function aw(n,t,e,i){if(t===e)return!0;var r=new Set;return n.selections.every(function(s){if(r.has(s)||(r.add(s),!yv(s,i.variables))||r2(s))return!0;if(au(s)){var o=tc(s),a=t&&t[o],l=e&&e[o],c=s.selectionSet;if(!c)return wi(a,l);var u=Array.isArray(a),d=Array.isArray(l);if(u!==d)return!1;if(u&&d){var f=a.length;if(l.length!==f)return!1;for(var h=0;h<f;++h)if(!aw(c,a[h],l[h],i))return!1;return!0}return aw(c,a,l,i)}else{var g=H_(s,i.fragmentMap);if(g)return r2(g)?!0:aw(g.selectionSet,t,e,i)}})}function r2(n){return!!n.directives&&n.directives.some(AZ)}function AZ(n){return n.name.value==="nonreactive"}var E3=qd?WeakMap:Map,C3=mA?WeakSet:Set,TA=new Tm,s2=!1;function T3(){s2||(s2=!0,globalThis.__DEV__!==!1&&kt.warn(64))}function S3(n,t,e){return TA.withValue(!0,function(){var i=xg(n,t,e,!1);return Object.isFrozen(n)&&ny(i),i})}function IZ(n,t){if(t.has(n))return t.get(n);var e=Array.isArray(n)?[]:Object.create(null);return t.set(n,e),e}function xg(n,t,e,i,r){var s,o=e.knownChanged,a=IZ(n,e.mutableTargets);if(Array.isArray(n)){for(var l=0,c=Array.from(n.entries());l<c.length;l++){var u=c[l],d=u[0],f=u[1];if(f===null){a[d]=null;continue}var h=xg(f,t,e,i,globalThis.__DEV__!==!1?"".concat(r||"","[").concat(d,"]"):void 0);o.has(h)&&o.add(a),a[d]=h}return o.has(a)?a:n}for(var g=0,v=t.selections;g<v.length;g++){var _=v[g],w=void 0;if(i&&o.add(a),_.kind===_t.FIELD){var C=tc(_),k=_.selectionSet;if(w=a[C]||n[C],w===void 0)continue;if(k&&w!==null){var h=xg(n[C],k,e,i,globalThis.__DEV__!==!1?"".concat(r||"",".").concat(C):void 0);o.has(h)&&(w=h)}globalThis.__DEV__===!1&&(a[C]=w),globalThis.__DEV__!==!1&&(i&&C!=="__typename"&&!(!((s=Object.getOwnPropertyDescriptor(a,C))===null||s===void 0)&&s.value)?Object.defineProperty(a,C,PZ(C,w,r||"",e.operationName,e.operationType)):(delete a[C],a[C]=w))}if(_.kind===_t.INLINE_FRAGMENT&&(!_.typeCondition||e.cache.fragmentMatches(_,n.__typename))&&(w=xg(n,_.selectionSet,e,i,r)),_.kind===_t.FRAGMENT_SPREAD){var E=_.name.value,A=e.fragmentMap[E]||(e.fragmentMap[E]=e.cache.lookupFragment(E));kt(A,59,E);var x=SY(_);x!=="mask"&&(w=xg(n,A.selectionSet,e,x==="migrate",r))}o.has(w)&&o.add(a)}return"__typename"in n&&!("__typename"in a)&&(a.__typename=n.__typename),Object.keys(a).length!==Object.keys(n).length&&o.add(a),o.has(a)?a:n}function PZ(n,t,e,i,r){var s=function(){return TA.getValue()||(globalThis.__DEV__!==!1&&kt.warn(60,i?"".concat(r," '").concat(i,"'"):"anonymous ".concat(r),"".concat(e,".").concat(n).replace(/^\./,"")),s=function(){return t}),t};return{get:function(){return s()},set:function(o){s=function(){return o}},enumerable:!0,configurable:!0}}function A3(n,t,e,i){if(!e.fragmentMatches)return globalThis.__DEV__!==!1&&T3(),n;var r=t.definitions.filter(function(o){return o.kind===_t.FRAGMENT_DEFINITION});typeof i>"u"&&(kt(r.length===1,61,r.length),i=r[0].name.value);var s=r.find(function(o){return o.name.value===i});return kt(!!s,62,i),n==null||wi(n,{})?n:S3(n,s.selectionSet,{operationType:"fragment",operationName:s.name.value,fragmentMap:_m(Em(t)),cache:e,mutableTargets:new E3,knownChanged:new C3})}function xZ(n,t,e){var i;if(!e.fragmentMatches)return globalThis.__DEV__!==!1&&T3(),n;var r=Sd(t);return kt(r,63),n==null?n:S3(n,r.selectionSet,{operationType:r.operation,operationName:(i=r.name)===null||i===void 0?void 0:i.value,fragmentMap:_m(Em(t)),cache:e,mutableTargets:new E3,knownChanged:new C3})}var I3=function(){function n(){this.assumeImmutableResults=!1,this.getFragmentDoc=Dp(RY,{max:ec["cache.fragmentQueryDocuments"]||1e3,cache:ey})}return n.prototype.lookupFragment=function(t){return null},n.prototype.batch=function(t){var e=this,i=typeof t.optimistic=="string"?t.optimistic:t.optimistic===!1?null:void 0,r;return this.performTransaction(function(){return r=t.update(e)},i),r},n.prototype.recordOptimisticTransaction=function(t,e){this.performTransaction(t,e)},n.prototype.transformDocument=function(t){return t},n.prototype.transformForLink=function(t){return t},n.prototype.identify=function(t){},n.prototype.gc=function(){return[]},n.prototype.modify=function(t){return!1},n.prototype.readQuery=function(t,e){var i=this;return e===void 0&&(e=!!t.optimistic),globalThis.__DEV__!==!1&&Yi(t,"canonizeResults","cache.readQuery"),is("canonizeResults",function(){return i.read(Be(Be({},t),{rootId:t.id||"ROOT_QUERY",optimistic:e}))})},n.prototype.watchFragment=function(t){var e=this,i=t.fragment,r=t.fragmentName,s=t.from,o=t.optimistic,a=o===void 0?!0:o,l=jl(t,["fragment","fragmentName","from","optimistic"]),c=this.getFragmentDoc(i,r),u=typeof s>"u"||typeof s=="string"?s:this.identify(s),d=!!t[Symbol.for("apollo.dataMasking")];if(globalThis.__DEV__!==!1){var f=r||QB(i).name.value;u||globalThis.__DEV__!==!1&&kt.warn(1,f)}var h=Be(Be({},l),{returnPartialData:!0,id:u,query:c,optimistic:a}),g;return new ui(function(v){return e.watch(Be(Be({},h),{immediate:!0,callback:function(_){var w=d?A3(_.result,i,e,r):_.result;if(!(g&&k3(c,{data:g.result},{data:w},t.variables))){var C={data:w,complete:!!_.complete};_.missing&&(C.missing=G_(_.missing.map(function(k){return k.missing}))),g=Be(Be({},_),{result:w}),v.next(C)}}}))})},n.prototype.readFragment=function(t,e){var i=this;return e===void 0&&(e=!!t.optimistic),globalThis.__DEV__!==!1&&Yi(t,"canonizeResults","cache.readFragment"),is("canonizeResults",function(){return i.read(Be(Be({},t),{query:i.getFragmentDoc(t.fragment,t.fragmentName),rootId:t.id,optimistic:e}))})},n.prototype.writeQuery=function(t){var e=t.id,i=t.data,r=jl(t,["id","data"]);return this.write(Object.assign(r,{dataId:e||"ROOT_QUERY",result:i}))},n.prototype.writeFragment=function(t){var e=t.id,i=t.data,r=t.fragment,s=t.fragmentName,o=jl(t,["id","data","fragment","fragmentName"]);return this.write(Object.assign(o,{query:this.getFragmentDoc(r,s),dataId:e,result:i}))},n.prototype.updateQuery=function(t,e){return globalThis.__DEV__!==!1&&Yi(t,"canonizeResults","cache.updateQuery"),this.batch({update:function(i){var r=is("canonizeResults",function(){return i.readQuery(t)}),s=e(r);return s==null?r:(i.writeQuery(Be(Be({},t),{data:s})),s)}})},n.prototype.updateFragment=function(t,e){return globalThis.__DEV__!==!1&&Yi(t,"canonizeResults","cache.updateFragment"),this.batch({update:function(i){var r=is("canonizeResults",function(){return i.readFragment(t)}),s=e(r);return s==null?r:(i.writeFragment(Be(Be({},t),{data:s})),s)}})},n}();globalThis.__DEV__!==!1&&(I3.prototype.getMemoryInternals=WY);var P3=function(n){Wo(t,n);function t(e,i,r,s){var o,a=n.call(this,e)||this;if(a.message=e,a.path=i,a.query=r,a.variables=s,Array.isArray(a.path)){a.missing=a.message;for(var l=a.path.length-1;l>=0;--l)a.missing=(o={},o[a.path[l]]=a.missing,o)}else a.missing=a.path;return a.__proto__=t.prototype,a}return t}(Error),_r=Object.prototype.hasOwnProperty;function tg(n){return n==null}function x3(n,t){var e=n.__typename,i=n.id,r=n._id;if(typeof e=="string"&&(t&&(t.keyObject=tg(i)?tg(r)?void 0:{_id:r}:{id:i}),tg(i)&&!tg(r)&&(i=r),!tg(i)))return"".concat(e,":").concat(typeof i=="number"||typeof i=="string"?i:JSON.stringify(i))}var O3={dataIdFromObject:x3,addTypename:!0,resultCaching:!0,canonizeResults:!1};function OZ(n){return Bh(O3,n)}function R3(n){var t=n.canonizeResults;return t===void 0?O3.canonizeResults:t}function RZ(n,t){return ti(t)?n.get(t.__ref,"__typename"):t&&t.__typename}var V3=/^[_a-z][_0-9a-z]*/i;function uu(n){var t=n.match(V3);return t?t[0]:n}function AC(n,t,e){return Ni(t)?qi(t)?t.every(function(i){return AC(n,i,e)}):n.selections.every(function(i){if(au(i)&&yv(i,e)){var r=tc(i);return _r.call(t,r)&&(!i.selectionSet||AC(i.selectionSet,t[r],e))}return!0}):!1}function th(n){return Ni(n)&&!ti(n)&&!qi(n)}function VZ(){return new cu}function D3(n,t){var e=_m(Em(n));return{fragmentMap:e,lookupFragment:function(i){var r=e[i];return!r&&t&&(r=t.lookup(i)),r||null}}}var lw=Object.create(null),j1=function(){return lw},o2=Object.create(null),Np=function(){function n(t,e){var i=this;this.policies=t,this.group=e,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(r,s){return ny(ti(r)?i.get(r.__ref,s):r&&r[s])},this.canRead=function(r){return ti(r)?i.has(r.__ref):typeof r=="object"},this.toReference=function(r,s){if(typeof r=="string")return kh(r);if(ti(r))return r;var o=i.policies.identify(r)[0];if(o){var a=kh(o);return s&&i.merge(o,r),a}}}return n.prototype.toObject=function(){return Be({},this.data)},n.prototype.has=function(t){return this.lookup(t,!0)!==void 0},n.prototype.get=function(t,e){if(this.group.depend(t,e),_r.call(this.data,t)){var i=this.data[t];if(i&&_r.call(i,e))return i[e]}if(e==="__typename"&&_r.call(this.policies.rootTypenamesById,t))return this.policies.rootTypenamesById[t];if(this instanceof Oc)return this.parent.get(t,e)},n.prototype.lookup=function(t,e){if(e&&this.group.depend(t,"__exists"),_r.call(this.data,t))return this.data[t];if(this instanceof Oc)return this.parent.lookup(t,e);if(this.policies.rootTypenamesById[t])return Object.create(null)},n.prototype.merge=function(t,e){var i=this,r;ti(t)&&(t=t.__ref),ti(e)&&(e=e.__ref);var s=typeof t=="string"?this.lookup(r=t):t,o=typeof e=="string"?this.lookup(r=e):e;if(o){kt(typeof r=="string",2);var a=new cu(NZ).merge(s,o);if(this.data[r]=a,a!==s&&(delete this.refs[r],this.group.caching)){var l=Object.create(null);s||(l.__exists=1),Object.keys(o).forEach(function(c){if(!s||s[c]!==a[c]){l[c]=1;var u=uu(c);u!==c&&!i.policies.hasKeyArgs(a.__typename,u)&&(l[u]=1),a[c]===void 0&&!(i instanceof Oc)&&delete a[c]}}),l.__typename&&!(s&&s.__typename)&&this.policies.rootTypenamesById[r]===a.__typename&&delete l.__typename,Object.keys(l).forEach(function(c){return i.group.dirty(r,c)})}}},n.prototype.modify=function(t,e){var i=this,r=this.lookup(t);if(r){var s=Object.create(null),o=!1,a=!0,l={DELETE:lw,INVALIDATE:o2,isReference:ti,toReference:this.toReference,canRead:this.canRead,readField:function(c,u){return i.policies.readField(typeof c=="string"?{fieldName:c,from:u||kh(t)}:c,{store:i})}};if(Object.keys(r).forEach(function(c){var u=uu(c),d=r[c];if(d!==void 0){var f=typeof e=="function"?e:e[c]||e[u];if(f){var h=f===j1?lw:f(ny(d),Be(Be({},l),{fieldName:u,storeFieldName:c,storage:i.getStorage(t,c)}));if(h===o2)i.group.dirty(t,c);else if(h===lw&&(h=void 0),h!==d&&(s[c]=h,o=!0,d=h,globalThis.__DEV__!==!1)){var g=function(A){if(i.lookup(A.__ref)===void 0)return globalThis.__DEV__!==!1&&kt.warn(3,A),!0};if(ti(h))g(h);else if(Array.isArray(h))for(var v=!1,_=void 0,w=0,C=h;w<C.length;w++){var k=C[w];if(ti(k)){if(v=!0,g(k))break}else if(typeof k=="object"&&k){var E=i.policies.identify(k)[0];E&&(_=k)}if(v&&_!==void 0){globalThis.__DEV__!==!1&&kt.warn(4,_);break}}}}d!==void 0&&(a=!1)}}),o)return this.merge(t,s),a&&(this instanceof Oc?this.data[t]=void 0:delete this.data[t],this.group.dirty(t,"__exists")),!0}return!1},n.prototype.delete=function(t,e,i){var r,s=this.lookup(t);if(s){var o=this.getFieldValue(s,"__typename"),a=e&&i?this.policies.getStoreFieldName({typename:o,fieldName:e,args:i}):e;return this.modify(t,a?(r={},r[a]=j1,r):j1)}return!1},n.prototype.evict=function(t,e){var i=!1;return t.id&&(_r.call(this.data,t.id)&&(i=this.delete(t.id,t.fieldName,t.args)),this instanceof Oc&&this!==e&&(i=this.parent.evict(t,e)||i),(t.fieldName||i)&&this.group.dirty(t.id,t.fieldName||"__exists")),i},n.prototype.clear=function(){this.replace(null)},n.prototype.extract=function(){var t=this,e=this.toObject(),i=[];return this.getRootIdSet().forEach(function(r){_r.call(t.policies.rootTypenamesById,r)||i.push(r)}),i.length&&(e.__META={extraRootIds:i.sort()}),e},n.prototype.replace=function(t){var e=this;if(Object.keys(this.data).forEach(function(s){t&&_r.call(t,s)||e.delete(s)}),t){var i=t.__META,r=jl(t,["__META"]);Object.keys(r).forEach(function(s){e.merge(s,r[s])}),i&&i.extraRootIds.forEach(this.retain,this)}},n.prototype.retain=function(t){return this.rootIds[t]=(this.rootIds[t]||0)+1},n.prototype.release=function(t){if(this.rootIds[t]>0){var e=--this.rootIds[t];return e||delete this.rootIds[t],e}return 0},n.prototype.getRootIdSet=function(t){return t===void 0&&(t=new Set),Object.keys(this.rootIds).forEach(t.add,t),this instanceof Oc?this.parent.getRootIdSet(t):Object.keys(this.policies.rootTypenamesById).forEach(t.add,t),t},n.prototype.gc=function(){var t=this,e=this.getRootIdSet(),i=this.toObject();e.forEach(function(o){_r.call(i,o)&&(Object.keys(t.findChildRefIds(o)).forEach(e.add,e),delete i[o])});var r=Object.keys(i);if(r.length){for(var s=this;s instanceof Oc;)s=s.parent;r.forEach(function(o){return s.delete(o)})}return r},n.prototype.findChildRefIds=function(t){if(!_r.call(this.refs,t)){var e=this.refs[t]=Object.create(null),i=this.data[t];if(!i)return e;var r=new Set([i]);r.forEach(function(s){ti(s)&&(e[s.__ref]=!0),Ni(s)&&Object.keys(s).forEach(function(o){var a=s[o];Ni(a)&&r.add(a)})})}return this.refs[t]},n.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},n}(),N3=function(){function n(t,e){e===void 0&&(e=null),this.caching=t,this.parent=e,this.d=null,this.resetCaching()}return n.prototype.resetCaching=function(){this.d=this.caching?a3():null,this.keyMaker=new uc(qd)},n.prototype.depend=function(t,e){if(this.d){this.d(q1(t,e));var i=uu(e);i!==e&&this.d(q1(t,i)),this.parent&&this.parent.depend(t,e)}},n.prototype.dirty=function(t,e){this.d&&this.d.dirty(q1(t,e),e==="__exists"?"forget":"setDirty")},n}();function q1(n,t){return t+"#"+n}function a2(n,t){Yg(n)&&n.group.depend(t,"__exists")}(function(n){var t=function(e){Wo(i,e);function i(r){var s=r.policies,o=r.resultCaching,a=o===void 0?!0:o,l=r.seed,c=e.call(this,s,new N3(a))||this;return c.stump=new DZ(c),c.storageTrie=new uc(qd),l&&c.replace(l),c}return i.prototype.addLayer=function(r,s){return this.stump.addLayer(r,s)},i.prototype.removeLayer=function(){return this},i.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},i}(n);n.Root=t})(Np||(Np={}));var Oc=function(n){Wo(t,n);function t(e,i,r,s){var o=n.call(this,i.policies,s)||this;return o.id=e,o.parent=i,o.replay=r,o.group=s,r(o),o}return t.prototype.addLayer=function(e,i){return new t(e,this,i,this.group)},t.prototype.removeLayer=function(e){var i=this,r=this.parent.removeLayer(e);return e===this.id?(this.group.caching&&Object.keys(this.data).forEach(function(s){var o=i.data[s],a=r.lookup(s);a?o?o!==a&&Object.keys(o).forEach(function(l){wi(o[l],a[l])||i.group.dirty(s,l)}):(i.group.dirty(s,"__exists"),Object.keys(a).forEach(function(l){i.group.dirty(s,l)})):i.delete(s)}),r):r===this.parent?this:r.addLayer(this.id,this.replay)},t.prototype.toObject=function(){return Be(Be({},this.parent.toObject()),this.data)},t.prototype.findChildRefIds=function(e){var i=this.parent.findChildRefIds(e);return _r.call(this.data,e)?Be(Be({},i),n.prototype.findChildRefIds.call(this,e)):i},t.prototype.getStorage=function(){for(var e=this.parent;e.parent;)e=e.parent;return e.getStorage.apply(e,arguments)},t}(Np),DZ=function(n){Wo(t,n);function t(e){return n.call(this,"EntityStore.Stump",e,function(){},new N3(e.group.caching,e.group))||this}return t.prototype.removeLayer=function(){return this},t.prototype.merge=function(e,i){return this.parent.merge(e,i)},t}(Oc);function NZ(n,t,e){var i=n[e],r=t[e];return wi(i,r)?i:r}function Yg(n){return!!(n instanceof Np&&n.group.caching)}function LZ(n){return Ni(n)?qi(n)?n.slice(0):Be({__proto__:Object.getPrototypeOf(n)},n):n}var l2=function(){function n(){this.known=new(mA?WeakSet:Set),this.pool=new uc(qd),this.passes=new WeakMap,this.keysByJSON=new Map,this.empty=this.admit({})}return n.prototype.isKnown=function(t){return Ni(t)&&this.known.has(t)},n.prototype.pass=function(t){if(Ni(t)){var e=LZ(t);return this.passes.set(e,t),e}return t},n.prototype.admit=function(t){var e=this;if(Ni(t)){var i=this.passes.get(t);if(i)return i;var r=Object.getPrototypeOf(t);switch(r){case Array.prototype:{if(this.known.has(t))return t;var s=t.map(this.admit,this),o=this.pool.lookupArray(s);return o.array||(this.known.add(o.array=s),globalThis.__DEV__!==!1&&Object.freeze(s)),o.array}case null:case Object.prototype:{if(this.known.has(t))return t;var a=Object.getPrototypeOf(t),l=[a],c=this.sortedKeys(t);l.push(c.json);var u=l.length;c.sorted.forEach(function(h){l.push(e.admit(t[h]))});var o=this.pool.lookupArray(l);if(!o.object){var d=o.object=Object.create(a);this.known.add(d),c.sorted.forEach(function(h,g){d[h]=l[u+g]}),globalThis.__DEV__!==!1&&Object.freeze(d)}return o.object}}}return t},n.prototype.sortedKeys=function(t){var e=Object.keys(t),i=this.pool.lookupArray(e);if(!i.keys){e.sort();var r=JSON.stringify(e);(i.keys=this.keysByJSON.get(r))||this.keysByJSON.set(r,i.keys={sorted:e,json:r})}return i.keys},n}();function c2(n){return[n.selectionSet,n.objectOrReference,n.context,n.context.canonizeResults]}var MZ=function(){function n(t){var e=this;this.knownResults=new(qd?WeakMap:Map),this.config=Bh(t,{addTypename:t.addTypename!==!1,canonizeResults:R3(t)}),this.canon=t.canon||new l2,this.executeSelectionSet=Dp(function(i){var r,s=i.context.canonizeResults,o=c2(i);o[3]=!s;var a=(r=e.executeSelectionSet).peek.apply(r,o);return a?s?Be(Be({},a),{result:e.canon.admit(a.result)}):a:(a2(i.context.store,i.enclosingRef.__ref),e.execSelectionSetImpl(i))},{max:this.config.resultCacheMaxSize||ec["inMemoryCache.executeSelectionSet"]||5e4,keyArgs:c2,makeCacheKey:function(i,r,s,o){if(Yg(s.store))return s.store.makeCacheKey(i,ti(r)?r.__ref:r,s.varString,o)}}),this.executeSubSelectedArray=Dp(function(i){return a2(i.context.store,i.enclosingRef.__ref),e.execSubSelectedArrayImpl(i)},{max:this.config.resultCacheMaxSize||ec["inMemoryCache.executeSubSelectedArray"]||1e4,makeCacheKey:function(i){var r=i.field,s=i.array,o=i.context;if(Yg(o.store))return o.store.makeCacheKey(r,s,o.varString)}})}return n.prototype.resetCanon=function(){this.canon=new l2},n.prototype.diffQueryAgainstStore=function(t){var e=t.store,i=t.query,r=t.rootId,s=r===void 0?"ROOT_QUERY":r,o=t.variables,a=t.returnPartialData,l=a===void 0?!0:a,c=t.canonizeResults,u=c===void 0?this.config.canonizeResults:c,d=this.config.cache.policies;o=Be(Be({},gA(YB(i))),o);var f=kh(s),h=this.executeSelectionSet({selectionSet:Cm(i).selectionSet,objectOrReference:f,enclosingRef:f,context:Be({store:e,query:i,policies:d,variables:o,varString:Yc(o),canonizeResults:u},D3(i,this.config.fragments))}),g;if(h.missing&&(g=[new P3($Z(h.missing),h.missing,i,o)],!l))throw g[0];return{result:h.result,complete:!g,missing:g}},n.prototype.isFresh=function(t,e,i,r){if(Yg(r.store)&&this.knownResults.get(t)===i){var s=this.executeSelectionSet.peek(i,e,r,this.canon.isKnown(t));if(s&&t===s.result)return!0}return!1},n.prototype.execSelectionSetImpl=function(t){var e=this,i=t.selectionSet,r=t.objectOrReference,s=t.enclosingRef,o=t.context;if(ti(r)&&!o.policies.rootTypenamesById[r.__ref]&&!o.store.has(r.__ref))return{result:this.canon.empty,missing:"Dangling reference to missing ".concat(r.__ref," object")};var a=o.variables,l=o.policies,c=o.store,u=c.getFieldValue(r,"__typename"),d=[],f,h=new cu;this.config.addTypename&&typeof u=="string"&&!l.rootIdsByTypename[u]&&d.push({__typename:u});function g(k,E){var A;return k.missing&&(f=h.merge(f,(A={},A[E]=k.missing,A))),k.result}var v=new Set(i.selections);v.forEach(function(k){var E,A;if(yv(k,a))if(au(k)){var x=l.readField({fieldName:k.name.value,field:k,variables:o.variables,from:r},o),p=tc(k);x===void 0?wA.added(k)||(f=h.merge(f,(E={},E[p]="Can't find field '".concat(k.name.value,"' on ").concat(ti(r)?r.__ref+" object":"object "+JSON.stringify(r,null,2)),E))):qi(x)?x.length>0&&(x=g(e.executeSubSelectedArray({field:k,array:x,enclosingRef:s,context:o}),p)):k.selectionSet?x!=null&&(x=g(e.executeSelectionSet({selectionSet:k.selectionSet,objectOrReference:x,enclosingRef:ti(x)?x:s,context:o}),p)):o.canonizeResults&&(x=e.canon.pass(x)),x!==void 0&&d.push((A={},A[p]=x,A))}else{var D=H_(k,o.lookupFragment);if(!D&&k.kind===_t.FRAGMENT_SPREAD)throw xs(10,k.name.value);D&&l.fragmentMatches(D,u)&&D.selectionSet.selections.forEach(v.add,v)}});var _=G_(d),w={result:_,missing:f},C=o.canonizeResults?this.canon.admit(w):ny(w);return C.result&&this.knownResults.set(C.result,i),C},n.prototype.execSubSelectedArrayImpl=function(t){var e=this,i=t.field,r=t.array,s=t.enclosingRef,o=t.context,a,l=new cu;function c(u,d){var f;return u.missing&&(a=l.merge(a,(f={},f[d]=u.missing,f))),u.result}return i.selectionSet&&(r=r.filter(o.store.canRead)),r=r.map(function(u,d){return u===null?null:qi(u)?c(e.executeSubSelectedArray({field:i,array:u,enclosingRef:s,context:o}),d):i.selectionSet?c(e.executeSelectionSet({selectionSet:i.selectionSet,objectOrReference:u,enclosingRef:ti(u)?u:s,context:o}),d):(globalThis.__DEV__!==!1&&BZ(o.store,i,u),u)}),{result:o.canonizeResults?this.canon.admit(r):r,missing:a}},n}();function $Z(n){try{JSON.stringify(n,function(t,e){if(typeof e=="string")throw e;return e})}catch(t){return t}}function BZ(n,t,e){if(!t.selectionSet){var i=new Set([e]);i.forEach(function(r){Ni(r)&&(kt(!ti(r),11,RZ(n,r),t.name.value),Object.values(r).forEach(i.add,i))})}}var SA=new Tm,u2=new WeakMap;function Qg(n){var t=u2.get(n);return t||u2.set(n,t={vars:new Set,dep:a3()}),t}function d2(n){Qg(n).vars.forEach(function(t){return t.forgetCache(n)})}function FZ(n){Qg(n).vars.forEach(function(t){return t.attachCache(n)})}function UZ(n){var t=new Set,e=new Set,i=function(s){if(arguments.length>0){if(n!==s){n=s,t.forEach(function(l){Qg(l).dep.dirty(i),zZ(l)});var o=Array.from(e);e.clear(),o.forEach(function(l){return l(n)})}}else{var a=SA.getValue();a&&(r(a),Qg(a).dep(i))}return n};i.onNextChange=function(s){return e.add(s),function(){e.delete(s)}};var r=i.attachCache=function(s){return t.add(s),Qg(s).vars.add(i),i};return i.forgetCache=function(s){return t.delete(s)},i}function zZ(n){n.broadcastWatches&&n.broadcastWatches()}var f2=Object.create(null);function AA(n){var t=JSON.stringify(n);return f2[t]||(f2[t]=Object.create(null))}function h2(n){var t=AA(n);return t.keyFieldsFn||(t.keyFieldsFn=function(e,i){var r=function(o,a){return i.readField(a,o)},s=i.keyObject=IA(n,function(o){var a=Ch(i.storeObject,o,r);return a===void 0&&e!==i.storeObject&&_r.call(e,o[0])&&(a=Ch(e,o,M3)),kt(a!==void 0,5,o.join("."),e),a});return"".concat(i.typename,":").concat(JSON.stringify(s))})}function m2(n){var t=AA(n);return t.keyArgsFn||(t.keyArgsFn=function(e,i){var r=i.field,s=i.variables,o=i.fieldName,a=IA(n,function(c){var u=c[0],d=u.charAt(0);if(d==="@"){if(r&&al(r.directives)){var f=u.slice(1),h=r.directives.find(function(w){return w.name.value===f}),g=h&&W_(h,s);return g&&Ch(g,c.slice(1))}return}if(d==="$"){var v=u.slice(1);if(s&&_r.call(s,v)){var _=c.slice(0);return _[0]=v,Ch(s,_)}return}if(e)return Ch(e,c)}),l=JSON.stringify(a);return(e||l!=="{}")&&(o+=":"+l),o})}function IA(n,t){var e=new cu;return L3(n).reduce(function(i,r){var s,o=t(r);if(o!==void 0){for(var a=r.length-1;a>=0;--a)o=(s={},s[r[a]]=o,s);i=e.merge(i,o)}return i},Object.create(null))}function L3(n){var t=AA(n);if(!t.paths){var e=t.paths=[],i=[];n.forEach(function(r,s){qi(r)?(L3(r).forEach(function(o){return e.push(i.concat(o))}),i.length=0):(i.push(r),qi(n[s+1])||(e.push(i.slice(0)),i.length=0))})}return t.paths}function M3(n,t){return n[t]}function Ch(n,t,e){return e=e||M3,$3(t.reduce(function i(r,s){return qi(r)?r.map(function(o){return i(o,s)}):r&&e(r,s)},n))}function $3(n){return Ni(n)?qi(n)?n.map($3):IA(Object.keys(n).sort(),function(t){return Ch(n,t)}):n}function IC(n){return n.args!==void 0?n.args:n.field?W_(n.field,n.variables):null}var HZ=function(){},g2=function(n,t){return t.fieldName},p2=function(n,t,e){var i=e.mergeObjects;return i(n,t)},v2=function(n,t){return t},WZ=function(){function n(t){this.config=t,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=Be({dataIdFromObject:x3},t),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),t.possibleTypes&&this.addPossibleTypes(t.possibleTypes),t.typePolicies&&this.addTypePolicies(t.typePolicies)}return n.prototype.identify=function(t,e){var i,r=this,s=e&&(e.typename||((i=e.storeObject)===null||i===void 0?void 0:i.__typename))||t.__typename;if(s===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];var o=e&&e.storeObject||t,a=Be(Be({},e),{typename:s,storeObject:o,readField:e&&e.readField||function(){var d=PA(arguments,o);return r.readField(d,{store:r.cache.data,variables:d.variables})}}),l,c=s&&this.getTypePolicy(s),u=c&&c.keyFn||this.config.dataIdFromObject;return TA.withValue(!0,function(){for(;u;){var d=u(Be(Be({},t),o),a);if(qi(d))u=h2(d);else{l=d;break}}}),l=l?String(l):void 0,a.keyObject?[l,a.keyObject]:[l]},n.prototype.addTypePolicies=function(t){var e=this;Object.keys(t).forEach(function(i){var r=t[i],s=r.queryType,o=r.mutationType,a=r.subscriptionType,l=jl(r,["queryType","mutationType","subscriptionType"]);s&&e.setRootTypename("Query",i),o&&e.setRootTypename("Mutation",i),a&&e.setRootTypename("Subscription",i),_r.call(e.toBeAdded,i)?e.toBeAdded[i].push(l):e.toBeAdded[i]=[l]})},n.prototype.updateTypePolicy=function(t,e,i){var r=this.getTypePolicy(t),s=e.keyFields,o=e.fields;function a(l,c){l.merge=typeof c=="function"?c:c===!0?p2:c===!1?v2:l.merge}a(r,e.merge),r.keyFn=s===!1?HZ:qi(s)?h2(s):typeof s=="function"?s:r.keyFn,o&&Object.keys(o).forEach(function(l){var c=i[l];(!c||(c==null?void 0:c.typename)!==t)&&(c=i[l]={typename:t});var u=o[l];if(typeof u=="function")c.read=u;else{var d=u.keyArgs,f=u.read,h=u.merge;c.keyFn=d===!1?g2:qi(d)?m2(d):typeof d=="function"?d:c.keyFn,typeof f=="function"&&(c.read=f),a(c,h)}c.read&&c.merge&&(c.keyFn=c.keyFn||g2)})},n.prototype.setRootTypename=function(t,e){e===void 0&&(e=t);var i="ROOT_"+t.toUpperCase(),r=this.rootTypenamesById[i];e!==r&&(kt(!r||r===t,6,t),r&&delete this.rootIdsByTypename[r],this.rootIdsByTypename[e]=i,this.rootTypenamesById[i]=e)},n.prototype.addPossibleTypes=function(t){var e=this;this.usingPossibleTypes=!0,Object.keys(t).forEach(function(i){e.getSupertypeSet(i,!0),t[i].forEach(function(r){e.getSupertypeSet(r,!0).add(i);var s=r.match(V3);(!s||s[0]!==r)&&e.fuzzySubtypes.set(r,new RegExp(r))})})},n.prototype.getTypePolicy=function(t){var e=this;if(!_r.call(this.typePolicies,t)){var i=this.typePolicies[t]=Object.create(null);i.fields=Object.create(null);var r=this.supertypeMap.get(t);!r&&this.fuzzySubtypes.size&&(r=this.getSupertypeSet(t,!0),this.fuzzySubtypes.forEach(function(o,a){if(o.test(t)){var l=e.supertypeMap.get(a);l&&l.forEach(function(c){return r.add(c)})}})),r&&r.size&&r.forEach(function(o){var a=e.getTypePolicy(o),l=a.fields,c=jl(a,["fields"]);Object.assign(i,c),Object.assign(i.fields,l)})}var s=this.toBeAdded[t];return s&&s.length&&s.splice(0).forEach(function(o){e.updateTypePolicy(t,o,e.typePolicies[t].fields)}),this.typePolicies[t]},n.prototype.getFieldPolicy=function(t,e){if(t)return this.getTypePolicy(t).fields[e]},n.prototype.getSupertypeSet=function(t,e){var i=this.supertypeMap.get(t);return!i&&e&&this.supertypeMap.set(t,i=new Set),i},n.prototype.fragmentMatches=function(t,e,i,r){var s=this;if(!t.typeCondition)return!0;if(!e)return!1;var o=t.typeCondition.name.value;if(e===o)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(o))for(var a=this.getSupertypeSet(e,!0),l=[a],c=function(g){var v=s.getSupertypeSet(g,!1);v&&v.size&&l.indexOf(v)<0&&l.push(v)},u=!!(i&&this.fuzzySubtypes.size),d=!1,f=0;f<l.length;++f){var h=l[f];if(h.has(o))return a.has(o)||(d&&globalThis.__DEV__!==!1&&kt.warn(7,e,o),a.add(o)),!0;h.forEach(c),u&&f===l.length-1&&AC(t.selectionSet,i,r)&&(u=!1,d=!0,this.fuzzySubtypes.forEach(function(g,v){var _=e.match(g);_&&_[0]===e&&c(v)}))}return!1},n.prototype.hasKeyArgs=function(t,e){var i=this.getFieldPolicy(t,e);return!!(i&&i.keyFn)},n.prototype.getStoreFieldName=function(t){var e=t.typename,i=t.fieldName,r=this.getFieldPolicy(e,i),s,o=r&&r.keyFn;if(o&&e)for(var a={typename:e,fieldName:i,field:t.field||null,variables:t.variables},l=IC(t);o;){var c=o(l,a);if(qi(c))o=m2(c);else{s=c||i;break}}return s===void 0&&(s=t.field?aQ(t.field,t.variables):KB(i,IC(t))),s===!1?i:i===uu(s)?s:i+":"+s},n.prototype.readField=function(t,e){var i=t.from;if(i){var r=t.field||t.fieldName;if(r){if(t.typename===void 0){var s=e.store.getFieldValue(i,"__typename");s&&(t.typename=s)}var o=this.getStoreFieldName(t),a=uu(o),l=e.store.getFieldValue(i,o),c=this.getFieldPolicy(t.typename,a),u=c&&c.read;if(u){var d=b2(this,i,t,e,e.store.getStorage(ti(i)?i.__ref:i,o));return SA.withValue(this.cache,u,[l,d])}return l}}},n.prototype.getReadFunction=function(t,e){var i=this.getFieldPolicy(t,e);return i&&i.read},n.prototype.getMergeFunction=function(t,e,i){var r=this.getFieldPolicy(t,e),s=r&&r.merge;return!s&&i&&(r=this.getTypePolicy(i),s=r&&r.merge),s},n.prototype.runMergeFunction=function(t,e,i,r,s){var o=i.field,a=i.typename,l=i.merge;return l===p2?B3(r.store)(t,e):l===v2?e:(r.overwrite&&(t=void 0),l(t,e,b2(this,void 0,{typename:a,fieldName:o.name.value,field:o,variables:r.variables},r,s||Object.create(null))))},n}();function b2(n,t,e,i,r){var s=n.getStoreFieldName(e),o=uu(s),a=e.variables||i.variables,l=i.store,c=l.toReference,u=l.canRead;return{args:IC(e),field:e.field||null,fieldName:o,storeFieldName:s,variables:a,isReference:ti,toReference:c,storage:r,cache:n.cache,canRead:u,readField:function(){return n.readField(PA(arguments,t,a),i)},mergeObjects:B3(i.store)}}function PA(n,t,e){var i=n[0],r=n[1],s=n.length,o;return typeof i=="string"?o={fieldName:i,from:s>1?r:t}:(o=Be({},i),_r.call(o,"from")||(o.from=t)),globalThis.__DEV__!==!1&&o.from===void 0&&globalThis.__DEV__!==!1&&kt.warn(8,IB(Array.from(n))),o.variables===void 0&&(o.variables=e),o}function B3(n){return function(e,i){if(qi(e)||qi(i))throw xs(9);if(Ni(e)&&Ni(i)){var r=n.getFieldValue(e,"__typename"),s=n.getFieldValue(i,"__typename"),o=r&&s&&r!==s;if(o)return i;if(ti(e)&&th(i))return n.merge(e.__ref,i),e;if(th(e)&&ti(i))return n.merge(e,i.__ref),i;if(th(e)&&th(i))return Be(Be({},e),i)}return i}}function G1(n,t,e){var i="".concat(t).concat(e),r=n.flavors.get(i);return r||n.flavors.set(i,r=n.clientOnly===t&&n.deferred===e?n:Be(Be({},n),{clientOnly:t,deferred:e})),r}var jZ=function(){function n(t,e,i){this.cache=t,this.reader=e,this.fragments=i}return n.prototype.writeToStore=function(t,e){var i=this,r=e.query,s=e.result,o=e.dataId,a=e.variables,l=e.overwrite,c=Sd(r),u=VZ();a=Be(Be({},gA(c)),a);var d=Be(Be({store:t,written:Object.create(null),merge:function(h,g){return u.merge(h,g)},variables:a,varString:Yc(a)},D3(r,this.fragments)),{overwrite:!!l,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map}),f=this.processSelectionSet({result:s||Object.create(null),dataId:o,selectionSet:c.selectionSet,mergeTree:{map:new Map},context:d});if(!ti(f))throw xs(12,s);return d.incomingById.forEach(function(h,g){var v=h.storeObject,_=h.mergeTree,w=h.fieldNodeSet,C=kh(g);if(_&&_.map.size){var k=i.applyMerges(_,C,v,d);if(ti(k))return;v=k}if(globalThis.__DEV__!==!1&&!d.overwrite){var E=Object.create(null);w.forEach(function(p){p.selectionSet&&(E[p.name.value]=!0)});var A=function(p){return E[uu(p)]===!0},x=function(p){var D=_&&_.map.get(p);return!!(D&&D.info&&D.info.merge)};Object.keys(v).forEach(function(p){A(p)&&!x(p)&&qZ(C,v,p,d.store)})}t.merge(g,v)}),t.retain(f.__ref),f},n.prototype.processSelectionSet=function(t){var e=this,i=t.dataId,r=t.result,s=t.selectionSet,o=t.context,a=t.mergeTree,l=this.cache.policies,c=Object.create(null),u=i&&l.rootTypenamesById[i]||vC(r,s,o.fragmentMap)||i&&o.store.get(i,"__typename");typeof u=="string"&&(c.__typename=u);var d=function(){var k=PA(arguments,c,o.variables);if(ti(k.from)){var E=o.incomingById.get(k.from.__ref);if(E){var A=l.readField(Be(Be({},k),{from:E.storeObject}),o);if(A!==void 0)return A}}return l.readField(k,o)},f=new Set;this.flattenFields(s,r,o,u).forEach(function(k,E){var A,x=tc(E),p=r[x];if(f.add(E),p!==void 0){var D=l.getStoreFieldName({typename:u,fieldName:E.name.value,field:E,variables:k.variables}),R=w2(a,D),S=e.processFieldValue(p,E,E.selectionSet?G1(k,!1,!1):k,R),I=void 0;E.selectionSet&&(ti(S)||th(S))&&(I=d("__typename",S));var F=l.getMergeFunction(u,E.name.value,I);F?R.info={field:E,typename:u,merge:F}:y2(a,D),c=k.merge(c,(A={},A[D]=S,A))}else globalThis.__DEV__!==!1&&!k.clientOnly&&!k.deferred&&!wA.added(E)&&!l.getReadFunction(u,E.name.value)&&globalThis.__DEV__!==!1&&kt.error(13,tc(E),r)});try{var h=l.identify(r,{typename:u,selectionSet:s,fragmentMap:o.fragmentMap,storeObject:c,readField:d}),g=h[0],v=h[1];i=i||g,v&&(c=o.merge(c,v))}catch(k){if(!i)throw k}if(typeof i=="string"){var _=kh(i),w=o.written[i]||(o.written[i]=[]);if(w.indexOf(s)>=0||(w.push(s),this.reader&&this.reader.isFresh(r,_,s,o)))return _;var C=o.incomingById.get(i);return C?(C.storeObject=o.merge(C.storeObject,c),C.mergeTree=PC(C.mergeTree,a),f.forEach(function(k){return C.fieldNodeSet.add(k)})):o.incomingById.set(i,{storeObject:c,mergeTree:iy(a)?void 0:a,fieldNodeSet:f}),_}return c},n.prototype.processFieldValue=function(t,e,i,r){var s=this;return!e.selectionSet||t===null?globalThis.__DEV__!==!1?g3(t):t:qi(t)?t.map(function(o,a){var l=s.processFieldValue(o,e,i,w2(r,a));return y2(r,a),l}):this.processSelectionSet({result:t,selectionSet:e.selectionSet,context:i,mergeTree:r})},n.prototype.flattenFields=function(t,e,i,r){r===void 0&&(r=vC(e,t,i.fragmentMap));var s=new Map,o=this.cache.policies,a=new uc(!1);return function l(c,u){var d=a.lookup(c,u.clientOnly,u.deferred);d.visited||(d.visited=!0,c.selections.forEach(function(f){if(yv(f,i.variables)){var h=u.clientOnly,g=u.deferred;if(!(h&&g)&&al(f.directives)&&f.directives.forEach(function(w){var C=w.name.value;if(C==="client"&&(h=!0),C==="defer"){var k=W_(w,i.variables);(!k||k.if!==!1)&&(g=!0)}}),au(f)){var v=s.get(f);v&&(h=h&&v.clientOnly,g=g&&v.deferred),s.set(f,G1(i,h,g))}else{var _=H_(f,i.lookupFragment);if(!_&&f.kind===_t.FRAGMENT_SPREAD)throw xs(14,f.name.value);_&&o.fragmentMatches(_,r,e,i.variables)&&l(_.selectionSet,G1(i,h,g))}}}))}(t,i),s},n.prototype.applyMerges=function(t,e,i,r,s){var o,a=this;if(t.map.size&&!ti(i)){var l=!qi(i)&&(ti(e)||th(e))?e:void 0,c=i;l&&!s&&(s=[ti(l)?l.__ref:l]);var u,d=function(f,h){return qi(f)?typeof h=="number"?f[h]:void 0:r.store.getFieldValue(f,String(h))};t.map.forEach(function(f,h){var g=d(l,h),v=d(c,h);if(v!==void 0){s&&s.push(h);var _=a.applyMerges(f,g,v,r,s);_!==v&&(u=u||new Map,u.set(h,_)),s&&kt(s.pop()===h)}}),u&&(i=qi(c)?c.slice(0):Be({},c),u.forEach(function(f,h){i[h]=f}))}return t.info?this.cache.policies.runMergeFunction(e,i,t.info,r,s&&(o=r.store).getStorage.apply(o,s)):i},n}(),F3=[];function w2(n,t){var e=n.map;return e.has(t)||e.set(t,F3.pop()||{map:new Map}),e.get(t)}function PC(n,t){if(n===t||!t||iy(t))return n;if(!n||iy(n))return t;var e=n.info&&t.info?Be(Be({},n.info),t.info):n.info||t.info,i=n.map.size&&t.map.size,r=i?new Map:n.map.size?n.map:t.map,s={info:e,map:r};if(i){var o=new Set(t.map.keys());n.map.forEach(function(a,l){s.map.set(l,PC(a,t.map.get(l))),o.delete(l)}),o.forEach(function(a){s.map.set(a,PC(t.map.get(a),n.map.get(a)))})}return s}function iy(n){return!n||!(n.info||n.map.size)}function y2(n,t){var e=n.map,i=e.get(t);i&&iy(i)&&(F3.push(i),e.delete(t))}var _2=new Set;function qZ(n,t,e,i){var r=function(d){var f=i.getFieldValue(d,e);return typeof f=="object"&&f},s=r(n);if(s){var o=r(t);if(o&&!ti(s)&&!wi(s,o)&&!Object.keys(s).every(function(d){return i.getFieldValue(o,d)!==void 0})){var a=i.getFieldValue(n,"__typename")||i.getFieldValue(t,"__typename"),l=uu(e),c="".concat(a,".").concat(l);if(!_2.has(c)){_2.add(c);var u=[];!qi(s)&&!qi(o)&&[s,o].forEach(function(d){var f=i.getFieldValue(d,"__typename");typeof f=="string"&&!u.includes(f)&&u.push(f)}),globalThis.__DEV__!==!1&&kt.warn(15,l,a,u.length?"either ensure all objects of type "+u.join(" and ")+" have an ID or a custom merge function, or ":"",c,Be({},s),Be({},o))}}}}var U3=function(n){Wo(t,n);function t(e){e===void 0&&(e={});var i=n.call(this)||this;return i.watches=new Set,i.addTypenameTransform=new l3(wA),i.assumeImmutableResults=!0,i.makeVar=UZ,i.txCount=0,globalThis.__DEV__!==!1&&(Yi(e,"addTypename","InMemoryCache","Please remove the `addTypename` option when initializing `InMemoryCache`."),Yi(e,"canonizeResults","InMemoryCache","Please remove the `canonizeResults` option when initializing `InMemoryCache`.")),i.config=OZ(e),i.addTypename=!!i.config.addTypename,i.policies=new WZ({cache:i,dataIdFromObject:i.config.dataIdFromObject,possibleTypes:i.config.possibleTypes,typePolicies:i.config.typePolicies}),i.init(),i}return t.prototype.init=function(){var e=this.data=new Np.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=e.stump,this.resetResultCache()},t.prototype.resetResultCache=function(e){var i=this,r=this.storeReader,s=this.config.fragments;this.addTypenameTransform.resetCache(),s==null||s.resetCaches(),this.storeWriter=new jZ(this,this.storeReader=new MZ({cache:this,addTypename:this.addTypename,resultCacheMaxSize:this.config.resultCacheMaxSize,canonizeResults:R3(this.config),canon:e?void 0:r&&r.canon,fragments:s}),s),this.maybeBroadcastWatch=Dp(function(o,a){return i.broadcastWatch(o,a)},{max:this.config.resultCacheMaxSize||ec["inMemoryCache.maybeBroadcastWatch"]||5e3,makeCacheKey:function(o){var a=o.optimistic?i.optimisticData:i.data;if(Yg(a)){var l=o.optimistic,c=o.id,u=o.variables;return a.makeCacheKey(o.query,o.callback,Yc({optimistic:l,id:c,variables:u}))}}}),new Set([this.data.group,this.optimisticData.group]).forEach(function(o){return o.resetCaching()})},t.prototype.restore=function(e){return this.init(),e&&this.data.replace(e),this},t.prototype.extract=function(e){return e===void 0&&(e=!1),(e?this.optimisticData:this.data).extract()},t.prototype.read=function(e){globalThis.__DEV__!==!1&&Yi(e,"canonizeResults","cache.read");var i=e.returnPartialData,r=i===void 0?!1:i;try{return this.storeReader.diffQueryAgainstStore(Be(Be({},e),{store:e.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:r})).result||null}catch(s){if(s instanceof P3)return null;throw s}},t.prototype.write=function(e){try{return++this.txCount,this.storeWriter.writeToStore(this.data,e)}finally{!--this.txCount&&e.broadcast!==!1&&this.broadcastWatches()}},t.prototype.modify=function(e){if(_r.call(e,"id")&&!e.id)return!1;var i=e.optimistic?this.optimisticData:this.data;try{return++this.txCount,i.modify(e.id||"ROOT_QUERY",e.fields)}finally{!--this.txCount&&e.broadcast!==!1&&this.broadcastWatches()}},t.prototype.diff=function(e){return globalThis.__DEV__!==!1&&Yi(e,"canonizeResults","cache.diff"),this.storeReader.diffQueryAgainstStore(Be(Be({},e),{store:e.optimistic?this.optimisticData:this.data,rootId:e.id||"ROOT_QUERY",config:this.config}))},t.prototype.watch=function(e){var i=this;return this.watches.size||FZ(this),this.watches.add(e),e.immediate&&this.maybeBroadcastWatch(e),function(){i.watches.delete(e)&&!i.watches.size&&d2(i),i.maybeBroadcastWatch.forget(e)}},t.prototype.gc=function(e){globalThis.__DEV__!==!1&&Yi(e||{},"resetResultIdentities","cache.gc","First ensure all usages of `canonizeResults` are removed, then remove this option."),Yc.reset(),jc.reset();var i=this.optimisticData.gc();return e&&!this.txCount&&(e.resetResultCache?this.resetResultCache(e.resetResultIdentities):e.resetResultIdentities&&this.storeReader.resetCanon()),i},t.prototype.retain=function(e,i){return(i?this.optimisticData:this.data).retain(e)},t.prototype.release=function(e,i){return(i?this.optimisticData:this.data).release(e)},t.prototype.identify=function(e){if(ti(e))return e.__ref;try{return this.policies.identify(e)[0]}catch(i){globalThis.__DEV__!==!1&&kt.warn(i)}},t.prototype.evict=function(e){if(!e.id){if(_r.call(e,"id"))return!1;e=Be(Be({},e),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(e,this.data)}finally{!--this.txCount&&e.broadcast!==!1&&this.broadcastWatches()}},t.prototype.reset=function(e){var i=this;return this.init(),Yc.reset(),e&&e.discardWatches?(this.watches.forEach(function(r){return i.maybeBroadcastWatch.forget(r)}),this.watches.clear(),d2(this)):this.broadcastWatches(),Promise.resolve()},t.prototype.removeOptimistic=function(e){var i=this.optimisticData.removeLayer(e);i!==this.optimisticData&&(this.optimisticData=i,this.broadcastWatches())},t.prototype.batch=function(e){var i=this,r=e.update,s=e.optimistic,o=s===void 0?!0:s,a=e.removeOptimistic,l=e.onWatchUpdated,c,u=function(f){var h=i,g=h.data,v=h.optimisticData;++i.txCount,f&&(i.data=i.optimisticData=f);try{return c=r(i)}finally{--i.txCount,i.data=g,i.optimisticData=v}},d=new Set;return l&&!this.txCount&&this.broadcastWatches(Be(Be({},e),{onWatchUpdated:function(f){return d.add(f),!1}})),typeof o=="string"?this.optimisticData=this.optimisticData.addLayer(o,u):o===!1?u(this.data):u(),typeof a=="string"&&(this.optimisticData=this.optimisticData.removeLayer(a)),l&&d.size?(this.broadcastWatches(Be(Be({},e),{onWatchUpdated:function(f,h){var g=l.call(this,f,h);return g!==!1&&d.delete(f),g}})),d.size&&d.forEach(function(f){return i.maybeBroadcastWatch.dirty(f)})):this.broadcastWatches(e),c},t.prototype.performTransaction=function(e,i){return this.batch({update:e,optimistic:i||i!==null})},t.prototype.transformDocument=function(e){return this.addTypenameToDocument(this.addFragmentsToDocument(e))},t.prototype.fragmentMatches=function(e,i){return this.policies.fragmentMatches(e,i)},t.prototype.lookupFragment=function(e){var i;return((i=this.config.fragments)===null||i===void 0?void 0:i.lookup(e))||null},t.prototype.broadcastWatches=function(e){var i=this;this.txCount||this.watches.forEach(function(r){return i.maybeBroadcastWatch(r,e)})},t.prototype.addFragmentsToDocument=function(e){var i=this.config.fragments;return i?i.transform(e):e},t.prototype.addTypenameToDocument=function(e){return this.addTypename?this.addTypenameTransform.transformDocument(e):e},t.prototype.broadcastWatch=function(e,i){var r=this,s=e.lastDiff,o=is("canonizeResults",function(){return r.diff(e)});i&&(e.optimistic&&typeof i.optimistic=="string"&&(o.fromOptimisticTransaction=!0),i.onWatchUpdated&&i.onWatchUpdated.call(this,e,o,s)===!1)||(!s||!wi(s.result,o.result))&&e.callback(e.lastDiff=o,s)},t}(I3);globalThis.__DEV__!==!1&&(U3.prototype.getMemoryInternals=HY);var ei;(function(n){n[n.loading=1]="loading",n[n.setVariables=2]="setVariables",n[n.fetchMore=3]="fetchMore",n[n.refetch=4]="refetch",n[n.poll=6]="poll",n[n.ready=7]="ready",n[n.error=8]="error"})(ei||(ei={}));function nh(n){return n?n<7:!1}var k2=Object.assign,GZ=Object.hasOwnProperty,cw=function(n){Wo(t,n);function t(e){var i=e.queryManager,r=e.queryInfo,s=e.options,o=this,a=t.inactiveOnCreation.getValue();o=n.call(this,function(w){o._getOrCreateQuery();try{var C=w._subscription._observer;C&&!C.error&&(C.error=KZ)}catch{}var k=!o.observers.size;o.observers.add(w);var E=o.last;return E&&E.error?w.error&&w.error(E.error):E&&E.result&&w.next&&w.next(o.maskResult(E.result)),k&&o.reobserve().catch(function(){}),function(){o.observers.delete(w)&&!o.observers.size&&o.tearDownQuery()}})||this,o.observers=new Set,o.subscriptions=new Set,o.dirty=!1,o._getOrCreateQuery=function(){return a&&(i.queries.set(o.queryId,r),a=!1),o.queryManager.getOrCreateQuery(o.queryId)},o.queryInfo=r,o.queryManager=i,o.waitForOwnResult=K1(s.fetchPolicy),o.isTornDown=!1,o.subscribeToMore=o.subscribeToMore.bind(o),o.maskResult=o.maskResult.bind(o);var l=i.defaultOptions.watchQuery,c=l===void 0?{}:l,u=c.fetchPolicy,d=u===void 0?"cache-first":u,f=s.fetchPolicy,h=f===void 0?d:f,g=s.initialFetchPolicy,v=g===void 0?h==="standby"?d:h:g;o.options=Be(Be({},s),{initialFetchPolicy:v,fetchPolicy:h}),o.queryId=r.queryId||i.generateQueryId();var _=Sd(o.query);return o.queryName=_&&_.name&&_.name.value,o}return Object.defineProperty(t.prototype,"query",{get:function(){return this.lastQuery||this.options.query},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),t.prototype.result=function(){var e=this;return globalThis.__DEV__!==!1&&id("observableQuery.result",function(){globalThis.__DEV__!==!1&&kt.warn(23)}),new Promise(function(i,r){var s={next:function(a){i(a),e.observers.delete(s),e.observers.size||e.queryManager.removeQuery(e.queryId),setTimeout(function(){o.unsubscribe()},0)},error:r},o=e.subscribe(s)})},t.prototype.resetDiff=function(){this.queryInfo.resetDiff()},t.prototype.getCurrentFullResult=function(e){var i=this;e===void 0&&(e=!0);var r=is("getLastResult",function(){return i.getLastResult(!0)}),s=this.queryInfo.networkStatus||r&&r.networkStatus||ei.ready,o=Be(Be({},r),{loading:nh(s),networkStatus:s}),a=this.options.fetchPolicy,l=a===void 0?"cache-first":a;if(!(K1(l)||this.queryManager.getDocumentInfo(this.query).hasForcedResolvers))if(this.waitForOwnResult)this.queryInfo.updateWatch();else{var c=this.queryInfo.getDiff();(c.complete||this.options.returnPartialData)&&(o.data=c.result),wi(o.data,{})&&(o.data=void 0),c.complete?(delete o.partial,c.complete&&o.networkStatus===ei.loading&&(l==="cache-first"||l==="cache-only")&&(o.networkStatus=ei.ready,o.loading=!1)):o.partial=!0,o.networkStatus===ei.ready&&(o.error||o.errors)&&(o.networkStatus=ei.error),globalThis.__DEV__!==!1&&!c.complete&&!this.options.partialRefetch&&!o.loading&&!o.data&&!o.error&&z3(c.missing)}return e&&this.updateLastResult(o),o},t.prototype.getCurrentResult=function(e){return e===void 0&&(e=!0),this.maskResult(this.getCurrentFullResult(e))},t.prototype.isDifferentFromLastResult=function(e,i){if(!this.last)return!0;var r=this.queryManager.getDocumentInfo(this.query),s=this.queryManager.dataMasking,o=s?r.nonReactiveQuery:this.query,a=s||r.hasNonreactiveDirective?!k3(o,this.last.result,e,this.variables):!wi(this.last.result,e);return a||i&&!wi(this.last.variables,i)},t.prototype.getLast=function(e,i){var r=this.last;if(r&&r[e]&&(!i||wi(r.variables,this.variables)))return r[e]},t.prototype.getLastResult=function(e){return globalThis.__DEV__!==!1&&id("getLastResult",function(){globalThis.__DEV__!==!1&&kt.warn(24)}),this.getLast("result",e)},t.prototype.getLastError=function(e){return globalThis.__DEV__!==!1&&id("getLastError",function(){globalThis.__DEV__!==!1&&kt.warn(25)}),this.getLast("error",e)},t.prototype.resetLastResults=function(){globalThis.__DEV__!==!1&&id("resetLastResults",function(){globalThis.__DEV__!==!1&&kt.warn(26)}),delete this.last,this.isTornDown=!1},t.prototype.resetQueryStoreErrors=function(){globalThis.__DEV__!==!1&&globalThis.__DEV__!==!1&&kt.warn(27),this.queryManager.resetErrors(this.queryId)},t.prototype.refetch=function(e){var i,r={pollInterval:0},s=this.options.fetchPolicy;if(s==="no-cache"?r.fetchPolicy="no-cache":r.fetchPolicy="network-only",globalThis.__DEV__!==!1&&e&&GZ.call(e,"variables")){var o=YB(this.query),a=o.variableDefinitions;(!a||!a.some(function(l){return l.variable.name.value==="variables"}))&&globalThis.__DEV__!==!1&&kt.warn(28,e,((i=o.name)===null||i===void 0?void 0:i.value)||o)}return e&&!wi(this.options.variables,e)&&(r.variables=this.options.variables=Be(Be({},this.options.variables),e)),this.queryInfo.resetLastWrite(),this.reobserve(r,ei.refetch)},t.prototype.fetchMore=function(e){var i=this,r=Be(Be({},e.query?e:Be(Be(Be(Be({},this.options),{query:this.options.query}),e),{variables:Be(Be({},this.options.variables),e.variables)})),{fetchPolicy:"no-cache"});r.query=this.transformDocument(r.query);var s=this.queryManager.generateQueryId();this.lastQuery=e.query?this.transformDocument(this.options.query):r.query;var o=this.queryInfo,a=o.networkStatus;o.networkStatus=ei.fetchMore,r.notifyOnNetworkStatusChange&&this.observe();var l=new Set,c=e==null?void 0:e.updateQuery,u=this.options.fetchPolicy!=="no-cache";return u||kt(c,29),this.queryManager.fetchQuery(s,r,ei.fetchMore).then(function(d){if(i.queryManager.removeQuery(s),o.networkStatus===ei.fetchMore&&(o.networkStatus=a),u)i.queryManager.cache.batch({update:function(g){var v=e.updateQuery;v?g.updateQuery({query:i.query,variables:i.variables,returnPartialData:!0,optimistic:!1},function(_){return v(_,{fetchMoreResult:d.data,variables:r.variables})}):g.writeQuery({query:r.query,variables:r.variables,data:d.data})},onWatchUpdated:function(g){l.add(g.query)}});else{var f=i.getLast("result"),h=c(f.data,{fetchMoreResult:d.data,variables:r.variables});i.reportResult(Be(Be({},f),{networkStatus:a,loading:nh(a),data:h}),i.variables)}return i.maskResult(d)}).finally(function(){u&&!l.has(i.query)&&i.reobserveCacheFirst()})},t.prototype.subscribeToMore=function(e){var i=this,r=this.queryManager.startGraphQLSubscription({query:e.document,variables:e.variables,context:e.context}).subscribe({next:function(s){var o=e.updateQuery;o&&i.updateQuery(function(a,l){return o(a,Be({subscriptionData:s},l))})},error:function(s){if(e.onError){e.onError(s);return}globalThis.__DEV__!==!1&&kt.error(30,s)}});return this.subscriptions.add(r),function(){i.subscriptions.delete(r)&&r.unsubscribe()}},t.prototype.setOptions=function(e){return globalThis.__DEV__!==!1&&(Yi(e,"canonizeResults","setOptions"),id("setOptions",function(){globalThis.__DEV__!==!1&&kt.warn(31)})),this.reobserve(e)},t.prototype.silentSetOptions=function(e){var i=Bh(this.options,e||{});k2(this.options,i)},t.prototype.setVariables=function(e){var i=this;return wi(this.variables,e)?this.observers.size?is("observableQuery.result",function(){return i.result()}):Promise.resolve():(this.options.variables=e,this.observers.size?this.reobserve({fetchPolicy:this.options.initialFetchPolicy,variables:e},ei.setVariables):Promise.resolve())},t.prototype.updateQuery=function(e){var i=this.queryManager,r=i.cache.diff({query:this.options.query,variables:this.variables,returnPartialData:!0,optimistic:!1}),s=r.result,o=r.complete,a=e(s,{variables:this.variables,complete:!!o,previousData:s});a&&(i.cache.writeQuery({query:this.options.query,data:a,variables:this.variables}),i.broadcastQueries())},t.prototype.startPolling=function(e){this.options.pollInterval=e,this.updatePolling()},t.prototype.stopPolling=function(){this.options.pollInterval=0,this.updatePolling()},t.prototype.applyNextFetchPolicy=function(e,i){if(i.nextFetchPolicy){var r=i.fetchPolicy,s=r===void 0?"cache-first":r,o=i.initialFetchPolicy,a=o===void 0?s:o;s==="standby"||(typeof i.nextFetchPolicy=="function"?i.fetchPolicy=i.nextFetchPolicy(s,{reason:e,options:i,observable:this,initialFetchPolicy:a}):e==="variables-changed"?i.fetchPolicy=a:i.fetchPolicy=i.nextFetchPolicy)}return i.fetchPolicy},t.prototype.fetch=function(e,i,r){var s=this._getOrCreateQuery();return s.setObservableQuery(this),this.queryManager.fetchConcastWithInfo(s,e,i,r)},t.prototype.updatePolling=function(){var e=this;if(!this.queryManager.ssrMode){var i=this,r=i.pollingInfo,s=i.options.pollInterval;if(!s||!this.hasObservers()){r&&(clearTimeout(r.timeout),delete this.pollingInfo);return}if(!(r&&r.interval===s)){kt(s,32);var o=r||(this.pollingInfo={});o.interval=s;var a=function(){var c,u;e.pollingInfo&&(!nh(e.queryInfo.networkStatus)&&!(!((u=(c=e.options).skipPollAttempt)===null||u===void 0)&&u.call(c))?e.reobserve({fetchPolicy:e.options.initialFetchPolicy==="no-cache"?"no-cache":"network-only"},ei.poll).then(l,l):l())},l=function(){var c=e.pollingInfo;c&&(clearTimeout(c.timeout),c.timeout=setTimeout(a,c.interval))};l()}}},t.prototype.updateLastResult=function(e,i){var r=this;i===void 0&&(i=this.variables);var s=is("getLastError",function(){return r.getLastError()});return s&&this.last&&!wi(i,this.last.variables)&&(s=void 0),this.last=Be({result:this.queryManager.assumeImmutableResults?e:g3(e),variables:i},s?{error:s}:null)},t.prototype.reobserveAsConcast=function(e,i){var r=this;this.isTornDown=!1;var s=i===ei.refetch||i===ei.fetchMore||i===ei.poll,o=this.options.variables,a=this.options.fetchPolicy,l=Bh(this.options,e||{}),c=s?l:k2(this.options,l),u=this.transformDocument(c.query);this.lastQuery=u,s||(this.updatePolling(),e&&e.variables&&!wi(e.variables,o)&&c.fetchPolicy!=="standby"&&(c.fetchPolicy===a||typeof c.nextFetchPolicy=="function")&&(this.applyNextFetchPolicy("variables-changed",c),i===void 0&&(i=ei.setVariables))),this.waitForOwnResult&&(this.waitForOwnResult=K1(c.fetchPolicy));var d=function(){r.concast===g&&(r.waitForOwnResult=!1)},f=c.variables&&Be({},c.variables),h=this.fetch(c,i,u),g=h.concast,v=h.fromLink,_={next:function(w){wi(r.variables,f)&&(d(),r.reportResult(w,f))},error:function(w){wi(r.variables,f)&&(CA(w)||(w=new ra({networkError:w})),d(),r.reportError(w,f))}};return!s&&(v||!this.concast)&&(this.concast&&this.observer&&this.concast.removeObserver(this.observer),this.concast=g,this.observer=_),g.addObserver(_),g},t.prototype.reobserve=function(e,i){return LQ(this.reobserveAsConcast(e,i).promise.then(this.maskResult))},t.prototype.resubscribeAfterError=function(){for(var e=this,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];var s=this.last;is("resetLastResults",function(){return e.resetLastResults()});var o=this.subscribe.apply(this,i);return this.last=s,o},t.prototype.observe=function(){this.reportResult(this.getCurrentFullResult(!1),this.variables)},t.prototype.reportResult=function(e,i){var r=this,s=is("getLastError",function(){return r.getLastError()}),o=this.isDifferentFromLastResult(e,i);(s||!e.partial||this.options.returnPartialData)&&this.updateLastResult(e,i),(s||o)&&Kg(this.observers,"next",this.maskResult(e))},t.prototype.reportError=function(e,i){var r=this,s=Be(Be({},is("getLastResult",function(){return r.getLastResult()})),{error:e,errors:e.graphQLErrors,networkStatus:ei.error,loading:!1});this.updateLastResult(s,i),Kg(this.observers,"error",this.last.error=e)},t.prototype.hasObservers=function(){return this.observers.size>0},t.prototype.tearDownQuery=function(){this.isTornDown||(this.concast&&this.observer&&(this.concast.removeObserver(this.observer),delete this.concast,delete this.observer),this.stopPolling(),this.subscriptions.forEach(function(e){return e.unsubscribe()}),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},t.prototype.transformDocument=function(e){return this.queryManager.transform(e)},t.prototype.maskResult=function(e){return e&&"data"in e?Be(Be({},e),{data:this.queryManager.maskOperation({document:this.query,data:e.data,fetchPolicy:this.options.fetchPolicy,id:this.queryId})}):e},t.prototype.resetNotifications=function(){this.cancelNotifyTimeout(),this.dirty=!1},t.prototype.cancelNotifyTimeout=function(){this.notifyTimeout&&(clearTimeout(this.notifyTimeout),this.notifyTimeout=void 0)},t.prototype.scheduleNotify=function(){var e=this;this.dirty||(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout(function(){return e.notify()},0)))},t.prototype.notify=function(){if(this.cancelNotifyTimeout(),this.dirty&&(this.options.fetchPolicy=="cache-only"||this.options.fetchPolicy=="cache-and-network"||!nh(this.queryInfo.networkStatus))){var e=this.queryInfo.getDiff();e.fromOptimisticTransaction?this.observe():this.reobserveCacheFirst()}this.dirty=!1},t.prototype.reobserveCacheFirst=function(){var e=this.options,i=e.fetchPolicy,r=e.nextFetchPolicy;return i==="cache-and-network"||i==="network-only"?this.reobserve({fetchPolicy:"cache-first",nextFetchPolicy:function(s,o){return this.nextFetchPolicy=r,typeof this.nextFetchPolicy=="function"?this.nextFetchPolicy(s,o):i}}):this.reobserve()},t.inactiveOnCreation=new Tm,t}(ui);p3(cw);function KZ(n){globalThis.__DEV__!==!1&&kt.error(33,n.message,n.stack)}function z3(n){globalThis.__DEV__!==!1&&n&&globalThis.__DEV__!==!1&&kt.debug(34,n)}function K1(n){return n==="network-only"||n==="no-cache"||n==="standby"}var ih=new(qd?WeakMap:Map);function Y1(n,t){var e=n[t];typeof e=="function"&&(n[t]=function(){return ih.set(n,(ih.get(n)+1)%1e15),e.apply(this,arguments)})}var Q1=function(){function n(t,e){e===void 0&&(e=t.generateQueryId()),this.queryId=e,this.document=null,this.lastRequestId=1,this.stopped=!1,this.observableQuery=null;var i=this.cache=t.cache;ih.has(i)||(ih.set(i,0),Y1(i,"evict"),Y1(i,"modify"),Y1(i,"reset"))}return n.prototype.init=function(t){var e=t.networkStatus||ei.loading;return this.variables&&this.networkStatus!==ei.loading&&!wi(this.variables,t.variables)&&(e=ei.setVariables),wi(t.variables,this.variables)||(this.lastDiff=void 0,this.cancel()),Object.assign(this,{document:t.document,variables:t.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:e}),t.observableQuery&&this.setObservableQuery(t.observableQuery),t.lastRequestId&&(this.lastRequestId=t.lastRequestId),this},n.prototype.resetDiff=function(){this.lastDiff=void 0},n.prototype.getDiff=function(){var t=this,e=this.getDiffOptions();if(this.lastDiff&&wi(e,this.lastDiff.options))return this.lastDiff.diff;this.updateWatch(this.variables);var i=this.observableQuery;if(i&&i.options.fetchPolicy==="no-cache")return{complete:!1};var r=is("canonizeResults",function(){return t.cache.diff(e)});return this.updateLastDiff(r,e),r},n.prototype.updateLastDiff=function(t,e){this.lastDiff=t?{diff:t,options:e||this.getDiffOptions()}:void 0},n.prototype.getDiffOptions=function(t){var e;return t===void 0&&(t=this.variables),{query:this.document,variables:t,returnPartialData:!0,optimistic:!0,canonizeResults:(e=this.observableQuery)===null||e===void 0?void 0:e.options.canonizeResults}},n.prototype.setDiff=function(t){var e=this,i,r=this.lastDiff&&this.lastDiff.diff;t&&!t.complete&&is("getLastError",function(){var s;return(s=e.observableQuery)===null||s===void 0?void 0:s.getLastError()})||(this.updateLastDiff(t),wi(r&&r.result,t&&t.result)||(i=this.observableQuery)===null||i===void 0||i.scheduleNotify())},n.prototype.setObservableQuery=function(t){t!==this.observableQuery&&(this.observableQuery=t,t&&(t.queryInfo=this))},n.prototype.stop=function(){var t;if(!this.stopped){this.stopped=!0,(t=this.observableQuery)===null||t===void 0||t.resetNotifications(),this.cancel();var e=this.observableQuery;e&&e.stopPolling()}},n.prototype.cancel=function(){var t;(t=this.cancelWatch)===null||t===void 0||t.call(this),this.cancelWatch=void 0},n.prototype.updateWatch=function(t){var e=this;t===void 0&&(t=this.variables);var i=this.observableQuery;if(!(i&&i.options.fetchPolicy==="no-cache")){var r=Be(Be({},this.getDiffOptions(t)),{watcher:this,callback:function(s){return e.setDiff(s)}});(!this.lastWatch||!wi(r,this.lastWatch))&&(this.cancel(),this.cancelWatch=this.cache.watch(this.lastWatch=r))}},n.prototype.resetLastWrite=function(){this.lastWrite=void 0},n.prototype.shouldWrite=function(t,e){var i=this.lastWrite;return!(i&&i.dmCount===ih.get(this.cache)&&wi(e,i.variables)&&wi(t.data,i.result.data))},n.prototype.markResult=function(t,e,i,r){var s=this,o,a=new cu,l=al(t.errors)?t.errors.slice(0):[];if((o=this.observableQuery)===null||o===void 0||o.resetNotifications(),"incremental"in t&&al(t.incremental)){var c=v3(this.getDiff().result,t);t.data=c}else if("hasNext"in t&&t.hasNext){var u=this.getDiff();t.data=a.merge(u.result,t.data)}this.graphQLErrors=l,i.fetchPolicy==="no-cache"?this.updateLastDiff({result:t.data,complete:!0},this.getDiffOptions(i.variables)):r!==0&&(xC(t,i.errorPolicy)?this.cache.performTransaction(function(d){if(s.shouldWrite(t,i.variables))d.writeQuery({query:e,data:t.data,variables:i.variables,overwrite:r===1}),s.lastWrite={result:t,variables:i.variables,dmCount:ih.get(s.cache)};else if(s.lastDiff&&s.lastDiff.diff.complete){t.data=s.lastDiff.diff.result;return}var f=s.getDiffOptions(i.variables),h=is("canonizeResults",function(){return d.diff(f)});!s.stopped&&wi(s.variables,i.variables)&&s.updateWatch(i.variables),s.updateLastDiff(h,f),h.complete&&(t.data=h.result)}):this.lastWrite=void 0)},n.prototype.markReady=function(){return this.networkError=null,this.networkStatus=ei.ready},n.prototype.markError=function(t){var e;return this.networkStatus=ei.error,this.lastWrite=void 0,(e=this.observableQuery)===null||e===void 0||e.resetNotifications(),t.graphQLErrors&&(this.graphQLErrors=t.graphQLErrors),t.networkError&&(this.networkError=t.networkError),t},n}();function xC(n,t){t===void 0&&(t="none");var e=t==="ignore"||t==="all",i=!ow(n);return!i&&e&&n.data&&(i=!0),i}var YZ=Object.prototype.hasOwnProperty,E2=Object.create(null),QZ=function(){function n(t){var e=this;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new HB(ec["queryManager.getDocumentInfo"]||2e3),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new uc(!1),this.noCacheWarningsByQueryId=new Set;var i=new l3(function(s){return e.cache.transformDocument(s)},{cache:!1});this.cache=t.cache,this.link=t.link,this.defaultOptions=t.defaultOptions,this.queryDeduplication=t.queryDeduplication,this.clientAwareness=t.clientAwareness,this.localState=t.localState,this.ssrMode=t.ssrMode,this.assumeImmutableResults=t.assumeImmutableResults,this.dataMasking=t.dataMasking;var r=t.documentTransform;this.documentTransform=r?i.concat(r).concat(i):i,this.defaultContext=t.defaultContext||Object.create(null),(this.onBroadcast=t.onBroadcast)&&(this.mutationStore=Object.create(null))}return n.prototype.stop=function(){var t=this;this.queries.forEach(function(e,i){t.stopQueryNoBroadcast(i)}),this.cancelPendingFetches(xs(35))},n.prototype.cancelPendingFetches=function(t){this.fetchCancelFns.forEach(function(e){return e(t)}),this.fetchCancelFns.clear()},n.prototype.mutate=function(t){return $c(this,arguments,void 0,function(e){var i,r,s,o,a,l,c,u=e.mutation,d=e.variables,f=e.optimisticResponse,h=e.updateQueries,g=e.refetchQueries,v=g===void 0?[]:g,_=e.awaitRefetchQueries,w=_===void 0?!1:_,C=e.update,k=e.onQueryUpdated,E=e.fetchPolicy,A=E===void 0?((l=this.defaultOptions.mutate)===null||l===void 0?void 0:l.fetchPolicy)||"network-only":E,x=e.errorPolicy,p=x===void 0?((c=this.defaultOptions.mutate)===null||c===void 0?void 0:c.errorPolicy)||"none":x,D=e.keepRootFields,R=e.context;return Bc(this,function(S){switch(S.label){case 0:return kt(u,36),kt(A==="network-only"||A==="no-cache",37),i=this.generateMutationId(),u=this.cache.transformForLink(this.transform(u)),r=this.getDocumentInfo(u).hasClientExports,d=this.getVariables(u,d),r?[4,this.localState.addExportedVariables(u,d,R)]:[3,2];case 1:d=S.sent(),S.label=2;case 2:return s=this.mutationStore&&(this.mutationStore[i]={mutation:u,variables:d,loading:!0,error:null}),o=f&&this.markMutationOptimistic(f,{mutationId:i,document:u,variables:d,fetchPolicy:A,errorPolicy:p,context:R,updateQueries:h,update:C,keepRootFields:D}),this.broadcastQueries(),a=this,[2,new Promise(function(I,F){return z1(a.getObservableFromLink(u,Be(Be({},R),{optimisticResponse:o?f:void 0}),d,{},!1),function(H){if(ow(H)&&p==="none")throw new ra({graphQLErrors:_C(H)});s&&(s.loading=!1,s.error=null);var q=Be({},H);return typeof v=="function"&&(v=v(q)),p==="ignore"&&ow(q)&&delete q.errors,a.markMutationResult({mutationId:i,result:q,document:u,variables:d,fetchPolicy:A,errorPolicy:p,context:R,update:C,updateQueries:h,awaitRefetchQueries:w,refetchQueries:v,removeOptimistic:o?i:void 0,onQueryUpdated:k,keepRootFields:D})}).subscribe({next:function(H){a.broadcastQueries(),(!("hasNext"in H)||H.hasNext===!1)&&I(Be(Be({},H),{data:a.maskOperation({document:u,data:H.data,fetchPolicy:A,id:i})}))},error:function(H){s&&(s.loading=!1,s.error=H),o&&a.cache.removeOptimistic(i),a.broadcastQueries(),F(H instanceof ra?H:new ra({networkError:H}))}})})]}})})},n.prototype.markMutationResult=function(t,e){var i=this;e===void 0&&(e=this.cache);var r=t.result,s=[],o=t.fetchPolicy==="no-cache";if(!o&&xC(r,t.errorPolicy)){if(Eh(r)||s.push({result:r.data,dataId:"ROOT_MUTATION",query:t.document,variables:t.variables}),Eh(r)&&al(r.incremental)){var a=e.diff({id:"ROOT_MUTATION",query:this.getDocumentInfo(t.document).asQuery,variables:t.variables,optimistic:!1,returnPartialData:!0}),l=void 0;a.result&&(l=v3(a.result,r)),typeof l<"u"&&(r.data=l,s.push({result:l,dataId:"ROOT_MUTATION",query:t.document,variables:t.variables}))}var c=t.updateQueries;c&&this.queries.forEach(function(d,f){var h=d.observableQuery,g=h&&h.queryName;if(!(!g||!YZ.call(c,g))){var v=c[g],_=i.queries.get(f),w=_.document,C=_.variables,k=e.diff({query:w,variables:C,returnPartialData:!0,optimistic:!1}),E=k.result,A=k.complete;if(A&&E){var x=v(E,{mutationResult:r,queryName:w&&Pg(w)||void 0,queryVariables:C});x&&s.push({result:x,dataId:"ROOT_QUERY",query:w,variables:C})}}})}if(s.length>0||(t.refetchQueries||"").length>0||t.update||t.onQueryUpdated||t.removeOptimistic){var u=[];if(this.refetchQueries({updateCache:function(d){o||s.forEach(function(v){return d.write(v)});var f=t.update,h=!UQ(r)||Eh(r)&&!r.hasNext;if(f){if(!o){var g=d.diff({id:"ROOT_MUTATION",query:i.getDocumentInfo(t.document).asQuery,variables:t.variables,optimistic:!1,returnPartialData:!0});g.complete&&(r=Be(Be({},r),{data:g.result}),"incremental"in r&&delete r.incremental,"hasNext"in r&&delete r.hasNext)}h&&f(d,r,{context:t.context,variables:t.variables})}!o&&!t.keepRootFields&&h&&d.modify({id:"ROOT_MUTATION",fields:function(v,_){var w=_.fieldName,C=_.DELETE;return w==="__typename"?v:C}})},include:t.refetchQueries,optimistic:!1,removeOptimistic:t.removeOptimistic,onQueryUpdated:t.onQueryUpdated||null}).forEach(function(d){return u.push(d)}),t.awaitRefetchQueries||t.onQueryUpdated)return Promise.all(u).then(function(){return r})}return Promise.resolve(r)},n.prototype.markMutationOptimistic=function(t,e){var i=this,r=typeof t=="function"?t(e.variables,{IGNORE:E2}):t;return r===E2?!1:(this.cache.recordOptimisticTransaction(function(s){try{i.markMutationResult(Be(Be({},e),{result:{data:r}}),s)}catch(o){globalThis.__DEV__!==!1&&kt.error(o)}},e.mutationId),!0)},n.prototype.fetchQuery=function(t,e,i){return this.fetchConcastWithInfo(this.getOrCreateQuery(t),e,i).concast.promise},n.prototype.getQueryStore=function(){var t=Object.create(null);return this.queries.forEach(function(e,i){t[i]={variables:e.variables,networkStatus:e.networkStatus,networkError:e.networkError,graphQLErrors:e.graphQLErrors}}),t},n.prototype.resetErrors=function(t){var e=this.queries.get(t);e&&(e.networkError=void 0,e.graphQLErrors=[])},n.prototype.transform=function(t){return this.documentTransform.transformDocument(t)},n.prototype.getDocumentInfo=function(t){var e=this.transformCache;if(!e.has(t)){var i={hasClientExports:EY(t),hasForcedResolvers:this.localState.shouldForceResolvers(t),hasNonreactiveDirective:Rp(["nonreactive"],t),nonReactiveQuery:TQ(t),clientQuery:this.localState.clientQuery(t),serverQuery:u3([{name:"client",remove:!0},{name:"connection"},{name:"nonreactive"},{name:"unmask"}],t),defaultVars:gA(Sd(t)),asQuery:Be(Be({},t),{definitions:t.definitions.map(function(r){return r.kind==="OperationDefinition"&&r.operation!=="query"?Be(Be({},r),{operation:"query"}):r})})};e.set(t,i)}return e.get(t)},n.prototype.getVariables=function(t,e){return Be(Be({},this.getDocumentInfo(t).defaultVars),e)},n.prototype.watchQuery=function(t){var e=this.transform(t.query);t=Be(Be({},t),{variables:this.getVariables(e,t.variables)}),typeof t.notifyOnNetworkStatusChange>"u"&&(t.notifyOnNetworkStatusChange=!1);var i=new Q1(this),r=new cw({queryManager:this,queryInfo:i,options:t});return r.lastQuery=e,cw.inactiveOnCreation.getValue()||this.queries.set(r.queryId,i),i.init({document:e,observableQuery:r,variables:r.variables}),r},n.prototype.query=function(t,e){var i=this;e===void 0&&(e=this.generateQueryId()),kt(t.query,38),kt(t.query.kind==="Document",39),kt(!t.returnPartialData,40),kt(!t.pollInterval,41);var r=this.transform(t.query);return this.fetchQuery(e,Be(Be({},t),{query:r})).then(function(s){return s&&Be(Be({},s),{data:i.maskOperation({document:r,data:s.data,fetchPolicy:t.fetchPolicy,id:e})})}).finally(function(){return i.stopQuery(e)})},n.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},n.prototype.generateRequestId=function(){return this.requestIdCounter++},n.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},n.prototype.stopQueryInStore=function(t){this.stopQueryInStoreNoBroadcast(t),this.broadcastQueries()},n.prototype.stopQueryInStoreNoBroadcast=function(t){var e=this.queries.get(t);e&&e.stop()},n.prototype.clearStore=function(t){return t===void 0&&(t={discardWatches:!0}),this.cancelPendingFetches(xs(42)),this.queries.forEach(function(e){e.observableQuery?e.networkStatus=ei.loading:e.stop()}),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset(t)},n.prototype.getObservableQueries=function(t){var e=this;t===void 0&&(t="active");var i=new Map,r=new Map,s=new Map,o=new Set;return Array.isArray(t)&&t.forEach(function(a){if(typeof a=="string")r.set(a,a),s.set(a,!1);else if(ZY(a)){var l=jc(e.transform(a));r.set(l,Pg(a)),s.set(l,!1)}else Ni(a)&&a.query&&o.add(a)}),this.queries.forEach(function(a,l){var c=a.observableQuery,u=a.document;if(c){if(t==="all"){i.set(l,c);return}var d=c.queryName,f=c.options.fetchPolicy;if(f==="standby"||t==="active"&&!c.hasObservers())return;(t==="active"||d&&s.has(d)||u&&s.has(jc(u)))&&(i.set(l,c),d&&s.set(d,!0),u&&s.set(jc(u),!0))}}),o.size&&o.forEach(function(a){var l=cC("legacyOneTimeQuery"),c=e.getOrCreateQuery(l).init({document:a.query,variables:a.variables}),u=new cw({queryManager:e,queryInfo:c,options:Be(Be({},a),{fetchPolicy:"network-only"})});kt(u.queryId===l),c.setObservableQuery(u),i.set(l,u)}),globalThis.__DEV__!==!1&&s.size&&s.forEach(function(a,l){if(!a){var c=r.get(l);c?globalThis.__DEV__!==!1&&kt.warn(43,c):globalThis.__DEV__!==!1&&kt.warn(44)}}),i},n.prototype.reFetchObservableQueries=function(t){var e=this;t===void 0&&(t=!1);var i=[];return this.getObservableQueries(t?"all":"active").forEach(function(r,s){var o=r.options.fetchPolicy;is("resetLastResults",function(){return r.resetLastResults()}),(t||o!=="standby"&&o!=="cache-only")&&i.push(r.refetch()),(e.queries.get(s)||r.queryInfo).setDiff(null)}),this.broadcastQueries(),Promise.all(i)},n.prototype.startGraphQLSubscription=function(t){var e=this,i=t.query,r=t.variables,s=t.fetchPolicy,o=t.errorPolicy,a=o===void 0?"none":o,l=t.context,c=l===void 0?{}:l,u=t.extensions,d=u===void 0?{}:u;i=this.transform(i),r=this.getVariables(i,r);var f=function(g){return e.getObservableFromLink(i,c,g,d).map(function(v){s!=="no-cache"&&(xC(v,a)&&e.cache.write({query:i,result:v.data,dataId:"ROOT_SUBSCRIPTION",variables:g}),e.broadcastQueries());var _=ow(v),w=w3(v);if(_||w){var C={};if(_&&(C.graphQLErrors=v.errors),w&&(C.protocolErrors=v.extensions[K_]),a==="none"||w)throw new ra(C)}return a==="ignore"&&delete v.errors,v})};if(this.getDocumentInfo(i).hasClientExports){var h=this.localState.addExportedVariables(i,r,c).then(f);return new ui(function(g){var v=null;return h.then(function(_){return v=_.subscribe(g)},g.error),function(){return v&&v.unsubscribe()}})}return f(r)},n.prototype.stopQuery=function(t){this.stopQueryNoBroadcast(t),this.broadcastQueries()},n.prototype.stopQueryNoBroadcast=function(t){this.stopQueryInStoreNoBroadcast(t),this.removeQuery(t)},n.prototype.removeQuery=function(t){var e;this.fetchCancelFns.delete(t),this.queries.has(t)&&((e=this.queries.get(t))===null||e===void 0||e.stop(),this.queries.delete(t))},n.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach(function(t){var e;return(e=t.observableQuery)===null||e===void 0?void 0:e.notify()})},n.prototype.getLocalState=function(){return this.localState},n.prototype.getObservableFromLink=function(t,e,i,r,s){var o=this,a;s===void 0&&(s=(a=e==null?void 0:e.queryDeduplication)!==null&&a!==void 0?a:this.queryDeduplication);var l,c=this.getDocumentInfo(t),u=c.serverQuery,d=c.clientQuery;if(u){var f=this,h=f.inFlightLinkObservables,g=f.link,v={query:u,variables:i,operationName:Pg(u)||void 0,context:this.prepareContext(Be(Be({},e),{forceFetch:!s})),extensions:r};if(e=v.context,s){var _=jc(u),w=Yc(i),C=h.lookup(_,w);if(l=C.observable,!l){var k=new Lf([EC(g,v)]);l=C.observable=k,k.beforeNext(function E(A,x){A==="next"&&"hasNext"in x&&x.hasNext?k.beforeNext(E):h.remove(_,w)})}}else l=new Lf([EC(g,v)])}else l=new Lf([ui.of({data:{}})]),e=this.prepareContext(e);return d&&(l=z1(l,function(E){return o.localState.runResolvers({document:d,remoteResult:E,context:e,variables:i})})),l},n.prototype.getResultsFromLink=function(t,e,i){var r=t.lastRequestId=this.generateRequestId(),s=this.cache.transformForLink(i.query);return z1(this.getObservableFromLink(s,i.context,i.variables),function(o){var a=_C(o),l=a.length>0,c=i.errorPolicy;if(r>=t.lastRequestId){if(l&&c==="none")throw t.markError(new ra({graphQLErrors:a}));t.markResult(o,s,i,e),t.markReady()}var u={data:o.data,loading:!1,networkStatus:ei.ready};return l&&c==="none"&&(u.data=void 0),l&&c!=="ignore"&&(u.errors=a,u.networkStatus=ei.error),u},function(o){var a=CA(o)?o:new ra({networkError:o});throw r>=t.lastRequestId&&t.markError(a),a})},n.prototype.fetchConcastWithInfo=function(t,e,i,r){var s=this;i===void 0&&(i=ei.loading),r===void 0&&(r=e.query);var o=this.getVariables(r,e.variables),a=this.defaultOptions.watchQuery,l=e.fetchPolicy,c=l===void 0?a&&a.fetchPolicy||"cache-first":l,u=e.errorPolicy,d=u===void 0?a&&a.errorPolicy||"none":u,f=e.returnPartialData,h=f===void 0?!1:f,g=e.notifyOnNetworkStatusChange,v=g===void 0?!1:g,_=e.context,w=_===void 0?{}:_,C=Object.assign({},e,{query:r,variables:o,fetchPolicy:c,errorPolicy:d,returnPartialData:h,notifyOnNetworkStatusChange:v,context:w}),k=function(D){C.variables=D;var R=s.fetchQueryByPolicy(t,C,i);return C.fetchPolicy!=="standby"&&R.sources.length>0&&t.observableQuery&&t.observableQuery.applyNextFetchPolicy("after-fetch",e),R},E=function(){return s.fetchCancelFns.delete(t.queryId)};this.fetchCancelFns.set(t.queryId,function(D){E(),setTimeout(function(){return A.cancel(D)})});var A,x;if(this.getDocumentInfo(C.query).hasClientExports)A=new Lf(this.localState.addExportedVariables(C.query,C.variables,C.context).then(k).then(function(D){return D.sources})),x=!0;else{var p=k(C.variables);x=p.fromLink,A=new Lf(p.sources)}return A.promise.then(E,E),{concast:A,fromLink:x}},n.prototype.refetchQueries=function(t){var e=this,i=t.updateCache,r=t.include,s=t.optimistic,o=s===void 0?!1:s,a=t.removeOptimistic,l=a===void 0?o?cC("refetchQueries"):void 0:a,c=t.onQueryUpdated,u=new Map;r&&this.getObservableQueries(r).forEach(function(f,h){u.set(h,{oq:f,lastDiff:(e.queries.get(h)||f.queryInfo).getDiff()})});var d=new Map;return i&&this.cache.batch({update:i,optimistic:o&&l||!1,removeOptimistic:l,onWatchUpdated:function(f,h,g){var v=f.watcher instanceof Q1&&f.watcher.observableQuery;if(v){if(c){u.delete(v.queryId);var _=c(v,h,g);return _===!0&&(_=v.refetch()),_!==!1&&d.set(v,_),_}c!==null&&u.set(v.queryId,{oq:v,lastDiff:g,diff:h})}}}),u.size&&u.forEach(function(f,h){var g=f.oq,v=f.lastDiff,_=f.diff,w;c&&(_||(_=is("canonizeResults",function(){return e.cache.diff(g.queryInfo.getDiffOptions())})),w=c(g,_,v)),(!c||w===!0)&&(w=g.refetch()),w!==!1&&d.set(g,w),h.indexOf("legacyOneTimeQuery")>=0&&e.stopQueryNoBroadcast(h)}),l&&this.cache.removeOptimistic(l),d},n.prototype.maskOperation=function(t){var e,i,r,s=t.document,o=t.data;if(globalThis.__DEV__!==!1){var a=t.fetchPolicy,l=t.id,c=(e=Sd(s))===null||e===void 0?void 0:e.operation,u=((i=c==null?void 0:c[0])!==null&&i!==void 0?i:"o")+l;this.dataMasking&&a==="no-cache"&&!VY(s)&&!this.noCacheWarningsByQueryId.has(u)&&(this.noCacheWarningsByQueryId.add(u),globalThis.__DEV__!==!1&&kt.warn(45,(r=Pg(s))!==null&&r!==void 0?r:"Unnamed ".concat(c??"operation")))}return this.dataMasking?xZ(o,s,this.cache):o},n.prototype.maskFragment=function(t){var e=t.data,i=t.fragment,r=t.fragmentName;return this.dataMasking?A3(e,i,this.cache,r):e},n.prototype.fetchQueryByPolicy=function(t,e,i){var r=this,s=e.query,o=e.variables,a=e.fetchPolicy,l=e.refetchWritePolicy,c=e.errorPolicy,u=e.returnPartialData,d=e.context,f=e.notifyOnNetworkStatusChange,h=t.networkStatus;t.init({document:s,variables:o,networkStatus:i});var g=function(){return t.getDiff()},v=function(E,A){A===void 0&&(A=t.networkStatus||ei.loading);var x=E.result;globalThis.__DEV__!==!1&&!u&&!wi(x,{})&&z3(E.missing);var p=function(D){return ui.of(Be({data:D,loading:nh(A),networkStatus:A},E.complete?null:{partial:!0}))};return x&&r.getDocumentInfo(s).hasForcedResolvers?r.localState.runResolvers({document:s,remoteResult:{data:x},context:d,variables:o,onlyRunForcedResolvers:!0}).then(function(D){return p(D.data||void 0)}):c==="none"&&A===ei.refetch&&Array.isArray(E.missing)?p(void 0):p(x)},_=a==="no-cache"?0:i===ei.refetch&&l!=="merge"?1:2,w=function(){return r.getResultsFromLink(t,_,{query:s,variables:o,context:d,fetchPolicy:a,errorPolicy:c})},C=f&&typeof h=="number"&&h!==i&&nh(i);switch(a){default:case"cache-first":{var k=g();return k.complete?{fromLink:!1,sources:[v(k,t.markReady())]}:u||C?{fromLink:!0,sources:[v(k),w()]}:{fromLink:!0,sources:[w()]}}case"cache-and-network":{var k=g();return k.complete||u||C?{fromLink:!0,sources:[v(k),w()]}:{fromLink:!0,sources:[w()]}}case"cache-only":return{fromLink:!1,sources:[v(g(),t.markReady())]};case"network-only":return C?{fromLink:!0,sources:[v(g()),w()]}:{fromLink:!0,sources:[w()]};case"no-cache":return C?{fromLink:!0,sources:[v(t.getDiff()),w()]}:{fromLink:!0,sources:[w()]};case"standby":return{fromLink:!1,sources:[]}}},n.prototype.getOrCreateQuery=function(t){return t&&!this.queries.has(t)&&this.queries.set(t,new Q1(this,t)),this.queries.get(t)},n.prototype.prepareContext=function(t){t===void 0&&(t={});var e=this.localState.prepareContext(t);return Be(Be(Be({},this.defaultContext),e),{clientAwareness:this.clientAwareness})},n}(),ZZ=function(){function n(t){var e=t.cache,i=t.client,r=t.resolvers,s=t.fragmentMatcher;this.selectionsToResolveCache=new WeakMap,this.cache=e,i&&(this.client=i),r&&this.addResolvers(r),s&&this.setFragmentMatcher(s)}return n.prototype.addResolvers=function(t){var e=this;this.resolvers=this.resolvers||{},Array.isArray(t)?t.forEach(function(i){e.resolvers=WO(e.resolvers,i)}):this.resolvers=WO(this.resolvers,t)},n.prototype.setResolvers=function(t){this.resolvers={},this.addResolvers(t)},n.prototype.getResolvers=function(){return this.resolvers||{}},n.prototype.runResolvers=function(t){return $c(this,arguments,void 0,function(e){var i=e.document,r=e.remoteResult,s=e.context,o=e.variables,a=e.onlyRunForcedResolvers,l=a===void 0?!1:a;return Bc(this,function(c){return i?[2,this.resolveDocument(i,r.data,s,o,this.fragmentMatcher,l).then(function(u){return Be(Be({},r),{data:u.result})})]:[2,r]})})},n.prototype.setFragmentMatcher=function(t){this.fragmentMatcher=t},n.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},n.prototype.clientQuery=function(t){return Rp(["client"],t)&&this.resolvers?t:null},n.prototype.serverQuery=function(t){return d3(t)},n.prototype.prepareContext=function(t){var e=this.cache;return Be(Be({},t),{cache:e,getCacheKey:function(i){return e.identify(i)}})},n.prototype.addExportedVariables=function(t){return $c(this,arguments,void 0,function(e,i,r){return i===void 0&&(i={}),r===void 0&&(r={}),Bc(this,function(s){return e?[2,this.resolveDocument(e,this.buildRootValueFromCache(e,i)||{},this.prepareContext(r),i).then(function(o){return Be(Be({},i),o.exportedVariables)})]:[2,Be({},i)]})})},n.prototype.shouldForceResolvers=function(t){var e=!1;return ka(t,{Directive:{enter:function(i){if(i.name.value==="client"&&i.arguments&&(e=i.arguments.some(function(r){return r.name.value==="always"&&r.value.kind==="BooleanValue"&&r.value.value===!0}),e))return U_}}}),e},n.prototype.buildRootValueFromCache=function(t,e){return this.cache.diff({query:CQ(t),variables:e,returnPartialData:!0,optimistic:!1}).result},n.prototype.resolveDocument=function(t,e){return $c(this,arguments,void 0,function(i,r,s,o,a,l){var c,u,d,f,h,g,v,_,w,C,k;return s===void 0&&(s={}),o===void 0&&(o={}),a===void 0&&(a=function(){return!0}),l===void 0&&(l=!1),Bc(this,function(E){return c=Cm(i),u=Em(i),d=_m(u),f=this.collectSelectionsToResolve(c,d),h=c.operation,g=h?h.charAt(0).toUpperCase()+h.slice(1):"Query",v=this,_=v.cache,w=v.client,C={fragmentMap:d,context:Be(Be({},s),{cache:_,client:w}),variables:o,fragmentMatcher:a,defaultOperationType:g,exportedVariables:{},selectionsToResolve:f,onlyRunForcedResolvers:l},k=!1,[2,this.resolveSelectionSet(c.selectionSet,k,r,C).then(function(A){return{result:A,exportedVariables:C.exportedVariables}})]})})},n.prototype.resolveSelectionSet=function(t,e,i,r){return $c(this,void 0,void 0,function(){var s,o,a,l,c,u=this;return Bc(this,function(d){return s=r.fragmentMap,o=r.context,a=r.variables,l=[i],c=function(f){return $c(u,void 0,void 0,function(){var h,g;return Bc(this,function(v){return!e&&!r.selectionsToResolve.has(f)?[2]:yv(f,a)?au(f)?[2,this.resolveField(f,e,i,r).then(function(_){var w;typeof _<"u"&&l.push((w={},w[tc(f)]=_,w))})]:(cQ(f)?h=f:(h=s[f.name.value],kt(h,21,f.name.value)),h&&h.typeCondition&&(g=h.typeCondition.name.value,r.fragmentMatcher(i,g,o))?[2,this.resolveSelectionSet(h.selectionSet,e,i,r).then(function(_){l.push(_)})]:[2]):[2]})})},[2,Promise.all(t.selections.map(c)).then(function(){return G_(l)})]})})},n.prototype.resolveField=function(t,e,i,r){return $c(this,void 0,void 0,function(){var s,o,a,l,c,u,d,f,h,g=this;return Bc(this,function(v){return i?(s=r.variables,o=t.name.value,a=tc(t),l=o!==a,c=i[a]||i[o],u=Promise.resolve(c),(!r.onlyRunForcedResolvers||this.shouldForceResolvers(t))&&(d=i.__typename||r.defaultOperationType,f=this.resolvers&&this.resolvers[d],f&&(h=f[l?o:a],h&&(u=Promise.resolve(SA.withValue(this.cache,h,[i,W_(t,s),r.context,{field:t,fragmentMap:r.fragmentMap}]))))),[2,u.then(function(_){var w,C;if(_===void 0&&(_=c),t.directives&&t.directives.forEach(function(E){E.name.value==="export"&&E.arguments&&E.arguments.forEach(function(A){A.name.value==="as"&&A.value.kind==="StringValue"&&(r.exportedVariables[A.value.value]=_)})}),!t.selectionSet||_==null)return _;var k=(C=(w=t.directives)===null||w===void 0?void 0:w.some(function(E){return E.name.value==="client"}))!==null&&C!==void 0?C:!1;if(Array.isArray(_))return g.resolveSubSelectedArray(t,e||k,_,r);if(t.selectionSet)return g.resolveSelectionSet(t.selectionSet,e||k,_,r)})]):[2,null]})})},n.prototype.resolveSubSelectedArray=function(t,e,i,r){var s=this;return Promise.all(i.map(function(o){if(o===null)return null;if(Array.isArray(o))return s.resolveSubSelectedArray(t,e,o,r);if(t.selectionSet)return s.resolveSelectionSet(t.selectionSet,e,o,r)}))},n.prototype.collectSelectionsToResolve=function(t,e){var i=function(o){return!Array.isArray(o)},r=this.selectionsToResolveCache;function s(o){if(!r.has(o)){var a=new Set;r.set(o,a),ka(o,{Directive:function(l,c,u,d,f){l.name.value==="client"&&f.forEach(function(h){i(h)&&NO(h)&&a.add(h)})},FragmentSpread:function(l,c,u,d,f){var h=e[l.name.value];kt(h,22,l.name.value);var g=s(h);g.size>0&&(f.forEach(function(v){i(v)&&NO(v)&&a.add(v)}),a.add(l),g.forEach(function(v){a.add(v)}))}})}return r.get(o)}return s(t)},n}(),C2=!1,H3=function(){function n(t){var e=this,i,r,s;if(this.resetStoreCallbacks=[],this.clearStoreCallbacks=[],!t.cache)throw xs(16);var o=t.uri,a=t.credentials,l=t.headers,c=t.cache,u=t.documentTransform,d=t.ssrMode,f=d===void 0?!1:d,h=t.ssrForceFetchDelay,g=h===void 0?0:h,v=t.connectToDevTools,_=t.queryDeduplication,w=_===void 0?!0:_,C=t.defaultOptions,k=t.defaultContext,E=t.assumeImmutableResults,A=E===void 0?c.assumeImmutableResults:E,x=t.resolvers,p=t.typeDefs,D=t.fragmentMatcher,R=t.clientAwareness,S=t.name,I=t.version,F=t.devtools,H=t.dataMasking;globalThis.__DEV__!==!1&&(Yi(t,"connectToDevTools","ApolloClient","Please use `devtools.enabled` instead."),Yi(t,"uri","ApolloClient","Please initialize an instance of `HttpLink` with `uri` instead."),Yi(t,"credentials","ApolloClient","Please initialize an instance of `HttpLink` with `credentials` instead."),Yi(t,"headers","ApolloClient","Please initialize an instance of `HttpLink` with `headers` instead."),Yi(t,"name","ApolloClient","Please use the `clientAwareness.name` option instead."),Yi(t,"version","ApolloClient","Please use the `clientAwareness.version` option instead."),Yi(t,"typeDefs","ApolloClient"),t.link||globalThis.__DEV__!==!1&&kt.warn(17));var q=t.link;q||(q=o?new _3({uri:o,credentials:a,headers:l}):gl.empty()),this.link=q,this.cache=c,this.disableNetworkFetches=f||g>0,this.queryDeduplication=w,this.defaultOptions=C||Object.create(null),this.typeDefs=p,this.devtoolsConfig=Be(Be({},F),{enabled:(i=F==null?void 0:F.enabled)!==null&&i!==void 0?i:v}),this.devtoolsConfig.enabled===void 0&&(this.devtoolsConfig.enabled=globalThis.__DEV__!==!1),g&&setTimeout(function(){return e.disableNetworkFetches=!1},g),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.watchFragment=this.watchFragment.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),this.version=uA,this.localState=new ZZ({cache:c,client:this,resolvers:x,fragmentMatcher:D}),this.queryManager=new QZ({cache:this.cache,link:this.link,defaultOptions:this.defaultOptions,defaultContext:k,documentTransform:u,queryDeduplication:w,ssrMode:f,dataMasking:!!H,clientAwareness:{name:(r=R==null?void 0:R.name)!==null&&r!==void 0?r:S,version:(s=R==null?void 0:R.version)!==null&&s!==void 0?s:I},localState:this.localState,assumeImmutableResults:A,onBroadcast:this.devtoolsConfig.enabled?function(){e.devToolsHookCb&&e.devToolsHookCb({action:{},state:{queries:e.queryManager.getQueryStore(),mutations:e.queryManager.mutationStore||{}},dataWithOptimisticResults:e.cache.extract(!0)})}:void 0}),this.devtoolsConfig.enabled&&this.connectToDevTools()}return Object.defineProperty(n.prototype,"prioritizeCacheValues",{get:function(){return this.disableNetworkFetches},set:function(t){this.disableNetworkFetches=t},enumerable:!1,configurable:!0}),n.prototype.connectToDevTools=function(){if(!(typeof window>"u")){var t=window,e=Symbol.for("apollo.devtools");(t[e]=t[e]||[]).push(this),t.__APOLLO_CLIENT__=this,!C2&&globalThis.__DEV__!==!1&&(C2=!0,window.document&&window.top===window.self&&/^(https?|file):$/.test(window.location.protocol)&&setTimeout(function(){if(!window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__){var i=window.navigator,r=i&&i.userAgent,s=void 0;typeof r=="string"&&(r.indexOf("Chrome/")>-1?s="https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm":r.indexOf("Firefox/")>-1&&(s="https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/")),s&&globalThis.__DEV__!==!1&&kt.log("Download the Apollo DevTools for a better development experience: %s",s)}},1e4))}},Object.defineProperty(n.prototype,"documentTransform",{get:function(){return this.queryManager.documentTransform},enumerable:!1,configurable:!0}),n.prototype.stop=function(){this.queryManager.stop()},n.prototype.watchQuery=function(t){return this.defaultOptions.watchQuery&&(t=H1(this.defaultOptions.watchQuery,t)),this.disableNetworkFetches&&(t.fetchPolicy==="network-only"||t.fetchPolicy==="cache-and-network")&&(t=Be(Be({},t),{fetchPolicy:"cache-first"})),globalThis.__DEV__!==!1&&(Yi(t,"canonizeResults","client.watchQuery"),Yi(t,"partialRefetch","client.watchQuery")),this.queryManager.watchQuery(t)},n.prototype.query=function(t){return this.defaultOptions.query&&(t=H1(this.defaultOptions.query,t)),kt(t.fetchPolicy!=="cache-and-network",18),this.disableNetworkFetches&&t.fetchPolicy==="network-only"&&(t=Be(Be({},t),{fetchPolicy:"cache-first"})),globalThis.__DEV__!==!1&&(Yi(t,"canonizeResults","client.query"),Yi(t,"notifyOnNetworkStatusChange","client.query","This option does not affect `client.query` and can be safely removed."),t.fetchPolicy==="standby"&&globalThis.__DEV__!==!1&&kt.warn(19)),this.queryManager.query(t)},n.prototype.mutate=function(t){return this.defaultOptions.mutate&&(t=H1(this.defaultOptions.mutate,t)),this.queryManager.mutate(t)},n.prototype.subscribe=function(t){var e=this,i=this.queryManager.generateQueryId();return this.queryManager.startGraphQLSubscription(t).map(function(r){return Be(Be({},r),{data:e.queryManager.maskOperation({document:t.query,data:r.data,fetchPolicy:t.fetchPolicy,id:i})})})},n.prototype.readQuery=function(t,e){return e===void 0&&(e=!1),this.cache.readQuery(t,e)},n.prototype.watchFragment=function(t){var e;return this.cache.watchFragment(Be(Be({},t),(e={},e[Symbol.for("apollo.dataMasking")]=this.queryManager.dataMasking,e)))},n.prototype.readFragment=function(t,e){return e===void 0&&(e=!1),this.cache.readFragment(t,e)},n.prototype.writeQuery=function(t){var e=this.cache.writeQuery(t);return t.broadcast!==!1&&this.queryManager.broadcastQueries(),e},n.prototype.writeFragment=function(t){var e=this.cache.writeFragment(t);return t.broadcast!==!1&&this.queryManager.broadcastQueries(),e},n.prototype.__actionHookForDevTools=function(t){this.devToolsHookCb=t},n.prototype.__requestRaw=function(t){return EC(this.link,t)},n.prototype.resetStore=function(){var t=this;return Promise.resolve().then(function(){return t.queryManager.clearStore({discardWatches:!1})}).then(function(){return Promise.all(t.resetStoreCallbacks.map(function(e){return e()}))}).then(function(){return t.reFetchObservableQueries()})},n.prototype.clearStore=function(){var t=this;return Promise.resolve().then(function(){return t.queryManager.clearStore({discardWatches:!0})}).then(function(){return Promise.all(t.clearStoreCallbacks.map(function(e){return e()}))})},n.prototype.onResetStore=function(t){var e=this;return this.resetStoreCallbacks.push(t),function(){e.resetStoreCallbacks=e.resetStoreCallbacks.filter(function(i){return i!==t})}},n.prototype.onClearStore=function(t){var e=this;return this.clearStoreCallbacks.push(t),function(){e.clearStoreCallbacks=e.clearStoreCallbacks.filter(function(i){return i!==t})}},n.prototype.reFetchObservableQueries=function(t){return this.queryManager.reFetchObservableQueries(t)},n.prototype.refetchQueries=function(t){var e=this.queryManager.refetchQueries(t),i=[],r=[];e.forEach(function(o,a){i.push(a),r.push(o)});var s=Promise.all(r);return s.queries=i,s.results=r,s.catch(function(o){globalThis.__DEV__!==!1&&kt.debug(20,o)}),s},n.prototype.getObservableQueries=function(t){return t===void 0&&(t="active"),this.queryManager.getObservableQueries(t)},n.prototype.extract=function(t){return this.cache.extract(t)},n.prototype.restore=function(t){return this.cache.restore(t)},n.prototype.addResolvers=function(t){this.localState.addResolvers(t)},n.prototype.setResolvers=function(t){this.localState.setResolvers(t)},n.prototype.getResolvers=function(){return this.localState.getResolvers()},n.prototype.setLocalStateFragmentMatcher=function(t){this.localState.setFragmentMatcher(t)},n.prototype.setLink=function(t){this.link=this.queryManager.link=t},Object.defineProperty(n.prototype,"defaultContext",{get:function(){return this.queryManager.defaultContext},enumerable:!1,configurable:!0}),n}();globalThis.__DEV__!==!1&&(H3.prototype.getMemoryInternals=zY);var uw=new Map,OC=new Map,W3=!0,ry=!1;function j3(n){return n.replace(/[\s,]+/g," ").trim()}function JZ(n){return j3(n.source.body.substring(n.start,n.end))}function XZ(n){var t=new Set,e=[];return n.definitions.forEach(function(i){if(i.kind==="FragmentDefinition"){var r=i.name.value,s=JZ(i.loc),o=OC.get(r);o&&!o.has(s)?W3&&console.warn("Warning: fragment with name "+r+` already exists.
graphql-tag enforces all fragment names across your application to be unique; read more about
this in the docs: http://dev.apollodata.com/core/fragments.html#unique-names`):o||OC.set(r,o=new Set),o.add(s),t.has(s)||(t.add(s),e.push(i))}else e.push(i)}),Be(Be({},n),{definitions:e})}function eJ(n){var t=new Set(n.definitions);t.forEach(function(i){i.loc&&delete i.loc,Object.keys(i).forEach(function(r){var s=i[r];s&&typeof s=="object"&&t.add(s)})});var e=n.loc;return e&&(delete e.startToken,delete e.endToken),n}function tJ(n){var t=j3(n);if(!uw.has(t)){var e=hY(n,{experimentalFragmentVariables:ry,allowLegacyFragmentVariables:ry});if(!e||e.kind!=="Document")throw new Error("Not a valid GraphQL document.");uw.set(t,eJ(XZ(e)))}return uw.get(t)}function mt(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];typeof n=="string"&&(n=[n]);var i=n[0];return t.forEach(function(r,s){r&&r.kind==="Document"?i+=r.loc.source.body:i+=r,i+=n[s+1]}),tJ(i)}function nJ(){uw.clear(),OC.clear()}function iJ(){W3=!1}function rJ(){ry=!0}function sJ(){ry=!1}var ng={gql:mt,resetCaches:nJ,disableFragmentWarnings:iJ,enableExperimentalFragmentVariables:rJ,disableExperimentalFragmentVariables:sJ};(function(n){n.gql=ng.gql,n.resetCaches=ng.resetCaches,n.disableFragmentWarnings=ng.disableFragmentWarnings,n.enableExperimentalFragmentVariables=ng.enableExperimentalFragmentVariables,n.disableExperimentalFragmentVariables=ng.disableExperimentalFragmentVariables})(mt||(mt={}));mt.default=mt;var q3=Symbol("default-apollo-client"),oJ=Symbol("apollo-clients");function Z1(n,t){return n?n.default:t??void 0}function J1(n,t){return n==null?void 0:n[t]}function pl(n){let t;const e=RC;if(!rA())t=r=>r?J1(e,r):Z1(e,e.default);else{const r=Ci(oJ,null),s=Ci(q3,null);t=o=>{if(o){const l=J1(r,o);return l||J1(e,o)}const a=Z1(r,s);return a||Z1(e,e.default)}}function i(r=n){const s=t(r);if(!s)throw new Error(`Apollo client with id ${r??"default"} not found. Use an app.runWithContext() or provideApolloClient() if you are outside of a component setup.`);return s}return{resolveClient:i,get client(){return i()}}}var RC={};function sy(n){return RC={default:n},function(t){const e=t();return RC={},e}}var na=typeof window>"u",rh={queries:Z(0),mutations:Z(0),subscriptions:Z(0),components:new Map};function aJ(){const n=yu();if(!n)return{};let t;return na?(t={queries:Z(0),mutations:Z(0),subscriptions:Z(0)},{tracking:t}):(rh.components.has(n)?t=rh.components.get(n):(rh.components.set(n,t={queries:Z(0),mutations:Z(0),subscriptions:Z(0)}),_u(()=>{rh.components.delete(n)})),{tracking:t})}function xA(n,t){if(na)return;const{tracking:e}=aJ();gt(n,(i,r)=>{if(r!=null&&i!==r){const s=i?1:-1;e&&(e[t].value+=s),rh[t].value+=s}},{immediate:!0}),_u(()=>{n.value&&(e&&e[t].value--,rh[t].value--)})}function lJ(n){xA(n,"queries")}function cJ(n){xA(n,"mutations")}function uJ(n){xA(n,"subscriptions")}function G3(n){return En(n)?n:typeof n=="function"?le(n):n&&Kt(n)}function Zg(n){return En(n)?n:typeof n=="function"?le(n):Z(n)}function OA(n){return n instanceof Error?CA(n)?n:new ra({networkError:n,errorMessage:n.message}):new ra({networkError:Object.assign(new Error(n==null?void 0:n.message),{originalError:n}),errorMessage:String(n)})}function dJ(n){return new ra({graphQLErrors:n,errorMessage:`GraphQL response contains errors: ${n.map(t=>t.message).join(" | ")}`})}function Fh(){const n=[];function t(s){return n.push(s),{off:()=>e(s)}}function e(s){const o=n.indexOf(s);o!==-1&&n.splice(o,1)}function i(...s){for(const o of n)o(...s)}function r(){return n.length}return{on:t,off:e,trigger:i,getCount:r}}function ln(n,t,e){return K3(n,t,e)}function K3(n,t,e={},i=!1){var r;const s=yu(),o=Yr(),a=Z(),l=Zg(n),c=Zg(t),u=G3(e),d=ha(),f=Fh(),h=ha(null),g=Fh(),v=Z(!1);s&&lJ(v);const _=Z();let w,C=!1,k,E;const A=()=>{C=!0,w&&w()},x=Se=>{E=Se,k&&k(Se)},p=()=>{w=void 0,k=void 0,C=!1,E=void 0};o&&((r=XS)==null||r(()=>{var Se;if(!(!Y.value||na&&((Se=a.value)==null?void 0:Se.prefetch)===!1))return new Promise((ye,ie)=>{w=()=>{p(),ye()},k=_e=>{p(),ie(_e)},C?w():E&&k(E)}).finally(ve)}));const{resolveClient:D}=pl();function R(){var Se;return D((Se=a.value)==null?void 0:Se.clientId)}const S=ha();let I,F=!1,H=!1,q=!0;function N(){var Se,ye,ie,_e,Je;if(F||!Y.value||na&&((Se=a.value)==null?void 0:Se.prefetch)===!1||!We){A();return}na&&(Ue(l.value),Ye(c.value),oe(M(u))),F=!0,h.value=null,v.value=!0;const ut=R();if(S.value=ut.watchQuery({query:We,variables:Oe??{},...a.value,...na&&((ye=a.value)==null?void 0:ye.fetchPolicy)!=="no-cache"?{fetchPolicy:"network-only"}:{}}),$(),!na&&(q||!((ie=a.value)!=null&&ie.keepPreviousResult))&&(((_e=a.value)==null?void 0:_e.fetchPolicy)!=="no-cache"||a.value.notifyOnNetworkStatusChange)){const ft=S.value.getCurrentResult(!1);!ft.loading||ft.partial||(Je=a.value)!=null&&Je.notifyOnNetworkStatusChange?(re(ft),H=!ft.loading):ft.error&&(z(ft.error),H=!0)}if(!na)for(const ft of Re)Ie(ft);q=!1}function $(){I&&!I.closed||S.value&&(H=!1,I=S.value.subscribe({next:re,error:z}))}function U(){var Se,ye,ie,_e;const Je=D((Se=a.value)==null?void 0:Se.clientId);return((ye=a.value)==null?void 0:ye.errorPolicy)||((_e=(ie=Je.defaultOptions)==null?void 0:ie.watchQuery)==null?void 0:_e.errorPolicy)}function re(Se){var ye;if(H){H=!1;return}h.value=null,K(Se);const ie=U();ie&&ie==="all"&&!Se.error&&((ye=Se.errors)!=null&&ye.length)&&ge(dJ(Se.errors)),A()}function K(Se){var ye,ie;d.value=Se.data&&Object.keys(Se.data).length===0?Se.error&&!((ye=a.value)!=null&&ye.returnPartialData)&&((ie=a.value)==null?void 0:ie.errorPolicy)==="none"?void 0:d.value:Se.data,v.value=Se.loading,_.value=Se.networkStatus,Zn(()=>{f.trigger(Se,{client:R()})})}function z(Se){if(H){H=!1;return}const ye=OA(Se),ie=U();ie&&ie!=="none"&&K(S.value.getCurrentResult()),ge(ye),x(ye),Q()}function ge(Se){h.value=Se,v.value=!1,_.value=8,Zn(()=>{g.trigger(Se,{client:R()})})}function Q(){if(!S.value)return;const Se=S.value.getLastError(),ye=S.value.getLastResult();S.value.resetLastResults(),$(),Object.assign(S.value,{lastError:Se,lastResult:ye})}let ue=[];function ve(){A(),F&&(F=!1,v.value=!1,ue.forEach(Se=>Se()),ue=[],S.value&&(S.value.stopPolling(),S.value=null),I&&(I.unsubscribe(),I=void 0))}let ce=!1;function J(){!F||ce||(ce=!0,Zn(()=>{F&&(ve(),N()),ce=!1}))}let ae,xe=!1;function he(){var Se,ye;a.value?((Se=a.value)!=null&&Se.throttle?ae=cA(a.value.throttle,J):(ye=a.value)!=null&&ye.debounce?ae=TB(a.value.debounce,J):ae=J,xe=!0):ae=J}function Ae(){!F||ce||(xe||he(),ae())}let We=l.value;const Ee=Z(i),G=le(()=>!a.value||a.value.enabled==null||a.value.enabled),Y=le(()=>G.value&&!Ee.value&&!!l.value);gt(()=>M(u),oe,{deep:!0,immediate:!0});function oe(Se){a.value&&(a.value.throttle!==Se.throttle||a.value.debounce!==Se.debounce)&&he(),a.value=Se,Ae()}gt(l,Ue);function Ue(Se){We=Se,Ae()}let Oe,Le;gt(()=>{if(Y.value)return c.value},Ye,{deep:!0,immediate:!0});function Ye(Se){const ye=JSON.stringify([Se,Y.value]);ye!==Le&&(Oe=Se,Ae()),Le=ye}function te(Se=void 0){if(S.value)return Se&&(Oe=Se),h.value=null,v.value=!0,S.value.refetch(Se).then(ye=>{var ie;const _e=(ie=S.value)==null?void 0:ie.getCurrentResult();return _e&&K(_e),ye})}function se(Se){S.value&&S.value.updateQuery(Se)}function pe(Se){if(S.value)return h.value=null,v.value=!0,S.value.fetchMore(Se).then(ye=>{var ie;const _e=(ie=S.value)==null?void 0:ie.getCurrentResult();return _e&&K(_e),ye})}const Re=[];function Me(Se){if(na)return;const ye=Zg(Se);gt(ye,(ie,_e,Je)=>{const ut=Re.findIndex(Ot=>Ot.options===_e);ut!==-1&&Re.splice(ut,1);const ft={options:ie,unsubscribeFns:[]};Re.push(ft),Ie(ft),Je(()=>{ft.unsubscribeFns.forEach(Ot=>Ot()),ft.unsubscribeFns=[]})},{immediate:!0})}function Ie(Se){if(!F)return;if(!S.value)throw new Error("Query is not defined");const ye=S.value.subscribeToMore(Se.options);ue.push(ye),Se.unsubscribeFns.push(ye)}return gt(Y,Se=>{Se?Zn(()=>{N()}):ve()}),Y.value&&N(),s?_u(()=>{ve(),Re.length=0}):console.warn("[Vue apollo] useQuery() is called outside of an active effect scope and the query will not be automatically stopped."),{result:d,loading:v,networkStatus:_,error:h,start:N,stop:ve,restart:Ae,forceDisabled:Ee,document:l,variables:c,options:u,query:S,refetch:te,fetchMore:pe,subscribeToMore:Me,updateQuery:se,onResult:f.on,onError:g.on}}function Lp(n,t,e){const i=K3(n,t,e,!0);function r(s,o,a){return s&&(i.document.value=s),o&&(i.variables.value=o),a&&Object.assign(En(i.options)?i.options.value:i.options,a),i.forceDisabled.value?(i.forceDisabled.value=!1,na&&i.start(),new Promise((c,u)=>{const{off:d}=i.onResult(h=>{h.loading||(c(h.data),d(),f())}),{off:f}=i.onError(h=>{u(h),d(),f()})})):!1}return{...i,load:r}}function In(n,t={}){const e=yu(),i=Z(!1);e&&cJ(i);const r=ha(null),s=Z(!1),o=Fh(),a=Fh(),{resolveClient:l}=pl();async function c(u,d={}){let f;typeof n=="function"?f=n():En(n)?f=n.value:f=n;let h;typeof t=="function"?h=t():En(t)?h=t.value:h=t;const g=l(h.clientId);r.value=null,i.value=!0,s.value=!0;try{const v=await g.mutate({mutation:f,...h,...d,variables:u??h.variables?{...h.variables,...u}:void 0});return i.value=!1,await Zn(),o.trigger(v,{client:g}),v}catch(v){const _=OA(v);if(r.value=_,i.value=!1,await Zn(),a.trigger(_,{client:g}),h.throws==="always"||h.throws!=="never"&&!a.getCount())throw _}return null}return e&&_u(()=>{i.value=!1}),{mutate:c,loading:i,error:r,called:s,onDone:o.on,onError:a.on}}function Ur(n,t=void 0,e={}){const i=yu(),r=Zg(n),s=Zg(t),o=G3(e),a=ha(),l=Fh(),c=ha(null),u=Fh(),d=Z(!1);i&&uJ(d);const{resolveClient:f}=pl(),h=Z(null);let g=null,v=!1;function _(){var $;return f(($=S.value)==null?void 0:$.clientId)}function w(){if(v||!N.value||na)return;v=!0,d.value=!0;const $=_();h.value=$.subscribe({query:I,variables:F,...S.value}),g=h.value.subscribe({next:C,error:k})}function C($){a.value=$.data,d.value=!1,l.trigger($,{client:_()})}function k($){const U=OA($);c.value=U,d.value=!1,u.trigger(U,{client:_()})}function E(){v&&(v=!1,d.value=!1,h.value&&(h.value=null),g&&(g.unsubscribe(),g=null))}let A=!1;function x(){!v||A||(A=!0,Zn(()=>{v&&(E(),w()),A=!1}))}let p;function D(){var $,U;($=S.value)!=null&&$.throttle?p=cA(S.value.throttle,x):(U=S.value)!=null&&U.debounce?p=TB(S.value.debounce,x):p=x}function R(){p||D(),p()}const S=Z();gt(()=>En(o)?o.value:o,$=>{S.value&&(S.value.throttle!==$.throttle||S.value.debounce!==$.debounce)&&D(),S.value=$,R()},{deep:!0,immediate:!0});let I;gt(r,$=>{I=$,R()},{immediate:!0});let F,H;gt(s,($,U)=>{const re=JSON.stringify($);re!==H&&(F=$,R()),H=re},{deep:!0,immediate:!0});const N=le(()=>!S.value||S.value.enabled==null||S.value.enabled);return gt(N,$=>{$?w():E()},{immediate:!0}),i?_u(E):console.warn("[Vue apollo] useSubscription() is called outside of an active effect scope and the subscription will not be automatically stopped."),{result:a,loading:d,error:c,start:w,stop:E,restart:R,document:r,variables:s,options:o,subscription:h,onResult:l.on,onError:u.on}}function Y3(n){return new gl(function(t,e){return new ui(function(i){var r,s,o;try{r=e(t).subscribe({next:function(a){if(a.errors?o=n({graphQLErrors:a.errors,response:a,operation:t,forward:e}):w3(a)&&(o=n({protocolErrors:a.extensions[K_],response:a,operation:t,forward:e})),o){s=o.subscribe({next:i.next.bind(i),error:i.error.bind(i),complete:i.complete.bind(i)});return}i.next(a)},error:function(a){if(o=n({operation:t,networkError:a,graphQLErrors:a&&a.result&&a.result.errors||void 0,forward:e}),o){s=o.subscribe({next:i.next.bind(i),error:i.error.bind(i),complete:i.complete.bind(i)});return}i.error(a)},complete:function(){o||i.complete.bind(i)()}})}catch(a){n({networkError:a,operation:t,forward:e}),i.error(a)}return function(){r&&r.unsubscribe(),s&&r.unsubscribe()}})})}(function(n){Wo(t,n);function t(e){var i=n.call(this)||this;return i.link=Y3(e),i}return t.prototype.request=function(e,i){return this.link.request(e,i)},t})(gl);function fJ(n){return Ni(n)&&"code"in n&&"reason"in n}function hJ(n){var t;return Ni(n)&&((t=n.target)===null||t===void 0?void 0:t.readyState)===WebSocket.CLOSED}var mJ=function(n){Wo(t,n);function t(e){var i=n.call(this)||this;return i.client=e,i}return t.prototype.request=function(e){var i=this;return new ui(function(r){return i.client.subscribe(Be(Be({},e),{query:jc(e.query)}),{next:r.next.bind(r),complete:r.complete.bind(r),error:function(s){if(s instanceof Error)return r.error(s);var o=fJ(s);return o||hJ(s)?r.error(new Error("Socket closed".concat(o?" with event ".concat(s.code):"").concat(o?" ".concat(s.reason):""))):r.error(new ra({graphQLErrors:Array.isArray(s)?s:[s]}))}})})},t}(gl);function $s(n){return n===null?"null":Array.isArray(n)?"array":typeof n}function Ju(n){return $s(n)==="object"}function gJ(n){return Array.isArray(n)&&n.length>0&&n.every(t=>"message"in t)}function T2(n,t){return n.length<124?n:t}const pJ="graphql-transport-ws";var Js;(function(n){n[n.InternalServerError=4500]="InternalServerError",n[n.InternalClientError=4005]="InternalClientError",n[n.BadRequest=4400]="BadRequest",n[n.BadResponse=4004]="BadResponse",n[n.Unauthorized=4401]="Unauthorized",n[n.Forbidden=4403]="Forbidden",n[n.SubprotocolNotAcceptable=4406]="SubprotocolNotAcceptable",n[n.ConnectionInitialisationTimeout=4408]="ConnectionInitialisationTimeout",n[n.ConnectionAcknowledgementTimeout=4504]="ConnectionAcknowledgementTimeout",n[n.SubscriberAlreadyExists=4409]="SubscriberAlreadyExists",n[n.TooManyInitialisationRequests=4429]="TooManyInitialisationRequests"})(Js||(Js={}));var Qi;(function(n){n.ConnectionInit="connection_init",n.ConnectionAck="connection_ack",n.Ping="ping",n.Pong="pong",n.Subscribe="subscribe",n.Next="next",n.Error="error",n.Complete="complete"})(Qi||(Qi={}));function Q3(n){if(!Ju(n))throw new Error(`Message is expected to be an object, but got ${$s(n)}`);if(!n.type)throw new Error("Message is missing the 'type' property");if(typeof n.type!="string")throw new Error(`Message is expects the 'type' property to be a string, but got ${$s(n.type)}`);switch(n.type){case Qi.ConnectionInit:case Qi.ConnectionAck:case Qi.Ping:case Qi.Pong:{if(n.payload!=null&&!Ju(n.payload))throw new Error(`"${n.type}" message expects the 'payload' property to be an object or nullish or missing, but got "${n.payload}"`);break}case Qi.Subscribe:{if(typeof n.id!="string")throw new Error(`"${n.type}" message expects the 'id' property to be a string, but got ${$s(n.id)}`);if(!n.id)throw new Error(`"${n.type}" message requires a non-empty 'id' property`);if(!Ju(n.payload))throw new Error(`"${n.type}" message expects the 'payload' property to be an object, but got ${$s(n.payload)}`);if(typeof n.payload.query!="string")throw new Error(`"${n.type}" message payload expects the 'query' property to be a string, but got ${$s(n.payload.query)}`);if(n.payload.variables!=null&&!Ju(n.payload.variables))throw new Error(`"${n.type}" message payload expects the 'variables' property to be a an object or nullish or missing, but got ${$s(n.payload.variables)}`);if(n.payload.operationName!=null&&$s(n.payload.operationName)!=="string")throw new Error(`"${n.type}" message payload expects the 'operationName' property to be a string or nullish or missing, but got ${$s(n.payload.operationName)}`);if(n.payload.extensions!=null&&!Ju(n.payload.extensions))throw new Error(`"${n.type}" message payload expects the 'extensions' property to be a an object or nullish or missing, but got ${$s(n.payload.extensions)}`);break}case Qi.Next:{if(typeof n.id!="string")throw new Error(`"${n.type}" message expects the 'id' property to be a string, but got ${$s(n.id)}`);if(!n.id)throw new Error(`"${n.type}" message requires a non-empty 'id' property`);if(!Ju(n.payload))throw new Error(`"${n.type}" message expects the 'payload' property to be an object, but got ${$s(n.payload)}`);break}case Qi.Error:{if(typeof n.id!="string")throw new Error(`"${n.type}" message expects the 'id' property to be a string, but got ${$s(n.id)}`);if(!n.id)throw new Error(`"${n.type}" message requires a non-empty 'id' property`);if(!gJ(n.payload))throw new Error(`"${n.type}" message expects the 'payload' property to be an array of GraphQL errors, but got ${JSON.stringify(n.payload)}`);break}case Qi.Complete:{if(typeof n.id!="string")throw new Error(`"${n.type}" message expects the 'id' property to be a string, but got ${$s(n.id)}`);if(!n.id)throw new Error(`"${n.type}" message requires a non-empty 'id' property`);break}default:throw new Error(`Invalid message 'type' property "${n.type}"`)}return n}function vJ(n,t){return Q3(typeof n=="string"?JSON.parse(n,t):n)}function ig(n,t){return Q3(n),JSON.stringify(n,t)}var Th=function(n){return this instanceof Th?(this.v=n,this):new Th(n)},bJ=function(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(h){return function(g){return Promise.resolve(g).then(h,d)}}function a(h,g){i[h]&&(r[h]=function(v){return new Promise(function(_,w){s.push([h,v,_,w])>1||l(h,v)})},g&&(r[h]=g(r[h])))}function l(h,g){try{c(i[h](g))}catch(v){f(s[0][3],v)}}function c(h){h.value instanceof Th?Promise.resolve(h.value.v).then(u,d):f(s[0][2],h)}function u(h){l("next",h)}function d(h){l("throw",h)}function f(h,g){h(g),s.shift(),s.length&&l(s[0][0],s[0][1])}};function wJ(n){const{url:t,connectionParams:e,lazy:i=!0,onNonLazyError:r=console.error,lazyCloseTimeout:s=0,keepAlive:o=0,disablePong:a,connectionAckWaitTimeout:l=0,retryAttempts:c=5,retryWait:u=async function($){let U=1e3;for(let re=0;re<$;re++)U*=2;await new Promise(re=>setTimeout(re,U+Math.floor(Math.random()*2700+300)))},shouldRetry:d=X1,isFatalConnectionProblem:f,on:h,webSocketImpl:g,generateID:v=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,$=>{const U=Math.random()*16|0;return($=="x"?U:U&3|8).toString(16)})},jsonMessageReplacer:_,jsonMessageReviver:w}=n;let C;if(g){if(!_J(g))throw new Error("Invalid WebSocket implementation provided");C=g}else typeof WebSocket<"u"?C=WebSocket:typeof global<"u"?C=global.WebSocket||global.MozWebSocket:typeof window<"u"&&(C=window.WebSocket||window.MozWebSocket);if(!C)throw new Error("WebSocket implementation missing; on Node you can `import WebSocket from 'ws';` and pass `webSocketImpl: WebSocket` to `createClient`");const k=C,E=(()=>{const N=(()=>{const U={};return{on(re,K){return U[re]=K,()=>{delete U[re]}},emit(re){var K;"id"in re&&((K=U[re.id])===null||K===void 0||K.call(U,re))}}})(),$={connecting:h!=null&&h.connecting?[h.connecting]:[],opened:h!=null&&h.opened?[h.opened]:[],connected:h!=null&&h.connected?[h.connected]:[],ping:h!=null&&h.ping?[h.ping]:[],pong:h!=null&&h.pong?[h.pong]:[],message:h!=null&&h.message?[N.emit,h.message]:[N.emit],closed:h!=null&&h.closed?[h.closed]:[],error:h!=null&&h.error?[h.error]:[]};return{onMessage:N.on,on(U,re){const K=$[U];return K.push(re),()=>{K.splice(K.indexOf(re),1)}},emit(U,...re){for(const K of[...$[U]])K(...re)}}})();function A(N){const $=[E.on("error",U=>{$.forEach(re=>re()),N(U)}),E.on("closed",U=>{$.forEach(re=>re()),N(U)})]}let x,p=0,D,R=!1,S=0,I=!1;async function F(){clearTimeout(D);const[N,$]=await(x??(x=new Promise((K,z)=>(async()=>{if(R){if(await u(S),!p)return x=void 0,z({code:1e3,reason:"All Subscriptions Gone"});S++}E.emit("connecting",R);const ge=new k(typeof t=="function"?await t():t,pJ);let Q,ue;function ve(){isFinite(o)&&o>0&&(clearTimeout(ue),ue=setTimeout(()=>{ge.readyState===k.OPEN&&(ge.send(ig({type:Qi.Ping})),E.emit("ping",!1,void 0))},o))}A(J=>{x=void 0,clearTimeout(Q),clearTimeout(ue),z(J),J instanceof S2&&(ge.close(4499,"Terminated"),ge.onerror=null,ge.onclose=null)}),ge.onerror=J=>E.emit("error",J),ge.onclose=J=>E.emit("closed",J),ge.onopen=async()=>{try{E.emit("opened",ge);const J=typeof e=="function"?await e():e;if(ge.readyState!==k.OPEN)return;ge.send(ig(J?{type:Qi.ConnectionInit,payload:J}:{type:Qi.ConnectionInit},_)),isFinite(l)&&l>0&&(Q=setTimeout(()=>{ge.close(Js.ConnectionAcknowledgementTimeout,"Connection acknowledgement timeout")},l)),ve()}catch(J){E.emit("error",J),ge.close(Js.InternalClientError,T2(J instanceof Error?J.message:new Error(J).message,"Internal client error"))}};let ce=!1;ge.onmessage=({data:J})=>{try{const ae=vJ(J,w);if(E.emit("message",ae),ae.type==="ping"||ae.type==="pong"){E.emit(ae.type,!0,ae.payload),ae.type==="pong"?ve():a||(ge.send(ig(ae.payload?{type:Qi.Pong,payload:ae.payload}:{type:Qi.Pong})),E.emit("pong",!1,ae.payload));return}if(ce)return;if(ae.type!==Qi.ConnectionAck)throw new Error(`First message cannot be of type ${ae.type}`);clearTimeout(Q),ce=!0,E.emit("connected",ge,ae.payload,R),R=!1,S=0,K([ge,new Promise((xe,he)=>A(he))])}catch(ae){ge.onmessage=null,E.emit("error",ae),ge.close(Js.BadResponse,T2(ae instanceof Error?ae.message:new Error(ae).message,"Bad response"))}}})())));N.readyState===k.CLOSING&&await $;let U=()=>{};const re=new Promise(K=>U=K);return[N,U,Promise.race([re.then(()=>{if(!p){const K=()=>N.close(1e3,"Normal Closure");isFinite(s)&&s>0?D=setTimeout(()=>{N.readyState===k.OPEN&&K()},s):K()}}),$])]}function H(N){if(X1(N)&&(yJ(N.code)||[Js.InternalServerError,Js.InternalClientError,Js.BadRequest,Js.BadResponse,Js.Unauthorized,Js.SubprotocolNotAcceptable,Js.SubscriberAlreadyExists,Js.TooManyInitialisationRequests].includes(N.code)))throw N;if(I)return!1;if(X1(N)&&N.code===1e3)return p>0;if(!c||S>=c||!d(N)||f!=null&&f(N))throw N;return R=!0}i||(async()=>{for(p++;;)try{const[,,N]=await F();await N}catch(N){try{if(!H(N))return}catch($){return r==null?void 0:r($)}}})();function q(N,$){const U=v(N);let re=!1,K=!1,z=()=>{p--,re=!0};return(async()=>{for(p++;;)try{const[ge,Q,ue]=await F();if(re)return Q();const ve=E.onMessage(U,ce=>{switch(ce.type){case Qi.Next:{$.next(ce.payload);return}case Qi.Error:{K=!0,re=!0,$.error(ce.payload),z();return}case Qi.Complete:{re=!0,z();return}}});ge.send(ig({id:U,type:Qi.Subscribe,payload:N},_)),z=()=>{!re&&ge.readyState===k.OPEN&&ge.send(ig({id:U,type:Qi.Complete},_)),p--,re=!0,Q()},await ue.finally(ve);return}catch(ge){if(!H(ge))return}})().then(()=>{K||$.complete()}).catch(ge=>{$.error(ge)}),()=>{re||z()}}return{on:E.on,subscribe:q,iterate(N){const $=[],U={done:!1,error:null,resolve:()=>{}},re=q(N,{next(z){$.push(z),U.resolve()},error(z){U.done=!0,U.error=z,U.resolve()},complete(){U.done=!0,U.resolve()}}),K=function(){return bJ(this,arguments,function*(){for(;;){for($.length||(yield Th(new Promise(Q=>U.resolve=Q)));$.length;)yield yield Th($.shift());if(U.error)throw U.error;if(U.done)return yield Th(void 0)}})}();return K.throw=async z=>(U.done||(U.done=!0,U.error=z,U.resolve()),{done:!0,value:void 0}),K.return=async()=>(re(),{done:!0,value:void 0}),K},async dispose(){if(I=!0,x){const[N]=await x;N.close(1e3,"Normal Closure")}},terminate(){x&&E.emit("closed",new S2)}}}class S2 extends Error{constructor(){super(...arguments),this.name="TerminatedCloseEvent",this.message="4499: Terminated",this.code=4499,this.reason="Terminated",this.wasClean=!1}}function X1(n){return Ju(n)&&"code"in n&&"reason"in n}function yJ(n){return[1e3,1001,1006,1005,1012,1013,1014].includes(n)?!1:n>=1e3&&n<=1999}function _J(n){return typeof n=="function"&&"constructor"in n&&"CLOSED"in n&&"CLOSING"in n&&"CONNECTING"in n&&"OPEN"in n}function VC(n){const t={};return t.raw=n,t.header=JSON.parse(window.atob(n.split(".")[0])),t.payload=JSON.parse(window.atob(n.split(".")[1])),t}function Y_(){return Math.floor(Date.now()/1e3)}function Ga(n){const t=new Date(n*1e3),e=t.getFullYear(),i=t.getMonth()<9?"0"+(t.getMonth()+1):t.getMonth()+1,r=t.getDate()<10?"0"+t.getDate():t.getDate(),s=t.getHours()<10?"0"+t.getHours():t.getHours(),o=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes();return`${r}.${i}.${e}, ${s}:${o}`}function kJ(n){const t=new Date(n*1e3),e=t.getFullYear(),i=t.getMonth()<9?"0"+(t.getMonth()+1):t.getMonth()+1;return`${t.getDate()<10?"0"+t.getDate():t.getDate()}.${i}.${e}`}function EJ(n){const t=new Date(n*1e3),e=t.getHours()<10?"0"+t.getHours():t.getHours(),i=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes();return`${e}:${i}`}const CJ="modulepreload",TJ=function(n){return"/"+n},A2={},eo=function(t,e,i){let r=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(e.map(l=>{if(l=TJ(l),l in A2)return;A2[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":CJ,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};var SJ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Q_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function RA(n){if(n.__esModule)return n;var t=n.default;if(typeof t=="function"){var e=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),e}var yo={};/*!
  * shared v9.14.5
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function VA(n,t){typeof console<"u"&&(console.warn("[intlify] "+n),t&&console.warn(t.stack))}const I2={};function AJ(n){I2[n]||(I2[n]=!0,VA(n))}const Z3=typeof window<"u";let J3,X3;{const n=Z3&&window.performance;n&&n.mark&&n.measure&&n.clearMarks&&n.clearMeasures&&(J3=t=>{n.mark(t)},X3=(t,e,i)=>{n.measure(t,e,i),n.clearMarks(e),n.clearMarks(i)})}const IJ=/\{([0-9a-zA-Z]+)\}/g;function PJ(n,...t){return t.length===1&&Ad(t[0])&&(t=t[0]),(!t||!t.hasOwnProperty)&&(t={}),n.replace(IJ,(e,i)=>t.hasOwnProperty(i)?t[i]:"")}const xJ=(n,t=!1)=>t?Symbol.for(n):Symbol(n),OJ=(n,t,e)=>eF({l:n,k:t,s:e}),eF=n=>JSON.stringify(n).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),RJ=n=>typeof n=="number"&&isFinite(n),VJ=n=>MA(n)==="[object Date]",DJ=n=>MA(n)==="[object RegExp]",NJ=n=>$A(n)&&Object.keys(n).length===0,LJ=Object.assign,MJ=Object.create,DA=(n=null)=>MJ(n);let P2;const $J=()=>P2||(P2=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:DA());function BJ(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\//g,"&#x2F;").replace(/=/g,"&#x3D;")}function x2(n){return n.replace(/&(?![a-zA-Z0-9#]{2,6};)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function FJ(n){return n=n.replace(/(\w+)\s*=\s*"([^"]*)"/g,(i,r,s)=>`${r}="${x2(s)}"`),n=n.replace(/(\w+)\s*=\s*'([^']*)'/g,(i,r,s)=>`${r}='${x2(s)}'`),/\s*on\w+\s*=\s*["']?[^"'>]+["']?/gi.test(n)&&(VA("Potentially dangerous event handlers detected in translation. Consider removing onclick, onerror, etc. from your translation messages."),n=n.replace(/(\s+)(on)(\w+\s*=)/gi,"$1&#111;n$3")),[/(\s+(?:href|src|action|formaction)\s*=\s*["']?)\s*javascript:/gi,/(style\s*=\s*["'][^"']*url\s*\(\s*)javascript:/gi].forEach(i=>{n=n.replace(i,"$1javascript&#58;")}),n}const UJ=Object.prototype.hasOwnProperty;function zJ(n,t){return UJ.call(n,t)}const NA=Array.isArray,DC=n=>typeof n=="function",HJ=n=>typeof n=="string",WJ=n=>typeof n=="boolean",jJ=n=>typeof n=="symbol",Ad=n=>n!==null&&typeof n=="object",qJ=n=>Ad(n)&&DC(n.then)&&DC(n.catch),LA=Object.prototype.toString,MA=n=>LA.call(n),$A=n=>{if(!Ad(n))return!1;const t=Object.getPrototypeOf(n);return t===null||t.constructor===Object},GJ=n=>n==null?"":NA(n)||$A(n)&&n.toString===LA?JSON.stringify(n,null,2):String(n);function KJ(n,t=""){return n.reduce((e,i,r)=>r===0?e+i:e+t+i,"")}const O2=2;function YJ(n,t=0,e=n.length){const i=n.split(/\r?\n/);let r=0;const s=[];for(let o=0;o<i.length;o++)if(r+=i[o].length+1,r>=t){for(let a=o-O2;a<=o+O2||e>r;a++){if(a<0||a>=i.length)continue;const l=a+1;s.push(`${l}${" ".repeat(3-String(l).length)}|  ${i[a]}`);const c=i[a].length;if(a===o){const u=t-(r-c)+1,d=Math.max(1,e>r?c-u:e-t);s.push("   |  "+" ".repeat(u)+"^".repeat(d))}else if(a>o){if(e>r){const u=Math.max(Math.min(e-r,c),1);s.push("   |  "+"^".repeat(u))}r+=c+1}}break}return s.join(`
`)}function QJ(n){let t=n;return()=>++t}function ZJ(){const n=new Map;return{events:n,on(e,i){const r=n.get(e);r&&r.push(i)||n.set(e,[i])},off(e,i){const r=n.get(e);r&&r.splice(r.indexOf(i)>>>0,1)},emit(e,i){(n.get(e)||[]).slice().map(r=>r(i)),(n.get("*")||[]).slice().map(r=>r(e,i))}}}const db=n=>!Ad(n)||NA(n);function JJ(n,t){if(db(n)||db(t))throw new Error("Invalid value");const e=[{src:n,des:t}];for(;e.length;){const{src:i,des:r}=e.pop();Object.keys(i).forEach(s=>{s!=="__proto__"&&(Ad(i[s])&&!Ad(r[s])&&(r[s]=Array.isArray(i[s])?[]:DA()),db(r[s])||db(i[s])?r[s]=i[s]:e.push({src:i[s],des:r[s]}))})}}const XJ=Object.freeze(Object.defineProperty({__proto__:null,assign:LJ,create:DA,createEmitter:ZJ,deepCopy:JJ,escapeHtml:BJ,format:PJ,friendlyJSONstringify:eF,generateCodeFrame:YJ,generateFormatCacheKey:OJ,getGlobalThis:$J,hasOwn:zJ,inBrowser:Z3,incrementer:QJ,isArray:NA,isBoolean:WJ,isDate:VJ,isEmptyObject:NJ,isFunction:DC,isNumber:RJ,isObject:Ad,isPlainObject:$A,isPromise:qJ,isRegExp:DJ,isString:HJ,isSymbol:jJ,join:KJ,makeSymbol:xJ,get mark(){return J3},get measure(){return X3},objectToString:LA,sanitizeTranslatedHtml:FJ,toDisplayString:GJ,toTypeString:MA,warn:VA,warnOnce:AJ},Symbol.toStringTag,{value:"Module"})),eX=RA(XJ);/*!
  * core-base v9.14.5
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function Gd(n,t){typeof console<"u"&&(console.warn("[intlify] "+n),t&&console.warn(t.stack))}const R2={};function tX(n){R2[n]||(R2[n]=!0,Gd(n))}const Id=typeof window<"u";let no,Pd;{const n=Id&&window.performance;n&&n.mark&&n.measure&&n.clearMarks&&n.clearMeasures&&(no=t=>{n.mark(t)},Pd=(t,e,i)=>{n.measure(t,e,i),n.clearMarks(e),n.clearMarks(i)})}const nX=/\{([0-9a-zA-Z]+)\}/g;function Z_(n,...t){return t.length===1&&gr(t[0])&&(t=t[0]),(!t||!t.hasOwnProperty)&&(t={}),n.replace(nX,(e,i)=>t.hasOwnProperty(i)?t[i]:"")}const iX=(n,t,e)=>rX({l:n,k:t,s:e}),rX=n=>JSON.stringify(n).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),ks=n=>typeof n=="number"&&isFinite(n),sX=n=>nF(n)==="[object Date]",V2=n=>nF(n)==="[object RegExp]",BA=n=>Vi(n)&&Object.keys(n).length===0,Eu=Object.assign,oX=Object.create,Os=(n=null)=>oX(n);function D2(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\//g,"&#x2F;").replace(/=/g,"&#x3D;")}function N2(n){return n.replace(/&(?![a-zA-Z0-9#]{2,6};)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function aX(n){return n=n.replace(/(\w+)\s*=\s*"([^"]*)"/g,(i,r,s)=>`${r}="${N2(s)}"`),n=n.replace(/(\w+)\s*=\s*'([^']*)'/g,(i,r,s)=>`${r}='${N2(s)}'`),/\s*on\w+\s*=\s*["']?[^"'>]+["']?/gi.test(n)&&(Gd("Potentially dangerous event handlers detected in translation. Consider removing onclick, onerror, etc. from your translation messages."),n=n.replace(/(\s+)(on)(\w+\s*=)/gi,"$1&#111;n$3")),[/(\s+(?:href|src|action|formaction)\s*=\s*["']?)\s*javascript:/gi,/(style\s*=\s*["'][^"']*url\s*\(\s*)javascript:/gi].forEach(i=>{n=n.replace(i,"$1javascript&#58;")}),n}const lX=Object.prototype.hasOwnProperty;function sd(n,t){return lX.call(n,t)}const Za=Array.isArray,hr=n=>typeof n=="function",tn=n=>typeof n=="string",Es=n=>typeof n=="boolean",gr=n=>n!==null&&typeof n=="object",cX=n=>gr(n)&&hr(n.then)&&hr(n.catch),tF=Object.prototype.toString,nF=n=>tF.call(n),Vi=n=>{if(!gr(n))return!1;const t=Object.getPrototypeOf(n);return t===null||t.constructor===Object},uX=n=>n==null?"":Za(n)||Vi(n)&&n.toString===tF?JSON.stringify(n,null,2):String(n);function FA(n,t=""){return n.reduce((e,i,r)=>r===0?e+i:e+t+i,"")}const L2=2;function dX(n,t=0,e=n.length){const i=n.split(/\r?\n/);let r=0;const s=[];for(let o=0;o<i.length;o++)if(r+=i[o].length+1,r>=t){for(let a=o-L2;a<=o+L2||e>r;a++){if(a<0||a>=i.length)continue;const l=a+1;s.push(`${l}${" ".repeat(3-String(l).length)}|  ${i[a]}`);const c=i[a].length;if(a===o){const u=t-(r-c)+1,d=Math.max(1,e>r?c-u:e-t);s.push("   |  "+" ".repeat(u)+"^".repeat(d))}else if(a>o){if(e>r){const u=Math.max(Math.min(e-r,c),1);s.push("   |  "+"^".repeat(u))}r+=c+1}}break}return s.join(`
`)}function iF(n){let t=n;return()=>++t}function fX(n,t,e){return{line:n,column:t,offset:e}}function oy(n,t,e){return{start:n,end:t}}const J_={USE_MODULO_SYNTAX:1,__EXTEND_POINT__:2},hX={[J_.USE_MODULO_SYNTAX]:"Use modulo before '{{0}}'."};function mX(n,t,...e){const i=Z_(hX[n],...e||[]),r={message:String(i),code:n};return t&&(r.location=t),r}const qt={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},gX={[qt.EXPECTED_TOKEN]:"Expected token: '{0}'",[qt.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[qt.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[qt.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[qt.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[qt.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[qt.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[qt.EMPTY_PLACEHOLDER]:"Empty placeholder",[qt.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[qt.INVALID_LINKED_FORMAT]:"Invalid linked format",[qt.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[qt.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[qt.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[qt.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[qt.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[qt.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function Sm(n,t,e={}){const{domain:i,messages:r,args:s}=e,o=Z_((r||gX)[n]||"",...s||[]),a=new SyntaxError(String(o));return a.code=n,t&&(a.location=t),a.domain=i,a}function pX(n){throw n}const vX=/<\/?[\w\s="/.':;#-\/]+>/,bX=n=>vX.test(n),Tl=" ",wX="\r",ps=`
`,yX="\u2028",_X="\u2029";function kX(n){const t=n;let e=0,i=1,r=1,s=0;const o=p=>t[p]===wX&&t[p+1]===ps,a=p=>t[p]===ps,l=p=>t[p]===_X,c=p=>t[p]===yX,u=p=>o(p)||a(p)||l(p)||c(p),d=()=>e,f=()=>i,h=()=>r,g=()=>s,v=p=>o(p)||l(p)||c(p)?ps:t[p],_=()=>v(e),w=()=>v(e+s);function C(){return s=0,u(e)&&(i++,r=0),o(e)&&e++,e++,r++,t[e]}function k(){return o(e+s)&&s++,s++,t[e+s]}function E(){e=0,i=1,r=1,s=0}function A(p=0){s=p}function x(){const p=e+s;for(;p!==e;)C();s=0}return{index:d,line:f,column:h,peekOffset:g,charAt:v,currentChar:_,currentPeek:w,next:C,peek:k,reset:E,resetPeek:A,skipToPeek:x}}const Ec=void 0,EX=".",M2="'",CX="tokenizer";function TX(n,t={}){const e=t.location!==!1,i=kX(n),r=()=>i.index(),s=()=>fX(i.line(),i.column(),i.index()),o=s(),a=r(),l={currentType:14,offset:a,startLoc:o,endLoc:o,lastType:14,lastOffset:a,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},c=()=>l,{onError:u}=t;function d(te,se,pe,...Re){const Me=c();if(se.column+=pe,se.offset+=pe,u){const Ie=e?oy(Me.startLoc,se):null,Se=Sm(te,Ie,{domain:CX,args:Re});u(Se)}}function f(te,se,pe){te.endLoc=s(),te.currentType=se;const Re={type:se};return e&&(Re.loc=oy(te.startLoc,te.endLoc)),pe!=null&&(Re.value=pe),Re}const h=te=>f(te,14);function g(te,se){return te.currentChar()===se?(te.next(),se):(d(qt.EXPECTED_TOKEN,s(),0,se),"")}function v(te){let se="";for(;te.currentPeek()===Tl||te.currentPeek()===ps;)se+=te.currentPeek(),te.peek();return se}function _(te){const se=v(te);return te.skipToPeek(),se}function w(te){if(te===Ec)return!1;const se=te.charCodeAt(0);return se>=97&&se<=122||se>=65&&se<=90||se===95}function C(te){if(te===Ec)return!1;const se=te.charCodeAt(0);return se>=48&&se<=57}function k(te,se){const{currentType:pe}=se;if(pe!==2)return!1;v(te);const Re=w(te.currentPeek());return te.resetPeek(),Re}function E(te,se){const{currentType:pe}=se;if(pe!==2)return!1;v(te);const Re=te.currentPeek()==="-"?te.peek():te.currentPeek(),Me=C(Re);return te.resetPeek(),Me}function A(te,se){const{currentType:pe}=se;if(pe!==2)return!1;v(te);const Re=te.currentPeek()===M2;return te.resetPeek(),Re}function x(te,se){const{currentType:pe}=se;if(pe!==8)return!1;v(te);const Re=te.currentPeek()===".";return te.resetPeek(),Re}function p(te,se){const{currentType:pe}=se;if(pe!==9)return!1;v(te);const Re=w(te.currentPeek());return te.resetPeek(),Re}function D(te,se){const{currentType:pe}=se;if(!(pe===8||pe===12))return!1;v(te);const Re=te.currentPeek()===":";return te.resetPeek(),Re}function R(te,se){const{currentType:pe}=se;if(pe!==10)return!1;const Re=()=>{const Ie=te.currentPeek();return Ie==="{"?w(te.peek()):Ie==="@"||Ie==="%"||Ie==="|"||Ie===":"||Ie==="."||Ie===Tl||!Ie?!1:Ie===ps?(te.peek(),Re()):F(te,!1)},Me=Re();return te.resetPeek(),Me}function S(te){v(te);const se=te.currentPeek()==="|";return te.resetPeek(),se}function I(te){const se=v(te),pe=te.currentPeek()==="%"&&te.peek()==="{";return te.resetPeek(),{isModulo:pe,hasSpace:se.length>0}}function F(te,se=!0){const pe=(Me=!1,Ie="",Se=!1)=>{const ye=te.currentPeek();return ye==="{"?Ie==="%"?!1:Me:ye==="@"||!ye?Ie==="%"?!0:Me:ye==="%"?(te.peek(),pe(Me,"%",!0)):ye==="|"?Ie==="%"||Se?!0:!(Ie===Tl||Ie===ps):ye===Tl?(te.peek(),pe(!0,Tl,Se)):ye===ps?(te.peek(),pe(!0,ps,Se)):!0},Re=pe();return se&&te.resetPeek(),Re}function H(te,se){const pe=te.currentChar();return pe===Ec?Ec:se(pe)?(te.next(),pe):null}function q(te){const se=te.charCodeAt(0);return se>=97&&se<=122||se>=65&&se<=90||se>=48&&se<=57||se===95||se===36}function N(te){return H(te,q)}function $(te){const se=te.charCodeAt(0);return se>=97&&se<=122||se>=65&&se<=90||se>=48&&se<=57||se===95||se===36||se===45}function U(te){return H(te,$)}function re(te){const se=te.charCodeAt(0);return se>=48&&se<=57}function K(te){return H(te,re)}function z(te){const se=te.charCodeAt(0);return se>=48&&se<=57||se>=65&&se<=70||se>=97&&se<=102}function ge(te){return H(te,z)}function Q(te){let se="",pe="";for(;se=K(te);)pe+=se;return pe}function ue(te){_(te);const se=te.currentChar();return se!=="%"&&d(qt.EXPECTED_TOKEN,s(),0,se),te.next(),"%"}function ve(te){let se="";for(;;){const pe=te.currentChar();if(pe==="{"||pe==="}"||pe==="@"||pe==="|"||!pe)break;if(pe==="%")if(F(te))se+=pe,te.next();else break;else if(pe===Tl||pe===ps)if(F(te))se+=pe,te.next();else{if(S(te))break;se+=pe,te.next()}else se+=pe,te.next()}return se}function ce(te){_(te);let se="",pe="";for(;se=U(te);)pe+=se;return te.currentChar()===Ec&&d(qt.UNTERMINATED_CLOSING_BRACE,s(),0),pe}function J(te){_(te);let se="";return te.currentChar()==="-"?(te.next(),se+=`-${Q(te)}`):se+=Q(te),te.currentChar()===Ec&&d(qt.UNTERMINATED_CLOSING_BRACE,s(),0),se}function ae(te){return te!==M2&&te!==ps}function xe(te){_(te),g(te,"'");let se="",pe="";for(;se=H(te,ae);)se==="\\"?pe+=he(te):pe+=se;const Re=te.currentChar();return Re===ps||Re===Ec?(d(qt.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,s(),0),Re===ps&&(te.next(),g(te,"'")),pe):(g(te,"'"),pe)}function he(te){const se=te.currentChar();switch(se){case"\\":case"'":return te.next(),`\\${se}`;case"u":return Ae(te,se,4);case"U":return Ae(te,se,6);default:return d(qt.UNKNOWN_ESCAPE_SEQUENCE,s(),0,se),""}}function Ae(te,se,pe){g(te,se);let Re="";for(let Me=0;Me<pe;Me++){const Ie=ge(te);if(!Ie){d(qt.INVALID_UNICODE_ESCAPE_SEQUENCE,s(),0,`\\${se}${Re}${te.currentChar()}`);break}Re+=Ie}return`\\${se}${Re}`}function We(te){return te!=="{"&&te!=="}"&&te!==Tl&&te!==ps}function Ee(te){_(te);let se="",pe="";for(;se=H(te,We);)pe+=se;return pe}function G(te){let se="",pe="";for(;se=N(te);)pe+=se;return pe}function Y(te){const se=pe=>{const Re=te.currentChar();return Re==="{"||Re==="%"||Re==="@"||Re==="|"||Re==="("||Re===")"||!Re||Re===Tl?pe:(pe+=Re,te.next(),se(pe))};return se("")}function oe(te){_(te);const se=g(te,"|");return _(te),se}function Ue(te,se){let pe=null;switch(te.currentChar()){case"{":return se.braceNest>=1&&d(qt.NOT_ALLOW_NEST_PLACEHOLDER,s(),0),te.next(),pe=f(se,2,"{"),_(te),se.braceNest++,pe;case"}":return se.braceNest>0&&se.currentType===2&&d(qt.EMPTY_PLACEHOLDER,s(),0),te.next(),pe=f(se,3,"}"),se.braceNest--,se.braceNest>0&&_(te),se.inLinked&&se.braceNest===0&&(se.inLinked=!1),pe;case"@":return se.braceNest>0&&d(qt.UNTERMINATED_CLOSING_BRACE,s(),0),pe=Oe(te,se)||h(se),se.braceNest=0,pe;default:{let Me=!0,Ie=!0,Se=!0;if(S(te))return se.braceNest>0&&d(qt.UNTERMINATED_CLOSING_BRACE,s(),0),pe=f(se,1,oe(te)),se.braceNest=0,se.inLinked=!1,pe;if(se.braceNest>0&&(se.currentType===5||se.currentType===6||se.currentType===7))return d(qt.UNTERMINATED_CLOSING_BRACE,s(),0),se.braceNest=0,Le(te,se);if(Me=k(te,se))return pe=f(se,5,ce(te)),_(te),pe;if(Ie=E(te,se))return pe=f(se,6,J(te)),_(te),pe;if(Se=A(te,se))return pe=f(se,7,xe(te)),_(te),pe;if(!Me&&!Ie&&!Se)return pe=f(se,13,Ee(te)),d(qt.INVALID_TOKEN_IN_PLACEHOLDER,s(),0,pe.value),_(te),pe;break}}return pe}function Oe(te,se){const{currentType:pe}=se;let Re=null;const Me=te.currentChar();switch((pe===8||pe===9||pe===12||pe===10)&&(Me===ps||Me===Tl)&&d(qt.INVALID_LINKED_FORMAT,s(),0),Me){case"@":return te.next(),Re=f(se,8,"@"),se.inLinked=!0,Re;case".":return _(te),te.next(),f(se,9,".");case":":return _(te),te.next(),f(se,10,":");default:return S(te)?(Re=f(se,1,oe(te)),se.braceNest=0,se.inLinked=!1,Re):x(te,se)||D(te,se)?(_(te),Oe(te,se)):p(te,se)?(_(te),f(se,12,G(te))):R(te,se)?(_(te),Me==="{"?Ue(te,se)||Re:f(se,11,Y(te))):(pe===8&&d(qt.INVALID_LINKED_FORMAT,s(),0),se.braceNest=0,se.inLinked=!1,Le(te,se))}}function Le(te,se){let pe={type:14};if(se.braceNest>0)return Ue(te,se)||h(se);if(se.inLinked)return Oe(te,se)||h(se);switch(te.currentChar()){case"{":return Ue(te,se)||h(se);case"}":return d(qt.UNBALANCED_CLOSING_BRACE,s(),0),te.next(),f(se,3,"}");case"@":return Oe(te,se)||h(se);default:{if(S(te))return pe=f(se,1,oe(te)),se.braceNest=0,se.inLinked=!1,pe;const{isModulo:Me,hasSpace:Ie}=I(te);if(Me)return Ie?f(se,0,ve(te)):f(se,4,ue(te));if(F(te))return f(se,0,ve(te));break}}return pe}function Ye(){const{currentType:te,offset:se,startLoc:pe,endLoc:Re}=l;return l.lastType=te,l.lastOffset=se,l.lastStartLoc=pe,l.lastEndLoc=Re,l.offset=r(),l.startLoc=s(),i.currentChar()===Ec?f(l,14):Le(i,l)}return{nextToken:Ye,currentOffset:r,currentPosition:s,context:c}}const SX="parser",AX=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function IX(n,t,e){switch(n){case"\\\\":return"\\";case"\\'":return"'";default:{const i=parseInt(t||e,16);return i<=55295||i>=57344?String.fromCodePoint(i):"�"}}}function PX(n={}){const t=n.location!==!1,{onError:e,onWarn:i}=n;function r(k,E,A,x,...p){const D=k.currentPosition();if(D.offset+=x,D.column+=x,e){const R=t?oy(A,D):null,S=Sm(E,R,{domain:SX,args:p});e(S)}}function s(k,E,A,x,...p){const D=k.currentPosition();if(D.offset+=x,D.column+=x,i){const R=t?oy(A,D):null;i(mX(E,R,p))}}function o(k,E,A){const x={type:k};return t&&(x.start=E,x.end=E,x.loc={start:A,end:A}),x}function a(k,E,A,x){t&&(k.end=E,k.loc&&(k.loc.end=A))}function l(k,E){const A=k.context(),x=o(3,A.offset,A.startLoc);return x.value=E,a(x,k.currentOffset(),k.currentPosition()),x}function c(k,E){const A=k.context(),{lastOffset:x,lastStartLoc:p}=A,D=o(5,x,p);return D.index=parseInt(E,10),k.nextToken(),a(D,k.currentOffset(),k.currentPosition()),D}function u(k,E,A){const x=k.context(),{lastOffset:p,lastStartLoc:D}=x,R=o(4,p,D);return R.key=E,A===!0&&(R.modulo=!0),k.nextToken(),a(R,k.currentOffset(),k.currentPosition()),R}function d(k,E){const A=k.context(),{lastOffset:x,lastStartLoc:p}=A,D=o(9,x,p);return D.value=E.replace(AX,IX),k.nextToken(),a(D,k.currentOffset(),k.currentPosition()),D}function f(k){const E=k.nextToken(),A=k.context(),{lastOffset:x,lastStartLoc:p}=A,D=o(8,x,p);return E.type!==12?(r(k,qt.UNEXPECTED_EMPTY_LINKED_MODIFIER,A.lastStartLoc,0),D.value="",a(D,x,p),{nextConsumeToken:E,node:D}):(E.value==null&&r(k,qt.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,Xo(E)),D.value=E.value||"",a(D,k.currentOffset(),k.currentPosition()),{node:D})}function h(k,E){const A=k.context(),x=o(7,A.offset,A.startLoc);return x.value=E,a(x,k.currentOffset(),k.currentPosition()),x}function g(k){const E=k.context(),A=o(6,E.offset,E.startLoc);let x=k.nextToken();if(x.type===9){const p=f(k);A.modifier=p.node,x=p.nextConsumeToken||k.nextToken()}switch(x.type!==10&&r(k,qt.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Xo(x)),x=k.nextToken(),x.type===2&&(x=k.nextToken()),x.type){case 11:x.value==null&&r(k,qt.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Xo(x)),A.key=h(k,x.value||"");break;case 5:x.value==null&&r(k,qt.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Xo(x)),A.key=u(k,x.value||"");break;case 6:x.value==null&&r(k,qt.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Xo(x)),A.key=c(k,x.value||"");break;case 7:x.value==null&&r(k,qt.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Xo(x)),A.key=d(k,x.value||"");break;default:{r(k,qt.UNEXPECTED_EMPTY_LINKED_KEY,E.lastStartLoc,0);const p=k.context(),D=o(7,p.offset,p.startLoc);return D.value="",a(D,p.offset,p.startLoc),A.key=D,a(A,p.offset,p.startLoc),{nextConsumeToken:x,node:A}}}return a(A,k.currentOffset(),k.currentPosition()),{node:A}}function v(k){const E=k.context(),A=E.currentType===1?k.currentOffset():E.offset,x=E.currentType===1?E.endLoc:E.startLoc,p=o(2,A,x);p.items=[];let D=null,R=null;do{const F=D||k.nextToken();switch(D=null,F.type){case 0:F.value==null&&r(k,qt.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Xo(F)),p.items.push(l(k,F.value||""));break;case 6:F.value==null&&r(k,qt.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Xo(F)),p.items.push(c(k,F.value||""));break;case 4:R=!0;break;case 5:F.value==null&&r(k,qt.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Xo(F)),p.items.push(u(k,F.value||"",!!R)),R&&(s(k,J_.USE_MODULO_SYNTAX,E.lastStartLoc,0,Xo(F)),R=null);break;case 7:F.value==null&&r(k,qt.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Xo(F)),p.items.push(d(k,F.value||""));break;case 8:{const H=g(k);p.items.push(H.node),D=H.nextConsumeToken||null;break}}}while(E.currentType!==14&&E.currentType!==1);const S=E.currentType===1?E.lastOffset:k.currentOffset(),I=E.currentType===1?E.lastEndLoc:k.currentPosition();return a(p,S,I),p}function _(k,E,A,x){const p=k.context();let D=x.items.length===0;const R=o(1,E,A);R.cases=[],R.cases.push(x);do{const S=v(k);D||(D=S.items.length===0),R.cases.push(S)}while(p.currentType!==14);return D&&r(k,qt.MUST_HAVE_MESSAGES_IN_PLURAL,A,0),a(R,k.currentOffset(),k.currentPosition()),R}function w(k){const E=k.context(),{offset:A,startLoc:x}=E,p=v(k);return E.currentType===14?p:_(k,A,x,p)}function C(k){const E=TX(k,Eu({},n)),A=E.context(),x=o(0,A.offset,A.startLoc);return t&&x.loc&&(x.loc.source=k),x.body=w(E),n.onCacheKey&&(x.cacheKey=n.onCacheKey(k)),A.currentType!==14&&r(E,qt.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,k[A.offset]||""),a(x,E.currentOffset(),E.currentPosition()),x}return{parse:C}}function Xo(n){if(n.type===14)return"EOF";const t=(n.value||"").replace(/\r?\n/gu,"\\n");return t.length>10?t.slice(0,9)+"…":t}function xX(n,t={}){const e={ast:n,helpers:new Set};return{context:()=>e,helper:s=>(e.helpers.add(s),s)}}function $2(n,t){for(let e=0;e<n.length;e++)UA(n[e],t)}function UA(n,t){switch(n.type){case 1:$2(n.cases,t),t.helper("plural");break;case 2:$2(n.items,t);break;case 6:{UA(n.key,t),t.helper("linked"),t.helper("type");break}case 5:t.helper("interpolate"),t.helper("list");break;case 4:t.helper("interpolate"),t.helper("named");break}}function OX(n,t={}){const e=xX(n);e.helper("normalize"),n.body&&UA(n.body,e);const i=e.context();n.helpers=Array.from(i.helpers)}function RX(n){const t=n.body;return t.type===2?B2(t):t.cases.forEach(e=>B2(e)),n}function B2(n){if(n.items.length===1){const t=n.items[0];(t.type===3||t.type===9)&&(n.static=t.value,delete t.value)}else{const t=[];for(let e=0;e<n.items.length;e++){const i=n.items[e];if(!(i.type===3||i.type===9)||i.value==null)break;t.push(i.value)}if(t.length===n.items.length){n.static=FA(t);for(let e=0;e<n.items.length;e++){const i=n.items[e];(i.type===3||i.type===9)&&delete i.value}}}}const VX="minifier";function Mf(n){switch(n.t=n.type,n.type){case 0:{const t=n;Mf(t.body),t.b=t.body,delete t.body;break}case 1:{const t=n,e=t.cases;for(let i=0;i<e.length;i++)Mf(e[i]);t.c=e,delete t.cases;break}case 2:{const t=n,e=t.items;for(let i=0;i<e.length;i++)Mf(e[i]);t.i=e,delete t.items,t.static&&(t.s=t.static,delete t.static);break}case 3:case 9:case 8:case 7:{const t=n;t.value&&(t.v=t.value,delete t.value);break}case 6:{const t=n;Mf(t.key),t.k=t.key,delete t.key,t.modifier&&(Mf(t.modifier),t.m=t.modifier,delete t.modifier);break}case 5:{const t=n;t.i=t.index,delete t.index;break}case 4:{const t=n;t.k=t.key,delete t.key;break}default:throw Sm(qt.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:VX,args:[n.type]})}delete n.type}const DX="parser";function NX(n,t){const{filename:e,breakLineCode:i,needIndent:r}=t,s=t.location!==!1,o={filename:e,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:i,needIndent:r,indentLevel:0};s&&n.loc&&(o.source=n.loc.source);const a=()=>o;function l(v,_){o.code+=v}function c(v,_=!0){const w=_?i:"";l(r?w+"  ".repeat(v):w)}function u(v=!0){const _=++o.indentLevel;v&&c(_)}function d(v=!0){const _=--o.indentLevel;v&&c(_)}function f(){c(o.indentLevel)}return{context:a,push:l,indent:u,deindent:d,newline:f,helper:v=>`_${v}`,needIndent:()=>o.needIndent}}function LX(n,t){const{helper:e}=n;n.push(`${e("linked")}(`),Uh(n,t.key),t.modifier?(n.push(", "),Uh(n,t.modifier),n.push(", _type")):n.push(", undefined, _type"),n.push(")")}function MX(n,t){const{helper:e,needIndent:i}=n;n.push(`${e("normalize")}([`),n.indent(i());const r=t.items.length;for(let s=0;s<r&&(Uh(n,t.items[s]),s!==r-1);s++)n.push(", ");n.deindent(i()),n.push("])")}function $X(n,t){const{helper:e,needIndent:i}=n;if(t.cases.length>1){n.push(`${e("plural")}([`),n.indent(i());const r=t.cases.length;for(let s=0;s<r&&(Uh(n,t.cases[s]),s!==r-1);s++)n.push(", ");n.deindent(i()),n.push("])")}}function BX(n,t){t.body?Uh(n,t.body):n.push("null")}function Uh(n,t){const{helper:e}=n;switch(t.type){case 0:BX(n,t);break;case 1:$X(n,t);break;case 2:MX(n,t);break;case 6:LX(n,t);break;case 8:n.push(JSON.stringify(t.value),t);break;case 7:n.push(JSON.stringify(t.value),t);break;case 5:n.push(`${e("interpolate")}(${e("list")}(${t.index}))`,t);break;case 4:n.push(`${e("interpolate")}(${e("named")}(${JSON.stringify(t.key)}))`,t);break;case 9:n.push(JSON.stringify(t.value),t);break;case 3:n.push(JSON.stringify(t.value),t);break;default:throw Sm(qt.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:DX,args:[t.type]})}}const FX=(n,t={})=>{const e=tn(t.mode)?t.mode:"normal",i=tn(t.filename)?t.filename:"message.intl";t.sourceMap;const r=t.breakLineCode!=null?t.breakLineCode:e==="arrow"?";":`
`,s=t.needIndent?t.needIndent:e!=="arrow",o=n.helpers||[],a=NX(n,{filename:i,breakLineCode:r,needIndent:s});a.push(e==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),a.indent(s),o.length>0&&(a.push(`const { ${FA(o.map(u=>`${u}: _${u}`),", ")} } = ctx`),a.newline()),a.push("return "),Uh(a,n),a.deindent(s),a.push("}"),delete n.helpers;const{code:l,map:c}=a.context();return{ast:n,code:l,map:c?c.toJSON():void 0}};function UX(n,t={}){const e=Eu({},t),i=!!e.jit,r=!!e.minify,s=e.optimize==null?!0:e.optimize,a=PX(e).parse(n);return i?(s&&RX(a),r&&Mf(a),{ast:a,code:""}):(OX(a,e),FX(a,e))}function du(n){return gr(n)&&zA(n)===0&&(sd(n,"b")||sd(n,"body"))}const rF=["b","body"];function zX(n){return Cu(n,rF)}const sF=["c","cases"];function HX(n){return Cu(n,sF,[])}const oF=["s","static"];function WX(n){return Cu(n,oF)}const aF=["i","items"];function jX(n){return Cu(n,aF,[])}const lF=["t","type"];function zA(n){return Cu(n,lF)}const cF=["v","value"];function fb(n,t){const e=Cu(n,cF);if(e!=null)return e;throw Mp(t)}const uF=["m","modifier"];function qX(n){return Cu(n,uF)}const dF=["k","key"];function GX(n){const t=Cu(n,dF);if(t)return t;throw Mp(6)}function Cu(n,t,e){for(let i=0;i<t.length;i++){const r=t[i];if(sd(n,r)&&n[r]!=null)return n[r]}return e}const fF=[...rF,...sF,...oF,...aF,...dF,...uF,...cF,...lF];function Mp(n){return new Error(`unhandled node type: ${n}`)}const Tu=[];Tu[0]={w:[0],i:[3,0],"[":[4],o:[7]};Tu[1]={w:[1],".":[2],"[":[4],o:[7]};Tu[2]={w:[2],i:[3,0],0:[3,0]};Tu[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};Tu[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};Tu[5]={"'":[4,0],o:8,l:[5,0]};Tu[6]={'"':[4,0],o:8,l:[6,0]};const KX=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function YX(n){return KX.test(n)}function QX(n){const t=n.charCodeAt(0),e=n.charCodeAt(n.length-1);return t===e&&(t===34||t===39)?n.slice(1,-1):n}function ZX(n){if(n==null)return"o";switch(n.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return n;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function JX(n){const t=n.trim();return n.charAt(0)==="0"&&isNaN(parseInt(n))?!1:YX(t)?QX(t):"*"+t}function hF(n){const t=[];let e=-1,i=0,r=0,s,o,a,l,c,u,d;const f=[];f[0]=()=>{o===void 0?o=a:o+=a},f[1]=()=>{o!==void 0&&(t.push(o),o=void 0)},f[2]=()=>{f[0](),r++},f[3]=()=>{if(r>0)r--,i=4,f[0]();else{if(r=0,o===void 0||(o=JX(o),o===!1))return!1;f[1]()}};function h(){const g=n[e+1];if(i===5&&g==="'"||i===6&&g==='"')return e++,a="\\"+g,f[0](),!0}for(;i!==null;)if(e++,s=n[e],!(s==="\\"&&h())){if(l=ZX(s),d=Tu[i],c=d[l]||d.l||8,c===8||(i=c[0],c[1]!==void 0&&(u=f[c[1]],u&&(a=s,u()===!1))))return;if(i===7)return t}}const F2=new Map;function mF(n,t){return gr(n)?n[t]:null}function XX(n,t){if(!gr(n))return null;let e=F2.get(t);if(e||(e=hF(t),e&&F2.set(t,e)),!e)return null;const i=e.length;let r=n,s=0;for(;s<i;){const o=e[s];if(fF.includes(o)&&du(r))return null;const a=r[o];if(a===void 0||hr(r))return null;r=a,s++}return r}const eee=n=>n,tee=n=>"",gF="text",nee=n=>n.length===0?"":FA(n),iee=uX;function U2(n,t){return n=Math.abs(n),t===2?n?n>1?1:0:1:n?Math.min(n,2):0}function ree(n){const t=ks(n.pluralIndex)?n.pluralIndex:-1;return n.named&&(ks(n.named.count)||ks(n.named.n))?ks(n.named.count)?n.named.count:ks(n.named.n)?n.named.n:t:t}function see(n,t){t.count||(t.count=n),t.n||(t.n=n)}function pF(n={}){const t=n.locale,e=ree(n),i=gr(n.pluralRules)&&tn(t)&&hr(n.pluralRules[t])?n.pluralRules[t]:U2,r=gr(n.pluralRules)&&tn(t)&&hr(n.pluralRules[t])?U2:void 0,s=w=>w[i(e,w.length,r)],o=n.list||[],a=w=>o[w],l=n.named||Os();ks(n.pluralIndex)&&see(e,l);const c=w=>l[w];function u(w){const C=hr(n.messages)?n.messages(w):gr(n.messages)?n.messages[w]:!1;return C||(n.parent?n.parent.message(w):tee)}const d=w=>n.modifiers?n.modifiers[w]:eee,f=Vi(n.processor)&&hr(n.processor.normalize)?n.processor.normalize:nee,h=Vi(n.processor)&&hr(n.processor.interpolate)?n.processor.interpolate:iee,g=Vi(n.processor)&&tn(n.processor.type)?n.processor.type:gF,_={list:a,named:c,plural:s,linked:(w,...C)=>{const[k,E]=C;let A="text",x="";C.length===1?gr(k)?(x=k.modifier||x,A=k.type||A):tn(k)&&(x=k||x):C.length===2&&(tn(k)&&(x=k||x),tn(E)&&(A=E||A));const p=u(w)(_),D=A==="vnode"&&Za(p)&&x?p[0]:p;return x?d(x)(D,A):D},message:u,type:g,interpolate:h,normalize:f,values:Eu(Os(),o,l)};return _}let zh=null;function oee(n){zh=n}function aee(){return zh}function vF(n,t,e){zh&&zh.emit("i18n:init",{timestamp:Date.now(),i18n:n,version:t,meta:e})}const bF=lee("function:translate");function lee(n){return t=>zh&&zh.emit(n,t)}const wF=J_.__EXTEND_POINT__,zu=iF(wF),bs={NOT_FOUND_KEY:wF,FALLBACK_TO_TRANSLATE:zu(),CANNOT_FORMAT_NUMBER:zu(),FALLBACK_TO_NUMBER_FORMAT:zu(),CANNOT_FORMAT_DATE:zu(),FALLBACK_TO_DATE_FORMAT:zu(),EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:zu(),__EXTEND_POINT__:zu()},cee={[bs.NOT_FOUND_KEY]:"Not found '{key}' key in '{locale}' locale messages.",[bs.FALLBACK_TO_TRANSLATE]:"Fall back to translate '{key}' key with '{target}' locale.",[bs.CANNOT_FORMAT_NUMBER]:"Cannot format a number value due to not supported Intl.NumberFormat.",[bs.FALLBACK_TO_NUMBER_FORMAT]:"Fall back to number format '{key}' key with '{target}' locale.",[bs.CANNOT_FORMAT_DATE]:"Cannot format a date value due to not supported Intl.DateTimeFormat.",[bs.FALLBACK_TO_DATE_FORMAT]:"Fall back to datetime format '{key}' key with '{target}' locale.",[bs.EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER]:"This project is using Custom Message Compiler, which is an experimental feature. It may receive breaking changes or be removed in the future."};function fu(n,...t){return Z_(cee[n],...t)}const yF=qt.__EXTEND_POINT__,Hu=iF(yF),Er={INVALID_ARGUMENT:yF,INVALID_DATE_ARGUMENT:Hu(),INVALID_ISO_DATE_ARGUMENT:Hu(),NOT_SUPPORT_NON_STRING_MESSAGE:Hu(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:Hu(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:Hu(),NOT_SUPPORT_LOCALE_TYPE:Hu(),__EXTEND_POINT__:Hu()};function ua(n){return Sm(n,null,{messages:uee})}const uee={[Er.INVALID_ARGUMENT]:"Invalid arguments",[Er.INVALID_DATE_ARGUMENT]:"The date provided is an invalid Date object.Make sure your Date represents a valid date.",[Er.INVALID_ISO_DATE_ARGUMENT]:"The argument provided is not a valid ISO date string",[Er.NOT_SUPPORT_NON_STRING_MESSAGE]:"Not support non-string message",[Er.NOT_SUPPORT_LOCALE_PROMISE_VALUE]:"cannot support promise value",[Er.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION]:"cannot support async function",[Er.NOT_SUPPORT_LOCALE_TYPE]:"cannot support locale type"};function X_(n,t){return t.locale!=null?NC(t.locale):NC(n.locale)}let ek;function NC(n){if(tn(n))return n;if(hr(n)){if(n.resolvedOnce&&ek!=null)return ek;if(n.constructor.name==="Function"){const t=n();if(cX(t))throw ua(Er.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return ek=t}else throw ua(Er.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw ua(Er.NOT_SUPPORT_LOCALE_TYPE)}function _F(n,t,e){return[...new Set([e,...Za(t)?t:gr(t)?Object.keys(t):tn(t)?[t]:[e]])]}function dee(n,t,e){const i=tn(e)?e:ay,r=n;r.__localeChainCache||(r.__localeChainCache=new Map);let s=r.__localeChainCache.get(i);if(!s){s=[];let o=[e];for(;Za(o);)o=z2(s,o,t);const a=Za(t)||!Vi(t)?t:t.default?t.default:null;o=tn(a)?[a]:a,Za(o)&&z2(s,o,!1),r.__localeChainCache.set(i,s)}return s}function z2(n,t,e){let i=!0;for(let r=0;r<t.length&&Es(i);r++){const s=t[r];tn(s)&&(i=fee(n,t[r],e))}return i}function fee(n,t,e){let i;const r=t.split("-");do{const s=r.join("-");i=hee(n,s,e),r.splice(-1,1)}while(r.length&&i===!0);return i}function hee(n,t,e){let i=!1;if(!n.includes(t)&&(i=!0,t)){i=t[t.length-1]!=="!";const r=t.replace(/!/g,"");n.push(r),(Za(e)||Vi(e))&&e[r]&&(i=e[r])}return i}const kF="9.14.5",e0=-1,ay="en-US",HA="",H2=n=>`${n.charAt(0).toLocaleUpperCase()}${n.substr(1)}`;function mee(){return{upper:(n,t)=>t==="text"&&tn(n)?n.toUpperCase():t==="vnode"&&gr(n)&&"__v_isVNode"in n?n.children.toUpperCase():n,lower:(n,t)=>t==="text"&&tn(n)?n.toLowerCase():t==="vnode"&&gr(n)&&"__v_isVNode"in n?n.children.toLowerCase():n,capitalize:(n,t)=>t==="text"&&tn(n)?H2(n):t==="vnode"&&gr(n)&&"__v_isVNode"in n?H2(n.children):n}}let EF;function gee(n){EF=n}let CF;function pee(n){CF=n}let TF;function vee(n){TF=n}let SF=null;const bee=n=>{SF=n},AF=()=>SF;let IF=null;const wee=n=>{IF=n},yee=()=>IF;let W2=0;function _ee(n={}){const t=hr(n.onWarn)?n.onWarn:Gd,e=tn(n.version)?n.version:kF,i=tn(n.locale)||hr(n.locale)?n.locale:ay,r=hr(i)?ay:i,s=Za(n.fallbackLocale)||Vi(n.fallbackLocale)||tn(n.fallbackLocale)||n.fallbackLocale===!1?n.fallbackLocale:r,o=Vi(n.messages)?n.messages:tk(r),a=Vi(n.datetimeFormats)?n.datetimeFormats:tk(r),l=Vi(n.numberFormats)?n.numberFormats:tk(r),c=Eu(Os(),n.modifiers,mee()),u=n.pluralRules||Os(),d=hr(n.missing)?n.missing:null,f=Es(n.missingWarn)||V2(n.missingWarn)?n.missingWarn:!0,h=Es(n.fallbackWarn)||V2(n.fallbackWarn)?n.fallbackWarn:!0,g=!!n.fallbackFormat,v=!!n.unresolving,_=hr(n.postTranslation)?n.postTranslation:null,w=Vi(n.processor)?n.processor:null,C=Es(n.warnHtmlMessage)?n.warnHtmlMessage:!0,k=!!n.escapeParameter,E=hr(n.messageCompiler)?n.messageCompiler:EF;hr(n.messageCompiler)&&tX(fu(bs.EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER));const A=hr(n.messageResolver)?n.messageResolver:CF||mF,x=hr(n.localeFallbacker)?n.localeFallbacker:TF||_F,p=gr(n.fallbackContext)?n.fallbackContext:void 0,D=n,R=gr(D.__datetimeFormatters)?D.__datetimeFormatters:new Map,S=gr(D.__numberFormatters)?D.__numberFormatters:new Map,I=gr(D.__meta)?D.__meta:{};W2++;const F={version:e,cid:W2,locale:i,fallbackLocale:s,messages:o,modifiers:c,pluralRules:u,missing:d,missingWarn:f,fallbackWarn:h,fallbackFormat:g,unresolving:v,postTranslation:_,processor:w,warnHtmlMessage:C,escapeParameter:k,messageCompiler:E,messageResolver:A,localeFallbacker:x,fallbackContext:p,onWarn:t,__meta:I};return F.datetimeFormats=a,F.numberFormats=l,F.__datetimeFormatters=R,F.__numberFormatters=S,F.__v_emitter=D.__v_emitter!=null?D.__v_emitter:void 0,vF(F,e,I),F}const tk=n=>({[n]:Os()});function t0(n,t){return n instanceof RegExp?n.test(t):n}function PF(n,t){return n instanceof RegExp?n.test(t):n}function n0(n,t,e,i,r){const{missing:s,onWarn:o}=n;{const a=n.__v_emitter;a&&a.emit("missing",{locale:e,key:t,type:r,groupId:`${r}:${t}`})}if(s!==null){const a=s(n,e,t,r);return tn(a)?a:t}else return PF(i,t)&&o(fu(bs.NOT_FOUND_KEY,{key:t,locale:e})),t}function kee(n,t,e){const i=n;i.__localeChainCache=new Map,n.localeFallbacker(n,e,t)}function WA(n,t){return n===t?!1:n.split("-")[0]===t.split("-")[0]}function xF(n,t){const e=t.indexOf(n);if(e===-1)return!1;for(let i=e+1;i<t.length;i++)if(WA(n,t[i]))return!0;return!1}function nk(n){return e=>Eee(e,n)}function Eee(n,t){const e=zX(t);if(e==null)throw Mp(0);if(zA(e)===1){const s=HX(e);return n.plural(s.reduce((o,a)=>[...o,j2(n,a)],[]))}else return j2(n,e)}function j2(n,t){const e=WX(t);if(e!=null)return n.type==="text"?e:n.normalize([e]);{const i=jX(t).reduce((r,s)=>[...r,LC(n,s)],[]);return n.normalize(i)}}function LC(n,t){const e=zA(t);switch(e){case 3:return fb(t,e);case 9:return fb(t,e);case 4:{const i=t;if(sd(i,"k")&&i.k)return n.interpolate(n.named(i.k));if(sd(i,"key")&&i.key)return n.interpolate(n.named(i.key));throw Mp(e)}case 5:{const i=t;if(sd(i,"i")&&ks(i.i))return n.interpolate(n.list(i.i));if(sd(i,"index")&&ks(i.index))return n.interpolate(n.list(i.index));throw Mp(e)}case 6:{const i=t,r=qX(i),s=GX(i);return n.linked(LC(n,s),r?LC(n,r):void 0,n.type)}case 7:return fb(t,e);case 8:return fb(t,e);default:throw new Error(`unhandled node on format message part: ${e}`)}}const Cee="Detected HTML in '{source}' message. Recommend not using HTML messages to avoid XSS.";function OF(n,t){t&&bX(n)&&Gd(Z_(Cee,{source:n}))}const RF=n=>n;let od=Os();function VF(n){n.code===J_.USE_MODULO_SYNTAX&&Gd(`The use of named interpolation with modulo syntax is deprecated. It will be removed in v10.
reference: https://vue-i18n.intlify.dev/guide/essentials/syntax#rails-i18n-format 
(message compiler warning message: ${n.message})`)}function Tee(){od=Os()}function DF(n,t={}){let e=!1;const i=t.onError||pX;return t.onError=r=>{e=!0,i(r)},{...UX(n,t),detectError:e}}const See=(n,t)=>{if(!tn(n))throw ua(Er.NOT_SUPPORT_NON_STRING_MESSAGE);t.onWarn=VF;{const e=Es(t.warnHtmlMessage)?t.warnHtmlMessage:!0;OF(n,e);const r=(t.onCacheKey||RF)(n),s=od[r];if(s)return s;const{code:o,detectError:a}=DF(n,t),l=new Function(`return ${o}`)();return a?l:od[r]=l}};function Aee(n,t){if(t.onWarn=VF,tn(n)){const e=Es(t.warnHtmlMessage)?t.warnHtmlMessage:!0;OF(n,e);const r=(t.onCacheKey||RF)(n),s=od[r];if(s)return s;const{ast:o,detectError:a}=DF(n,{...t,location:!0,jit:!0}),l=nk(o);return a?l:od[r]=l}else{if(!du(n))return Gd(`the message that is resolve with key '${t.key}' is not supported for jit compilation`),()=>n;const e=n.cacheKey;if(e){const i=od[e];return i||(od[e]=nk(n))}else return nk(n)}}const q2=()=>"",Oo=n=>hr(n);function Iee(n,...t){const{fallbackFormat:e,postTranslation:i,unresolving:r,messageCompiler:s,fallbackLocale:o,messages:a}=n,[l,c]=MF(...t),u=Es(c.missingWarn)?c.missingWarn:n.missingWarn,d=Es(c.fallbackWarn)?c.fallbackWarn:n.fallbackWarn,f=Es(c.escapeParameter)?c.escapeParameter:n.escapeParameter,h=!!c.resolvedMessage,g=tn(c.default)||Es(c.default)?Es(c.default)?s?l:()=>l:c.default:e?s?l:()=>l:"",v=e||g!=="",_=X_(n,c);f&&Pee(c);let[w,C,k]=h?[l,_,a[_]||Os()]:NF(n,l,_,o,d,u),E=w,A=l;if(!h&&!(tn(E)||du(E)||Oo(E))&&v&&(E=g,A=E),!h&&(!(tn(E)||du(E)||Oo(E))||!tn(C)))return r?e0:l;if(tn(E)&&n.messageCompiler==null)return Gd(`The message format compilation is not supported in this build. Because message compiler isn't included. You need to pre-compilation all message format. So translate function return '${l}'.`),l;let x=!1;const p=()=>{x=!0},D=Oo(E)?E:LF(n,l,C,E,A,p);if(x)return E;const R=Vee(n,C,k,c),S=pF(R),I=xee(n,D,S);let F=i?i(I,l):I;f&&tn(F)&&(F=aX(F));{const H={timestamp:Date.now(),key:tn(l)?l:Oo(E)?E.key:"",locale:C||(Oo(E)?E.locale:""),format:tn(E)?E:Oo(E)?E.source:"",message:F};H.meta=Eu({},n.__meta,AF()||{}),bF(H)}return F}function Pee(n){Za(n.list)?n.list=n.list.map(t=>tn(t)?D2(t):t):gr(n.named)&&Object.keys(n.named).forEach(t=>{tn(n.named[t])&&(n.named[t]=D2(n.named[t]))})}function NF(n,t,e,i,r,s){const{messages:o,onWarn:a,messageResolver:l,localeFallbacker:c}=n,u=c(n,i,e);let d=Os(),f,h=null,g=e,v=null;const _="translate";for(let w=0;w<u.length;w++){if(f=v=u[w],e!==f&&!WA(e,f)&&t0(r,t)&&a(fu(bs.FALLBACK_TO_TRANSLATE,{key:t,target:f})),e!==f){const A=n.__v_emitter;A&&A.emit("fallback",{type:_,key:t,from:g,to:v,groupId:`${_}:${t}`})}d=o[f]||Os();let C=null,k,E;if(Id&&(C=window.performance.now(),k="intlify-message-resolve-start",E="intlify-message-resolve-end",no&&no(k)),(h=l(d,t))===null&&(h=d[t]),Id){const A=window.performance.now(),x=n.__v_emitter;x&&C&&h&&x.emit("message-resolve",{type:"message-resolve",key:t,message:h,time:A-C,groupId:`${_}:${t}`}),k&&E&&no&&Pd&&(no(E),Pd("intlify message resolve",k,E))}if(tn(h)||du(h)||Oo(h))break;if(!xF(f,u)){const A=n0(n,t,f,s,_);A!==t&&(h=A)}g=v}return[h,f,d]}function LF(n,t,e,i,r,s){const{messageCompiler:o,warnHtmlMessage:a}=n;if(Oo(i)){const f=i;return f.locale=f.locale||e,f.key=f.key||t,f}if(o==null){const f=()=>i;return f.locale=e,f.key=t,f}let l=null,c,u;Id&&(l=window.performance.now(),c="intlify-message-compilation-start",u="intlify-message-compilation-end",no&&no(c));const d=o(i,Oee(n,e,r,i,a,s));if(Id){const f=window.performance.now(),h=n.__v_emitter;h&&l&&h.emit("message-compilation",{type:"message-compilation",message:i,time:f-l,groupId:`translate:${t}`}),c&&u&&no&&Pd&&(no(u),Pd("intlify message compilation",c,u))}return d.locale=e,d.key=t,d.source=i,d}function xee(n,t,e){let i=null,r,s;Id&&(i=window.performance.now(),r="intlify-message-evaluation-start",s="intlify-message-evaluation-end",no&&no(r));const o=t(e);if(Id){const a=window.performance.now(),l=n.__v_emitter;l&&i&&l.emit("message-evaluation",{type:"message-evaluation",value:o,time:a-i,groupId:`translate:${t.key}`}),r&&s&&no&&Pd&&(no(s),Pd("intlify message evaluation",r,s))}return o}function MF(...n){const[t,e,i]=n,r=Os();if(!tn(t)&&!ks(t)&&!Oo(t)&&!du(t))throw ua(Er.INVALID_ARGUMENT);const s=ks(t)?String(t):(Oo(t),t);return ks(e)?r.plural=e:tn(e)?r.default=e:Vi(e)&&!BA(e)?r.named=e:Za(e)&&(r.list=e),ks(i)?r.plural=i:tn(i)?r.default=i:Vi(i)&&Eu(r,i),[s,r]}function Oee(n,t,e,i,r,s){return{locale:t,key:e,warnHtmlMessage:r,onError:o=>{s&&s(o);{const a=Ree(i),l=`Message compilation error: ${o.message}`,c=o.location&&a&&dX(a,o.location.start.offset,o.location.end.offset),u=n.__v_emitter;u&&a&&u.emit("compile-error",{message:a,error:o.message,start:o.location&&o.location.start.offset,end:o.location&&o.location.end.offset,groupId:`translate:${e}`}),console.error(c?`${l}
${c}`:l)}},onCacheKey:o=>iX(t,e,o)}}function Ree(n){if(tn(n))return n;if(n.loc&&n.loc.source)return n.loc.source}function Vee(n,t,e,i){const{modifiers:r,pluralRules:s,messageResolver:o,fallbackLocale:a,fallbackWarn:l,missingWarn:c,fallbackContext:u}=n,f={locale:t,modifiers:r,pluralRules:s,messages:h=>{let g=o(e,h);if(g==null&&u){const[,,v]=NF(u,h,t,a,l,c);g=o(v,h)}if(tn(g)||du(g)){let v=!1;const w=LF(n,h,t,g,h,()=>{v=!0});return v?q2:w}else return Oo(g)?g:q2}};return n.processor&&(f.processor=n.processor),i.list&&(f.list=i.list),i.named&&(f.named=i.named),ks(i.plural)&&(f.pluralIndex=i.plural),f}const G2=typeof Intl<"u",$F={dateTimeFormat:G2&&typeof Intl.DateTimeFormat<"u",numberFormat:G2&&typeof Intl.NumberFormat<"u"};function Dee(n,...t){const{datetimeFormats:e,unresolving:i,fallbackLocale:r,onWarn:s,localeFallbacker:o}=n,{__datetimeFormatters:a}=n;if(!$F.dateTimeFormat)return s(fu(bs.CANNOT_FORMAT_DATE)),HA;const[l,c,u,d]=FF(...t),f=Es(u.missingWarn)?u.missingWarn:n.missingWarn,h=Es(u.fallbackWarn)?u.fallbackWarn:n.fallbackWarn,g=!!u.part,v=X_(n,u),_=o(n,r,v);if(!tn(l)||l==="")return new Intl.DateTimeFormat(v,d).format(c);let w={},C,k=null,E=v,A=null;const x="datetime format";for(let R=0;R<_.length;R++){if(C=A=_[R],v!==C&&t0(h,l)&&s(fu(bs.FALLBACK_TO_DATE_FORMAT,{key:l,target:C})),v!==C){const S=n.__v_emitter;S&&S.emit("fallback",{type:x,key:l,from:E,to:A,groupId:`${x}:${l}`})}if(w=e[C]||{},k=w[l],Vi(k))break;n0(n,l,C,f,x),E=A}if(!Vi(k)||!tn(C))return i?e0:l;let p=`${C}__${l}`;BA(d)||(p=`${p}__${JSON.stringify(d)}`);let D=a.get(p);return D||(D=new Intl.DateTimeFormat(C,Eu({},k,d)),a.set(p,D)),g?D.formatToParts(c):D.format(c)}const BF=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function FF(...n){const[t,e,i,r]=n,s=Os();let o=Os(),a;if(tn(t)){const l=t.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw ua(Er.INVALID_ISO_DATE_ARGUMENT);const c=l[3]?l[3].trim().startsWith("T")?`${l[1].trim()}${l[3].trim()}`:`${l[1].trim()}T${l[3].trim()}`:l[1].trim();a=new Date(c);try{a.toISOString()}catch{throw ua(Er.INVALID_ISO_DATE_ARGUMENT)}}else if(sX(t)){if(isNaN(t.getTime()))throw ua(Er.INVALID_DATE_ARGUMENT);a=t}else if(ks(t))a=t;else throw ua(Er.INVALID_ARGUMENT);return tn(e)?s.key=e:Vi(e)&&Object.keys(e).forEach(l=>{BF.includes(l)?o[l]=e[l]:s[l]=e[l]}),tn(i)?s.locale=i:Vi(i)&&(o=i),Vi(r)&&(o=r),[s.key||"",a,s,o]}function Nee(n,t,e){const i=n;for(const r in e){const s=`${t}__${r}`;i.__datetimeFormatters.has(s)&&i.__datetimeFormatters.delete(s)}}function Lee(n,...t){const{numberFormats:e,unresolving:i,fallbackLocale:r,onWarn:s,localeFallbacker:o}=n,{__numberFormatters:a}=n;if(!$F.numberFormat)return s(fu(bs.CANNOT_FORMAT_NUMBER)),HA;const[l,c,u,d]=zF(...t),f=Es(u.missingWarn)?u.missingWarn:n.missingWarn,h=Es(u.fallbackWarn)?u.fallbackWarn:n.fallbackWarn,g=!!u.part,v=X_(n,u),_=o(n,r,v);if(!tn(l)||l==="")return new Intl.NumberFormat(v,d).format(c);let w={},C,k=null,E=v,A=null;const x="number format";for(let R=0;R<_.length;R++){if(C=A=_[R],v!==C&&t0(h,l)&&s(fu(bs.FALLBACK_TO_NUMBER_FORMAT,{key:l,target:C})),v!==C){const S=n.__v_emitter;S&&S.emit("fallback",{type:x,key:l,from:E,to:A,groupId:`${x}:${l}`})}if(w=e[C]||{},k=w[l],Vi(k))break;n0(n,l,C,f,x),E=A}if(!Vi(k)||!tn(C))return i?e0:l;let p=`${C}__${l}`;BA(d)||(p=`${p}__${JSON.stringify(d)}`);let D=a.get(p);return D||(D=new Intl.NumberFormat(C,Eu({},k,d)),a.set(p,D)),g?D.formatToParts(c):D.format(c)}const UF=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function zF(...n){const[t,e,i,r]=n,s=Os();let o=Os();if(!ks(t))throw ua(Er.INVALID_ARGUMENT);const a=t;return tn(e)?s.key=e:Vi(e)&&Object.keys(e).forEach(l=>{UF.includes(l)?o[l]=e[l]:s[l]=e[l]}),tn(i)?s.locale=i:Vi(i)&&(o=i),Vi(r)&&(o=r),[s.key||"",a,s,o]}function Mee(n,t,e){const i=n;for(const r in e){const s=`${t}__${r}`;i.__numberFormatters.has(s)&&i.__numberFormatters.delete(s)}}const $ee=Object.freeze(Object.defineProperty({__proto__:null,AST_NODE_PROPS_KEYS:fF,CompileErrorCodes:qt,CoreErrorCodes:Er,CoreWarnCodes:bs,DATETIME_FORMAT_OPTIONS_KEYS:BF,DEFAULT_LOCALE:ay,DEFAULT_MESSAGE_DATA_TYPE:gF,MISSING_RESOLVE_VALUE:HA,NOT_REOSLVED:e0,NUMBER_FORMAT_OPTIONS_KEYS:UF,VERSION:kF,clearCompileCache:Tee,clearDateTimeFormat:Nee,clearNumberFormat:Mee,compile:Aee,compileToFunction:See,createCompileError:Sm,createCoreContext:_ee,createCoreError:ua,createMessageContext:pF,datetime:Dee,fallbackWithLocaleChain:dee,fallbackWithSimple:_F,getAdditionalMeta:AF,getDevToolsHook:aee,getFallbackContext:yee,getLocale:X_,getWarnMessage:fu,handleMissing:n0,initI18nDevTools:vF,isAlmostSameLocale:WA,isImplicitFallback:xF,isMessageAST:du,isMessageFunction:Oo,isTranslateFallbackWarn:t0,isTranslateMissingWarn:PF,number:Lee,parse:hF,parseDateTimeArgs:FF,parseNumberArgs:zF,parseTranslateArgs:MF,registerLocaleFallbacker:vee,registerMessageCompiler:gee,registerMessageResolver:pee,resolveLocale:NC,resolveValue:XX,resolveWithKeyValue:mF,setAdditionalMeta:bee,setDevToolsHook:oee,setFallbackContext:wee,translate:Iee,translateDevTools:bF,updateFallbackLocale:kee},Symbol.toStringTag,{value:"Module"})),Bee=RA($ee),Fee=RA(RK);/*!
  * vue-i18n v9.14.5
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */var Ve=eX,zt=Bee,dn=Fee;const HF="9.14.5",WF=zt.CoreWarnCodes.__EXTEND_POINT__,Sl=Ve.incrementer(WF),Pi={FALLBACK_TO_ROOT:WF,NOT_SUPPORTED_PRESERVE:Sl(),NOT_SUPPORTED_FORMATTER:Sl(),NOT_SUPPORTED_PRESERVE_DIRECTIVE:Sl(),NOT_SUPPORTED_GET_CHOICE_INDEX:Sl(),COMPONENT_NAME_LEGACY_COMPATIBLE:Sl(),NOT_FOUND_PARENT_SCOPE:Sl(),IGNORE_OBJ_FLATTEN:Sl(),NOTICE_DROP_ALLOW_COMPOSITION:Sl(),NOTICE_DROP_TRANSLATE_EXIST_COMPATIBLE_FLAG:Sl()},Uee={[Pi.FALLBACK_TO_ROOT]:"Fall back to {type} '{key}' with root locale.",[Pi.NOT_SUPPORTED_PRESERVE]:"Not supported 'preserve'.",[Pi.NOT_SUPPORTED_FORMATTER]:"Not supported 'formatter'.",[Pi.NOT_SUPPORTED_PRESERVE_DIRECTIVE]:"Not supported 'preserveDirectiveContent'.",[Pi.NOT_SUPPORTED_GET_CHOICE_INDEX]:"Not supported 'getChoiceIndex'.",[Pi.COMPONENT_NAME_LEGACY_COMPATIBLE]:"Component name legacy compatible: '{name}' -> 'i18n'",[Pi.NOT_FOUND_PARENT_SCOPE]:"Not found parent scope. use the global scope.",[Pi.IGNORE_OBJ_FLATTEN]:"Ignore object flatten: '{key}' key has an string value",[Pi.NOTICE_DROP_ALLOW_COMPOSITION]:"'allowComposition' option will be dropped in the next major version. For more information, please see 👉 https://tinyurl.com/2p97mcze",[Pi.NOTICE_DROP_TRANSLATE_EXIST_COMPATIBLE_FLAG]:"'translateExistCompatible' option will be dropped in the next major version."};function Hs(n,...t){return Ve.format(Uee[n],...t)}const jF=zt.CoreErrorCodes.__EXTEND_POINT__,Ms=Ve.incrementer(jF),Rn={UNEXPECTED_RETURN_TYPE:jF,INVALID_ARGUMENT:Ms(),MUST_BE_CALL_SETUP_TOP:Ms(),NOT_INSTALLED:Ms(),NOT_AVAILABLE_IN_LEGACY_MODE:Ms(),REQUIRED_VALUE:Ms(),INVALID_VALUE:Ms(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:Ms(),NOT_INSTALLED_WITH_PROVIDE:Ms(),UNEXPECTED_ERROR:Ms(),NOT_COMPATIBLE_LEGACY_VUE_I18N:Ms(),BRIDGE_SUPPORT_VUE_2_ONLY:Ms(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:Ms(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:Ms(),__EXTEND_POINT__:Ms()};function vr(n,...t){return zt.createCompileError(n,null,{messages:zee,args:t})}const zee={[Rn.UNEXPECTED_RETURN_TYPE]:"Unexpected return type in composer",[Rn.INVALID_ARGUMENT]:"Invalid argument",[Rn.MUST_BE_CALL_SETUP_TOP]:"Must be called at the top of a `setup` function",[Rn.NOT_INSTALLED]:"Need to install with `app.use` function",[Rn.UNEXPECTED_ERROR]:"Unexpected error",[Rn.NOT_AVAILABLE_IN_LEGACY_MODE]:"Not available in legacy mode",[Rn.REQUIRED_VALUE]:"Required in value: {0}",[Rn.INVALID_VALUE]:"Invalid value",[Rn.CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN]:"Cannot setup vue-devtools plugin",[Rn.NOT_INSTALLED_WITH_PROVIDE]:"Need to install with `provide` function",[Rn.NOT_COMPATIBLE_LEGACY_VUE_I18N]:"Not compatible legacy VueI18n.",[Rn.BRIDGE_SUPPORT_VUE_2_ONLY]:"vue-i18n-bridge support Vue 2.x only",[Rn.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION]:"Must define ‘i18n’ option or custom block in Composition API with using local scope in Legacy API mode",[Rn.NOT_AVAILABLE_COMPOSITION_IN_LEGACY]:"Not available Compostion API in Legacy API mode. Please make sure that the legacy API mode is working properly"},MC=Ve.makeSymbol("__translateVNode"),$C=Ve.makeSymbol("__datetimeParts"),BC=Ve.makeSymbol("__numberParts"),FC=Ve.makeSymbol("__enableEmitter"),UC=Ve.makeSymbol("__disableEmitter"),qF=Ve.makeSymbol("__setPluralRules");Ve.makeSymbol("__intlifyMeta");const GF=Ve.makeSymbol("__injectWithOption"),zC=Ve.makeSymbol("__dispose"),Hee="__VUE_I18N_BRIDGE__";function $p(n){if(!Ve.isObject(n)||zt.isMessageAST(n))return n;for(const t in n)if(Ve.hasOwn(n,t))if(!t.includes("."))Ve.isObject(n[t])&&$p(n[t]);else{const e=t.split("."),i=e.length-1;let r=n,s=!1;for(let o=0;o<i;o++){if(e[o]==="__proto__")throw new Error(`unsafe key: ${e[o]}`);if(e[o]in r||(r[e[o]]=Ve.create()),!Ve.isObject(r[e[o]])){Ve.warn(Hs(Pi.IGNORE_OBJ_FLATTEN,{key:e[o]})),s=!0;break}r=r[e[o]]}if(s||(zt.isMessageAST(r)?zt.AST_NODE_PROPS_KEYS.includes(e[i])||delete n[t]:(r[e[i]]=n[t],delete n[t])),!zt.isMessageAST(r)){const o=r[e[i]];Ve.isObject(o)&&$p(o)}}return n}function i0(n,t){const{messages:e,__i18n:i,messageResolver:r,flatJson:s}=t,o=Ve.isPlainObject(e)?e:Ve.isArray(i)?Ve.create():{[n]:Ve.create()};if(Ve.isArray(i)&&i.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:l,resource:c}=a;l?(o[l]=o[l]||Ve.create(),Ve.deepCopy(c,o[l])):Ve.deepCopy(c,o)}else Ve.isString(a)&&Ve.deepCopy(JSON.parse(a),o)}),r==null&&s)for(const a in o)Ve.hasOwn(o,a)&&$p(o[a]);return o}function KF(n){return n.type}function YF(n,t,e){let i=Ve.isObject(t.messages)?t.messages:Ve.create();"__i18nGlobal"in e&&(i=i0(n.locale.value,{messages:i,__i18n:e.__i18nGlobal}));const r=Object.keys(i);r.length&&r.forEach(s=>{n.mergeLocaleMessage(s,i[s])});{if(Ve.isObject(t.datetimeFormats)){const s=Object.keys(t.datetimeFormats);s.length&&s.forEach(o=>{n.mergeDateTimeFormat(o,t.datetimeFormats[o])})}if(Ve.isObject(t.numberFormats)){const s=Object.keys(t.numberFormats);s.length&&s.forEach(o=>{n.mergeNumberFormat(o,t.numberFormats[o])})}}}function K2(n){return dn.createVNode(dn.Text,null,n,0)}const Y2="__INTLIFY_META__",Q2=()=>[],Wee=()=>!1;let Z2=0;function J2(n){return(t,e,i,r)=>n(e,i,dn.getCurrentInstance()||void 0,r)}const jee=()=>{const n=dn.getCurrentInstance();let t=null;return n&&(t=KF(n)[Y2])?{[Y2]:t}:null};function jA(n={},t){const{__root:e,__injectWithOption:i}=n,r=e===void 0,s=n.flatJson,o=Ve.inBrowser?dn.ref:dn.shallowRef,a=!!n.translateExistCompatible;a&&Ve.warnOnce(Hs(Pi.NOTICE_DROP_TRANSLATE_EXIST_COMPATIBLE_FLAG));let l=Ve.isBoolean(n.inheritLocale)?n.inheritLocale:!0;const c=o(e&&l?e.locale.value:Ve.isString(n.locale)?n.locale:zt.DEFAULT_LOCALE),u=o(e&&l?e.fallbackLocale.value:Ve.isString(n.fallbackLocale)||Ve.isArray(n.fallbackLocale)||Ve.isPlainObject(n.fallbackLocale)||n.fallbackLocale===!1?n.fallbackLocale:c.value),d=o(i0(c.value,n)),f=o(Ve.isPlainObject(n.datetimeFormats)?n.datetimeFormats:{[c.value]:{}}),h=o(Ve.isPlainObject(n.numberFormats)?n.numberFormats:{[c.value]:{}});let g=e?e.missingWarn:Ve.isBoolean(n.missingWarn)||Ve.isRegExp(n.missingWarn)?n.missingWarn:!0,v=e?e.fallbackWarn:Ve.isBoolean(n.fallbackWarn)||Ve.isRegExp(n.fallbackWarn)?n.fallbackWarn:!0,_=e?e.fallbackRoot:Ve.isBoolean(n.fallbackRoot)?n.fallbackRoot:!0,w=!!n.fallbackFormat,C=Ve.isFunction(n.missing)?n.missing:null,k=Ve.isFunction(n.missing)?J2(n.missing):null,E=Ve.isFunction(n.postTranslation)?n.postTranslation:null,A=e?e.warnHtmlMessage:Ve.isBoolean(n.warnHtmlMessage)?n.warnHtmlMessage:!0,x=!!n.escapeParameter;const p=e?e.modifiers:Ve.isPlainObject(n.modifiers)?n.modifiers:{};let D=n.pluralRules||e&&e.pluralRules,R;R=(()=>{r&&zt.setFallbackContext(null);const ye={version:HF,locale:c.value,fallbackLocale:u.value,messages:d.value,modifiers:p,pluralRules:D,missing:k===null?void 0:k,missingWarn:g,fallbackWarn:v,fallbackFormat:w,unresolving:!0,postTranslation:E===null?void 0:E,warnHtmlMessage:A,escapeParameter:x,messageResolver:n.messageResolver,messageCompiler:n.messageCompiler,__meta:{framework:"vue"}};ye.datetimeFormats=f.value,ye.numberFormats=h.value,ye.__datetimeFormatters=Ve.isPlainObject(R)?R.__datetimeFormatters:void 0,ye.__numberFormatters=Ve.isPlainObject(R)?R.__numberFormatters:void 0,ye.__v_emitter=Ve.isPlainObject(R)?R.__v_emitter:void 0;const ie=zt.createCoreContext(ye);return r&&zt.setFallbackContext(ie),ie})(),zt.updateFallbackLocale(R,c.value,u.value);function I(){return[c.value,u.value,d.value,f.value,h.value]}const F=dn.computed({get:()=>c.value,set:ye=>{c.value=ye,R.locale=c.value}}),H=dn.computed({get:()=>u.value,set:ye=>{u.value=ye,R.fallbackLocale=u.value,zt.updateFallbackLocale(R,c.value,ye)}}),q=dn.computed(()=>d.value),N=dn.computed(()=>f.value),$=dn.computed(()=>h.value);function U(){return Ve.isFunction(E)?E:null}function re(ye){E=ye,R.postTranslation=ye}function K(){return C}function z(ye){ye!==null&&(k=J2(ye)),C=ye,R.missing=k}function ge(ye,ie){return ye!=="translate"||!ie.resolvedMessage}const Q=(ye,ie,_e,Je,ut,ft)=>{I();let Ot;try{zt.setAdditionalMeta(jee()),r||(R.fallbackContext=e?zt.getFallbackContext():void 0),Ot=ye(R)}finally{zt.setAdditionalMeta(null),r||(R.fallbackContext=void 0)}if(_e!=="translate exists"&&Ve.isNumber(Ot)&&Ot===zt.NOT_REOSLVED||_e==="translate exists"&&!Ot){const[Qt,me]=ie();if(e&&Ve.isString(Qt)&&ge(_e,me)){_&&(zt.isTranslateFallbackWarn(v,Qt)||zt.isTranslateMissingWarn(g,Qt))&&Ve.warn(Hs(Pi.FALLBACK_TO_ROOT,{key:Qt,type:_e}));{const{__v_emitter:ee}=R;ee&&_&&ee.emit("fallback",{type:_e,key:Qt,to:"global",groupId:`${_e}:${Qt}`})}}return e&&_?Je(e):ut(Qt)}else{if(ft(Ot))return Ot;throw vr(Rn.UNEXPECTED_RETURN_TYPE)}};function ue(...ye){return Q(ie=>Reflect.apply(zt.translate,null,[ie,...ye]),()=>zt.parseTranslateArgs(...ye),"translate",ie=>Reflect.apply(ie.t,ie,[...ye]),ie=>ie,ie=>Ve.isString(ie))}function ve(...ye){const[ie,_e,Je]=ye;if(Je&&!Ve.isObject(Je))throw vr(Rn.INVALID_ARGUMENT);return ue(ie,_e,Ve.assign({resolvedMessage:!0},Je||{}))}function ce(...ye){return Q(ie=>Reflect.apply(zt.datetime,null,[ie,...ye]),()=>zt.parseDateTimeArgs(...ye),"datetime format",ie=>Reflect.apply(ie.d,ie,[...ye]),()=>zt.MISSING_RESOLVE_VALUE,ie=>Ve.isString(ie))}function J(...ye){return Q(ie=>Reflect.apply(zt.number,null,[ie,...ye]),()=>zt.parseNumberArgs(...ye),"number format",ie=>Reflect.apply(ie.n,ie,[...ye]),()=>zt.MISSING_RESOLVE_VALUE,ie=>Ve.isString(ie))}function ae(ye){return ye.map(ie=>Ve.isString(ie)||Ve.isNumber(ie)||Ve.isBoolean(ie)?K2(String(ie)):ie)}const he={normalize:ae,interpolate:ye=>ye,type:"vnode"};function Ae(...ye){return Q(ie=>{let _e;const Je=ie;try{Je.processor=he,_e=Reflect.apply(zt.translate,null,[Je,...ye])}finally{Je.processor=null}return _e},()=>zt.parseTranslateArgs(...ye),"translate",ie=>ie[MC](...ye),ie=>[K2(ie)],ie=>Ve.isArray(ie))}function We(...ye){return Q(ie=>Reflect.apply(zt.number,null,[ie,...ye]),()=>zt.parseNumberArgs(...ye),"number format",ie=>ie[BC](...ye),Q2,ie=>Ve.isString(ie)||Ve.isArray(ie))}function Ee(...ye){return Q(ie=>Reflect.apply(zt.datetime,null,[ie,...ye]),()=>zt.parseDateTimeArgs(...ye),"datetime format",ie=>ie[$C](...ye),Q2,ie=>Ve.isString(ie)||Ve.isArray(ie))}function G(ye){D=ye,R.pluralRules=D}function Y(ye,ie){return Q(()=>{if(!ye)return!1;const _e=Ve.isString(ie)?ie:c.value,Je=Oe(_e),ut=R.messageResolver(Je,ye);return a?ut!=null:zt.isMessageAST(ut)||zt.isMessageFunction(ut)||Ve.isString(ut)},()=>[ye],"translate exists",_e=>Reflect.apply(_e.te,_e,[ye,ie]),Wee,_e=>Ve.isBoolean(_e))}function oe(ye){let ie=null;const _e=zt.fallbackWithLocaleChain(R,u.value,c.value);for(let Je=0;Je<_e.length;Je++){const ut=d.value[_e[Je]]||{},ft=R.messageResolver(ut,ye);if(ft!=null){ie=ft;break}}return ie}function Ue(ye){const ie=oe(ye);return ie??(e?e.tm(ye)||{}:{})}function Oe(ye){return d.value[ye]||{}}function Le(ye,ie){if(s){const _e={[ye]:ie};for(const Je in _e)Ve.hasOwn(_e,Je)&&$p(_e[Je]);ie=_e[ye]}d.value[ye]=ie,R.messages=d.value}function Ye(ye,ie){d.value[ye]=d.value[ye]||{};const _e={[ye]:ie};if(s)for(const Je in _e)Ve.hasOwn(_e,Je)&&$p(_e[Je]);ie=_e[ye],Ve.deepCopy(ie,d.value[ye]),R.messages=d.value}function te(ye){return f.value[ye]||{}}function se(ye,ie){f.value[ye]=ie,R.datetimeFormats=f.value,zt.clearDateTimeFormat(R,ye,ie)}function pe(ye,ie){f.value[ye]=Ve.assign(f.value[ye]||{},ie),R.datetimeFormats=f.value,zt.clearDateTimeFormat(R,ye,ie)}function Re(ye){return h.value[ye]||{}}function Me(ye,ie){h.value[ye]=ie,R.numberFormats=h.value,zt.clearNumberFormat(R,ye,ie)}function Ie(ye,ie){h.value[ye]=Ve.assign(h.value[ye]||{},ie),R.numberFormats=h.value,zt.clearNumberFormat(R,ye,ie)}Z2++,e&&Ve.inBrowser&&(dn.watch(e.locale,ye=>{l&&(c.value=ye,R.locale=ye,zt.updateFallbackLocale(R,c.value,u.value))}),dn.watch(e.fallbackLocale,ye=>{l&&(u.value=ye,R.fallbackLocale=ye,zt.updateFallbackLocale(R,c.value,u.value))}));const Se={id:Z2,locale:F,fallbackLocale:H,get inheritLocale(){return l},set inheritLocale(ye){l=ye,ye&&e&&(c.value=e.locale.value,u.value=e.fallbackLocale.value,zt.updateFallbackLocale(R,c.value,u.value))},get availableLocales(){return Object.keys(d.value).sort()},messages:q,get modifiers(){return p},get pluralRules(){return D||{}},get isGlobal(){return r},get missingWarn(){return g},set missingWarn(ye){g=ye,R.missingWarn=g},get fallbackWarn(){return v},set fallbackWarn(ye){v=ye,R.fallbackWarn=v},get fallbackRoot(){return _},set fallbackRoot(ye){_=ye},get fallbackFormat(){return w},set fallbackFormat(ye){w=ye,R.fallbackFormat=w},get warnHtmlMessage(){return A},set warnHtmlMessage(ye){A=ye,R.warnHtmlMessage=ye},get escapeParameter(){return x},set escapeParameter(ye){x=ye,R.escapeParameter=ye},t:ue,getLocaleMessage:Oe,setLocaleMessage:Le,mergeLocaleMessage:Ye,getPostTranslationHandler:U,setPostTranslationHandler:re,getMissingHandler:K,setMissingHandler:z,[qF]:G};return Se.datetimeFormats=N,Se.numberFormats=$,Se.rt=ve,Se.te=Y,Se.tm=Ue,Se.d=ce,Se.n=J,Se.getDateTimeFormat=te,Se.setDateTimeFormat=se,Se.mergeDateTimeFormat=pe,Se.getNumberFormat=Re,Se.setNumberFormat=Me,Se.mergeNumberFormat=Ie,Se[GF]=i,Se[MC]=Ae,Se[$C]=Ee,Se[BC]=We,Se[FC]=ye=>{R.__v_emitter=ye},Se[UC]=()=>{R.__v_emitter=void 0},Se}function qee(n){const t=Ve.isString(n.locale)?n.locale:zt.DEFAULT_LOCALE,e=Ve.isString(n.fallbackLocale)||Ve.isArray(n.fallbackLocale)||Ve.isPlainObject(n.fallbackLocale)||n.fallbackLocale===!1?n.fallbackLocale:t,i=Ve.isFunction(n.missing)?n.missing:void 0,r=Ve.isBoolean(n.silentTranslationWarn)||Ve.isRegExp(n.silentTranslationWarn)?!n.silentTranslationWarn:!0,s=Ve.isBoolean(n.silentFallbackWarn)||Ve.isRegExp(n.silentFallbackWarn)?!n.silentFallbackWarn:!0,o=Ve.isBoolean(n.fallbackRoot)?n.fallbackRoot:!0,a=!!n.formatFallbackMessages,l=Ve.isPlainObject(n.modifiers)?n.modifiers:{},c=n.pluralizationRules,u=Ve.isFunction(n.postTranslation)?n.postTranslation:void 0,d=Ve.isString(n.warnHtmlInMessage)?n.warnHtmlInMessage!=="off":!0,f=!!n.escapeParameterHtml,h=Ve.isBoolean(n.sync)?n.sync:!0;n.formatter&&Ve.warn(Hs(Pi.NOT_SUPPORTED_FORMATTER)),n.preserveDirectiveContent&&Ve.warn(Hs(Pi.NOT_SUPPORTED_PRESERVE_DIRECTIVE));let g=n.messages;if(Ve.isPlainObject(n.sharedMessages)){const x=n.sharedMessages;g=Object.keys(x).reduce((D,R)=>{const S=D[R]||(D[R]={});return Ve.assign(S,x[R]),D},g||{})}const{__i18n:v,__root:_,__injectWithOption:w}=n,C=n.datetimeFormats,k=n.numberFormats,E=n.flatJson,A=n.translateExistCompatible;return{locale:t,fallbackLocale:e,messages:g,flatJson:E,datetimeFormats:C,numberFormats:k,missing:i,missingWarn:r,fallbackWarn:s,fallbackRoot:o,fallbackFormat:a,modifiers:l,pluralRules:c,postTranslation:u,warnHtmlMessage:d,escapeParameter:f,messageResolver:n.messageResolver,inheritLocale:h,translateExistCompatible:A,__i18n:v,__root:_,__injectWithOption:w}}function HC(n={},t){{const e=jA(qee(n)),{__extender:i}=n,r={id:e.id,get locale(){return e.locale.value},set locale(s){e.locale.value=s},get fallbackLocale(){return e.fallbackLocale.value},set fallbackLocale(s){e.fallbackLocale.value=s},get messages(){return e.messages.value},get datetimeFormats(){return e.datetimeFormats.value},get numberFormats(){return e.numberFormats.value},get availableLocales(){return e.availableLocales},get formatter(){return Ve.warn(Hs(Pi.NOT_SUPPORTED_FORMATTER)),{interpolate(){return[]}}},set formatter(s){Ve.warn(Hs(Pi.NOT_SUPPORTED_FORMATTER))},get missing(){return e.getMissingHandler()},set missing(s){e.setMissingHandler(s)},get silentTranslationWarn(){return Ve.isBoolean(e.missingWarn)?!e.missingWarn:e.missingWarn},set silentTranslationWarn(s){e.missingWarn=Ve.isBoolean(s)?!s:s},get silentFallbackWarn(){return Ve.isBoolean(e.fallbackWarn)?!e.fallbackWarn:e.fallbackWarn},set silentFallbackWarn(s){e.fallbackWarn=Ve.isBoolean(s)?!s:s},get modifiers(){return e.modifiers},get formatFallbackMessages(){return e.fallbackFormat},set formatFallbackMessages(s){e.fallbackFormat=s},get postTranslation(){return e.getPostTranslationHandler()},set postTranslation(s){e.setPostTranslationHandler(s)},get sync(){return e.inheritLocale},set sync(s){e.inheritLocale=s},get warnHtmlInMessage(){return e.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(s){e.warnHtmlMessage=s!=="off"},get escapeParameterHtml(){return e.escapeParameter},set escapeParameterHtml(s){e.escapeParameter=s},get preserveDirectiveContent(){return Ve.warn(Hs(Pi.NOT_SUPPORTED_PRESERVE_DIRECTIVE)),!0},set preserveDirectiveContent(s){Ve.warn(Hs(Pi.NOT_SUPPORTED_PRESERVE_DIRECTIVE))},get pluralizationRules(){return e.pluralRules||{}},__composer:e,t(...s){const[o,a,l]=s,c={};let u=null,d=null;if(!Ve.isString(o))throw vr(Rn.INVALID_ARGUMENT);const f=o;return Ve.isString(a)?c.locale=a:Ve.isArray(a)?u=a:Ve.isPlainObject(a)&&(d=a),Ve.isArray(l)?u=l:Ve.isPlainObject(l)&&(d=l),Reflect.apply(e.t,e,[f,u||d||{},c])},rt(...s){return Reflect.apply(e.rt,e,[...s])},tc(...s){const[o,a,l]=s,c={plural:1};let u=null,d=null;if(!Ve.isString(o))throw vr(Rn.INVALID_ARGUMENT);const f=o;return Ve.isString(a)?c.locale=a:Ve.isNumber(a)?c.plural=a:Ve.isArray(a)?u=a:Ve.isPlainObject(a)&&(d=a),Ve.isString(l)?c.locale=l:Ve.isArray(l)?u=l:Ve.isPlainObject(l)&&(d=l),Reflect.apply(e.t,e,[f,u||d||{},c])},te(s,o){return e.te(s,o)},tm(s){return e.tm(s)},getLocaleMessage(s){return e.getLocaleMessage(s)},setLocaleMessage(s,o){e.setLocaleMessage(s,o)},mergeLocaleMessage(s,o){e.mergeLocaleMessage(s,o)},d(...s){return Reflect.apply(e.d,e,[...s])},getDateTimeFormat(s){return e.getDateTimeFormat(s)},setDateTimeFormat(s,o){e.setDateTimeFormat(s,o)},mergeDateTimeFormat(s,o){e.mergeDateTimeFormat(s,o)},n(...s){return Reflect.apply(e.n,e,[...s])},getNumberFormat(s){return e.getNumberFormat(s)},setNumberFormat(s,o){e.setNumberFormat(s,o)},mergeNumberFormat(s,o){e.mergeNumberFormat(s,o)},getChoiceIndex(s,o){return Ve.warn(Hs(Pi.NOT_SUPPORTED_GET_CHOICE_INDEX)),-1}};return r.__extender=i,r.__enableEmitter=s=>{const o=e;o[FC]&&o[FC](s)},r.__disableEmitter=()=>{const s=e;s[UC]&&s[UC]()},r}}const qA={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:n=>n==="parent"||n==="global",default:"parent"},i18n:{type:Object}};function Gee({slots:n},t){return t.length===1&&t[0]==="default"?(n.default?n.default():[]).reduce((i,r)=>[...i,...r.type===dn.Fragment?r.children:[r]],[]):t.reduce((e,i)=>{const r=n[i];return r&&(e[i]=r()),e},Ve.create())}function QF(n){return dn.Fragment}const Kee=dn.defineComponent({name:"i18n-t",props:Ve.assign({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:n=>Ve.isNumber(n)||!isNaN(n)}},qA),setup(n,t){const{slots:e,attrs:i}=t,r=n.i18n||r0({useScope:n.scope,__useComponent:!0});return()=>{const s=Object.keys(e).filter(d=>d!=="_"),o=Ve.create();n.locale&&(o.locale=n.locale),n.plural!==void 0&&(o.plural=Ve.isString(n.plural)?+n.plural:n.plural);const a=Gee(t,s),l=r[MC](n.keypath,a,o),c=Ve.assign(Ve.create(),i),u=Ve.isString(n.tag)||Ve.isObject(n.tag)?n.tag:QF();return dn.h(u,c,l)}}}),Jg=Kee,Yee=Jg;function Qee(n){return Ve.isArray(n)&&!Ve.isString(n[0])}function ZF(n,t,e,i){const{slots:r,attrs:s}=t;return()=>{const o={part:!0};let a=Ve.create();n.locale&&(o.locale=n.locale),Ve.isString(n.format)?o.key=n.format:Ve.isObject(n.format)&&(Ve.isString(n.format.key)&&(o.key=n.format.key),a=Object.keys(n.format).reduce((f,h)=>e.includes(h)?Ve.assign(Ve.create(),f,{[h]:n.format[h]}):f,Ve.create()));const l=i(n.value,o,a);let c=[o.key];Ve.isArray(l)?c=l.map((f,h)=>{const g=r[f.type],v=g?g({[f.type]:f.value,index:h,parts:l}):[f.value];return Qee(v)&&(v[0].key=`${f.type}-${h}`),v}):Ve.isString(l)&&(c=[l]);const u=Ve.assign(Ve.create(),s),d=Ve.isString(n.tag)||Ve.isObject(n.tag)?n.tag:QF();return dn.h(d,u,c)}}const Zee=dn.defineComponent({name:"i18n-n",props:Ve.assign({value:{type:Number,required:!0},format:{type:[String,Object]}},qA),setup(n,t){const e=n.i18n||r0({useScope:n.scope,__useComponent:!0});return ZF(n,t,zt.NUMBER_FORMAT_OPTIONS_KEYS,(...i)=>e[BC](...i))}}),ly=Zee,Jee=ly,Xee=dn.defineComponent({name:"i18n-d",props:Ve.assign({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},qA),setup(n,t){const e=n.i18n||r0({useScope:n.scope,__useComponent:!0});return ZF(n,t,zt.DATETIME_FORMAT_OPTIONS_KEYS,(...i)=>e[$C](...i))}}),cy=Xee,ete=cy;function tte(n,t){const e=n;if(n.mode==="composition")return e.__getInstance(t)||n.global;{const i=e.__getInstance(t);return i!=null?i.__composer:n.global.__composer}}function JF(n){const t=o=>{const{instance:a,modifiers:l,value:c}=o;if(!a||!a.$)throw vr(Rn.UNEXPECTED_ERROR);const u=tte(n,a.$);l.preserve&&Ve.warn(Hs(Pi.NOT_SUPPORTED_PRESERVE));const d=X2(c);return[Reflect.apply(u.t,u,[...eR(d)]),u]};return{created:(o,a)=>{const[l,c]=t(a);Ve.inBrowser&&n.global===c&&(o.__i18nWatcher=dn.watch(c.locale,()=>{a.instance&&a.instance.$forceUpdate()})),o.__composer=c,o.textContent=l},unmounted:o=>{Ve.inBrowser&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:a})=>{if(o.__composer){const l=o.__composer,c=X2(a);o.textContent=Reflect.apply(l.t,l,[...eR(c)])}},getSSRProps:o=>{const[a]=t(o);return{textContent:a}}}}function X2(n){if(Ve.isString(n))return{path:n};if(Ve.isPlainObject(n)){if(!("path"in n))throw vr(Rn.REQUIRED_VALUE,"path");return n}else throw vr(Rn.INVALID_VALUE)}function eR(n){const{path:t,locale:e,args:i,choice:r,plural:s}=n,o={},a=i||{};return Ve.isString(e)&&(o.locale=e),Ve.isNumber(r)&&(o.plural=r),Ve.isNumber(s)&&(o.plural=s),[t,a,o]}function nte(n,t,...e){const i=Ve.isPlainObject(e[0])?e[0]:{},r=!!i.useI18nComponentName,s=Ve.isBoolean(i.globalInstall)?i.globalInstall:!0;s&&r&&Ve.warn(Hs(Pi.COMPONENT_NAME_LEGACY_COMPATIBLE,{name:Jg.name})),s&&([r?"i18n":Jg.name,"I18nT"].forEach(o=>n.component(o,Jg)),[ly.name,"I18nN"].forEach(o=>n.component(o,ly)),[cy.name,"I18nD"].forEach(o=>n.component(o,cy))),n.directive("t",JF(t))}function ite(n,t,e){return{beforeCreate(){const i=dn.getCurrentInstance();if(!i)throw vr(Rn.UNEXPECTED_ERROR);const r=this.$options;if(r.i18n){const s=r.i18n;if(r.__i18n&&(s.__i18n=r.__i18n),s.__root=t,this===this.$root)this.$i18n=tR(n,s);else{s.__injectWithOption=!0,s.__extender=e.__vueI18nExtend,this.$i18n=HC(s);const o=this.$i18n;o.__extender&&(o.__disposer=o.__extender(this.$i18n))}}else if(r.__i18n)if(this===this.$root)this.$i18n=tR(n,r);else{this.$i18n=HC({__i18n:r.__i18n,__injectWithOption:!0,__extender:e.__vueI18nExtend,__root:t});const s=this.$i18n;s.__extender&&(s.__disposer=s.__extender(this.$i18n))}else this.$i18n=n;r.__i18nGlobal&&YF(t,r,r),this.$t=(...s)=>this.$i18n.t(...s),this.$rt=(...s)=>this.$i18n.rt(...s),this.$tc=(...s)=>this.$i18n.tc(...s),this.$te=(s,o)=>this.$i18n.te(s,o),this.$d=(...s)=>this.$i18n.d(...s),this.$n=(...s)=>this.$i18n.n(...s),this.$tm=s=>this.$i18n.tm(s),e.__setInstance(i,this.$i18n)},mounted(){},unmounted(){const i=dn.getCurrentInstance();if(!i)throw vr(Rn.UNEXPECTED_ERROR);const r=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,r.__disposer&&(r.__disposer(),delete r.__disposer,delete r.__extender),e.__deleteInstance(i),delete this.$i18n}}}function tR(n,t){n.locale=t.locale||n.locale,n.fallbackLocale=t.fallbackLocale||n.fallbackLocale,n.missing=t.missing||n.missing,n.silentTranslationWarn=t.silentTranslationWarn||n.silentFallbackWarn,n.silentFallbackWarn=t.silentFallbackWarn||n.silentFallbackWarn,n.formatFallbackMessages=t.formatFallbackMessages||n.formatFallbackMessages,n.postTranslation=t.postTranslation||n.postTranslation,n.warnHtmlInMessage=t.warnHtmlInMessage||n.warnHtmlInMessage,n.escapeParameterHtml=t.escapeParameterHtml||n.escapeParameterHtml,n.sync=t.sync||n.sync,n.__composer[qF](t.pluralizationRules||n.pluralizationRules);const e=i0(n.locale,{messages:t.messages,__i18n:t.__i18n});return Object.keys(e).forEach(i=>n.mergeLocaleMessage(i,e[i])),t.datetimeFormats&&Object.keys(t.datetimeFormats).forEach(i=>n.mergeDateTimeFormat(i,t.datetimeFormats[i])),t.numberFormats&&Object.keys(t.numberFormats).forEach(i=>n.mergeNumberFormat(i,t.numberFormats[i])),n}const XF=Ve.makeSymbol("global-vue-i18n");function rte(n={},t){const e=Ve.isBoolean(n.legacy)?n.legacy:!0,i=Ve.isBoolean(n.globalInjection)?n.globalInjection:!0,r=e?!!n.allowComposition:!0,s=new Map,[o,a]=ote(n,e),l=Ve.makeSymbol("vue-i18n");e&&r&&Ve.warn(Hs(Pi.NOTICE_DROP_ALLOW_COMPOSITION));function c(f){return s.get(f)||null}function u(f,h){s.set(f,h)}function d(f){s.delete(f)}{const f={get mode(){return e?"legacy":"composition"},get allowComposition(){return r},async install(h,...g){if(h.__VUE_I18N_SYMBOL__=l,h.provide(h.__VUE_I18N_SYMBOL__,f),Ve.isPlainObject(g[0])){const w=g[0];f.__composerExtend=w.__composerExtend,f.__vueI18nExtend=w.__vueI18nExtend}let v=null;!e&&i&&(v=gte(h,f.global)),nte(h,f,...g),e&&h.mixin(ite(a,a.__composer,f));const _=h.unmount;h.unmount=()=>{v&&v(),f.dispose(),_()}},get global(){return a},dispose(){o.stop()},__instances:s,__getInstance:c,__setInstance:u,__deleteInstance:d};return f}}function r0(n={}){const t=dn.getCurrentInstance();if(t==null)throw vr(Rn.MUST_BE_CALL_SETUP_TOP);if(!t.isCE&&t.appContext.app!=null&&!t.appContext.app.__VUE_I18N_SYMBOL__)throw vr(Rn.NOT_INSTALLED);const e=ate(t),i=cte(e),r=KF(t),s=lte(n,r);if(e.mode==="legacy"&&!n.__useComponent){if(!e.allowComposition)throw vr(Rn.NOT_AVAILABLE_IN_LEGACY_MODE);return hte(t,s,i,n)}if(s==="global")return YF(i,n,r),i;if(s==="parent"){let l=ute(e,t,n.__useComponent);return l==null&&(Ve.warn(Hs(Pi.NOT_FOUND_PARENT_SCOPE)),l=i),l}const o=e;let a=o.__getInstance(t);if(a==null){const l=Ve.assign({},n);"__i18n"in r&&(l.__i18n=r.__i18n),i&&(l.__root=i),a=jA(l),o.__composerExtend&&(a[zC]=o.__composerExtend(a)),fte(o,t,a),o.__setInstance(t,a)}return a}const ste=n=>{if(!(Hee in n))throw vr(Rn.NOT_COMPATIBLE_LEGACY_VUE_I18N);return n};function ote(n,t,e){const i=dn.effectScope();{const r=t?i.run(()=>HC(n)):i.run(()=>jA(n));if(r==null)throw vr(Rn.UNEXPECTED_ERROR);return[i,r]}}function ate(n){{const t=dn.inject(n.isCE?XF:n.appContext.app.__VUE_I18N_SYMBOL__);if(!t)throw vr(n.isCE?Rn.NOT_INSTALLED_WITH_PROVIDE:Rn.UNEXPECTED_ERROR);return t}}function lte(n,t){return Ve.isEmptyObject(n)?"__i18n"in t?"local":"global":n.useScope?n.useScope:"local"}function cte(n){return n.mode==="composition"?n.global:n.global.__composer}function ute(n,t,e=!1){let i=null;const r=t.root;let s=dte(t,e);for(;s!=null;){const o=n;if(n.mode==="composition")i=o.__getInstance(s);else{const a=o.__getInstance(s);a!=null&&(i=a.__composer,e&&i&&!i[GF]&&(i=null))}if(i!=null||r===s)break;s=s.parent}return i}function dte(n,t=!1){return n==null?null:t&&n.vnode.ctx||n.parent}function fte(n,t,e){dn.onMounted(()=>{},t),dn.onUnmounted(()=>{const i=e;n.__deleteInstance(t);const r=i[zC];r&&(r(),delete i[zC])},t)}function hte(n,t,e,i={}){const r=t==="local",s=dn.shallowRef(null);if(r&&n.proxy&&!(n.proxy.$options.i18n||n.proxy.$options.__i18n))throw vr(Rn.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const o=Ve.isBoolean(i.inheritLocale)?i.inheritLocale:!Ve.isString(i.locale),a=dn.ref(!r||o?e.locale.value:Ve.isString(i.locale)?i.locale:zt.DEFAULT_LOCALE),l=dn.ref(!r||o?e.fallbackLocale.value:Ve.isString(i.fallbackLocale)||Ve.isArray(i.fallbackLocale)||Ve.isPlainObject(i.fallbackLocale)||i.fallbackLocale===!1?i.fallbackLocale:a.value),c=dn.ref(i0(a.value,i)),u=dn.ref(Ve.isPlainObject(i.datetimeFormats)?i.datetimeFormats:{[a.value]:{}}),d=dn.ref(Ve.isPlainObject(i.numberFormats)?i.numberFormats:{[a.value]:{}}),f=r?e.missingWarn:Ve.isBoolean(i.missingWarn)||Ve.isRegExp(i.missingWarn)?i.missingWarn:!0,h=r?e.fallbackWarn:Ve.isBoolean(i.fallbackWarn)||Ve.isRegExp(i.fallbackWarn)?i.fallbackWarn:!0,g=r?e.fallbackRoot:Ve.isBoolean(i.fallbackRoot)?i.fallbackRoot:!0,v=!!i.fallbackFormat,_=Ve.isFunction(i.missing)?i.missing:null,w=Ve.isFunction(i.postTranslation)?i.postTranslation:null,C=r?e.warnHtmlMessage:Ve.isBoolean(i.warnHtmlMessage)?i.warnHtmlMessage:!0,k=!!i.escapeParameter,E=r?e.modifiers:Ve.isPlainObject(i.modifiers)?i.modifiers:{},A=i.pluralRules||r&&e.pluralRules;function x(){return[a.value,l.value,c.value,u.value,d.value]}const p=dn.computed({get:()=>s.value?s.value.locale.value:a.value,set:Y=>{s.value&&(s.value.locale.value=Y),a.value=Y}}),D=dn.computed({get:()=>s.value?s.value.fallbackLocale.value:l.value,set:Y=>{s.value&&(s.value.fallbackLocale.value=Y),l.value=Y}}),R=dn.computed(()=>s.value?s.value.messages.value:c.value),S=dn.computed(()=>u.value),I=dn.computed(()=>d.value);function F(){return s.value?s.value.getPostTranslationHandler():w}function H(Y){s.value&&s.value.setPostTranslationHandler(Y)}function q(){return s.value?s.value.getMissingHandler():_}function N(Y){s.value&&s.value.setMissingHandler(Y)}function $(Y){return x(),Y()}function U(...Y){return s.value?$(()=>Reflect.apply(s.value.t,null,[...Y])):$(()=>"")}function re(...Y){return s.value?Reflect.apply(s.value.rt,null,[...Y]):""}function K(...Y){return s.value?$(()=>Reflect.apply(s.value.d,null,[...Y])):$(()=>"")}function z(...Y){return s.value?$(()=>Reflect.apply(s.value.n,null,[...Y])):$(()=>"")}function ge(Y){return s.value?s.value.tm(Y):{}}function Q(Y,oe){return s.value?s.value.te(Y,oe):!1}function ue(Y){return s.value?s.value.getLocaleMessage(Y):{}}function ve(Y,oe){s.value&&(s.value.setLocaleMessage(Y,oe),c.value[Y]=oe)}function ce(Y,oe){s.value&&s.value.mergeLocaleMessage(Y,oe)}function J(Y){return s.value?s.value.getDateTimeFormat(Y):{}}function ae(Y,oe){s.value&&(s.value.setDateTimeFormat(Y,oe),u.value[Y]=oe)}function xe(Y,oe){s.value&&s.value.mergeDateTimeFormat(Y,oe)}function he(Y){return s.value?s.value.getNumberFormat(Y):{}}function Ae(Y,oe){s.value&&(s.value.setNumberFormat(Y,oe),d.value[Y]=oe)}function We(Y,oe){s.value&&s.value.mergeNumberFormat(Y,oe)}const Ee={get id(){return s.value?s.value.id:-1},locale:p,fallbackLocale:D,messages:R,datetimeFormats:S,numberFormats:I,get inheritLocale(){return s.value?s.value.inheritLocale:o},set inheritLocale(Y){s.value&&(s.value.inheritLocale=Y)},get availableLocales(){return s.value?s.value.availableLocales:Object.keys(c.value)},get modifiers(){return s.value?s.value.modifiers:E},get pluralRules(){return s.value?s.value.pluralRules:A},get isGlobal(){return s.value?s.value.isGlobal:!1},get missingWarn(){return s.value?s.value.missingWarn:f},set missingWarn(Y){s.value&&(s.value.missingWarn=Y)},get fallbackWarn(){return s.value?s.value.fallbackWarn:h},set fallbackWarn(Y){s.value&&(s.value.missingWarn=Y)},get fallbackRoot(){return s.value?s.value.fallbackRoot:g},set fallbackRoot(Y){s.value&&(s.value.fallbackRoot=Y)},get fallbackFormat(){return s.value?s.value.fallbackFormat:v},set fallbackFormat(Y){s.value&&(s.value.fallbackFormat=Y)},get warnHtmlMessage(){return s.value?s.value.warnHtmlMessage:C},set warnHtmlMessage(Y){s.value&&(s.value.warnHtmlMessage=Y)},get escapeParameter(){return s.value?s.value.escapeParameter:k},set escapeParameter(Y){s.value&&(s.value.escapeParameter=Y)},t:U,getPostTranslationHandler:F,setPostTranslationHandler:H,getMissingHandler:q,setMissingHandler:N,rt:re,d:K,n:z,tm:ge,te:Q,getLocaleMessage:ue,setLocaleMessage:ve,mergeLocaleMessage:ce,getDateTimeFormat:J,setDateTimeFormat:ae,mergeDateTimeFormat:xe,getNumberFormat:he,setNumberFormat:Ae,mergeNumberFormat:We};function G(Y){Y.locale.value=a.value,Y.fallbackLocale.value=l.value,Object.keys(c.value).forEach(oe=>{Y.mergeLocaleMessage(oe,c.value[oe])}),Object.keys(u.value).forEach(oe=>{Y.mergeDateTimeFormat(oe,u.value[oe])}),Object.keys(d.value).forEach(oe=>{Y.mergeNumberFormat(oe,d.value[oe])}),Y.escapeParameter=k,Y.fallbackFormat=v,Y.fallbackRoot=g,Y.fallbackWarn=h,Y.missingWarn=f,Y.warnHtmlMessage=C}return dn.onBeforeMount(()=>{if(n.proxy==null||n.proxy.$i18n==null)throw vr(Rn.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const Y=s.value=n.proxy.$i18n.__composer;t==="global"?(a.value=Y.locale.value,l.value=Y.fallbackLocale.value,c.value=Y.messages.value,u.value=Y.datetimeFormats.value,d.value=Y.numberFormats.value):r&&G(Y)}),Ee}const mte=["locale","fallbackLocale","availableLocales"],nR=["t","rt","d","n","tm","te"];function gte(n,t){const e=Object.create(null);return mte.forEach(r=>{const s=Object.getOwnPropertyDescriptor(t,r);if(!s)throw vr(Rn.UNEXPECTED_ERROR);const o=dn.isRef(s.value)?{get(){return s.value.value},set(a){s.value.value=a}}:{get(){return s.get&&s.get()}};Object.defineProperty(e,r,o)}),n.config.globalProperties.$i18n=e,nR.forEach(r=>{const s=Object.getOwnPropertyDescriptor(t,r);if(!s||!s.value)throw vr(Rn.UNEXPECTED_ERROR);Object.defineProperty(n.config.globalProperties,`$${r}`,s)}),()=>{delete n.config.globalProperties.$i18n,nR.forEach(r=>{delete n.config.globalProperties[`$${r}`]})}}zt.registerMessageCompiler(zt.compile);zt.registerMessageResolver(zt.resolveValue);zt.registerLocaleFallbacker(zt.fallbackWithLocaleChain);{const n=Ve.getGlobalThis();n.__INTLIFY__=!0,zt.setDevToolsHook(n.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}yo.DatetimeFormat=cy;yo.I18nD=ete;yo.I18nInjectionKey=XF;yo.I18nN=Jee;yo.I18nT=Yee;yo.NumberFormat=ly;yo.Translation=Jg;yo.VERSION=HF;yo.castToVueI18n=ste;yo.createI18n=rte;yo.useI18n=r0;yo.vTDirective=JF;var e4=yo;const ad={de:{general:{yes:"Ja",no:"Nein",abstention:"Enthaltung",member:"Teilnehmer",confirm:"Bestätigen",cancel:"Abbrechen",close:"Schließen",loading:"Wird geladen..."},voteTransfer:{modal:{title:"Stimmrecht übertragen"},transferVotes:"Stimmrecht übertragen",sourceUser:"Von Benutzer",selectTargetUser:"An Benutzer übertragen",searchUserPlaceholder:"Benutzer suchen (Name oder Benutzername)...",noUsersFound:"Keine Benutzer gefunden",selectedUser:"Ausgewählter Benutzer",selectUser:"Bitte Benutzer auswählen",selectVoteAmount:"Anzahl Stimmen",transferOne:"1 Stimme",transferAll:"Alle Stimmen",currentVotes:"{count} Stimme(n)",remainingVotes:"Verbleibende Stimmen: {count}",resultPreview:"Vorschau nach Übertragung",afterTransfer:"Nach Übertragung",votes:"Stimme(n)",willBecomeVisitor:"Wird zum Besucher ohne Stimmrecht",willBecomeParticipant:"Wird zum Teilnehmer mit Stimmrecht",confirmTransfer:"Übertragung bestätigen",success:"{votes} Stimme(n) erfolgreich von {source} an {target} übertragen"},view:{messageEditor:{title:"Übersetzungs-Editor",description:"Hier können Sie Texte und Übersetzungen anpassen, die in der Anwendung angezeigt werden.",infoText:"Änderungen werden in der Datei messages.local.json gespeichert und überschreiben die Standardwerte aus messages.json. Die Originaldatei bleibt unverändert.",search:"Texte durchsuchen...",saveChanges:"Änderungen speichern",showOnlyModified:"Nur bearbeitete Texte anzeigen",reset:"Zurücksetzen",table:{path:"Pfad",defaultValue:"Standardwert",customValue:"Angepasster Wert",actions:"Aktionen"}},systemSettings:{title:"Globale Systemeinstellungen",titleSuffix:{label:"Title-Suffix (Browser-Tab)",placeholder:"z.B. digitalwahl.org oder vereinswahl.vielwerth-junginger.de",help:'Wird als Suffix im Browser-Tab angezeigt: "Seitentitel - Ihr Suffix"'},favicon:{label:"Favicon (Browser-Symbol)",placeholder:"https://example.com/favicon.png",help:"URL zu einem 32x32px PNG/ICO-Bild für das Browser-Symbol",upload:"Upload",preview:"Vorschau"},useDirectStaticPaths:{label:"Direkte statische Pfade verwenden",help:"Aktiviert direkte Pfade für statische Inhalte"},useDbFooterNavigation:{label:"Datenbank-Footer-Navigation verwenden",help:"Navigation im Footer aus der Datenbank laden"},recaptcha:{label:"Google reCAPTCHA Einstellungen",siteKey:{label:"reCAPTCHA Site Key",placeholder:"6Lc1234567890abcdefghijklmnopqrstuvwxyz",help:"Der öffentliche Site Key von Google reCAPTCHA v2"},secretKey:{label:"reCAPTCHA Secret Key",placeholder:"6Lc1234567890abcdefghijklmnopqrstuvwxyz",help:"Der geheime Secret Key von Google reCAPTCHA v2 (wird sicher gespeichert)"},enabled:{label:"reCAPTCHA aktivieren",help:"Aktiviert Google reCAPTCHA für Registrierungsformulare"}},save:"Speichern",saving:"Wird gespeichert...",lastUpdated:"Zuletzt geändert",updatedBy:"von"},login:{label:{username:"Benutzername, E-Mail oder Mitgliedsnummer *",usernameHelp:"Als Benutzername dient Ihre Mitgliedsnummer, Ihre E-Mail Adresse oder eine individuelle Kennung. Die Informationen dienen zur Akkreditierung.<br /><b>Bitte beachten Sie die Vorgaben Ihres Veranstalters</b>",email:"E-Mail *",password:"Passwort *",passwordHelp:"Bitte verwenden Sie ein Kennwort mit mindestens 6 Zeichen. Das Kennwort wird zur Wiedereinwahl zur Veranstaltung benötigt, falls Sie wegen Inaktivität oder Unterbrechung wieder teilnehmen möchten.",lostPassword:"Passwort vergessen? Hier Link anfordern",publicName:"Anzeige-Name *",publicNameHelp:"Hier geben Sie bitte den Namen ein mit dem sie angezeigt werden möchten und bei Abstimmungen sichtbar sind.",eventIdent:"Veranstaltungs-ID eingeben *",onlyUsername:"Benutzername *"},headline:{title:"digitalwahl.org",subtitle:"Einfach die Wahl haben",orgaLogin:"Als Organisator einloggen",userLogin:"Als Besucher einloggen",eventIdent:"Mit Veranstaltungs-ID einloggen",userWelcomeTo:"Herzlich willkommen, bitte loggen Sie sich ein.",inactiveEvent:"Die Veranstaltung ist noch nicht freigeschaltet",orgaRegister:"Als Organisator registrieren"},inactiveEventText:"Bitte versuchen Sie es später noch einmal. Die Veranstaltung ist noch nicht aktiv.",submit:"Login",submitToEvent:"In Veranstaltung einloggen",registerAsOrganizer:"Als Organisator registrieren",registerAsOrganizerInfo:"ACHTUNG: Betastatus!",invalidCredentials:"Die Anmeldung ist wegen ungültiger Anmeldedaten fehlgeschlagen.",invalidRefreshToken:"Ihre Nutzersession ist abgelaufen. Bitte melden Sie sich erneut an.",asOrganizerLoggedIn:"Sie sind als Organisator eingeloggt. Bitte verwenden Sie zur Teilnahme an Abstimmungen einen anderen Browser oder ein anderes Endgerät."},register:{headline:"Registrierung",subheadline:"Hier können Sie eine Anfrage zur Registrierung abschicken",description:'Sie müssen nach der Registrierung Ihre E-Mail Adresse bestätigen.<br />Nach Bestätigung erhält ein Administrator Ihre Registrierungsanfrage und schaltet Ihren Zugang frei.<hr class="my-4"><u class="h3">Die Plattform befindet sich im Beta-Status!</u>',label:{username:"Benutzername *",email:"E-Mail Adresse *",password:"Passwort *",repeatPassword:"Passwort wiederholen *",publicName:"Ihr Name *",publicOrganisation:"Ihre Organisation *",publicOrganisationHint:"Die kostenlose Nutzung ist gemeinnützigen Organisationen und Verbänden vorbehalten.",dataProtection:'* Ich bestätige, dass ich die <a href="/datenschutz" target="_blank">Datenschutzerklärung</a> gelesen habe, zur Kenntnis nehme und mit den <a href="/nutzervereinbarung" target="_blank">Nutzungsbedigungen</a> einverstanden bin.',beta:"* Ich nehme zur Kenntnis, dass die Plattform sich im Entwicklungszustand befindet und es dadurch zu Einschränkungen kommen kann."},verify:{processing:"Der Validierungsprozess ist noch im Gange.",processingDescription:"Die Administration prüft noch Ihren Zugang. Dies kann einige Zeit in Anspruch nehmen.",failed:"Der Validierungsprozess war leider nicht erfolgreich.",success:"Sie haben sich Erfolgreich verifiziert. Die Administration wurde informiert.",successDescription:"Ihr Zugang wird manuell geprüft. Bei Rückfragen meldet sich ein Administrator bei Ihnen."},submit:"Registrierung abschicken",success:"Sie haben sich Erfolgreich registriert! Bitte bestätigen Sie Ihre E-Mail Adresse. Nach Ihrer Bestätigung wird der Account von einem Administrator geprüft und freigeschaltet. Sie erhalten eine Bestätigung nach Freischaltung!"},activateAuthToken:{title:"digitalwahl.org",subTitle:'Ihre Einladung zur Veranstaltung<br />"{eventTitle}"',description:"Mit klick auf den folgenden Button registieren Sie sich mit <b>diesem</b> Gerät. Sie werden <b>nur mit diesem Gerät</b> an der Veranstaltung teilnehmen können. Möchten Sie ein anderes Gerät verwenden, dann öffnen Sie bitte diesen Link auf dem anderen Gerät.",activateButtonText:"Dieses Gerät aktivieren"},profile:{headline:"",label:{currentPassword:"Aktuelles Passwort",newPassword:"Neues Passwort",repeatPassword:"Neues Passwort erneut eingeben",email:"E-Mail",fullName:"Voller Name",submit:"Speichern"}},videoConference:{addNew:"Neu anlegen",type:"Software",title:"Titel",noRecords:"Es existieren noch keine Datensätze.",confirmDelete:"Möchten Sie den Datensatz wirklich löschen?.",backToListView:"Zur Listenansicht",formData:{title:"Titel",sdkKey:"SDK Key",sdkSecret:"SDK Secret",submitNew:"Datensatz anlegen",submitEdit:"Speichern"}},event:{navigation:{members:"Teilnehmer",waitingRoom:"Warteraum",polls:"Abstimmungen",results:"Ergebnisse",back:"Zurück zur Übersicht"},user:{verifyAs:"Verifizieren als:",edit:"Bearbeiten",unverfify:"In den Warteraum",setTo:"Setzen auf:",block:"Benutzer löschen",member:"Teilnehmer",visitor:"Besucher",online:"Online",offline:"Offline",all:"Gesamt",allVoteAmount:"Gesamtstimmen",copyLink:"Link kopieren",info:'Benutzer müssen im Warteraum sein um sie zu löschen. <br />Editieren -> Haken bei "Freigeschaltet" entfernen. Benutzer erscheint wieder im Warteraum',confirm:{unverify:"Freischaltung deaktivieren? Nutzer wird in den Warteraum verschoben.",terminateTokenSession:"Mit der Abmeldung kann dieses Gerät nicht mehr an der Veranstaltung teilnehmen. Dieser Vorgang ist unwiderruflich. Möchten Sie sich wirklich abmelden?"}},create:{createNew:"Neue Veranstaltung erstellen",labels:{title:"Veranstaltungstitel",slug:"Slug",slugHelp:'Pfadsegment für URL: "digitalwahl.org/event/meine-veranstaltung" | Bevorzugt Kleinschreibung sowie ohne Leer- und Sonderzeichen.',description:"Veranstaltungsbeschreibung",descriptionHelp:"Veranstaltungsbeschreibung",scheduledDatetime:"Startdatum",lobbyOpen:"Lobby aktivieren / vorzeitiger Login und Anzeige der Veranstaltung auf der Startseite",active:"Veranstaltung direkt aktiv schalten?",submit:"Speichern und schließen",submitAndContinue:"Speichern und weiter bearbeiten",videoConferenceSelect:"Videokonferenz-System-Auswahl",multivoteTypeTitle:"Mehrfachstimmenabgabe",multivoteTypeInfo:"Wahlmöglichkeit zur Vorgabe der stimmberechtigten Teilnehmer die mehr als eine Stimme haben",multivoteRadio1Label:"Benutzer können unterschiedliche Stimmenabgabe durchführen",multivoteRadio1Help:"Bsp.: Stimme 1 von 2: Ja, Stimme 2 von 2: nein<br>Bsp. 2: Checkbox ausgewählt vom Teilnehmer: Alle Stimmen auf einmal abgeben: Ja 2x",multivoteRadio2Label:"Benutzer geben IMMER alle Stimmen auf einmal ab",multivoteRadio2Help:"Bsp.: Teilnehmer hat 5 Stimmen. Bei Abstimmung wählt der Teilnehmer nur einmal, es wird 5 fach gewertet.",async:"Die Abstimmungen der Veranstaltung finden asynchron statt (Briefwahl).",allowMagicLink:"Zugang über Magic-Link erlauben",publicVoteVisible:"Stimmenabgabe bei öffentlichen Abstimmungen für alle sichtbar darstellen",publicnameReadonly:"Öffentlicher Name ist schreibgeschützt (kann nicht vom Teilnehmer geändert werden)",magicLink:{popover:{title:"Was ist ein Magic-Link?",description:'Mit dem Magic-Link können Teilnehmer ohne Passworteingabe an der Veranstaltung teilnehmen.<br>Die Links, welche <br><span class="text-nowrap">?username=#BENUTERZERNAME#</span><br>als <b>Parameter</b> beinhalten, sind von der Passworteingabe befreit.'}},endDatetime:"Enddatum (Nur für Briefwahl)",eventUser:{submit:"Benutzer speichern",processing:"Benutzer werden gespeichert",createNew:"Neuen Benutzer erstellen",update:"Benutzer bearbeiten",allowToVote:"Teilnehmer mit Stimmrecht",verified:"Freigeschaltet",publicName:"Angezeigter Name",username:"Benutzername",emails:"Liste von E-Mails",voteAmount:"Anzahl der Stimmen",tokenBasedLogin:"Tokenbasierter-Login",tokenBasedLoginHelp:"Nutzer melden sich mit einem im Browser hinterlegtem Schlüssel an (Kein Passwort)."},eventMultipleUser:{submit:"Benutzerliste speichern",createNew:"Mehrere Benutzer erstellen",allowToVote:"Teilnehmer mit Stimmrecht",usernames:"Benutzerliste (Benutzernamen)",emails:"Benutzerliste (E-Mail-Adressen)",usernamesHint:"Immer ein Benutzer pro Zeile. Keine Leerzeichen im Benutzernamen. Keine leeren Zeilen",emailsHint:"Immer eine E-Mail-Adresse pro Zeile. Keine Leerzeichen in der E-Mail-Adresse. Keine leeren Zeilen",importFormat:"Benutzerliste (Format: {defaultValue})",importFormatHelp:"<strong>Format:</strong> {defaultValue}<br><br><strong>Beispiele (eine Zeile pro Teilnehmer):</strong><br>user1@example.com;Max Mustermann;5<br>user2@example.com;Erika Musterfrau<br>user3@example.com;;3<br>user4@example.com<br><br>Ein Eintrag pro Zeile. <strong>Teilnehmer mit Stimmenzahl > 0 erhalten automatisch Stimmrecht.</strong>",voteAmount:"Anzahl der Stimmen"},videoConferenceConfig:{zoom:{meetingId:"Meeting ID",password:"Passwort"}},styles:"Bootstrap Styles",stylesHelp:"Definiert individuelle Bootstrap Variablen für dieses Event",logo:"Individuelles Logo",logoHelp:"Maximale Größe: 500KB, Empfohlene Formate: PNG, JPG"},tabs:{general:"Allgemein",rules:"Regeln",styling:"Design"}},listing:{name:"Name",slug:"Slug / Identifikator",created:"Erstellt am",scheduled:"Geplant am",state:"Status",stateActive:"Aktiv",stateLocked:"Inaktiv",voteAmount:"Stimmen",deleteInfo:"Nur inaktive Veranstaltungen können gelöscht werden",organizer:"Veranstalter",textCopiedToClipboard:"Der Veranstaltungslink wurde in die Zwischenablage kopiert.",actions:{label:"Aktionen",edit:"Bearbeiten",inviteLink:"Einladungs-Link kopieren",newTab:"Veranstaltungs-Organisation in neuem Tab öffnen",close:"Veranstaltung beenden",delete:"Veranstaltung löschen",activate:"Veranstaltung aktivieren",deactivate:"Veranstaltung deaktivieren"},confirm:{deleteQuestion:"Veranstaltung wird komplett mit allen Informationen unwiederherstellbar gelöscht. Sind Sie sich sicher?",updateActiveStateQuestion:"Veranstaltung wird bearbeitet. Sind Sie sich sicher?"}},upcoming:"Bevorstehende Veranstaltungen",latest:"Letzte Veranstaltungen",backToMemeberRoom:"Zurück zur Teilnehmeransicht",meeting:{join:"An Videokonferenz teilnehmen",backToMeeting:"Zurück zur Videokonferenz",backToDashboard:"Zurück zum Dashboard",switchView:"Ansicht wechseln"}},polls:{userCountText:"Aktuelle Anzahl wahlberechtigter Teilnehmer",createNewDisabledInfo:"Da gerade eine Abstimmung durchgeführt wird kann keine neue Abstimmung angelegt werden.",noActiveUser:"Keine aktiven Teilnehmer. Abstimmungen können nicht gestartet werden.",headlines:{createTitle:"Neue Abstimmung erstellen",answerOptionsTitle:"Antwortoptionen für Abstimmung",listingTitle:"Abgespeicherte Abstimmungen"},create:{labels:{title:"Was soll abgestimmt werden?",yesNo:"Ja/Nein",yesNoAbstain:"Ja/Nein/Enthalten",custom:"Individuelle Antwortoptionen",listOfAnswerOptions:"Liste der Antwortoptionen",listOfAnswerOptionsInfo:"Ein Eintrag pro Zeile entspricht einer Auswahlmöglichkeit",maxVotes:"Maximal auszuwählen",maxVotesInfo:"0 = alle auswählbar",minVotes:"Minimal auszuwählen",minVotesInfo:"0 = leere Abstimmung möglich",abstention:"Enthaltungsfeld anzeigen",openPoll:"Offene Abstimmung",secretPoll:"Geheime Abstimmung",saveOnly:"Abstimmung speichern",saveAndStart:"Abstimmung speichern & sofort starten",replaceOnly:"Abstimmung ersetzen",replaceAndStart:"Abstimmung ersetzen & sofort starten",reset:"Abbrechen"},asyncEventNoParticipantsWarning:"Hinweis: Für asynchrone Veranstaltungen (Briefwahl) muss mindestens ein Teilnehmer vorhanden sein, um Abstimmungen erstellen zu können.",asyncEventNoParticipantsError:"Abstimmungen können in asynchronen Veranstaltungen nur erstellt werden, wenn mindestens ein Teilnehmer vorhanden ist."},listing:{start:"Abstimmung starten",edit:"Abstimmung bearbeiten",copy:"Abstimmung kopieren",startConfirm:"Möchtest du die Abstimmung starten?",delete:"Abstimmung löschen",deleteConfirm:"Möchtest du die Abstimmung wirklich löschen?",stopConfirm:"Möchtest du die Abstimmung wirklich stoppen?",async:{eventActiveCantCreatePoll:"Da die Veranstaltung bereits im Gange ist, kann keine neue Abstimmung angelegt oder bestehende Abstimmungen manipuliert werden."}},modal:{submitPoll:"Jetzt abstimmen",submitting:"Stimme wird abgegeben...",abstain:"Enthaltung",abstainHelptext:"Entwertet oben ausgewählte Felder; Stimme wird komplett als Enthaltung gezählt!",buttonStart:"Abstimmung starten",maxVote1:"Sie können eine Position auswählen",maxVoteGreater1:"Achtung: Sie können mehrere Positionen auswählen: ",minVoteGreater0:"Achtung: Sie müssen eine Mindestanzahl auswählen: ",canSubmitAnswerForEachVote:"Alle {voteAmount} Stimmzettel auf einmal abgeben",canSubmitAnswerForEachVoteHelptext:"Alle verfügbaren Stimmzettel auf einmal abgeben",close:"Schließen",result:"Ergebnis",voteAllocation:"Stimmenverteilung ({voteAmount} Stimmzettel verfügbar)",votes:"Stimmzettel",useAllVotes:"100 % der Stimmzettel verwenden",votesToUseHelptext:"Geben Sie an, wie viele Ihrer Stimmzettel Sie für diese Umfrage verwenden möchten.",ofTotalVotes:"von Stimmzetteln",fewVotesRemaining:"Nur noch wenige Stimmzettel übrig",ballotCounter:"Stimmzettel {current} von {total}",ballotCount:"Anzahl Stimmzettel"},active:{title:"Aktuelle Abstimmung",close:"Beenden der Abstimmung erzwingen",closeDialog:"Abstimmung schließen?",details:"Abstimmungsdetails",alreadyVoted:"Bisherige Stimmenabgabe",voteStatus:"Abgegebene Stimmen {votes} von maximal {maxVotes}<br>Personen: {users} von {maxUsers}",refresh:"Aktualisieren",noVote:"Keine Stimme"},userUpdate:"Ihr Status wurde aktualisiert.",voteIncrease:"Ihre Stimmenanzahl wurde von {previousVoteAmount} auf {voteAmount} erhöht (+ {difference} Stimmen).",voteDecrease:"Ihre Stimmenanzahl wurde von {previousVoteAmount} auf {voteAmount} reduziert (- {difference} Stimmen).",voteEnabled:"Ihr Abstimmrecht wurde aktiviert.",voteDisabled:"Ihr Abstimmrecht wurde deaktiviert.","info.pollClosed":"Die aktuelle Abstimmung wurde geschlossen. Der Abstimmungsvorgang wurde abgebrochen.",eventIsNotRunning:"Die Veranstaltung startet am {date} um {time} Uhr.",eventIsFinish:"Die Veranstaltung wurde beendet.",error:{submission:"Es ist ein Fehler bei der Abgabe Ihrer Stimme aufgetreten. Bitte wenden Sie sich bei wiederholten Problemen an den Veranstalter."},info:{stillProcessing:"Eine Abstimmung wird gerade verarbeitet. Bitte warten Sie, bis der Vorgang abgeschlossen ist."}},results:{pastResults:"Vergangene Abstimmungen",givenVotes:"Gültige Stimmen:",withoutAbstentions:"(ohne Enthaltungen)",abstentions:"Enthaltungen:",totalVotes:"Gesamt:",voters:"Maximale Stimmenanzahl:",mainResult:"Gesamtergebnis",showMemberList:"Teilnehmerliste Anzeigen",detailResult:"Detailergebnis",showDetailResult:"Ergebnisliste anzeigen",type:{0:"offen",1:"geheim",SECRET:"geheim",PUBLIC:"offen"},showMore:"Weitere Ergebnisse anzeigen",noMoreResults:"Keine weiteren Ergebnisse verfügbar",noResults:"Keine Ergebnisse verfügbar",percentageOfValidVotes:"% der gültigen Stimmen",percentageOfPotentialVotes:"% der potenziellen Stimmen",percentageOfMaxPossibleVotes:"% der maximal möglichen Stimmen",percentageOfMaxPerOption:"% der maximalen Stimmen pro Option",percentageExplanation:"Methode der Prozentberechnung",validVotesExplanation:"Prozentangaben basieren auf gültigen Stimmen (ohne Enthaltungen)",potentialVotesExplanation:"Prozentangaben basieren auf potenziellen Stimmen aller Teilnehmer ({potentialVotes} potenzielle Stimmen = {participantCount} Teilnehmer × {maxOptionsPerVoter} Optionen pro Wähler). Werte über 100% werden angezeigt, wenn mehr Stimmen als theoretisch möglich abgegeben wurden.",maxPossibleVotesExplanation:"Prozentangaben basieren auf maximal möglichen Stimmen ({maxPossibleVotes})",maxPerOptionExplanation:"Prozentangaben basieren auf maximalen Stimmen pro Option ({maxVotesPerOption} Stimmen)",relativeMajority:"Relative Mehrheit",absoluteMajority:"Absolute Mehrheit",absoluteMajorityTooltip:"Absolute Mehrheit: Mehr als 50% der Stimmen je nach ausgewählter Berechnungsmethode",relativeMajorityTooltip:"Relative Mehrheit: Die meisten Stimmen von allen Optionen, aber nicht über 50%",maxVotesPerOption:"Maximalstimmen pro Option",maxVotesPerOptionNoAbstention:"Maximalstimmen pro Option (ohne Enthaltungen)",percentageOfMaxPerOptionNoAbstention:"% der maximalen Stimmen pro Option (ohne Enthaltungen)",maxPerOptionNoAbstentionExplanation:"Prozentangaben basieren auf maximalen Stimmen pro Option (ohne Enthaltungen)"},user:{pending:{tankYou:"Vielen Dank für Ihren Login.",loggedInAs:"Sie sind angemeldet als:",bodyText:"Ihr Login wird nun überprüft. Sobald sich Ihr Status ändert wird sich diese Ansicht automatisch aktualisieren."},verified:{welcome:"Willkommen",activePoll:"Es findet zur Zeit eine Abstimmung statt.<br>Bitte warten Sie auf das Ergebnis. Das Ergebnis erscheint automatisch.<br>Sie müssen die Seite nicht aktualisieren.",voted:"Erfolgreich abgestimmt",noActivePoll:"Es findet zur Zeit keine Abstimmung statt."}},organizers:{user:"Benutzer",createDatetime:"Erstellungsdatum",organisation:"Organisation",state:"Status",email:"E-Mail",confirmedEmail:"E-Mail bestätigt",actions:"Aktionen",username:"Benutzername",verified:"aktiv",verify:"aktivieren",denied:"inaktiv",deny:"deaktivieren",edit:"bearbeiten",delete:"löschen",confirmDelete:"Möchten Sie den Organisator wirklich löschen?",filter:{label:"Filter für Organisatoren",placeholder:"Suche nach Benutzername, E-Mail oder Organisation",reset:"Filter zurücksetzen"},create:{button:"Neuer Organisator",title:"Neuen Organisator anlegen",submit:"Organisator anlegen",success:"Organisator wurde erfolgreich angelegt",skipEmailVerification:"E-Mail-Verifizierung überspringen",autoVerify:"Automatisch aktivieren"},events:{title:"Veranstaltungen",show:"Veranstaltungen anzeigen",upcoming:"Bevorstehende Veranstaltungen",past:"Vergangene Veranstaltungen",noEvents:"Keine Veranstaltungen gefunden",active:"Aktiv",inactive:"Inaktiv",open:"Geöffnet",closed:"Geschlossen",async:"Asynchron",expired:"Abgelaufen",finished:"Beendet",transferred:"Übertragen","transferred-to":"Empfangen von","transferred-from":"Übertragen an",transferredEvents:"Übertragene Veranstaltungen",transferredTo:"Übertragen an",currentOwner:"Aktueller Besitzer",originalOwner:"Ursprünglicher Besitzer",transfer:{title:"Veranstaltung übertragen",eventInfo:"Veranstaltungsinformationen",selectTarget:"Ziel-Organisator auswählen",selectPlaceholder:"Bitte wählen Sie einen Organisator",noTargets:"Keine anderen Organisatoren verfügbar",submit:"Übertragen",success:"Veranstaltung wurde erfolgreich übertragen"},reset:{title:"Auf ursprünglichen Organisator zurücksetzen",success:"Veranstaltung wurde erfolgreich zurückgesetzt"}}},changeOrganizerPassword:{title:"Passwort vergessen",backToStartpage:"Zum Login",emailHasBeenSent:"E-Mail wurde erfolgreich versendet. Bitte folgen Sie den Anweisungen der E-Mail um fortzufahren.",form:{username:"Benutzernamen eingeben *",requestChangePasswordSubmit:"Passwort vergessen-Link anfordern",changePasswordSubmit:"Neues passwort speichern",passwordChangedSuccessfully:"Passwort erfolgreich geändert"}}},pagination:{next:">",previous:"<"},navigation:{logOut:"Ausloggen",terminateTokenSession:"Abmelden",reload:"Aktualisieren",backToDashboard:"Zurück zum Dashboard",backToPolls:"Zurück zu Abstimmungen",backToEvents:"Zurück zur Übersicht",views:{organizerProfile:"Mein Profil",startPage:"Startseite",mainLogin:"Login",organizerDashboard:"Dashboard",organizerEvents:"Veranstaltungen",organizerEventsNew:"Neue Veranstaltung",organizerEventsEdit:"Veranstaltung Bearbeiten",organizerVideoConference:"Videokonferenzsysteme",organizerVideoConferenceNew:"Neue Videokonferenzsysteme",organizerVideoConferenceEdit:"Videokonferenzsysteme Bearbeiten",organizerManagement:"Organisatoren",organizerAllEvents:"Alle Veranstaltungen",organizerMessageEditor:"Übersetzungs-Editor",organizerStaticContentEditor:"Statische Inhalte",organizerGlobalSettings:"Globale Einstellungen",staticContentEditor:"Statische Inhalte",organizerMemberRoom:"Teilnehmer",organizerLobbyRoom:"Warteraum",organizerPolls:"Abstimmungen",organizerPollResults:"Ergebnisse",organizerEventUserNew:"Neuen Nutzer anlegen",organizerEventUserEdit:"Nutzer Bearbeiten",organizerEventUserMultipleNew:"Neue Nutzer anlegen",organizerPollsNew:"Neue Abstimmung anlegen",organizerPollsEdit:"Abstimmung bearbeiten",organizerPollsCopy:"Abstimmung kopieren",staticPages:{dataProtection:"Datenschutz",faq:"Häufige Fragen",functions:"Funktionen und Planung",imprint:"Impressum",manual:"Anleitung",userAgreement:"Nutzervereinbarung"}}},error:{network:{connectionLost:"Serververbindung unterbrochen",internalServerError:"Interner Serverfehler.",consumerError:"Ihre Anfrage ist fehlerhaft.",undefinedError:"Ihre Anfrage ist fehlgeschlagen.",genericError:"Es tut uns leid, etwas ist schief gelaufen.",unauthorized:"Leider ist ein Fehler aufgetreten. Möglicherweise ist Ihre Nutzersession ist abgelaufen. Bitte melden Sie sich erneut an.",organizerUserNameNotFound:"Leider ist ein Fehler aufgetreten. Der Benutzername konnte nicht im  System gefunden werden.",invalidAnonymousLoginError:"Eine anonyme Anmeldung für Veranstaltungen ohne offenen Warteraum ist nicht möglich.",inactiveEventLoginError:"Login für inaktive Veranstaltungen ist nicht möglich."},formValidation:{invalidForm:"Bitte überprüfen Sie ihre Eingaben.",sameAs:"Die Werte müssen identisch sein.",required:"Dieses Feld muss ausgefüllt werden.",requiredIf:"Dieses Feld muss ausgefüllt werden.",valueAlreadyExist:"Der Wert existiert bereits."},routing:{"404Headline":"Die angeforderte Seite konnte leider nicht gefunden werden."},api:{InvalidPasswordError:"Bitte prüfen Sie das eingegebene Passwort.",RecordNotFoundError:"Die übermittelten Daten sind fehlerhaft."}},success:{login:{organizer:"Willkommen im Adminbereich.",eventUser:"Willkommen {userName}!",activateEventUserAuthToken:"Ihr Gerät wurde erfolgreich für die Veranstaltung aktiviert."},logout:{organizer:"Sie haben sich erfolgreich abgemeldet.",eventUser:"Sie haben sich erfolgreich abgemeldet."},organizer:{profile:{savedSuccessfully:"Ihre Daten wurde erfolgreich gespeichert."},videoConference:{createdSuccessfully:"Der Datensatz wurde erfolgreich erstellt.",updatedSuccessfully:"Der Datensatz wurde erfolgreich aktualisiert.",deletedSuccessfully:"Der Datensatz wurde erfolgreich entfernt."},organizers:{updatedSuccessfully:"Der Datensatz wurde erfolgreich aktualisiert.",deletedSuccessfully:"Der Datensatz wurde erfolgreich entfernt."},systemSettings:{saved:"Systemeinstellungen erfolgreich gespeichert."},events:{createdSuccessfully:"Die Veranstaltung wurde erfolgreich erstellt.",updatedSuccessfully:"Die Veranstaltung wurde erfolgreich aktualisiert.",deletedSuccessfully:"Die Veranstaltung wurde erfolgreich entfernt."},eventUser:{createdSuccessfully:"Der Nutzer wurde erfolgreich erstellt.",updatedSuccessfully:"Der Nutzer wurde erfolgreich aktualisiert.",deletedSuccessfully:"Der Nutzer wurde erfolgreich entfernt."},poll:{createdSuccessfully:"Die Abstimmung wurde erfolgreich erstellt.",createdAndStartedSuccessfully:"Die Abstimmung wurde erfolgreich erstellt und gestartet.",updatedSuccessfully:"Die Abstimmung wurde erfolgreich aktualisiert.",updatedAndStartedSuccessfully:"Die Abstimmung wurde erfolgreich aktualisiert und gestartet.",deletedSuccessfully:"Die Abstimmung wurde erfolgreich entfernt.",startedSuccessfully:"Die Abstimmung wurde erfolgreich gestartet.",stoppedSuccessfully:"Die Abstimmung wurde erfolgreich gestoppt."}}},notice:{logout:{wrongEvent:"Sie waren noch in einer anderen Veranstaltung angemeldet. Bitte melden Sie sich für die diese Veranstaltung erneut an."}},eventUser:{publicName:"Öffentlicher Name",verified:"Freigeschaltet",allowToVote:"Abstimmrecht",online:"Online",username:"Nutzername",voteAmount:"Anzahl der Stimmen",createDatetime:"Erstellungsdatum",onlineState:{online:"Online",offline:"Offline"},filter:{byUsername:"Filter für Nutzername oder Öffentlicher Name",reset:"Filter zurücksetzen"}},common:{loading:"Ladevorgang",processing:"Verarbeitung läuft...",error:{loading:"Fehler beim Laden der Daten."}},router:{redirect:{activeOrganizerSession:"Sie wurden automatisch weitergeleitet, da Sie noch als Organisator angemeldet sind.",invalidEventSlug:'Das event mit der URL "{slug}" existiert nicht.'}},form:{bootstrapStyles:{addVariable:"Variable hinzufügen"}}},en:{view:{systemSettings:{title:"Global System Settings",titleSuffix:{label:"Title Suffix (Browser Tab)",placeholder:"e.g. digitalwahl.org or vereinswahl.vielwerth-junginger.de",help:'Displayed as suffix in browser tab: "Page Title - Your Suffix"'},favicon:{label:"Favicon (Browser Icon)",placeholder:"https://example.com/favicon.png",help:"URL to a 32x32px PNG/ICO image for the browser icon",upload:"Upload",preview:"Preview"},useDirectStaticPaths:{label:"Use direct static paths",help:"Enables direct paths for static content"},useDbFooterNavigation:{label:"Use database footer navigation",help:"Load navigation in footer from database"},save:"Save",saving:"Saving...",lastUpdated:"Last updated",updatedBy:"by"},results:{percentageOfValidVotes:"% of Valid Votes",percentageOfPotentialVotes:"% of Potential Votes",percentageOfMaxPossibleVotes:"% of Max Possible Votes",percentageOfMaxPerOption:"% of Max Per Option",percentageExplanation:"Percentage Calculation Method",validVotesExplanation:"Showing percentages based on valid votes only (excluding abstentions)",potentialVotesExplanation:"Showing percentages based on potential votes from all participants ({potentialVotes} potential votes = {participantCount} participants × {maxOptionsPerVoter} options per voter). Values above 100% are shown when more votes than theoretically possible were cast.",maxPossibleVotesExplanation:"Showing percentages based on maximum possible votes ({maxPossibleVotes})",maxPerOptionExplanation:"Showing percentages based on maximum votes per option ({maxVotesPerOption} votes)",relativeMajority:"Relative Majority",absoluteMajority:"Absolute Majority",absoluteMajorityTooltip:"Absolute majority: More than 50% of votes according to selected calculation method",relativeMajorityTooltip:"Relative majority: The most votes of all options, but not over 50%"},navigation:{logOut:"Ausloggen",terminateTokenSession:"Abmelden",reload:"Aktualisieren",backToDashboard:"Zurück zum Dashboard",backToPolls:"Zurück zu Abstimmungen",backToEvents:"Zurück zur Übersicht",views:{organizerProfile:"Mein Profil",startPage:"Startseite",mainLogin:"Login",organizerDashboard:"Dashboard",organizerEvents:"Veranstaltungen",organizerEventsNew:"Neue Veranstaltung",organizerEventsEdit:"Veranstaltung Bearbeiten",organizerVideoConference:"Videokonferenzsysteme",organizerVideoConferenceNew:"Neue Videokonferenzsysteme",organizerVideoConferenceEdit:"Videokonferenzsysteme Bearbeiten",organizerManagement:"Organisatoren",organizerAllEvents:"Alle Veranstaltungen",organizerMessageEditor:"Translation Editor",organizerStaticContentEditor:"Static Content",organizerGlobalSettings:"Global Settings",staticContentEditor:"Static Content",organizerMemberRoom:"Teilnehmer",organizerLobbyRoom:"Warteraum",organizerPolls:"Abstimmungen",organizerPollResults:"Ergebnisse",organizerEventUserNew:"Neuen Nutzer anlegen",organizerEventUserEdit:"Nutzer Bearbeiten",organizerEventUserMultipleNew:"Neue Nutzer anlegen",organizerPollsNew:"Neue Abstimmung anlegen",organizerPollsEdit:"Abstimmung bearbeiten",organizerPollsCopy:"Abstimmung kopieren",staticPages:{dataProtection:"Datenschutz",faq:"Häufige Fragen",functions:"Funktionen und Planung",imprint:"Impressum",manual:"Anleitung",userAgreement:"Nutzervereinbarung"}}},organizers:{user:"Benutzer",createDatetime:"Erstellungsdatum",organisation:"Organisation",state:"Status",email:"E-Mail",confirmedEmail:"E-Mail bestätigt",actions:"Aktionen",username:"Benutzername",verified:"aktiv",verify:"aktivieren",denied:"inaktiv",deny:"deaktivieren",edit:"bearbeiten",delete:"löschen",confirmDelete:"Möchten Sie den Organisator wirklich löschen?",filter:{label:"Filter für Organisatoren",placeholder:"Suche nach Benutzername, E-Mail oder Organisation",reset:"Filter zurücksetzen"},events:{title:"Veranstaltungen",show:"Veranstaltungen anzeigen",upcoming:"Bevorstehende Veranstaltungen",past:"Vergangene Veranstaltungen",noEvents:"Keine Veranstaltungen gefunden",active:"Aktiv",inactive:"Inaktiv",open:"Geöffnet",closed:"Geschlossen",async:"Asynchron",expired:"Abgelaufen",finished:"Beendet",transferred:"Übertragen","transferred-to":"Empfangen von","transferred-from":"Übertragen an",transferredEvents:"Übertragene Veranstaltungen",transferredTo:"Übertragen an",currentOwner:"Aktueller Besitzer",originalOwner:"Ursprünglicher Besitzer",transfer:{title:"Veranstaltung übertragen",eventInfo:"Veranstaltungsinformationen",selectTarget:"Ziel-Organisator auswählen",selectPlaceholder:"Bitte wählen Sie einen Organisator",noTargets:"Keine anderen Organisatoren verfügbar",submit:"Übertragen",success:"Veranstaltung wurde erfolgreich übertragen"},reset:{title:"Auf ursprünglichen Organisator zurücksetzen",success:"Veranstaltung wurde erfolgreich zurückgesetzt"}}}}}},pte=mt`
  query GetTranslations {
    translations
  }
`;let ik=null;const pd=Z(!1);function vte(){if(!ik){const n=JSON.parse(JSON.stringify(ad));ik=e4.createI18n({locale:"de",fallbackLocale:"de",messages:n,legacy:!1,globalInjection:!0,missingWarn:!1,fallbackWarn:!1})}return ik}const ss=vte();let rk=!1,hb=null;function WC(n,t){if(!t||typeof t!="object")return n;if(!n||typeof n!="object")return t;const e={...n};return Object.keys(t).forEach(i=>{t[i]&&typeof t[i]=="object"&&e[i]&&typeof e[i]=="object"?e[i]=WC(e[i],t[i]):e[i]=t[i]}),e}async function uy(){if(rk)return hb;rk=!0,hb=(async()=>{try{const{apolloClient:n}=await eo(async()=>{const{apolloClient:e}=await Promise.resolve().then(()=>jne);return{apolloClient:e}},void 0),t=await n.query({query:pte,fetchPolicy:"network-only"});if(t.data&&t.data.translations)try{const e=JSON.parse(t.data.translations),i=JSON.parse(JSON.stringify(ad.de||{})),r=JSON.parse(JSON.stringify(ad.en||{})),s=e.de?WC(i,e.de):i,o=e.en?WC(r,e.en):r;return ss.global.setLocaleMessage("de",s),ss.global.setLocaleMessage("en",o),pd.value=!0,!0}catch(e){console.error("[i18n] Failed to parse or merge translations:",e.message)}}catch{console.warn("[i18n] Could not load translations from API")}try{const n=JSON.parse(JSON.stringify(ad.de||{})),t=JSON.parse(JSON.stringify(ad.en||{}));ss.global.setLocaleMessage("de",n),ss.global.setLocaleMessage("en",t)}catch(n){console.error("[i18n] Error setting default translations:",n.message)}return pd.value=!0,!1})();try{return await hb}finally{rk=!1,hb=null}}uy().catch(n=>{console.error("[i18n] Error initializing translations:",n.message),pd.value=!0});const{t:Xe}=ss.global;class cn extends Error{constructor(t){super(t)}}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let t4;const s0=n=>t4=n,n4=Symbol();function jC(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var Xg;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(Xg||(Xg={}));function bte(){const n=$S(!0),t=n.run(()=>Z({}));let e=[],i=[];const r=bm({install(s){s0(r),r._a=s,s.provide(n4,r),s.config.globalProperties.$pinia=r,i.forEach(o=>e.push(o)),i=[]},use(s){return this._a?e.push(s):i.push(s),this},_p:e,_a:null,_e:n,_s:new Map,state:t});return r}const i4=()=>{};function iR(n,t,e,i=i4){n.push(t);const r=()=>{const s=n.indexOf(t);s>-1&&(n.splice(s,1),i())};return!e&&yu()&&_u(r),r}function gf(n,...t){n.slice().forEach(e=>{e(...t)})}const wte=n=>n(),rR=Symbol(),sk=Symbol();function qC(n,t){n instanceof Map&&t instanceof Map?t.forEach((e,i)=>n.set(i,e)):n instanceof Set&&t instanceof Set&&t.forEach(n.add,n);for(const e in t){if(!t.hasOwnProperty(e))continue;const i=t[e],r=n[e];jC(r)&&jC(i)&&n.hasOwnProperty(e)&&!En(i)&&!Do(i)?n[e]=qC(r,i):n[e]=i}return n}const yte=Symbol();function _te(n){return!jC(n)||!n.hasOwnProperty(yte)}const{assign:Rc}=Object;function kte(n){return!!(En(n)&&n.effect)}function Ete(n,t,e,i){const{state:r,actions:s,getters:o}=t,a=e.state.value[n];let l;function c(){a||(e.state.value[n]=r?r():{});const u=jS(e.state.value[n]);return Rc(u,s,Object.keys(o||{}).reduce((d,f)=>(d[f]=bm(le(()=>{s0(e);const h=e._s.get(n);return o[f].call(h,h)})),d),{}))}return l=r4(n,c,t,e,i,!0),l}function r4(n,t,e={},i,r,s){let o;const a=Rc({actions:{}},e),l={deep:!0};let c,u,d=[],f=[],h;const g=i.state.value[n];!s&&!g&&(i.state.value[n]={}),Z({});let v;function _(D){let R;c=u=!1,typeof D=="function"?(D(i.state.value[n]),R={type:Xg.patchFunction,storeId:n,events:h}):(qC(i.state.value[n],D),R={type:Xg.patchObject,payload:D,storeId:n,events:h});const S=v=Symbol();Zn().then(()=>{v===S&&(c=!0)}),u=!0,gf(d,R,i.state.value[n])}const w=s?function(){const{state:R}=e,S=R?R():{};this.$patch(I=>{Rc(I,S)})}:i4;function C(){o.stop(),d=[],f=[],i._s.delete(n)}const k=(D,R="")=>{if(rR in D)return D[sk]=R,D;const S=function(){s0(i);const I=Array.from(arguments),F=[],H=[];function q(U){F.push(U)}function N(U){H.push(U)}gf(f,{args:I,name:S[sk],store:A,after:q,onError:N});let $;try{$=D.apply(this&&this.$id===n?this:A,I)}catch(U){throw gf(H,U),U}return $ instanceof Promise?$.then(U=>(gf(F,U),U)).catch(U=>(gf(H,U),Promise.reject(U))):(gf(F,$),$)};return S[rR]=!0,S[sk]=R,S},E={_p:i,$id:n,$onAction:iR.bind(null,f),$patch:_,$reset:w,$subscribe(D,R={}){const S=iR(d,D,R.detached,()=>I()),I=o.run(()=>gt(()=>i.state.value[n],F=>{(R.flush==="sync"?u:c)&&D({storeId:n,type:Xg.direct,events:h},F)},Rc({},l,R)));return S},$dispose:C},A=Kt(E);i._s.set(n,A);const p=(i._a&&i._a.runWithContext||wte)(()=>i._e.run(()=>(o=$S()).run(()=>t({action:k}))));for(const D in p){const R=p[D];if(En(R)&&!kte(R)||Do(R))s||(g&&_te(R)&&(En(R)?R.value=g[D]:qC(R,g[D])),i.state.value[n][D]=R);else if(typeof R=="function"){const S=k(R,D);p[D]=S,a.actions[D]=R}}return Rc(A,p),Rc(en(A),p),Object.defineProperty(A,"$state",{get:()=>i.state.value[n],set:D=>{_(R=>{Rc(R,D)})}}),i._p.forEach(D=>{Rc(A,o.run(()=>D({store:A,app:i._a,pinia:i,options:a})))}),g&&s&&e.hydrate&&e.hydrate(A.$state,g),c=!0,u=!0,A}/*! #__NO_SIDE_EFFECTS__ */function Cte(n,t,e){let i,r;const s=typeof t=="function";i=n,r=s?e:t;function o(a,l){const c=rA();return a=a||(c?Ci(n4,null):null),a&&s0(a),a=t4,a._s.has(i)||(s?r4(i,t,r,a):Ete(i,r,a)),a._s.get(i)}return o.$id=i,o}function s4(n){{const t=en(n),e={};for(const i in t){const r=t[i];r.effect?e[i]=le({get:()=>n[i],set(s){n[i]=s}}):(En(r)||Do(r))&&(e[i]=Oh(n,i))}return e}}const Tte=mt`
  query organizer($organizerId: ID!) {
    organizer(organizerId: $organizerId) {
      id
      username
      email
      password
      publicName
      publicOrganisation
      confirmedEmail
      verified
      superAdmin
      createDatetime
      zoomMeetings {
        id
        title
        sdkKey
        sdkSecret
      }
    }
  }
`,Ste=mt`
  query eventUser($id: ID) {
    eventUser(id: $id) {
      id
      eventId
      publicName
      verified
      allowToVote
      online
      username
      voteAmount
      pollHints
    }
  }
`;function sR(n,t,e=1){const i=new Date;i.setTime(i.getTime()+e*24*60*60*1e3);const r="expires="+i.toUTCString();document.cookie=n+"="+t+";"+r+";path=/"}function oR(n){const t=new RegExp(`(^| )${n}=([^;]+)`),e=document.cookie.match(t);if(e)return e[2]}const _v={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},Hh={LIGHT:"light",DARK:"dark",COLORED:"colored",AUTO:"auto"},Rs={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},Ate={BOUNCE:"bounce",SLIDE:"slide",FLIP:"flip",ZOOM:"zoom"},Ite={dangerouslyHTMLString:!1,multiple:!0,position:_v.TOP_RIGHT,autoClose:5e3,transition:"bounce",hideProgressBar:!1,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,className:"",bodyClassName:"",style:{},progressClassName:"",progressStyle:{},role:"alert",theme:"light"},Pte={rtl:!1,newestOnTop:!1,toastClassName:""},o4={...Ite,...Pte};Rs.DEFAULT;var ii=(n=>(n[n.COLLAPSE_DURATION=300]="COLLAPSE_DURATION",n[n.DEBOUNCE_DURATION=50]="DEBOUNCE_DURATION",n.CSS_NAMESPACE="Toastify",n))(ii||{}),GC=(n=>(n.ENTRANCE_ANIMATION_END="d",n))(GC||{});const xte={enter:"Toastify--animate Toastify__bounce-enter",exit:"Toastify--animate Toastify__bounce-exit",appendPosition:!0},Ote={enter:"Toastify--animate Toastify__slide-enter",exit:"Toastify--animate Toastify__slide-exit",appendPosition:!0},Rte={enter:"Toastify--animate Toastify__zoom-enter",exit:"Toastify--animate Toastify__zoom-exit"},Vte={enter:"Toastify--animate Toastify__flip-enter",exit:"Toastify--animate Toastify__flip-exit"};function a4(n){let t=xte;if(!n||typeof n=="string")switch(n){case"flip":t=Vte;break;case"zoom":t=Rte;break;case"slide":t=Ote;break}else t=n;return t}function Dte(n){return n.containerId||String(n.position)}const o0="will-unmount";function Nte(n=_v.TOP_RIGHT){return!!document.querySelector(".".concat(ii.CSS_NAMESPACE,"__toast-container--").concat(n))}function Lte(n=_v.TOP_RIGHT){return"".concat(ii.CSS_NAMESPACE,"__toast-container--").concat(n)}function Mte(n,t,e=!1){const i=["".concat(ii.CSS_NAMESPACE,"__toast-container"),"".concat(ii.CSS_NAMESPACE,"__toast-container--").concat(n),e?"".concat(ii.CSS_NAMESPACE,"__toast-container--rtl"):null].filter(Boolean).join(" ");return Sh(t)?t({position:n,rtl:e,defaultClassName:i}):"".concat(i," ").concat(t||"")}function $te(n){var t;const{position:e,containerClassName:i,rtl:r=!1,style:s={}}=n,o=ii.CSS_NAMESPACE,a=Lte(e),l=document.querySelector(".".concat(o)),c=document.querySelector(".".concat(a)),u=!!c&&!((t=c.className)!=null&&t.includes(o0)),d=l||document.createElement("div"),f=document.createElement("div");f.className=Mte(e,i,r),f.dataset.testid="".concat(ii.CSS_NAMESPACE,"__toast-container--").concat(e),f.id=Dte(n);for(const h in s)if(Object.prototype.hasOwnProperty.call(s,h)){const g=s[h];f.style[h]=g}return l||(d.className=ii.CSS_NAMESPACE,document.body.appendChild(d)),u||d.appendChild(f),f}function KC(n){var t,e,i;const r=typeof n=="string"?n:((t=n.currentTarget)==null?void 0:t.id)||((e=n.target)==null?void 0:e.id),s=document.getElementById(r);s&&s.removeEventListener("animationend",KC,!1);try{Bp[r].unmount(),(i=document.getElementById(r))==null||i.remove(),delete Bp[r],delete Nr[r]}catch{}}const Bp=Kt({});function Bte(n,t){const e=document.getElementById(String(t));e&&(Bp[e.id]=n)}function YC(n,t=!0){const e=String(n);if(!Bp[e])return;const i=document.getElementById(e);i&&i.classList.add(o0),t?(Ute(n),i&&i.addEventListener("animationend",KC,!1)):KC(e),ll.items=ll.items.filter(r=>r.containerId!==n)}function Fte(n){for(const t in Bp)YC(t,n);ll.items=[]}function l4(n,t){const e=document.getElementById(n.toastId);if(e){let i=n;i={...i,...a4(i.transition)};const r=i.appendPosition?"".concat(i.exit,"--").concat(i.position):i.exit;e.className+=" ".concat(r),t&&t(e)}}function Ute(n){for(const t in Nr)if(t===n)for(const e of Nr[t]||[])l4(e)}function zte(n){const t=kv().find(e=>e.toastId===n);return t==null?void 0:t.containerId}function GA(n){return document.getElementById(n)}function Hte(n){const t=GA(n.containerId);return t&&t.classList.contains(o0)}function aR(n){var t;const e=ya(n.content)?en(n.content.props):null;return e??en((t=n.data)!=null?t:{})}function Wte(n){return n?ll.items.filter(t=>t.containerId===n).length>0:ll.items.length>0}function jte(){if(ll.items.length>0){const n=ll.items.shift();dw(n==null?void 0:n.toastContent,n==null?void 0:n.toastProps)}}const Nr=Kt({}),ll=Kt({items:[]});function kv(){const n=en(Nr);return Object.values(n).reduce((t,e)=>[...t,...e],[])}function qte(n){return kv().find(t=>t.toastId===n)}function dw(n,t={}){if(Hte(t)){const e=GA(t.containerId);e&&e.addEventListener("animationend",QC.bind(null,n,t),!1)}else QC(n,t)}function QC(n,t={}){const e=GA(t.containerId);e&&e.removeEventListener("animationend",QC.bind(null,n,t),!1);const i=Nr[t.containerId]||[],r=i.length>0;if(!r&&!Nte(t.position)){const s=$te(t),o=xp(dne,t);o.mount(s),Bte(o,s.id)}r&&(t.position=i[0].position),Zn(()=>{t.updateId?Ja.update(t):Ja.add(n,t)})}const Ja={add(n,t){const{containerId:e=""}=t;e&&(Nr[e]=Nr[e]||[],Nr[e].find(i=>i.toastId===t.toastId)||setTimeout(()=>{var i,r;t.newestOnTop?(i=Nr[e])==null||i.unshift(t):(r=Nr[e])==null||r.push(t),t.onOpen&&t.onOpen(aR(t))},t.delay||0))},remove(n){if(n){const t=zte(n);if(t){const e=Nr[t];let i=e.find(r=>r.toastId===n);Nr[t]=e.filter(r=>r.toastId!==n),!Nr[t].length&&!Wte(t)&&YC(t,!1),jte(),Zn(()=>{i!=null&&i.onClose&&(i.onClose(aR(i)),i=void 0)})}}},update(n={}){const{containerId:t=""}=n;if(t&&n.updateId){Nr[t]=Nr[t]||[];const e=Nr[t].find(i=>i.toastId===n.toastId);e&&setTimeout(()=>{for(const i in n)if(Object.prototype.hasOwnProperty.call(n,i)){const r=n[i];e[i]=r}},n.delay||0)}},clear(n,t=!0){n?YC(n,t):Fte(t)},dismissCallback(n){var t;const e=(t=n.currentTarget)==null?void 0:t.id,i=document.getElementById(e);i&&(i.removeEventListener("animationend",Ja.dismissCallback,!1),setTimeout(()=>{Ja.remove(e)}))},dismiss(n){if(n){const t=kv();for(const e of t)if(e.toastId===n){l4(e,i=>{i.addEventListener("animationend",Ja.dismissCallback,!1)});break}}}},c4=Kt({}),dy=Kt({});function u4(){return Math.random().toString(36).substring(2,9)}function Gte(n){return typeof n=="number"&&!isNaN(n)}function ZC(n){return typeof n=="string"}function Sh(n){return typeof n=="function"}function a0(...n){return An(...n)}function fw(n){return typeof n=="object"&&(!!(n!=null&&n.render)||!!(n!=null&&n.setup)||typeof(n==null?void 0:n.type)=="object")}function Kte(n={}){c4["".concat(ii.CSS_NAMESPACE,"-default-options")]=n}function Yte(){return c4["".concat(ii.CSS_NAMESPACE,"-default-options")]||o4}function Qte(){return document.documentElement.classList.contains("dark")?"dark":"light"}var hw=(n=>(n[n.Enter=0]="Enter",n[n.Exit=1]="Exit",n))(hw||{});const d4={containerId:{type:[String,Number],required:!1,default:""},clearOnUrlChange:{type:Boolean,required:!1,default:!0},dangerouslyHTMLString:{type:Boolean,required:!1,default:!1},multiple:{type:Boolean,required:!1,default:!0},limit:{type:Number,required:!1,default:void 0},position:{type:String,required:!1,default:_v.TOP_LEFT},bodyClassName:{type:String,required:!1,default:""},autoClose:{type:[Number,Boolean],required:!1,default:!1},closeButton:{type:[Boolean,Function,Object],required:!1,default:void 0},transition:{type:[String,Object],required:!1,default:"bounce"},hideProgressBar:{type:Boolean,required:!1,default:!1},pauseOnHover:{type:Boolean,required:!1,default:!0},pauseOnFocusLoss:{type:Boolean,required:!1,default:!0},closeOnClick:{type:Boolean,required:!1,default:!0},progress:{type:Number,required:!1,default:void 0},progressClassName:{type:String,required:!1,default:""},toastStyle:{type:Object,required:!1,default(){return{}}},progressStyle:{type:Object,required:!1,default(){return{}}},role:{type:String,required:!1,default:"alert"},theme:{type:String,required:!1,default:Hh.AUTO},content:{type:[String,Object,Function],required:!1,default:""},toastId:{type:[String,Number],required:!1,default:""},data:{type:[Object,String],required:!1,default(){return{}}},type:{type:String,required:!1,default:Rs.DEFAULT},icon:{type:[Boolean,String,Number,Object,Function],required:!1,default:void 0},delay:{type:Number,required:!1,default:void 0},onOpen:{type:Function,required:!1,default:void 0},onClose:{type:Function,required:!1,default:void 0},onClick:{type:Function,required:!1,default:void 0},isLoading:{type:Boolean,required:!1,default:void 0},rtl:{type:Boolean,required:!1,default:!1},toastClassName:{type:String,required:!1,default:""},updateId:{type:[String,Number],required:!1,default:""}},Zte={autoClose:{type:[Number,Boolean],required:!0},isRunning:{type:Boolean,required:!1,default:void 0},type:{type:String,required:!1,default:Rs.DEFAULT},theme:{type:String,required:!1,default:Hh.AUTO},hide:{type:Boolean,required:!1,default:void 0},className:{type:[String,Function],required:!1,default:""},controlledProgress:{type:Boolean,required:!1,default:void 0},rtl:{type:Boolean,required:!1,default:void 0},isIn:{type:Boolean,required:!1,default:void 0},progress:{type:Number,required:!1,default:void 0},closeToast:{type:Function,required:!1,default:void 0}},Jte=Cn({name:"ProgressBar",props:Zte,setup(n,{attrs:t}){const e=Z(),i=le(()=>n.hide?"true":"false"),r=le(()=>({...t.style||{},animationDuration:"".concat(n.autoClose===!0?5e3:n.autoClose,"ms"),animationPlayState:n.isRunning?"running":"paused",opacity:n.hide||n.autoClose===!1?0:1,transform:n.controlledProgress?"scaleX(".concat(n.progress,")"):"none"})),s=le(()=>["".concat(ii.CSS_NAMESPACE,"__progress-bar"),n.controlledProgress?"".concat(ii.CSS_NAMESPACE,"__progress-bar--controlled"):"".concat(ii.CSS_NAMESPACE,"__progress-bar--animated"),"".concat(ii.CSS_NAMESPACE,"__progress-bar-theme--").concat(n.theme),"".concat(ii.CSS_NAMESPACE,"__progress-bar--").concat(n.type),n.rtl?"".concat(ii.CSS_NAMESPACE,"__progress-bar--rtl"):null].filter(Boolean).join(" ")),o=le(()=>"".concat(s.value," ").concat((t==null?void 0:t.class)||"")),a=()=>{e.value&&(e.value.onanimationend=null,e.value.ontransitionend=null)},l=()=>{n.isIn&&n.closeToast&&n.autoClose!==!1&&(n.closeToast(),a())},c=le(()=>n.controlledProgress?null:l),u=le(()=>n.controlledProgress?l:null);return yh(()=>{e.value&&(a(),e.value.onanimationend=c.value,e.value.ontransitionend=u.value)}),()=>Ce("div",{ref:e,role:"progressbar","aria-hidden":i.value,"aria-label":"notification timer",class:o.value,style:r.value},null)}}),Xte=Cn({name:"CloseButton",inheritAttrs:!1,props:{theme:{type:String,required:!1,default:Hh.AUTO},type:{type:String,required:!1,default:Hh.LIGHT},ariaLabel:{type:String,required:!1,default:"close"},closeToast:{type:Function,required:!1,default:void 0}},setup(n){return()=>Ce("button",{class:"".concat(ii.CSS_NAMESPACE,"__close-button ").concat(ii.CSS_NAMESPACE,"__close-button--").concat(n.theme),type:"button",onClick:t=>{t.stopPropagation(),n.closeToast&&n.closeToast(t)},"aria-label":n.ariaLabel},[Ce("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},[Ce("path",{"fill-rule":"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"},null)])])}}),l0=({theme:n,type:t,path:e,...i})=>Ce("svg",An({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:n==="colored"?"currentColor":"var(--toastify-icon-color-".concat(t,")")},i),[Ce("path",{d:e},null)]);function ene(n){return Ce(l0,An(n,{path:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}),null)}function tne(n){return Ce(l0,An(n,{path:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}),null)}function nne(n){return Ce(l0,An(n,{path:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}),null)}function ine(n){return Ce(l0,An(n,{path:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}),null)}function rne(){return Ce("div",{class:"".concat(ii.CSS_NAMESPACE,"__spinner")},null)}const JC={info:tne,warning:ene,success:nne,error:ine,spinner:rne},sne=n=>n in JC;function one({theme:n,type:t,isLoading:e,icon:i}){let r;const s={theme:n,type:t};return e?r=JC.spinner():i===!1?r=void 0:fw(i)?r=en(i):Sh(i)?r=i(s):ya(i)?r=_a(i,s):ZC(i)||Gte(i)?r=i:sne(t)&&(r=JC[t](s)),r}const ane=()=>{};function lne(n,t,e=ii.COLLAPSE_DURATION){const{scrollHeight:i,style:r}=n,s=e;requestAnimationFrame(()=>{r.minHeight="initial",r.height=i+"px",r.transition="all ".concat(s,"ms"),requestAnimationFrame(()=>{r.height="0",r.padding="0",r.margin="0",setTimeout(t,s)})})}function cne(n){const t=Z(!1),e=Z(!1),i=Z(!1),r=Z(hw.Enter),s=Kt({...n,appendPosition:n.appendPosition||!1,collapse:typeof n.collapse>"u"?!0:n.collapse,collapseDuration:n.collapseDuration||ii.COLLAPSE_DURATION}),o=s.done||ane,a=le(()=>s.appendPosition?"".concat(s.enter,"--").concat(s.position):s.enter),l=le(()=>s.appendPosition?"".concat(s.exit,"--").concat(s.position):s.exit),c=le(()=>n.pauseOnHover?{onMouseenter:_,onMouseleave:v}:{});function u(){const C=a.value.split(" ");f().addEventListener(GC.ENTRANCE_ANIMATION_END,v,{once:!0});const k=A=>{const x=f();A.target===x&&(x.dispatchEvent(new Event(GC.ENTRANCE_ANIMATION_END)),x.removeEventListener("animationend",k),x.removeEventListener("animationcancel",k),r.value===hw.Enter&&A.type!=="animationcancel"&&x.classList.remove(...C))},E=()=>{const A=f();A.classList.add(...C),A.addEventListener("animationend",k),A.addEventListener("animationcancel",k)};n.pauseOnFocusLoss&&h(),E()}function d(){if(!f())return;const C=()=>{const E=f();E.removeEventListener("animationend",C),s.collapse?lne(E,o,s.collapseDuration):o()},k=()=>{const E=f();r.value=hw.Exit,E&&(E.className+=" ".concat(l.value),E.addEventListener("animationend",C))};e.value||(i.value?C():setTimeout(k))}function f(){return n.toastRef.value}function h(){document.hasFocus()||_(),window.addEventListener("focus",v),window.addEventListener("blur",_)}function g(){window.removeEventListener("focus",v),window.removeEventListener("blur",_)}function v(){(!n.loading.value||n.isLoading===void 0)&&(t.value=!0)}function _(){t.value=!1}function w(C){C&&(C.stopPropagation(),C.preventDefault()),e.value=!1}return yh(d),yh(()=>{const C=kv();e.value=C.findIndex(k=>k.toastId===s.toastId)>-1}),yh(()=>{n.isLoading!==void 0&&(n.loading.value?_():v())}),Jt(u),wo(()=>{n.pauseOnFocusLoss&&g()}),{isIn:e,isRunning:t,hideToast:w,eventHandlers:c}}const une=Cn({name:"ToastItem",inheritAttrs:!1,props:d4,setup(n){const t=Z(),e=le(()=>!!n.isLoading),i=le(()=>n.progress!==void 0&&n.progress!==null),r=le(()=>one(n)),s=le(()=>["".concat(ii.CSS_NAMESPACE,"__toast"),"".concat(ii.CSS_NAMESPACE,"__toast-theme--").concat(n.theme),"".concat(ii.CSS_NAMESPACE,"__toast--").concat(n.type),n.rtl?"".concat(ii.CSS_NAMESPACE,"__toast--rtl"):void 0,n.toastClassName||""].filter(Boolean).join(" ")),{isRunning:o,isIn:a,hideToast:l,eventHandlers:c}=cne({toastRef:t,loading:e,done:()=>{Ja.remove(n.toastId)},...a4(n.transition),...n});return()=>Ce("div",An({id:n.toastId,class:s.value,style:n.toastStyle||{},ref:t,"data-testid":"toast-item-".concat(n.toastId),onClick:u=>{n.closeOnClick&&l(),n.onClick&&n.onClick(u)}},c.value),[Ce("div",{role:n.role,"data-testid":"toast-body",class:"".concat(ii.CSS_NAMESPACE,"__toast-body ").concat(n.bodyClassName||"")},[r.value!=null&&Ce("div",{"data-testid":"toast-icon-".concat(n.type),class:["".concat(ii.CSS_NAMESPACE,"__toast-icon"),n.isLoading?"":"".concat(ii.CSS_NAMESPACE,"--animate-icon ").concat(ii.CSS_NAMESPACE,"__zoom-enter")].join(" ")},[fw(r.value)?ca(en(r.value),{theme:n.theme,type:n.type}):Sh(r.value)?r.value({theme:n.theme,type:n.type}):r.value]),Ce("div",{"data-testid":"toast-content"},[fw(n.content)?ca(en(n.content),{toastProps:en(n),closeToast:l,data:n.data}):Sh(n.content)?n.content({toastProps:en(n),closeToast:l,data:n.data}):n.dangerouslyHTMLString?ca("div",{innerHTML:n.content}):n.content])]),(n.closeButton===void 0||n.closeButton===!0)&&Ce(Xte,{theme:n.theme,closeToast:u=>{u.stopPropagation(),u.preventDefault(),l()}},null),fw(n.closeButton)?ca(en(n.closeButton),{closeToast:l,type:n.type,theme:n.theme}):Sh(n.closeButton)?n.closeButton({closeToast:l,type:n.type,theme:n.theme}):null,Ce(Jte,{className:n.progressClassName,style:n.progressStyle,rtl:n.rtl,theme:n.theme,isIn:a.value,type:n.type,hide:n.hideProgressBar,isRunning:o.value,autoClose:n.autoClose,controlledProgress:i.value,progress:n.progress,closeToast:n.isLoading?void 0:l},null)])}});let ep=0;function f4(){typeof window>"u"||(ep&&window.cancelAnimationFrame(ep),ep=window.requestAnimationFrame(f4),dy.lastUrl!==window.location.href&&(dy.lastUrl=window.location.href,Ja.clear()))}const dne=Cn({name:"ToastifyContainer",inheritAttrs:!1,props:d4,setup(n){const t=le(()=>n.containerId),e=le(()=>Nr[t.value]||[]),i=le(()=>e.value.filter(r=>r.position===n.position));return Jt(()=>{typeof window<"u"&&n.clearOnUrlChange&&window.requestAnimationFrame(f4)}),wo(()=>{typeof window<"u"&&ep&&(window.cancelAnimationFrame(ep),dy.lastUrl="")}),()=>Ce(Fe,null,[i.value.map(r=>{const{toastId:s=""}=r;return Ce(une,An({key:s},r),null)})])}});let ok=!1;function h4(){const n=[];return kv().forEach(t=>{const e=document.getElementById(t.containerId);e&&!e.classList.contains(o0)&&n.push(t)}),n}function fne(n){const t=h4().length,e=n??0;return e>0&&t+ll.items.length>=e}function hne(n){fne(n.limit)&&!n.updateId&&ll.items.push({toastId:n.toastId,containerId:n.containerId,toastContent:n.content,toastProps:n})}function Su(n,t,e={}){if(ok)return;e=a0(Yte(),{type:t},en(e)),(!e.toastId||typeof e.toastId!="string"&&typeof e.toastId!="number")&&(e.toastId=u4()),e={...e,content:n,containerId:e.containerId||String(e.position)};const i=Number(e==null?void 0:e.progress);return i<0&&(e.progress=0),i>1&&(e.progress=1),e.theme==="auto"&&(e.theme=Qte()),hne(e),dy.lastUrl=window.location.href,e.multiple?ll.items.length?e.updateId&&dw(n,e):dw(n,e):(ok=!0,ze.clearAll(void 0,!1),setTimeout(()=>{dw(n,e)},0),setTimeout(()=>{ok=!1},390)),e.toastId}const ze=(n,t)=>Su(n,Rs.DEFAULT,t);ze.info=(n,t)=>Su(n,Rs.DEFAULT,{...t,type:Rs.INFO});ze.error=(n,t)=>Su(n,Rs.DEFAULT,{...t,type:Rs.ERROR});ze.warning=(n,t)=>Su(n,Rs.DEFAULT,{...t,type:Rs.WARNING});ze.warn=ze.warning;ze.success=(n,t)=>Su(n,Rs.DEFAULT,{...t,type:Rs.SUCCESS});ze.loading=(n,t)=>Su(n,Rs.DEFAULT,a0(t,{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1}));ze.dark=(n,t)=>Su(n,Rs.DEFAULT,a0(t,{theme:Hh.DARK}));ze.remove=n=>{n?Ja.dismiss(n):Ja.clear()};ze.clearAll=(n,t)=>{Ja.clear(n,t)};ze.isActive=n=>{let t=!1;return t=h4().findIndex(e=>e.toastId===n)>-1,t};ze.update=(n,t={})=>{setTimeout(()=>{const e=qte(n);if(e){const i=en(e),{content:r}=i,s={...i,...t,toastId:t.toastId||n,updateId:u4()},o=s.render||r;delete s.render,Su(o,s.type,s)}},0)};ze.done=n=>{ze.update(n,{isLoading:!1,progress:1})};ze.promise=mne;function mne(n,{pending:t,error:e,success:i},r){var s,o,a;let l;const c={...r||{},autoClose:!1};t&&(l=ZC(t)?ze.loading(t,c):ze.loading(t.render,{...c,...t}));const u={autoClose:(s=r==null?void 0:r.autoClose)!=null?s:!0,closeOnClick:(o=r==null?void 0:r.closeOnClick)!=null?o:!0,closeButton:(a=r==null?void 0:r.autoClose)!=null?a:null,isLoading:void 0,draggable:null,delay:100},d=(h,g,v)=>{if(g==null){ze.remove(l);return}const _={type:h,...u,...r,data:v},w=ZC(g)?{render:g}:g;return l?ze.update(l,{..._,...w,isLoading:!1}):ze(w.render,{..._,...w,isLoading:!1}),v},f=Sh(n)?n():n;return f.then(h=>{d("success",i,h)}).catch(h=>{d("error",e,h)}),f}ze.POSITION=_v;ze.THEME=Hh;ze.TYPE=Rs;ze.TRANSITIONS=Ate;const m4={install(n,t={}){gne(t)}};typeof window<"u"&&(window.Vue3Toastify=m4);function gne(n={}){const t=a0(o4,n);Kte(t)}class Pr extends Error{constructor(){super(Xe("error.formValidation.invalidForm"))}}class KA extends Error{constructor(){super()}}class g4 extends Error{constructor(t){super(t)}}class p4 extends Error{constructor(t){super(t.message)}}class v4 extends Error{constructor(t="An Anonymous login for events without a lobby is not possible."){super(t),this.name="InvalidAnonymousLoginError"}}class b4 extends Error{constructor(t="Login for inactive events are not possible."){super(t),this.name="InactiveEventLoginError"}}function Mt(n,t={}){let e=Xe("error.network.genericError");n instanceof cn||n instanceof g4?e=n.message:n instanceof p4?e=Xe("error.network.genericError"):n instanceof Pr?e=n.message:n instanceof v4?e=Xe("error.network.invalidAnonymousLoginError"):n instanceof b4?e=Xe("error.network.inactiveEventLoginError"):n instanceof KA?e=Xe("error.network.unauthorized"):n instanceof Error?e=Xe("error.network.genericError"):n instanceof String&&(e=n),ze(e,{type:"error",...t})}class lR extends Error{constructor(){super()}}class cR{static setDynamicVariable(t,e){document.documentElement.style.setProperty(`--${t}`,e)}static cleanStyles(t){const e={};return Object.entries(t).forEach(([i,r])=>{typeof i=="string"&&isNaN(parseInt(i))&&(e[i]=r)}),e}static updateEventStyles(t){const e=this.cleanStyles(t);return Object.entries(e).forEach(([i,r])=>{this.setDynamicVariable(i,r)}),e}static resetStyles(t){Object.keys(t).forEach(e=>{document.documentElement.style.removeProperty(`--${e}`)})}}const nn=Cte("core",{state:()=>({user:{type:null,id:null,role:null,verified:null,expiresAt:null},event:Kt({}),organizer:Z({}),eventUser:Z({}),eventUserAuthorizedViaToken:!1,eventStyles:{},isInitialized:!1,authInitPromise:null,lastTokenRefresh:null,systemSettings:{useDirectStaticPaths:!1,useDbFooterNavigation:!1}}),getters:{isActiveOrganizerSession:n=>{var e,i;return((e=n.user)==null?void 0:e.id)>0&&((i=n.user)==null?void 0:i.type)===ak},isActiveEventUserSession:n=>{var e,i;return((e=n.user)==null?void 0:e.id)>0&&((i=n.user)==null?void 0:i.type)===dR},getActiveUserRole:n=>{var t;return(t=n.user)==null?void 0:t.role},getActiveUserName:n=>n.user,getOrganizer:n=>n.organizer.value,getEventUser:n=>n.eventUser.value,getEvent:n=>n.event,isSuperOrganizer:n=>{var e,i;return((e=n.user)==null?void 0:e.type)===ak&&((i=n.organizer.value)==null?void 0:i.superAdmin)===!0},isEventUserAuthorizedViaToken:n=>n.eventUserAuthorizedViaToken===!0,getAuthToken:()=>localStorage.getItem(Ha),getLastTokenRefresh:n=>n.lastTokenRefresh,getCurrentEventStyles:n=>n.eventStyles,getUseDirectStaticPaths:n=>{var t;return((t=n.systemSettings)==null?void 0:t.useDirectStaticPaths)||!1},getUseDbFooterNavigation:n=>{var t;return((t=n.systemSettings)==null?void 0:t.useDbFooterNavigation)||!1}},actions:{async waitForAuth(){return this.isInitialized?!0:this.authInitPromise?(await this.authInitPromise,!0):(this.authInitPromise=this.init(),await this.authInitPromise,!0)},async init(){var n,t;if(typeof window.localStorage>"u")throw console.error("Missing LocalStorage object, but it is required."),new Error("Missing LocalStorage object, but it is required.");if(await this.loadSystemSettings(),oR(nT)&&(this.eventUserAuthorizedViaToken=!0),!((n=this.user)!=null&&n.id))try{const e=localStorage.getItem(Ha);if(e&&!((t=this.user)!=null&&t.id))try{const{payload:i}=VC(e),r=Y_();if((i==null?void 0:i.exp)>r){await this.loginUser(e);return}else try{const{token:s}=await QA();if(s){await this.loginUser(s,!0);return}}catch(s){console.error("Failed to refresh token:",s),localStorage.removeItem(Ha)}}catch(i){console.error("Invalid token format:",i),localStorage.removeItem(Ha)}if(oR(nT))try{const{token:i}=await Cne();i&&await this.loginUser(i)}catch(i){console.error("Failed to login with event user auth token:",i)}}catch(e){console.error(e),Mt(e)}finally{this.isInitialized=!0}},async loginUser(n,t=!1){var e,i,r,s,o;if(typeof n!="string"||n.length===0)throw new Error("Token can not be empty!");localStorage.setItem(Ha,n),t&&(this.lastTokenRefresh=new Date().toISOString());try{const{payload:a}=VC(n),l={type:(e=a==null?void 0:a.user)==null?void 0:e.type,id:(i=a==null?void 0:a.user)==null?void 0:i.id,verified:(r=a==null?void 0:a.user)==null?void 0:r.verified,role:a==null?void 0:a.role,expiresAt:a==null?void 0:a.exp};if(this.user=l,((s=this.user)==null?void 0:s.type)===ak)try{await this.queryOrganizer()}catch(c){console.error("Failed to fetch organizer data:",c)}if(((o=this.user)==null?void 0:o.type)===dR)try{await this.queryEventUser()}catch(c){console.error("Failed to fetch event user data:",c)}return I4()}catch(a){console.error(a),await Am()}},async logoutUser(){localStorage.clear(),this.user={type:null,id:null,verified:null,role:null,expiresAt:null},this.organizer.value={},this.eventUser.value={},this.resetEventStyles(),await P4()},queryOrganizer(){return new Promise((n,t)=>{var e;sy(Tr);try{Tr.query({query:Tte,variables:{organizerId:(e=this.user)==null?void 0:e.id},fetchPolicy:"no-cache"}).then(i=>{var s,o;const r=((s=i==null?void 0:i.data)==null?void 0:s.organizer)||null;if(r){this.organizer.value=r,n(r);return}t(new lR(`Organizer with id "${(o=this.user)==null?void 0:o.id}" not found`))}).catch(i=>{console.error("Error fetching organizer data:",i),t(i)})}catch(i){console.error("Error in queryOrganizer:",i),t(i)}})},updateEventStyles(n){const t=cR.updateEventStyles(n);this.eventStyles=t},queryEventUser(){return new Promise((n,t)=>{var e;sy(Tr);try{Tr.query({query:Ste,variables:{id:(e=this.user)==null?void 0:e.id},fetchPolicy:"no-cache"}).then(i=>{var s,o;const r=((s=i==null?void 0:i.data)==null?void 0:s.eventUser)||null;if(r){this.eventUser.value=r,n(r);return}t(new lR(`Event user with id "${(o=this.user)==null?void 0:o.id}" not found`))}).catch(i=>{console.error("Error fetching event user data:",i),t(i)})}catch(i){console.error("Error in queryEventUser:",i),t(i)}})},resetEventStyles(){cR.resetStyles(this.eventStyles),this.eventStyles={}},setEvent(n){this.event=n,n!=null&&n.styles&&this.updateEventStyles(n.styles)},updateEventUserAccessRights(n,t,e,i){var r;(r=this.eventUser.value)!=null&&r.id&&(this.eventUser.value.verified=n,this.eventUser.value.voteAmount=t,this.eventUser.value.allowToVote=e,i!==void 0&&(this.eventUser.value.pollHints=i))},setEventUserOnlineState(n){var t;(t=this.eventUser.value)!=null&&t.id&&(this.eventUser.value.online=n)},async loadSystemSettings(){var n;try{const e=await Tr.query({query:mt`
            query GetSystemSettings {
              systemSettings {
                id
                useDirectStaticPaths
                useDbFooterNavigation
                updatedAt
              }
            }
          `,fetchPolicy:"network-only"});(n=e.data)!=null&&n.systemSettings&&(this.systemSettings=e.data.systemSettings)}catch(t){console.error("Failed to load system settings:",t)}},async updateSystemSettings(n){var t;try{if(!this.isSuperOrganizer)throw new Error("Super-Admin-Rechte erforderlich, um Systemeinstellungen zu ändern");const i=await Tr.mutate({mutation:mt`
            mutation UpdateSystemSettings($input: SystemSettingsInput!) {
              updateSystemSettings(input: $input) {
                id
                useDirectStaticPaths
                useDbFooterNavigation
                updatedAt
              }
            }
          `,variables:{input:n}});if((t=i.data)!=null&&t.updateSystemSettings)return this.systemSettings=i.data.updateSystemSettings,this.systemSettings}catch(e){throw console.error("Failed to update system settings:",e),e}}}}),uR="ExpiredSessionError";class YA extends Error{constructor(t){super(t),this.type=uR}static get type(){return uR}}const pne={VITE_API_BASE_URL:"https://digitalwahl.org/api",VITE_EVENT_USER_AUTH_TOKEN_LOGIN_ENDPOINT:"/login/event-user-auth-token",VITE_GRAPHQL_ENDPOINT:"/graphql",VITE_LOGIN_ENDPOINT:"/login",VITE_LOGOUT_ENDPOINT:"/logout",VITE_REFRESH_LOGIN_ENDPOINT:"/login/refresh",VITE_REQUEST_ACTIVATE_EVENT_USER_AUTH_TOKEN:"/login/activate-event-user-auth-token",VITE_REQUEST_EVENT_FETCH_BY_ID:"/event",VITE_REQUEST_EVENT_VERIFY_SLUG:"/event/verify-slug",VITE_REQUEST_ORGANIZER_CHANGE_PASSWORD_ENDPOINT:"/organizer/update-password",VITE_REQUEST_ORGANIZER_CREATE:"/organizer/create",VITE_REQUEST_ORGANIZER_EXPORT_RESULTS:"/event/export-results",VITE_REQUEST_ORGANIZER_REQUEST_PASSWORD_CHANGE_ENDPOINT:"/organizer/password-forgot",VITE_REQUEST_ORGANIZER_VALIDATE_HASH_ENDPOINT:"/organizer/validate-hash",VITE_REQUEST_ZOOM_AUTH:"/zoom/auth/token",VITE_SUBSCRIPTION_URL:"wss://digitalwahl.org/ws",VITE_VALIDATE_PASSWORD_ENDPOINT:"/login/password-verify"},Un=pne,Qr={API_BASE_URL:Un.VITE_API_BASE_URL,SUBSCRIPTION_URL:Un.VITE_SUBSCRIPTION_URL,GRAPHQL_ENDPOINT:Un.VITE_API_BASE_URL+Un.VITE_GRAPHQL_ENDPOINT,LOGIN_ENDPOINT:Un.VITE_API_BASE_URL+Un.VITE_LOGIN_ENDPOINT,VALIDATE_PASSWORD_ENDPOINT:Un.VITE_API_BASE_URL+Un.VITE_VALIDATE_PASSWORD_ENDPOINT,REFRESH_LOGIN_ENDPOINT:Un.VITE_API_BASE_URL+Un.VITE_REFRESH_LOGIN_ENDPOINT,EVENT_USER_AUTH_TOKEN_LOGIN_ENDPOINT:Un.VITE_API_BASE_URL+Un.VITE_EVENT_USER_AUTH_TOKEN_LOGIN_ENDPOINT,LOGOUT_ENDPOINT:Un.VITE_API_BASE_URL+Un.VITE_LOGOUT_ENDPOINT,ORGANIZER_REQUEST_PASSWORD_CHANGE_ENDPOINT:Un.VITE_API_BASE_URL+Un.VITE_REQUEST_ORGANIZER_REQUEST_PASSWORD_CHANGE_ENDPOINT,ORGANIZER_CHANGE_PASSWORD_ENDPOINT:Un.VITE_API_BASE_URL+Un.VITE_REQUEST_ORGANIZER_CHANGE_PASSWORD_ENDPOINT,ORGANIZER_CREATE:Un.VITE_API_BASE_URL+Un.VITE_REQUEST_ORGANIZER_CREATE,ORGANIZER_VALIDATE_HASH_ENDPOINT:Un.VITE_API_BASE_URL+Un.VITE_REQUEST_ORGANIZER_VALIDATE_HASH_ENDPOINT,ORGANIZER_EXPORT_RESULTS:Un.VITE_API_BASE_URL+Un.VITE_REQUEST_ORGANIZER_EXPORT_RESULTS,EVENT_VERIFY_SLUG:Un.VITE_API_BASE_URL+Un.VITE_REQUEST_EVENT_VERIFY_SLUG,EVENT_FETCH_BY_ID:Un.VITE_API_BASE_URL+Un.VITE_REQUEST_EVENT_FETCH_BY_ID,ACTIVATE_EVENT_USER_AUTH_TOKEN:Un.VITE_API_BASE_URL+Un.VITE_REQUEST_ACTIVATE_EVENT_USER_AUTH_TOKEN,ZOOM_AUTH:Un.VITE_API_BASE_URL+Un.VITE_REQUEST_ZOOM_AUTH};class vne extends Error{constructor(t="Event not found."){super(t),this.name="EventNotFoundError"}}function bne(n){switch(n){case"EventNotFoundError":return new vne;case"InactiveEventLoginError":return new b4;case"InvalidAnonymousLoginError":return new v4;case"InvalidCredentialsError":case"UnauthorizedError":case"InvalidPasswordError":case"AuthenticationError":return new KA;default:return new cn}}const wne="organizer",yne="event-user",ak="organizer",dR="event-user",_ne="organizer";function kne(n,t){return w4(n,t,wne)}function Ene(n,t,e,i){return w4(n,t,yne,e,i)}function w4(n,t,e,i="",r=null){const s=Qr.LOGIN_ENDPOINT,o={method:"POST",body:JSON.stringify({username:n,password:t,loginType:e,displayName:i,eventId:r}),redirect:"follow",referrerPolicy:"no-referrer",cache:"no-cache",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json"}};return fetch(s,o).then(a=>{if((a==null?void 0:a.status)>=500)throw new cn(Xe("error.network.internalServerError"));if((a==null?void 0:a.status)===401||(a==null?void 0:a.status)===403)throw new cn(Xe("view.login.invalidCredentials"));if((a==null?void 0:a.status)>=400)throw new cn(Xe("error.network.consumerError"));if((a==null?void 0:a.status)>=200&&(a==null?void 0:a.status)<300)return a;throw new cn(Xe("error.network.undefinedError"))}).then(a=>a.json()).then(a=>{var l;if(a.token)return a;throw a.error?bne(((l=a.error)==null?void 0:l.name)||""):new cn(Xe("error.network.undefinedError"))}).then(a=>a)}function QA(){const n=Qr.REFRESH_LOGIN_ENDPOINT;return fetch(n,{method:"POST",redirect:"follow",referrerPolicy:"no-referrer",cache:"no-cache",credentials:"include",mode:"cors"}).then(e=>{if((e==null?void 0:e.status)>=500)throw console.error("Refresh token server error:",e.status),new cn(Xe("error.network.internalServerError"));if((e==null?void 0:e.status)>=400)throw console.error("Refresh token client error:",e.status),new cn(Xe("error.network.consumerError"));if((e==null?void 0:e.status)>=200&&(e==null?void 0:e.status)<300&&(e==null?void 0:e.status)!==201)throw console.error("Refresh token invalid refresh token error"),new YA(Xe("view.login.invalidRefreshToken"));if((e==null?void 0:e.status)===201)return e;throw console.error("Refresh token undefined error"),new cn(Xe("error.network.undefinedError"))}).then(e=>e.json()).then(e=>e).catch(e=>{throw console.error("Error during refreshLogin:",e),e})}function Cne(){const n=Qr.EVENT_USER_AUTH_TOKEN_LOGIN_ENDPOINT;return fetch(n,{method:"POST",redirect:"follow",referrerPolicy:"no-referrer",cache:"no-cache",credentials:"include",mode:"cors"}).then(e=>{if((e==null?void 0:e.status)>=500)throw new cn(Xe("error.network.internalServerError"));if((e==null?void 0:e.status)>=400)throw new cn(Xe("error.network.consumerError"));if((e==null?void 0:e.status)>=200&&(e==null?void 0:e.status)<300&&(e==null?void 0:e.status)!==201)throw new YA(Xe("view.login.invalidRefreshToken"));if((e==null?void 0:e.status)===201)return e;throw new cn(Xe("error.network.undefinedError"))}).then(e=>e.json()).then(e=>e)}function Am(){const n=Qr.LOGOUT_ENDPOINT;return fetch(n,{method:"GET",redirect:"follow",referrerPolicy:"no-referrer",cache:"no-cache",credentials:"include",mode:"cors"}).then(e=>nn().logoutUser()).catch(e=>{console.error("Error during logout:",e),Mt(e)})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var XC=function(n,t){return XC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])},XC(n,t)};function y4(n,t){XC(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var sh=function(){return sh=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++){e=arguments[i];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},sh.apply(this,arguments)};function Tne(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e}var c0={};Object.defineProperty(c0,"__esModule",{value:!0});c0.Observable=void 0;function ZA(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function fR(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function JA(n,t,e){return t&&fR(n.prototype,t),e&&fR(n,e),n}var XA=function(){return typeof Symbol=="function"},eI=function(n){return XA()&&!!Symbol[n]},tI=function(n){return eI(n)?Symbol[n]:"@@"+n};XA()&&!eI("observable")&&(Symbol.observable=Symbol("observable"));var Sne=tI("iterator"),eT=tI("observable"),_4=tI("species");function fy(n,t){var e=n[t];if(e!=null){if(typeof e!="function")throw new TypeError(e+" is not a function");return e}}function rg(n){var t=n.constructor;return t!==void 0&&(t=t[_4],t===null&&(t=void 0)),t!==void 0?t:u0}function Ane(n){return n instanceof u0}function Wh(n){Wh.log?Wh.log(n):setTimeout(function(){throw n})}function mw(n){Promise.resolve().then(function(){try{n()}catch(t){Wh(t)}})}function k4(n){var t=n._cleanup;if(t!==void 0&&(n._cleanup=void 0,!!t))try{if(typeof t=="function")t();else{var e=fy(t,"unsubscribe");e&&e.call(t)}}catch(i){Wh(i)}}function tT(n){n._observer=void 0,n._queue=void 0,n._state="closed"}function Ine(n){var t=n._queue;if(t){n._queue=void 0,n._state="ready";for(var e=0;e<t.length&&(E4(n,t[e].type,t[e].value),n._state!=="closed");++e);}}function E4(n,t,e){n._state="running";var i=n._observer;try{var r=fy(i,t);switch(t){case"next":r&&r.call(i,e);break;case"error":if(tT(n),r)r.call(i,e);else throw e;break;case"complete":tT(n),r&&r.call(i);break}}catch(s){Wh(s)}n._state==="closed"?k4(n):n._state==="running"&&(n._state="ready")}function lk(n,t,e){if(n._state!=="closed"){if(n._state==="buffering"){n._queue.push({type:t,value:e});return}if(n._state!=="ready"){n._state="buffering",n._queue=[{type:t,value:e}],mw(function(){return Ine(n)});return}E4(n,t,e)}}var Pne=function(){function n(t,e){ZA(this,n),this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var i=new xne(this);try{this._cleanup=e.call(void 0,i)}catch(r){i.error(r)}this._state==="initializing"&&(this._state="ready")}return JA(n,[{key:"unsubscribe",value:function(){this._state!=="closed"&&(tT(this),k4(this))}},{key:"closed",get:function(){return this._state==="closed"}}]),n}(),xne=function(){function n(t){ZA(this,n),this._subscription=t}return JA(n,[{key:"next",value:function(e){lk(this._subscription,"next",e)}},{key:"error",value:function(e){lk(this._subscription,"error",e)}},{key:"complete",value:function(){lk(this._subscription,"complete")}},{key:"closed",get:function(){return this._subscription._state==="closed"}}]),n}(),u0=function(){function n(t){if(ZA(this,n),!(this instanceof n))throw new TypeError("Observable cannot be called as a function");if(typeof t!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=t}return JA(n,[{key:"subscribe",value:function(e){return(typeof e!="object"||e===null)&&(e={next:e,error:arguments[1],complete:arguments[2]}),new Pne(e,this._subscriber)}},{key:"forEach",value:function(e){var i=this;return new Promise(function(r,s){if(typeof e!="function"){s(new TypeError(e+" is not a function"));return}function o(){a.unsubscribe(),r()}var a=i.subscribe({next:function(l){try{e(l,o)}catch(c){s(c),a.unsubscribe()}},error:s,complete:r})})}},{key:"map",value:function(e){var i=this;if(typeof e!="function")throw new TypeError(e+" is not a function");var r=rg(this);return new r(function(s){return i.subscribe({next:function(o){try{o=e(o)}catch(a){return s.error(a)}s.next(o)},error:function(o){s.error(o)},complete:function(){s.complete()}})})}},{key:"filter",value:function(e){var i=this;if(typeof e!="function")throw new TypeError(e+" is not a function");var r=rg(this);return new r(function(s){return i.subscribe({next:function(o){try{if(!e(o))return}catch(a){return s.error(a)}s.next(o)},error:function(o){s.error(o)},complete:function(){s.complete()}})})}},{key:"reduce",value:function(e){var i=this;if(typeof e!="function")throw new TypeError(e+" is not a function");var r=rg(this),s=arguments.length>1,o=!1,a=arguments[1],l=a;return new r(function(c){return i.subscribe({next:function(u){var d=!o;if(o=!0,!d||s)try{l=e(l,u)}catch(f){return c.error(f)}else l=u},error:function(u){c.error(u)},complete:function(){if(!o&&!s)return c.error(new TypeError("Cannot reduce an empty sequence"));c.next(l),c.complete()}})})}},{key:"concat",value:function(){for(var e=this,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];var o=rg(this);return new o(function(a){var l,c=0;function u(d){l=d.subscribe({next:function(f){a.next(f)},error:function(f){a.error(f)},complete:function(){c===r.length?(l=void 0,a.complete()):u(o.from(r[c++]))}})}return u(e),function(){l&&(l.unsubscribe(),l=void 0)}})}},{key:"flatMap",value:function(e){var i=this;if(typeof e!="function")throw new TypeError(e+" is not a function");var r=rg(this);return new r(function(s){var o=[],a=i.subscribe({next:function(c){if(e)try{c=e(c)}catch(d){return s.error(d)}var u=r.from(c).subscribe({next:function(d){s.next(d)},error:function(d){s.error(d)},complete:function(){var d=o.indexOf(u);d>=0&&o.splice(d,1),l()}});o.push(u)},error:function(c){s.error(c)},complete:function(){l()}});function l(){a.closed&&o.length===0&&s.complete()}return function(){o.forEach(function(c){return c.unsubscribe()}),a.unsubscribe()}})}},{key:eT,value:function(){return this}}],[{key:"from",value:function(e){var i=typeof this=="function"?this:n;if(e==null)throw new TypeError(e+" is not an object");var r=fy(e,eT);if(r){var s=r.call(e);if(Object(s)!==s)throw new TypeError(s+" is not an object");return Ane(s)&&s.constructor===i?s:new i(function(o){return s.subscribe(o)})}if(eI("iterator")&&(r=fy(e,Sne),r))return new i(function(o){mw(function(){if(!o.closed){var a=!0,l=!1,c=void 0;try{for(var u=r.call(e)[Symbol.iterator](),d;!(a=(d=u.next()).done);a=!0){var f=d.value;if(o.next(f),o.closed)return}}catch(h){l=!0,c=h}finally{try{!a&&u.return!=null&&u.return()}finally{if(l)throw c}}o.complete()}})});if(Array.isArray(e))return new i(function(o){mw(function(){if(!o.closed){for(var a=0;a<e.length;++a)if(o.next(e[a]),o.closed)return;o.complete()}})});throw new TypeError(e+" is not observable")}},{key:"of",value:function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];var s=typeof this=="function"?this:n;return new s(function(o){mw(function(){if(!o.closed){for(var a=0;a<i.length;++a)if(o.next(i[a]),o.closed)return;o.complete()}})})}},{key:_4,get:function(){return this}}]),n}();c0.Observable=u0;XA()&&Object.defineProperty(u0,Symbol("extensions"),{value:{symbol:eT,hostReportError:Wh},configurable:!0});var One=c0.Observable;const Rne=Q_(One);var Ro=Rne,ck="Invariant Violation",hR=Object.setPrototypeOf,Vne=hR===void 0?function(n,t){return n.__proto__=t,n}:hR,nI=function(n){y4(t,n);function t(e){e===void 0&&(e=ck);var i=n.call(this,typeof e=="number"?ck+": "+e+" (see https://github.com/apollographql/invariant-packages)":e)||this;return i.framesToPop=1,i.name=ck,Vne(i,t.prototype),i}return t}(Error);function mR(n,t){if(!n)throw new nI(t)}function gR(n){return function(){return console[n].apply(console,arguments)}}(function(n){n.warn=gR("warn"),n.error=gR("error")})(mR||(mR={}));var pR={env:{}};if(typeof process=="object")pR=process;else try{Function("stub","process = stub")(pR)}catch{}function Dne(n){return n.definitions.filter(function(t){return t.kind==="OperationDefinition"&&t.name}).map(function(t){return t.name.value})[0]||null}function Nne(n){for(var t=["query","operationName","variables","extensions","context"],e=0,i=Object.keys(n);e<i.length;e++){var r=i[e];if(t.indexOf(r)<0)throw new nI(2)}return n}(function(n){y4(t,n);function t(e,i){var r=n.call(this,e)||this;return r.link=i,r}return t})(Error);function hy(n){return n.request.length<=1}function Lne(n){var t={variables:n.variables||{},extensions:n.extensions||{},operationName:n.operationName,query:n.query};return t.operationName||(t.operationName=typeof t.query!="string"?Dne(t.query):""),t}function Mne(n,t){var e=sh({},n),i=function(s){typeof s=="function"?e=sh({},e,s(e)):e=sh({},e,s)},r=function(){return sh({},e)};return Object.defineProperty(t,"setContext",{enumerable:!1,value:i}),Object.defineProperty(t,"getContext",{enumerable:!1,value:r}),Object.defineProperty(t,"toKey",{enumerable:!1,value:function(){return $ne(t)}}),t}function $ne(n){var t=n.query,e=n.variables,i=n.operationName;return JSON.stringify([i,t,e])}function C4(n,t){return t?t(n):Ro.of()}function Fp(n){return typeof n=="function"?new Qc(n):n}function T4(){return new Qc(function(){return Ro.of()})}function Bne(n){return n.length===0?T4():n.map(Fp).reduce(function(t,e){return t.concat(e)})}function vR(n,t,e){var i=Fp(t),r=Fp(e||new Qc(C4));return hy(i)&&hy(r)?new Qc(function(s){return n(s)?i.request(s)||Ro.of():r.request(s)||Ro.of()}):new Qc(function(s,o){return n(s)?i.request(s,o)||Ro.of():r.request(s,o)||Ro.of()})}var Fne=function(n,t){var e=Fp(n);if(hy(e))return e;var i=Fp(t);return hy(i)?new Qc(function(r){return e.request(r,function(s){return i.request(s)||Ro.of()})||Ro.of()}):new Qc(function(r,s){return e.request(r,function(o){return i.request(o,s)||Ro.of()})||Ro.of()})},Qc=function(){function n(t){t&&(this.request=t)}return n.prototype.split=function(t,e,i){return this.concat(vR(t,e,i||new n(C4)))},n.prototype.concat=function(t){return Fne(this,t)},n.prototype.request=function(t,e){throw new nI(1)},n.empty=T4,n.from=Bne,n.split=vR,n.execute=Une,n}();function Une(n,t){return n.request(Mne(t.context,Lne(Nne(t))))||Ro.of()}function zne(n){return new Qc(function(t,e){var i=Tne(t,[]);return new Ro(function(r){var s;return Promise.resolve(i).then(function(o){return n(o,t.getContext())}).then(t.setContext).then(function(){s=e(t).subscribe({next:r.next.bind(r),error:r.error.bind(r),complete:r.complete.bind(r)})}).catch(r.error.bind(r)),function(){s&&s.unsubscribe()}})})}const Ha="apollo-token",nT="eventUserAuthToken";function S4(){if(typeof window.localStorage>"u")throw new Error("Missing LocalStorage object, but it is required.");return localStorage.getItem(Ha)}const bR=new gl((n,t)=>{const e=S4();return n.setContext({headers:{authorization:e?`Bearer ${e}`:null}}),t(n)}),wR=zne(async()=>{const n=S4();if(n!==null){try{const{payload:t}=VC(n),e=Y_();if((t==null?void 0:t.exp)>e)return}catch(t){console.error("RefreshTokenLink - Error decoding token:",t)}try{const{token:t}=await QA();await nn().loginUser(t,!0)}catch(t){console.error("RefreshTokenLink - Failed to refresh token:",t),localStorage.removeItem(Ha)}}}),Hne=new _3({uri:Qr.GRAPHQL_ENDPOINT,fetch:(n,t)=>fetch(n,t)}),Lr=new mJ(wJ({url:Qr.SUBSCRIPTION_URL,lazy:!1,retryAttempts:10,retryWait:n=>Math.min(n*1e3,1e4),keepAlive:45e3,shouldRetry:()=>!0,isFatalConnectionProblem:()=>!1,connectionParams:async()=>{let n={connectionPresence:!0,forceReconnect:!0};try{const t=localStorage.getItem(Ha);t?n.authorization=`Bearer ${t}`:console.warn("[Websocket] Kein Auth-Token im localStorage gefunden!")}catch(t){console.warn("[Websocket] Fehler beim Abrufen des Auth-Tokens:",t)}return n}}));let Xa=0;const Up=10;let gw=!1;Lr.client.on("connecting",()=>{Xa<Up&&Xa++});Lr.client.on("connected",()=>{Xa=0;try{const n=nn();n&&n.isActiveEventUserSession&&n.setEventUserOnlineState(!0)}catch(n){console.warn("[Websocket] Store noch nicht initialisiert:",n.message)}});Lr.client.on("error",n=>{console.error("[Websocket] Fehler bei der Verbindung:",n),Xa<Up&&(console.info(`[Websocket] Versuche erneut zu verbinden (${Xa}/${Up})...`),setTimeout(()=>{try{typeof Lr.client.connect=="function"&&Lr.client.connect()}catch(t){console.error("[Websocket] Fehler beim Neustart der Verbindung:",t)}},Math.min(Xa*1e3,5e3)))});Lr.client.on("closed",n=>{try{const e=nn();e&&e.isActiveEventUserSession&&e.setEventUserOnlineState(!1)}catch(e){console.warn("[Websocket] Store noch nicht initialisiert:",e.message)}A4(),!(!n||n.code===1e3||n.code===1001||n.code===4499||gw)&&Xa<Up&&setTimeout(()=>{try{typeof Lr.client.connect=="function"&&Lr.client.connect()}catch(e){console.error("[Websocket] Fehler beim Neustart der Verbindung nach Schließung:",e)}},Math.min(Xa*1e3,5e3))});let uk=null;function A4(){uk&&(clearInterval(uk),uk=null)}const Wne=Y3(async n=>{var t,e;if(n!=null&&n.graphQLErrors){for(const i of n.graphQLErrors)Mt(new p4(i));return null}if(n!=null&&n.networkError)return((t=n.networkError)==null?void 0:t.statusCode)===401&&Mt(new KA),((e=n.networkError)==null?void 0:e.type)===YA.type?(Mt(new cn(n.networkError.message)),await Am(),null):(Mt(new cn(n.networkError.message)),null);Mt(new cn(n.networkError.message))}),Tr=new H3({cache:new U3,link:Wne.concat(QQ(({query:n})=>{const t=Cm(n);return t.kind==="OperationDefinition"&&t.operation==="subscription"},bR.concat(wR.concat(Lr)),bR.concat(wR.concat(Hne))))});async function I4(){try{await Tr.resetStore()}catch(n){console.error(n)}}async function P4(n=!1){try{await iI(n),await Tr.clearStore(),Tr.stop()}catch(t){console.error(t)}}async function iI(n=!1){try{n&&(gw=!0),A4(),Xa=Up,await Lr.client.terminate(),n&&setTimeout(()=>{gw=!1},1e3)}catch(t){console.error("[Websocket] Fehler beim Beenden der WebSocket-Verbindung:",t),n&&(gw=!1)}}async function x4(){try{console.info("[Websocket] Starte vollständige WebSocket-Neuverbindung"),Xa=0;try{Lr&&Lr.client&&(await Lr.client.terminate(),console.info("[Websocket] Bestehende Verbindung beendet")),Lr&&Lr.client&&typeof Lr.client.connect=="function"&&(await Lr.client.connect(),console.info("[Websocket] Neue Verbindung explizit gestartet")),await new Promise(n=>setTimeout(n,500))}catch(n){console.error("[Websocket] Fehler beim Neuaufbau der WebSocket-Verbindung:",n)}await Tr.resetStore();try{console.info("[Websocket] Cookie-Status:",document.cookie?"Cookies vorhanden":"Keine Cookies verfügbar")}catch(n){console.warn("[Websocket] Cookie-Status konnte nicht geprüft werden:",n)}return!0}catch(n){throw console.error("[Websocket] Allgemeiner Fehler bei der Verbindungswiederherstellung:",n),n}}const jne=Object.freeze(Object.defineProperty({__proto__:null,AUTH_TOKEN:Ha,EVENT_USER_AUTH_TOKEN:nT,apolloClient:Tr,reconnectWebsocketClient:x4,resetClient:I4,terminateClient:P4,terminateWebsocketClient:iI},Symbol.toStringTag,{value:"Module"})),Yt=(n,t)=>{const e=n.__vccOpts||n;for(const[i,r]of t)e[i]=r;return e},qne={key:0,class:"to-top position-fixed"},Gne=250,Kne={__name:"ToTop",setup(n){const t=Z(!1);let e=0,i=!1;function r(){window.scrollTo({top:0,behavior:"smooth"})}function s(){e=window.scrollY,i||(window.requestAnimationFrame(()=>{const o=e>=Gne;o!==t.value&&(t.value=o),i=!1}),i=!0)}return Jt(()=>{document.addEventListener("scroll",s)}),(o,a)=>(P(),V(Fe,null,[a[1]||(a[1]=m("div",{id:"test"},null,-1)),t.value?(P(),V("div",qne,[m("button",{"data-cy":"to-top-btn",class:"btn btn-secondary shadow",onClick:bt(r,["prevent"])},[...a[0]||(a[0]=[m("i",{class:"bi bi-arrow-up-circle bi--2xl"},null,-1)])])])):ne("",!0)],64))}},Yne=Yt(Kne,[["__scopeId","data-v-bb60e8d5"]]);function O4(){try{const n="voting-app-storage-test";localStorage.setItem(n,"test");const t=localStorage.getItem(n);return localStorage.removeItem(n),t==="test"}catch(n){return console.error("localStorage ist nicht verfügbar:",n),!1}}function Qne(n={}){const{showAlert:t=!0,onIncompatible:e=null}=n,i={localStorage:O4(),compatible:!0};if(i.localStorage||(i.compatible=!1),!i.compatible){const r=`Ihr Browser unterstützt einige benötigte Funktionen nicht, was zu Problemen bei der Abstimmung führen kann:
${i.localStorage?"":`- Abstimmungsdaten können nicht gespeichert werden
`}

Wir empfehlen, einen anderen Browser wie Chrome, Firefox oder Microsoft Edge zu verwenden, oder die Einstellungen in Ihrem Browser anzupassen:
- Deaktivieren Sie den "Privaten Modus" oder "Inkognito-Modus"
- Erlauben Sie Cookies und Website-Daten für diese Seite
- Deaktivieren Sie temporär Tracking-Schutz und Content-Blocker`;t&&alert(r),typeof e=="function"&&e(i,r),console.warn("Browser-Kompatibilitätsprobleme erkannt:",i)}return i}function R4(){const n=navigator.userAgent;let t="Unbekannt",e="Unbekannt";if(n.indexOf("Safari")>-1&&n.indexOf("Chrome")===-1){t="Safari";const i=n.match(/Version\/([0-9._]+)/);i&&(e=i[1])}else if(n.indexOf("Chrome")>-1){t="Chrome";const i=n.match(/Chrome\/([0-9._]+)/);i&&(e=i[1])}else if(n.indexOf("Firefox")>-1){t="Firefox";const i=n.match(/Firefox\/([0-9._]+)/);i&&(e=i[1])}else if(n.indexOf("Edg")>-1){t="Edge";const i=n.match(/Edg\/([0-9._]+)/);i&&(e=i[1])}return{name:t,version:e,userAgent:n,isMobile:/iPhone|iPad|iPod|Android/i.test(n),isSafari:t==="Safari"}}const Zne=mt`
  subscription($eventUserId: ID) {
    tokenRefreshRequired(eventUserId: $eventUserId) {
      userId
      userType
      reason
      token
    }
  }
`,Jne=new Set(["title","titleTemplate","script","style","noscript"]),pw=new Set(["base","meta","link","style","script","noscript"]),Xne=new Set(["title","titleTemplate","templateParams","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),eie=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),V4=new Set(["tagPosition","tagPriority","tagDuplicateStrategy","children","innerHTML","textContent","processTemplateParams"]),tie=typeof window<"u";function my(n){let t=9;for(let e=0;e<n.length;)t=Math.imul(t^n.charCodeAt(e++),9**9);return((t^t>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function iT(n){if(n._h)return n._h;if(n._d)return my(n._d);let t=`${n.tag}:${n.textContent||n.innerHTML||""}:`;for(const e in n.props)t+=`${e}:${String(n.props[e])},`;return my(t)}function nie(n,t){return n instanceof Promise?n.then(t):t(n)}function rT(n,t,e,i){const r=i||N4(typeof t=="object"&&typeof t!="function"&&!(t instanceof Promise)?{...t}:{[n==="script"||n==="noscript"||n==="style"?"innerHTML":"textContent"]:t},n==="templateParams"||n==="titleTemplate");if(r instanceof Promise)return r.then(o=>rT(n,t,e,o));const s={tag:n,props:r};for(const o of V4){const a=s.props[o]!==void 0?s.props[o]:e[o];a!==void 0&&((!(o==="innerHTML"||o==="textContent"||o==="children")||Jne.has(s.tag))&&(s[o==="children"?"innerHTML":o]=a),delete s.props[o])}return s.props.body&&(s.tagPosition="bodyClose",delete s.props.body),s.tag==="script"&&typeof s.innerHTML=="object"&&(s.innerHTML=JSON.stringify(s.innerHTML),s.props.type=s.props.type||"application/json"),Array.isArray(s.props.content)?s.props.content.map(o=>({...s,props:{...s.props,content:o}})):s}function iie(n,t){var i;const e=n==="class"?" ":";";return t&&typeof t=="object"&&!Array.isArray(t)&&(t=Object.entries(t).filter(([,r])=>r).map(([r,s])=>n==="style"?`${r}:${s}`:r)),(i=String(Array.isArray(t)?t.join(e):t))==null?void 0:i.split(e).filter(r=>!!r.trim()).join(e)}function D4(n,t,e,i){for(let r=i;r<e.length;r+=1){const s=e[r];if(s==="class"||s==="style"){n[s]=iie(s,n[s]);continue}if(n[s]instanceof Promise)return n[s].then(o=>(n[s]=o,D4(n,t,e,r)));if(!t&&!V4.has(s)){const o=String(n[s]),a=s.startsWith("data-");o==="true"||o===""?n[s]=a?"true":!0:n[s]||(a&&o==="false"?n[s]="false":delete n[s])}}}function N4(n,t=!1){const e=D4(n,t,Object.keys(n),0);return e instanceof Promise?e.then(()=>n):n}const rie=10;function L4(n,t,e){for(let i=e;i<t.length;i+=1){const r=t[i];if(r instanceof Promise)return r.then(s=>(t[i]=s,L4(n,t,i)));Array.isArray(r)?n.push(...r):n.push(r)}}function sie(n){const t=[],e=n.resolvedInput;for(const r in e){if(!Object.prototype.hasOwnProperty.call(e,r))continue;const s=e[r];if(!(s===void 0||!Xne.has(r))){if(Array.isArray(s)){for(const o of s)t.push(rT(r,o,n));continue}t.push(rT(r,s,n))}}if(t.length===0)return[];const i=[];return nie(L4(i,t,0),()=>i.map((r,s)=>(r._e=n._i,n.mode&&(r._m=n.mode),r._p=(n._i<<rie)+s,r)))}const yR=new Set(["onload","onerror","onabort","onprogress","onloadstart"]),_R={base:-10,title:10},kR={critical:-80,high:-10,low:20};function gy(n){const t=n.tagPriority;if(typeof t=="number")return t;let e=100;return n.tag==="meta"?n.props["http-equiv"]==="content-security-policy"?e=-30:n.props.charset?e=-20:n.props.name==="viewport"&&(e=-15):n.tag==="link"&&n.props.rel==="preconnect"?e=20:n.tag in _R&&(e=_R[n.tag]),t&&t in kR?e+kR[t]:e}const oie=[{prefix:"before:",offset:-1},{prefix:"after:",offset:1}],aie=["name","property","http-equiv"];function M4(n){const{props:t,tag:e}=n;if(eie.has(e))return e;if(e==="link"&&t.rel==="canonical")return"canonical";if(t.charset)return"charset";if(t.id)return`${e}:id:${t.id}`;for(const i of aie)if(t[i]!==void 0)return`${e}:${i}:${t[i]}`;return!1}const Uc="%separator";function lie(n,t,e=!1){var r;let i;if(t==="s"||t==="pageTitle")i=n.pageTitle;else if(t.includes(".")){const s=t.indexOf(".");i=(r=n[t.substring(0,s)])==null?void 0:r[t.substring(s+1)]}else i=n[t];if(i!==void 0)return e?(i||"").replace(/"/g,'\\"'):i||""}const cie=new RegExp(`${Uc}(?:\\s*${Uc})*`,"g");function mb(n,t,e,i=!1){if(typeof n!="string"||!n.includes("%"))return n;let r=n;try{r=decodeURI(n)}catch{}const s=r.match(/%\w+(?:\.\w+)?/g);if(!s)return n;const o=n.includes(Uc);return n=n.replace(/%\w+(?:\.\w+)?/g,a=>{if(a===Uc||!s.includes(a))return a;const l=lie(t,a.slice(1),i);return l!==void 0?l:a}).trim(),o&&(n.endsWith(Uc)&&(n=n.slice(0,-Uc.length)),n.startsWith(Uc)&&(n=n.slice(Uc.length)),n=n.replace(cie,e).trim()),n}function ER(n,t){return n==null?t||null:typeof n=="function"?n(t):n}async function uie(n,t={}){const e=t.document||n.resolvedOptions.document;if(!e||!n.dirty)return;const i={shouldRender:!0,tags:[]};if(await n.hooks.callHook("dom:beforeRender",i),!!i.shouldRender)return n._domUpdatePromise||(n._domUpdatePromise=new Promise(async r=>{var d;const s=(await n.resolveTags()).map(f=>({tag:f,id:pw.has(f.tag)?iT(f):f.tag,shouldRender:!0}));let o=n._dom;if(!o){o={elMap:{htmlAttrs:e.documentElement,bodyAttrs:e.body}};const f=new Set;for(const h of["body","head"]){const g=(d=e[h])==null?void 0:d.children;for(const v of g){const _=v.tagName.toLowerCase();if(!pw.has(_))continue;const w={tag:_,props:await N4(v.getAttributeNames().reduce((A,x)=>({...A,[x]:v.getAttribute(x)}),{})),innerHTML:v.innerHTML},C=M4(w);let k=C,E=1;for(;k&&f.has(k);)k=`${C}:${E++}`;k&&(w._d=k,f.add(k)),o.elMap[v.getAttribute("data-hid")||iT(w)]=v}}}o.pendingSideEffects={...o.sideEffects},o.sideEffects={};function a(f,h,g){const v=`${f}:${h}`;o.sideEffects[v]=g,delete o.pendingSideEffects[v]}function l({id:f,$el:h,tag:g}){const v=g.tag.endsWith("Attrs");if(o.elMap[f]=h,v||(g.textContent&&g.textContent!==h.textContent&&(h.textContent=g.textContent),g.innerHTML&&g.innerHTML!==h.innerHTML&&(h.innerHTML=g.innerHTML),a(f,"el",()=>{var _;(_=o.elMap[f])==null||_.remove(),delete o.elMap[f]})),g._eventHandlers)for(const _ in g._eventHandlers)Object.prototype.hasOwnProperty.call(g._eventHandlers,_)&&h.getAttribute(`data-${_}`)!==""&&((g.tag==="bodyAttrs"?e.defaultView:h).addEventListener(_.substring(2),g._eventHandlers[_].bind(h)),h.setAttribute(`data-${_}`,""));for(const _ in g.props){if(!Object.prototype.hasOwnProperty.call(g.props,_))continue;const w=g.props[_],C=`attr:${_}`;if(_==="class"){if(!w)continue;for(const k of w.split(" "))v&&a(f,`${C}:${k}`,()=>h.classList.remove(k)),!h.classList.contains(k)&&h.classList.add(k)}else if(_==="style"){if(!w)continue;for(const k of w.split(";")){const E=k.indexOf(":"),A=k.substring(0,E).trim(),x=k.substring(E+1).trim();a(f,`${C}:${A}`,()=>{h.style.removeProperty(A)}),h.style.setProperty(A,x)}}else h.getAttribute(_)!==w&&h.setAttribute(_,w===!0?"":String(w)),v&&a(f,C,()=>h.removeAttribute(_))}}const c=[],u={bodyClose:void 0,bodyOpen:void 0,head:void 0};for(const f of s){const{tag:h,shouldRender:g,id:v}=f;if(g){if(h.tag==="title"){e.title=h.textContent;continue}f.$el=f.$el||o.elMap[v],f.$el?l(f):pw.has(h.tag)&&c.push(f)}}for(const f of c){const h=f.tag.tagPosition||"head";f.$el=e.createElement(f.tag.tag),l(f),u[h]=u[h]||e.createDocumentFragment(),u[h].appendChild(f.$el)}for(const f of s)await n.hooks.callHook("dom:renderTag",f,e,a);u.head&&e.head.appendChild(u.head),u.bodyOpen&&e.body.insertBefore(u.bodyOpen,e.body.firstChild),u.bodyClose&&e.body.appendChild(u.bodyClose);for(const f in o.pendingSideEffects)o.pendingSideEffects[f]();n._dom=o,await n.hooks.callHook("dom:rendered",{renders:s}),r()}).finally(()=>{n._domUpdatePromise=void 0,n.dirty=!1})),n._domUpdatePromise}function die(n,t={}){const e=t.delayFn||(i=>setTimeout(i,10));return n._domDebouncedUpdatePromise=n._domDebouncedUpdatePromise||new Promise(i=>e(()=>uie(n,t).then(()=>{delete n._domDebouncedUpdatePromise,i()})))}function fie(n){return t=>{var i,r;const e=((r=(i=t.resolvedOptions.document)==null?void 0:i.head.querySelector('script[id="unhead:payload"]'))==null?void 0:r.innerHTML)||!1;return e&&t.push(JSON.parse(e)),{mode:"client",hooks:{"entries:updated":s=>{die(s,n)}}}}}function sT(n,t={},e){for(const i in n){const r=n[i],s=e?`${e}:${i}`:i;typeof r=="object"&&r!==null?sT(r,t,s):typeof r=="function"&&(t[s]=r)}return t}const hie={run:n=>n()},mie=()=>hie,$4=typeof console.createTask<"u"?console.createTask:mie;function gie(n,t){const e=t.shift(),i=$4(e);return n.reduce((r,s)=>r.then(()=>i.run(()=>s(...t))),Promise.resolve())}function pie(n,t){const e=t.shift(),i=$4(e);return Promise.all(n.map(r=>i.run(()=>r(...t))))}function dk(n,t){for(const e of[...n])e(t)}class vie{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(t,e,i={}){if(!t||typeof e!="function")return()=>{};const r=t;let s;for(;this._deprecatedHooks[t];)s=this._deprecatedHooks[t],t=s.to;if(s&&!i.allowDeprecated){let o=s.message;o||(o=`${r} hook has been deprecated`+(s.to?`, please use ${s.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(o)||(console.warn(o),this._deprecatedMessages.add(o))}if(!e.name)try{Object.defineProperty(e,"name",{get:()=>"_"+t.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[t]=this._hooks[t]||[],this._hooks[t].push(e),()=>{e&&(this.removeHook(t,e),e=void 0)}}hookOnce(t,e){let i,r=(...s)=>(typeof i=="function"&&i(),i=void 0,r=void 0,e(...s));return i=this.hook(t,r),i}removeHook(t,e){if(this._hooks[t]){const i=this._hooks[t].indexOf(e);i!==-1&&this._hooks[t].splice(i,1),this._hooks[t].length===0&&delete this._hooks[t]}}deprecateHook(t,e){this._deprecatedHooks[t]=typeof e=="string"?{to:e}:e;const i=this._hooks[t]||[];delete this._hooks[t];for(const r of i)this.hook(t,r)}deprecateHooks(t){Object.assign(this._deprecatedHooks,t);for(const e in t)this.deprecateHook(e,t[e])}addHooks(t){const e=sT(t),i=Object.keys(e).map(r=>this.hook(r,e[r]));return()=>{for(const r of i.splice(0,i.length))r()}}removeHooks(t){const e=sT(t);for(const i in e)this.removeHook(i,e[i])}removeAllHooks(){for(const t in this._hooks)delete this._hooks[t]}callHook(t,...e){return e.unshift(t),this.callHookWith(gie,t,...e)}callHookParallel(t,...e){return e.unshift(t),this.callHookWith(pie,t,...e)}callHookWith(t,e,...i){const r=this._before||this._after?{name:e,args:i,context:{}}:void 0;this._before&&dk(this._before,r);const s=t(e in this._hooks?[...this._hooks[e]]:[],i);return s instanceof Promise?s.finally(()=>{this._after&&r&&dk(this._after,r)}):(this._after&&r&&dk(this._after,r),s)}beforeEach(t){return this._before=this._before||[],this._before.push(t),()=>{if(this._before!==void 0){const e=this._before.indexOf(t);e!==-1&&this._before.splice(e,1)}}}afterEach(t){return this._after=this._after||[],this._after.push(t),()=>{if(this._after!==void 0){const e=this._after.indexOf(t);e!==-1&&this._after.splice(e,1)}}}}function bie(){return new vie}const wie=new Set(["templateParams","htmlAttrs","bodyAttrs"]),yie={hooks:{"tag:normalise":({tag:n})=>{n.props.hid&&(n.key=n.props.hid,delete n.props.hid),n.props.vmid&&(n.key=n.props.vmid,delete n.props.vmid),n.props.key&&(n.key=n.props.key,delete n.props.key);const t=M4(n);t&&!t.startsWith("meta:og:")&&!t.startsWith("meta:twitter:")&&delete n.key;const e=t||(n.key?`${n.tag}:${n.key}`:!1);e&&(n._d=e)},"tags:resolve":n=>{const t=Object.create(null);for(const i of n.tags){const r=(i.key?`${i.tag}:${i.key}`:i._d)||iT(i),s=t[r];if(s){let a=i==null?void 0:i.tagDuplicateStrategy;if(!a&&wie.has(i.tag)&&(a="merge"),a==="merge"){const l=s.props;l.style&&i.props.style&&(l.style[l.style.length-1]!==";"&&(l.style+=";"),i.props.style=`${l.style} ${i.props.style}`),l.class&&i.props.class?i.props.class=`${l.class} ${i.props.class}`:l.class&&(i.props.class=l.class),t[r].props={...l,...i.props};continue}else if(i._e===s._e){s._duped=s._duped||[],i._d=`${s._d}:${s._duped.length+1}`,s._duped.push(i);continue}else if(gy(i)>gy(s))continue}if(!(i.innerHTML||i.textContent||Object.keys(i.props).length!==0)&&pw.has(i.tag)){delete t[r];continue}t[r]=i}const e=[];for(const i in t){const r=t[i],s=r._duped;e.push(r),s&&(delete r._duped,e.push(...s))}n.tags=e,n.tags=n.tags.filter(i=>!(i.tag==="meta"&&(i.props.name||i.props.property)&&!i.props.content))}}},_ie=new Set(["script","link","bodyAttrs"]),kie=n=>({hooks:{"tags:resolve":t=>{for(const e of t.tags){if(!_ie.has(e.tag))continue;const i=e.props;for(const r in i){if(r[0]!=="o"||r[1]!=="n"||!Object.prototype.hasOwnProperty.call(i,r))continue;const s=i[r];typeof s=="function"&&(n.ssr&&yR.has(r)?i[r]=`this.dataset.${r}fired = true`:delete i[r],e._eventHandlers=e._eventHandlers||{},e._eventHandlers[r]=s)}n.ssr&&e._eventHandlers&&(e.props.src||e.props.href)&&(e.key=e.key||my(e.props.src||e.props.href))}},"dom:renderTag":({$el:t,tag:e})=>{var r,s;const i=t==null?void 0:t.dataset;if(i)for(const o in i){if(!o.endsWith("fired"))continue;const a=o.slice(0,-5);yR.has(a)&&((s=(r=e._eventHandlers)==null?void 0:r[a])==null||s.call(t,new Event(a.substring(2))))}}}}),Eie=new Set(["link","style","script","noscript"]),Cie={hooks:{"tag:normalise":({tag:n})=>{n.key&&Eie.has(n.tag)&&(n.props["data-hid"]=n._h=my(n.key))}}},Tie={mode:"server",hooks:{"tags:beforeResolve":n=>{const t={};let e=!1;for(const i of n.tags)i._m!=="server"||i.tag!=="titleTemplate"&&i.tag!=="templateParams"&&i.tag!=="title"||(t[i.tag]=i.tag==="title"||i.tag==="titleTemplate"?i.textContent:i.props,e=!0);e&&n.tags.push({tag:"script",innerHTML:JSON.stringify(t),props:{id:"unhead:payload",type:"application/json"}})}}},Sie={hooks:{"tags:resolve":n=>{var t;for(const e of n.tags)if(typeof e.tagPriority=="string")for(const{prefix:i,offset:r}of oie){if(!e.tagPriority.startsWith(i))continue;const s=e.tagPriority.substring(i.length),o=(t=n.tags.find(a=>a._d===s))==null?void 0:t._p;if(o!==void 0){e._p=o+r;break}}n.tags.sort((e,i)=>{const r=gy(e),s=gy(i);return r<s?-1:r>s?1:e._p-i._p})}}},Aie={meta:"content",link:"href",htmlAttrs:"lang"},Iie=["innerHTML","textContent"],Pie=n=>({hooks:{"tags:resolve":t=>{var o;const{tags:e}=t;let i;for(let a=0;a<e.length;a+=1)e[a].tag==="templateParams"&&(i=t.tags.splice(a,1)[0].props,a-=1);const r=i||{},s=r.separator||"|";delete r.separator,r.pageTitle=mb(r.pageTitle||((o=e.find(a=>a.tag==="title"))==null?void 0:o.textContent)||"",r,s);for(const a of e){if(a.processTemplateParams===!1)continue;const l=Aie[a.tag];if(l&&typeof a.props[l]=="string")a.props[l]=mb(a.props[l],r,s);else if(a.processTemplateParams||a.tag==="titleTemplate"||a.tag==="title")for(const c of Iie)typeof a[c]=="string"&&(a[c]=mb(a[c],r,s,a.tag==="script"&&a.props.type.endsWith("json")))}n._templateParams=r,n._separator=s},"tags:afterResolve":({tags:t})=>{let e;for(let i=0;i<t.length;i+=1){const r=t[i];r.tag==="title"&&r.processTemplateParams!==!1&&(e=r)}e!=null&&e.textContent&&(e.textContent=mb(e.textContent,n._templateParams,n._separator))}}}),xie={hooks:{"tags:resolve":n=>{const{tags:t}=n;let e,i;for(let r=0;r<t.length;r+=1){const s=t[r];s.tag==="title"?e=s:s.tag==="titleTemplate"&&(i=s)}if(i&&e){const r=ER(i.textContent,e.textContent);r!==null?e.textContent=r||e.textContent:n.tags.splice(n.tags.indexOf(e),1)}else if(i){const r=ER(i.textContent);r!==null&&(i.textContent=r,i.tag="title",i=void 0)}i&&n.tags.splice(n.tags.indexOf(i),1)}}},Oie={hooks:{"tags:afterResolve":n=>{for(const t of n.tags)typeof t.innerHTML=="string"&&(t.innerHTML&&(t.props.type==="application/ld+json"||t.props.type==="application/json")?t.innerHTML=t.innerHTML.replace(/</g,"\\u003C"):t.innerHTML=t.innerHTML.replace(new RegExp(`</${t.tag}`,"g"),`<\\/${t.tag}`))}}};let B4;function Rie(n={}){const t=Vie(n);return t.use(fie()),B4=t}function CR(n,t){return!n||n==="server"&&t||n==="client"&&!t}function Vie(n={}){const t=bie();t.addHooks(n.hooks||{}),n.document=n.document||(tie?document:void 0);const e=!n.document,i=()=>{a.dirty=!0,t.callHook("entries:updated",a)};let r=0,s=[];const o=[],a={plugins:o,dirty:!1,resolvedOptions:n,hooks:t,headEntries(){return s},use(l){const c=typeof l=="function"?l(a):l;(!c.key||!o.some(u=>u.key===c.key))&&(o.push(c),CR(c.mode,e)&&t.addHooks(c.hooks||{}))},push(l,c){c==null||delete c.head;const u={_i:r++,input:l,...c};return CR(u.mode,e)&&(s.push(u),i()),{dispose(){s=s.filter(d=>d._i!==u._i),i()},patch(d){for(const f of s)f._i===u._i&&(f.input=u.input=d);i()}}},async resolveTags(){const l={tags:[],entries:[...s]};await t.callHook("entries:resolve",l);for(const c of l.entries){const u=c.resolvedInput||c.input;if(c.resolvedInput=await(c.transform?c.transform(u):u),c.resolvedInput)for(const d of await sie(c)){const f={tag:d,entry:c,resolvedOptions:a.resolvedOptions};await t.callHook("tag:normalise",f),l.tags.push(f.tag)}}return await t.callHook("tags:beforeResolve",l),await t.callHook("tags:resolve",l),await t.callHook("tags:afterResolve",l),l.tags},ssr:e};return[yie,Tie,kie,Cie,Sie,Pie,xie,Oie,...(n==null?void 0:n.plugins)||[]].forEach(l=>a.use(l)),a.hooks.callHook("init",a),a}function Die(){return B4}const Nie=wv[0]==="3";function Lie(n){return typeof n=="function"?n():M(n)}function py(n){if(n instanceof Promise||n instanceof Date||n instanceof RegExp)return n;const t=Lie(n);if(!n||!t)return t;if(Array.isArray(t))return t.map(e=>py(e));if(typeof t=="object"){const e={};for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(i==="titleTemplate"||i[0]==="o"&&i[1]==="n"){e[i]=M(t[i]);continue}e[i]=py(t[i])}return e}return t}const Mie={hooks:{"entries:resolve":n=>{for(const t of n.entries)t.resolvedInput=py(t.input)}}},F4="usehead";function $ie(n){return{install(e){Nie&&(e.config.globalProperties.$unhead=n,e.config.globalProperties.$head=n,e.provide(F4,n))}}.install}function Bie(n={}){n.domDelayFn=n.domDelayFn||(e=>Zn(()=>setTimeout(()=>e(),0)));const t=Rie(n);return t.use(Mie),t.install=$ie(t),t}const TR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},SR="__unhead_injection_handler__";function Fie(){return SR in TR?TR[SR]():Ci(F4)||Die()}function Ev(n,t={}){const e=t.head||Fie();if(e)return e.ssr?e.push(n,t):Uie(e,n,t)}function Uie(n,t,e={}){const i=Z(!1),r=Z({});yh(()=>{r.value=i.value?{}:py(t)});const s=n.push(r.value,e);return gt(r,a=>{s.patch(a)}),Yr()&&(wa(()=>{s.dispose()}),ZS(()=>{i.value=!0}),QS(()=>{i.value=!1})),s}function zie(n){const t=n;return t.headTags=n.resolveTags,t.addEntry=n.push,t.addHeadObjs=n.push,t.addReactiveEntry=(e,i)=>{const r=Ev(e,i);return r!==void 0?r.dispose:()=>{}},t.removeHeadObjs=()=>{},t.updateDOM=()=>{n.hooks.callHook("entries:updated",n)},t.unhead=n,t}function Hie(n,t){const e=Bie({});return zie(e)}const Wie={key:0,class:"browser-compatibility-warning"},jie={class:"container py-4"},qie={class:"alert alert-warning"},Gie={__name:"App",setup(n){const t=Z(!1),e=Z(!0),i=Z(!1),r=nn(),s=Z("/favicon.ico"),o=Z("digitalwahl.org"),a=async()=>{var u;try{const f=await(await fetch("/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`
          query SystemSettings {
            systemSettings {
              faviconUrl
              titleSuffix
            }
          }
        `})})).json();if((u=f.data)!=null&&u.systemSettings){const h=f.data.systemSettings;h.faviconUrl&&(s.value=h.faviconUrl),h.titleSuffix&&(o.value=h.titleSuffix),localStorage.setItem("systemSettings",JSON.stringify(h))}}catch(d){console.warn("Could not load system settings:",d),window.location.hostname==="vereinswahl.vielwerth-junginger.de"&&(s.value="https://vielwerth-junginger.de/wp-content/uploads/2023/07/cropped-vielwerth-junginger-favicon-32x32.png",o.value="vereinswahl.vielwerth-junginger.de",localStorage.setItem("systemSettings",JSON.stringify({faviconUrl:s.value,titleSuffix:o.value})))}};Ev({link:[{rel:"icon",href:s,type:"image/png"}]}),sy(Tr),(async()=>{try{await r.init(),await a(),t.value=!0;const u=R4(),d=Qne({showAlert:!1,onIncompatible:f=>{e.value=!1;try{const h={compatibility:f,browser:u,timestamp:new Date().toISOString(),url:window.location.href};console.warn("Browser-Kompatibilitätsproblem:",h)}catch(h){console.error("Fehler beim Senden der Telemetrie-Daten:",h)}}});if(u.isSafari){console.info("Safari erkannt - aktiviere erweiterte Fallback-Mechanismen");try{localStorage.setItem("safari-compatibility-check","ok");const f=localStorage.getItem("safari-compatibility-check");localStorage.removeItem("safari-compatibility-check"),f!=="ok"&&(console.warn("Safari localStorage Test fehlgeschlagen!"),e.value=!1)}catch(f){console.error("Safari localStorage Fehler:",f),e.value=!1}}}catch(u){console.error("App.vue initialization failed:",u)}})();const l=Z(!1);return gt(()=>r.isInitialized,u=>{u&&(l.value=!0)}),Ur(Zne,()=>{var u;return{eventUserId:((u=r.user)==null?void 0:u.id)||null}},{enabled:l}).onResult(async u=>{if(!u.data)return;const{tokenRefreshRequired:d}=u.data;if(d&&r.user.id==d.userId&&r.user.type===d.userType){console.info("[TokenRefresh] Server requested token refresh:",d.reason);try{if(d.token)await r.loginUser(d.token,!0),console.info("[TokenRefresh] Successfully refreshed token from subscription data");else{const{token:f}=await QA();f&&(await r.loginUser(f,!0),console.info("[TokenRefresh] Successfully refreshed token via API"))}}catch(f){console.error("[TokenRefresh] Failed to refresh token:",f),Mt(f)}}}),Jt(()=>{const u=document.createElement("style");u.textContent=`
    .browser-compatibility-warning {
      position: relative;
      z-index: 1050;
      background-color: rgba(255, 255, 255, 0.95);
    }
  `,document.head.appendChild(u)}),(u,d)=>{const f=si("router-view"),h=si("DialogsWrapper");return t.value?(P(),V(Fe,{key:0},[e.value?ne("",!0):(P(),V("div",Wie,[m("div",jie,[m("div",qie,[d[1]||(d[1]=m("h4",null,[m("i",{class:"bi bi-exclamation-triangle-fill me-2"}),fe(" Browser-Kompatibilitätswarnung")],-1)),d[2]||(d[2]=m("p",null,"Ihr Browser unterstützt möglicherweise nicht alle Funktionen, die für eine zuverlässige Abstimmung benötigt werden.",-1)),d[3]||(d[3]=m("p",null,[m("strong",null,"Empfehlung:"),fe(" Verwenden Sie einen modernen Browser wie Chrome, Firefox oder Edge.")],-1)),d[4]||(d[4]=m("p",null,"Alternativ können Sie folgende Einstellungen in Ihrem aktuellen Browser überprüfen:",-1)),d[5]||(d[5]=m("ul",null,[m("li",null,'Deaktivieren Sie den "Privaten Modus" oder "Inkognito-Modus"'),m("li",null,"Erlauben Sie Cookies und Website-Daten für diese Seite"),m("li",null,"Deaktivieren Sie den Tracking-Schutz oder Content-Blocker temporär")],-1)),m("button",{class:"btn btn-primary mt-2",onClick:d[0]||(d[0]=g=>i.value=!0)}," Fortfahren trotz Einschränkungen ")])])])),e.value||i.value?(P(),V(Fe,{key:1},[Ce(f),Ce(Yne),Ce(h)],64)):ne("",!0)],64)):ne("",!0)}}};/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const $f=typeof document<"u";function U4(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function Kie(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&U4(n.default)}const Xn=Object.assign;function fk(n,t){const e={};for(const i in t){const r=t[i];e[i]=Ea(r)?r.map(n):n(r)}return e}const tp=()=>{},Ea=Array.isArray,z4=/#/g,Yie=/&/g,Qie=/\//g,Zie=/=/g,Jie=/\?/g,H4=/\+/g,Xie=/%5B/g,ere=/%5D/g,W4=/%5E/g,tre=/%60/g,j4=/%7B/g,nre=/%7C/g,q4=/%7D/g,ire=/%20/g;function rI(n){return encodeURI(""+n).replace(nre,"|").replace(Xie,"[").replace(ere,"]")}function rre(n){return rI(n).replace(j4,"{").replace(q4,"}").replace(W4,"^")}function oT(n){return rI(n).replace(H4,"%2B").replace(ire,"+").replace(z4,"%23").replace(Yie,"%26").replace(tre,"`").replace(j4,"{").replace(q4,"}").replace(W4,"^")}function sre(n){return oT(n).replace(Zie,"%3D")}function ore(n){return rI(n).replace(z4,"%23").replace(Jie,"%3F")}function are(n){return n==null?"":ore(n).replace(Qie,"%2F")}function zp(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const lre=/\/$/,cre=n=>n.replace(lre,"");function hk(n,t,e="/"){let i,r={},s="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=t.slice(0,l),s=t.slice(l+1,a>-1?a:t.length),r=n(s)),a>-1&&(i=i||t.slice(0,a),o=t.slice(a,t.length)),i=hre(i??t,e),{fullPath:i+(s&&"?")+s+o,path:i,query:r,hash:zp(o)}}function ure(n,t){const e=t.query?n(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function AR(n,t){return!t||!n.toLowerCase().startsWith(t.toLowerCase())?n:n.slice(t.length)||"/"}function dre(n,t,e){const i=t.matched.length-1,r=e.matched.length-1;return i>-1&&i===r&&jh(t.matched[i],e.matched[r])&&G4(t.params,e.params)&&n(t.query)===n(e.query)&&t.hash===e.hash}function jh(n,t){return(n.aliasOf||n)===(t.aliasOf||t)}function G4(n,t){if(Object.keys(n).length!==Object.keys(t).length)return!1;for(const e in n)if(!fre(n[e],t[e]))return!1;return!0}function fre(n,t){return Ea(n)?IR(n,t):Ea(t)?IR(t,n):n===t}function IR(n,t){return Ea(t)?n.length===t.length&&n.every((e,i)=>e===t[i]):n.length===1&&n[0]===t}function hre(n,t){if(n.startsWith("/"))return n;if(!n)return t;const e=t.split("/"),i=n.split("/"),r=i[i.length-1];(r===".."||r===".")&&i.push("");let s=e.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")s>1&&s--;else break;return e.slice(0,s).join("/")+"/"+i.slice(o).join("/")}const Cc={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Hp;(function(n){n.pop="pop",n.push="push"})(Hp||(Hp={}));var np;(function(n){n.back="back",n.forward="forward",n.unknown=""})(np||(np={}));function mre(n){if(!n)if($f){const t=document.querySelector("base");n=t&&t.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),cre(n)}const gre=/^[^#]+#/;function pre(n,t){return n.replace(gre,"#")+t}function vre(n,t){const e=document.documentElement.getBoundingClientRect(),i=n.getBoundingClientRect();return{behavior:t.behavior,left:i.left-e.left-(t.left||0),top:i.top-e.top-(t.top||0)}}const d0=()=>({left:window.scrollX,top:window.scrollY});function bre(n){let t;if("el"in n){const e=n.el,i=typeof e=="string"&&e.startsWith("#"),r=typeof e=="string"?i?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!r)return;t=vre(r,n)}else t=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function PR(n,t){return(history.state?history.state.position-t:-1)+n}const aT=new Map;function wre(n,t){aT.set(n,t)}function yre(n){const t=aT.get(n);return aT.delete(n),t}let _re=()=>location.protocol+"//"+location.host;function K4(n,t){const{pathname:e,search:i,hash:r}=t,s=n.indexOf("#");if(s>-1){let a=r.includes(n.slice(s))?n.slice(s).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),AR(l,"")}return AR(e,n)+i+r}function kre(n,t,e,i){let r=[],s=[],o=null;const a=({state:f})=>{const h=K4(n,location),g=e.value,v=t.value;let _=0;if(f){if(e.value=h,t.value=f,o&&o===g){o=null;return}_=v?f.position-v.position:0}else i(h);r.forEach(w=>{w(e.value,g,{delta:_,type:Hp.pop,direction:_?_>0?np.forward:np.back:np.unknown})})};function l(){o=e.value}function c(f){r.push(f);const h=()=>{const g=r.indexOf(f);g>-1&&r.splice(g,1)};return s.push(h),h}function u(){const{history:f}=window;f.state&&f.replaceState(Xn({},f.state,{scroll:d0()}),"")}function d(){for(const f of s)f();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function xR(n,t,e,i=!1,r=!1){return{back:n,current:t,forward:e,replaced:i,position:window.history.length,scroll:r?d0():null}}function Ere(n){const{history:t,location:e}=window,i={value:K4(n,e)},r={value:t.state};r.value||s(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const d=n.indexOf("#"),f=d>-1?(e.host&&document.querySelector("base")?n:n.slice(d))+l:_re()+n+l;try{t[u?"replaceState":"pushState"](c,"",f),r.value=c}catch(h){console.error(h),e[u?"replace":"assign"](f)}}function o(l,c){const u=Xn({},t.state,xR(r.value.back,l,r.value.forward,!0),c,{position:r.value.position});s(l,u,!0),i.value=l}function a(l,c){const u=Xn({},r.value,t.state,{forward:l,scroll:d0()});s(u.current,u,!0);const d=Xn({},xR(i.value,l,null),{position:u.position+1},c);s(l,d,!1),i.value=l}return{location:i,state:r,push:a,replace:o}}function Cre(n){n=mre(n);const t=Ere(n),e=kre(n,t.state,t.location,t.replace);function i(s,o=!0){o||e.pauseListeners(),history.go(s)}const r=Xn({location:"",base:n,go:i,createHref:pre.bind(null,n)},t,e);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function Tre(n){return typeof n=="string"||n&&typeof n=="object"}function Y4(n){return typeof n=="string"||typeof n=="symbol"}const Q4=Symbol("");var OR;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(OR||(OR={}));function qh(n,t){return Xn(new Error,{type:n,[Q4]:!0},t)}function Al(n,t){return n instanceof Error&&Q4 in n&&(t==null||!!(n.type&t))}const RR="[^/]+?",Sre={sensitive:!1,strict:!1,start:!0,end:!0},Are=/[.+*?^${}()[\]/\\]/g;function Ire(n,t){const e=Xn({},Sre,t),i=[];let r=e.start?"^":"";const s=[];for(const c of n){const u=c.length?[]:[90];e.strict&&!c.length&&(r+="/");for(let d=0;d<c.length;d++){const f=c[d];let h=40+(e.sensitive?.25:0);if(f.type===0)d||(r+="/"),r+=f.value.replace(Are,"\\$&"),h+=40;else if(f.type===1){const{value:g,repeatable:v,optional:_,regexp:w}=f;s.push({name:g,repeatable:v,optional:_});const C=w||RR;if(C!==RR){h+=10;try{new RegExp(`(${C})`)}catch(E){throw new Error(`Invalid custom RegExp for param "${g}" (${C}): `+E.message)}}let k=v?`((?:${C})(?:/(?:${C}))*)`:`(${C})`;d||(k=_&&c.length<2?`(?:/${k})`:"/"+k),_&&(k+="?"),r+=k,h+=20,_&&(h+=-8),v&&(h+=-20),C===".*"&&(h+=-50)}u.push(h)}i.push(u)}if(e.strict&&e.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}e.strict||(r+="/?"),e.end?r+="$":e.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,e.sensitive?"":"i");function a(c){const u=c.match(o),d={};if(!u)return null;for(let f=1;f<u.length;f++){const h=u[f]||"",g=s[f-1];d[g.name]=h&&g.repeatable?h.split("/"):h}return d}function l(c){let u="",d=!1;for(const f of n){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const h of f)if(h.type===0)u+=h.value;else if(h.type===1){const{value:g,repeatable:v,optional:_}=h,w=g in c?c[g]:"";if(Ea(w)&&!v)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const C=Ea(w)?w.join("/"):w;if(!C)if(_)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${g}"`);u+=C}}return u||"/"}return{re:o,score:i,keys:s,parse:a,stringify:l}}function Pre(n,t){let e=0;for(;e<n.length&&e<t.length;){const i=t[e]-n[e];if(i)return i;e++}return n.length<t.length?n.length===1&&n[0]===80?-1:1:n.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Z4(n,t){let e=0;const i=n.score,r=t.score;for(;e<i.length&&e<r.length;){const s=Pre(i[e],r[e]);if(s)return s;e++}if(Math.abs(r.length-i.length)===1){if(VR(i))return 1;if(VR(r))return-1}return r.length-i.length}function VR(n){const t=n[n.length-1];return n.length>0&&t[t.length-1]<0}const xre={type:0,value:""},Ore=/[a-zA-Z0-9_]/;function Rre(n){if(!n)return[[]];if(n==="/")return[[xre]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function t(h){throw new Error(`ERR (${e})/"${c}": ${h}`)}let e=0,i=e;const r=[];let s;function o(){s&&r.push(s),s=[]}let a=0,l,c="",u="";function d(){c&&(e===0?s.push({type:0,value:c}):e===1||e===2||e===3?(s.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&e!==2){i=e,e=4;continue}switch(e){case 0:l==="/"?(c&&d(),o()):l===":"?(d(),e=1):f();break;case 4:f(),e=i;break;case 1:l==="("?e=2:Ore.test(l)?f():(d(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:e=3:u+=l;break;case 3:d(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${c}"`),d(),o(),r}function Vre(n,t,e){const i=Ire(Rre(n.path),e),r=Xn(i,{record:n,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function Dre(n,t){const e=[],i=new Map;t=MR({strict:!1,end:!0,sensitive:!1},t);function r(d){return i.get(d)}function s(d,f,h){const g=!h,v=NR(d);v.aliasOf=h&&h.record;const _=MR(t,d),w=[v];if("alias"in d){const E=typeof d.alias=="string"?[d.alias]:d.alias;for(const A of E)w.push(NR(Xn({},v,{components:h?h.record.components:v.components,path:A,aliasOf:h?h.record:v})))}let C,k;for(const E of w){const{path:A}=E;if(f&&A[0]!=="/"){const x=f.record.path,p=x[x.length-1]==="/"?"":"/";E.path=f.record.path+(A&&p+A)}if(C=Vre(E,f,_),h?h.alias.push(C):(k=k||C,k!==C&&k.alias.push(C),g&&d.name&&!LR(C)&&o(d.name)),J4(C)&&l(C),v.children){const x=v.children;for(let p=0;p<x.length;p++)s(x[p],C,h&&h.children[p])}h=h||C}return k?()=>{o(k)}:tp}function o(d){if(Y4(d)){const f=i.get(d);f&&(i.delete(d),e.splice(e.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=e.indexOf(d);f>-1&&(e.splice(f,1),d.record.name&&i.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return e}function l(d){const f=Mre(d,e);e.splice(f,0,d),d.record.name&&!LR(d)&&i.set(d.record.name,d)}function c(d,f){let h,g={},v,_;if("name"in d&&d.name){if(h=i.get(d.name),!h)throw qh(1,{location:d});_=h.record.name,g=Xn(DR(f.params,h.keys.filter(k=>!k.optional).concat(h.parent?h.parent.keys.filter(k=>k.optional):[]).map(k=>k.name)),d.params&&DR(d.params,h.keys.map(k=>k.name))),v=h.stringify(g)}else if(d.path!=null)v=d.path,h=e.find(k=>k.re.test(v)),h&&(g=h.parse(v),_=h.record.name);else{if(h=f.name?i.get(f.name):e.find(k=>k.re.test(f.path)),!h)throw qh(1,{location:d,currentLocation:f});_=h.record.name,g=Xn({},f.params,d.params),v=h.stringify(g)}const w=[];let C=h;for(;C;)w.unshift(C.record),C=C.parent;return{name:_,path:v,params:g,matched:w,meta:Lre(w)}}n.forEach(d=>s(d));function u(){e.length=0,i.clear()}return{addRoute:s,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:r}}function DR(n,t){const e={};for(const i of t)i in n&&(e[i]=n[i]);return e}function NR(n){const t={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:Nre(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Nre(n){const t={},e=n.props||!1;if("component"in n)t.default=e;else for(const i in n.components)t[i]=typeof e=="object"?e[i]:e;return t}function LR(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function Lre(n){return n.reduce((t,e)=>Xn(t,e.meta),{})}function MR(n,t){const e={};for(const i in n)e[i]=i in t?t[i]:n[i];return e}function Mre(n,t){let e=0,i=t.length;for(;e!==i;){const s=e+i>>1;Z4(n,t[s])<0?i=s:e=s+1}const r=$re(n);return r&&(i=t.lastIndexOf(r,i-1)),i}function $re(n){let t=n;for(;t=t.parent;)if(J4(t)&&Z4(n,t)===0)return t}function J4({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function Bre(n){const t={};if(n===""||n==="?")return t;const i=(n[0]==="?"?n.slice(1):n).split("&");for(let r=0;r<i.length;++r){const s=i[r].replace(H4," "),o=s.indexOf("="),a=zp(o<0?s:s.slice(0,o)),l=o<0?null:zp(s.slice(o+1));if(a in t){let c=t[a];Ea(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function $R(n){let t="";for(let e in n){const i=n[e];if(e=sre(e),i==null){i!==void 0&&(t+=(t.length?"&":"")+e);continue}(Ea(i)?i.map(s=>s&&oT(s)):[i&&oT(i)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+e,s!=null&&(t+="="+s))})}return t}function Fre(n){const t={};for(const e in n){const i=n[e];i!==void 0&&(t[e]=Ea(i)?i.map(r=>r==null?null:""+r):i==null?i:""+i)}return t}const Ure=Symbol(""),BR=Symbol(""),f0=Symbol(""),sI=Symbol(""),lT=Symbol("");function sg(){let n=[];function t(i){return n.push(i),()=>{const r=n.indexOf(i);r>-1&&n.splice(r,1)}}function e(){n=[]}return{add:t,list:()=>n.slice(),reset:e}}function zc(n,t,e,i,r,s=o=>o()){const o=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(qh(4,{from:e,to:t})):f instanceof Error?l(f):Tre(f)?l(qh(2,{from:t,to:f})):(o&&i.enterCallbacks[r]===o&&typeof f=="function"&&o.push(f),a())},u=s(()=>n.call(i&&i.instances[r],t,e,c));let d=Promise.resolve(u);n.length<3&&(d=d.then(c)),d.catch(f=>l(f))})}function mk(n,t,e,i,r=s=>s()){const s=[];for(const o of n)for(const a in o.components){let l=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(U4(l)){const u=(l.__vccOpts||l)[t];u&&s.push(zc(u,e,i,o,a,r))}else{let c=l();s.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=Kie(u)?u.default:u;o.mods[a]=u,o.components[a]=d;const h=(d.__vccOpts||d)[t];return h&&zc(h,e,i,o,a,r)()}))}}return s}function FR(n){const t=Ci(f0),e=Ci(sI),i=le(()=>{const l=M(n.to);return t.resolve(l)}),r=le(()=>{const{matched:l}=i.value,{length:c}=l,u=l[c-1],d=e.matched;if(!u||!d.length)return-1;const f=d.findIndex(jh.bind(null,u));if(f>-1)return f;const h=UR(l[c-2]);return c>1&&UR(u)===h&&d[d.length-1].path!==h?d.findIndex(jh.bind(null,l[c-2])):f}),s=le(()=>r.value>-1&&qre(e.params,i.value.params)),o=le(()=>r.value>-1&&r.value===e.matched.length-1&&G4(e.params,i.value.params));function a(l={}){if(jre(l)){const c=t[M(n.replace)?"replace":"push"](M(n.to)).catch(tp);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:i,href:le(()=>i.value.href),isActive:s,isExactActive:o,navigate:a}}function zre(n){return n.length===1?n[0]:n}const Hre=Cn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:FR,setup(n,{slots:t}){const e=Kt(FR(n)),{options:i}=Ci(f0),r=le(()=>({[zR(n.activeClass,i.linkActiveClass,"router-link-active")]:e.isActive,[zR(n.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const s=t.default&&zre(t.default(e));return n.custom?s:ca("a",{"aria-current":e.isExactActive?n.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:r.value},s)}}}),Wre=Hre;function jre(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const t=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return n.preventDefault&&n.preventDefault(),!0}}function qre(n,t){for(const e in t){const i=t[e],r=n[e];if(typeof i=="string"){if(i!==r)return!1}else if(!Ea(r)||r.length!==i.length||i.some((s,o)=>s!==r[o]))return!1}return!0}function UR(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const zR=(n,t,e)=>n??t??e,Gre=Cn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:t,slots:e}){const i=Ci(lT),r=le(()=>n.route||i.value),s=Ci(BR,0),o=le(()=>{let c=M(s);const{matched:u}=r.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=le(()=>r.value.matched[o.value]);Qa(BR,le(()=>o.value+1)),Qa(Ure,a),Qa(lT,r);const l=Z();return gt(()=>[l.value,a.value,n.name],([c,u,d],[f,h,g])=>{u&&(u.instances[d]=c,h&&h!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=h.leaveGuards),u.updateGuards.size||(u.updateGuards=h.updateGuards))),c&&u&&(!h||!jh(u,h)||!f)&&(u.enterCallbacks[d]||[]).forEach(v=>v(c))},{flush:"post"}),()=>{const c=r.value,u=n.name,d=a.value,f=d&&d.components[u];if(!f)return HR(e.default,{Component:f,route:c});const h=d.props[u],g=h?h===!0?c.params:typeof h=="function"?h(c):h:null,_=ca(f,Xn({},g,t,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return HR(e.default,{Component:_,route:c})||_}}});function HR(n,t){if(!n)return null;const e=n(t);return e.length===1?e[0]:e}const Kre=Gre;function Yre(n){const t=Dre(n.routes,n),e=n.parseQuery||Bre,i=n.stringifyQuery||$R,r=n.history,s=sg(),o=sg(),a=sg(),l=ha(Cc);let c=Cc;$f&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=fk.bind(null,ae=>""+ae),d=fk.bind(null,are),f=fk.bind(null,zp);function h(ae,xe){let he,Ae;return Y4(ae)?(he=t.getRecordMatcher(ae),Ae=xe):Ae=ae,t.addRoute(Ae,he)}function g(ae){const xe=t.getRecordMatcher(ae);xe&&t.removeRoute(xe)}function v(){return t.getRoutes().map(ae=>ae.record)}function _(ae){return!!t.getRecordMatcher(ae)}function w(ae,xe){if(xe=Xn({},xe||l.value),typeof ae=="string"){const Y=hk(e,ae,xe.path),oe=t.resolve({path:Y.path},xe),Ue=r.createHref(Y.fullPath);return Xn(Y,oe,{params:f(oe.params),hash:zp(Y.hash),redirectedFrom:void 0,href:Ue})}let he;if(ae.path!=null)he=Xn({},ae,{path:hk(e,ae.path,xe.path).path});else{const Y=Xn({},ae.params);for(const oe in Y)Y[oe]==null&&delete Y[oe];he=Xn({},ae,{params:d(Y)}),xe.params=d(xe.params)}const Ae=t.resolve(he,xe),We=ae.hash||"";Ae.params=u(f(Ae.params));const Ee=ure(i,Xn({},ae,{hash:rre(We),path:Ae.path})),G=r.createHref(Ee);return Xn({fullPath:Ee,hash:We,query:i===$R?Fre(ae.query):ae.query||{}},Ae,{redirectedFrom:void 0,href:G})}function C(ae){return typeof ae=="string"?hk(e,ae,l.value.path):Xn({},ae)}function k(ae,xe){if(c!==ae)return qh(8,{from:xe,to:ae})}function E(ae){return p(ae)}function A(ae){return E(Xn(C(ae),{replace:!0}))}function x(ae){const xe=ae.matched[ae.matched.length-1];if(xe&&xe.redirect){const{redirect:he}=xe;let Ae=typeof he=="function"?he(ae):he;return typeof Ae=="string"&&(Ae=Ae.includes("?")||Ae.includes("#")?Ae=C(Ae):{path:Ae},Ae.params={}),Xn({query:ae.query,hash:ae.hash,params:Ae.path!=null?{}:ae.params},Ae)}}function p(ae,xe){const he=c=w(ae),Ae=l.value,We=ae.state,Ee=ae.force,G=ae.replace===!0,Y=x(he);if(Y)return p(Xn(C(Y),{state:typeof Y=="object"?Xn({},We,Y.state):We,force:Ee,replace:G}),xe||he);const oe=he;oe.redirectedFrom=xe;let Ue;return!Ee&&dre(i,Ae,he)&&(Ue=qh(16,{to:oe,from:Ae}),ge(Ae,Ae,!0,!1)),(Ue?Promise.resolve(Ue):S(oe,Ae)).catch(Oe=>Al(Oe)?Al(Oe,2)?Oe:z(Oe):re(Oe,oe,Ae)).then(Oe=>{if(Oe){if(Al(Oe,2))return p(Xn({replace:G},C(Oe.to),{state:typeof Oe.to=="object"?Xn({},We,Oe.to.state):We,force:Ee}),xe||oe)}else Oe=F(oe,Ae,!0,G,We);return I(oe,Ae,Oe),Oe})}function D(ae,xe){const he=k(ae,xe);return he?Promise.reject(he):Promise.resolve()}function R(ae){const xe=ve.values().next().value;return xe&&typeof xe.runWithContext=="function"?xe.runWithContext(ae):ae()}function S(ae,xe){let he;const[Ae,We,Ee]=Qre(ae,xe);he=mk(Ae.reverse(),"beforeRouteLeave",ae,xe);for(const Y of Ae)Y.leaveGuards.forEach(oe=>{he.push(zc(oe,ae,xe))});const G=D.bind(null,ae,xe);return he.push(G),J(he).then(()=>{he=[];for(const Y of s.list())he.push(zc(Y,ae,xe));return he.push(G),J(he)}).then(()=>{he=mk(We,"beforeRouteUpdate",ae,xe);for(const Y of We)Y.updateGuards.forEach(oe=>{he.push(zc(oe,ae,xe))});return he.push(G),J(he)}).then(()=>{he=[];for(const Y of Ee)if(Y.beforeEnter)if(Ea(Y.beforeEnter))for(const oe of Y.beforeEnter)he.push(zc(oe,ae,xe));else he.push(zc(Y.beforeEnter,ae,xe));return he.push(G),J(he)}).then(()=>(ae.matched.forEach(Y=>Y.enterCallbacks={}),he=mk(Ee,"beforeRouteEnter",ae,xe,R),he.push(G),J(he))).then(()=>{he=[];for(const Y of o.list())he.push(zc(Y,ae,xe));return he.push(G),J(he)}).catch(Y=>Al(Y,8)?Y:Promise.reject(Y))}function I(ae,xe,he){a.list().forEach(Ae=>R(()=>Ae(ae,xe,he)))}function F(ae,xe,he,Ae,We){const Ee=k(ae,xe);if(Ee)return Ee;const G=xe===Cc,Y=$f?history.state:{};he&&(Ae||G?r.replace(ae.fullPath,Xn({scroll:G&&Y&&Y.scroll},We)):r.push(ae.fullPath,We)),l.value=ae,ge(ae,xe,he,G),z()}let H;function q(){H||(H=r.listen((ae,xe,he)=>{if(!ce.listening)return;const Ae=w(ae),We=x(Ae);if(We){p(Xn(We,{replace:!0,force:!0}),Ae).catch(tp);return}c=Ae;const Ee=l.value;$f&&wre(PR(Ee.fullPath,he.delta),d0()),S(Ae,Ee).catch(G=>Al(G,12)?G:Al(G,2)?(p(Xn(C(G.to),{force:!0}),Ae).then(Y=>{Al(Y,20)&&!he.delta&&he.type===Hp.pop&&r.go(-1,!1)}).catch(tp),Promise.reject()):(he.delta&&r.go(-he.delta,!1),re(G,Ae,Ee))).then(G=>{G=G||F(Ae,Ee,!1),G&&(he.delta&&!Al(G,8)?r.go(-he.delta,!1):he.type===Hp.pop&&Al(G,20)&&r.go(-1,!1)),I(Ae,Ee,G)}).catch(tp)}))}let N=sg(),$=sg(),U;function re(ae,xe,he){z(ae);const Ae=$.list();return Ae.length?Ae.forEach(We=>We(ae,xe,he)):console.error(ae),Promise.reject(ae)}function K(){return U&&l.value!==Cc?Promise.resolve():new Promise((ae,xe)=>{N.add([ae,xe])})}function z(ae){return U||(U=!ae,q(),N.list().forEach(([xe,he])=>ae?he(ae):xe()),N.reset()),ae}function ge(ae,xe,he,Ae){const{scrollBehavior:We}=n;if(!$f||!We)return Promise.resolve();const Ee=!he&&yre(PR(ae.fullPath,0))||(Ae||!he)&&history.state&&history.state.scroll||null;return Zn().then(()=>We(ae,xe,Ee)).then(G=>G&&bre(G)).catch(G=>re(G,ae,xe))}const Q=ae=>r.go(ae);let ue;const ve=new Set,ce={currentRoute:l,listening:!0,addRoute:h,removeRoute:g,clearRoutes:t.clearRoutes,hasRoute:_,getRoutes:v,resolve:w,options:n,push:E,replace:A,go:Q,back:()=>Q(-1),forward:()=>Q(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:$.add,isReady:K,install(ae){const xe=this;ae.component("RouterLink",Wre),ae.component("RouterView",Kre),ae.config.globalProperties.$router=xe,Object.defineProperty(ae.config.globalProperties,"$route",{enumerable:!0,get:()=>M(l)}),$f&&!ue&&l.value===Cc&&(ue=!0,E(r.location).catch(We=>{}));const he={};for(const We in Cc)Object.defineProperty(he,We,{get:()=>l.value[We],enumerable:!0});ae.provide(f0,xe),ae.provide(sI,zS(he)),ae.provide(lT,l);const Ae=ae.unmount;ve.add(ae),ae.unmount=function(){ve.delete(ae),ve.size<1&&(c=Cc,H&&H(),H=null,l.value=Cc,ue=!1,U=!1),Ae()}}};function J(ae){return ae.reduce((xe,he)=>xe.then(()=>R(he)),Promise.resolve())}return ce}function Qre(n,t){const e=[],i=[],r=[],s=Math.max(t.matched.length,n.matched.length);for(let o=0;o<s;o++){const a=t.matched[o];a&&(n.matched.find(c=>jh(c,a))?i.push(a):e.push(a));const l=n.matched[o];l&&(t.matched.find(c=>jh(c,l))||r.push(l))}return[e,i,r]}function Li(){return Ci(f0)}function Ui(n){return Ci(sI)}class an{constructor(t,e,i,r=null,s=null,o=null,a=null,l=null){this.path=t,this.name=e,this.component=i,this.redirect=s,this.meta=r,this.props=o,this.children=a,this.beforeEnter=l}}const Gh="mainLogin",WR="404",X4="requestChangeOrganizerPassword",Zre="changeOrganizerPassword",eU="registerOrganizer",Jre="verifyRegisteredOrganizer",tU="dataProtection",nU="faq",iU="functions",rU="imprint",oI="manual",sU="userAgreement",oU="staticPage",mi="organizerDashboard",vd="organizerProfile",pr="organizerEvents",_o="organizerManagement",ko="organizerAllEvents",cl="organizerMessageEditor",dc="organizerStaticContentEditor",fc="organizerGlobalSettings",Ir="organizerVideoConference",aU="organizerVideoConferenceNew",lU="organizerVideoConferenceEdit",cU="organizerEventsNew",aI="organizerEventsEdit",Ul="organizerMemberRoom",Og="organizerLobbyRoom",io="organizerPolls",lI="organizerPollsNew",cI="organizerPollsEdit",uI="organizerPollsCopy",Rg="organizerPollResults",uU="organizerEventUserNew",dU="organizerEventUserEdit",fU="organizerEventUserMultipleNew",hU="eventUserFrame",Xre="eventUserActivateAuthToken",ese="shortlinkRedirect";function jo(n){const t=Li(),e=[];return n.forEach(i=>{const r=t.getRoutes().find(s=>s.name===i);r&&e.push(r)}),e}function gb(n){return Li().getRoutes().find(e=>e.name===n)}const tse=mt`
  mutation UpsertPageSlug($pageKey: String!, $slug: String!) {
    upsertPageSlug(pageKey: $pageKey, slug: $slug) {
      id
      pageKey
      slug
      createdAt
      updatedAt
    }
  }
`,jR=mt`
  mutation DeletePageSlug($pageKey: String!) {
    deletePageSlug(pageKey: $pageKey)
  }
`;mt`
  query FetchPageSlugs {
    pageSlugs {
      id
      pageKey
      slug
      createdAt
      updatedAt
    }
  }
`;mt`
  query FetchPageSlugByKey($pageKey: String!) {
    pageSlugByPageKey(pageKey: $pageKey) {
      id
      pageKey
      slug
      createdAt
      updatedAt
    }
  }
`;const nse=mt`
  query FetchPageSlugBySlug($slug: String!) {
    pageSlugBySlug(slug: $slug) {
      id
      pageKey
      slug
      createdAt
      updatedAt
    }
  }
`,pf=async n=>{var t;try{return!n||typeof n!="string"?null:((t=(await Tr.query({query:nse,variables:{slug:n},fetchPolicy:"network-only"})).data)==null?void 0:t.pageSlugBySlug)||null}catch(e){return console.error("Error checking if slug exists:",e),null}},ise={class:"fixed-bottom page-footer font-small border-top bg-white pb-2"},rse={class:"d-flex justify-content-center text-center"},sse={class:"nav navbar-nav flex-row"},ose={class:"nav-item m-1"},ase={key:0,class:"d-flex justify-content-center pb-2"},lse={__name:"LoginFooter",setup(n){const t=nn(),e=le(()=>t.getUseDbFooterNavigation),i=le(()=>t.getUseDirectStaticPaths),r=[rU,sU,tU,iU,nU,oI],s=Z([]),o=Z(!1),a=u=>i.value?{path:`/${u}`}:{name:oU,params:{pageKey:u}},{resolveClient:l}=pl();Jt(async()=>{e.value&&await c()}),gt(e,async u=>{u&&await c()});const c=async()=>{if(e.value){o.value=!0;try{const d=await l().query({query:mt`
        query GetAllStaticPages {
          staticContents {
            id
            pageKey
            sectionKey
            title
            isPublished
            ordering
          }
        }
      `,fetchPolicy:"network-only"}),f={};d.data.staticContents.forEach(h=>{h.isPublished&&(f[h.pageKey]||(f[h.pageKey]={pageKey:h.pageKey,title:h.title||h.pageKey,sectionKey:h.sectionKey,ordering:h.ordering}))}),s.value=Object.values(f).sort((h,g)=>h.ordering-g.ordering)}catch(u){console.error("Failed to load dynamic pages:",u)}finally{o.value=!1}}};return(u,d)=>{const f=si("router-link");return P(),V("footer",ise,[m("nav",rse,[m("ul",sse,[m("li",ose,[Ce(f,{to:{name:M(Gh)},class:"nav-link p-1"},{default:$e(()=>[fe(B(u.$t("navigation.views.startPage")),1)]),_:1},8,["to"])]),e.value?(P(!0),V(Fe,{key:1},ct(s.value,h=>(P(),V("li",{key:h.pageKey,class:"nav-item m-1"},[Ce(f,{to:a(h.pageKey),class:"nav-link p-1"},{default:$e(()=>[fe(B(h.title||h.pageKey),1)]),_:2},1032,["to"])]))),128)):(P(),V(Fe,{key:0},ct(r,h=>m("li",{key:h,class:"nav-item m-1"},[Ce(f,{to:{name:h},class:"nav-link p-1"},{default:$e(()=>[fe(B(u.$t("navigation.views.staticPages."+h)),1)]),_:2},1032,["to"])])),64))])]),o.value?(P(),V("div",ase,[...d[0]||(d[0]=[m("div",{class:"spinner-border spinner-border-sm text-primary",role:"status"},[m("span",{class:"visually-hidden"},"Wird geladen...")],-1)])])):ne("",!0)])}}},cse=Yt(lse,[["__scopeId","data-v-7c3e45b7"]]),use={class:"core-page container-fluid"},dse={class:"container core-page-container"},fse={__name:"CorePageLayout",props:{metaTitle:{type:String,default:"Einfach die Wahl haben"}},setup(n){return Ev({title:n.metaTitle??"Einfach die Wahl haben",titleTemplate:e=>{const r=JSON.parse(localStorage.getItem("systemSettings")||"{}").titleSuffix||"digitalwahl.org";return`${e} - ${r}`},htmlAttrs:{lang:"de"},meta:[{name:"description",content:"Einfach die Wahl haben."},{name:"viewport",content:"width=device-width, initial-scale=1"}]}),(e,i)=>(P(),V(Fe,null,[m("div",use,[m("div",dse,[ht(e.$slots,"default",{},void 0,!0)])]),Ce(cse)],64))}},Zs=Yt(fse,[["__scopeId","data-v-103518e1"]]),hse=["for"],mse=["id","name","placeholder","autocomplete","readonly","type"],gse={key:1,class:"form-text text-muted"},pse=["innerHTML"],yn={__name:"BaseInput",props:{label:String,placeholder:String,id:String,type:String,name:String,autocomplete:String,readonly:String,classes:{type:Array,default:[]},hasErrors:Boolean,errors:{type:Array,default:[]},value:String,helpText:String},emits:["change"],setup(n,{emit:t}){const e=t,r=Z(n.value);function s(){e("change",{value:r.value})}return(o,a)=>(P(),V(Fe,null,[n.label?(P(),V("label",{key:0,for:n.id},B(n.label),9,hse)):ne("",!0),vn(m("input",{id:n.id,"onUpdate:modelValue":a[0]||(a[0]=l=>r.value=l),name:n.name,class:Ze(["form-control",n.hasErrors?"is-invalid":null,...n.classes]),placeholder:n.placeholder,autocomplete:n.autocomplete,readonly:n.readonly,type:n.type,onKeyup:s,onBlur:s,onChange:s},null,42,mse),[[$_,r.value]]),n.helpText?(P(),V("div",gse,[m("span",{innerHTML:n.helpText},null,8,pse)])):ne("",!0),(P(!0),V(Fe,null,ct(n.errors,l=>(P(),V("span",{key:l.uid,class:"form-field-error text-danger"},[fe(B(o.$t("error.formValidation."+l.$validator)),1),a[1]||(a[1]=m("br",null,null,-1))]))),128))],64))}};function qR(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function Wp(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?qR(Object(e),!0).forEach(function(i){vse(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):qR(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function vse(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function vy(n){return typeof n=="function"}function cT(n){return n!==null&&typeof n=="object"&&!Array.isArray(n)}function h0(n){return vy(n.$validator)?Wp({},n):{$validator:n}}function Im(n){return typeof n=="object"?n.$valid:n}function Pm(n){return n.$validator||n}function dI(n,t){if(!cT(n))throw new Error(`[@vuelidate/validators]: First parameter to "withParams" should be an object, provided ${typeof n}`);if(!cT(t)&&!vy(t))throw new Error("[@vuelidate/validators]: Validator must be a function or object with $validator parameter");const e=h0(t);return e.$params=Wp(Wp({},e.$params||{}),n),e}function fI(n,t){if(!vy(n)&&typeof M(n)!="string")throw new Error(`[@vuelidate/validators]: First parameter to "withMessage" should be string or a function returning a string, provided ${typeof n}`);if(!cT(t)&&!vy(t))throw new Error("[@vuelidate/validators]: Validator must be a function or object with $validator parameter");const e=h0(t);return e.$message=n,e}function bse(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const e=h0(n);return Wp(Wp({},e),{},{$async:!0,$watchTargets:t})}function wse(n){return{$validator(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return M(t).reduce((s,o,a)=>{const l=Object.entries(o).reduce((c,u)=>{let[d,f]=u;const h=n[d]||{},g=Object.entries(h).reduce((v,_)=>{let[w,C]=_;const E=Pm(C).call(this,f,o,a,...i),A=Im(E);if(v.$data[w]=E,v.$data.$invalid=!A||!!v.$data.$invalid,v.$data.$error=v.$data.$invalid,!A){let x=C.$message||"";const p=C.$params||{};typeof x=="function"&&(x=x({$pending:!1,$invalid:!A,$params:p,$model:f,$response:E})),v.$errors.push({$property:d,$message:x,$params:p,$response:E,$model:f,$pending:!1,$validator:w})}return{$valid:v.$valid&&A,$data:v.$data,$errors:v.$errors}},{$valid:!0,$data:{},$errors:[]});return c.$data[d]=g.$data,c.$errors[d]=g.$errors,{$valid:c.$valid&&g.$valid,$data:c.$data,$errors:c.$errors}},{$valid:!0,$data:{},$errors:{}});return{$valid:s.$valid&&l.$valid,$data:s.$data.concat(l.$data),$errors:s.$errors.concat(l.$errors)}},{$valid:!0,$data:[],$errors:[]})},$message:t=>{let{$response:e}=t;return e?e.$errors.map(i=>Object.values(i).map(r=>r.map(s=>s.$message)).reduce((r,s)=>r.concat(s),[])):[]}}}const m0=n=>{if(n=M(n),Array.isArray(n))return!!n.length;if(n==null)return!1;if(n===!1)return!0;if(n instanceof Date)return!isNaN(n.getTime());if(typeof n=="object"){for(let t in n)return!0;return!1}return!!String(n).length},yse=n=>(n=M(n),Array.isArray(n)?n.length:typeof n=="object"?Object.keys(n).length:String(n).length);function Au(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return i=>(i=M(i),!m0(i)||t.every(r=>(r.lastIndex=0,r.test(i))))}var g0=Object.freeze({__proto__:null,forEach:wse,len:yse,normalizeValidatorObject:h0,regex:Au,req:m0,unwrap:M,unwrapNormalizedValidator:Pm,unwrapValidatorResponse:Im,withAsync:bse,withMessage:fI,withParams:dI});Au(/^[a-zA-Z]*$/);Au(/^[a-zA-Z0-9]*$/);Au(/^\d*(\.\d+)?$/);const _se=/^(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]{2,}(?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i;Au(_se);function kse(n){return typeof n=="string"&&(n=n.trim()),m0(n)}var Bt={$validator:kse,$message:"Value is required",$params:{type:"required"}};const GR=(n,t)=>n?m0(typeof t=="string"?t.trim():t):!0;function Ese(n){return function(t,e){if(typeof n!="function")return GR(M(n),t);const i=n.call(this,t,e);return GR(i,t)}}function by(n){return{$validator:Ese(n),$message:"The value is required",$params:{type:"requiredIf",prop:n}}}function Cse(n){return t=>M(t)===M(n)}function KR(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"other";return{$validator:Cse(n),$message:e=>`The value must be equal to the ${t} value`,$params:{equalTo:n,otherName:t,type:"sameAs"}}}const Tse=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i;Au(Tse);function Sse(n){return function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return n.reduce((r,s)=>Im(r)?r:Pm(s).apply(this,e),!1)}}function Ase(n){return function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return n.reduce(async(r,s)=>{const o=await r;return Im(o)?o:Pm(s).apply(this,e)},Promise.resolve(!1))}}function Ise(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];const i=t.some(o=>o.$async),r=t.reduce((o,a)=>a.$watchTargets?o.concat(a.$watchTargets):o,[]);let s=()=>!1;return t.length&&(s=i?Ase(t):Sse(t)),{$async:i,$validator:s,$watchTargets:r}}function YR(){return dI({type:"or"},fI("The value does not match any of the provided validators",Ise(...arguments)))}function Pse(n){return function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return n.reduce((r,s)=>Im(r)?Pm(s).apply(this,e):r,!0)}}function xse(n){return function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return n.reduce(async(r,s)=>{const o=await r;return Im(o)?Pm(s).apply(this,e):o},Promise.resolve(!0))}}function Ose(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];const i=t.some(o=>o.$async),r=t.reduce((o,a)=>a.$watchTargets?o.concat(a.$watchTargets):o,[]);let s=()=>!1;return t.length&&(s=i?xse(t):Pse(t)),{$async:i,$validator:s,$watchTargets:r}}function Wu(){return dI({type:"and"},fI("The value does not match all of the provided validators",Ose(...arguments)))}Au(/(^[0-9]*$)|(^-[0-9]+$)/);Au(/^[-]?\d*(\.\d+)?$/);function QR(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function Hc(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?QR(Object(e),!0).forEach(function(i){Rse(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):QR(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function Rse(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function ZR(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Object.keys(n).reduce((e,i)=>(t.includes(i)||(e[i]=M(n[i])),e),{})}function wy(n){return typeof n=="function"}function Vse(n){return Do(n)||ol(n)}function mU(n,t,e){let i=n;const r=t.split(".");for(let s=0;s<r.length;s++){if(!i[r[s]])return e;i=i[r[s]]}return i}function gk(n,t,e){return le(()=>n.some(i=>mU(t,i,{[e]:!1})[e]))}function JR(n,t,e){return le(()=>n.reduce((i,r)=>{const s=mU(t,r,{[e]:!1})[e]||[];return i.concat(s)},[]))}function gU(n,t,e,i){return n.call(i,M(t),M(e),i)}function pU(n){return n.$valid!==void 0?!n.$valid:!n}function Dse(n,t,e,i,r,s,o){let{$lazy:a,$rewardEarly:l}=r,c=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],u=arguments.length>8?arguments[8]:void 0,d=arguments.length>9?arguments[9]:void 0,f=arguments.length>10?arguments[10]:void 0;const h=Z(!!i.value),g=Z(0);e.value=!1;const v=gt([t,i].concat(c,f),()=>{if(a&&!i.value||l&&!d.value&&!e.value)return;let _;try{_=gU(n,t,u,o)}catch(w){_=Promise.reject(w)}g.value++,e.value=!!g.value,h.value=!1,Promise.resolve(_).then(w=>{g.value--,e.value=!!g.value,s.value=w,h.value=pU(w)}).catch(w=>{g.value--,e.value=!!g.value,s.value=w,h.value=!0})},{immediate:!0,deep:typeof t=="object"});return{$invalid:h,$unwatch:v}}function Nse(n,t,e,i,r,s,o,a){let{$lazy:l,$rewardEarly:c}=i;const u=()=>({}),d=le(()=>{if(l&&!e.value||c&&!a.value)return!1;let f=!0;try{const h=gU(n,t,o,s);r.value=h,f=pU(h)}catch(h){r.value=h}return f});return{$unwatch:u,$invalid:d}}function Lse(n,t,e,i,r,s,o,a,l,c,u){const d=Z(!1),f=n.$params||{},h=Z(null);let g,v;n.$async?{$invalid:g,$unwatch:v}=Dse(n.$validator,t,d,e,i,h,r,n.$watchTargets,l,c,u):{$invalid:g,$unwatch:v}=Nse(n.$validator,t,e,i,h,r,l,c);const _=n.$message;return{$message:wy(_)?le(()=>_(ZR({$pending:d,$invalid:g,$params:ZR(f),$model:t,$response:h,$validator:s,$propertyPath:a,$property:o}))):_||"",$params:f,$pending:d,$invalid:g,$response:h,$unwatch:v}}function Mse(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=M(n),e=Object.keys(t),i={},r={},s={};let o=null;return e.forEach(a=>{const l=t[a];switch(!0){case wy(l.$validator):i[a]=l;break;case wy(l):i[a]={$validator:l};break;case a==="$validationGroups":o=l;break;case a.startsWith("$"):s[a]=l;break;default:r[a]=l}}),{rules:i,nestedValidators:r,config:s,validationGroups:o}}const $se="__root";function Bse(n,t,e,i,r,s,o,a,l){const c=Object.keys(n),u=i.get(r,n),d=Z(!1),f=Z(!1),h=Z(0);if(u){if(!u.$partial)return u;u.$unwatch(),d.value=u.$dirty.value}const g={$dirty:d,$path:r,$touch:()=>{d.value||(d.value=!0)},$reset:()=>{d.value&&(d.value=!1)},$commit:()=>{}};return c.length?(c.forEach(v=>{g[v]=Lse(n[v],t,g.$dirty,s,o,v,e,r,l,f,h)}),g.$externalResults=le(()=>a.value?[].concat(a.value).map((v,_)=>({$propertyPath:r,$property:e,$validator:"$externalResults",$uid:`${r}-externalResult-${_}`,$message:v,$params:{},$response:null,$pending:!1})):[]),g.$invalid=le(()=>{const v=c.some(_=>M(g[_].$invalid));return f.value=v,!!g.$externalResults.value.length||v}),g.$pending=le(()=>c.some(v=>M(g[v].$pending))),g.$error=le(()=>g.$dirty.value?g.$pending.value||g.$invalid.value:!1),g.$silentErrors=le(()=>c.filter(v=>M(g[v].$invalid)).map(v=>{const _=g[v];return Kt({$propertyPath:r,$property:e,$validator:v,$uid:`${r}-${v}`,$message:_.$message,$params:_.$params,$response:_.$response,$pending:_.$pending})}).concat(g.$externalResults.value)),g.$errors=le(()=>g.$dirty.value?g.$silentErrors.value:[]),g.$unwatch=()=>c.forEach(v=>{g[v].$unwatch()}),g.$commit=()=>{f.value=!0,h.value=Date.now()},i.set(r,n,g),g):(u&&i.set(r,n,g),g)}function Fse(n,t,e,i,r,s,o){const a=Object.keys(n);return a.length?a.reduce((l,c)=>(l[c]=uT({validations:n[c],state:t,key:c,parentKey:e,resultsCache:i,globalConfig:r,instance:s,externalResults:o}),l),{}):{}}function Use(n,t,e){const i=le(()=>[t,e].filter(g=>g).reduce((g,v)=>g.concat(Object.values(M(v))),[])),r=le({get(){return n.$dirty.value||(i.value.length?i.value.every(g=>g.$dirty):!1)},set(g){n.$dirty.value=g}}),s=le(()=>{const g=M(n.$silentErrors)||[],v=i.value.filter(_=>(M(_).$silentErrors||[]).length).reduce((_,w)=>_.concat(...w.$silentErrors),[]);return g.concat(v)}),o=le(()=>{const g=M(n.$errors)||[],v=i.value.filter(_=>(M(_).$errors||[]).length).reduce((_,w)=>_.concat(...w.$errors),[]);return g.concat(v)}),a=le(()=>i.value.some(g=>g.$invalid)||M(n.$invalid)||!1),l=le(()=>i.value.some(g=>M(g.$pending))||M(n.$pending)||!1),c=le(()=>i.value.some(g=>g.$dirty)||i.value.some(g=>g.$anyDirty)||r.value),u=le(()=>r.value?l.value||a.value:!1),d=()=>{n.$touch(),i.value.forEach(g=>{g.$touch()})},f=()=>{n.$commit(),i.value.forEach(g=>{g.$commit()})},h=()=>{n.$reset(),i.value.forEach(g=>{g.$reset()})};return i.value.length&&i.value.every(g=>g.$dirty)&&d(),{$dirty:r,$errors:o,$invalid:a,$anyDirty:c,$error:u,$pending:l,$touch:d,$reset:h,$silentErrors:s,$commit:f}}function uT(n){let{validations:t,state:e,key:i,parentKey:r,childResults:s,resultsCache:o,globalConfig:a={},instance:l,externalResults:c}=n;const u=r?`${r}.${i}`:i,{rules:d,nestedValidators:f,config:h,validationGroups:g}=Mse(t),v=Hc(Hc({},a),h),_=i?le(()=>{const z=M(e);return z?M(z[i]):void 0}):e,w=Hc({},M(c)||{}),C=le(()=>{const z=M(c);return i?z?M(z[i]):void 0:z}),k=Bse(d,_,i,o,u,v,l,C,e),E=Fse(f,_,u,o,v,l,C),A={};g&&Object.entries(g).forEach(z=>{let[ge,Q]=z;A[ge]={$invalid:gk(Q,E,"$invalid"),$error:gk(Q,E,"$error"),$pending:gk(Q,E,"$pending"),$errors:JR(Q,E,"$errors"),$silentErrors:JR(Q,E,"$silentErrors")}});const{$dirty:x,$errors:p,$invalid:D,$anyDirty:R,$error:S,$pending:I,$touch:F,$reset:H,$silentErrors:q,$commit:N}=Use(k,E,s),$=i?le({get:()=>M(_),set:z=>{x.value=!0;const ge=M(e),Q=M(c);Q&&(Q[i]=w[i]),En(ge[i])?ge[i].value=z:ge[i]=z}}):null;i&&v.$autoDirty&&gt(_,()=>{x.value||F();const z=M(c);z&&(z[i]=w[i])},{flush:"sync"});async function U(){return F(),v.$rewardEarly&&(N(),await Zn()),await Zn(),new Promise(z=>{if(!I.value)return z(!D.value);const ge=gt(I,()=>{z(!D.value),ge()})})}function re(z){return(s.value||{})[z]}function K(){En(c)?c.value=w:Object.keys(w).length===0?Object.keys(c).forEach(z=>{delete c[z]}):Object.assign(c,w)}return Kt(Hc(Hc(Hc({},k),{},{$model:$,$dirty:x,$error:S,$errors:p,$invalid:D,$anyDirty:R,$pending:I,$touch:F,$reset:H,$path:u||$se,$silentErrors:q,$validate:U,$commit:N},s&&{$getResultsForChild:re,$clearExternalResults:K,$validationGroups:A}),E))}class zse{constructor(){this.storage=new Map}set(t,e,i){this.storage.set(t,{rules:e,result:i})}checkRulesValidity(t,e,i){const r=Object.keys(i),s=Object.keys(e);return s.length!==r.length||!s.every(a=>r.includes(a))?!1:s.every(a=>e[a].$params?Object.keys(e[a].$params).every(l=>M(i[a].$params[l])===M(e[a].$params[l])):!0)}get(t,e){const i=this.storage.get(t);if(!i)return;const{rules:r,result:s}=i,o=this.checkRulesValidity(t,e,r),a=s.$unwatch?s.$unwatch:()=>({});return o?s:{$dirty:s.$dirty,$partial:!0,$unwatch:a}}}const vw={COLLECT_ALL:!0,COLLECT_NONE:!1},XR=Symbol("vuelidate#injectChildResults"),eV=Symbol("vuelidate#removeChildResults");function Hse(n){let{$scope:t,instance:e}=n;const i={},r=Z([]),s=le(()=>r.value.reduce((u,d)=>(u[d]=M(i[d]),u),{}));function o(u,d){let{$registerAs:f,$scope:h,$stopPropagation:g}=d;g||t===vw.COLLECT_NONE||h===vw.COLLECT_NONE||t!==vw.COLLECT_ALL&&t!==h||(i[f]=u,r.value.push(f))}e.__vuelidateInjectInstances=[].concat(e.__vuelidateInjectInstances||[],o);function a(u){r.value=r.value.filter(d=>d!==u),delete i[u]}e.__vuelidateRemoveInstances=[].concat(e.__vuelidateRemoveInstances||[],a);const l=Ci(XR,[]);Qa(XR,e.__vuelidateInjectInstances);const c=Ci(eV,[]);return Qa(eV,e.__vuelidateRemoveInstances),{childResults:s,sendValidationResultsToParent:l,removeValidationResultsFromParent:c}}function vU(n){return new Proxy(n,{get(t,e){return typeof t[e]=="object"?vU(t[e]):le(()=>t[e])}})}let tV=0;function us(n,t){var e;let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};arguments.length===1&&(i=n,n=void 0,t=void 0);let{$registerAs:r,$scope:s=vw.COLLECT_ALL,$stopPropagation:o,$externalResults:a,currentVueInstance:l}=i;const c=l||((e=Yr())===null||e===void 0?void 0:e.proxy),u=c?c.$options:{};r||(tV+=1,r=`_vuelidate_${tV}`);const d=Z({}),f=new zse,{childResults:h,sendValidationResultsToParent:g,removeValidationResultsFromParent:v}=c?Hse({$scope:s,instance:c}):{childResults:Z({})};if(!n&&u.validations){const _=u.validations;t=Z({}),JS(()=>{t.value=c,gt(()=>wy(_)?_.call(t.value,new vU(t.value)):_,w=>{d.value=uT({validations:w,state:t,childResults:h,resultsCache:f,globalConfig:i,instance:c,externalResults:a||c.vuelidateExternalResults})},{immediate:!0})}),i=u.validationsConfig||i}else{const _=En(n)||Vse(n)?n:Kt(n||{});gt(_,w=>{d.value=uT({validations:w,state:t,childResults:h,resultsCache:f,globalConfig:i,instance:c??{},externalResults:a})},{immediate:!0})}return c&&(g.forEach(_=>_(d,{$registerAs:r,$scope:s,$stopPropagation:o})),wa(()=>v.forEach(_=>_(r)))),le(()=>Hc(Hc({},M(d.value)),h.value))}const Wse={class:"mb-4"},jse={class:"mb-3"},qse={id:"event-user-login-submit",type:"submit",class:"btn btn-secondary btn-block text-white"},Gse={__name:"EventUserLogin",setup(n){const t=Li(),e=Kt({eventSlug:""}),r=us({eventSlug:{required:Bt}},e);async function s(){if(!await r.value.$validate()){Mt(new Pr);return}t.push(`/event/${e.eventSlug}`)}return(o,a)=>(P(),V("form",{id:"event-user-login-form",class:"p-3 card border-info",autocomplete:"off",onSubmit:bt(s,["prevent"])},[m("h2",Wse,B(o.$t("view.login.headline.eventIdent")),1),m("div",jse,[Ce(yn,{id:"event-user-login-event-slug",label:o.$t("view.login.label.eventIdent"),errors:M(r).eventSlug.$errors,"has-errors":M(r).eventSlug.$errors.length>0,onChange:a[0]||(a[0]=({value:l})=>e.eventSlug=l)},null,8,["label","errors","has-errors"])]),m("button",qse,B(o.$t("view.login.submitToEvent")),1)],32))}},Kse={class:"mb-4"},Yse={class:"mb-3"},Qse={class:"mb-3"},Zse={class:"mb-3"},Jse={id:"organizer-login-submit",type:"submit",class:"btn btn-primary w-100"},Xse={__name:"OrganizerLogin",setup(n){const t=nn(),e=X4,i=Kt({username:"",password:""}),s=us({username:{required:Bt},password:{required:Bt}},i),o=Li();async function a(){if(!await s.value.$validate()){Mt(new Pr);return}kne(i.username,i.password).then(({token:c})=>t.loginUser(c)).then(()=>o.push({name:mi})).then(()=>ze(Xe("success.login.organizer"),{type:"success"})).catch(c=>Mt(c,{autoClose:!1}))}return(l,c)=>{const u=si("router-link");return P(),V("form",{id:"organizer-login-form",class:"card p-3 border-primary",onSubmit:bt(a,["prevent"])},[m("h2",Kse,B(l.$t("view.login.headline.orgaLogin")),1),m("div",Yse,[Ce(yn,{id:"organizer-login-username",label:l.$t("view.login.label.onlyUsername"),errors:M(s).username.$errors,"has-errors":M(s).username.$errors.length>0,onChange:c[0]||(c[0]=({value:d})=>{i.username=d})},null,8,["label","errors","has-errors"])]),m("div",Qse,[Ce(yn,{id:"organizer-login-password",label:l.$t("view.login.label.password"),errors:M(s).password.$errors,"has-errors":M(s).password.$errors.length>0,autocomplete:"new-password",type:"password",onChange:c[1]||(c[1]=({value:d})=>{i.password=d})},null,8,["label","errors","has-errors"])]),m("div",Zse,[m("button",Jse,B(l.$t("view.login.submit")),1)]),m("small",null,[Ce(u,{to:{name:M(e)}},{default:$e(()=>[fe(B(l.$t("view.login.label.lostPassword")),1)]),_:1},8,["to"])])],32)}}},eoe={class:"icon"},toe={class:"message"},noe={__name:"AlertBox",props:{message:{type:String,required:!1,default:""},type:{type:String,required:!1,default:"success"},useIcon:{type:Boolean,required:!1,default:!0}},setup(n){const t={success:{wrapperClass:"alert-success",icon:"bi-check-circle-fill"},warning:{wrapperClass:"alert-warning",icon:"bi-exclamation-triangle-fill"},danger:{wrapperClass:"alert-danger",icon:"bi-exclamation-triangle-fill"},info:{wrapperClass:"alert-info",icon:"bi-info-circle-fill"}},e=n,i=le(()=>{for(const[r,s]of Object.entries(t))if(r===e.type)return s;throw new Error("Invalid type used for AlertBox. Allowed types are: "+Object.keys(t).join(", "))});return(r,s)=>(P(),V("div",{class:Ze("alert text-start "+i.value.wrapperClass),role:"alert"},[m("div",eoe,[n.useIcon?(P(),V("i",{key:0,class:Ze("bi flex-shrink-0 me-2 "+i.value.icon+" me-2")},null,2)):ne("",!0)]),m("div",toe,[n.message?(P(),V(Fe,{key:0},[fe(B(n.message),1)],64)):ht(r.$slots,"default",{key:1},void 0,!0)])],2))}},qr=Yt(noe,[["__scopeId","data-v-a01ce75c"]]),ioe={class:"card mt-3 p-3"},roe={class:"mb-4"},soe={class:"w-100 d-inline-block"},ooe={__name:"OrganizerRegister",setup(n){return(t,e)=>{const i=si("router-link");return P(),V("div",ioe,[m("h3",roe,B(t.$t("view.login.headline.orgaRegister")),1),Ce(i,{to:{name:M(eU)},class:"btn btn-secondary btn-block w-100 h-100 mb-3"},{default:$e(()=>[fe(B(t.$t("view.login.registerAsOrganizer")),1)]),_:1},8,["to"]),m("span",soe,[Ce(qr,{type:"warning",message:t.$t("view.login.registerAsOrganizerInfo")},null,8,["message"])])])}}},aoe={class:"row align-items-center justify-content-around"},loe={class:"login__col col-12"},coe={class:"login__headline text-center"},uoe={class:"login__subheadline mb-4 text-center subheader"},doe={class:"login__row row justify-content-around mt-5"},foe={class:"login__event mb-5 col-md-5"},hoe={class:"login__organizer mb-5 col-md-5"},moe={__name:"MainLogin",setup(n){return(t,e)=>(P(),Ge(Zs,null,{default:$e(()=>[m("div",aoe,[m("div",loe,[m("h1",coe,B(t.$t("view.login.headline.title")),1),m("h2",uoe,B(t.$t("view.login.headline.subtitle")),1),m("div",doe,[m("div",foe,[Ce(Gse)]),m("div",hoe,[Ce(Xse),Ce(ooe)])])])])]),_:1}))}},goe="/assets/404-robot-COhSJ-nY.svg",poe={class:"container-fluid min-vh-100"},voe={class:"container"},boe={class:"d-block text-center mb-5 mt-5"},woe={__name:"NotFound",setup(n){return(t,e)=>(P(),Ge(Zs,{"meta-title":"404"},{default:$e(()=>[m("div",poe,[m("div",voe,[m("h1",boe,B(t.$t("error.routing.404Headline")),1),e[0]||(e[0]=m("div",{class:"d-flex justify-content-center"},[m("div",{class:"not-found-wrapper"},[m("div",{class:"card"},[m("div",{class:"card-body"},[m("div",{class:"card-img"},[m("img",{alt:"404",class:"img-fluid",src:goe})])])])])],-1))])])]),_:1}))}},pk=Yt(woe,[["__scopeId","data-v-c5b9d76f"]]);function hc(n,t){return fetch(n,t).then(e=>{if((e==null?void 0:e.status)>=500)throw new cn(Xe("error.network.internalServerError"));if((e==null?void 0:e.status)>=400)throw new cn(Xe("error.network.consumerError"));if((e==null?void 0:e.status)===200||(e==null?void 0:e.status)===201)return e;throw new cn(Xe("error.network.undefinedError"))}).then(e=>e.json()).then(e=>{var i,r;if(!(e!=null&&e.success)&&((i=e==null?void 0:e.error)!=null&&i.name))throw new g4(Xe("error.api."+((r=e==null?void 0:e.error)==null?void 0:r.name)));if(!(e!=null&&e.success))throw new cn(Xe("error.network.consumerError"));return e})}function yoe(n){const t=Qr.ORGANIZER_REQUEST_PASSWORD_CHANGE_ENDPOINT,e={method:"POST",body:JSON.stringify({username:n}),redirect:"follow",referrerPolicy:"no-referrer",cache:"no-cache",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json"}};return hc(t,e)}const _oe={class:"request-password-change-organizer"},koe={class:"container"},Eoe={class:"mb-4 text-center d-block"},Coe={class:"d-flex justify-content-center"},Toe={class:"card-body"},Soe={class:"mb-3"},Aoe={type:"submit",class:"btn btn-secondary btn-block"},Ioe={__name:"RequestChangeOrganizerPassword",setup(n){const t=Z(!1),e=Kt({username:""}),r=us({username:{required:Bt}},e);async function s(){if(!await r.value.$validate()){Mt(new Pr);return}try{await yoe(e.username),t.value=!0}catch(a){Mt(a)}}return(o,a)=>(P(),Ge(Zs,{"meta-title":o.$t("view.changeOrganizerPassword.title")},{default:$e(()=>[m("div",_oe,[m("div",koe,[m("h2",Eoe,B(o.$t("view.changeOrganizerPassword.title")),1),m("div",Coe,[t.value?(P(),Ge(qr,{key:1,message:o.$t("view.changeOrganizerPassword.emailHasBeenSent")},null,8,["message"])):(P(),V("form",{key:0,class:"card border-info w-100 request-password-change-organizer-wrapper",onSubmit:bt(s,["prevent"])},[m("div",Toe,[m("div",Soe,[Ce(yn,{label:o.$t("view.changeOrganizerPassword.form.username"),errors:M(r).username.$errors,"has-errors":M(r).username.$errors.length>0,onChange:a[0]||(a[0]=({value:l})=>{e.username=l})},null,8,["label","errors","has-errors"])]),m("button",Aoe,B(o.$t("view.changeOrganizerPassword.form.requestChangePasswordSubmit")),1)])],32))])])])]),_:1},8,["meta-title"]))}},Poe=Yt(Ioe,[["__scopeId","data-v-2c3348a7"]]);function xoe(n,t,e){const i=Qr.ORGANIZER_CHANGE_PASSWORD_ENDPOINT,r={method:"POST",body:JSON.stringify({password:n,passwordRepeat:t,hash:e}),redirect:"follow",referrerPolicy:"no-referrer",cache:"no-cache",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json"}};return hc(i,r)}const hI=(n,t)=>g0.withParams({type:"sameAs",value:n},e=>e===t[n]),nV=n=>t=>t.length>=n,iV=n=>t=>t.length<=n,Da=(n,t,e)=>g0.withParams({type:"objectPropertyIsEqual",value:n},()=>t[n]===e),rV=(n,t,e)=>g0.withParams({type:"objectPropertyIsNotEqual",value:n},()=>t[n]!==e),pb=(n,t,e)=>g0.withParams({type:"objectPropertyIsGreaterThan",value:n},()=>t[n]>e),Ooe={class:"password-change-organizer"},Roe={class:"container"},Voe={class:"mb-4 text-center d-block"},Doe={class:"d-flex justify-content-center"},Noe={class:"card-body"},Loe={class:"mb-3"},Moe={class:"mb-3"},$oe={type:"submit",class:"btn btn-secondary btn-block"},Boe={key:1,class:"d-block"},Foe={__name:"ChangeOrganizerPassword",setup(n){var l;const e=((l=Ui().params)==null?void 0:l.hash)??null;if(!e)throw new Error("Missing required parameter hash!");const i=Z(!1),r=Kt({password:"",passwordRepeated:""}),s={password:{required:Bt},passwordRepeated:{required:Bt,sameAs:hI("password",r)}},o=us(s,r);async function a(){if(!await o.value.$validate()){Mt(new Pr);return}try{await xoe(r.password,r.passwordRepeated,e),i.value=!0}catch(u){Mt(u)}}return(c,u)=>{const d=si("router-link");return P(),Ge(Zs,{"meta-title":c.$t("view.changePassword.title")},{default:$e(()=>[m("div",Ooe,[m("div",Roe,[m("h2",Voe,B(c.$t("view.changePassword.title")),1),m("div",Doe,[i.value?(P(),V("div",Boe,[Ce(qr,{message:c.$t("view.changePassword.form.passwordChangedSuccessfully")},null,8,["message"]),Ce(d,{to:{name:M(Gh)},class:"btn btn-primary d-block w-100"},{default:$e(()=>[fe(B(c.$t("view.changePassword.backToStartpage")),1)]),_:1},8,["to"])])):(P(),V("form",{key:0,class:"card border-info w-100 password-change-organizer-wrapper",onSubmit:bt(a,["prevent"])},[m("div",Noe,[m("div",Loe,[Ce(yn,{label:c.$t("view.profile.label.newPassword"),errors:M(o).password.$errors,"has-errors":M(o).password.$errors.length>0,autocomplete:"new-password",type:"password",onChange:u[0]||(u[0]=({value:f})=>{r.password=f})},null,8,["label","errors","has-errors"])]),m("div",Moe,[Ce(yn,{label:c.$t("view.profile.label.repeatPassword"),errors:M(o).passwordRepeated.$errors,"has-errors":M(o).passwordRepeated.$errors.length>0,autocomplete:"new-password",type:"password",onChange:u[1]||(u[1]=({value:f})=>{r.passwordRepeated=f})},null,8,["label","errors","has-errors"])]),m("button",$oe,B(c.$t("view.changePassword.form.changePasswordSubmit")),1)])],32))])])])]),_:1},8,["meta-title"])}}},Uoe=Yt(Foe,[["__scopeId","data-v-3faca7e5"]]);function zoe(n){const t=Qr.ORGANIZER_CREATE,e={method:"POST",body:JSON.stringify(n),redirect:"follow",referrerPolicy:"no-referrer",cache:"no-cache",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json"}};return hc(t,e)}const Hoe=["for"],Woe={class:"input-group"},joe=["id","name","autocomplete"],qoe={key:1,class:"form-text text-muted"},Goe=["innerHTML"],mI={__name:"EmailInput",props:{label:String,id:String,name:String,autocomplete:String,classes:{type:Array,default:[]},hasErrors:Boolean,errors:{type:Array,default:[]},helpText:String,value:String},emits:["change"],setup(n,{emit:t}){const e=t,r=Z(n.value);function s(){e("change",{value:r.value})}return(o,a)=>(P(),V(Fe,null,[n.label?(P(),V("label",{key:0,for:n.id},B(n.label),9,Hoe)):ne("",!0),m("div",Woe,[a[1]||(a[1]=m("span",{class:"input-group-text"},"@",-1)),vn(m("input",{id:n.id,"onUpdate:modelValue":a[0]||(a[0]=l=>r.value=l),name:n.name,class:Ze(["form-control",n.hasErrors?"is-invalid":null,...n.classes]),autocomplete:n.autocomplete,type:"email",onKeyup:s},null,42,joe),[[Bi,r.value]])]),n.helpText?(P(),V("div",qoe,[m("span",{innerHTML:n.helpText},null,8,Goe)])):ne("",!0),(P(!0),V(Fe,null,ct(n.errors,l=>(P(),V("span",{key:l.uid,class:"form-field-error text-danger"},[fe(B(o.$t("error.formValidation."+l.$validator)),1),a[2]||(a[2]=m("br",null,null,-1))]))),128))],64))}},Koe={class:"form-check"},Yoe=["id","name","value","checked","disabled"],Qoe=["for","innerHTML"],Zoe={key:0,class:"form-text text-muted"},Joe=["innerHTML"],Sr={__name:"CheckboxInput",props:{label:String,id:String,name:String,classes:{type:Array,default:[]},hasErrors:Boolean,errors:{type:Array,default:[]},helpText:String,checked:Boolean,disabled:Boolean,value:[String,Number]},emits:["update:checked"],setup(n){const t=n,e=le(()=>t.id?t.id:`${t.label?t.label.toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""):"checkbox"}-${Math.random().toString(36).substr(2,9)}`);return(i,r)=>(P(),V("div",Koe,[m("input",{id:e.value,name:n.name,class:Ze(["form-check-input",n.hasErrors?"is-invalid":null,...n.classes]),value:n.value??1,checked:n.checked,disabled:n.disabled,type:"checkbox",onInput:r[0]||(r[0]=s=>i.$emit("update:checked",s.target.checked))},null,42,Yoe),m("label",{class:"form-check-label",for:e.value,innerHTML:n.label},null,8,Qoe),n.helpText?(P(),V("div",Zoe,[m("span",{innerHTML:n.helpText},null,8,Joe)])):ne("",!0),(P(!0),V(Fe,null,ct(n.errors,s=>(P(),V("span",{key:s.uid,class:"form-field-error text-danger"},[fe(B(i.$t("error.formValidation."+s.$validator)),1),r[1]||(r[1]=m("br",null,null,-1))]))),128))]))}},Xoe=mt`
  query SystemSettings {
    systemSettings {
      id
      useDirectStaticPaths
      useDbFooterNavigation
      faviconUrl
      titleSuffix
      recaptchaEnabled
      recaptchaSiteKey
      recaptchaSecretKey
      updatedAt
      updatedBy {
        id
        username
      }
    }
  }
`,eae={MODE:"production",VITE_RECAPTCHA_SITE_KEY:"6LcAzPQpAAAAAPoCUtR_DcuHNHi6b6AFi3Y8TpXD"},tae={key:0,class:"recaptcha-wrapper"},nae=["data-sitekey"],iae={key:1,class:"dev-mode-recaptcha"},rae={key:2,class:"recaptcha-disabled"},sae={key:3,class:"recaptcha-loading"},oae={__name:"GoogleRecaptcha",emits:["verified","expired"],setup(n,{emit:t}){const e=t,i=eae,r=Z(null),s=Z(!1),o=i.MODE==="development",{result:a,loading:l}=ln(Xoe,{},{fetchPolicy:"cache-and-network"}),c=le(()=>{var g;return(g=a.value)==null?void 0:g.systemSettings}),u=le(()=>{var g;return((g=c.value)==null?void 0:g.recaptchaSiteKey)||i.VITE_RECAPTCHA_SITE_KEY}),d=le(()=>{var g;return((g=c.value)==null?void 0:g.recaptchaEnabled)??!!u.value});function f(g){r.value=g,s.value=!0,e("verified")}function h(){r.value=null,s.value=!1,e("expired")}return Jt(()=>{function g(){if(!d.value||!u.value){console.log("reCAPTCHA disabled or no site key - automatically verified"),f("disabled-auto-verified");return}const v=document.createElement("script");v.src="https://www.google.com/recaptcha/api.js?render=explicit",v.async=!0,v.defer=!0,document.head.appendChild(v);function _(){if(!window.grecaptcha||!window.grecaptcha.render){setTimeout(_,100);return}window.grecaptcha.ready(()=>{try{window.grecaptcha.render("recaptcha-container",{sitekey:u.value,callback:f,"expired-callback":h})}catch(w){console.error("Error rendering reCAPTCHA:",w)}})}v.onload=_,v.onerror=w=>console.error("Failed to load reCAPTCHA script:",w)}if(l.value){let v=0;const _=()=>{v++,!l.value||v>50?g():setTimeout(_,100)};_()}else g()}),(g,v)=>!o&&d.value&&u.value?(P(),V("div",tae,[m("div",{id:"recaptcha-container",class:"g-recaptcha","data-sitekey":u.value},null,8,nae)])):o?(P(),V("div",iae,[...v[0]||(v[0]=[m("small",{class:"text-muted"},"reCAPTCHA auto-verified in dev mode",-1)])])):d.value?M(l)?(P(),V("div",sae,[...v[2]||(v[2]=[m("small",{class:"text-muted"},"Loading reCAPTCHA configuration...",-1)])])):ne("",!0):(P(),V("div",rae,[...v[1]||(v[1]=[m("small",{class:"text-muted"},"reCAPTCHA is disabled",-1)])]))}},aae={class:"register-organizer"},lae={class:"align-items-center justify-content-center"},cae={class:"register-organizer-wrapper text-center m-auto"},uae={class:"register-organizer-headline"},dae={class:"register-organizer-subheadline"},fae={class:"p-5 mb-4 bg-body-tertiary rounded-3"},hae=["innerHTML"],mae={class:"mb-3"},gae={class:"mb-3"},pae={class:"mb-3"},vae={class:"mb-3"},bae={class:"mb-3"},wae={class:"mb-3"},yae={id:"public-organisation-hint",class:"form-text text-muted"},_ae={class:"mb-3"},kae={class:"mb-3"},Eae=["disabled"],Cae={__name:"RegisterOrganizer",setup(n){const t=Z(!1),e=Z(!1),i=Kt({username:"",email:"",password:"",passwordRepeated:"",publicName:"",publicOrganisation:"",dataProtectionAccepted:!1,isBetaAccepted:!0}),r={username:{required:Bt},email:{required:Bt},password:{required:Bt},passwordRepeated:{required:Bt,sameAs:hI("password",i)},publicName:{required:Bt},publicOrganisation:{required:Bt},dataProtectionAccepted:{required:Bt,checked:KR(!0)},isBetaAccepted:{required:Bt,checked:KR(!0)}},s=us(r,i);async function o(){if(!await s.value.$validate()||!e.value){Mt(new Pr);return}try{await zoe({username:i.username,email:i.email,password:i.password,publicName:i.publicName,publicOrganisation:i.publicOrganisation}),t.value=!0}catch(l){Mt(l)}}return(a,l)=>(P(),Ge(Zs,{"meta-title":a.$t("view.register.headline")},{default:$e(()=>[m("div",aae,[m("div",lae,[m("div",cae,[m("h1",uae,B(a.$t("view.register.headline")),1),m("p",dae,B(a.$t("view.register.subheadline")),1),m("div",fae,[m("p",{class:"register__description",innerHTML:a.$t("view.register.description")},null,8,hae)]),t.value?(P(),Ge(qr,{key:0,message:a.$t("view.register.success")},null,8,["message"])):(P(),V("form",{key:1,id:"register-form",class:"register__form border p-3 text-start",onSubmit:bt(o,["prevent"])},[m("div",mae,[Ce(yn,{label:a.$t("view.register.label.username"),errors:M(s).username.$errors,"has-errors":M(s).username.$errors.length>0,onChange:l[0]||(l[0]=({value:c})=>{i.username=c})},null,8,["label","errors","has-errors"])]),m("div",gae,[Ce(mI,{label:a.$t("view.register.label.email"),errors:M(s).email.$errors,"has-errors":M(s).email.$errors.length>0,onChange:l[1]||(l[1]=({value:c})=>{i.email=c})},null,8,["label","errors","has-errors"])]),m("div",pae,[Ce(yn,{label:a.$t("view.register.label.password"),errors:M(s).password.$errors,"has-errors":M(s).password.$errors.length>0,type:"password",onChange:l[2]||(l[2]=({value:c})=>{i.password=c})},null,8,["label","errors","has-errors"])]),m("div",vae,[Ce(yn,{label:a.$t("view.register.label.repeatPassword"),errors:M(s).passwordRepeated.$errors,"has-errors":M(s).passwordRepeated.$errors.length>0,type:"password",onChange:l[3]||(l[3]=({value:c})=>{i.passwordRepeated=c})},null,8,["label","errors","has-errors"])]),m("div",bae,[Ce(yn,{label:a.$t("view.register.label.publicName"),errors:M(s).publicName.$errors,"has-errors":M(s).publicName.$errors.length>0,onChange:l[4]||(l[4]=({value:c})=>{i.publicName=c})},null,8,["label","errors","has-errors"])]),m("div",wae,[Ce(yn,{label:a.$t("view.register.label.publicOrganisation"),errors:M(s).publicOrganisation.$errors,"has-errors":M(s).publicOrganisation.$errors.length>0,onChange:l[5]||(l[5]=({value:c})=>{i.publicOrganisation=c})},null,8,["label","errors","has-errors"]),m("small",yae,B(a.$t("view.register.label.publicOrganisationHint")),1)]),m("div",_ae,[Ce(Sr,{checked:i.dataProtectionAccepted,"onUpdate:checked":l[6]||(l[6]=c=>i.dataProtectionAccepted=c),label:a.$t("view.register.label.dataProtection"),errors:M(s).dataProtectionAccepted.$errors,"has-errors":M(s).dataProtectionAccepted.$errors.length>0,onUpdate:l[7]||(l[7]=({value:c})=>{i.dataProtectionAccepted=c})},null,8,["checked","label","errors","has-errors"])]),m("div",kae,[Ce(Sr,{checked:i.isBetaAccepted,"onUpdate:checked":l[8]||(l[8]=c=>i.isBetaAccepted=c),label:a.$t("view.register.label.beta"),errors:M(s).isBetaAccepted.$errors,"has-errors":M(s).isBetaAccepted.$errors.length>0,onUpdate:l[9]||(l[9]=({value:c})=>{i.isBetaAccepted=c})},null,8,["checked","label","errors","has-errors"])]),Ce(oae,{onVerified:l[10]||(l[10]=c=>e.value=!0),onExpired:l[11]||(l[11]=c=>e.value=!1)}),m("button",{class:"btn btn-primary btn-block float-end mt-3",disabled:!e.value},B(a.$t("view.register.submit")),9,Eae)],32))])])])]),_:1},8,["meta-title"]))}},Tae=Yt(Cae,[["__scopeId","data-v-04d90a2c"]]);function Sae(n){const t=Qr.ORGANIZER_VALIDATE_HASH_ENDPOINT,e={method:"POST",body:JSON.stringify({hash:n}),redirect:"follow",referrerPolicy:"no-referrer",cache:"no-cache",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json"}};return hc(t,e)}const Aae={class:"verify-registered-organizer"},Iae={class:"align-items-center justify-content-center"},Pae={class:"verify-registered-organizer-wrapper text-center m-auto"},xae={class:"register-organizer-headline"},Oae={__name:"VerifyRegisteredOrganizer",setup(n){var s;const e=((s=Ui().params)==null?void 0:s.hash)??null;if(!e)throw new Error("Missing required parameter hash!");const i=Z(!1),r=Z(!1);return Jt(()=>{Sae(e).then(o=>{o.alreadyConfirmed?(i.value=!1,r.value=!1):i.value=!0}).catch(o=>{console.error(o),r.value=!0,Mt(o)})}),(o,a)=>(P(),Ge(Zs,{"meta-title":o.$t("view.register.headline")},{default:$e(()=>[m("div",Aae,[m("div",Iae,[m("div",Pae,[m("h1",xae,B(o.$t("view.register.headline")),1),i.value&&!r.value?(P(),Ge(qr,{key:0},{default:$e(()=>[m("b",null,B(o.$t("view.register.verify.success")),1),a[0]||(a[0]=m("br",null,null,-1)),fe(" "+B(o.$t("view.register.verify.successDescription")),1)]),_:1})):r.value?(P(),Ge(qr,{key:1,type:"danger"},{default:$e(()=>[m("b",null,B(o.$t("view.register.verify.failed")),1)]),_:1})):(P(),Ge(qr,{key:2,type:"info"},{default:$e(()=>[m("b",null,B(o.$t("view.register.verify.processing")),1),a[1]||(a[1]=m("br",null,null,-1)),fe(" "+B(o.$t("view.register.verify.processingDescription")),1)]),_:1}))])])])]),_:1},8,["meta-title"]))}},Rae=Yt(Oae,[["__scopeId","data-v-6b34c480"]]),Vae={class:"dashboard-container"},Dae={class:"container-fluid mb-5 pb-5"},Nae={class:"row"},Lae={class:"col-12"},Ki={__name:"PageLayout",props:{metaTitle:{type:String,default:"Einfach die Wahl haben"}},setup(n){return Ev({title:n.metaTitle??"Einfach die Wahl haben",titleTemplate:e=>{const r=JSON.parse(localStorage.getItem("systemSettings")||"{}").titleSuffix||"digitalwahl.org";return`${e} - ${r}`},htmlAttrs:{lang:"de"},meta:[{name:"description",content:"Einfach die Wahl haben."},{name:"viewport",content:"width=device-width, initial-scale=1"}]}),(e,i)=>(P(),V("div",Vae,[m("header",null,[ht(e.$slots,"header")]),m("main",Dae,[m("div",Nae,[m("div",Lae,[m("h1",null,[ht(e.$slots,"title")]),i[0]||(i[0]=m("hr",null,null,-1))])]),ht(e.$slots,"content")])]))}},Mae={id:"mainNavigation",class:"navbar navbar-dark fixed-top bg-dark"},$ae={id:"navbarCollapse",class:"collapse navbar-collapse bg-dark"},Bae={key:0,class:"mb-5"},Fae={class:"nav-title"},Uae=["title"],zae={class:"list-group"},Hae={class:"nav-title"},Wae=["title"],jae={class:"nav-title"},qae=["title"],Gae={class:"d-none d-md-block"},Kae={__name:"PageNavigation",props:{routes:{type:Array,required:!0},passParams:{type:Boolean,required:!1,default:!1},showProfileLink:{type:Boolean,required:!1,default:!0}},setup(n){const t=nn(),e=Li(),i=n,r=Ui().params;function s(){Am().then(()=>e.push({name:Gh})).then(()=>ze(Xe("success.logout.organizer"),{type:"success"}))}function o(a){return a.meta.requireSuperOrganizerRole?t.isSuperOrganizer:!0}return(a,l)=>{const c=si("router-link");return P(),V("nav",Mae,[l[1]||(l[1]=m("span",{class:"h5 my-3 d-block text-white"},"Digitalwahl",-1)),l[2]||(l[2]=m("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarCollapse","aria-controls":"navbarCollapse","aria-expanded":"false","aria-label":"Toggle navigation"},[m("span",{class:"navbar-toggler-icon"})],-1)),m("div",$ae,[n.showProfileLink?(P(),V("div",Bae,[Ce(c,{to:{name:M(vd)},class:"btn btn-secondary btn-block py-3 px-0 w-100"},{default:$e(()=>[m("span",Fae,B(a.$t("navigation.views."+M(vd))),1),m("span",{class:"nav-icon bi--2xl bi-person",title:a.$t("navigation.views."+M(vd))},null,8,Uae)]),_:1},8,["to"])])):ne("",!0),m("ul",zae,[(P(!0),V(Fe,null,ct(i.routes,(u,d)=>(P(),V("li",{key:d,class:"navigation-item list-group-item"},[o(u)&&n.passParams?(P(),Ge(c,{key:0,to:{name:u.name,params:M(r)},class:"list-group-item-action btn btn-lg list-group-item-dark d-block w-100 rounded py-3 px-0 text-center"},{default:$e(()=>[m("span",Hae,B(a.$t("navigation.views."+u.name)),1),m("span",{class:Ze(["nav-icon","bi","bi--2xl",u.meta.bootstrapIcon]),title:a.$t("navigation.views."+u.name)},null,10,Wae)]),_:2},1032,["to"])):o(u)?(P(),Ge(c,{key:1,to:{name:u.name},class:"list-group-item-action btn btn-lg list-group-item-dark d-block w-100 rounded py-3 px-0 text-center"},{default:$e(()=>[m("span",jae,B(a.$t("navigation.views."+u.name)),1),m("span",{class:Ze(["nav-icon","bi","bi--2xl",u.meta.bootstrapIcon]),title:a.$t("navigation.views."+u.name)},null,10,qae)]),_:2},1032,["to"])):ne("",!0)]))),128))])]),m("button",{class:"logout btn btn-danger py-1 d-flex align-items-center",onClick:s},[l[0]||(l[0]=m("i",{class:"me-md-3 bi bi-x-square bi--2xl"},null,-1)),m("span",Gae,B(a.$t("navigation.logOut")),1)])])}}},qo=Yt(Kae,[["__scopeId","data-v-6a6d957c"]]),Yae={class:"row"},Qae={class:"col-12 col-sm-6 order-1 order-sm-2"},Zae={class:"row"},Jae={class:"col-6 col-lg-4 col-xl-auto mb-4"},Xae=["title"],ele={class:"nav-title mt-1 px-2"},tle={class:"col-6 col-lg-4 col-xl-auto mb-4"},nle={class:"col-12 col-lg-auto mb-4"},ile={key:0,class:"row mt-4"},rle={class:"col-12"},sle={class:"card"},ole={class:"card-header bg-primary text-white"},ale={class:"h5 mb-0"},lle={class:"card-body"},cle={__name:"OrganizerDashboard",setup(n){const t=nn();t.user;const e=jo([mi,pr,Ir,_o,ko,cl,dc,fc]);return(i,r)=>{const s=si("router-link");return P(),Ge(Ki,{"meta-title":i.$t("navigation.views.organizerDashboard")},{title:$e(()=>[fe(B(i.$t("navigation.views.organizerDashboard")),1)]),header:$e(()=>[Ce(qo,{routes:M(e)},null,8,["routes"])]),content:$e(()=>[m("div",Yae,[r[2]||(r[2]=m("div",{class:"col-12 col-sm-6 order-2 order-sm-1"},[m("div",{class:"card border-secondary p-2 p-sm-4"},[m("h2",{class:"h3"},[m("u",null,"Neuigkeiten")]),m("dl",{class:"mb-1"},[m("dt",null,"Asynchrone Abstimmungen"),m("dd",null," Definieren Sie einen Start- und Endzeitpunkt für Ihre Veranstaltung. Alle Teilnehmer können dann innerhalb dieses Zeitraums abstimmen. Die Ergebnisse werden erst nach Ablauf des Endzeitpunkts angezeigt. "),m("dt",null," Neue Pseudonymisierte Zugriffsart für Teilnehmer: Token-basierter Zugang "),m("dd",null,[fe(" Als Organisator tragen Sie bei den Teilnehmern E-Mail Adressen ein. Die Teilnehmer erhalten dann einen Link per E-Mail, mit dem sie sich anmelden können. Bei der Anmeldung wird ein Schlüssel (Token) auf dem verwendeten Endgerät gespeichert. Es wird kein Zusammenhang zwischen E-Mail Adresse und Token vom System gespeichert. Der Token wird als Zugangsschlüssel zur Veranstaltung verwendet."),m("br"),m("u",null,"Wichtig:"),m("br"),fe(" Teilnehmer müssen das gleiche Endgerät verwenden, mit dem sie sich angemeldet haben. Ansonsten ist der Zugang nicht möglich. ")]),m("dt",null,"Technisches Update"),m("dd",null," Dank einem technischen Update ist die Anwendung nun noch schneller und stabiler. Einige Funktionen wurden verbessert und Fehler behoben. ")]),m("hr"),m("p",null,[fe(" Sie benötigen ein neue Funktion? Schreiben Sie Ihren Vorschlag an "),m("a",{href:"mailto:info@digitalwahl.de"},"info@digitalwahl.de")]),m("p",null,[fe(" Der komplette Quellcode ist öffentlich verfügbar unter: "),m("br"),m("a",{href:"https://github.com/FailXSiegen/voting-service-client-v2",target:"_blank"}," https://github.com/FailXSiegen/voting-service-client-v2 "),m("br"),m("a",{href:"https://github.com/FailXSiegen/voting-service-api",target:"_blank"}," https://github.com/FailXSiegen/voting-service-api ")]),m("p",null," Der Quellcode und die Funktion wurden von der Firma amexus Informationstechnik GmbH & Co. KG geprüft. Stand 23.12.2021. Auf Anfrage können Sie das Ergebnis per E-Mail als PDF erhalten. ")])],-1)),m("div",Qae,[m("div",Zae,[m("div",Jae,[Ce(s,{to:{name:M(vd)},class:"btn btn-primary tn-block py-3 px-0 d-flex flex-column align-items-center h-100 px-xl-4"},{default:$e(()=>[m("span",{class:"nav-icon bi--6xl bi-person mb-auto",title:i.$t("navigation.views."+M(vd))},null,8,Xae),m("span",ele,B(i.$t("navigation.views."+M(vd))),1)]),_:1},8,["to"])]),m("div",tle,[Ce(s,{to:{name:M(oI)},target:"_blank",class:"btn btn-primary btn-block py-3 px-0 d-flex flex-column h-100 px-xl-4"},{default:$e(()=>[...r[0]||(r[0]=[m("span",{class:"nav-icon bi--6xl bi-question-circle mb-auto",title:"Anleitungen"},null,-1),m("span",{class:"nav-title mt-1 px-2"}," Anleitungen ",-1)])]),_:1},8,["to"])]),m("div",nle,[Ce(s,{to:{name:M(Ir)},class:"btn btn-primary btn-block py-3 px-0 d-flex flex-column align-items-center h-100 px-xl-4"},{default:$e(()=>[...r[1]||(r[1]=[m("span",{class:"btn btn-primary btn-block py-3 px-0 d-flex flex-column h-100"},[m("span",{class:"nav-icon bi--6xl bi-camera-video-fill mb-auto",title:"Videokonferenzsystem einrichten"}),m("span",{class:"nav-title mt-1 px-2"}," Videokonferenzsysteme einrichten ")],-1)])]),_:1},8,["to"])])])])]),M(t).isSuperOrganizer?(P(),V("div",ile,[m("div",rle,[m("div",sle,[m("div",ole,[m("h3",ale,[r[3]||(r[3]=m("i",{class:"bi bi-translate me-2"},null,-1)),fe(" "+B(i.$t("navigation.views.organizerMessageEditor")),1)])]),m("div",lle,[r[5]||(r[5]=m("p",null," Hier können Sie die System-Texte anpassen und überschreiben. Die Änderungen werden in einer separaten Datei gespeichert und überschreiben die Standard-Texte. ",-1)),Ce(s,{to:{name:M(cl)},class:"btn btn-primary"},{default:$e(()=>[r[4]||(r[4]=m("i",{class:"bi bi-translate me-2"},null,-1)),fe(" "+B(i.$t("navigation.views.organizerMessageEditor"))+" öffnen ",1)]),_:1},8,["to"])])])])])):ne("",!0)]),_:1},8,["meta-title"])}}};function ule({username:n,password:t}){const e=Qr.VALIDATE_PASSWORD_ENDPOINT,i={method:"POST",body:JSON.stringify({username:n,password:t}),redirect:"follow",referrerPolicy:"no-referrer",cache:"no-cache",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json"}};return hc(e,i)}const bU=mt`
  mutation updateOrganizer($input: UpdateOrganizerInput!) {
    updateOrganizer(input: $input) {
      id
      publicName
      email
      verified
    }
  }
`,dle={key:0},fle={class:"mb-3"},hle={class:"mb-3"},mle={class:"mb-3"},gle={class:"card mb-3"},ple={class:"card-header"},vle={class:"mb-3"},ble={key:0,class:"card-body"},wle={class:"mb-3"},yle={class:"mb-3"},_le={type:"submit",class:"btn btn-primary btn-block my-3"},kle={__name:"OrganizerProfile",setup(n){var c,u;const t=nn(),e=jo([mi,pr,Ir,_o,ko,cl,dc,fc]),i=Kt({changePassword:!1,currentPassword:"",newPassword:"",newPasswordRepeated:"",email:((c=t.getOrganizer)==null?void 0:c.email)??"",publicName:((u=t.getOrganizer)==null?void 0:u.publicName)??""}),r=le(()=>({currentPassword:{required:Bt},newPassword:i.changePassword?{required:Bt}:{},newPasswordRepeated:i.changePassword?{required:Bt,sameAs:hI("newPassword",i)}:{},email:{required:Bt},publicName:{required:Bt}})),s=us(r,i),{organizer:o}=s4(t),a=le(()=>{var d;return(d=t.getOrganizer)==null?void 0:d.id});gt(o,d=>{i.email=d.email,i.publicName=d.publicName}),t.queryOrganizer();async function l(){var h,g,v;if(!await s.value.$validate()){Mt(new Pr);return}try{await ule({username:t.getOrganizer.username,password:i.currentPassword})}catch(_){Mt(_);return}const{mutate:f}=In(bU,{variables:{input:{id:(h=t.getOrganizer)==null?void 0:h.id,publicName:i.publicName??((g=t.getOrganizer)==null?void 0:g.publicName),email:i.email??((v=t.getOrganizer)==null?void 0:v.email),password:i.changePassword?i.newPassword:void 0}}});await f(),ze(Xe("success.organizer.profile.savedSuccessfully"),{type:"success"})}return(d,f)=>(P(),Ge(Ki,{"meta-title":d.$t("navigation.views.organizerProfile")},{title:$e(()=>[fe(B(d.$t("navigation.views.organizerProfile")),1)]),header:$e(()=>[Ce(qo,{routes:M(e)},null,8,["routes"])]),content:$e(()=>{var h,g,v,_,w,C,k,E,A,x,p,D;return[a.value?(P(),V("div",dle,[m("form",{class:"profile-form",onSubmit:bt(l,["prevent"])},[m("div",fle,[Ce(mI,{label:d.$t("view.profile.label.email"),errors:(h=M(s).email)==null?void 0:h.$errors,"has-errors":((g=M(s).email)==null?void 0:g.$errors.length)>0,value:i.email,onChange:f[0]||(f[0]=({value:R})=>{i.email=R})},null,8,["label","errors","has-errors","value"])]),m("div",hle,[Ce(yn,{label:d.$t("view.profile.label.fullName"),errors:(v=M(s).publicName)==null?void 0:v.$errors,"has-errors":((_=M(s).publicName)==null?void 0:_.$errors.length)>0,value:i.publicName,onChange:f[1]||(f[1]=({value:R})=>{i.publicName=R})},null,8,["label","errors","has-errors","value"])]),m("div",mle,[Ce(yn,{label:d.$t("view.profile.label.currentPassword"),errors:(w=M(s).currentPassword)==null?void 0:w.$errors,"has-errors":((C=M(s).currentPassword)==null?void 0:C.$errors.length)>0,autocomplete:"new-password",type:"password",onChange:f[2]||(f[2]=({value:R})=>{i.currentPassword=R})},null,8,["label","errors","has-errors"])]),m("div",gle,[m("div",ple,[m("div",vle,[Ce(Sr,{checked:i.changePassword,"onUpdate:checked":f[3]||(f[3]=R=>i.changePassword=R),label:"Reset password",errors:(k=M(s).changePassword)==null?void 0:k.$errors,"has-errors":((E=M(s).changePassword)==null?void 0:E.$errors.length)>0,onUpdate:f[4]||(f[4]=({value:R})=>{i.changePassword=R})},null,8,["checked","errors","has-errors"])])]),i.changePassword?(P(),V("div",ble,[m("div",wle,[Ce(yn,{label:d.$t("view.profile.label.newPassword"),errors:(A=M(s).newPassword)==null?void 0:A.$errors,"has-errors":((x=M(s).newPassword)==null?void 0:x.$errors.length)>0,autocomplete:"new-password",type:"password",onChange:f[5]||(f[5]=({value:R})=>{i.newPassword=R})},null,8,["label","errors","has-errors"])]),m("div",yle,[Ce(yn,{label:d.$t("view.profile.label.repeatPassword"),errors:(p=M(s).newPasswordRepeated)==null?void 0:p.$errors,"has-errors":((D=M(s).newPasswordRepeated)==null?void 0:D.$errors.length)>0,autocomplete:"new-password",type:"password",onChange:f[6]||(f[6]=({value:R})=>{i.newPasswordRepeated=R})},null,8,["label","errors","has-errors"])])])):ne("",!0)]),m("button",_le,B(d.$t("view.profile.label.submit")),1)],32)])):ne("",!0)]}),_:1},8,["meta-title"]))}},Ele=Yt(kle,[["__scopeId","data-v-5dc40535"]]),og=Kt([]),wU=function(){return{DialogsStore:og,addDialog:function(i){og.push(bm(i))},removeDialog:function(i){const r=og.findIndex(s=>s.id==i);og.splice(r,1)},removeAll:function(){og.splice(0)}}};function vk(){const n=[],t=r=>{const s=n.indexOf(r);s!==-1&&n.splice(s,1)};return{on:r=>(n.push(r),{off:()=>t(r)}),off:t,trigger:r=>{n.forEach(s=>s(r))}}}const Cle=typeof window<"u",Tle=()=>{},sV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oV="__vueuse_ssr_handlers__";sV[oV]=sV[oV]||{};function Sle(n=Z(!1)){const t=vk(),e=vk(),i=vk();let r=Tle;const s=l=>(i.trigger(l),n.value=!0,new Promise(c=>{r=c})),o=l=>{n.value=!1,t.trigger(l),r({data:l,isCanceled:!1})},a=l=>{n.value=!1,e.trigger(l),r({data:l,isCanceled:!0})};return{isRevealed:le(()=>n.value),reveal:s,confirm:o,cancel:a,onReveal:i.on,onConfirm:t.on,onCancel:e.on}}var aV,lV;Cle&&(window!=null&&window.navigator)&&((aV=window==null?void 0:window.navigator)!=null&&aV.platform)&&/iP(ad|hone|od)/.test((lV=window==null?void 0:window.navigator)==null?void 0:lV.platform);var Ale=Object.defineProperty,cV=Object.getOwnPropertySymbols,Ile=Object.prototype.hasOwnProperty,Ple=Object.prototype.propertyIsEnumerable,uV=(n,t,e)=>t in n?Ale(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,xle=(n,t)=>{for(var e in t||(t={}))Ile.call(t,e)&&uV(n,e,t[e]);if(cV)for(var e of cV(t))Ple.call(t,e)&&uV(n,e,t[e]);return n};const Ole={top:0,left:0,bottom:0,right:0,height:0,width:0};xle({text:""},Ole);let Rle=0;function Vle(){return++Rle}function qs(n,t={},e={chore:!1,keepInitial:!1}){const i=E=>{if(!E){r.value={};return}for(const A in E)r.value[A]=E[A]},r=Z({});i(t);const s=Z(!1),o=()=>{s.value=!1,l(C)},{addDialog:a,removeDialog:l,removeAll:c,DialogsStore:u}=wU(),{reveal:d,isRevealed:f,onConfirm:h,onReveal:g,onCancel:v,confirm:_,cancel:w}=Sle(),C=Vle();return g(E=>{s.value=!0,E&&i(E),a({id:C,dialog:n,isRevealed:f,confirm:_,cancel:w,props:r.value,close:o,revealed:s})}),gt(f,E=>{E||(e.chore&&i(e.keepInitial?t:null),l(C))}),{close:o,closeAll:()=>{u.forEach(E=>{E.revealed.value=!1}),c()},reveal:d,isRevealed:le(()=>f.value&&s.value),onConfirm:h,onCancel:v}}var yU=Cn({name:"DialogsWrapper",setup(){const{DialogsStore:n}=wU();return()=>n.map(t=>ca(t.dialog,{is:t.dialog,onConfirm:t.confirm,onCancel:t.cancel,key:t.id,...t.props}))}});function Dle(n){n.component("DialogsWrapper",yU)}const Nle=Object.freeze(Object.defineProperty({__proto__:null,DialogsWrapper:yU,createConfirmDialog:qs,install:Dle},Symbol.toStringTag,{value:"Module"})),Lle={class:"cd-popup is-visible",role:"alert"},Mle={class:"cd-popup-container p-3 border-info"},lo={__name:"ConfirmModal",props:{message:{type:String,required:!0}},emits:["confirm","cancel"],setup(n,{emit:t}){const e=t;return(i,r)=>(P(),V("div",Lle,[m("div",Mle,[m("p",null,B(n.message),1),m("button",{class:"btn btn-danger me-3",onClick:r[0]||(r[0]=s=>e("confirm"))},B(i.$t("general.confirm")),1),m("button",{class:"btn btn-secondary",onClick:r[1]||(r[1]=s=>e("cancel"))},B(i.$t("general.cancel")),1)])]))}},$le={class:"table-event"},Ble={scope:"row",class:"pb-3"},Fle={key:0},Ule=["title","disabled"],zle=["title"],Hle=["title"],Wle={key:0,class:"align-middle"},jle={class:"align-middle"},qle={key:1,class:"text-center text-success text-uppercase align-middle"},Gle={key:2,class:"text-center text-danger text-uppercase align-middle"},Kle={key:3,class:"align-middle"},Yle=["title"],Qle=["title","disabled"],Zle={__name:"EventRow",props:{event:{type:Object,required:!0},eventsDetail:{type:Boolean,required:!0},showOrganizer:{type:Boolean,default(){return!1}},eventsShowDelete:{type:Boolean,default(){return!1}},eventsShowActivate:{type:Boolean,default(){return!1}}},emits:["delete","toggleActive"],setup(n,{emit:t}){const e=nn(),i=t,r=n,s=window.location.protocol+"//"+window.location.host,o=le(()=>Ga(r.event.createDatetime)),a=le(()=>Ga(r.event.scheduledDatetime)),l=le(()=>{const v=Math.floor(Date.now()/1e3)-r.event.scheduledDatetime;return parseInt(v/86400)*-1});function c(g,v){const _=qs(lo,{message:Xe("view.event.listing.confirm.deleteQuestion")});_.onConfirm(()=>{var w;if(r.showOrganizer&&v){i("delete",{eventId:g,organizerId:v});return}i("delete",{eventId:g,organizerId:((w=e.user)==null?void 0:w.id)??0})}),_.reveal()}function u(g,v){const _=qs(lo,{message:Xe("view.event.listing.confirm.updateActiveStateQuestion")});_.onConfirm(()=>{i("toggleActive",{eventId:g,status:v})}),_.reveal()}function d(g){const v=document.createElement("textarea");v.value=g,v.style.top="0",v.style.left="0",v.style.position="fixed",document.body.appendChild(v),v.focus(),v.select();try{document.execCommand("copy"),ze(Xe("view.event.listing.textCopiedToClipboard"),{type:"success"})}catch(_){Mt(_)}document.body.removeChild(v)}function f(g){if(!navigator.clipboard){d(g);return}navigator.clipboard.writeText(g).then(function(){ze(Xe("view.event.listing.textCopiedToClipboard"),{type:"success"})},function(v){Mt(v)})}function h(g){return s+"/event/"+g}return(g,v)=>{var w;const _=si("router-link");return P(),V("tr",$le,[m("td",Ble,[m("b",null,B(n.event.title),1),v[9]||(v[9]=fe()),v[10]||(v[10]=m("br",null,null,-1)),m("small",null,[m("u",{class:"btn p-0",onClick:v[0]||(v[0]=C=>f(h(n.event.slug)))},B(n.event.slug),1)]),v[11]||(v[11]=m("br",null,null,-1)),n.event.description?(P(),V("hr",Fle)):ne("",!0),m("small",null,B(n.event.description),1),v[12]||(v[12]=m("br",null,null,-1)),n.eventsShowDelete?(P(),V("button",{key:1,class:"btn btn-danger mx-1 my-2",title:g.$t("view.event.listing.actions.delete"),disabled:n.event.active,onClick:v[1]||(v[1]=C=>c(n.event.id,n.event.organizer.id))},[...v[6]||(v[6]=[m("i",{class:"bi-trash bi--2xl"},null,-1)])],8,Ule)):ne("",!0),n.eventsShowActivate&&!n.event.active?(P(),V("button",{key:2,class:"btn btn-warning mx-1 my-2",title:g.$t("view.event.listing.actions.activate"),onClick:v[2]||(v[2]=C=>u(n.event.id,!0))},[...v[7]||(v[7]=[m("i",{class:"bi-eye bi--2xl"},null,-1)])],8,zle)):ne("",!0),n.eventsShowActivate&&n.event.active?(P(),V("button",{key:3,class:"btn btn-secondary mx-1 my-2",title:g.$t("view.event.listing.actions.deactivate"),onClick:v[3]||(v[3]=C=>u(n.event.id,!1))},[...v[8]||(v[8]=[m("i",{class:"bi-eye-slash bi--2xl"},null,-1)])],8,Hle)):ne("",!0)]),n.showOrganizer?(P(),V("td",Wle,[(w=n.event.organizer)!=null&&w.publicName?(P(),V(Fe,{key:0},[m("b",null,B(n.event.organizer.publicName),1),v[13]||(v[13]=fe()),v[14]||(v[14]=m("br",null,null,-1)),fe(" "+B(n.event.organizer.username),1),v[15]||(v[15]=m("br",null,null,-1)),fe(" "+B(n.event.organizer.email),1),v[16]||(v[16]=m("br",null,null,-1))],64)):(P(),V(Fe,{key:1},[fe(" Event ID: "+B(n.event.id||"Unknown")+" ",1),v[17]||(v[17]=m("br",null,null,-1)),fe(" Organizer ID: "+B(n.event.organizer||"Unknown"),1)],64))])):ne("",!0),m("td",jle,B(o.value),1),m("td",{class:Ze([{"bg-danger":l.value>180&&n.showOrganizer,"text-white":l.value>180&&n.showOrganizer},"align-middle"])},[fe(B(a.value)+" ",1),n.showOrganizer?(P(),V("small",{key:0,class:Ze(["d-block",l.value>180&&n.showOrganizer?"text-white":"text-muted"])},"("+B(l.value)+" Tage)",3)):ne("",!0)],2),n.event.active?(P(),V("td",qle,B(g.$t("view.event.listing.stateActive")),1)):(P(),V("td",Gle,B(g.$t("view.event.listing.stateLocked")),1)),n.eventsDetail?(P(),V("td",Kle,[Ce(_,{to:{name:M(aI),params:{id:n.event.id}},class:"btn btn-primary mx-1 my-2"},{default:$e(()=>[...v[18]||(v[18]=[m("i",{class:"bi-pencil-square bi--2xl"},null,-1)])]),_:1},8,["to"]),m("span",{class:"btn btn-secondary mx-1 my-2",title:g.$t("view.event.listing.actions.inviteLink"),onClick:v[4]||(v[4]=C=>f(h(n.event.slug)))},[...v[19]||(v[19]=[m("i",{class:"bi-link-45deg bi--2xl"},null,-1)])],8,Yle),Ce(_,{to:{name:M(Ul),params:{id:n.event.id}},class:"btn btn-secondary mx-1 my-2",title:g.$t("view.event.listing.actions.newTab")},{default:$e(()=>[...v[20]||(v[20]=[m("i",{class:"bi-eye-fill bi--2xl"},null,-1)])]),_:1},8,["to","title"]),m("button",{class:"btn btn-danger mx-1 my-2",title:g.$t("view.event.listing.actions.delete"),disabled:n.event.active,onClick:v[5]||(v[5]=C=>{var k,E,A;return c((k=n.event)==null?void 0:k.id,(A=(E=n.event)==null?void 0:E.organizer)==null?void 0:A.id)})},[...v[21]||(v[21]=[m("i",{class:"bi-trash bi--2xl"},null,-1)])],8,Qle)])):ne("",!0)])}}},Jle={class:"events-listing-container my-5"},Xle={key:0,class:"mb-3"},ece={class:"hint small"},tce={class:"table table-responsive-md table-bordered table-hover table-sm"},nce={class:"thead-light"},ice={scope:"col"},rce={key:0,scope:"col"},sce={scope:"col"},oce={scope:"col"},ace={scope:"col",class:"text-center"},lce={key:1,scope:"col"},cce={__name:"EventListing",props:{headline:{type:String,required:!1,default:void 0},eventsDetail:{type:Boolean,required:!0},eventsShowDelete:{type:Boolean},eventsShowActivate:{type:Boolean},events:{type:Array,required:!1,default(){return[]}},showOrganizer:{type:Boolean,default(){return!1}}},emits:["delete","toggleActive"],setup(n,{emit:t}){const e=t;function i(s){e("delete",s)}function r(s){e("toggleActive",s)}return(s,o)=>(P(),V("div",Jle,[n.headline?(P(),V("h2",Xle,B(n.headline),1)):ne("",!0),m("p",ece,B(s.$t("view.event.listing.deleteInfo")),1),m("table",tce,[m("thead",nce,[m("tr",null,[m("th",ice,[fe(B(s.$t("view.event.listing.name"))+" ",1),o[0]||(o[0]=m("br",null,null,-1)),m("small",null,[m("b",null,B(s.$t("view.event.listing.slug")),1)]),o[1]||(o[1]=m("br",null,null,-1)),o[2]||(o[2]=m("hr",null,null,-1)),m("small",null,[m("b",null,B(s.$t("view.event.create.labels.description")),1)])]),n.showOrganizer?(P(),V("th",rce,B(s.$t("view.event.listing.organizer")),1)):ne("",!0),m("th",sce,B(s.$t("view.event.listing.created")),1),m("th",oce,B(s.$t("view.event.listing.scheduled")),1),m("th",ace,B(s.$t("view.event.listing.state")),1),n.eventsDetail?(P(),V("th",lce,B(s.$t("view.event.listing.actions.label")),1)):ne("",!0)])]),m("tbody",null,[(P(!0),V(Fe,null,ct(n.events,(a,l)=>(P(),Ge(Zle,{key:l,event:a,"events-detail":n.eventsDetail,"show-organizer":n.showOrganizer,"events-show-delete":n.eventsShowDelete,"events-show-activate":n.eventsShowActivate,onDelete:i,onToggleActive:r},null,8,["event","events-detail","show-organizer","events-show-delete","events-show-activate"]))),128))])])]))}},yy=Yt(cce,[["__scopeId","data-v-3f3747f8"]]),uce=mt`
  query upcomingEvents($organizerId: ID) {
    upcomingEvents(organizerId: $organizerId) {
      id
      createDatetime
      modifiedDatetime
      title
      slug
      description
      styles
      logo
      scheduledDatetime
      lobbyOpen
      active
      async
      allowMagicLink
      publicVoteVisible
      finished
      endDatetime
    }
  }
`,dce=mt`
  query expiredEvents($organizerId: ID!) {
    expiredEvents(organizerId: $organizerId) {
      id
      createDatetime
      modifiedDatetime
      title
      slug
      description
      styles
      logo
      scheduledDatetime
      lobbyOpen
      active
      async
      allowMagicLink
      publicVoteVisible
      finished
      endDatetime
    }
  }
`,_U=mt`
  mutation RemoveEvent($organizerId: ID!, $id: ID!) {
    removeEvent(organizerId: $organizerId, id: $id)
  }
`,fce={class:"events-container"},hce={class:"align-middle"},mce={__name:"OrganizerEvents",setup(n){var l,c;const t=nn(),e=jo([mi,pr,Ir,_o,ko,cl,dc,fc]),i=Z([]),r=Z([]),s=ln(uce,{organizerId:((l=t==null?void 0:t.user)==null?void 0:l.id)??0},{fetchPolicy:"no-cache"});s.onResult(({data:u})=>{i.value=(u==null?void 0:u.upcomingEvents)??[]});const o=ln(dce,{organizerId:((c=t==null?void 0:t.user)==null?void 0:c.id)??0},{fetchPolicy:"no-cache"});o.onResult(({data:u})=>{r.value=(u==null?void 0:u.expiredEvents)??[]});async function a({eventId:u,organizerId:d}){const{mutate:f}=In(_U,{variables:{organizerId:d,id:u}});await f(),t.queryOrganizer(),s.refetch(),o.refetch(),ze(Xe("success.organizer.events.deletedSuccessfully"),{type:"success"})}return(u,d)=>{const f=si("router-link");return P(),Ge(Ki,{"meta-title":u.$t("navigation.views.organizerEvents")},{title:$e(()=>[fe(B(u.$t("navigation.views.organizerEvents")),1)]),header:$e(()=>[Ce(qo,{routes:M(e)},null,8,["routes"])]),content:$e(()=>{var h,g;return[m("div",fce,[Ce(f,{to:{name:M(cU)},class:"btn btn-success btn-lg my-3"},{default:$e(()=>[d[0]||(d[0]=m("i",{class:"bi-plus bi--2xl align-middle"},null,-1)),m("span",hce,B(u.$t("view.event.create.createNew")),1)]),_:1},8,["to"]),((h=i.value)==null?void 0:h.length)>0?(P(),Ge(yy,{key:0,headline:u.$t("view.event.upcoming"),"events-detail":!0,events:i.value,onDelete:a},null,8,["headline","events"])):ne("",!0),((g=r.value)==null?void 0:g.length)>0?(P(),Ge(yy,{key:1,headline:u.$t("view.event.latest"),"events-detail":!0,events:r.value,onDelete:a},null,8,["headline","events"])):ne("",!0)])]}),_:1},8,["meta-title"])}}},gce=mt`
  mutation deleteZoomMeeting($id: ID!) {
    deleteZoomMeeting(id: $id)
  }
`,pce={class:"input-group new-meeting-button-group mb-5",role:"group"},vce={class:"custom-select"},bce=["value"],wce={class:"input-group-text p-0"},yce={class:"align-middle"},_ce={class:"btn-group float-end",role:"group"},kce=["onClick"],Ece={__name:"OrganizerVideoConference",setup(n){const t=[{text:Xe("view.videoConference.title"),value:"title",sortable:!0},{text:"",value:"id"}],e=nn(),i=jo([mi,pr,Ir,_o,ko,cl,dc,fc]),r=le(()=>{var a;return((a=e.getOrganizer)==null?void 0:a.zoomMeetings)??[]}),s=[{id:1,title:"Zoom Meeting"}];async function o(a){const l=qs(lo,{message:Xe("view.videoConference.confirmDelete")});l.onConfirm(async()=>{const{mutate:c}=In(gce,{variables:{id:a}});await c(),e.queryOrganizer(),ze(Xe("success.organizer.videoConference.deletedSuccessfully"),{type:"success"})}),l.reveal()}return(a,l)=>{const c=si("router-link"),u=si("EasyDataTable");return P(),Ge(Ki,{"meta-title":a.$t("navigation.views.organizerVideoConference")},{title:$e(()=>[fe(B(a.$t("navigation.views.organizerVideoConference")),1)]),header:$e(()=>[Ce(qo,{routes:M(i)},null,8,["routes"])]),content:$e(()=>{var d;return[m("div",pce,[m("select",vce,[(P(),V(Fe,null,ct(s,f=>m("option",{key:f.id,value:f.id},B(f.title),9,bce)),64))]),m("div",wce,[Ce(c,{to:{name:M(aU)},class:"btn btn-secondary"},{default:$e(()=>[l[0]||(l[0]=m("i",{class:"bi-plus bi--1xl align-middle"},null,-1)),m("span",yce,B(a.$t("view.videoConference.addNew")),1)]),_:1},8,["to"])])]),((d=r.value)==null?void 0:d.length)>0?(P(),Ge(u,{key:0,headers:t,items:r.value,"table-class-name":"data-table","theme-color":"#007bff"},{"item-id":$e(f=>[m("div",_ce,[Ce(c,{to:{name:M(lU),params:{id:f.id}},class:"btn btn-secondary"},{default:$e(()=>[...l[1]||(l[1]=[m("i",{class:"bi-pencil bi--xl"},null,-1)])]),_:1},8,["to"]),m("button",{type:"button",class:"btn btn-danger",onClick:bt(h=>o(f.id),["prevent"])},[...l[2]||(l[2]=[m("i",{class:"bi-trash bi--xl"},null,-1)])],8,kce)])]),_:1},8,["items"])):(P(),Ge(qr,{key:1,type:"info"},{default:$e(()=>[fe(B(a.$t("view.videoConference.noRecords")),1)]),_:1}))]}),_:1},8,["meta-title"])}}},Cce=Yt(Ece,[["__scopeId","data-v-6a2d15cf"]]),Tce=mt`
  mutation CreateZoomMeeting($input: UpdateZoomMeetingInput!) {
    updateZoomMeeting(input: $input) {
      id
      title
      sdkKey
      sdkSecret
    }
  }
`,kU=mt`
  query zoomMeeting($id: ID!) {
    zoomMeeting(id: $id) {
      id
      title
      sdkKey
      sdkSecret
    }
  }
`,Sce={class:"align-middle"},Ace={class:"mb-3"},Ice={class:"mb-3"},Pce={class:"mb-3"},xce={type:"submit",class:"btn btn-primary"},Oce={__name:"EditVideoConference",setup(n){const t=nn(),e=Li(),r=Ui().params.id,s=Z(!1),o=jo([mi,pr,Ir,_o,ko]),a=Kt({title:"",sdkKey:"",sdkSecret:""}),l=le(()=>({title:{required:Bt},sdkKey:{required:Bt},sdkSecret:{required:Bt}})),c=us(l,a),{onResult:u}=ln(kU,{id:r},{fetchPolicy:"no-cache"});u(({data:f})=>{const{title:h,sdkKey:g,sdkSecret:v}=f.zoomMeeting;a.title=h,a.sdkKey=g,a.sdkSecret=v,s.value=!0});async function d(){if(!await c.value.$validate()){Mt(new Pr);return}const{mutate:h}=In(Tce,{variables:{input:{id:r,title:a.title,sdkKey:a.sdkKey,sdkSecret:a.sdkSecret}}});await h(),t.queryOrganizer(),await e.push({name:Ir}),ze(Xe("success.organizer.videoConference.updatedSuccessfully"),{type:"success"})}return(f,h)=>{const g=si("router-link");return P(),Ge(Ki,{"meta-title":f.$t("navigation.views.organizerVideoConferenceEdit")},{title:$e(()=>[fe(B(f.$t("navigation.views.organizerVideoConferenceEdit"))+" ",1),Ce(g,{to:{name:M(Ir)},class:"btn btn-secondary mb-3 mt-2 float-end d-none d-md-inline-block"},{default:$e(()=>[h[3]||(h[3]=m("i",{class:"bi-arrow-left bi--1xl me-1"},null,-1)),m("span",Sce,B(f.$t("view.videoConference.backToListView")),1)]),_:1},8,["to"])]),header:$e(()=>[Ce(qo,{routes:M(o)},null,8,["routes"])]),content:$e(()=>{var v,_,w,C,k,E;return[s.value?(P(),V("form",{key:0,class:"video-conference-edit",onSubmit:bt(d,["prevent"])},[m("div",Ace,[Ce(yn,{label:f.$t("view.videoConference.formData.title"),errors:(v=M(c).title)==null?void 0:v.$errors,"has-errors":((_=M(c).title)==null?void 0:_.$errors.length)>0,value:a.title,onChange:h[0]||(h[0]=({value:A})=>{a.title=A})},null,8,["label","errors","has-errors","value"])]),m("div",Ice,[Ce(yn,{label:f.$t("view.videoConference.formData.sdkKey"),errors:(w=M(c).sdkKey)==null?void 0:w.$errors,"has-errors":((C=M(c).sdkKey)==null?void 0:C.$errors.length)>0,value:a.sdkKey,onChange:h[1]||(h[1]=({value:A})=>{a.sdkKey=A})},null,8,["label","errors","has-errors","value"])]),m("div",Pce,[Ce(yn,{label:f.$t("view.videoConference.formData.sdkSecret"),errors:(k=M(c).sdkSecret)==null?void 0:k.$errors,"has-errors":((E=M(c).sdkSecret)==null?void 0:E.$errors.length)>0,value:a.sdkSecret,onChange:h[2]||(h[2]=({value:A})=>{a.sdkSecret=A})},null,8,["label","errors","has-errors","value"])]),m("button",xce,B(f.$t("view.videoConference.formData.submitEdit")),1)],32)):ne("",!0)]}),_:1},8,["meta-title"])}}},Rce=Yt(Oce,[["__scopeId","data-v-9dbaadb1"]]),Vce=mt`
  mutation CreateZoomMeeting($input: CreateZoomMeetingInput!) {
    createZoomMeeting(input: $input) {
      id
      title
      sdkKey
      sdkSecret
    }
  }
`,Dce={class:"align-middle"},Nce={class:"mb-3"},Lce={class:"mb-3"},Mce={class:"mb-3"},$ce={type:"submit",class:"btn btn-primary"},Bce={__name:"NewVideoConference",setup(n){const t=nn(),e=Li(),i=jo([mi,pr,Ir,_o,ko]),r=Kt({title:"",sdkKey:"",sdkSecret:""}),s=le(()=>({title:{required:Bt},sdkKey:{required:Bt},sdkSecret:{required:Bt}})),o=us(s,r);async function a(){var u;if(!await o.value.$validate()){Mt(new Pr);return}const{mutate:c}=In(Vce,{variables:{input:{organizerId:(u=t.getOrganizer)==null?void 0:u.id,title:r.title,sdkKey:r.sdkKey,sdkSecret:r.sdkSecret}}});await c(),t.queryOrganizer(),await e.push({name:Ir}),ze(Xe("success.organizer.videoConference.createdSuccessfully"),{type:"success"})}return(l,c)=>{const u=si("router-link");return P(),Ge(Ki,{"meta-title":l.$t("navigation.views.organizerVideoConferenceNew")},{title:$e(()=>[fe(B(l.$t("navigation.views.organizerVideoConferenceNew"))+" ",1),Ce(u,{to:{name:M(Ir)},class:"btn btn-secondary mb-3 mt-2 float-end d-none d-md-inline-block"},{default:$e(()=>[c[3]||(c[3]=m("i",{class:"bi-arrow-left bi--1xl me-1"},null,-1)),m("span",Dce,B(l.$t("view.videoConference.backToListView")),1)]),_:1},8,["to"])]),header:$e(()=>[Ce(qo,{routes:M(i)},null,8,["routes"])]),content:$e(()=>{var d,f,h,g,v,_;return[m("form",{class:"video-conference-new",onSubmit:bt(a,["prevent"])},[m("div",Nce,[Ce(yn,{label:l.$t("view.videoConference.formData.title"),errors:(d=M(o).title)==null?void 0:d.$errors,"has-errors":((f=M(o).title)==null?void 0:f.$errors.length)>0,value:r.title,onChange:c[0]||(c[0]=({value:w})=>{r.title=w})},null,8,["label","errors","has-errors","value"])]),m("div",Lce,[Ce(yn,{label:l.$t("view.videoConference.formData.sdkKey"),errors:(h=M(o).sdkKey)==null?void 0:h.$errors,"has-errors":((g=M(o).sdkKey)==null?void 0:g.$errors.length)>0,value:r.sdkKey,onChange:c[1]||(c[1]=({value:w})=>{r.sdkKey=w})},null,8,["label","errors","has-errors","value"])]),m("div",Mce,[Ce(yn,{label:l.$t("view.videoConference.formData.sdkSecret"),errors:(v=M(o).sdkSecret)==null?void 0:v.$errors,"has-errors":((_=M(o).sdkSecret)==null?void 0:_.$errors.length)>0,value:r.sdkSecret,onChange:c[2]||(c[2]=({value:w})=>{r.sdkSecret=w})},null,8,["label","errors","has-errors","value"])]),m("button",$ce,B(l.$t("view.videoConference.formData.submitNew")),1)],32)]}),_:1},8,["meta-title"])}}},Fce=Yt(Bce,[["__scopeId","data-v-8223c1cf"]]),Uce=mt`
  query eventsByOrganizer($organizerId: ID!) {
    # Finde alle Events, die dem Organizer direkt gehören
    upcomingEvents(organizerId: $organizerId) {
      id
      title
      slug
      description
      scheduledDatetime
      lobbyOpen
      active
      async
      finished
      organizer {
        id
        username
        email
      }
      originalOrganizer {
        id
        username
        email
      }
    }
    expiredEvents(organizerId: $organizerId) {
      id
      title
      slug
      description
      scheduledDatetime
      endDatetime
      lobbyOpen
      active
      async
      finished
      organizer {
        id
        username
        email
      }
      originalOrganizer {
        id
        username
        email
      }
    }
  }
`,dT=mt`
  query allEventsWithOriginalOwner {
    # Hole alle bevorstehenden Events (für Superorganizer)
    allUpcomingEvents {
      id
      title
      slug
      description
      scheduledDatetime
      lobbyOpen
      active
      async
      finished
      organizer {
        id
        username
        email
      }
      originalOrganizer {
        id
        username
        email
      }
    }
    # Hole alle vergangenen Events (für Superorganizer)
    allPastEvents(page: 0, pageSize: 200) {
      id
      title
      slug
      description
      scheduledDatetime
      endDatetime
      lobbyOpen
      active
      async
      finished
      organizer {
        id
        username
        email
      }
      originalOrganizer {
        id
        username
        email
      }
    }
  }
`,zce=mt`
  mutation resetEventOrganizer($eventId: ID!) {
    resetEventOrganizer(eventId: $eventId) {
      id
      title
      organizer {
        id
        username
        email
      }
      originalOrganizer {
        id
        username
        email
      }
    }
  }
`,EU=mt`
  query findOrganizers {
    organizers {
      id
      createDatetime
      username
      email
      password
      publicName
      publicOrganisation
      confirmedEmail
      superAdmin
      verified
      hash
    }
  }
`,Hce=mt`
  mutation transferEvent($eventId: ID!, $newOrganizerId: ID!) {
    transferEvent(eventId: $eventId, newOrganizerId: $newOrganizerId) {
      id
      title
      organizer {
        id
        username
        email
      }
      originalOrganizer {
        id
        username
        email
      }
    }
  }
`;var As="top",uo="bottom",fo="right",Is="left",p0="auto",xm=[As,uo,fo,Is],xd="start",Kh="end",CU="clippingParents",gI="viewport",Bf="popper",TU="reference",fT=xm.reduce(function(n,t){return n.concat([t+"-"+xd,t+"-"+Kh])},[]),pI=[].concat(xm,[p0]).reduce(function(n,t){return n.concat([t,t+"-"+xd,t+"-"+Kh])},[]),SU="beforeRead",AU="read",IU="afterRead",PU="beforeMain",xU="main",OU="afterMain",RU="beforeWrite",VU="write",DU="afterWrite",NU=[SU,AU,IU,PU,xU,OU,RU,VU,DU];function ul(n){return n?(n.nodeName||"").toLowerCase():null}function ho(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var t=n.ownerDocument;return t&&t.defaultView||window}return n}function Od(n){var t=ho(n).Element;return n instanceof t||n instanceof Element}function Lo(n){var t=ho(n).HTMLElement;return n instanceof t||n instanceof HTMLElement}function vI(n){if(typeof ShadowRoot>"u")return!1;var t=ho(n).ShadowRoot;return n instanceof t||n instanceof ShadowRoot}function Wce(n){var t=n.state;Object.keys(t.elements).forEach(function(e){var i=t.styles[e]||{},r=t.attributes[e]||{},s=t.elements[e];!Lo(s)||!ul(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(o){var a=r[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function jce(n){var t=n.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(i){var r=t.elements[i],s=t.attributes[i]||{},o=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:e[i]),a=o.reduce(function(l,c){return l[c]="",l},{});!Lo(r)||!ul(r)||(Object.assign(r.style,a),Object.keys(s).forEach(function(l){r.removeAttribute(l)}))})}}const bI={name:"applyStyles",enabled:!0,phase:"write",fn:Wce,effect:jce,requires:["computeStyles"]};function el(n){return n.split("-")[0]}var bd=Math.max,_y=Math.min,Yh=Math.round;function hT(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function LU(){return!/^((?!chrome|android).)*safari/i.test(hT())}function Qh(n,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var i=n.getBoundingClientRect(),r=1,s=1;t&&Lo(n)&&(r=n.offsetWidth>0&&Yh(i.width)/n.offsetWidth||1,s=n.offsetHeight>0&&Yh(i.height)/n.offsetHeight||1);var o=Od(n)?ho(n):window,a=o.visualViewport,l=!LU()&&e,c=(i.left+(l&&a?a.offsetLeft:0))/r,u=(i.top+(l&&a?a.offsetTop:0))/s,d=i.width/r,f=i.height/s;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c,x:c,y:u}}function wI(n){var t=Qh(n),e=n.offsetWidth,i=n.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:n.offsetLeft,y:n.offsetTop,width:e,height:i}}function MU(n,t){var e=t.getRootNode&&t.getRootNode();if(n.contains(t))return!0;if(e&&vI(e)){var i=t;do{if(i&&n.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function nc(n){return ho(n).getComputedStyle(n)}function qce(n){return["table","td","th"].indexOf(ul(n))>=0}function Iu(n){return((Od(n)?n.ownerDocument:n.document)||window.document).documentElement}function v0(n){return ul(n)==="html"?n:n.assignedSlot||n.parentNode||(vI(n)?n.host:null)||Iu(n)}function dV(n){return!Lo(n)||nc(n).position==="fixed"?null:n.offsetParent}function Gce(n){var t=/firefox/i.test(hT()),e=/Trident/i.test(hT());if(e&&Lo(n)){var i=nc(n);if(i.position==="fixed")return null}var r=v0(n);for(vI(r)&&(r=r.host);Lo(r)&&["html","body"].indexOf(ul(r))<0;){var s=nc(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function Cv(n){for(var t=ho(n),e=dV(n);e&&qce(e)&&nc(e).position==="static";)e=dV(e);return e&&(ul(e)==="html"||ul(e)==="body"&&nc(e).position==="static")?t:e||Gce(n)||t}function yI(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function ip(n,t,e){return bd(n,_y(t,e))}function Kce(n,t,e){var i=ip(n,t,e);return i>e?e:i}function $U(){return{top:0,right:0,bottom:0,left:0}}function BU(n){return Object.assign({},$U(),n)}function FU(n,t){return t.reduce(function(e,i){return e[i]=n,e},{})}var Yce=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,BU(typeof t!="number"?t:FU(t,xm))};function Qce(n){var t,e=n.state,i=n.name,r=n.options,s=e.elements.arrow,o=e.modifiersData.popperOffsets,a=el(e.placement),l=yI(a),c=[Is,fo].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var d=Yce(r.padding,e),f=wI(s),h=l==="y"?As:Is,g=l==="y"?uo:fo,v=e.rects.reference[u]+e.rects.reference[l]-o[l]-e.rects.popper[u],_=o[l]-e.rects.reference[l],w=Cv(s),C=w?l==="y"?w.clientHeight||0:w.clientWidth||0:0,k=v/2-_/2,E=d[h],A=C-f[u]-d[g],x=C/2-f[u]/2+k,p=ip(E,x,A),D=l;e.modifiersData[i]=(t={},t[D]=p,t.centerOffset=p-x,t)}}function Zce(n){var t=n.state,e=n.options,i=e.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||MU(t.elements.popper,r)&&(t.elements.arrow=r))}const UU={name:"arrow",enabled:!0,phase:"main",fn:Qce,effect:Zce,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Zh(n){return n.split("-")[1]}var Jce={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Xce(n,t){var e=n.x,i=n.y,r=t.devicePixelRatio||1;return{x:Yh(e*r)/r||0,y:Yh(i*r)/r||0}}function fV(n){var t,e=n.popper,i=n.popperRect,r=n.placement,s=n.variation,o=n.offsets,a=n.position,l=n.gpuAcceleration,c=n.adaptive,u=n.roundOffsets,d=n.isFixed,f=o.x,h=f===void 0?0:f,g=o.y,v=g===void 0?0:g,_=typeof u=="function"?u({x:h,y:v}):{x:h,y:v};h=_.x,v=_.y;var w=o.hasOwnProperty("x"),C=o.hasOwnProperty("y"),k=Is,E=As,A=window;if(c){var x=Cv(e),p="clientHeight",D="clientWidth";if(x===ho(e)&&(x=Iu(e),nc(x).position!=="static"&&a==="absolute"&&(p="scrollHeight",D="scrollWidth")),x=x,r===As||(r===Is||r===fo)&&s===Kh){E=uo;var R=d&&x===A&&A.visualViewport?A.visualViewport.height:x[p];v-=R-i.height,v*=l?1:-1}if(r===Is||(r===As||r===uo)&&s===Kh){k=fo;var S=d&&x===A&&A.visualViewport?A.visualViewport.width:x[D];h-=S-i.width,h*=l?1:-1}}var I=Object.assign({position:a},c&&Jce),F=u===!0?Xce({x:h,y:v},ho(e)):{x:h,y:v};if(h=F.x,v=F.y,l){var H;return Object.assign({},I,(H={},H[E]=C?"0":"",H[k]=w?"0":"",H.transform=(A.devicePixelRatio||1)<=1?"translate("+h+"px, "+v+"px)":"translate3d("+h+"px, "+v+"px, 0)",H))}return Object.assign({},I,(t={},t[E]=C?v+"px":"",t[k]=w?h+"px":"",t.transform="",t))}function eue(n){var t=n.state,e=n.options,i=e.gpuAcceleration,r=i===void 0?!0:i,s=e.adaptive,o=s===void 0?!0:s,a=e.roundOffsets,l=a===void 0?!0:a,c={placement:el(t.placement),variation:Zh(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,fV(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,fV(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const _I={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:eue,data:{}};var vb={passive:!0};function tue(n){var t=n.state,e=n.instance,i=n.options,r=i.scroll,s=r===void 0?!0:r,o=i.resize,a=o===void 0?!0:o,l=ho(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",e.update,vb)}),a&&l.addEventListener("resize",e.update,vb),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",e.update,vb)}),a&&l.removeEventListener("resize",e.update,vb)}}const kI={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:tue,data:{}};var nue={left:"right",right:"left",bottom:"top",top:"bottom"};function bw(n){return n.replace(/left|right|bottom|top/g,function(t){return nue[t]})}var iue={start:"end",end:"start"};function hV(n){return n.replace(/start|end/g,function(t){return iue[t]})}function EI(n){var t=ho(n),e=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:e,scrollTop:i}}function CI(n){return Qh(Iu(n)).left+EI(n).scrollLeft}function rue(n,t){var e=ho(n),i=Iu(n),r=e.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;var c=LU();(c||!c&&t==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a+CI(n),y:l}}function sue(n){var t,e=Iu(n),i=EI(n),r=(t=n.ownerDocument)==null?void 0:t.body,s=bd(e.scrollWidth,e.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=bd(e.scrollHeight,e.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+CI(n),l=-i.scrollTop;return nc(r||e).direction==="rtl"&&(a+=bd(e.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function TI(n){var t=nc(n),e=t.overflow,i=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+r+i)}function zU(n){return["html","body","#document"].indexOf(ul(n))>=0?n.ownerDocument.body:Lo(n)&&TI(n)?n:zU(v0(n))}function rp(n,t){var e;t===void 0&&(t=[]);var i=zU(n),r=i===((e=n.ownerDocument)==null?void 0:e.body),s=ho(i),o=r?[s].concat(s.visualViewport||[],TI(i)?i:[]):i,a=t.concat(o);return r?a:a.concat(rp(v0(o)))}function mT(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function oue(n,t){var e=Qh(n,!1,t==="fixed");return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}function mV(n,t,e){return t===gI?mT(rue(n,e)):Od(t)?oue(t,e):mT(sue(Iu(n)))}function aue(n){var t=rp(v0(n)),e=["absolute","fixed"].indexOf(nc(n).position)>=0,i=e&&Lo(n)?Cv(n):n;return Od(i)?t.filter(function(r){return Od(r)&&MU(r,i)&&ul(r)!=="body"}):[]}function lue(n,t,e,i){var r=t==="clippingParents"?aue(n):[].concat(t),s=[].concat(r,[e]),o=s[0],a=s.reduce(function(l,c){var u=mV(n,c,i);return l.top=bd(u.top,l.top),l.right=_y(u.right,l.right),l.bottom=_y(u.bottom,l.bottom),l.left=bd(u.left,l.left),l},mV(n,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function HU(n){var t=n.reference,e=n.element,i=n.placement,r=i?el(i):null,s=i?Zh(i):null,o=t.x+t.width/2-e.width/2,a=t.y+t.height/2-e.height/2,l;switch(r){case As:l={x:o,y:t.y-e.height};break;case uo:l={x:o,y:t.y+t.height};break;case fo:l={x:t.x+t.width,y:a};break;case Is:l={x:t.x-e.width,y:a};break;default:l={x:t.x,y:t.y}}var c=r?yI(r):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case xd:l[c]=l[c]-(t[u]/2-e[u]/2);break;case Kh:l[c]=l[c]+(t[u]/2-e[u]/2);break}}return l}function Jh(n,t){t===void 0&&(t={});var e=t,i=e.placement,r=i===void 0?n.placement:i,s=e.strategy,o=s===void 0?n.strategy:s,a=e.boundary,l=a===void 0?CU:a,c=e.rootBoundary,u=c===void 0?gI:c,d=e.elementContext,f=d===void 0?Bf:d,h=e.altBoundary,g=h===void 0?!1:h,v=e.padding,_=v===void 0?0:v,w=BU(typeof _!="number"?_:FU(_,xm)),C=f===Bf?TU:Bf,k=n.rects.popper,E=n.elements[g?C:f],A=lue(Od(E)?E:E.contextElement||Iu(n.elements.popper),l,u,o),x=Qh(n.elements.reference),p=HU({reference:x,element:k,placement:r}),D=mT(Object.assign({},k,p)),R=f===Bf?D:x,S={top:A.top-R.top+w.top,bottom:R.bottom-A.bottom+w.bottom,left:A.left-R.left+w.left,right:R.right-A.right+w.right},I=n.modifiersData.offset;if(f===Bf&&I){var F=I[r];Object.keys(S).forEach(function(H){var q=[fo,uo].indexOf(H)>=0?1:-1,N=[As,uo].indexOf(H)>=0?"y":"x";S[H]+=F[N]*q})}return S}function cue(n,t){t===void 0&&(t={});var e=t,i=e.placement,r=e.boundary,s=e.rootBoundary,o=e.padding,a=e.flipVariations,l=e.allowedAutoPlacements,c=l===void 0?pI:l,u=Zh(i),d=u?a?fT:fT.filter(function(g){return Zh(g)===u}):xm,f=d.filter(function(g){return c.indexOf(g)>=0});f.length===0&&(f=d);var h=f.reduce(function(g,v){return g[v]=Jh(n,{placement:v,boundary:r,rootBoundary:s,padding:o})[el(v)],g},{});return Object.keys(h).sort(function(g,v){return h[g]-h[v]})}function uue(n){if(el(n)===p0)return[];var t=bw(n);return[hV(n),t,hV(t)]}function due(n){var t=n.state,e=n.options,i=n.name;if(!t.modifiersData[i]._skip){for(var r=e.mainAxis,s=r===void 0?!0:r,o=e.altAxis,a=o===void 0?!0:o,l=e.fallbackPlacements,c=e.padding,u=e.boundary,d=e.rootBoundary,f=e.altBoundary,h=e.flipVariations,g=h===void 0?!0:h,v=e.allowedAutoPlacements,_=t.options.placement,w=el(_),C=w===_,k=l||(C||!g?[bw(_)]:uue(_)),E=[_].concat(k).reduce(function(ve,ce){return ve.concat(el(ce)===p0?cue(t,{placement:ce,boundary:u,rootBoundary:d,padding:c,flipVariations:g,allowedAutoPlacements:v}):ce)},[]),A=t.rects.reference,x=t.rects.popper,p=new Map,D=!0,R=E[0],S=0;S<E.length;S++){var I=E[S],F=el(I),H=Zh(I)===xd,q=[As,uo].indexOf(F)>=0,N=q?"width":"height",$=Jh(t,{placement:I,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),U=q?H?fo:Is:H?uo:As;A[N]>x[N]&&(U=bw(U));var re=bw(U),K=[];if(s&&K.push($[F]<=0),a&&K.push($[U]<=0,$[re]<=0),K.every(function(ve){return ve})){R=I,D=!1;break}p.set(I,K)}if(D)for(var z=g?3:1,ge=function(ce){var J=E.find(function(ae){var xe=p.get(ae);if(xe)return xe.slice(0,ce).every(function(he){return he})});if(J)return R=J,"break"},Q=z;Q>0;Q--){var ue=ge(Q);if(ue==="break")break}t.placement!==R&&(t.modifiersData[i]._skip=!0,t.placement=R,t.reset=!0)}}const WU={name:"flip",enabled:!0,phase:"main",fn:due,requiresIfExists:["offset"],data:{_skip:!1}};function gV(n,t,e){return e===void 0&&(e={x:0,y:0}),{top:n.top-t.height-e.y,right:n.right-t.width+e.x,bottom:n.bottom-t.height+e.y,left:n.left-t.width-e.x}}function pV(n){return[As,fo,uo,Is].some(function(t){return n[t]>=0})}function fue(n){var t=n.state,e=n.name,i=t.rects.reference,r=t.rects.popper,s=t.modifiersData.preventOverflow,o=Jh(t,{elementContext:"reference"}),a=Jh(t,{altBoundary:!0}),l=gV(o,i),c=gV(a,r,s),u=pV(l),d=pV(c);t.modifiersData[e]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const jU={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:fue};function hue(n,t,e){var i=el(n),r=[Is,As].indexOf(i)>=0?-1:1,s=typeof e=="function"?e(Object.assign({},t,{placement:n})):e,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[Is,fo].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function mue(n){var t=n.state,e=n.options,i=n.name,r=e.offset,s=r===void 0?[0,0]:r,o=pI.reduce(function(u,d){return u[d]=hue(d,t.rects,s),u},{}),a=o[t.placement],l=a.x,c=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[i]=o}const qU={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:mue};function gue(n){var t=n.state,e=n.name;t.modifiersData[e]=HU({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const SI={name:"popperOffsets",enabled:!0,phase:"read",fn:gue,data:{}};function pue(n){return n==="x"?"y":"x"}function vue(n){var t=n.state,e=n.options,i=n.name,r=e.mainAxis,s=r===void 0?!0:r,o=e.altAxis,a=o===void 0?!1:o,l=e.boundary,c=e.rootBoundary,u=e.altBoundary,d=e.padding,f=e.tether,h=f===void 0?!0:f,g=e.tetherOffset,v=g===void 0?0:g,_=Jh(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),w=el(t.placement),C=Zh(t.placement),k=!C,E=yI(w),A=pue(E),x=t.modifiersData.popperOffsets,p=t.rects.reference,D=t.rects.popper,R=typeof v=="function"?v(Object.assign({},t.rects,{placement:t.placement})):v,S=typeof R=="number"?{mainAxis:R,altAxis:R}:Object.assign({mainAxis:0,altAxis:0},R),I=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,F={x:0,y:0};if(x){if(s){var H,q=E==="y"?As:Is,N=E==="y"?uo:fo,$=E==="y"?"height":"width",U=x[E],re=U+_[q],K=U-_[N],z=h?-D[$]/2:0,ge=C===xd?p[$]:D[$],Q=C===xd?-D[$]:-p[$],ue=t.elements.arrow,ve=h&&ue?wI(ue):{width:0,height:0},ce=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:$U(),J=ce[q],ae=ce[N],xe=ip(0,p[$],ve[$]),he=k?p[$]/2-z-xe-J-S.mainAxis:ge-xe-J-S.mainAxis,Ae=k?-p[$]/2+z+xe+ae+S.mainAxis:Q+xe+ae+S.mainAxis,We=t.elements.arrow&&Cv(t.elements.arrow),Ee=We?E==="y"?We.clientTop||0:We.clientLeft||0:0,G=(H=I==null?void 0:I[E])!=null?H:0,Y=U+he-G-Ee,oe=U+Ae-G,Ue=ip(h?_y(re,Y):re,U,h?bd(K,oe):K);x[E]=Ue,F[E]=Ue-U}if(a){var Oe,Le=E==="x"?As:Is,Ye=E==="x"?uo:fo,te=x[A],se=A==="y"?"height":"width",pe=te+_[Le],Re=te-_[Ye],Me=[As,Is].indexOf(w)!==-1,Ie=(Oe=I==null?void 0:I[A])!=null?Oe:0,Se=Me?pe:te-p[se]-D[se]-Ie+S.altAxis,ye=Me?te+p[se]+D[se]-Ie-S.altAxis:Re,ie=h&&Me?Kce(Se,te,ye):ip(h?Se:pe,te,h?ye:Re);x[A]=ie,F[A]=ie-te}t.modifiersData[i]=F}}const GU={name:"preventOverflow",enabled:!0,phase:"main",fn:vue,requiresIfExists:["offset"]};function bue(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function wue(n){return n===ho(n)||!Lo(n)?EI(n):bue(n)}function yue(n){var t=n.getBoundingClientRect(),e=Yh(t.width)/n.offsetWidth||1,i=Yh(t.height)/n.offsetHeight||1;return e!==1||i!==1}function _ue(n,t,e){e===void 0&&(e=!1);var i=Lo(t),r=Lo(t)&&yue(t),s=Iu(t),o=Qh(n,r,e),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!e)&&((ul(t)!=="body"||TI(s))&&(a=wue(t)),Lo(t)?(l=Qh(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=CI(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function kue(n){var t=new Map,e=new Set,i=[];n.forEach(function(s){t.set(s.name,s)});function r(s){e.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!e.has(a)){var l=t.get(a);l&&r(l)}}),i.push(s)}return n.forEach(function(s){e.has(s.name)||r(s)}),i}function Eue(n){var t=kue(n);return NU.reduce(function(e,i){return e.concat(t.filter(function(r){return r.phase===i}))},[])}function Cue(n){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(n())})})),t}}function Tue(n){var t=n.reduce(function(e,i){var r=e[i.name];return e[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,e},{});return Object.keys(t).map(function(e){return t[e]})}var vV={placement:"bottom",modifiers:[],strategy:"absolute"};function bV(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function b0(n){n===void 0&&(n={});var t=n,e=t.defaultModifiers,i=e===void 0?[]:e,r=t.defaultOptions,s=r===void 0?vV:r;return function(a,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},vV,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,h={state:u,setOptions:function(w){var C=typeof w=="function"?w(u.options):w;v(),u.options=Object.assign({},s,u.options,C),u.scrollParents={reference:Od(a)?rp(a):a.contextElement?rp(a.contextElement):[],popper:rp(l)};var k=Eue(Tue([].concat(i,u.options.modifiers)));return u.orderedModifiers=k.filter(function(E){return E.enabled}),g(),h.update()},forceUpdate:function(){if(!f){var w=u.elements,C=w.reference,k=w.popper;if(bV(C,k)){u.rects={reference:_ue(C,Cv(k),u.options.strategy==="fixed"),popper:wI(k)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(S){return u.modifiersData[S.name]=Object.assign({},S.data)});for(var E=0;E<u.orderedModifiers.length;E++){if(u.reset===!0){u.reset=!1,E=-1;continue}var A=u.orderedModifiers[E],x=A.fn,p=A.options,D=p===void 0?{}:p,R=A.name;typeof x=="function"&&(u=x({state:u,options:D,name:R,instance:h})||u)}}}},update:Cue(function(){return new Promise(function(_){h.forceUpdate(),_(u)})}),destroy:function(){v(),f=!0}};if(!bV(a,l))return h;h.setOptions(c).then(function(_){!f&&c.onFirstUpdate&&c.onFirstUpdate(_)});function g(){u.orderedModifiers.forEach(function(_){var w=_.name,C=_.options,k=C===void 0?{}:C,E=_.effect;if(typeof E=="function"){var A=E({state:u,name:w,instance:h,options:k}),x=function(){};d.push(A||x)}})}function v(){d.forEach(function(_){return _()}),d=[]}return h}}var Sue=b0(),Aue=[kI,SI,_I,bI],Iue=b0({defaultModifiers:Aue}),Pue=[kI,SI,_I,bI,qU,WU,GU,UU,jU],AI=b0({defaultModifiers:Pue});const KU=Object.freeze(Object.defineProperty({__proto__:null,afterMain:OU,afterRead:IU,afterWrite:DU,applyStyles:bI,arrow:UU,auto:p0,basePlacements:xm,beforeMain:PU,beforeRead:SU,beforeWrite:RU,bottom:uo,clippingParents:CU,computeStyles:_I,createPopper:AI,createPopperBase:Sue,createPopperLite:Iue,detectOverflow:Jh,end:Kh,eventListeners:kI,flip:WU,hide:jU,left:Is,main:xU,modifierPhases:NU,offset:qU,placements:pI,popper:Bf,popperGenerator:b0,popperOffsets:SI,preventOverflow:GU,read:AU,reference:TU,right:fo,start:xd,top:As,variationPlacements:fT,viewport:gI,write:VU},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.8 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Tc=new Map,bk={set(n,t,e){Tc.has(n)||Tc.set(n,new Map);const i=Tc.get(n);if(!i.has(t)&&i.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`);return}i.set(t,e)},get(n,t){return Tc.has(n)&&Tc.get(n).get(t)||null},remove(n,t){if(!Tc.has(n))return;const e=Tc.get(n);e.delete(t),e.size===0&&Tc.delete(n)}},xue=1e6,Oue=1e3,gT="transitionend",YU=n=>(n&&window.CSS&&window.CSS.escape&&(n=n.replace(/#([^\s"#']+)/g,(t,e)=>`#${CSS.escape(e)}`)),n),Rue=n=>n==null?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase(),Vue=n=>{do n+=Math.floor(Math.random()*xue);while(document.getElementById(n));return n},Due=n=>{if(!n)return 0;let{transitionDuration:t,transitionDelay:e}=window.getComputedStyle(n);const i=Number.parseFloat(t),r=Number.parseFloat(e);return!i&&!r?0:(t=t.split(",")[0],e=e.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(e))*Oue)},QU=n=>{n.dispatchEvent(new Event(gT))},ql=n=>!n||typeof n!="object"?!1:(typeof n.jquery<"u"&&(n=n[0]),typeof n.nodeType<"u"),hu=n=>ql(n)?n.jquery?n[0]:n:typeof n=="string"&&n.length>0?document.querySelector(YU(n)):null,Om=n=>{if(!ql(n)||n.getClientRects().length===0)return!1;const t=getComputedStyle(n).getPropertyValue("visibility")==="visible",e=n.closest("details:not([open])");if(!e)return t;if(e!==n){const i=n.closest("summary");if(i&&i.parentNode!==e||i===null)return!1}return t},mu=n=>!n||n.nodeType!==Node.ELEMENT_NODE||n.classList.contains("disabled")?!0:typeof n.disabled<"u"?n.disabled:n.hasAttribute("disabled")&&n.getAttribute("disabled")!=="false",ZU=n=>{if(!document.documentElement.attachShadow)return null;if(typeof n.getRootNode=="function"){const t=n.getRootNode();return t instanceof ShadowRoot?t:null}return n instanceof ShadowRoot?n:n.parentNode?ZU(n.parentNode):null},ky=()=>{},Tv=n=>{n.offsetHeight},JU=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,wk=[],Nue=n=>{document.readyState==="loading"?(wk.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of wk)t()}),wk.push(n)):n()},Bo=()=>document.documentElement.dir==="rtl",Go=n=>{Nue(()=>{const t=JU();if(t){const e=n.NAME,i=t.fn[e];t.fn[e]=n.jQueryInterface,t.fn[e].Constructor=n,t.fn[e].noConflict=()=>(t.fn[e]=i,n.jQueryInterface)}})},Ws=(n,t=[],e=n)=>typeof n=="function"?n.call(...t):e,XU=(n,t,e=!0)=>{if(!e){Ws(n);return}const r=Due(t)+5;let s=!1;const o=({target:a})=>{a===t&&(s=!0,t.removeEventListener(gT,o),Ws(n))};t.addEventListener(gT,o),setTimeout(()=>{s||QU(t)},r)},II=(n,t,e,i)=>{const r=n.length;let s=n.indexOf(t);return s===-1?!e&&i?n[r-1]:n[0]:(s+=e?1:-1,i&&(s=(s+r)%r),n[Math.max(0,Math.min(s,r-1))])},Lue=/[^.]*(?=\..*)\.|.*/,Mue=/\..*/,$ue=/::\d+$/,yk={};let wV=1;const e6={mouseenter:"mouseover",mouseleave:"mouseout"},Bue=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function t6(n,t){return t&&`${t}::${wV++}`||n.uidEvent||wV++}function n6(n){const t=t6(n);return n.uidEvent=t,yk[t]=yk[t]||{},yk[t]}function Fue(n,t){return function e(i){return PI(i,{delegateTarget:n}),e.oneOff&&st.off(n,i.type,t),t.apply(n,[i])}}function Uue(n,t,e){return function i(r){const s=n.querySelectorAll(t);for(let{target:o}=r;o&&o!==this;o=o.parentNode)for(const a of s)if(a===o)return PI(r,{delegateTarget:o}),i.oneOff&&st.off(n,r.type,t,e),e.apply(o,[r])}}function i6(n,t,e=null){return Object.values(n).find(i=>i.callable===t&&i.delegationSelector===e)}function r6(n,t,e){const i=typeof t=="string",r=i?e:t||e;let s=s6(n);return Bue.has(s)||(s=n),[i,r,s]}function yV(n,t,e,i,r){if(typeof t!="string"||!n)return;let[s,o,a]=r6(t,e,i);t in e6&&(o=(g=>function(v){if(!v.relatedTarget||v.relatedTarget!==v.delegateTarget&&!v.delegateTarget.contains(v.relatedTarget))return g.call(this,v)})(o));const l=n6(n),c=l[a]||(l[a]={}),u=i6(c,o,s?e:null);if(u){u.oneOff=u.oneOff&&r;return}const d=t6(o,t.replace(Lue,"")),f=s?Uue(n,e,o):Fue(n,o);f.delegationSelector=s?e:null,f.callable=o,f.oneOff=r,f.uidEvent=d,c[d]=f,n.addEventListener(a,f,s)}function pT(n,t,e,i,r){const s=i6(t[e],i,r);s&&(n.removeEventListener(e,s,!!r),delete t[e][s.uidEvent])}function zue(n,t,e,i){const r=t[e]||{};for(const[s,o]of Object.entries(r))s.includes(i)&&pT(n,t,e,o.callable,o.delegationSelector)}function s6(n){return n=n.replace(Mue,""),e6[n]||n}const st={on(n,t,e,i){yV(n,t,e,i,!1)},one(n,t,e,i){yV(n,t,e,i,!0)},off(n,t,e,i){if(typeof t!="string"||!n)return;const[r,s,o]=r6(t,e,i),a=o!==t,l=n6(n),c=l[o]||{},u=t.startsWith(".");if(typeof s<"u"){if(!Object.keys(c).length)return;pT(n,l,o,s,r?e:null);return}if(u)for(const d of Object.keys(l))zue(n,l,d,t.slice(1));for(const[d,f]of Object.entries(c)){const h=d.replace($ue,"");(!a||t.includes(h))&&pT(n,l,o,f.callable,f.delegationSelector)}},trigger(n,t,e){if(typeof t!="string"||!n)return null;const i=JU(),r=s6(t),s=t!==r;let o=null,a=!0,l=!0,c=!1;s&&i&&(o=i.Event(t,e),i(n).trigger(o),a=!o.isPropagationStopped(),l=!o.isImmediatePropagationStopped(),c=o.isDefaultPrevented());const u=PI(new Event(t,{bubbles:a,cancelable:!0}),e);return c&&u.preventDefault(),l&&n.dispatchEvent(u),u.defaultPrevented&&o&&o.preventDefault(),u}};function PI(n,t={}){for(const[e,i]of Object.entries(t))try{n[e]=i}catch{Object.defineProperty(n,e,{configurable:!0,get(){return i}})}return n}function _V(n){if(n==="true")return!0;if(n==="false")return!1;if(n===Number(n).toString())return Number(n);if(n===""||n==="null")return null;if(typeof n!="string")return n;try{return JSON.parse(decodeURIComponent(n))}catch{return n}}function _k(n){return n.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const Gl={setDataAttribute(n,t,e){n.setAttribute(`data-bs-${_k(t)}`,e)},removeDataAttribute(n,t){n.removeAttribute(`data-bs-${_k(t)}`)},getDataAttributes(n){if(!n)return{};const t={},e=Object.keys(n.dataset).filter(i=>i.startsWith("bs")&&!i.startsWith("bsConfig"));for(const i of e){let r=i.replace(/^bs/,"");r=r.charAt(0).toLowerCase()+r.slice(1),t[r]=_V(n.dataset[i])}return t},getDataAttribute(n,t){return _V(n.getAttribute(`data-bs-${_k(t)}`))}};let Sv=class{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const i=ql(e)?Gl.getDataAttribute(e,"config"):{};return{...this.constructor.Default,...typeof i=="object"?i:{},...ql(e)?Gl.getDataAttributes(e):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const[i,r]of Object.entries(e)){const s=t[i],o=ql(s)?"element":Rue(s);if(!new RegExp(r).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${o}" but expected type "${r}".`)}}};const Hue="5.3.8";class Sa extends Sv{constructor(t,e){super(),t=hu(t),t&&(this._element=t,this._config=this._getConfig(e),bk.set(this._element,this.constructor.DATA_KEY,this))}dispose(){bk.remove(this._element,this.constructor.DATA_KEY),st.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,i=!0){XU(t,e,i)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return bk.get(hu(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,typeof e=="object"?e:null)}static get VERSION(){return Hue}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const kk=n=>{let t=n.getAttribute("data-bs-target");if(!t||t==="#"){let e=n.getAttribute("href");if(!e||!e.includes("#")&&!e.startsWith("."))return null;e.includes("#")&&!e.startsWith("#")&&(e=`#${e.split("#")[1]}`),t=e&&e!=="#"?e.trim():null}return t?t.split(",").map(e=>YU(e)).join(","):null},Ht={find(n,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,n))},findOne(n,t=document.documentElement){return Element.prototype.querySelector.call(t,n)},children(n,t){return[].concat(...n.children).filter(e=>e.matches(t))},parents(n,t){const e=[];let i=n.parentNode.closest(t);for(;i;)e.push(i),i=i.parentNode.closest(t);return e},prev(n,t){let e=n.previousElementSibling;for(;e;){if(e.matches(t))return[e];e=e.previousElementSibling}return[]},next(n,t){let e=n.nextElementSibling;for(;e;){if(e.matches(t))return[e];e=e.nextElementSibling}return[]},focusableChildren(n){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(",");return this.find(t,n).filter(e=>!mu(e)&&Om(e))},getSelectorFromElement(n){const t=kk(n);return t&&Ht.findOne(t)?t:null},getElementFromSelector(n){const t=kk(n);return t?Ht.findOne(t):null},getMultipleElementsFromSelector(n){const t=kk(n);return t?Ht.find(t):[]}},w0=(n,t="hide")=>{const e=`click.dismiss${n.EVENT_KEY}`,i=n.NAME;st.on(document,e,`[data-bs-dismiss="${i}"]`,function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),mu(this))return;const s=Ht.getElementFromSelector(this)||this.closest(`.${i}`);n.getOrCreateInstance(s)[t]()})},Wue="alert",jue="bs.alert",o6=`.${jue}`,que=`close${o6}`,Gue=`closed${o6}`,Kue="fade",Yue="show";class y0 extends Sa{static get NAME(){return Wue}close(){if(st.trigger(this._element,que).defaultPrevented)return;this._element.classList.remove(Yue);const e=this._element.classList.contains(Kue);this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),st.trigger(this._element,Gue),this.dispose()}static jQueryInterface(t){return this.each(function(){const e=y0.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}w0(y0,"close");Go(y0);const Que="button",Zue="bs.button",Jue=`.${Zue}`,Xue=".data-api",ede="active",kV='[data-bs-toggle="button"]',tde=`click${Jue}${Xue}`;class _0 extends Sa{static get NAME(){return Que}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(ede))}static jQueryInterface(t){return this.each(function(){const e=_0.getOrCreateInstance(this);t==="toggle"&&e[t]()})}}st.on(document,tde,kV,n=>{n.preventDefault();const t=n.target.closest(kV);_0.getOrCreateInstance(t).toggle()});Go(_0);const nde="swipe",Rm=".bs.swipe",ide=`touchstart${Rm}`,rde=`touchmove${Rm}`,sde=`touchend${Rm}`,ode=`pointerdown${Rm}`,ade=`pointerup${Rm}`,lde="touch",cde="pen",ude="pointer-event",dde=40,fde={endCallback:null,leftCallback:null,rightCallback:null},hde={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Ey extends Sv{constructor(t,e){super(),this._element=t,!(!t||!Ey.isSupported())&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return fde}static get DefaultType(){return hde}static get NAME(){return nde}dispose(){st.off(this._element,Rm)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),Ws(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=dde)return;const e=t/this._deltaX;this._deltaX=0,e&&Ws(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(st.on(this._element,ode,t=>this._start(t)),st.on(this._element,ade,t=>this._end(t)),this._element.classList.add(ude)):(st.on(this._element,ide,t=>this._start(t)),st.on(this._element,rde,t=>this._move(t)),st.on(this._element,sde,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===cde||t.pointerType===lde)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const mde="carousel",gde="bs.carousel",Pu=`.${gde}`,a6=".data-api",pde="ArrowLeft",vde="ArrowRight",bde=500,ag="next",vf="prev",Ff="left",ww="right",wde=`slide${Pu}`,Ek=`slid${Pu}`,yde=`keydown${Pu}`,_de=`mouseenter${Pu}`,kde=`mouseleave${Pu}`,Ede=`dragstart${Pu}`,Cde=`load${Pu}${a6}`,Tde=`click${Pu}${a6}`,l6="carousel",bb="active",Sde="slide",Ade="carousel-item-end",Ide="carousel-item-start",Pde="carousel-item-next",xde="carousel-item-prev",c6=".active",u6=".carousel-item",Ode=c6+u6,Rde=".carousel-item img",Vde=".carousel-indicators",Dde="[data-bs-slide], [data-bs-slide-to]",Nde='[data-bs-ride="carousel"]',Lde={[pde]:ww,[vde]:Ff},Mde={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},$de={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Av extends Sa{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Ht.findOne(Vde,this._element),this._addEventListeners(),this._config.ride===l6&&this.cycle()}static get Default(){return Mde}static get DefaultType(){return $de}static get NAME(){return mde}next(){this._slide(ag)}nextWhenVisible(){!document.hidden&&Om(this._element)&&this.next()}prev(){this._slide(vf)}pause(){this._isSliding&&QU(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){st.one(this._element,Ek,()=>this.cycle());return}this.cycle()}}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding){st.one(this._element,Ek,()=>this.to(t));return}const i=this._getItemIndex(this._getActive());if(i===t)return;const r=t>i?ag:vf;this._slide(r,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&st.on(this._element,yde,t=>this._keydown(t)),this._config.pause==="hover"&&(st.on(this._element,_de,()=>this.pause()),st.on(this._element,kde,()=>this._maybeEnableCycle())),this._config.touch&&Ey.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const i of Ht.find(Rde,this._element))st.on(i,Ede,r=>r.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder(Ff)),rightCallback:()=>this._slide(this._directionToOrder(ww)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),bde+this._config.interval))}};this._swipeHelper=new Ey(this._element,e)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=Lde[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=Ht.findOne(c6,this._indicatorsElement);e.classList.remove(bb),e.removeAttribute("aria-current");const i=Ht.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);i&&(i.classList.add(bb),i.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const i=this._getActive(),r=t===ag,s=e||II(this._getItems(),i,r,this._config.wrap);if(s===i)return;const o=this._getItemIndex(s),a=h=>st.trigger(this._element,h,{relatedTarget:s,direction:this._orderToDirection(t),from:this._getItemIndex(i),to:o});if(a(wde).defaultPrevented||!i||!s)return;const c=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=s;const u=r?Ide:Ade,d=r?Pde:xde;s.classList.add(d),Tv(s),i.classList.add(u),s.classList.add(u);const f=()=>{s.classList.remove(u,d),s.classList.add(bb),i.classList.remove(bb,d,u),this._isSliding=!1,a(Ek)};this._queueCallback(f,i,this._isAnimated()),c&&this.cycle()}_isAnimated(){return this._element.classList.contains(Sde)}_getActive(){return Ht.findOne(Ode,this._element)}_getItems(){return Ht.find(u6,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return Bo()?t===Ff?vf:ag:t===Ff?ag:vf}_orderToDirection(t){return Bo()?t===vf?Ff:ww:t===vf?ww:Ff}static jQueryInterface(t){return this.each(function(){const e=Av.getOrCreateInstance(this,t);if(typeof t=="number"){e.to(t);return}if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}st.on(document,Tde,Dde,function(n){const t=Ht.getElementFromSelector(this);if(!t||!t.classList.contains(l6))return;n.preventDefault();const e=Av.getOrCreateInstance(t),i=this.getAttribute("data-bs-slide-to");if(i){e.to(i),e._maybeEnableCycle();return}if(Gl.getDataAttribute(this,"slide")==="next"){e.next(),e._maybeEnableCycle();return}e.prev(),e._maybeEnableCycle()});st.on(window,Cde,()=>{const n=Ht.find(Nde);for(const t of n)Av.getOrCreateInstance(t)});Go(Av);const Bde="collapse",Fde="bs.collapse",Iv=`.${Fde}`,Ude=".data-api",zde=`show${Iv}`,Hde=`shown${Iv}`,Wde=`hide${Iv}`,jde=`hidden${Iv}`,qde=`click${Iv}${Ude}`,Ck="show",oh="collapse",wb="collapsing",Gde="collapsed",Kde=`:scope .${oh} .${oh}`,Yde="collapse-horizontal",Qde="width",Zde="height",Jde=".collapse.show, .collapse.collapsing",vT='[data-bs-toggle="collapse"]',Xde={parent:null,toggle:!0},efe={parent:"(null|element)",toggle:"boolean"};class jp extends Sa{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const i=Ht.find(vT);for(const r of i){const s=Ht.getSelectorFromElement(r),o=Ht.find(s).filter(a=>a===this._element);s!==null&&o.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Xde}static get DefaultType(){return efe}static get NAME(){return Bde}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(Jde).filter(a=>a!==this._element).map(a=>jp.getOrCreateInstance(a,{toggle:!1}))),t.length&&t[0]._isTransitioning||st.trigger(this._element,zde).defaultPrevented)return;for(const a of t)a.hide();const i=this._getDimension();this._element.classList.remove(oh),this._element.classList.add(wb),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(wb),this._element.classList.add(oh,Ck),this._element.style[i]="",st.trigger(this._element,Hde)},o=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback(r,this._element,!0),this._element.style[i]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||st.trigger(this._element,Wde).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,Tv(this._element),this._element.classList.add(wb),this._element.classList.remove(oh,Ck);for(const r of this._triggerArray){const s=Ht.getElementFromSelector(r);s&&!this._isShown(s)&&this._addAriaAndCollapsedClass([r],!1)}this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(wb),this._element.classList.add(oh),st.trigger(this._element,jde)};this._element.style[e]="",this._queueCallback(i,this._element,!0)}_isShown(t=this._element){return t.classList.contains(Ck)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=hu(t.parent),t}_getDimension(){return this._element.classList.contains(Yde)?Qde:Zde}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(vT);for(const e of t){const i=Ht.getElementFromSelector(e);i&&this._addAriaAndCollapsedClass([e],this._isShown(i))}}_getFirstLevelChildren(t){const e=Ht.find(Kde,this._config.parent);return Ht.find(t,this._config.parent).filter(i=>!e.includes(i))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const i of t)i.classList.toggle(Gde,!e),i.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return typeof t=="string"&&/show|hide/.test(t)&&(e.toggle=!1),this.each(function(){const i=jp.getOrCreateInstance(this,e);if(typeof t=="string"){if(typeof i[t]>"u")throw new TypeError(`No method named "${t}"`);i[t]()}})}}st.on(document,qde,vT,function(n){(n.target.tagName==="A"||n.delegateTarget&&n.delegateTarget.tagName==="A")&&n.preventDefault();for(const t of Ht.getMultipleElementsFromSelector(this))jp.getOrCreateInstance(t,{toggle:!1}).toggle()});Go(jp);const EV="dropdown",tfe="bs.dropdown",Kd=`.${tfe}`,xI=".data-api",nfe="Escape",CV="Tab",ife="ArrowUp",TV="ArrowDown",rfe=2,sfe=`hide${Kd}`,ofe=`hidden${Kd}`,afe=`show${Kd}`,lfe=`shown${Kd}`,d6=`click${Kd}${xI}`,f6=`keydown${Kd}${xI}`,cfe=`keyup${Kd}${xI}`,Uf="show",ufe="dropup",dfe="dropend",ffe="dropstart",hfe="dropup-center",mfe="dropdown-center",ld='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',gfe=`${ld}.${Uf}`,yw=".dropdown-menu",pfe=".navbar",vfe=".navbar-nav",bfe=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",wfe=Bo()?"top-end":"top-start",yfe=Bo()?"top-start":"top-end",_fe=Bo()?"bottom-end":"bottom-start",kfe=Bo()?"bottom-start":"bottom-end",Efe=Bo()?"left-start":"right-start",Cfe=Bo()?"right-start":"left-start",Tfe="top",Sfe="bottom",Afe={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Ife={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class tl extends Sa{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=Ht.next(this._element,yw)[0]||Ht.prev(this._element,yw)[0]||Ht.findOne(yw,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Afe}static get DefaultType(){return Ife}static get NAME(){return EV}toggle(){return this._isShown()?this.hide():this.show()}show(){if(mu(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!st.trigger(this._element,afe,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(vfe))for(const i of[].concat(...document.body.children))st.on(i,"mouseover",ky);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Uf),this._element.classList.add(Uf),st.trigger(this._element,lfe,t)}}hide(){if(mu(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!st.trigger(this._element,sfe,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))st.off(i,"mouseover",ky);this._popper&&this._popper.destroy(),this._menu.classList.remove(Uf),this._element.classList.remove(Uf),this._element.setAttribute("aria-expanded","false"),Gl.removeDataAttribute(this._menu,"popper"),st.trigger(this._element,ofe,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!ql(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${EV.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof KU>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let t=this._element;this._config.reference==="parent"?t=this._parent:ql(this._config.reference)?t=hu(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=AI(t,this._menu,e)}_isShown(){return this._menu.classList.contains(Uf)}_getPlacement(){const t=this._parent;if(t.classList.contains(dfe))return Efe;if(t.classList.contains(ffe))return Cfe;if(t.classList.contains(hfe))return Tfe;if(t.classList.contains(mfe))return Sfe;const e=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(ufe)?e?yfe:wfe:e?kfe:_fe}_detectNavbar(){return this._element.closest(pfe)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Gl.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...Ws(this._config.popperConfig,[void 0,t])}}_selectMenuItem({key:t,target:e}){const i=Ht.find(bfe,this._menu).filter(r=>Om(r));i.length&&II(i,e,t===TV,!i.includes(e)).focus()}static jQueryInterface(t){return this.each(function(){const e=tl.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}static clearMenus(t){if(t.button===rfe||t.type==="keyup"&&t.key!==CV)return;const e=Ht.find(gfe);for(const i of e){const r=tl.getInstance(i);if(!r||r._config.autoClose===!1)continue;const s=t.composedPath(),o=s.includes(r._menu);if(s.includes(r._element)||r._config.autoClose==="inside"&&!o||r._config.autoClose==="outside"&&o||r._menu.contains(t.target)&&(t.type==="keyup"&&t.key===CV||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const a={relatedTarget:r._element};t.type==="click"&&(a.clickEvent=t),r._completeHide(a)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),i=t.key===nfe,r=[ife,TV].includes(t.key);if(!r&&!i||e&&!i)return;t.preventDefault();const s=this.matches(ld)?this:Ht.prev(this,ld)[0]||Ht.next(this,ld)[0]||Ht.findOne(ld,t.delegateTarget.parentNode),o=tl.getOrCreateInstance(s);if(r){t.stopPropagation(),o.show(),o._selectMenuItem(t);return}o._isShown()&&(t.stopPropagation(),o.hide(),s.focus())}}st.on(document,f6,ld,tl.dataApiKeydownHandler);st.on(document,f6,yw,tl.dataApiKeydownHandler);st.on(document,d6,tl.clearMenus);st.on(document,cfe,tl.clearMenus);st.on(document,d6,ld,function(n){n.preventDefault(),tl.getOrCreateInstance(this).toggle()});Go(tl);const h6="backdrop",Pfe="fade",SV="show",AV=`mousedown.bs.${h6}`,xfe={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Ofe={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class m6 extends Sv{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return xfe}static get DefaultType(){return Ofe}static get NAME(){return h6}show(t){if(!this._config.isVisible){Ws(t);return}this._append();const e=this._getElement();this._config.isAnimated&&Tv(e),e.classList.add(SV),this._emulateAnimation(()=>{Ws(t)})}hide(t){if(!this._config.isVisible){Ws(t);return}this._getElement().classList.remove(SV),this._emulateAnimation(()=>{this.dispose(),Ws(t)})}dispose(){this._isAppended&&(st.off(this._element,AV),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(Pfe),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=hu(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),st.on(t,AV,()=>{Ws(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){XU(t,this._getElement(),this._config.isAnimated)}}const Rfe="focustrap",Vfe="bs.focustrap",Cy=`.${Vfe}`,Dfe=`focusin${Cy}`,Nfe=`keydown.tab${Cy}`,Lfe="Tab",Mfe="forward",IV="backward",$fe={autofocus:!0,trapElement:null},Bfe={autofocus:"boolean",trapElement:"element"};class g6 extends Sv{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return $fe}static get DefaultType(){return Bfe}static get NAME(){return Rfe}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),st.off(document,Cy),st.on(document,Dfe,t=>this._handleFocusin(t)),st.on(document,Nfe,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,st.off(document,Cy))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const i=Ht.focusableChildren(e);i.length===0?e.focus():this._lastTabNavDirection===IV?i[i.length-1].focus():i[0].focus()}_handleKeydown(t){t.key===Lfe&&(this._lastTabNavDirection=t.shiftKey?IV:Mfe)}}const PV=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",xV=".sticky-top",yb="padding-right",OV="margin-right";class bT{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,yb,e=>e+t),this._setElementAttributes(PV,yb,e=>e+t),this._setElementAttributes(xV,OV,e=>e-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,yb),this._resetElementAttributes(PV,yb),this._resetElementAttributes(xV,OV)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,i){const r=this.getWidth(),s=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+r)return;this._saveInitialAttribute(o,e);const a=window.getComputedStyle(o).getPropertyValue(e);o.style.setProperty(e,`${i(Number.parseFloat(a))}px`)};this._applyManipulationCallback(t,s)}_saveInitialAttribute(t,e){const i=t.style.getPropertyValue(e);i&&Gl.setDataAttribute(t,e,i)}_resetElementAttributes(t,e){const i=r=>{const s=Gl.getDataAttribute(r,e);if(s===null){r.style.removeProperty(e);return}Gl.removeDataAttribute(r,e),r.style.setProperty(e,s)};this._applyManipulationCallback(t,i)}_applyManipulationCallback(t,e){if(ql(t)){e(t);return}for(const i of Ht.find(t,this._element))e(i)}}const Ffe="modal",Ufe="bs.modal",Fo=`.${Ufe}`,zfe=".data-api",Hfe="Escape",Wfe=`hide${Fo}`,jfe=`hidePrevented${Fo}`,p6=`hidden${Fo}`,v6=`show${Fo}`,qfe=`shown${Fo}`,Gfe=`resize${Fo}`,Kfe=`click.dismiss${Fo}`,Yfe=`mousedown.dismiss${Fo}`,Qfe=`keydown.dismiss${Fo}`,Zfe=`click${Fo}${zfe}`,RV="modal-open",Jfe="fade",VV="show",Tk="modal-static",Xfe=".modal.show",ehe=".modal-dialog",the=".modal-body",nhe='[data-bs-toggle="modal"]',ihe={backdrop:!0,focus:!0,keyboard:!0},rhe={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Hn extends Sa{constructor(t,e){super(t,e),this._dialog=Ht.findOne(ehe,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new bT,this._addEventListeners()}static get Default(){return ihe}static get DefaultType(){return rhe}static get NAME(){return Ffe}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||st.trigger(this._element,v6,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(RV),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||st.trigger(this._element,Wfe).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(VV),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){st.off(window,Fo),st.off(this._dialog,Fo),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new m6({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new g6({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=Ht.findOne(the,this._dialog);e&&(e.scrollTop=0),Tv(this._element),this._element.classList.add(VV);const i=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,st.trigger(this._element,qfe,{relatedTarget:t})};this._queueCallback(i,this._dialog,this._isAnimated())}_addEventListeners(){st.on(this._element,Qfe,t=>{if(t.key===Hfe){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),st.on(window,Gfe,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),st.on(this._element,Yfe,t=>{st.one(this._element,Kfe,e=>{if(!(this._element!==t.target||this._element!==e.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(RV),this._resetAdjustments(),this._scrollBar.reset(),st.trigger(this._element,p6)})}_isAnimated(){return this._element.classList.contains(Jfe)}_triggerBackdropTransition(){if(st.trigger(this._element,jfe).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;i==="hidden"||this._element.classList.contains(Tk)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(Tk),this._queueCallback(()=>{this._element.classList.remove(Tk),this._queueCallback(()=>{this._element.style.overflowY=i},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),i=e>0;if(i&&!t){const r=Bo()?"paddingLeft":"paddingRight";this._element.style[r]=`${e}px`}if(!i&&t){const r=Bo()?"paddingRight":"paddingLeft";this._element.style[r]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each(function(){const i=Hn.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof i[t]>"u")throw new TypeError(`No method named "${t}"`);i[t](e)}})}}st.on(document,Zfe,nhe,function(n){const t=Ht.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&n.preventDefault(),st.one(t,v6,r=>{r.defaultPrevented||st.one(t,p6,()=>{Om(this)&&this.focus()})});const e=Ht.findOne(Xfe);e&&Hn.getInstance(e).hide(),Hn.getOrCreateInstance(t).toggle(this)});w0(Hn);Go(Hn);const she="offcanvas",ohe="bs.offcanvas",mc=`.${ohe}`,b6=".data-api",ahe=`load${mc}${b6}`,lhe="Escape",DV="show",NV="showing",LV="hiding",che="offcanvas-backdrop",w6=".offcanvas.show",uhe=`show${mc}`,dhe=`shown${mc}`,fhe=`hide${mc}`,MV=`hidePrevented${mc}`,y6=`hidden${mc}`,hhe=`resize${mc}`,mhe=`click${mc}${b6}`,ghe=`keydown.dismiss${mc}`,phe='[data-bs-toggle="offcanvas"]',vhe={backdrop:!0,keyboard:!0,scroll:!1},bhe={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class gu extends Sa{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return vhe}static get DefaultType(){return bhe}static get NAME(){return she}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||st.trigger(this._element,uhe,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new bT().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(NV);const i=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(DV),this._element.classList.remove(NV),st.trigger(this._element,dhe,{relatedTarget:t})};this._queueCallback(i,this._element,!0)}hide(){if(!this._isShown||st.trigger(this._element,fhe).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(LV),this._backdrop.hide();const e=()=>{this._element.classList.remove(DV,LV),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new bT().reset(),st.trigger(this._element,y6)};this._queueCallback(e,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){st.trigger(this._element,MV);return}this.hide()},e=!!this._config.backdrop;return new m6({className:che,isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?t:null})}_initializeFocusTrap(){return new g6({trapElement:this._element})}_addEventListeners(){st.on(this._element,ghe,t=>{if(t.key===lhe){if(this._config.keyboard){this.hide();return}st.trigger(this._element,MV)}})}static jQueryInterface(t){return this.each(function(){const e=gu.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}st.on(document,mhe,phe,function(n){const t=Ht.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),mu(this))return;st.one(t,y6,()=>{Om(this)&&this.focus()});const e=Ht.findOne(w6);e&&e!==t&&gu.getInstance(e).hide(),gu.getOrCreateInstance(t).toggle(this)});st.on(window,ahe,()=>{for(const n of Ht.find(w6))gu.getOrCreateInstance(n).show()});st.on(window,hhe,()=>{for(const n of Ht.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(n).position!=="fixed"&&gu.getOrCreateInstance(n).hide()});w0(gu);Go(gu);const whe=/^aria-[\w-]*$/i,_6={"*":["class","dir","id","lang","role",whe],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},yhe=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),_he=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,khe=(n,t)=>{const e=n.nodeName.toLowerCase();return t.includes(e)?yhe.has(e)?!!_he.test(n.nodeValue):!0:t.filter(i=>i instanceof RegExp).some(i=>i.test(e))};function Ehe(n,t,e){if(!n.length)return n;if(e&&typeof e=="function")return e(n);const r=new window.DOMParser().parseFromString(n,"text/html"),s=[].concat(...r.body.querySelectorAll("*"));for(const o of s){const a=o.nodeName.toLowerCase();if(!Object.keys(t).includes(a)){o.remove();continue}const l=[].concat(...o.attributes),c=[].concat(t["*"]||[],t[a]||[]);for(const u of l)khe(u,c)||o.removeAttribute(u.nodeName)}return r.body.innerHTML}const Che="TemplateFactory",The={allowList:_6,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},She={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Ahe={entry:"(string|element|function|null)",selector:"(string|element)"};class Ihe extends Sv{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return The}static get DefaultType(){return She}static get NAME(){return Che}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[r,s]of Object.entries(this._config.content))this._setContent(t,s,r);const e=t.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&e.classList.add(...i.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,i]of Object.entries(t))super._typeCheckConfig({selector:e,entry:i},Ahe)}_setContent(t,e,i){const r=Ht.findOne(i,t);if(r){if(e=this._resolvePossibleFunction(e),!e){r.remove();return}if(ql(e)){this._putElementInTemplate(hu(e),r);return}if(this._config.html){r.innerHTML=this._maybeSanitize(e);return}r.textContent=e}}_maybeSanitize(t){return this._config.sanitize?Ehe(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return Ws(t,[void 0,this])}_putElementInTemplate(t,e){if(this._config.html){e.innerHTML="",e.append(t);return}e.textContent=t.textContent}}const Phe="tooltip",xhe=new Set(["sanitize","allowList","sanitizeFn"]),Sk="fade",Ohe="modal",_b="show",Rhe=".tooltip-inner",$V=`.${Ohe}`,BV="hide.bs.modal",lg="hover",Ak="focus",Ik="click",Vhe="manual",Dhe="hide",Nhe="hidden",Lhe="show",Mhe="shown",$he="inserted",Bhe="click",Fhe="focusin",Uhe="focusout",zhe="mouseenter",Hhe="mouseleave",Whe={AUTO:"auto",TOP:"top",RIGHT:Bo()?"left":"right",BOTTOM:"bottom",LEFT:Bo()?"right":"left"},jhe={allowList:_6,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},qhe={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Vm extends Sa{constructor(t,e){if(typeof KU>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return jhe}static get DefaultType(){return qhe}static get NAME(){return Phe}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),st.off(this._element.closest($V),BV,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=st.trigger(this._element,this.constructor.eventName(Lhe)),i=(ZU(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!i)return;this._disposePopper();const r=this._getTipElement();this._element.setAttribute("aria-describedby",r.getAttribute("id"));const{container:s}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(s.append(r),st.trigger(this._element,this.constructor.eventName($he))),this._popper=this._createPopper(r),r.classList.add(_b),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))st.on(a,"mouseover",ky);const o=()=>{st.trigger(this._element,this.constructor.eventName(Mhe)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||st.trigger(this._element,this.constructor.eventName(Dhe)).defaultPrevented)return;if(this._getTipElement().classList.remove(_b),"ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))st.off(r,"mouseover",ky);this._activeTrigger[Ik]=!1,this._activeTrigger[Ak]=!1,this._activeTrigger[lg]=!1,this._isHovered=null;const i=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),st.trigger(this._element,this.constructor.eventName(Nhe)))};this._queueCallback(i,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(Sk,_b),e.classList.add(`bs-${this.constructor.NAME}-auto`);const i=Vue(this.constructor.NAME).toString();return e.setAttribute("id",i),this._isAnimated()&&e.classList.add(Sk),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new Ihe({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Rhe]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Sk)}_isShown(){return this.tip&&this.tip.classList.contains(_b)}_createPopper(t){const e=Ws(this._config.placement,[this,t,this._element]),i=Whe[e.toUpperCase()];return AI(this._element,t,this._getPopperConfig(i))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_resolvePossibleFunction(t){return Ws(t,[this._element,this._element])}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:i=>{this._getTipElement().setAttribute("data-popper-placement",i.state.placement)}}]};return{...e,...Ws(this._config.popperConfig,[void 0,e])}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if(e==="click")st.on(this._element,this.constructor.eventName(Bhe),this._config.selector,i=>{const r=this._initializeOnDelegatedTarget(i);r._activeTrigger[Ik]=!(r._isShown()&&r._activeTrigger[Ik]),r.toggle()});else if(e!==Vhe){const i=e===lg?this.constructor.eventName(zhe):this.constructor.eventName(Fhe),r=e===lg?this.constructor.eventName(Hhe):this.constructor.eventName(Uhe);st.on(this._element,i,this._config.selector,s=>{const o=this._initializeOnDelegatedTarget(s);o._activeTrigger[s.type==="focusin"?Ak:lg]=!0,o._enter()}),st.on(this._element,r,this._config.selector,s=>{const o=this._initializeOnDelegatedTarget(s);o._activeTrigger[s.type==="focusout"?Ak:lg]=o._element.contains(s.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},st.on(this._element.closest($V),BV,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=Gl.getDataAttributes(this._element);for(const i of Object.keys(e))xhe.has(i)&&delete e[i];return t={...e,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:hu(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[e,i]of Object.entries(this._config))this.constructor.Default[e]!==i&&(t[e]=i);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const e=Vm.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}Go(Vm);const Ghe="popover",Khe=".popover-header",Yhe=".popover-body",Qhe={...Vm.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Zhe={...Vm.DefaultType,content:"(null|string|element|function)"};class k0 extends Vm{static get Default(){return Qhe}static get DefaultType(){return Zhe}static get NAME(){return Ghe}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Khe]:this._getTitle(),[Yhe]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const e=k0.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}Go(k0);const Jhe="scrollspy",Xhe="bs.scrollspy",OI=`.${Xhe}`,eme=".data-api",tme=`activate${OI}`,FV=`click${OI}`,nme=`load${OI}${eme}`,ime="dropdown-item",bf="active",rme='[data-bs-spy="scroll"]',Pk="[href]",sme=".nav, .list-group",UV=".nav-link",ome=".nav-item",ame=".list-group-item",lme=`${UV}, ${ome} > ${UV}, ${ame}`,cme=".dropdown",ume=".dropdown-toggle",dme={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},fme={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class E0 extends Sa{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return dme}static get DefaultType(){return fme}static get NAME(){return Jhe}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=hu(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(e=>Number.parseFloat(e))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(st.off(this._config.target,FV),st.on(this._config.target,FV,Pk,t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const i=this._rootElement||window,r=e.offsetTop-this._element.offsetTop;if(i.scrollTo){i.scrollTo({top:r,behavior:"smooth"});return}i.scrollTop=r}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(e=>this._observerCallback(e),t)}_observerCallback(t){const e=o=>this._targetLinks.get(`#${o.target.id}`),i=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(e(o))},r=(this._rootElement||document.documentElement).scrollTop,s=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(const o of t){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(o));continue}const a=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(s&&a){if(i(o),!r)return;continue}!s&&!a&&i(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=Ht.find(Pk,this._config.target);for(const e of t){if(!e.hash||mu(e))continue;const i=Ht.findOne(decodeURI(e.hash),this._element);Om(i)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,i))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(bf),this._activateParents(t),st.trigger(this._element,tme,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(ime)){Ht.findOne(ume,t.closest(cme)).classList.add(bf);return}for(const e of Ht.parents(t,sme))for(const i of Ht.prev(e,lme))i.classList.add(bf)}_clearActiveClass(t){t.classList.remove(bf);const e=Ht.find(`${Pk}.${bf}`,t);for(const i of e)i.classList.remove(bf)}static jQueryInterface(t){return this.each(function(){const e=E0.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}st.on(window,nme,()=>{for(const n of Ht.find(rme))E0.getOrCreateInstance(n)});Go(E0);const hme="tab",mme="bs.tab",Yd=`.${mme}`,gme=`hide${Yd}`,pme=`hidden${Yd}`,vme=`show${Yd}`,bme=`shown${Yd}`,wme=`click${Yd}`,yme=`keydown${Yd}`,_me=`load${Yd}`,kme="ArrowLeft",zV="ArrowRight",Eme="ArrowUp",HV="ArrowDown",xk="Home",WV="End",cd="active",jV="fade",Ok="show",Cme="dropdown",k6=".dropdown-toggle",Tme=".dropdown-menu",Rk=`:not(${k6})`,Sme='.list-group, .nav, [role="tablist"]',Ame=".nav-item, .list-group-item",Ime=`.nav-link${Rk}, .list-group-item${Rk}, [role="tab"]${Rk}`,E6='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Vk=`${Ime}, ${E6}`,Pme=`.${cd}[data-bs-toggle="tab"], .${cd}[data-bs-toggle="pill"], .${cd}[data-bs-toggle="list"]`;class Xh extends Sa{constructor(t){super(t),this._parent=this._element.closest(Sme),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),st.on(this._element,yme,e=>this._keydown(e)))}static get NAME(){return hme}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),i=e?st.trigger(e,gme,{relatedTarget:t}):null;st.trigger(t,vme,{relatedTarget:e}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){if(!t)return;t.classList.add(cd),this._activate(Ht.getElementFromSelector(t));const i=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(Ok);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),st.trigger(t,bme,{relatedTarget:e})};this._queueCallback(i,t,t.classList.contains(jV))}_deactivate(t,e){if(!t)return;t.classList.remove(cd),t.blur(),this._deactivate(Ht.getElementFromSelector(t));const i=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(Ok);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),st.trigger(t,pme,{relatedTarget:e})};this._queueCallback(i,t,t.classList.contains(jV))}_keydown(t){if(![kme,zV,Eme,HV,xk,WV].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=this._getChildren().filter(r=>!mu(r));let i;if([xk,WV].includes(t.key))i=e[t.key===xk?0:e.length-1];else{const r=[zV,HV].includes(t.key);i=II(e,t.target,r,!0)}i&&(i.focus({preventScroll:!0}),Xh.getOrCreateInstance(i).show())}_getChildren(){return Ht.find(Vk,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const i of e)this._setInitialAttributesOnChild(i)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),i=this._getOuterElement(t);t.setAttribute("aria-selected",e),i!==t&&this._setAttributeIfNotExists(i,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=Ht.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){const i=this._getOuterElement(t);if(!i.classList.contains(Cme))return;const r=(s,o)=>{const a=Ht.findOne(s,i);a&&a.classList.toggle(o,e)};r(k6,cd),r(Tme,Ok),i.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,i){t.hasAttribute(e)||t.setAttribute(e,i)}_elemIsActive(t){return t.classList.contains(cd)}_getInnerElement(t){return t.matches(Vk)?t:Ht.findOne(Vk,t)}_getOuterElement(t){return t.closest(Ame)||t}static jQueryInterface(t){return this.each(function(){const e=Xh.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}st.on(document,wme,E6,function(n){["A","AREA"].includes(this.tagName)&&n.preventDefault(),!mu(this)&&Xh.getOrCreateInstance(this).show()});st.on(window,_me,()=>{for(const n of Ht.find(Pme))Xh.getOrCreateInstance(n)});Go(Xh);const xme="toast",Ome="bs.toast",xu=`.${Ome}`,Rme=`mouseover${xu}`,Vme=`mouseout${xu}`,Dme=`focusin${xu}`,Nme=`focusout${xu}`,Lme=`hide${xu}`,Mme=`hidden${xu}`,$me=`show${xu}`,Bme=`shown${xu}`,Fme="fade",qV="hide",kb="show",Eb="showing",Ume={animation:"boolean",autohide:"boolean",delay:"number"},zme={animation:!0,autohide:!0,delay:5e3};class C0 extends Sa{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return zme}static get DefaultType(){return Ume}static get NAME(){return xme}show(){if(st.trigger(this._element,$me).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Fme);const e=()=>{this._element.classList.remove(Eb),st.trigger(this._element,Bme),this._maybeScheduleHide()};this._element.classList.remove(qV),Tv(this._element),this._element.classList.add(kb,Eb),this._queueCallback(e,this._element,this._config.animation)}hide(){if(!this.isShown()||st.trigger(this._element,Lme).defaultPrevented)return;const e=()=>{this._element.classList.add(qV),this._element.classList.remove(Eb,kb),st.trigger(this._element,Mme)};this._element.classList.add(Eb),this._queueCallback(e,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(kb),super.dispose()}isShown(){return this._element.classList.contains(kb)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=e;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=e;break}}if(e){this._clearTimeout();return}const i=t.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){st.on(this._element,Rme,t=>this._onInteraction(t,!0)),st.on(this._element,Vme,t=>this._onInteraction(t,!1)),st.on(this._element,Dme,t=>this._onInteraction(t,!0)),st.on(this._element,Nme,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const e=C0.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}w0(C0);Go(C0);const Hme={id:"transferEventModal",class:"modal fade",tabindex:"-1","data-bs-backdrop":"static","aria-labelledby":"transferEventModalLabel","aria-hidden":"true"},Wme={class:"modal-dialog"},jme={class:"modal-content"},qme={class:"modal-header"},Gme={id:"transferEventModalLabel",class:"modal-title"},Kme={class:"modal-body"},Yme={key:0,class:"text-center my-5"},Qme={class:"spinner-border text-primary",role:"status"},Zme={class:"visually-hidden"},Jme={key:1,class:"alert alert-danger"},Xme={key:2},ege={key:0,class:"mb-4"},tge={class:"mb-1"},nge={class:"mb-0"},ige={key:1,class:"form-group"},rge={for:"targetOrganizer",class:"form-label"},sge=["disabled"],oge={value:"",disabled:"",selected:""},age=["value"],lge={key:2,class:"alert alert-info"},cge={class:"modal-footer"},uge=["disabled"],dge=["disabled"],fge={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},hge={__name:"TransferEventModal",props:{event:{type:Object,default:null},show:{type:Boolean,default:!1}},emits:["transfer-success","transfer-error"],setup(n,{emit:t}){const e=n,i=t,r=nn();le(()=>{var C;return((C=r==null?void 0:r.user)==null?void 0:C.superAdmin)===!0});const s=Z(!1),o=Z(null),a=Z([]),l=Z(""),c=Z(!1),u=le(()=>e.event?a.value.filter(C=>{var k,E;return C.id!==((E=(k=e.event)==null?void 0:k.organizer)==null?void 0:E.id)}):[]),{load:d,onResult:f,onError:h}=Lp(EU,null,{fetchPolicy:"network-only"}),{mutate:g,onDone:v,onError:_}=In(Hce);gt(()=>e.show,C=>{C&&(l.value="",s.value=!0,o.value=null,d())}),gt(()=>e.event,()=>{l.value=""}),f(({data:C})=>{s.value=!1,C!=null&&C.organizers&&(a.value=C.organizers)}),h(C=>{s.value=!1,o.value=C,console.error("Error loading organizers:",C)}),v(({data:C})=>{if(c.value=!1,C&&C.transferEvent){const A=C.transferEvent;A.originalOrganizer||console.warn("Übertragenes Event hat keinen original_organizer:",A)}ze(Xe("view.organizers.events.transfer.success"),{type:"success"});const k=document.getElementById("transferEventModal"),E=Hn.getInstance(k);E&&E.hide(),i("transfer-success")}),_(C=>{c.value=!1,Mt(C),i("transfer-error",C)});function w(){e.event&&l.value&&(c.value=!0,g({eventId:e.event.id,newOrganizerId:l.value}))}return(C,k)=>{var E,A;return P(),V("div",Hme,[m("div",Wme,[m("div",jme,[m("div",qme,[m("h5",Gme,B(C.$t("view.organizers.events.transfer.title")),1),k[1]||(k[1]=m("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),m("div",Kme,[s.value?(P(),V("div",Yme,[m("div",Qme,[m("span",Zme,B(C.$t("general.loading")),1)])])):o.value?(P(),V("div",Jme,B(C.$t("errors.loadingFailed")),1)):(P(),V("div",Xme,[n.event?(P(),V("div",ege,[m("h6",null,B(C.$t("view.organizers.events.transfer.eventInfo")),1),m("p",tge,[m("strong",null,B(C.$t("view.organizers.events.title"))+":",1),fe(" "+B(n.event.title),1)]),m("p",nge,[m("strong",null,B(C.$t("view.organizers.events.currentOwner"))+":",1),fe(" "+B((E=n.event.organizer)==null?void 0:E.username)+" ("+B((A=n.event.organizer)==null?void 0:A.email)+")",1)])])):ne("",!0),a.value.length>0?(P(),V("div",ige,[m("label",rge,B(C.$t("view.organizers.events.transfer.selectTarget")),1),vn(m("select",{id:"targetOrganizer","onUpdate:modelValue":k[0]||(k[0]=x=>l.value=x),class:"form-select",disabled:c.value},[m("option",oge,B(C.$t("view.organizers.events.transfer.selectPlaceholder")),1),(P(!0),V(Fe,null,ct(u.value,x=>(P(),V("option",{key:x.id,value:x.id},B(x.username)+" ("+B(x.email)+") ",9,age))),128))],8,sge),[[ou,l.value]])])):(P(),V("div",lge,B(C.$t("view.organizers.events.transfer.noTargets")),1))]))]),m("div",cge,[m("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",disabled:c.value},B(C.$t("general.close")),9,uge),m("button",{type:"button",class:"btn btn-primary",disabled:!l.value||c.value,onClick:w},[c.value?(P(),V("span",fge)):ne("",!0),fe(" "+B(C.$t("view.organizers.events.transfer.submit")),1)],8,dge)])])])])}}},mge={id:"organizerEventsModal",class:"modal fade",tabindex:"-1","data-bs-backdrop":"static","aria-labelledby":"organizerEventsModalLabel","aria-hidden":"true"},gge={class:"modal-dialog modal-lg modal-dialog-scrollable"},pge={class:"modal-content"},vge={class:"modal-header"},bge={id:"organizerEventsModalLabel",class:"modal-title"},wge={class:"modal-body"},yge={key:0,class:"text-center my-5"},_ge={class:"spinner-border text-primary",role:"status"},kge={class:"visually-hidden"},Ege={key:1,class:"alert alert-danger"},Cge={key:2},Tge={key:0},Sge={key:0,class:"mb-4"},Age={class:"fw-bold mb-3"},Ige={class:"list-group"},Pge={class:"d-flex w-100 justify-content-between"},xge={class:"mb-1"},Oge={class:"mb-1 text-truncate"},Rge={class:"d-flex flex-wrap justify-content-between mt-2"},Vge={class:"d-flex flex-wrap mb-2"},Dge={class:"me-2"},Nge={class:"me-2"},Lge={key:0,class:"me-2"},Mge={class:"badge text-bg-info"},$ge={key:1,class:"me-2"},Bge=["title"],Fge={class:"d-flex"},Uge=["title","onClick"],zge=["title","onClick"],Hge={key:1},Wge={class:"fw-bold mb-3"},jge={class:"list-group"},qge={class:"d-flex w-100 justify-content-between"},Gge={class:"mb-1"},Kge={class:"mb-1 text-truncate"},Yge={class:"d-flex flex-wrap justify-content-between mt-2"},Qge={class:"d-flex flex-wrap mb-2"},Zge={class:"me-2"},Jge={class:"badge text-bg-secondary"},Xge={key:0,class:"me-2"},epe={class:"badge text-bg-dark"},tpe={key:1,class:"me-2"},npe=["title"],ipe={class:"d-flex"},rpe=["title","onClick"],spe=["title","onClick"],ope={key:2,class:"mt-5"},ape={class:"fw-bold mb-3 text-warning"},lpe={class:"list-group"},cpe={class:"d-flex w-100 justify-content-between"},upe={class:"mb-1"},dpe={class:"mb-1 text-truncate"},fpe={class:"d-flex flex-wrap justify-content-between mt-2"},hpe={class:"d-flex flex-wrap mb-2"},mpe={class:"me-2"},gpe={key:0,class:"badge text-bg-secondary"},ppe={class:"me-2"},vpe={key:0,class:"me-2"},bpe={class:"badge text-bg-dark"},wpe={class:"me-2"},ype=["title"],_pe={class:"d-flex"},kpe=["title","onClick"],Epe={key:1,class:"alert alert-info"},Cpe={class:"modal-footer"},Tpe={type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},Spe={__name:"OrganizerEventsModal",props:{organizer:{type:Object,required:!0},show:{type:Boolean,default:!1}},setup(n){const t=n,e=Z(!1),i=Z(null),r=Z([]),s=Z([]),o=Z([]),a=Z(null),l=Z(!1),c=nn(),u=le(()=>{var I;return((I=c==null?void 0:c.user)==null?void 0:I.superAdmin)===!0}),d=le(()=>r.value.length>0||s.value.length>0||o.value.length>0),{load:f,onResult:h,onError:g}=Lp(Uce,()=>({organizerId:t.organizer.id}),{fetchPolicy:"network-only"}),{load:v,onResult:_,onError:w}=Lp(dT,null,{fetchPolicy:"network-only"}),{mutate:C,onDone:k,onError:E}=In(zce);gt(()=>t.show,I=>{var F;I&&((F=t.organizer)!=null&&F.id)&&(e.value=!0,i.value=null,u.value?v():f())}),h(({data:I})=>{if(e.value=!1,I){const F=[],H=[],q=[],N=[];(I.upcomingEvents||[]).forEach($=>{$.originalOrganizer&&$.originalOrganizer.id===t.organizer.id&&$.organizer.id!==t.organizer.id?H.push($):F.push($)}),(I.expiredEvents||[]).forEach($=>{$.originalOrganizer&&$.originalOrganizer.id===t.organizer.id&&$.organizer.id!==t.organizer.id?N.push($):q.push($)}),r.value=F,s.value=q,o.value=[...H,...N],setTimeout(()=>{S()},100)}}),_(({data:I})=>{if(e.value=!1,I){r.value=(I.allUpcomingEvents||[]).filter(q=>{var N,$;return((N=q.organizer)==null?void 0:N.id)===(($=t.organizer)==null?void 0:$.id)}),s.value=(I.allPastEvents||[]).filter(q=>{var N,$;return((N=q.organizer)==null?void 0:N.id)===(($=t.organizer)==null?void 0:$.id)});const F=(I.allUpcomingEvents||[]).filter(q=>{var N,$,U,re;return((N=q.originalOrganizer)==null?void 0:N.id)===(($=t.organizer)==null?void 0:$.id)&&((U=q.organizer)==null?void 0:U.id)!==((re=t.organizer)==null?void 0:re.id)}),H=(I.allPastEvents||[]).filter(q=>{var N,$,U,re;return((N=q.originalOrganizer)==null?void 0:N.id)===(($=t.organizer)==null?void 0:$.id)&&((U=q.organizer)==null?void 0:U.id)!==((re=t.organizer)==null?void 0:re.id)});o.value=[...F,...H],setTimeout(()=>{S()},100)}}),g(I=>{e.value=!1,i.value=I,console.error("Error loading regular events:",I)}),w(I=>{e.value=!1,i.value=I,console.error("Error loading all events:",I)}),k(()=>{ze(Xe("view.organizers.events.reset.success"),{type:"success"}),u.value?v():f()}),E(I=>{Mt(I)});function A(I){a.value=I,l.value=!0,setTimeout(()=>{const F=document.getElementById("transferEventModal");F&&(new Hn(F).show(),F.addEventListener("hidden.bs.modal",()=>{l.value=!1}))},100)}function x(I){I&&I.originalOrganizer&&C({eventId:I.id})}function p(){u.value?v():f()}function D(){return new Date().toLocaleDateString()}function R(){}function S(){[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(function(H){return new bootstrap.Tooltip(H,{container:"body"})}),[].slice.call(document.querySelectorAll(".original-owner-badge[title]")).map(function(H){return new bootstrap.Tooltip(H,{container:"body"})})}return(I,F)=>{var H;return P(),V(Fe,null,[m("div",mge,[m("div",gge,[m("div",pge,[m("div",vge,[m("h5",bge,B(I.$t("view.organizers.events.title"))+" - "+B((H=n.organizer)==null?void 0:H.username),1),F[0]||(F[0]=m("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),m("div",wge,[e.value?(P(),V("div",yge,[m("div",_ge,[m("span",kge,B(I.$t("general.loading")),1)])])):i.value?(P(),V("div",Ege,B(I.$t("errors.loadingFailed")),1)):(P(),V("div",Cge,[d.value?(P(),V("div",Tge,[r.value.length>0?(P(),V("div",Sge,[m("h6",Age,B(I.$t("view.organizers.events.upcoming")),1),m("div",Ige,[(P(!0),V(Fe,null,ct(r.value,q=>{var N,$,U,re,K,z;return P(),V("div",{key:q.id,class:Ze(["list-group-item list-group-item-action",{"transferred-event":q.originalOrganizer&&((N=q.organizer)==null?void 0:N.id)===(($=t.organizer)==null?void 0:$.id)}])},[m("div",Pge,[m("h6",xge,B(q.title),1),m("small",null,B(M(Ga)(q.scheduledDatetime)),1)]),m("p",Oge,B(q.description),1),m("div",Rge,[m("div",Vge,[m("div",Dge,[m("span",{class:Ze(["badge",q.active?"text-bg-success":"text-bg-secondary"])},B(q.active?I.$t("view.organizers.events.active"):I.$t("view.organizers.events.inactive")),3)]),m("div",Nge,[m("span",{class:Ze(["badge",q.lobbyOpen?"text-bg-success":"text-bg-secondary"])},B(q.lobbyOpen?I.$t("view.organizers.events.open"):I.$t("view.organizers.events.closed")),3)]),q.async?(P(),V("div",Lge,[m("span",Mge,B(I.$t("view.organizers.events.async")),1)])):ne("",!0),q.originalOrganizer?(P(),V("div",$ge,[m("span",{class:Ze(["badge original-owner-badge",((U=q.organizer)==null?void 0:U.id)===((re=t.organizer)==null?void 0:re.id)?"text-bg-warning":"text-bg-info"]),title:`${I.$t("view.organizers.events.originalOwner")}: ${q.originalOrganizer.username} (${q.originalOrganizer.email})`},B(((K=q.organizer)==null?void 0:K.id)===((z=t.organizer)==null?void 0:z.id)?I.$t("view.organizers.events.transferred-to"):I.$t("view.organizers.events.transferred-from")),11,Bge)])):ne("",!0)]),m("div",Fge,[m("button",{class:"btn btn-sm btn-primary me-2",title:I.$t("view.organizers.events.transfer.title"),onClick:bt(ge=>A(q),["prevent"])},[...F[1]||(F[1]=[m("i",{class:"bi-arrow-right"},null,-1)])],8,Uge),q.originalOrganizer?(P(),V("button",{key:0,class:"btn btn-sm btn-warning",title:I.$t("view.organizers.events.reset.title"),onClick:bt(ge=>x(q),["prevent"])},[...F[2]||(F[2]=[m("i",{class:"bi-arrow-counterclockwise"},null,-1)])],8,zge)):ne("",!0)])])],2)}),128))])])):ne("",!0),s.value.length>0?(P(),V("div",Hge,[m("h6",Wge,B(I.$t("view.organizers.events.past")),1),m("div",jge,[(P(!0),V(Fe,null,ct(s.value,q=>{var N,$,U,re,K,z;return P(),V("div",{key:q.id,class:Ze(["list-group-item list-group-item-action",{"transferred-event":q.originalOrganizer&&((N=q.organizer)==null?void 0:N.id)===(($=t.organizer)==null?void 0:$.id)}])},[m("div",qge,[m("h6",Gge,B(q.title),1),m("small",null,B(M(Ga)(q.scheduledDatetime)),1)]),m("p",Kge,B(q.description),1),m("div",Yge,[m("div",Qge,[m("div",Zge,[m("span",Jge,B(I.$t("view.organizers.events.expired")),1)]),q.finished?(P(),V("div",Xge,[m("span",epe,B(I.$t("view.organizers.events.finished")),1)])):ne("",!0),q.originalOrganizer?(P(),V("div",tpe,[m("span",{class:Ze(["badge original-owner-badge",((U=q.organizer)==null?void 0:U.id)===((re=t.organizer)==null?void 0:re.id)?"text-bg-warning":"text-bg-info"]),title:`${I.$t("view.organizers.events.originalOwner")}: ${q.originalOrganizer.username} (${q.originalOrganizer.email})`},B(((K=q.organizer)==null?void 0:K.id)===((z=t.organizer)==null?void 0:z.id)?I.$t("view.organizers.events.transferred-to"):I.$t("view.organizers.events.transferred-from")),11,npe)])):ne("",!0)]),m("div",ipe,[m("button",{class:"btn btn-sm btn-primary me-2",title:I.$t("view.organizers.events.transfer.title"),onClick:bt(ge=>A(q),["prevent"])},[...F[3]||(F[3]=[m("i",{class:"bi-arrow-right"},null,-1)])],8,rpe),q.originalOrganizer?(P(),V("button",{key:0,class:"btn btn-sm btn-warning",title:I.$t("view.organizers.events.reset.title"),onClick:bt(ge=>x(q),["prevent"])},[...F[4]||(F[4]=[m("i",{class:"bi-arrow-counterclockwise"},null,-1)])],8,spe)):ne("",!0)])])],2)}),128))])])):ne("",!0),o.value.length>0?(P(),V("div",ope,[m("h6",ape,B(I.$t("view.organizers.events.transferredEvents")),1),m("div",lpe,[(P(!0),V(Fe,null,ct(o.value,q=>(P(),V("div",{key:q.id,class:"list-group-item list-group-item-action transferred-from-event"},[m("div",cpe,[m("h6",upe,B(q.title),1),m("small",null,B(M(Ga)(q.scheduledDatetime)),1)]),m("p",dpe,B(q.description),1),m("div",fpe,[m("div",hpe,[m("div",mpe,[M(Ga)(q.scheduledDatetime)<D()?(P(),V("span",gpe,B(I.$t("view.organizers.events.expired")),1)):(P(),V("span",{key:1,class:Ze(["badge",q.active?"text-bg-success":"text-bg-secondary"])},B(q.active?I.$t("view.organizers.events.active"):I.$t("view.organizers.events.inactive")),3))]),m("div",ppe,[m("span",{class:Ze(["badge",q.lobbyOpen?"text-bg-success":"text-bg-secondary"])},B(q.lobbyOpen?I.$t("view.organizers.events.open"):I.$t("view.organizers.events.closed")),3)]),q.finished?(P(),V("div",vpe,[m("span",bpe,B(I.$t("view.organizers.events.finished")),1)])):ne("",!0),m("div",wpe,[m("span",{class:"badge text-bg-info current-owner-badge",title:`${I.$t("view.organizers.events.currentOwner")}: ${q.organizer.username} (${q.organizer.email})`},B(I.$t("view.organizers.events.transferredTo")),9,ype)])]),m("div",_pe,[m("button",{class:"btn btn-sm btn-warning",title:I.$t("view.organizers.events.reset.title"),onClick:bt(N=>x(q),["prevent"])},[...F[5]||(F[5]=[m("i",{class:"bi-arrow-counterclockwise"},null,-1)])],8,kpe)])])]))),128))])])):ne("",!0)])):(P(),V("div",Epe,B(I.$t("view.organizers.events.noEvents")),1))]))]),m("div",Cpe,[m("button",Tpe,B(I.$t("general.close")),1)])])])]),Ce(hge,{event:a.value,show:l.value,onTransferSuccess:p,onTransferError:R},null,8,["event","show"])],64)}}},Ape=Yt(Spe,[["__scopeId","data-v-145e70db"]]),Ipe=mt`
  mutation createOrganizer($input: CreateOrganizerInput!) {
    createOrganizer(input: $input) {
      id
      username
      email
      publicName
      publicOrganisation
      confirmedEmail
      verified
      createDatetime
    }
  }
`,Ppe={class:"modal-dialog modal-lg",role:"document"},xpe={class:"modal-content"},Ope={class:"modal-header"},Rpe={class:"modal-title"},Vpe={class:"modal-body"},Dpe={class:"mb-3"},Npe={class:"mb-3"},Lpe={class:"mb-3"},Mpe={class:"mb-3"},$pe={class:"mb-3"},Bpe={class:"mb-3"},Fpe={class:"mb-3"},Upe={class:"modal-footer"},zpe=["disabled"],Hpe={key:0,class:"spinner-border spinner-border-sm me-2"},Wpe={__name:"CreateOrganizerModal",emits:["close","created"],setup(n,{emit:t}){const e=t,i=Z(!1),r=Kt({username:"",email:"",password:"",publicName:"",publicOrganisation:"",skipEmailVerification:!0,autoVerify:!0}),o=us({username:{required:Bt},email:{required:Bt},password:{required:Bt},publicName:{required:Bt},publicOrganisation:{required:Bt}},r),{mutate:a}=In(Ipe);async function l(){if(!await o.value.$validate()){Mt(new Pr);return}i.value=!0;try{await a({input:{username:r.username,email:r.email,password:r.password,publicName:r.publicName,publicOrganisation:r.publicOrganisation,confirmedEmail:r.skipEmailVerification,verified:r.autoVerify}}),e("created")}catch(u){Mt(u)}finally{i.value=!1}}return(c,u)=>(P(),V(Fe,null,[m("div",{class:"modal fade show d-block",tabindex:"-1",role:"dialog",onClick:u[11]||(u[11]=bt(d=>c.$emit("close"),["self"]))},[m("div",Ppe,[m("div",xpe,[m("div",Ope,[m("h5",Rpe,B(c.$t("view.organizers.create.title")),1),m("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:u[0]||(u[0]=d=>c.$emit("close"))})]),m("div",Vpe,[m("form",{onSubmit:bt(l,["prevent"])},[m("div",Dpe,[Ce(yn,{label:c.$t("view.register.label.username"),errors:M(o).username.$errors,"has-errors":M(o).username.$errors.length>0,onChange:u[1]||(u[1]=({value:d})=>{r.username=d})},null,8,["label","errors","has-errors"])]),m("div",Npe,[Ce(mI,{label:c.$t("view.register.label.email"),errors:M(o).email.$errors,"has-errors":M(o).email.$errors.length>0,onChange:u[2]||(u[2]=({value:d})=>{r.email=d})},null,8,["label","errors","has-errors"])]),m("div",Lpe,[Ce(yn,{label:c.$t("view.register.label.password"),errors:M(o).password.$errors,"has-errors":M(o).password.$errors.length>0,type:"password",onChange:u[3]||(u[3]=({value:d})=>{r.password=d})},null,8,["label","errors","has-errors"])]),m("div",Mpe,[Ce(yn,{label:c.$t("view.register.label.publicName"),errors:M(o).publicName.$errors,"has-errors":M(o).publicName.$errors.length>0,onChange:u[4]||(u[4]=({value:d})=>{r.publicName=d})},null,8,["label","errors","has-errors"])]),m("div",$pe,[Ce(yn,{label:c.$t("view.register.label.publicOrganisation"),errors:M(o).publicOrganisation.$errors,"has-errors":M(o).publicOrganisation.$errors.length>0,onChange:u[5]||(u[5]=({value:d})=>{r.publicOrganisation=d})},null,8,["label","errors","has-errors"])]),m("div",Bpe,[Ce(Sr,{checked:r.skipEmailVerification,"onUpdate:checked":u[6]||(u[6]=d=>r.skipEmailVerification=d),label:c.$t("view.organizers.create.skipEmailVerification"),onUpdate:u[7]||(u[7]=({value:d})=>{r.skipEmailVerification=d})},null,8,["checked","label"])]),m("div",Fpe,[Ce(Sr,{checked:r.autoVerify,"onUpdate:checked":u[8]||(u[8]=d=>r.autoVerify=d),label:c.$t("view.organizers.create.autoVerify"),onUpdate:u[9]||(u[9]=({value:d})=>{r.autoVerify=d})},null,8,["checked","label"])])],32)]),m("div",Upe,[m("button",{type:"button",class:"btn btn-secondary",onClick:u[10]||(u[10]=d=>c.$emit("close"))},B(c.$t("general.cancel")),1),m("button",{type:"button",class:"btn btn-primary",onClick:l,disabled:i.value},[i.value?(P(),V("span",Hpe)):ne("",!0),fe(" "+B(c.$t("view.organizers.create.submit")),1)],8,zpe)])])])]),u[12]||(u[12]=m("div",{class:"modal-backdrop fade show"},null,-1))],64))}},jpe=Yt(Wpe,[["__scopeId","data-v-944be150"]]);mt`
  query organizerHasEvents($organizerId: ID!) {
    upcomingEvents(organizerId: $organizerId) {
      id
    }
    expiredEvents(organizerId: $organizerId) {
      id
    }
  }
`;mt`
  query organizerHasEventsWithOriginal($organizerId: ID!) {
    upcomingEvents(organizerId: $organizerId) {
      id
    }
    expiredEvents(organizerId: $organizerId) {
      id
    }
    # This is a custom query to check for events where this organizer is the original owner
    # but the event is now assigned to a different organizer
    # Since we don't have a direct GraphQL query for this, we use the all events queries
    # and filter client-side in the component
  }
`;const qpe=mt`
  mutation deleteOrganizer($id: ID!) {
    deleteOrganizer(id: $id)
  }
`,Gpe={class:"mb-3"},Kpe={class:"d-flex justify-content-between align-items-center"},Ype={key:0,class:"flex-grow-1"},Qpe={for:"organizer-filter"},Zpe={key:0,class:"mt-2"},Jpe={class:"input-group"},Xpe=["placeholder"],eve={class:"input-group-text p-0"},tve={key:0,class:"text-success text-uppercase"},nve={key:1,class:"text-danger text-uppercase"},ive={key:0,class:"text-success text-uppercase"},rve={key:1,class:"text-danger text-uppercase"},sve={class:"float-end"},ove=["title","onClick"],ave=["title","onClick"],lve=["title","onClick"],cve=["title","onClick"],uve={__name:"OrganizerManagement",setup(n){const t=nn(),e=le(()=>{var p;return(p=t==null?void 0:t.user)==null?void 0:p.id}),i=le(()=>{var p;return((p=t==null?void 0:t.user)==null?void 0:p.superAdmin)===!0}),r=jo([mi,pr,Ir,_o,ko,cl,dc,fc]),s=[{text:Xe("view.organizers.user"),value:"username",sortable:!0},{text:Xe("view.organizers.createDatetime"),value:"createDatetime",sortable:!0},{text:Xe("view.organizers.organisation"),value:"publicOrganisation",sortable:!0},{text:Xe("view.organizers.email"),value:"email",sortable:!0},{text:Xe("view.organizers.confirmedEmail"),value:"confirmedEmail",sortable:!0},{text:Xe("view.organizers.verified"),value:"verified",sortable:!0},{text:Xe("view.organizers.actions"),value:"id"}],o=Z([]),a=Z(null),l=Z(""),c=Z([]),u=Z(null),d=Z(!1),f=Z(!1),h=le(()=>a.value?a.value:o.value),{onResult:g,refetch:v}=ln(EU,null,{fetchPolicy:"no-cache"});g(({data:p})=>{o.value=((p==null?void 0:p.organizers)??[]).sort((D,R)=>new Date(R.createDatetime)-new Date(D.createDatetime)),_()});async function _(){if(i.value){const{load:p,onResult:D}=Lp(dT,null,{fetchPolicy:"network-only"});p(),D(({data:R})=>{if(R){const S=[...R.allUpcomingEvents||[],...R.allPastEvents||[]];for(const I of o.value){const F=S.some(q=>{var N;return((N=q.organizer)==null?void 0:N.id)===I.id}),H=S.some(q=>{var N,$;return((N=q.originalOrganizer)==null?void 0:N.id)===I.id&&(($=q.organizer)==null?void 0:$.id)!==I.id});(F||H)&&(c.value.includes(I.id)||c.value.push(I.id))}}})}else{const{load:p,onResult:D}=Lp(dT,null,{fetchPolicy:"network-only"});p(),D(({data:R})=>{if(R){const S=[...R.allUpcomingEvents||[],...R.allPastEvents||[]];for(const I of o.value){const F=S.some(q=>{var N;return((N=q.organizer)==null?void 0:N.id)===I.id}),H=S.some(q=>{var N,$;return((N=q.originalOrganizer)==null?void 0:N.id)===I.id&&(($=q.organizer)==null?void 0:$.id)!==I.id});(F||H)&&(c.value.includes(I.id)||c.value.push(I.id))}}})}}function w(p){u.value=p,d.value=!0,setTimeout(()=>{const D=document.getElementById("organizerEventsModal");D?(new Hn(D).show(),D.addEventListener("hidden.bs.modal",()=>{d.value=!1})):console.error("Modal element not found")},100)}function C(){const p=l.value?l.value.toLowerCase():"";a.value=o.value.filter(D=>{if(!D)return!1;const R=D.username?D.username.toLowerCase():"",S=D.email?D.email.toLowerCase():"",I=D.publicOrganisation?D.publicOrganisation.toLowerCase():"";return R.includes(p)||S.includes(p)||I.includes(p)})}function k(){l.value="",a.value=null}function E({id:p},D){const{mutate:R}=In(bU,{variables:{input:{id:p,verified:D}}});R().then(()=>v()).then(()=>{ze(Xe("success.organizer.organizers.updatedSuccessfully"),{type:"success"})}).catch(S=>Mt(S))}function A({id:p}){const D=qs(lo,{message:Xe("view.organizers.confirmDelete")});D.onConfirm(()=>{const{mutate:R}=In(qpe,{variables:{id:p}});R().then(()=>v()).then(()=>{ze(Xe("success.organizer.organizers.deletedSuccessfully"),{type:"success"})}).catch(S=>Mt(S))}),D.reveal()}function x(){f.value=!1,v(),ze(Xe("view.organizers.create.success"),{type:"success"})}return(p,D)=>{const R=si("EasyDataTable");return P(),V(Fe,null,[Ce(Ki,{"meta-title":p.$t("navigation.views.organizerManagement")},{title:$e(()=>[fe(B(p.$t("navigation.views.organizerManagement")),1)]),header:$e(()=>[Ce(qo,{routes:M(r)},null,8,["routes"])]),content:$e(()=>{var S,I,F;return[m("div",null,[m("div",Gpe,[m("div",Kpe,[((S=o.value)==null?void 0:S.length)>0?(P(),V("div",Ype,[m("label",Qpe,B(p.$t("view.organizers.filter.label")),1)])):ne("",!0),m("div",null,[m("button",{class:"btn btn-primary",onClick:D[0]||(D[0]=H=>f.value=!0)},[D[3]||(D[3]=m("i",{class:"bi-plus-circle me-2"},null,-1)),fe(" "+B(p.$t("view.organizers.create.button")),1)])])]),((I=o.value)==null?void 0:I.length)>0?(P(),V("div",Zpe,[m("div",Jpe,[vn(m("input",{id:"organizer-filter","onUpdate:modelValue":D[1]||(D[1]=H=>l.value=H),class:"form-control",placeholder:p.$t("view.organizers.filter.placeholder"),onInput:C},null,40,Xpe),[[Bi,l.value]]),m("div",eve,[m("button",{class:"btn btn-transparent",onClick:bt(k,["prevent"])},B(p.$t("view.organizers.filter.reset")),1)])])])):ne("",!0)]),((F=o.value)==null?void 0:F.length)>0?(P(),Ge(R,{key:0,headers:s,items:h.value,"table-class-name":"data-table","theme-color":"#007bff"},{"item-createDatetime":$e(H=>[fe(B(M(Ga)(H.createDatetime)),1)]),"item-confirmedEmail":$e(H=>[H.confirmedEmail?(P(),V("span",tve,[...D[4]||(D[4]=[m("i",{class:"bi-envelope-open bi--xl"},null,-1)])])):(P(),V("span",nve,[...D[5]||(D[5]=[m("i",{class:"bi-envelope-fill bi--xl"},null,-1)])]))]),"item-verified":$e(H=>[H.verified?(P(),V("span",ive,B(p.$t("view.organizers.verified")),1)):(P(),V("span",rve,[m("strong",null,B(p.$t("view.organizers.denied")),1)]))]),"item-id":$e(H=>[m("div",null,[m("div",sve,[m("button",{class:"btn btn-info d-inline-block mx-1 mb-3",title:p.$t("view.organizers.events.show"),onClick:bt(q=>w(H),["prevent"])},[...D[6]||(D[6]=[m("i",{class:"bi-calendar-event bi--xl"},null,-1)])],8,ove),e.value!=H.id?(P(),V(Fe,{key:0},[H.verified?(P(),V("button",{key:0,class:"btn btn-danger d-inline-block mx-1 mb-3",title:p.$t("view.organizers.deny"),onClick:bt(q=>E(H,!1),["prevent"])},[...D[7]||(D[7]=[m("i",{class:"bi-dash-square bi--xl"},null,-1)])],8,ave)):(P(),V("button",{key:1,class:"btn btn-success d-inline-block mx-1 mb-3",title:p.$t("view.organizers.verify"),onClick:bt(q=>E(H,!0),["prevent"])},[...D[8]||(D[8]=[m("i",{class:"bi-check2-square bi--xl"},null,-1)])],8,lve)),m("button",{class:"btn btn-danger d-inline-block mx-1 mb-3",title:p.$t("view.organizers.delete"),onClick:bt(q=>A(H),["prevent"])},[...D[9]||(D[9]=[m("i",{class:"bi-trash bi--xl"},null,-1)])],8,cve)],64)):ne("",!0)])])]),_:1},8,["items"])):ne("",!0)])]}),_:1},8,["meta-title"]),Ce(Ape,{organizer:u.value,show:d.value},null,8,["organizer","show"]),f.value?(P(),Ge(jpe,{key:0,onClose:D[2]||(D[2]=S=>f.value=!1),onCreated:x})):ne("",!0)],64)}}},dve=Yt(uve,[["__scopeId","data-v-45648aa3"]]),fve=mt`
  query allUpcomingEvents {
    allUpcomingEvents {
      id
      organizer {
        id
        publicName
        username
        email
      }
      createDatetime
      modifiedDatetime
      title
      slug
      description
      styles
      logo
      scheduledDatetime
      lobbyOpen
      active
      async
      allowMagicLink
      publicVoteVisible
      finished
      endDatetime
    }
  }
`,hve=mt`
  query allPastEvents($page: Int, $pageSize: Int) {
    allPastEvents(page: $page, pageSize: $pageSize) {
      id
      organizer {
        id
        publicName
        username
        email
      }
      createDatetime
      modifiedDatetime
      title
      slug
      description
      styles
      logo
      scheduledDatetime
      lobbyOpen
      active
      async
      allowMagicLink
      publicVoteVisible
      finished
      endDatetime
    }
  }
`,mve=mt`
  mutation UpdateEventStatus($input: UpdateEventStatusInput!) {
    updateEventStatus(input: $input)
  }
`,gve=["disabled"],pve={__name:"OrganizerAllEvents",setup(n){const t=nn(),e=jo([mi,pr,Ir,_o,ko,cl,dc,fc]),i=Z(0),r=Z(10),s=Z(!1),o=Z([]),a=Z([]),l=ln(fve,null,{fetchPolicy:"cache-and-network"});l.onResult(({data:h})=>{o.value=(h==null?void 0:h.allUpcomingEvents)??[]});const c=ln(hve,{page:i.value,pageSize:r.value},{fetchPolicy:"cache-and-network"});c.onResult(({data:h})=>{a.value=(h==null?void 0:h.allPastEvents)??[]});function u(){i.value+=1,c.fetchMore({variables:{page:i.value,pageSize:r.value},updateQuery:(h,{fetchMoreResult:g})=>g!=null&&g.allPastEvents?{...h,allPastEvents:[...h.allPastEvents,...g.allPastEvents]}:(s.value=!0,ze(ss.global.tc("view.results.noMoreResults"),{type:"info"}),h)})}async function d({eventId:h,organizerId:g}){const{mutate:v}=In(_U,{variables:{organizerId:g,id:h}});await v(),t.queryOrganizer(),l.refetch(),c.refetch(),ze(Xe("success.organizer.events.deletedSuccessfully"),{type:"success"})}async function f({eventId:h,status:g}){const{mutate:v}=In(mve,{variables:{input:{id:parseInt(h,10),active:g}}});await v(),t.queryOrganizer(),l.refetch(),c.refetch(),ze(Xe("success.organizer.events.updatedSuccessfully"),{type:"success"})}return(h,g)=>(P(),Ge(Ki,{"meta-title":h.$t("navigation.views.organizerAllEvents")},{title:$e(()=>[fe(B(h.$t("navigation.views.organizerAllEvents")),1)]),header:$e(()=>[Ce(qo,{routes:M(e)},null,8,["routes"])]),content:$e(()=>[Ce(yy,{headline:h.$t("view.event.upcoming"),"events-detail":!1,"events-show-delete":!0,"events-show-activate":!0,events:o.value,"show-organizer":!0,onDelete:d,onToggleActive:f},null,8,["headline","events"]),g[1]||(g[1]=m("hr",null,null,-1)),Ce(yy,{headline:h.$t("view.event.latest"),"events-detail":!1,"events-show-delete":!0,"events-show-activate":!0,events:a.value,"show-organizer":!0,onDelete:d,onToggleActive:f},null,8,["headline","events"]),s.value?(P(),Ge(qr,{key:0,type:"info"},{default:$e(()=>[fe(B(h.$t("view.results.noMoreResults")),1)]),_:1})):ne("",!0),m("button",{disabled:s.value,class:"my-5 mx-auto btn btn-secondary py-2 d-flex align-items-center d-print-none",onClick:bt(u,["prevent"])},[g[0]||(g[0]=m("i",{class:"me-3 bi bi-plus-square-fill bi--2xl"},null,-1)),fe(" "+B(h.$t("view.results.showMore")),1)],8,gve)]),_:1},8,["meta-title"]))}},vve={class:"row"},bve={class:"col-12"},wve={class:"text-muted"},yve={class:"alert alert-info"},_ve={key:0,class:"mb-3 text-end"},kve={key:0,class:"row"},Eve={class:"col-12 text-center my-5"},Cve={class:"spinner-border",role:"status"},Tve={class:"visually-hidden"},Sve={key:1,class:"row mt-3"},Ave={class:"col-12"},Ive={class:"card"},Pve={class:"card-header bg-light d-flex justify-content-between align-items-center"},xve=["placeholder"],Ove={class:"ms-2"},Rve=["disabled"],Vve={class:"card-body"},Dve={class:"nav nav-tabs mb-4"},Nve={class:"nav-item"},Lve={class:"nav-item"},Mve={key:0},$ve={class:"row mb-4"},Bve={class:"col-md-6"},Fve={class:"form-check form-switch"},Uve={class:"form-check-label",for:"showModifiedOnly"},zve={class:"col-md-6"},Hve={class:"d-flex"},Wve={class:"me-2"},jve={class:"flex-grow-1"},qve={class:"input-group"},Gve={class:"table-responsive"},Kve={class:"table table-hover"},Yve={style:{width:"25%"}},Qve={style:{width:"30%"}},Zve={style:{width:"30%"}},Jve={style:{width:"15%"}},Xve={class:"text-break"},ebe={class:"d-flex align-items-center"},tbe={key:0,class:"badge bg-primary me-2",title:"Bearbeitet"},nbe={class:"text-break"},ibe={class:"default-value"},rbe=["onUpdate:modelValue"],sbe=["disabled","onClick"],obe={key:0,class:"spinner-border spinner-border-sm me-1",role:"status"},abe={key:1,class:"bi bi-arrow-counterclockwise me-1"},lbe={key:0,class:"alert alert-info text-center mt-3"},cbe={key:1,class:"mt-2 text-muted"},ube={key:0},dbe={key:1,class:"json-structure"},fbe={class:"d-flex mb-3"},hbe={class:"me-2"},mbe={class:"json-container"},gbe={class:"json-display"},pbe={__name:"MessageEditor",setup(n){const t=Z(!1),e=jo([mi,pr,Ir,_o,ko,cl,dc,fc]),i=Z(!0),r=Z(!1),s=Z([]),o=Z({}),a=Z(""),l=Z(!1),c=Z("editor"),u=Z("all"),d=Z(""),f=Z("de"),h=(S,I,F)=>{if(I.length===0)return;let H=S;for(let q=0;q<I.length-1;q++){const N=I[q];(!H[N]||typeof H[N]!="object")&&(H[N]={}),H=H[N]}H[I[I.length-1]]=F},g=async(S=f.value)=>{var I;i.value=!0;try{let F=function($,U=""){Object.keys($).forEach(re=>{const K=U?`${U}.${re}`:re;if(typeof $[re]=="object"&&$[re]!==null)F($[re],K);else{let z=$[re],ge="",Q=!1,ue=q,ve=!0;for(const ce of K.split(".")){if(!ue||typeof ue!="object"||!ue[ce]){ve=!1;break}ue=ue[ce]}ve&&ue!==void 0&&ue!==null&&(ge=ue,Q=!0),N.push({path:K,defaultValue:z,customValue:ge,modified:Q,resetting:!1})}})};o.value={},s.value=[];const H=ad[S]||{};let q={};try{const U=await v().query({query:mt`
          query GetTranslationsByLocale($locale: String!) {
            translationsByLocale(locale: $locale)
          }
        `,variables:{locale:S},fetchPolicy:"network-only"});(I=U.data)!=null&&I.translationsByLocale&&(q=JSON.parse(U.data.translationsByLocale))}catch($){console.error("Fehler beim Laden der benutzerdefinierten Übersetzungen:",$)}o.value={[S]:q};const N=[];F(H),s.value=N}catch(F){console.error("Fehler beim Laden der Übersetzungen:",F),ze.error("Fehler beim Laden der Übersetzungen")}finally{i.value=!1}},{resolveClient:v}=pl(),_=mt`
  mutation SaveTranslations($translations: [SaveTranslationInput!]!) {
    saveTranslations(translations: $translations)
  }
`,w=async()=>{var S;r.value=!0;try{const I=[];if(s.value.forEach(q=>{q.customValue&&I.push({locale:f.value,key:q.path,value:q.customValue})}),I.length===0){ze.info("Keine Änderungen zum Speichern vorhanden"),r.value=!1;return}if((S=(await v().mutate({mutation:_,variables:{translations:I}})).data)!=null&&S.saveTranslations){const q=f.value,N=o.value[q]||{};I.forEach($=>{const U=$.key.split(".");h(N,U,$.value)}),o.value={...o.value,[q]:N},s.value.forEach($=>{$.customValue&&($.modified=!0)}),ze.success(`${I.length} Änderungen erfolgreich gespeichert`);try{await uy(),ze.info("Übersetzungen wurden in der Anwendung aktualisiert"),await g(f.value)}catch($){console.error("Fehler beim Neuladen der Übersetzungen:",$),ze.warning("Übersetzungen wurden gespeichert, aber die Anwendung muss neu geladen werden"),setTimeout(()=>{window.location.reload()},2e3)}}else throw new Error("Server-Antwort zeigt keinen Erfolg an")}catch(I){console.error("Fehler beim Speichern der Übersetzungen:",I),ze.error(`Fehler beim Speichern: ${I.message||"Unbekannter Fehler"}`)}finally{r.value=!1}},C=mt`
  mutation DeleteTranslation($locale: String!, $key: String!) {
    deleteTranslation(locale: $locale, key: $key)
  }
`,k=async S=>{var I;S.resetting=!0;try{if(S.modified)if((I=(await v().mutate({mutation:C,variables:{locale:f.value,key:S.path}})).data)!=null&&I.deleteTranslation){S.customValue="",S.modified=!1;const q=f.value,N=o.value[q]||{},$=S.path.split(".");let U=N,re=null,K=null;for(let z=0;z<$.length-1&&U[$[z]];z++)re=U,U=U[$[z]],K=$[z];U&&$.length>0&&delete U[$[$.length-1]],ze.success("Übersetzung zurückgesetzt"),await uy()}else throw new Error("Server-Antwort zeigt keinen Erfolg an");else S.customValue="",S.modified=!1}catch(F){console.error("Fehler beim Zurücksetzen der Übersetzung:",F),ze.error(`Fehler beim Zurücksetzen: ${F.message||"Unbekannter Fehler"}`),await g(f.value)}finally{S.resetting=!1}},E=()=>{const S=JSON.stringify(o.value,null,2),I=new Blob([S],{type:"application/json"}),F=URL.createObjectURL(I),H=document.createElement("a");H.href=F,H.download="messages.local.json",document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(F),ze.success("Translation file exported")},A=le(()=>{const S=a.value?a.value.toLowerCase().trim():"",I=l.value;return!S&&!I?s.value:s.value.filter(F=>{let H=!0;S&&(H=F.path.toLowerCase().includes(S)||F.defaultValue&&typeof F.defaultValue=="string"&&F.defaultValue.toLowerCase().includes(S)||F.customValue&&typeof F.customValue=="string"&&F.customValue.toLowerCase().includes(S));const q=!I||F.modified;return H&&q})}),x=le(()=>s.value.some(S=>S.customValue)),p=(S,I,F)=>{if(I==="all"&&!F)return S;const H=JSON.parse(JSON.stringify(S));return I!=="all"?{[I]:H[I]}:F&&!JSON.stringify(H).toLowerCase().includes(F.toLowerCase())?{}:H},D=S=>JSON.stringify(S,null,2),R=le(()=>{const S=p(ad,u.value,d.value);return D(S)});return gt(f,S=>{g(S)}),Jt(()=>{g()}),(S,I)=>(P(),Ge(Ki,{"meta-title":S.$t("navigation.views.organizerMessageEditor")},{title:$e(()=>[fe(B(S.$t("navigation.views.organizerMessageEditor")),1)]),header:$e(()=>[Ce(qo,{routes:M(e)},null,8,["routes"])]),content:$e(()=>[m("div",vve,[m("div",bve,[m("p",wve,B(S.$t("view.messageEditor.description")),1),m("div",yve,[I[8]||(I[8]=m("i",{class:"bi bi-info-circle me-2"},null,-1)),fe(" "+B(S.$t("view.messageEditor.infoText")),1)]),t.value?(P(),V("div",_ve,[m("button",{class:"btn btn-sm btn-outline-secondary",onClick:E},[...I[9]||(I[9]=[m("i",{class:"bi bi-download me-1"},null,-1),fe(" Export messages.local.json ",-1)])])])):ne("",!0)])]),i.value?(P(),V("div",kve,[m("div",Eve,[m("div",Cve,[m("span",Tve,B(S.$t("general.loading")),1)])])])):(P(),V("div",Sve,[m("div",Ave,[m("div",Ive,[m("div",Pve,[m("div",null,[vn(m("input",{"onUpdate:modelValue":I[0]||(I[0]=F=>a.value=F),class:"form-control",type:"text",placeholder:S.$t("view.messageEditor.search")},null,8,xve),[[Bi,a.value]])]),m("div",Ove,[m("button",{class:"btn btn-primary",disabled:!x.value||r.value,onClick:w},[I[10]||(I[10]=m("i",{class:"bi bi-save me-1"},null,-1)),fe(" "+B(S.$t("view.messageEditor.saveChanges")),1)],8,Rve)])]),m("div",Vve,[m("ul",Dve,[m("li",Nve,[m("button",{class:Ze(["nav-link",{active:c.value==="editor"}]),onClick:I[1]||(I[1]=F=>c.value="editor")}," Editor ",2)]),m("li",Lve,[m("button",{class:Ze(["nav-link",{active:c.value==="structure"}]),onClick:I[2]||(I[2]=F=>c.value="structure")}," JSON Struktur ",2)])]),c.value==="editor"?(P(),V("div",Mve,[m("div",$ve,[m("div",Bve,[m("div",Fve,[vn(m("input",{id:"showModifiedOnly","onUpdate:modelValue":I[3]||(I[3]=F=>l.value=F),class:"form-check-input",type:"checkbox"},null,512),[[gd,l.value]]),m("label",Uve,B(S.$t("view.messageEditor.showOnlyModified")),1)])]),m("div",zve,[m("div",Hve,[m("div",Wve,[vn(m("select",{"onUpdate:modelValue":I[4]||(I[4]=F=>f.value=F),class:"form-select form-select-sm"},[...I[11]||(I[11]=[m("option",{value:"de"},"Deutsch",-1),m("option",{value:"en"},"Englisch",-1)])],512),[[ou,f.value]])]),m("div",jve,[m("div",qve,[I[12]||(I[12]=m("span",{class:"input-group-text"},[m("i",{class:"bi bi-search"})],-1)),vn(m("input",{"onUpdate:modelValue":I[5]||(I[5]=F=>a.value=F),type:"text",class:"form-control",placeholder:"Suchen..."},null,512),[[Bi,a.value]])])])])])]),m("div",Gve,[m("table",Kve,[m("thead",null,[m("tr",null,[m("th",Yve,B(S.$t("view.messageEditor.table.path")),1),m("th",Qve,B(S.$t("view.messageEditor.table.defaultValue")),1),m("th",Zve,B(S.$t("view.messageEditor.table.customValue")),1),m("th",Jve,B(S.$t("view.messageEditor.table.actions")),1)])]),m("tbody",null,[(P(!0),V(Fe,null,ct(A.value,(F,H)=>(P(),V("tr",{key:H,class:Ze({"table-info":F.modified})},[m("td",Xve,[m("div",ebe,[F.modified?(P(),V("span",tbe,[...I[13]||(I[13]=[m("i",{class:"bi bi-pencil-fill"},null,-1)])])):ne("",!0),fe(" "+B(F.path),1)])]),m("td",nbe,[m("div",ibe,B(F.defaultValue),1)]),m("td",null,[vn(m("textarea",{"onUpdate:modelValue":q=>F.customValue=q,class:"form-control",rows:"2",placeholder:"Übersetzung bearbeiten..."},null,8,rbe),[[Bi,F.customValue]])]),m("td",null,[m("button",{class:"btn btn-sm btn-outline-secondary mb-2",disabled:!F.customValue||F.resetting,title:"Auf Standardwert zurücksetzen",onClick:q=>k(F)},[F.resetting?(P(),V("span",obe)):(P(),V("i",abe)),fe(" "+B(S.$t("view.messageEditor.reset")),1)],8,sbe)])],2))),128))])])]),A.value.length===0?(P(),V("div",lbe,[...I[14]||(I[14]=[m("i",{class:"bi bi-info-circle me-2"},null,-1),fe(" Keine Einträge gefunden. Bitte passen Sie Ihre Suchkriterien an. ",-1)])])):ne("",!0),A.value.length>0?(P(),V("div",cbe,[fe(B(A.value.length)+" von "+B(s.value.length)+" Einträgen angezeigt ",1),s.value.filter(F=>F.modified).length>0?(P(),V("span",ube," ("+B(s.value.filter(F=>F.modified).length)+" bearbeitet) ",1)):ne("",!0)])):ne("",!0)])):ne("",!0),c.value==="structure"?(P(),V("div",dbe,[m("div",fbe,[m("div",hbe,[vn(m("select",{"onUpdate:modelValue":I[6]||(I[6]=F=>u.value=F),class:"form-select"},[...I[15]||(I[15]=[m("option",{value:"all"},"Alle Sprachen",-1),m("option",{value:"de"},"Deutsch",-1),m("option",{value:"en"},"Englisch",-1)])],512),[[ou,u.value]])]),m("div",null,[vn(m("input",{"onUpdate:modelValue":I[7]||(I[7]=F=>d.value=F),class:"form-control",type:"text",placeholder:"JSON durchsuchen..."},null,512),[[Bi,d.value]])])]),m("div",mbe,[m("pre",gbe,B(R.value),1)])])):ne("",!0)])])])]))]),_:1},8,["meta-title"]))}},vbe=Yt(pbe,[["__scopeId","data-v-e97df4e0"]]),bbe={class:"media-manager"},wbe={class:"card"},ybe={class:"card-header d-flex justify-content-between align-items-center"},_be={class:"card-body"},kbe={class:"mb-4"},Ebe={class:"input-group mb-3"},Cbe=["disabled"],Tbe={key:0,class:"spinner-border spinner-border-sm me-1"},Sbe={key:0,class:"progress"},Abe=["aria-valuenow"],Ibe={key:1,class:"mt-2"},Pbe={class:"alert alert-info"},xbe={key:2,class:"alert alert-danger"},Obe={key:0,class:"text-center py-3"},Rbe={key:1,class:"alert alert-info"},Vbe={key:2,class:"row g-2 media-grid"},Dbe=["onClick"],Nbe=["src","alt"],Lbe={class:"card-body p-2"},Mbe={class:"card-text small text-truncate"},$be={class:"card-text small text-muted"},Bbe={class:"d-flex justify-content-between mt-3"},Fbe=["disabled"],Ube=["disabled"],zbe={__name:"MediaManager",emits:["select","close"],setup(n,{emit:t}){const e=t,i=Z([]),r=Z(null),s=Z(null),o=Z(!1),a=Z(!1),l=Z(0),c=Z(""),d="https://digitalwahl.org/api/media/upload",{resolveClient:f}=pl();Jt(async()=>{await w()});const h=mt`
  query GetAllMedia {
    mediaItems {
      id
      filename
      url
      mimeType
      fileSize
      uploadedAt
    }
  }
`,g=mt`
  mutation DeleteMedia($id: ID!) {
    deleteMedia(id: $id)
  }
`,v=p=>{const D=p.target.files;D.length>0&&(r.value=D[0],c.value="")},_=async()=>{if(!r.value){c.value="Bitte wählen Sie eine Datei aus.";return}if(!r.value.type.startsWith("image/")){c.value="Nur Bilddateien sind erlaubt.";return}a.value=!0,l.value=0,c.value="";try{const p=new FormData;p.append("file",r.value);const D={onUploadProgress:F=>{const H=Math.round(F.loaded*100/F.total);l.value=H},headers:{Authorization:`Bearer ${localStorage.getItem("apollo-token")}`,"Content-Type":"multipart/form-data"}},R=await fetch(d,{method:"POST",body:p,headers:{Authorization:`Bearer ${localStorage.getItem("apollo-token")}`}});if(!R.ok){const F=await R.json();throw new Error(F.message||"Upload fehlgeschlagen")}const S=await R.json(),I={id:S.id,filename:S.filename,url:S.url,mimeType:S.mimeType,fileSize:S.fileSize,uploadedAt:S.uploadedAt};i.value=[I,...i.value],s.value=I,r.value=null,a.value=!1,ze.success("Datei erfolgreich hochgeladen")}catch(p){console.error("Failed to upload media:",p),c.value="Fehler beim Hochladen: "+(p.message||"Unbekannter Fehler"),a.value=!1}},w=async()=>{o.value=!0;try{const D=await f().query({query:h,fetchPolicy:"network-only"});D.data&&D.data.mediaItems?i.value=D.data.mediaItems:i.value=[]}catch(p){console.error("Failed to load media:",p),ze.error("Fehler beim Laden der Medien"),i.value=[]}finally{o.value=!1}},C=p=>{s.value=p},k=()=>{s.value&&(e("select",s.value),e("close"))},E=async()=>{if(s.value&&confirm(`Möchten Sie wirklich "${s.value.filename}" löschen?`))try{o.value=!0,(await f().mutate({mutation:g,variables:{id:s.value.id}})).data.deleteMedia?(i.value=i.value.filter(R=>R.id!==s.value.id),s.value=null,ze.success("Medium erfolgreich gelöscht")):ze.error("Medium konnte nicht gelöscht werden")}catch(p){console.error("Failed to delete media:",p),ze.error("Fehler beim Löschen des Mediums")}finally{o.value=!1}},A=p=>p<1024?p+" B":p<1024*1024?(p/1024).toFixed(1)+" KB":(p/(1024*1024)).toFixed(1)+" MB",x=p=>new Date(p).toLocaleDateString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit"});return(p,D)=>(P(),V("div",bbe,[m("div",wbe,[m("div",ybe,[D[2]||(D[2]=m("h5",{class:"mb-0"},"Medienverwaltung",-1)),m("button",{type:"button",class:"btn btn-sm btn-outline-secondary",onClick:D[0]||(D[0]=R=>p.$emit("close"))},[...D[1]||(D[1]=[m("i",{class:"bi bi-x-lg"},null,-1)])])]),m("div",_be,[m("div",kbe,[D[5]||(D[5]=m("h6",null,"Neues Bild hochladen",-1)),m("div",Ebe,[m("input",{id:"mediaUpload",type:"file",class:"form-control",accept:"image/*",onChange:v},null,32),m("button",{class:"btn btn-primary",type:"button",disabled:!r.value||a.value,onClick:_},[a.value?(P(),V("span",Tbe)):ne("",!0),D[3]||(D[3]=fe(" Hochladen ",-1))],8,Cbe)]),l.value>0&&l.value<100?(P(),V("div",Sbe,[m("div",{class:"progress-bar",role:"progressbar",style:Di({width:l.value+"%"}),"aria-valuenow":l.value,"aria-valuemin":"0","aria-valuemax":"100"},B(l.value)+"% ",13,Abe)])):ne("",!0),r.value?(P(),V("div",Ibe,[m("div",Pbe,[D[4]||(D[4]=m("strong",null,"Ausgewählte Datei:",-1)),fe(" "+B(r.value.name)+" ("+B(A(r.value.size))+") ",1)])])):ne("",!0),c.value?(P(),V("div",xbe,B(c.value),1)):ne("",!0)]),m("div",null,[D[8]||(D[8]=m("h6",null,"Medienbibliothek",-1)),o.value?(P(),V("div",Obe,[...D[6]||(D[6]=[m("div",{class:"spinner-border text-primary",role:"status"},[m("span",{class:"visually-hidden"},"Wird geladen...")],-1)])])):i.value.length===0?(P(),V("div",Rbe," Noch keine Medien hochgeladen. Laden Sie oben Ihr erstes Bild hoch. ")):(P(),V("div",Vbe,[(P(!0),V(Fe,null,ct(i.value,R=>{var S;return P(),V("div",{key:R.id,class:"col-md-4 col-lg-3",onClick:I=>C(R)},[m("div",{class:Ze(["card h-100 media-item",{selected:((S=s.value)==null?void 0:S.id)===R.id}])},[m("img",{src:R.url,class:"card-img-top media-thumbnail",alt:R.filename},null,8,Nbe),m("div",Lbe,[m("p",Mbe,B(R.filename),1),m("p",$be,B(x(R.uploadedAt)),1)])],2)],8,Dbe)}),128))])),m("div",Bbe,[m("button",{class:"btn btn-sm btn-outline-danger",disabled:!s.value,onClick:E},[...D[7]||(D[7]=[m("i",{class:"bi bi-trash"},null,-1),fe(" Löschen ",-1)])],8,Fbe),m("button",{class:"btn btn-primary",disabled:!s.value,onClick:k}," Auswählen ",8,Ube)])])])])]))}},RI=Yt(zbe,[["__scopeId","data-v-44c6a67d"]]),Hbe={name:"ContentTypeSelector",props:{modelValue:{type:String,required:!0}},methods:{selectType(n){this.$emit("update:modelValue",n),this.$emit("change",n)}}},Wbe={class:"content-type-selector"},jbe={class:"btn-group w-100"},qbe={class:"form-text text-muted mt-1"};function Gbe(n,t,e,i,r,s){return P(),V("div",Wbe,[t[6]||(t[6]=m("label",{class:"form-label"},"Inhaltstyp",-1)),m("div",jbe,[m("button",{type:"button",class:Ze(["btn",e.modelValue==="standard"?"btn-primary":"btn-outline-primary"]),onClick:t[0]||(t[0]=o=>s.selectType("standard"))},[...t[3]||(t[3]=[m("i",{class:"bi bi-file-text me-1"},null,-1),fe(" Standard ",-1)])],2),m("button",{type:"button",class:Ze(["btn",e.modelValue==="multi-column"?"btn-primary":"btn-outline-primary"]),onClick:t[1]||(t[1]=o=>s.selectType("multi-column"))},[...t[4]||(t[4]=[m("i",{class:"bi bi-columns-gap me-1"},null,-1),fe(" Mehrspaltig ",-1)])],2),m("button",{type:"button",class:Ze(["btn",e.modelValue==="accordion"?"btn-primary":"btn-outline-primary"]),onClick:t[2]||(t[2]=o=>s.selectType("accordion"))},[...t[5]||(t[5]=[m("i",{class:"bi bi-list-ul me-1"},null,-1),fe(" Akkordeon ",-1)])],2)]),m("small",qbe,[e.modelValue==="standard"?(P(),V(Fe,{key:0},[fe(" Standard-Inhalt mit freiem HTML-Text für einfache Seiten. ")],64)):e.modelValue==="multi-column"?(P(),V(Fe,{key:1},[fe(" Inhalt wird in 2 oder 3 Spalten nebeneinander angezeigt, auf mobilen Geräten untereinander. ")],64)):e.modelValue==="accordion"?(P(),V(Fe,{key:2},[fe(" Inhalt wird als ausklappbare Akkordeon-Elemente dargestellt, ideal für FAQs oder lange Texte. ")],64)):ne("",!0)])])}const Kbe=Yt(Hbe,[["render",Gbe]]);var Ybe=typeof global=="object"&&global&&global.Object===Object&&global,Qbe=typeof self=="object"&&self&&self.Object===Object&&self,C6=Ybe||Qbe||Function("return this")(),Ty=C6.Symbol,T6=Object.prototype,Zbe=T6.hasOwnProperty,Jbe=T6.toString,cg=Ty?Ty.toStringTag:void 0;function Xbe(n){var t=Zbe.call(n,cg),e=n[cg];try{n[cg]=void 0;var i=!0}catch{}var r=Jbe.call(n);return i&&(t?n[cg]=e:delete n[cg]),r}var ewe=Object.prototype,twe=ewe.toString;function nwe(n){return twe.call(n)}var iwe="[object Null]",rwe="[object Undefined]",GV=Ty?Ty.toStringTag:void 0;function swe(n){return n==null?n===void 0?rwe:iwe:GV&&GV in Object(n)?Xbe(n):nwe(n)}function owe(n){return n!=null&&typeof n=="object"}var awe="[object Symbol]";function lwe(n){return typeof n=="symbol"||owe(n)&&swe(n)==awe}var cwe=/\s/;function uwe(n){for(var t=n.length;t--&&cwe.test(n.charAt(t)););return t}var dwe=/^\s+/;function fwe(n){return n&&n.slice(0,uwe(n)+1).replace(dwe,"")}function wT(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}var KV=NaN,hwe=/^[-+]0x[0-9a-f]+$/i,mwe=/^0b[01]+$/i,gwe=/^0o[0-7]+$/i,pwe=parseInt;function YV(n){if(typeof n=="number")return n;if(lwe(n))return KV;if(wT(n)){var t=typeof n.valueOf=="function"?n.valueOf():n;n=wT(t)?t+"":t}if(typeof n!="string")return n===0?n:+n;n=fwe(n);var e=mwe.test(n);return e||gwe.test(n)?pwe(n.slice(2),e?2:8):hwe.test(n)?KV:+n}var Dk=function(){return C6.Date.now()},vwe="Expected a function",bwe=Math.max,wwe=Math.min;function ywe(n,t,e){var i,r,s,o,a,l,c=0,u=!1,d=!1,f=!0;if(typeof n!="function")throw new TypeError(vwe);t=YV(t)||0,wT(e)&&(u=!0,d="maxWait"in e,s=d?bwe(YV(e.maxWait)||0,t):s,f="trailing"in e?!!e.trailing:f);function h(x){var p=i,D=r;return i=r=void 0,c=x,o=n.apply(D,p),o}function g(x){return c=x,a=setTimeout(w,t),u?h(x):o}function v(x){var p=x-l,D=x-c,R=t-p;return d?wwe(R,s-D):R}function _(x){var p=x-l,D=x-c;return l===void 0||p>=t||p<0||d&&D>=s}function w(){var x=Dk();if(_(x))return C(x);a=setTimeout(w,v(x))}function C(x){return a=void 0,f&&i?h(x):(i=r=void 0,o)}function k(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function E(){return a===void 0?o:C(Dk())}function A(){var x=Dk(),p=_(x);if(i=arguments,r=this,l=x,p){if(a===void 0)return g(l);if(d)return clearTimeout(a),a=setTimeout(w,t),h(l)}return a===void 0&&(a=setTimeout(w,t)),o}return A.cancel=k,A.flush=E,A}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */new Array(256).fill("").map((n,t)=>("0"+t.toString(16)).slice(-2));/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function _we(n,t){const e=n.extraPlugins||[];return{...n,extraPlugins:[...e,...t.filter(i=>!e.includes(i))]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function S6(n){return!!n&&/^\d+\.\d+\.\d+/.test(n)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function A6(n){return n?["nightly","alpha","internal","nightly-","staging"].some(t=>n.includes(t)):!1}function kwe(n){return S6(n)||A6(n)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Ewe(n){if(!S6(n))throw new Error(`Invalid semantic version: ${n||"<blank>"}.`);const[t,e,i]=n.split(".");return{major:Number.parseInt(t,10),minor:Number.parseInt(e,10),patch:Number.parseInt(i,10)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Cwe(n){if(A6(n))return 3;const{major:t}=Ewe(n);switch(!0){case t>=44:return 3;case t>=38:return 2;default:return 1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Twe(){const{CKEDITOR_VERSION:n,CKEDITOR:t}=window;return kwe(n)?{source:t?"cdn":"npm",version:n}:null}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Swe(){const n=Twe();return n?Cwe(n.version):null}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function I6(n,t){switch(t||(t=Swe()||void 0),t){case 1:case 2:return n===void 0;case 3:return n==="GPL";default:return!1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Awe(n,t){return function(i){I6(i.config.get("licenseKey"))||i.on("collectUsageData",(r,{setUsageData:s})=>{s(`integration.${n}`,t)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */const Iwe=Awe("vue",{version:"7.3.0",frameworkVersion:wv});/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */function Pwe(n){return I6(n.licenseKey)?n:_we(n,[Iwe])}const Nk="Lock from Vue integration (@ckeditor/ckeditor5-vue)",xwe=300,VI=Cn({name:"CKEditor",__name:"ckeditor",props:KE({editor:{},config:{default:()=>({})},tagName:{default:"div"},disabled:{type:Boolean,default:!1},disableTwoWayDataBinding:{type:Boolean,default:!1}},{modelValue:{type:String,default:""},modelModifiers:{}}),emits:KE(["ready","destroy","blur","focus","input","update:modelValue"],["update:modelValue"]),setup(n,{expose:t,emit:e}){const i=q5(n,"modelValue"),r=n,s=e,o=Z(),a=Z(),l=Z();t({instance:a,lastEditorData:l}),gt(i,d=>{a.value&&d!==l.value&&a.value.data.set(d)}),gt(()=>r.disabled,d=>{d?a.value.enableReadOnlyMode(Nk):a.value.disableReadOnlyMode(Nk)});function c(){const d=window.CKEDITOR_VERSION;if(!d)return console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.');const[f]=d.split(".").map(Number);f>=42||d.startsWith("0.0.0")||console.warn("The <CKEditor> component requires using CKEditor 5 in version 42+ or nightly build.")}function u(d){const f=ywe(h=>{if(r.disableTwoWayDataBinding)return;const g=l.value=d.data.get();s("update:modelValue",g,h,d),s("input",g,h,d)},xwe,{leading:!0});d.model.document.on("change:data",f),d.editing.view.document.on("focus",h=>{s("focus",h,d)}),d.editing.view.document.on("blur",h=>{s("blur",h,d)})}return c(),Jt(()=>{const d=Pwe(Object.assign({},r.config));i.value&&(d.initialData=i.value),r.editor.create(o.value,d).then(f=>{a.value=bm(f),u(f),i.value!==d.initialData&&f.data.set(i.value),r.disabled&&f.enableReadOnlyMode(Nk),s("ready",f)}).catch(f=>{console.error(f)})}),wa(()=>{a.value&&(a.value.destroy(),a.value=void 0),s("destroy")}),(d,f)=>(P(),Ge(Xl(d.tagName),{ref_key:"element",ref:o},null,512))}});/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 *//* istanbul ignore if -- @preserve */if(!wv.startsWith("3."))throw new Error("The CKEditor plugin works only with Vue 3+. For more information, please refer to https://ckeditor.com/docs/ckeditor5/latest/builds/guides/integration/frameworks/vuejs-v3.html");const Owe={name:"MultiColumnEditor",components:{ckeditor:VI,MediaManager:RI},props:{value:{type:Array,default:()=>[]},initialColumnCount:{type:Number,default:2,validator:n=>[2,3,4].includes(n)},editorClass:{type:Function,required:!0},editorConfig:{type:Object,required:!0}},data(){return{columnCount:this.initialColumnCount,columns:[],editorInstances:[],showMediaManager:!1,currentColumnIndex:null}},watch:{value:{handler(n,t){const e=n&&Array.isArray(n)?n.length:0,i=t&&Array.isArray(t)?t.length:-1;(t===void 0||e!==i)&&n&&Array.isArray(n)&&this.initFromValue()},immediate:!0}},mounted(){if(!this.value||!this.value.length){this.columns=[];for(let n=0;n<this.columnCount;n++)this.columns.push({content:""});this.$emit("input",[...this.columns]),this.$emit("update:modelValue",[...this.columns]),this.$emit("change",{columnCount:this.columnCount,columns:[...this.columns]})}},methods:{insertMedia(n){try{if(this.currentColumnIndex===null)return;const t=this.editorInstances[this.currentColumnIndex];if(!t){console.error("No editor instance found for column",this.currentColumnIndex);return}const e=n.url,i=n.filename||"Bild";t.execute("insertImage",{source:{src:e,alt:i}}),typeof t.getData=="function"&&this.updateColumnDirectly(this.currentColumnIndex,t.getData()),this.showMediaManager=!1}catch(t){console.error("Fehler beim Einfügen des Bildes:",t)}},onEditorReady(n,t){var e;this.editorInstances||(this.editorInstances=[]),this.editorInstances[t]=n,(e=this.columns[t])!=null&&e.content&&n.setData(this.columns[t].content)},initFromValue(){if(this.value&&Array.isArray(this.value)){if(this.columns=this.value.map(n=>({content:n.content||""})),this.columns.length<2)for(let n=this.columns.length;n<2;n++)this.columns.push({content:""});this.columnCount=Math.min(Math.max(this.columns.length,2),4)}else{console.warn("MultiColumnEditor: Invalid value provided:",this.value),this.columns=[];for(let n=0;n<this.columnCount;n++)this.columns.push({content:""})}},updateColumnDirectly(n,t){this.columns&&n>=0&&n<this.columns.length&&(this.columns[n].content=t||"",this.$emit("input",[...this.columns]),this.$emit("update:modelValue",[...this.columns]),this.$emit("change",{columnCount:this.columnCount,columns:[...this.columns]}))},async setColumnCount(n){if([2,3,4].includes(n)&&this.columnCount!==n){if(this.columnCount=n,this.columns.length<n)for(let t=this.columns.length;t<n;t++)this.columns.push({content:""});else this.columns.length>n&&(this.columns=this.columns.slice(0,n));this.$emit("input",[...this.columns]),this.$emit("update:modelValue",[...this.columns]),this.$emit("change",{columnCount:n,columns:[...this.columns]})}},async addColumn(){this.columns.length>=4||(this.columns.push({content:""}),this.columnCount=this.columns.length,this.$emit("input",[...this.columns]),this.$emit("update:modelValue",[...this.columns]),this.$emit("change",{columnCount:this.columnCount,columns:[...this.columns]}))},async removeColumn(n){this.columns.length<=2||(this.columns.splice(n,1),this.columnCount=this.columns.length,this.$emit("input",[...this.columns]),this.$emit("update:modelValue",[...this.columns]),this.$emit("change",{columnCount:this.columnCount,columns:[...this.columns]}))},getColumnClass(){switch(this.columnCount){case 4:return"col-md-3";case 3:return"col-md-4";case 2:default:return"col-md-6"}}}},Rwe={class:"multi-column-editor"},Vwe={class:"mb-3"},Dwe={class:"btn-group w-100"},Nwe={class:"row"},Lwe={class:"card mb-3"},Mwe={class:"card-header bg-light d-flex justify-content-between align-items-center"},$we={class:"mb-0"},Bwe=["onClick"],Fwe={class:"card-body"},Uwe=["id"],zwe={class:"d-flex justify-content-end gap-2 mb-2"},Hwe=["onClick"],Wwe={class:"editor-container_classic-editor editor-container_include-style"},jwe={class:"editor-container__editor"},qwe={key:0,class:"mt-2 mb-4"},Gwe={key:1,class:"media-manager-modal"},Kwe={class:"modal media-manager-dialog d-block",tabindex:"-1"},Ywe={class:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable"},Qwe={class:"modal-content"};function Zwe(n,t,e,i,r,s){const o=si("ckeditor"),a=si("MediaManager");return P(),V("div",Rwe,[m("div",Vwe,[t[5]||(t[5]=m("label",{class:"form-label"},"Anzahl der Spalten",-1)),m("div",Dwe,[m("button",{type:"button",class:Ze(["btn",r.columnCount===2?"btn-primary":"btn-outline-primary"]),onClick:t[0]||(t[0]=l=>s.setColumnCount(2))}," 2 Spalten ",2),m("button",{type:"button",class:Ze(["btn",r.columnCount===3?"btn-primary":"btn-outline-primary"]),onClick:t[1]||(t[1]=l=>s.setColumnCount(3))}," 3 Spalten ",2),m("button",{type:"button",class:Ze(["btn",r.columnCount===4?"btn-primary":"btn-outline-primary"]),onClick:t[2]||(t[2]=l=>s.setColumnCount(4))}," 4 Spalten ",2)])]),m("div",Nwe,[(P(!0),V(Fe,null,ct(r.columns,(l,c)=>(P(),V("div",{key:`column-${r.columnCount}-${c}`,class:Ze(s.getColumnClass())},[m("div",Lwe,[m("div",Mwe,[m("h6",$we,"Spalte "+B(c+1),1),m("div",null,[r.columns.length>2?(P(),V("button",{key:0,type:"button",class:"btn btn-sm btn-outline-danger",title:"Spalte entfernen",onClick:u=>s.removeColumn(c)},[...t[6]||(t[6]=[m("i",{class:"bi bi-trash"},null,-1)])],8,Bwe)):ne("",!0)])]),m("div",Fwe,[m("div",{id:`editor-container-${c}`,class:"editor-container"},[m("div",zwe,[m("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:u=>{r.showMediaManager=!0,r.currentColumnIndex=c}},[...t[7]||(t[7]=[m("i",{class:"bi bi-image"},null,-1),fe(" Medienverwaltung ",-1)])],8,Hwe)]),m("div",Wwe,[m("div",jwe,[Ce(o,{"model-value":l.content,editor:e.editorClass,config:e.editorConfig,"onUpdate:modelValue":u=>s.updateColumnDirectly(c,u),onReady:u=>s.onEditorReady(u,c)},null,8,["model-value","editor","config","onUpdate:modelValue","onReady"])])])],8,Uwe)])])],2))),128))]),r.columns.length<4?(P(),V("div",qwe,[m("button",{type:"button",class:"btn btn-outline-success",onClick:t[3]||(t[3]=(...l)=>s.addColumn&&s.addColumn(...l))},[...t[8]||(t[8]=[m("i",{class:"bi bi-plus-circle me-1"},null,-1),fe(" Spalte hinzufügen ",-1)])])])):ne("",!0),r.showMediaManager?(P(),V("div",Gwe,[t[9]||(t[9]=m("div",{class:"modal-backdrop show"},null,-1)),m("div",Kwe,[m("div",Ywe,[m("div",Qwe,[Ce(a,{onSelect:s.insertMedia,onClose:t[4]||(t[4]=l=>r.showMediaManager=!1)},null,8,["onSelect"])])])])])):ne("",!0)])}const Jwe=Yt(Owe,[["render",Zwe],["__scopeId","data-v-0f6e6e2a"]]),Xwe={name:"AccordionEditor",components:{MediaManager:RI,ckeditor:VI},props:{value:{type:Array,default:()=>[]},editorClass:{type:Function,required:!0},editorConfig:{type:Object,required:!0}},data(){return{items:[],editors:[],showMediaManager:!1,currentItemIndex:null}},watch:{value:{handler(n){n&&Array.isArray(n)&&n.length>0&&this.initFromValue()},immediate:!0}},mounted(){(!this.value||!this.value.length)&&this.items.push({title:"",content:""})},methods:{insertMedia(n){try{if(this.currentItemIndex===null||!this.editors[this.currentItemIndex]){console.error("No editor instance found for item",this.currentItemIndex);return}const t=this.editors[this.currentItemIndex],e=n.url,i=n.filename||"Bild";t.execute("insertImage",{source:{src:e,alt:i}}),typeof t.getData=="function"&&this.updateItemContent(this.currentItemIndex,t.getData()),this.showMediaManager=!1}catch(t){console.error("Fehler beim Einfügen des Bildes:",t)}},initFromValue(){this.value&&Array.isArray(this.value)&&(this.items=this.value.map(n=>({title:n.title||"",content:n.content||""})),this.items.length===0&&this.items.push({title:"",content:""}))},onEditorReady(n,t){var e;this.editors||(this.editors=[]),this.editors[t]=n,(e=this.items[t])!=null&&e.content&&n.setData(this.items[t].content)},updateItemContent(n,t){this.items[n]&&(this.items[n].content=t,this.emitUpdate(),this.$nextTick(()=>{this.$forceUpdate()}))},updateItem(n){this.emitUpdate()},addItem(){this.items.push({title:"",content:""}),this.emitUpdate()},removeItem(n){this.items.splice(n,1),this.editors&&this.editors[n]&&this.editors.splice(n,1),this.emitUpdate()},moveItem(n,t){if(t==="up"&&n>0){const e=this.items[n];this.items[n]=this.items[n-1],this.items[n-1]=e}else if(t==="down"&&n<this.items.length-1){const e=this.items[n];this.items[n]=this.items[n+1],this.items[n+1]=e}this.emitUpdate()},emitUpdate(){const n=[...this.items];this.$emit("input",n),this.$emit("update:modelValue",n),this.$emit("change",n),this.$forceUpdate()}}},eye={class:"accordion-editor"},tye={key:0},nye={class:"card-header bg-light d-flex justify-content-between align-items-center"},iye={class:"mb-0"},rye=["disabled","onClick"],sye=["disabled","onClick"],oye=["onClick"],aye={class:"card-body"},lye={class:"mb-3"},cye=["for"],uye=["id","onUpdate:modelValue","onInput"],dye={class:"mb-2"},fye=["for"],hye={class:"d-flex justify-content-end gap-2 mb-2"},mye=["onClick"],gye=["id"],pye={class:"editor-container_classic-editor editor-container_include-style"},vye={class:"editor-container__editor"},bye={class:"mb-4"},wye={key:1,class:"media-manager-modal"},yye={class:"modal media-manager-dialog d-block",tabindex:"-1"},_ye={class:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable"},kye={class:"modal-content"};function Eye(n,t,e,i,r,s){const o=si("ckeditor"),a=si("MediaManager");return P(),V("div",eye,[r.items.length>0?(P(),V("div",tye,[t[6]||(t[6]=m("div",{class:"mb-3"},[m("h6",null,"Akkordeon-Elemente:")],-1)),(P(!0),V(Fe,null,ct(r.items,(l,c)=>(P(),V("div",{key:`accordion-item-${c}`,class:"card mb-3"},[m("div",nye,[m("h6",iye,"Element "+B(c+1),1),m("div",null,[m("button",{type:"button",class:"btn btn-sm btn-outline-secondary me-1",disabled:c===0,title:"Nach oben verschieben",onClick:u=>s.moveItem(c,"up")},[...t[2]||(t[2]=[m("i",{class:"bi bi-arrow-up"},null,-1)])],8,rye),m("button",{type:"button",class:"btn btn-sm btn-outline-secondary me-1",disabled:c===r.items.length-1,title:"Nach unten verschieben",onClick:u=>s.moveItem(c,"down")},[...t[3]||(t[3]=[m("i",{class:"bi bi-arrow-down"},null,-1)])],8,sye),m("button",{type:"button",class:"btn btn-sm btn-outline-danger",title:"Element entfernen",onClick:u=>s.removeItem(c)},[...t[4]||(t[4]=[m("i",{class:"bi bi-trash"},null,-1)])],8,oye)])]),m("div",aye,[m("div",lye,[m("label",{for:"item-title-"+c,class:"form-label"},"Titel",8,cye),vn(m("input",{id:"item-title-"+c,"onUpdate:modelValue":u=>l.title=u,type:"text",class:"form-control",placeholder:"Titel des Akkordeon-Elements",onInput:u=>s.updateItem(c)},null,40,uye),[[Bi,l.title]])]),m("div",dye,[m("label",{for:"item-content-"+c,class:"form-label"},"Inhalt",8,fye),m("div",hye,[m("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:u=>{r.showMediaManager=!0,r.currentItemIndex=c}},[...t[5]||(t[5]=[m("i",{class:"bi bi-image"},null,-1),fe(" Medienverwaltung ",-1)])],8,mye)]),m("div",{id:`accordion-editor-${c}`,class:"editor-container"},[m("div",pye,[m("div",vye,[Ce(o,{"model-value":l.content,editor:e.editorClass,config:e.editorConfig,"onUpdate:modelValue":u=>s.updateItemContent(c,u),onReady:u=>s.onEditorReady(u,c)},null,8,["model-value","editor","config","onUpdate:modelValue","onReady"])])])],8,gye)])])]))),128))])):ne("",!0),m("div",bye,[m("button",{type:"button",class:"btn btn-outline-success",onClick:t[0]||(t[0]=(...l)=>s.addItem&&s.addItem(...l))},[...t[7]||(t[7]=[m("i",{class:"bi bi-plus-circle me-1"},null,-1),fe(" Element hinzufügen ",-1)])])]),r.showMediaManager?(P(),V("div",wye,[t[8]||(t[8]=m("div",{class:"modal-backdrop show"},null,-1)),m("div",yye,[m("div",_ye,[m("div",kye,[Ce(a,{onSelect:s.insertMedia,onClose:t[1]||(t[1]=l=>r.showMediaManager=!1)},null,8,["onSelect"])])])])])):ne("",!0)])}const Cye=Yt(Xwe,[["render",Eye],["__scopeId","data-v-ba8091a7"]]);function zf(n){return n}function Sy(){}function DI(n){return n==null||typeof n!="object"&&typeof n!="function"}function NI(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function LI(n){if(DI(n))return n;if(Array.isArray(n)||NI(n)||n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer)return n.slice(0);const t=Object.getPrototypeOf(n),e=t.constructor;if(n instanceof Date||n instanceof Map||n instanceof Set)return new e(n);if(n instanceof RegExp){const i=new e(n);return i.lastIndex=n.lastIndex,i}if(n instanceof DataView)return new e(n.buffer.slice(0));if(n instanceof Error){const i=new e(n.message);return i.stack=n.stack,i.name=n.name,i.cause=n.cause,i}if(typeof File<"u"&&n instanceof File)return new e([n],n.name,{type:n.type,lastModified:n.lastModified});if(typeof n=="object"){const i=Object.create(t);return Object.assign(i,n)}return n}function QV(n){if(!n||typeof n!="object")return!1;const t=Object.getPrototypeOf(n);return t===null||t===Object.prototype||Object.getPrototypeOf(t)===null?Object.prototype.toString.call(n)==="[object Object]":!1}function yT(n){return typeof n=="object"&&n!==null}function Ay(n){return Object.getOwnPropertySymbols(n).filter(t=>Object.prototype.propertyIsEnumerable.call(n,t))}function Iy(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const P6="[object RegExp]",MI="[object String]",$I="[object Number]",BI="[object Boolean]",Py="[object Arguments]",x6="[object Symbol]",O6="[object Date]",R6="[object Map]",V6="[object Set]",D6="[object Array]",Tye="[object Function]",N6="[object ArrayBuffer]",_w="[object Object]",Sye="[object Error]",L6="[object DataView]",M6="[object Uint8Array]",$6="[object Uint8ClampedArray]",B6="[object Uint16Array]",F6="[object Uint32Array]",Aye="[object BigUint64Array]",U6="[object Int8Array]",z6="[object Int16Array]",H6="[object Int32Array]",Iye="[object BigInt64Array]",W6="[object Float32Array]",j6="[object Float64Array]";function Pye(n,t){return ah(n,void 0,n,new Map,t)}function ah(n,t,e,i=new Map,r=void 0){const s=r==null?void 0:r(n,t,e,i);if(s!=null)return s;if(DI(n))return n;if(i.has(n))return i.get(n);if(Array.isArray(n)){const o=new Array(n.length);i.set(n,o);for(let a=0;a<n.length;a++)o[a]=ah(n[a],a,e,i,r);return Object.hasOwn(n,"index")&&(o.index=n.index),Object.hasOwn(n,"input")&&(o.input=n.input),o}if(n instanceof Date)return new Date(n.getTime());if(n instanceof RegExp){const o=new RegExp(n.source,n.flags);return o.lastIndex=n.lastIndex,o}if(n instanceof Map){const o=new Map;i.set(n,o);for(const[a,l]of n)o.set(a,ah(l,a,e,i,r));return o}if(n instanceof Set){const o=new Set;i.set(n,o);for(const a of n)o.add(ah(a,void 0,e,i,r));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(n))return n.subarray();if(NI(n)){const o=new(Object.getPrototypeOf(n)).constructor(n.length);i.set(n,o);for(let a=0;a<n.length;a++)o[a]=ah(n[a],a,e,i,r);return o}if(n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer)return n.slice(0);if(n instanceof DataView){const o=new DataView(n.buffer.slice(0),n.byteOffset,n.byteLength);return i.set(n,o),rd(o,n,e,i,r),o}if(typeof File<"u"&&n instanceof File){const o=new File([n],n.name,{type:n.type});return i.set(n,o),rd(o,n,e,i,r),o}if(n instanceof Blob){const o=new Blob([n],{type:n.type});return i.set(n,o),rd(o,n,e,i,r),o}if(n instanceof Error){const o=new n.constructor;return i.set(n,o),o.message=n.message,o.name=n.name,o.stack=n.stack,o.cause=n.cause,rd(o,n,e,i,r),o}if(typeof n=="object"&&xye(n)){const o=Object.create(Object.getPrototypeOf(n));return i.set(n,o),rd(o,n,e,i,r),o}return n}function rd(n,t,e=n,i,r){const s=[...Object.keys(t),...Ay(t)];for(let o=0;o<s.length;o++){const a=s[o],l=Object.getOwnPropertyDescriptor(n,a);(l==null||l.writable)&&(n[a]=ah(t[a],a,e,i,r))}}function xye(n){switch(Iy(n)){case Py:case D6:case N6:case L6:case BI:case O6:case W6:case j6:case U6:case z6:case H6:case R6:case $I:case _w:case P6:case V6:case MI:case x6:case M6:case $6:case B6:case F6:return!0;default:return!1}}function q6(n,t){return n===t||Number.isNaN(n)&&Number.isNaN(t)}function G6(n,t,e){return Vg(n,t,void 0,void 0,void 0,void 0,e)}function Vg(n,t,e,i,r,s,o){const a=o(n,t,e,i,r,s);if(a!==void 0)return a;if(typeof n==typeof t)switch(typeof n){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return n===t;case"number":return n===t||Object.is(n,t);case"function":return n===t;case"object":return sp(n,t,s,o)}return sp(n,t,s,o)}function sp(n,t,e,i){if(Object.is(n,t))return!0;let r=Iy(n),s=Iy(t);if(r===Py&&(r=_w),s===Py&&(s=_w),r!==s)return!1;switch(r){case MI:return n.toString()===t.toString();case $I:{const l=n.valueOf(),c=t.valueOf();return q6(l,c)}case BI:case O6:case x6:return Object.is(n.valueOf(),t.valueOf());case P6:return n.source===t.source&&n.flags===t.flags;case Tye:return n===t}e=e??new Map;const o=e.get(n),a=e.get(t);if(o!=null&&a!=null)return o===t;e.set(n,t),e.set(t,n);try{switch(r){case R6:{if(n.size!==t.size)return!1;for(const[l,c]of n.entries())if(!t.has(l)||!Vg(c,t.get(l),l,n,t,e,i))return!1;return!0}case V6:{if(n.size!==t.size)return!1;const l=Array.from(n.values()),c=Array.from(t.values());for(let u=0;u<l.length;u++){const d=l[u],f=c.findIndex(h=>Vg(d,h,void 0,n,t,e,i));if(f===-1)return!1;c.splice(f,1)}return!0}case D6:case M6:case $6:case B6:case F6:case Aye:case U6:case z6:case H6:case Iye:case W6:case j6:{if(typeof Buffer<"u"&&Buffer.isBuffer(n)!==Buffer.isBuffer(t)||n.length!==t.length)return!1;for(let l=0;l<n.length;l++)if(!Vg(n[l],t[l],l,n,t,e,i))return!1;return!0}case N6:return n.byteLength!==t.byteLength?!1:sp(new Uint8Array(n),new Uint8Array(t),e,i);case L6:return n.byteLength!==t.byteLength||n.byteOffset!==t.byteOffset?!1:sp(new Uint8Array(n),new Uint8Array(t),e,i);case Sye:return n.name===t.name&&n.message===t.message;case _w:{if(!(sp(n.constructor,t.constructor,e,i)||QV(n)&&QV(t)))return!1;const c=[...Object.keys(n),...Ay(n)],u=[...Object.keys(t),...Ay(t)];if(c.length!==u.length)return!1;for(let d=0;d<c.length;d++){const f=c[d],h=n[f];if(!Object.hasOwn(t,f))return!1;const g=t[f];if(!Vg(h,g,f,n,t,e,i))return!1}return!0}default:return!1}}finally{e.delete(n),e.delete(t)}}function em(n,t){return G6(n,t,Sy)}function xy(n){return typeof n=="function"}function Oye(n){return Number.isSafeInteger(n)&&n>=0}const Rye=new RegExp("\\p{Lu}?\\p{Ll}+|[0-9]+|\\p{Lu}+(?!\\p{Ll})|\\p{Emoji_Presentation}|\\p{Extended_Pictographic}|\\p{L}+","gu");function Vye(n){return Array.from(n.match(Rye)??[])}function Dye(n){return n!=null&&typeof n!="function"&&Oye(n.length)}function K6(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}function Y6(n){return Object.is(n,-0)?"-0":n.toString()}function FI(n){const t=[],e=n.length;if(e===0)return t;let i=0,r="",s="",o=!1;for(n.charCodeAt(0)===46&&(t.push(""),i++);i<e;){const a=n[i];s?a==="\\"&&i+1<e?(i++,r+=n[i]):a===s?s="":r+=a:o?a==='"'||a==="'"?s=a:a==="]"?(o=!1,t.push(r),r=""):r+=a:a==="["?(o=!0,r&&(t.push(r),r="")):a==="."?r&&(t.push(r),r=""):r+=a,i++}return r&&t.push(r),t}function pu(n,t,e){if(n==null)return e;switch(typeof t){case"string":{const i=n[t];return i===void 0?K6(t)?pu(n,FI(t),e):e:i}case"number":case"symbol":{typeof t=="number"&&(t=Y6(t));const i=n[t];return i===void 0?e:i}default:{if(Array.isArray(t))return Nye(n,t,e);Object.is(t==null?void 0:t.valueOf(),-0)?t="-0":t=String(t);const i=n[t];return i===void 0?e:i}}}function Nye(n,t,e){if(t.length===0)return e;let i=n;for(let r=0;r<t.length;r++){if(i==null)return e;i=i[t[r]]}return i===void 0?e:i}function Lye(n){return function(t){return pu(t,n)}}function mo(n){return n!==null&&(typeof n=="object"||typeof n=="function")}function T0(n,t){return Pye(n,(e,i,r,s)=>{const o=t==null?void 0:t(e,i,r,s);if(o!=null)return o;if(typeof n=="object")switch(Object.prototype.toString.call(n)){case $I:case MI:case BI:{const a=new n.constructor(n==null?void 0:n.valueOf());return rd(a,n),a}case Py:{const a={};return rd(a,n),a.length=n.length,a[Symbol.iterator]=n[Symbol.iterator],a}default:return}})}function Ys(n){return T0(n)}const Mye=/^(?:0|[1-9]\d*)$/;function $ye(n,t=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<t;case"symbol":return!1;case"string":return Mye.test(n)}}function ZV(n){return n!==null&&typeof n=="object"&&Iy(n)==="[object Arguments]"}function Bye(n){return typeof n=="symbol"||n instanceof Symbol}function Fye(n){return Bye(n)?NaN:Number(n)}function Uye(n){return n?(n=Fye(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}function zye(n){const t=Uye(n),e=t%1;return e?t-e:t}function JV(n){return typeof n=="string"||n instanceof String}function Q6(n,t,e){const i=Array.isArray(t)?t:typeof t=="string"?FI(t):[t];let r=n;for(let o=0;o<i.length-1;o++){const a=i[o],l=i[o+1];r[a]==null&&(r[a]=$ye(l)?[]:{}),r=r[a]}const s=i[i.length-1];return r[s]=e,n}function Hye(n,t,{signal:e,edges:i}={}){let r,s=null;const o=i!=null&&i.includes("leading"),a=i==null||i.includes("trailing"),l=()=>{s!==null&&(n.apply(r,s),r=void 0,s=null)},c=()=>{a&&l(),h()};let u=null;const d=()=>{u!=null&&clearTimeout(u),u=setTimeout(()=>{u=null,c()},t)},f=()=>{u!==null&&(clearTimeout(u),u=null)},h=()=>{f(),r=void 0,s=null},g=()=>{f(),l()},v=function(..._){if(e!=null&&e.aborted)return;r=this,s=_;const w=u==null;d(),o&&w&&l()};return v.schedule=d,v.cancel=h,v.flush=g,e==null||e.addEventListener("abort",h,{once:!0}),v}function go(n,t=0,e={}){typeof e!="object"&&(e={});const{signal:i,leading:r=!1,trailing:s=!0,maxWait:o}=e,a=Array(2);r&&(a[0]="leading"),s&&(a[1]="trailing");let l,c=null;const u=Hye(function(...h){l=n.apply(this,h),c=null},t,{signal:i,edges:a}),d=function(...h){if(o!=null){if(c===null)c=Date.now();else if(Date.now()-c>=o)return l=n.apply(this,h),c=Date.now(),u.cancel(),u.schedule(),l}return u.apply(this,h),l},f=()=>(u.flush(),l);return d.cancel=u.cancel,d.flush=f,d}function tm(n,t=0,e={}){typeof e!="object"&&(e={});const{leading:i=!0,trailing:r=!0,signal:s}=e;return go(n,t,{leading:i,trailing:r,signal:s,maxWait:t})}function S0(n){if(n==null)return"";if(Array.isArray(n))return n.map(S0).join(",");const t=String(n);return t==="0"&&Object.is(Number(n),-0)?"-0":t}function Wye(n){return typeof Buffer<"u"&&Buffer.isBuffer(n)}function jye(n){const t=n==null?void 0:n.constructor,e=typeof t=="function"?t.prototype:Object.prototype;return n===e}function Z6(n){return NI(n)}function qye(n,t){if(n=zye(n),n<1||!Number.isSafeInteger(n))return[];const e=new Array(n);for(let i=0;i<n;i++)e[i]=typeof t=="function"?t(i):i;return e}function Gye(n){if(n==null)return[];switch(typeof n){case"object":case"function":return Dye(n)?Yye(n):jye(n)?Kye(n):Oy(n);default:return Oy(Object(n))}}function Oy(n){const t=[];for(const e in n)t.push(e);return t}function Kye(n){return Oy(n).filter(e=>e!=="constructor")}function Yye(n){const t=qye(n.length,i=>`${i}`),e=new Set(t);return Wye(n)&&(e.add("offset"),e.add("parent")),Z6(n)&&(e.add("buffer"),e.add("byteLength"),e.add("byteOffset")),[...t,...Oy(n).filter(i=>!e.has(i))]}function J6(n,...t){for(let e=0;e<t.length;e++)Qye(n,t[e]);return n}function Qye(n,t){const e=Gye(t);for(let i=0;i<e.length;i++){const r=e[i];q6(n[r],t[r])||(n[r]=t[r])}}function XV(n,t){const e={},i=Object.keys(n);for(let r=0;r<i.length;r++){const s=i[r],o=n[s];e[s]=t(o,s,n)}return e}function Zye(n,t){switch(t=t??zf,typeof t){case"string":case"symbol":case"number":case"object":return XV(n,Lye(t));case"function":return XV(n,t)}}function aa(n){var e;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!((e=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&e.writable)?!1:n.toString()===`[object ${i}]`}let t=n;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(n)===t}function X6(n,...t){const e=t.slice(0,-1),i=t[t.length-1];let r=n;for(let s=0;s<e.length;s++){const o=e[s];r=kw(r,o,i,new Map)}return r}function kw(n,t,e,i){if(DI(n)&&(n=Object(n)),t==null||typeof t!="object")return n;if(i.has(t))return LI(i.get(t));if(i.set(t,n),Array.isArray(t)){t=t.slice();for(let s=0;s<t.length;s++)t[s]=t[s]??void 0}const r=[...Object.keys(t),...Ay(t)];for(let s=0;s<r.length;s++){const o=r[s];let a=t[o],l=n[o];if(ZV(a)&&(a={...a}),ZV(l)&&(l={...l}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=Ys(a)),Array.isArray(a))if(typeof l=="object"&&l!=null){const u=[],d=Reflect.ownKeys(l);for(let f=0;f<d.length;f++){const h=d[f];u[h]=l[h]}l=u}else l=[];const c=e(l,a,o,n,t,i);c!=null?n[o]=c:Array.isArray(a)||yT(l)&&yT(a)?n[o]=kw(l,a,e,i):l==null&&aa(a)?n[o]=kw({},a,e,i):l==null&&Z6(a)?n[o]=Ys(a):(l===void 0||a!==void 0)&&(n[o]=a)}return n}function UI(n,...t){return X6(n,...t,Sy)}function Jye(n,t){if(n==null)return!0;switch(typeof t){case"symbol":case"number":case"object":{if(Array.isArray(t))return eD(n,t);if(typeof t=="number"?t=Y6(t):typeof t=="object"&&(Object.is(t==null?void 0:t.valueOf(),-0)?t="-0":t=String(t)),(n==null?void 0:n[t])===void 0)return!0;try{return delete n[t],!0}catch{return!1}}case"string":{if((n==null?void 0:n[t])===void 0&&K6(t))return eD(n,FI(t));try{return delete n[t],!0}catch{return!1}}}}function eD(n,t){const e=pu(n,t.slice(0,-1),n),i=t[t.length-1];if((e==null?void 0:e[i])===void 0)return!0;try{return delete e[i],!0}catch{return!1}}function vu(n){return yT(n)&&n.nodeType===1&&!aa(n)}function tD(n,t){if(!Number.isInteger(n)||n<0)throw new Error("n must be a non-negative integer.");let e=0;return(...i)=>{if(++e>=n)return t(...i)}}function _T(n,t,e=Sy){return typeof e!="function"&&(e=Sy),G6(n,t,(...i)=>{const r=e(...i);if(r!==void 0)return!!r;if(n instanceof Map&&t instanceof Map||n instanceof Set&&t instanceof Set)return _T(Array.from(n),Array.from(t),tD(2,e))})}function Xye(n){return typeof n!="string"&&(n=S0(n)),n.replace(/['\u2019]/g,"")}function e_e(n){return n.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}function ez(n){return e_e(S0(n))}function t_e(n){const t=Vye(Xye(n).trim());let e="";for(let i=0;i<t.length;i++){const r=t[i];e&&(e+=" "),r===r.toUpperCase()?e+=r:e+=r[0].toUpperCase()+r.slice(1).toLowerCase()}return e}function n_e(n){return n.substring(0,1).toUpperCase()+n.substring(1)}function i_e(n){return n_e(S0(n))}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let kT;try{kT={window,document}}catch{/* istanbul ignore next -- @preserve */kT={window:{},document:{}}}var at=kT;function r_e(){try{return navigator.userAgent.toLowerCase()}catch{return""}}const ju=r_e(),Vt={isMac:tz(ju),isWindows:s_e(ju),isGecko:o_e(ju),isSafari:a_e(ju),isiOS:l_e(ju),isAndroid:c_e(ju),isBlink:u_e(ju),get isMediaForcedColors(){return d_e()}};function tz(n){return n.indexOf("macintosh")>-1}function s_e(n){return n.indexOf("windows")>-1}function o_e(n){return!!n.match(/gecko\/\d+/)}function a_e(n){return n.indexOf(" applewebkit/")>-1&&n.indexOf("chrome")===-1}function l_e(n){return!!n.match(/iphone|ipad/i)||tz(n)&&navigator.maxTouchPoints>0}function c_e(n){return n.indexOf("android")>-1}function u_e(n){return n.indexOf("chrome/")>-1&&n.indexOf("edge/")<0}function d_e(){return at.window.matchMedia?at.window.matchMedia("(forced-colors: active)").matches:!1}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function nz(n,t,e,i){e=e||function(l,c){return l===c};const r=Array.isArray(n)?n:Array.prototype.slice.call(n),s=Array.isArray(t)?t:Array.prototype.slice.call(t),o=f_e(r,s,e);return i?m_e(o,s.length):h_e(s,o)}function f_e(n,t,e){const i=nD(n,t,e);if(i===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const r=iD(n,i),s=iD(t,i),o=nD(r,s,e),a=n.length-o,l=t.length-o;return{firstIndex:i,lastIndexOld:a,lastIndexNew:l}}function nD(n,t,e){for(let i=0;i<Math.max(n.length,t.length);i++)if(n[i]===void 0||t[i]===void 0||!e(n[i],t[i]))return i;return-1}function iD(n,t){return n.slice(t).reverse()}function h_e(n,t){const e=[],{firstIndex:i,lastIndexOld:r,lastIndexNew:s}=t;return s-i>0&&e.push({index:i,type:"insert",values:n.slice(i,s)}),r-i>0&&e.push({index:i+(s-i),type:"delete",howMany:r-i}),e}function m_e(n,t){const{firstIndex:e,lastIndexOld:i,lastIndexNew:r}=n;if(e===-1)return Array(t).fill("equal");let s=[];return e>0&&(s=s.concat(Array(e).fill("equal"))),r-e>0&&(s=s.concat(Array(r-e).fill("insert"))),i-e>0&&(s=s.concat(Array(i-e).fill("delete"))),r<t&&(s=s.concat(Array(t-r).fill("equal"))),s}function Ah(n,t,e){e=e||function(v,_){return v===_};const i=n.length,r=t.length;if(i>200||r>200||i+r>300)return Ah.fastDiff(n,t,e,!0);let s,o;if(r<i){const v=n;n=t,t=v,s="delete",o="insert"}else s="insert",o="delete";const a=n.length,l=t.length,c=l-a,u={},d={};function f(v){const _=(d[v-1]!==void 0?d[v-1]:-1)+1,w=d[v+1]!==void 0?d[v+1]:-1,C=_>w?-1:1;u[v+C]&&(u[v]=u[v+C].slice(0)),u[v]||(u[v]=[]),u[v].push(_>w?s:o);let k=Math.max(_,w),E=k-v;for(;E<a&&k<l&&e(n[E],t[k]);)E++,k++,u[v].push("equal");return k}let h=0,g;do{for(g=-h;g<c;g++)d[g]=f(g);for(g=c+h;g>c;g--)d[g]=f(g);d[c]=f(c),h++}while(d[c]!==l);return u[c].slice(1)}Ah.fastDiff=nz;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function rD(){return function n(){n.called=!0}}class ic{constructor(t,e){y(this,"source");y(this,"name");y(this,"path");y(this,"stop");y(this,"off");y(this,"return");this.source=t,this.name=e,this.path=[],this.stop=rD(),this.off=rD()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Xr=new Array(256).fill("").map((n,t)=>("0"+t.toString(16)).slice(-2));function cs(){const[n,t,e,i]=crypto.getRandomValues(new Uint32Array(4));return"e"+Xr[n>>0&255]+Xr[n>>8&255]+Xr[n>>16&255]+Xr[n>>24&255]+Xr[t>>0&255]+Xr[t>>8&255]+Xr[t>>16&255]+Xr[t>>24&255]+Xr[e>>0&255]+Xr[e>>8&255]+Xr[e>>16&255]+Xr[e>>24&255]+Xr[i>>0&255]+Xr[i>>8&255]+Xr[i>>16&255]+Xr[i>>24&255]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const ro={get(n="normal"){return typeof n!="number"?this[n]||this.normal:n},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function iz(n,t){const e=ro.get(t.priority);let i=0,r=n.length;for(;i<r;){const s=i+r>>1;ro.get(n[s].priority)<e?r=s:i=s+1}n.splice(i,0,t)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const g_e="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class we extends Error{constructor(e,i,r){super(v_e(e,r));y(this,"context");y(this,"data");this.name="CKEditorError",this.context=i,this.data=r}is(e){return e==="CKEditorError"}static rethrowUnexpectedError(e,i){if(e.is&&e.is("CKEditorError"))throw e;const r=new we(e.message,i);throw r.stack=e.stack,r}}function mn(n,t){console.warn(...sz(n,t))}function p_e(n,t){console.error(...sz(n,t))}function rz(n){return`
Read more: ${g_e}#error-${n}`}function v_e(n,t){const e=new WeakSet,r=t?` ${JSON.stringify(t,(o,a)=>{if(typeof a=="object"&&a!==null){if(e.has(a))return`[object ${a.constructor.name}]`;e.add(a)}return a})}`:"",s=rz(n);return n+r+s}function sz(n,t){const e=rz(n);return t?[n,t,e]:[n,e]}const b_e="45.2.2",w_e=new Date(2025,8,3);/* istanbul ignore next -- @preserve */if(globalThis.CKEDITOR_VERSION)throw new we("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=b_e;const Hf=Symbol("listeningTo"),ET=Symbol("emitterId"),Il=Symbol("delegations"),oz=ri(Object);function ri(n){if(!n)return oz;class t extends n{on(i,r,s){this.listenTo(this,i,r,s)}once(i,r,s){let o=!1;const a=(l,...c)=>{o||(o=!0,l.off(),r.call(this,l,...c))};this.listenTo(this,i,a,s)}off(i,r){this.stopListening(this,i,r)}listenTo(i,r,s,o={}){let a,l;this[Hf]||(this[Hf]={});const c=this[Hf];Lk(i)||az(i);const u=Lk(i);(a=c[u])||(a=c[u]={emitter:i,callbacks:{}}),(l=a.callbacks[r])||(l=a.callbacks[r]=[]),l.push(s),C_e(this,i,r,s,o)}stopListening(i,r,s){const o=this[Hf];let a=i&&Lk(i);const l=o&&a?o[a]:void 0,c=l&&r?l.callbacks[r]:void 0;if(!(!o||i&&!l||r&&!c))if(s)Mk(this,i,r,s),c.indexOf(s)!==-1&&(c.length===1?delete l.callbacks[r]:Mk(this,i,r,s));else if(c){for(;s=c.pop();)Mk(this,i,r,s);delete l.callbacks[r]}else if(l){for(r in l.callbacks)this.stopListening(i,r);delete o[a]}else{for(a in o)this.stopListening(o[a].emitter);delete this[Hf]}}fire(i,...r){try{const s=i instanceof ic?i:new ic(this,i),o=s.name;let a=E_e(this,o);if(s.path.push(this),a){a=a.slice();for(let c=0;c<a.length;c++){const u=a[c].callback;if(u.call(this,s,...r),s.off.called&&(delete s.off.called,this._removeEventListener(o,u)),s.stop.called)break}}const l=this[Il];if(l){const c=l.get(o),u=l.get("*");c&&sD(c,s,r),u&&sD(u,s,r)}return s.return}catch(s){/* istanbul ignore next -- @preserve */we.rethrowUnexpectedError(s,this)}}delegate(...i){return{to:(r,s)=>{this[Il]||(this[Il]=new Map),i.forEach(o=>{const a=this[Il].get(o);a?a.set(r,s):this[Il].set(o,new Map([[r,s]]))})}}}stopDelegating(i,r){if(this[Il])if(!i)this[Il].clear();else if(!r)this[Il].delete(i);else{const s=this[Il].get(i);s&&s.delete(r)}}_addEventListener(i,r,s){k_e(this,i);const o=CT(this,i),a=ro.get(s.priority),l={callback:r,priority:a};for(const c of o)iz(c,l)}_removeEventListener(i,r){const s=CT(this,i);for(const o of s)for(let a=0;a<o.length;a++)o[a].callback==r&&(o.splice(a,1),a--)}}return t}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{ri[n]=oz.prototype[n]});function y_e(n,t){const e=n[Hf];return e&&e[t]?e[t].emitter:null}function az(n,t){n[ET]||(n[ET]=t||cs())}function Lk(n){return n[ET]}function lz(n){return n._events||Object.defineProperty(n,"_events",{value:{}}),n._events}function __e(){return{callbacks:[],childEvents:[]}}function k_e(n,t){const e=lz(n);if(e[t])return;let i=t,r=null;const s=[];for(;i!==""&&!e[i];)e[i]=__e(),s.push(e[i]),r&&e[i].childEvents.push(r),r=i,i=i.substr(0,i.lastIndexOf(":"));if(i!==""){for(const o of s)o.callbacks=e[i].callbacks.slice();e[i].childEvents.push(r)}}function CT(n,t){const e=lz(n)[t];if(!e)return[];let i=[e.callbacks];for(let r=0;r<e.childEvents.length;r++){const s=CT(n,e.childEvents[r]);i=i.concat(s)}return i}function E_e(n,t){if(!n._events)return null;let e=t;do{const i=n._events[e];if(i&&i.callbacks&&i.callbacks.length)return i.callbacks;const r=e.lastIndexOf(":");e=r>-1?e.substring(0,r):""}while(e);return null}function sD(n,t,e){for(let[i,r]of n){r?typeof r=="function"&&(r=r(t.name)):r=t.name;const s=new ic(t.source,r);s.path=[...t.path],i.fire(s,...e)}}function C_e(n,t,e,i,r){t._addEventListener?t._addEventListener(e,i,r):n._addEventListener.call(t,e,i,r)}function Mk(n,t,e,i){t._removeEventListener?t._removeEventListener(e,i):n._removeEventListener.call(t,e,i)}const op=Symbol("observableProperties"),qp=Symbol("boundObservables"),ap=Symbol("boundProperties"),qu=Symbol("decoratedMethods"),oD=Symbol("decoratedOriginal"),cz=Wn(ri());function Wn(n){var e,i,r,s,o;if(!n)return cz;class t extends(o=n,s=op,r=qu,i=ap,e=qp,o){constructor(){super(...arguments);y(this,s);y(this,r);y(this,i);y(this,e)}set(c,u){if(mo(c)){Object.keys(c).forEach(f=>{this.set(f,c[f])},this);return}$k(this);const d=this[op];if(c in this&&!d.has(c))throw new we("observable-set-cannot-override",this);Object.defineProperty(this,c,{enumerable:!0,configurable:!0,get(){return d.get(c)},set(f){const h=d.get(c);let g=this.fire(`set:${c}`,c,f,h);g===void 0&&(g=f),(h!==g||!d.has(c))&&(d.set(c,g),this.fire(`change:${c}`,c,g,h))}}),this[c]=u}bind(...c){if(!c.length||!aD(c))throw new we("observable-bind-wrong-properties",this);if(new Set(c).size!==c.length)throw new we("observable-bind-duplicate-properties",this);$k(this);const u=this[ap];c.forEach(f=>{if(u.has(f))throw new we("observable-bind-rebind",this)});const d=new Map;return c.forEach(f=>{const h={property:f,to:[]};u.set(f,h),d.set(f,h)}),{to:T_e,toMany:S_e,_observable:this,_bindProperties:c,_to:[],_bindings:d}}unbind(...c){if(!this[op])return;const u=this[ap],d=this[qp];if(c.length){if(!aD(c))throw new we("observable-unbind-wrong-properties",this);c.forEach(f=>{const h=u.get(f);h&&(h.to.forEach(([g,v])=>{const _=d.get(g),w=_[v];w.delete(h),w.size||delete _[v],Object.keys(_).length||(d.delete(g),this.stopListening(g,"change"))}),u.delete(f))})}else d.forEach((f,h)=>{this.stopListening(h,"change")}),d.clear(),u.clear()}decorate(c){$k(this);const u=this[c];if(!u)throw new we("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:c});this.on(c,(d,f)=>{d.return=u.apply(this,f)}),this[c]=function(...d){return this.fire(c,d)},this[c][oD]=u,this[qu]||(this[qu]=[]),this[qu].push(c)}stopListening(c,u,d){if(!c&&this[qu]){for(const f of this[qu])this[f]=this[f][oD];delete this[qu]}super.stopListening(c,u,d)}}return t}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{Wn[n]=cz.prototype[n]});function $k(n){n[op]||(Object.defineProperty(n,op,{value:new Map}),Object.defineProperty(n,qp,{value:new Map}),Object.defineProperty(n,ap,{value:new Map}))}function T_e(...n){const t=I_e(...n),e=Array.from(this._bindings.keys()),i=e.length;if(!t.callback&&t.to.length>1)throw new we("observable-bind-to-no-callback",this);if(i>1&&t.callback)throw new we("observable-bind-to-extra-callback",this);t.to.forEach(r=>{if(r.properties.length&&r.properties.length!==i)throw new we("observable-bind-to-properties-length",this);r.properties.length||(r.properties=this._bindProperties)}),this._to=t.to,t.callback&&(this._bindings.get(e[0]).callback=t.callback),O_e(this._observable,this._to),x_e(this),this._bindProperties.forEach(r=>{uz(this._observable,r)})}function S_e(n,t,e){if(this._bindings.size>1)throw new we("observable-bind-to-many-not-one-binding",this);this.to(...A_e(n,t),e)}function A_e(n,t){const e=n.map(i=>[i,t]);return Array.prototype.concat.apply([],e)}function aD(n){return n.every(t=>typeof t=="string")}function I_e(...n){if(!n.length)throw new we("observable-bind-to-parse-error",null);const t={to:[]};let e;return typeof n[n.length-1]=="function"&&(t.callback=n.pop()),n.forEach(i=>{if(typeof i=="string")e.properties.push(i);else if(typeof i=="object")e={observable:i,properties:[]},t.to.push(e);else throw new we("observable-bind-to-parse-error",null)}),t}function P_e(n,t,e,i){const r=n[qp],s=r.get(e),o=s||{};o[i]||(o[i]=new Set),o[i].add(t),s||r.set(e,o)}function x_e(n){let t;n._bindings.forEach((e,i)=>{n._to.forEach(r=>{t=r.properties[e.callback?0:n._bindProperties.indexOf(i)],e.to.push([r.observable,t]),P_e(n._observable,e,r.observable,t)})})}function uz(n,t){const i=n[ap].get(t);let r;i.callback?r=i.callback.apply(n,i.to.map(s=>s[0][s[1]])):(r=i.to[0],r=r[0][r[1]]),Object.prototype.hasOwnProperty.call(n,t)?n[t]=r:n.set(t,r)}function O_e(n,t){t.forEach(e=>{const i=n[qp];let r;i.get(e.observable)||n.listenTo(e.observable,"change",(s,o)=>{r=i.get(e.observable)[o],r&&r.forEach(a=>{uz(n,a.property)})})})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class dz{constructor(){y(this,"_replacedElements");this._replacedElements=[]}replace(t,e){this._replacedElements.push({element:t,newElement:e}),t.style.display="none",e&&t.parentNode.insertBefore(e,t.nextSibling)}restore(){this._replacedElements.forEach(({element:t,newElement:e})=>{t.style.display="",e&&e.remove()}),this._replacedElements=[]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function TT(n){let t=0;for(const e of n)t++;return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function ts(n,t){const e=Math.min(n.length,t.length);for(let i=0;i<e;i++)if(n[i]!=t[i])return i;return n.length==t.length?"same":n.length<t.length?"prefix":"extension"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function po(n){return!!(n&&n[Symbol.iterator])}function or(n,t,e={},i=[]){const r=e&&e.xmlns,s=r?n.createElementNS(r,t):n.createElement(t);for(const o in e)s.setAttribute(o,e[o]);(JV(i)||!po(i))&&(i=[i]);for(let o of i)JV(o)&&(o=n.createTextNode(o)),s.appendChild(o);return s}class fz{constructor(t,e){y(this,"_config");this._config=Object.create(null),e&&this.define(lD(e)),t&&this._setObjectToTarget(this._config,t)}set(t,e){this._setToTarget(this._config,t,e)}define(t,e){this._setToTarget(this._config,t,e,!0)}get(t){return this._getFromSource(this._config,t)}*names(){for(const t of Object.keys(this._config))yield t}_setToTarget(t,e,i,r=!1){if(aa(e)){this._setObjectToTarget(t,e,r);return}const s=e.split(".");e=s.pop();for(const o of s)aa(t[o])||(t[o]=Object.create(null)),t=t[o];if(aa(i)){aa(t[e])||(t[e]=Object.create(null)),t=t[e],this._setObjectToTarget(t,i,r);return}r&&typeof t[e]<"u"||(t[e]=i)}_getFromSource(t,e){const i=e.split(".");e=i.pop();for(const r of i){if(!aa(t[r])){t=null;break}t=t[r]}return t?lD(t[e]):void 0}_setObjectToTarget(t,e,i){Object.keys(e).forEach(r=>{this._setToTarget(t,r,e[r],i)})}}function lD(n){return T0(n,R_e)}function R_e(n){return vu(n)||typeof n=="function"?n:void 0}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function bu(n){if(n){if(n.defaultView)return n instanceof n.defaultView.Document;if(n.ownerDocument&&n.ownerDocument.defaultView)return n instanceof n.ownerDocument.defaultView.Node}return!1}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Ry(n){const t=Object.prototype.toString.apply(n);return t=="[object Window]"||t=="[object global]"}const hz=ds(ri());function ds(n){if(!n)return hz;class t extends n{listenTo(i,r,s,o={}){if(bu(i)||Ry(i)||i instanceof at.window.EventTarget){const a={capture:!!o.useCapture,passive:!!o.usePassive},l=this._getProxyEmitter(i,a)||new V_e(i,a);this.listenTo(l,r,s,o)}else super.listenTo(i,r,s,o)}stopListening(i,r,s){if(bu(i)||Ry(i)||i instanceof at.window.EventTarget){const o=this._getAllProxyEmitters(i);for(const a of o)this.stopListening(a,r,s)}else super.stopListening(i,r,s)}_getProxyEmitter(i,r){return y_e(this,mz(i,r))}_getAllProxyEmitters(i){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(r=>this._getProxyEmitter(i,r)).filter(r=>!!r)}}return t}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{ds[n]=hz.prototype[n]});class V_e extends ri(){constructor(e,i){super();y(this,"_domNode");y(this,"_options");y(this,"_domListeners");az(this,mz(e,i)),this._domNode=e,this._options=i}attach(e){if(this._domListeners&&this._domListeners[e])return;const i=this._createDomListener(e);this._domNode.addEventListener(e,i,this._options),this._domListeners||(this._domListeners={}),this._domListeners[e]=i}detach(e){let i;this._domListeners[e]&&(!(i=this._events[e])||!i.callbacks.length)&&this._domListeners[e].removeListener()}_addEventListener(e,i,r){this.attach(e),ri().prototype._addEventListener.call(this,e,i,r)}_removeEventListener(e,i){ri().prototype._removeEventListener.call(this,e,i),this.detach(e)}_createDomListener(e){const i=r=>{this.fire(e,r)};return i.removeListener=()=>{this._domNode.removeEventListener(e,i,this._options),delete this._domListeners[e]},i}}function D_e(n){return n["data-ck-expando"]||(n["data-ck-expando"]=cs())}function mz(n,t){let e=D_e(n);for(const i of Object.keys(t).sort())t[i]&&(e+="-"+i);return e}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function gz(n){const t=[];let e=n;for(;e&&e.nodeType!=Node.DOCUMENT_NODE;)t.unshift(e),e=e.parentNode;return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function N_e(n){return n instanceof HTMLTextAreaElement?n.value:n.innerHTML}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function pz(n){const t=n.ownerDocument.defaultView.getComputedStyle(n);return{top:parseInt(t.borderTopWidth,10),right:parseInt(t.borderRightWidth,10),bottom:parseInt(t.borderBottomWidth,10),left:parseInt(t.borderLeftWidth,10)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function vz(n){if(!n.target)return null;const t=n.target.ownerDocument,e=n.clientX,i=n.clientY;let r=null;return t.caretRangeFromPoint&&t.caretRangeFromPoint(e,i)?r=t.caretRangeFromPoint(e,i):n.rangeParent&&(r=t.createRange(),r.setStart(n.rangeParent,n.rangeOffset),r.collapse(!0)),r}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Oi(n){return Object.prototype.toString.call(n)=="[object Text]"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function A0(n){return Object.prototype.toString.apply(n)=="[object Range]"}function bz(n){return!n||!n.parentNode||n.offsetParent===at.document.body?null:n.offsetParent}const wz=["top","right","bottom","left","width","height"];class It{constructor(t){y(this,"top");y(this,"right");y(this,"bottom");y(this,"left");y(this,"width");y(this,"height");y(this,"_source");const e=A0(t);if(Object.defineProperty(this,"_source",{value:t._source||t,writable:!0,enumerable:!1}),ST(t)||e)if(e){const i=It.getDomRangeRects(t);Cb(this,It.getBoundingRect(i))}else Cb(this,t.getBoundingClientRect());else if(Ry(t)){const{innerWidth:i,innerHeight:r}=t;Cb(this,{top:0,right:i,bottom:r,left:0,width:i,height:r})}else Cb(this,t)}clone(){return new It(this)}moveTo(t,e){return this.top=e,this.right=t+this.width,this.bottom=e+this.height,this.left=t,this}moveBy(t,e){return this.top+=e,this.right+=t,this.left+=t,this.bottom+=e,this}getIntersection(t){const e={top:Math.max(this.top,t.top),right:Math.min(this.right,t.right),bottom:Math.min(this.bottom,t.bottom),left:Math.max(this.left,t.left),width:0,height:0};if(e.width=e.right-e.left,e.height=e.bottom-e.top,e.width<0||e.height<0)return null;{const i=new It(e);return i._source=this._source,i}}getIntersectionArea(t){const e=this.getIntersection(t);return e?e.getArea():0}getArea(){return this.width*this.height}getVisible(){const t=this._source;let e=this.clone();if(cD(t))return e;let i=t,r=t.parentNode||t.commonAncestorContainer,s;for(;r&&!cD(r);){const o=L_e(r)==="visible";i instanceof HTMLElement&&uD(i)==="absolute"&&(s=i);const a=uD(r);if(o||s&&(a==="relative"&&o||a!=="relative")){i=r,r=r.parentNode;continue}const l=new It(r),c=e.getIntersection(l);if(c)c.getArea()<e.getArea()&&(e=c);else return null;i=r,r=r.parentNode}return e}isEqual(t){for(const e of wz)if(this[e]!==t[e])return!1;return!0}contains(t){const e=this.getIntersection(t);return!!(e&&e.isEqual(t))}toAbsoluteRect(){const{scrollX:t,scrollY:e}=at.window,i=this.clone().moveBy(t,e);if(ST(i._source)){const r=bz(i._source);r&&M_e(i,r)}return i}excludeScrollbarsAndBorders(){const t=this._source;let e,i,r;if(Ry(t))e=t.innerWidth-t.document.documentElement.clientWidth,i=t.innerHeight-t.document.documentElement.clientHeight,r=t.getComputedStyle(t.document.documentElement).direction;else{const s=pz(t);e=t.offsetWidth-t.clientWidth-s.left-s.right,i=t.offsetHeight-t.clientHeight-s.top-s.bottom,r=t.ownerDocument.defaultView.getComputedStyle(t).direction,this.left+=s.left,this.top+=s.top,this.right-=s.right,this.bottom-=s.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=e,r==="ltr"?this.right-=e:this.left+=e,this.height-=i,this.bottom-=i,this}static getDomRangeRects(t){const e=[],i=Array.from(t.getClientRects());if(i.length)for(const r of i)e.push(new It(r));else{let r=t.startContainer;Oi(r)&&(r=r.parentNode);const s=new It(r.getBoundingClientRect());s.right=s.left,s.width=0,e.push(s)}return e}static getBoundingRect(t){const e={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let i=0;for(const r of t)i++,e.left=Math.min(e.left,r.left),e.top=Math.min(e.top,r.top),e.right=Math.max(e.right,r.right),e.bottom=Math.max(e.bottom,r.bottom);return i==0?null:(e.width=e.right-e.left,e.height=e.bottom-e.top,new It(e))}}function Cb(n,t){for(const e of wz)n[e]=t[e]}function cD(n){return ST(n)?n===n.ownerDocument.body:!1}function ST(n){return n!==null&&typeof n=="object"&&n.nodeType===1&&typeof n.getBoundingClientRect=="function"}function uD(n){return n instanceof HTMLElement?n.ownerDocument.defaultView.getComputedStyle(n).position:"static"}function L_e(n){return n instanceof HTMLElement?n.ownerDocument.defaultView.getComputedStyle(n).overflow:"visible"}function M_e(n,t){const e=new It(t),i=pz(t);let r=0,s=0;r-=e.left,s-=e.top,r+=t.scrollLeft,s+=t.scrollTop,r-=i.left,s-=i.top,n.moveBy(r,s)}const Ai=class Ai{constructor(t,e){y(this,"_element");y(this,"_callback");Ai._observerInstance||Ai._createObserver(),this._element=t,this._callback=e,Ai._addElementCallback(t,e),Ai._observerInstance.observe(t)}get element(){return this._element}destroy(){Ai._deleteElementCallback(this._element,this._callback)}static _addElementCallback(t,e){Ai._elementCallbacks||(Ai._elementCallbacks=new Map);let i=Ai._elementCallbacks.get(t);i||(i=new Set,Ai._elementCallbacks.set(t,i)),i.add(e)}static _deleteElementCallback(t,e){const i=Ai._getElementCallbacks(t);i&&(i.delete(e),i.size||(Ai._elementCallbacks.delete(t),Ai._observerInstance.unobserve(t))),Ai._elementCallbacks&&!Ai._elementCallbacks.size&&(Ai._observerInstance=null,Ai._elementCallbacks=null)}static _getElementCallbacks(t){return Ai._elementCallbacks?Ai._elementCallbacks.get(t):null}static _createObserver(){Ai._observerInstance=new at.window.ResizeObserver(t=>{for(const e of t){const i=Ai._getElementCallbacks(e.target);if(i)for(const r of i)r(e)}})}};y(Ai,"_observerInstance",null),y(Ai,"_elementCallbacks",null);let Rd=Ai;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function dD(n,t){n instanceof HTMLTextAreaElement&&(n.value=t),n.innerHTML=t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function gc(n){return t=>t+n}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function lh(n){let t=0;for(;n.previousSibling;)n=n.previousSibling,t++;return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function yz(n,t,e){n.insertBefore(e,n.childNodes[t]||null)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function lp(n){return n&&n.nodeType===Node.COMMENT_NODE}function _z(n){try{at.document.createAttribute(n)}catch{return!1}return!0}function dl(n){return n?Oi(n)?dl(n.parentElement):n.getClientRects?!!n.getClientRects().length:!1:!1}function zI({element:n,target:t,positions:e,limiter:i,fitInViewport:r,viewportOffsetConfig:s}){xy(t)&&(t=t()),xy(i)&&(i=i());const o=bz(n),a=$_e(s),l=new It(n),c=fD(t,a);let u;if(!c||!a.getIntersection(c))return null;const d={targetRect:c,elementRect:l,positionedElementAncestor:o,viewportRect:a};if(!i&&!r)u=new kz(e[0],d);else{if(i){const f=fD(i,a);f&&(d.limiterRect=f)}u=B_e(e,d)}return u}function fD(n,t){const e=new It(n).getVisible();return e?e.getIntersection(t):null}function $_e(n){n=Object.assign({top:0,bottom:0,left:0,right:0},n);const t=new It(at.window);return t.top+=n.top,t.height-=n.top,t.bottom-=n.bottom,t.height-=n.bottom,t}function B_e(n,t){const{elementRect:e}=t,i=e.getArea(),r=n.map(a=>new kz(a,t)).filter(a=>!!a.name);let s=0,o=null;for(const a of r){const{limiterIntersectionArea:l,viewportIntersectionArea:c}=a;if(l===i)return a;const u=c**2+l**2;u>s&&(s=u,o=a)}return o}class kz{constructor(t,e){y(this,"name");y(this,"config");y(this,"_positioningFunctionCoordinates");y(this,"_options");y(this,"_cachedRect");y(this,"_cachedAbsoluteRect");const i=t(e.targetRect,e.elementRect,e.viewportRect,e.limiterRect);if(!i)return;const{left:r,top:s,name:o,config:a}=i;this.name=o,this.config=a,this._positioningFunctionCoordinates={left:r,top:s},this._options=e}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const t=this._options.limiterRect;return t?t.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){return this._options.viewportRect.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect?this._cachedRect:(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect?this._cachedAbsoluteRect:(this._cachedAbsoluteRect=this._rect.toAbsoluteRect(),this._cachedAbsoluteRect)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function hD(n){const t=n.parentNode;t&&t.removeChild(n)}function Ew(){const n=at.window.visualViewport;if(!n||!(Vt.isiOS||Vt.isSafari))return{left:0,top:0};const t=Math.max(Math.round(n.offsetLeft),0),e=Math.max(Math.round(n.offsetTop),0);return{left:t,top:e}}function Ez({target:n,viewportOffset:t=0,ancestorOffset:e=0,alignToTop:i,forceScroll:r}){const s=HI(n);let o=s,a=null;for(t=z_e(t);o;){let l;o==s?l=mD(n):l=mD(a),U_e({parent:l,getRect:()=>Bk(n,o),alignToTop:i,ancestorOffset:e,forceScroll:r});let c=Bk(n,o);const u=Bk(l,o);if(c.height>u.height){const d=c.getIntersection(u);d&&(c=d)}if(F_e({window:o,rect:c,viewportOffset:t,alignToTop:i,forceScroll:r}),o.parent!=o){if(a=o.frameElement,o=o.parent,!a)return}else o=null}}function F_e({window:n,rect:t,alignToTop:e,forceScroll:i,viewportOffset:r}){const s=t.clone().moveBy(0,r.bottom),o=t.clone().moveBy(0,-r.top),a=new It(n).excludeScrollbarsAndBorders(),l=[o,s],c=e&&i,u=l.every(v=>a.contains(v));let{scrollX:d,scrollY:f}=n;const h=d,g=f;c?f-=a.top-t.top+r.top:u||(Tz(o,a)?f-=a.top-t.top+r.top:Cz(s,a)&&(e?f+=t.top-a.top-r.top:f+=t.bottom-a.bottom+r.bottom)),u||(Sz(t,a)?d-=a.left-t.left+r.left:Az(t,a)&&(d+=t.right-a.right+r.right)),(d!=h||f!==g)&&n.scrollTo(d,f)}function U_e({parent:n,getRect:t,alignToTop:e,forceScroll:i,ancestorOffset:r=0,limiterElement:s}){const o=HI(n),a=e&&i;let l,c,u;const d=s||o.document.body;for(;n!=d;)c=t(),l=new It(n).excludeScrollbarsAndBorders(),u=l.contains(c),a?n.scrollTop-=l.top-c.top+r:u||(Tz(c,l)?n.scrollTop-=l.top-c.top+r:Cz(c,l)&&(e?n.scrollTop+=c.top-l.top-r:n.scrollTop+=c.bottom-l.bottom+r)),u||(Sz(c,l)?n.scrollLeft-=l.left-c.left+r:Az(c,l)&&(n.scrollLeft+=c.right-l.right+r)),n=n.parentNode}function Cz(n,t){return n.bottom>t.bottom}function Tz(n,t){return n.top<t.top}function Sz(n,t){return n.left<t.left}function Az(n,t){return n.right>t.right}function HI(n){return A0(n)?n.startContainer.ownerDocument.defaultView:n.ownerDocument.defaultView}function mD(n){if(A0(n)){let t=n.commonAncestorContainer;return Oi(t)&&(t=t.parentNode),t}else return n.parentNode}function Bk(n,t){const e=HI(n),i=new It(n);if(e===t)return i;{let r=e;for(;r!=t;){const s=r.frameElement,o=new It(s).excludeScrollbarsAndBorders();i.moveBy(o.left,o.top),r=r.parent}}return i}function z_e(n){return typeof n=="number"?{top:n,bottom:n,left:n,right:n}:n}const H_e={ctrl:"⌃",cmd:"⌘",alt:"⌥",shift:"⇧"},W_e={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},gD={37:"←",38:"↑",39:"→",40:"↓",9:"⇥",33:"Page Up",34:"Page Down"},fn=Y_e(),j_e=Object.fromEntries(Object.entries(fn).map(([n,t])=>{let e;return t in gD?e=gD[t]:e=n.charAt(0).toUpperCase()+n.slice(1),[t,e]}));function Vd(n){let t;if(typeof n=="string"){if(t=fn[n.toLowerCase()],!t)throw new we("keyboard-unknown-key",null,{key:n})}else t=n.keyCode+(n.altKey?fn.alt:0)+(n.ctrlKey?fn.ctrl:0)+(n.shiftKey?fn.shift:0)+(n.metaKey?fn.cmd:0);return t}function I0(n){return typeof n=="string"&&(n=Q_e(n)),n.map(t=>typeof t=="string"?G_e(t):t).reduce((t,e)=>e+t,0)}function Vy(n,t){let e=I0(n);const i=Vt.isMac||Vt.isiOS;return Object.entries(i?H_e:W_e).reduce((o,[a,l])=>(e&fn[a]&&(e&=~fn[a],o+=l),o),"")+(e?j_e[e]:"")}function q_e(n){return n==fn.arrowright||n==fn.arrowleft||n==fn.arrowup||n==fn.arrowdown}function P0(n,t){const e=t==="ltr";switch(n){case fn.arrowleft:return e?"left":"right";case fn.arrowright:return e?"right":"left";case fn.arrowup:return"up";case fn.arrowdown:return"down"}}function G_e(n){if(n.endsWith("!"))return Vd(n.slice(0,-1));const t=Vd(n);return(Vt.isMac||Vt.isiOS)&&t==fn.ctrl?fn.cmd:t}function K_e(n,t){const e=P0(n,t);return e==="down"||e==="right"}function Y_e(){const n={pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let t=65;t<=90;t++){const e=String.fromCharCode(t);n[e.toLowerCase()]=t}for(let t=48;t<=57;t++)n[t-48]=t;for(let t=112;t<=123;t++)n["f"+(t-111)]=t;return Object.assign(n,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),n}function Q_e(n){return n.split("+").map(t=>t.trim())}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Z_e=["ar","ara","dv","div","fa","per","fas","he","heb","ku","kur","ug","uig","ur","urd"];function pD(n){return Z_e.includes(n)?"rtl":"ltr"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function jn(n){return Array.isArray(n)?n:[n]}/* istanbul ignore else -- @preserve */at.window.CKEDITOR_TRANSLATIONS||(at.window.CKEDITOR_TRANSLATIONS={});function J_e(n,t,e=1,i){if(typeof e!="number")throw new we("translation-service-quantity-not-a-number",null,{quantity:e});const r=i||at.window.CKEDITOR_TRANSLATIONS,s=t0e(r);s===1&&(n=Object.keys(r)[0]);const o=t.id||t.string;if(s===0||!e0e(n,o,r))return e!==1?t.plural:t.string;const a=r[n].dictionary,l=r[n].getPluralForm||(d=>d===1?0:1),c=a[o];if(typeof c=="string")return c;const u=Number(l(e));return c[u]}function X_e(n){return Array.isArray(n)?n.reduce((t,e)=>UI(t,e)):n}function e0e(n,t,e){return!!e[n]&&!!e[n].dictionary[t]}function t0e(n){return Object.keys(n).length}class n0e{constructor({uiLanguage:t="en",contentLanguage:e,translations:i}={}){y(this,"uiLanguage");y(this,"uiLanguageDirection");y(this,"contentLanguage");y(this,"contentLanguageDirection");y(this,"t");y(this,"translations");this.uiLanguage=t,this.contentLanguage=e||this.uiLanguage,this.uiLanguageDirection=pD(this.uiLanguage),this.contentLanguageDirection=pD(this.contentLanguage),this.translations=X_e(i),this.t=(r,s)=>this._t(r,s)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(t,e=[]){e=jn(e),typeof t=="string"&&(t={string:t});const r=!!t.plural?e[0]:1,s=J_e(this.uiLanguage,t,r,this.translations);return i0e(s,e)}}function i0e(n,t){return n.replace(/%(\d+)/g,(e,i)=>i<t.length?t[i]:e)}class cr extends ri(){constructor(e={},i={}){super();y(this,"_items");y(this,"_itemMap");y(this,"_idProperty");y(this,"_bindToCollection");y(this,"_bindToExternalToInternalMap");y(this,"_bindToInternalToExternalMap");y(this,"_skippedIndexesFromExternal");const r=po(e);if(r||(i=e),this._items=[],this._itemMap=new Map,this._idProperty=i.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],r)for(const s of e)this._items.push(s),this._itemMap.set(this._getItemIdBeforeAdding(s),s)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,i){return this.addMany([e],i)}addMany(e,i){if(i===void 0)i=this._items.length;else if(i>this._items.length||i<0)throw new we("collection-add-item-invalid-index",this);let r=0;for(const s of e){const o=this._getItemIdBeforeAdding(s),a=i+r;this._items.splice(a,0,s),this._itemMap.set(o,s),this.fire("add",s,a),r++}return this.fire("change",{added:e,removed:[],index:i}),this}get(e){let i;if(typeof e=="string")i=this._itemMap.get(e);else if(typeof e=="number")i=this._items[e];else throw new we("collection-get-invalid-arg",this);return i||null}has(e){if(typeof e=="string")return this._itemMap.has(e);{const i=this._idProperty,r=e[i];return r&&this._itemMap.has(r)}}getIndex(e){let i;return typeof e=="string"?i=this._itemMap.get(e):i=e,i?this._items.indexOf(i):-1}remove(e){const[i,r]=this._remove(e);return this.fire("change",{added:[],removed:[i],index:r}),i}map(e,i){return this._items.map(e,i)}forEach(e,i){this._items.forEach(e,i)}find(e,i){return this._items.find(e,i)}filter(e,i){return this._items.filter(e,i)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const e=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}bindTo(e){if(this._bindToCollection)throw new we("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:i=>{this._setUpBindToBinding(r=>new i(r))},using:i=>{typeof i=="function"?this._setUpBindToBinding(i):this._setUpBindToBinding(r=>r[i])}}}_setUpBindToBinding(e){const i=this._bindToCollection,r=(s,o,a)=>{const l=i._bindToCollection==this,c=i._bindToInternalToExternalMap.get(o);if(l&&c)this._bindToExternalToInternalMap.set(o,c),this._bindToInternalToExternalMap.set(c,o);else{const u=e(o);if(!u){this._skippedIndexesFromExternal.push(a);return}let d=a;for(const f of this._skippedIndexesFromExternal)a>f&&d--;for(const f of i._skippedIndexesFromExternal)d>=f&&d++;this._bindToExternalToInternalMap.set(o,u),this._bindToInternalToExternalMap.set(u,o),this.add(u,d);for(let f=0;f<i._skippedIndexesFromExternal.length;f++)d<=i._skippedIndexesFromExternal[f]&&i._skippedIndexesFromExternal[f]++}};for(const s of i)r(null,s,i.getIndex(s));this.listenTo(i,"add",r),this.listenTo(i,"remove",(s,o,a)=>{const l=this._bindToExternalToInternalMap.get(o);l&&this.remove(l),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((c,u)=>(a<u&&c.push(u-1),a>u&&c.push(u),c),[])})}_getItemIdBeforeAdding(e){const i=this._idProperty;let r;if(i in e){if(r=e[i],typeof r!="string")throw new we("collection-add-invalid-id",this);if(this.get(r))throw new we("collection-add-item-already-exists",this)}else e[i]=r=cs();return r}_remove(e){let i,r,s,o=!1;const a=this._idProperty;if(typeof e=="string"?(r=e,s=this._itemMap.get(r),o=!s,s&&(i=this._items.indexOf(s))):typeof e=="number"?(i=e,s=this._items[i],o=!s,s&&(r=s[a])):(s=e,r=s[a],i=this._items.indexOf(s),o=i==-1||!this._itemMap.get(r)),o)throw new we("collection-remove-404",this);this._items.splice(i,1),this._itemMap.delete(r);const l=this._bindToInternalToExternalMap.get(s);return this._bindToInternalToExternalMap.delete(s),this._bindToExternalToInternalMap.delete(l),this.fire("remove",s,i),[s,i]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function gi(n){const t=n.next();return t.done?null:t.value}class Mn extends ds(Wn()){constructor(){super();y(this,"_elements",new Set);y(this,"_externalViews",new Set);y(this,"_blurTimeout",null);this.set("isFocused",!1),this.set("focusedElement",null)}get elements(){return Array.from(this._elements.values())}get externalViews(){return Array.from(this._externalViews.values())}add(e){if(bD(e))this._addElement(e);else if(vD(e))this._addView(e);else{if(!e.element)throw new we("focustracker-add-view-missing-element",{focusTracker:this,view:e});this._addElement(e.element)}}remove(e){bD(e)?this._removeElement(e):vD(e)?this._removeView(e):this._removeElement(e.element)}_addElement(e){if(this._elements.has(e))throw new we("focustracker-add-element-already-exist",this);this.listenTo(e,"focus",()=>{const i=this.externalViews.find(r=>r0e(e,r));i?this._focus(i.element):this._focus(e)},{useCapture:!0}),this.listenTo(e,"blur",()=>{this._blur()},{useCapture:!0}),this._elements.add(e)}_removeElement(e){this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e)),e===this.focusedElement&&this._blur()}_addView(e){e.element&&this._addElement(e.element),this.listenTo(e.focusTracker,"change:focusedElement",()=>{e.focusTracker.focusedElement?e.element&&this._focus(e.element):this._blur()}),this._externalViews.add(e)}_removeView(e){e.element&&this._removeElement(e.element),this.stopListening(e.focusTracker),this._externalViews.delete(e)}destroy(){this.stopListening(),this._elements.clear(),this._externalViews.clear(),this.isFocused=!1,this.focusedElement=null}_focus(e){this._clearBlurTimeout(),this.focusedElement=e,this.isFocused=!0}_blur(){this.elements.find(r=>r.contains(document.activeElement))||this.externalViews.find(r=>r.focusTracker.isFocused&&!r.focusTracker._blurTimeout)||(this._clearBlurTimeout(),this._blurTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0))}_clearBlurTimeout(){clearTimeout(this._blurTimeout),this._blurTimeout=null}}function vD(n){return"focusTracker"in n&&n.focusTracker instanceof Mn}function bD(n){return vu(n)}function r0e(n,t){return wD(n,t)?!0:!!t.focusTracker.externalViews.find(e=>wD(n,e))}function wD(n,t){return!!t.element&&t.element.contains(document.activeElement)&&n.contains(t.element)}class oi{constructor(){y(this,"_listener");this._listener=new(ds())}listenTo(t){this._listener.listenTo(t,"keydown",(e,i)=>{this._listener.fire("_keydown:"+Vd(i),i)})}set(t,e,i={}){const r=I0(t),s=i.priority;this._listener.listenTo(this._listener,"_keydown:"+r,(o,a)=>{i.filter&&!i.filter(a)||(e(a,()=>{a.preventDefault(),a.stopPropagation(),o.stop()}),o.return=!0)},{priority:s})}press(t){return!!this._listener.fire("_keydown:"+Vd(t),t)}stopListening(t){this._listener.stopListening(t)}destroy(){this.stopListening()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function s0e(n){const t=new Map;for(const e in n)t.set(e,n[e]);return t}function fl(n){return po(n)?new Map(n):s0e(n)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function yD(n,t,e){const i=n.length,r=t.length;for(let s=i-1;s>=e;s--)n[s+r]=n[s];for(let s=0;s<r;s++)n[e+s]=t[s]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function WI(n,t){let e;function i(...r){i.cancel(),e=setTimeout(()=>n(...r),t)}return i.cancel=()=>{clearTimeout(e)},i}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function jI(n){try{if(!n.startsWith("ey"))return null;const t=atob(n.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(t)}catch{return null}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function o0e(){const n=[];for(let t=0;t<256;t++){let e=t;for(let i=0;i<8;i++)e&1?e=3988292384^e>>>1:e=e>>>1;n[t]=e}return n}function a0e(n){const t=Array.isArray(n)?n:[n],e=o0e();let i=-1;const r=t.map(s=>Array.isArray(s)?s.join(""):String(s)).join("");for(let s=0;s<r.length;s++){const o=r.charCodeAt(s);i=i>>>8^e[(i^o)&255]}return i=(i^-1)>>>0,i.toString(16).padStart(8,"0")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function l0e(n){const t=[{name:"address",isVoid:!1},{name:"article",isVoid:!1},{name:"aside",isVoid:!1},{name:"blockquote",isVoid:!1},{name:"details",isVoid:!1},{name:"dialog",isVoid:!1},{name:"dd",isVoid:!1},{name:"div",isVoid:!1},{name:"dl",isVoid:!1},{name:"dt",isVoid:!1},{name:"fieldset",isVoid:!1},{name:"figcaption",isVoid:!1},{name:"figure",isVoid:!1},{name:"footer",isVoid:!1},{name:"form",isVoid:!1},{name:"h1",isVoid:!1},{name:"h2",isVoid:!1},{name:"h3",isVoid:!1},{name:"h4",isVoid:!1},{name:"h5",isVoid:!1},{name:"h6",isVoid:!1},{name:"header",isVoid:!1},{name:"hgroup",isVoid:!1},{name:"hr",isVoid:!0},{name:"li",isVoid:!1},{name:"main",isVoid:!1},{name:"nav",isVoid:!1},{name:"ol",isVoid:!1},{name:"p",isVoid:!1},{name:"section",isVoid:!1},{name:"table",isVoid:!1},{name:"tbody",isVoid:!1},{name:"td",isVoid:!1},{name:"th",isVoid:!1},{name:"thead",isVoid:!1},{name:"tr",isVoid:!1},{name:"ul",isVoid:!1}],e=t.map(o=>o.name).join("|"),i=n.replace(new RegExp(`</?(${e})( .*?)?>`,"g"),`
$&
`).replace(/<br[^>]*>/g,`$&
`).split(`
`);let r=0,s=!1;return i.map(o=>(s=d0e(o,s),!o.length&&!s?"":c0e(o,t)?Tb(o,r++):u0e(o,t)?Tb(o,--r):s==="middle"||s==="last"?Tb(o,0):Tb(o,r))).join("").trimEnd()}function c0e(n,t){return t.some(e=>!(e.isVoid||!new RegExp(`<${e.name}( .*?)?>`).test(n)))}function u0e(n,t){return t.some(e=>new RegExp(`</${e.name}>`).test(n))}function Tb(n,t,e="    "){return`${e.repeat(Math.max(0,t))}${n}
`}function d0e(n,t){const e=/<pre( .*?)?>/.test(n),i=/<\/pre>/.test(n);return e&&i?!1:e?"first":i?"last":t==="first"||t==="middle"?"middle":!1}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function f0e(n){return!!n&&n.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(n)}function h0e(n){return!!n&&n.length==1&&/[\ud800-\udbff]/.test(n)}function m0e(n){return!!n&&n.length==1&&/[\udc00-\udfff]/.test(n)}function qI(n,t){return h0e(n.charAt(t-1))&&m0e(n.charAt(t))}function GI(n,t){return f0e(n.charAt(t))}const g0e=p0e();function Iz(n,t){const e=String(n).matchAll(g0e);return Array.from(e).some(i=>i.index<t&&t<i.index+i[0].length)}function p0e(){const n=[new RegExp("\\p{Emoji}[\\u{E0020}-\\u{E007E}]+\\u{E007F}","u"),new RegExp("\\p{Emoji}\\u{FE0F}?\\u{20E3}","u"),new RegExp("\\p{Emoji}\\u{FE0F}","u"),new RegExp("(?=\\p{General_Category=Other_Symbol})\\p{Emoji}\\p{Emoji_Modifier}*","u")],t=new RegExp("\\p{Regional_Indicator}{2}","u").source,e="(?:"+n.map(r=>r.source).join("|")+")",i=`${t}|${e}(?:‍${e})*`;return new RegExp(i,"ug")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const ug=new WeakMap;let _D=!1;function KI({view:n,element:t,text:e,isDirectHost:i=!0,keepOnFocus:r=!1}){const s=n.document;ug.has(s)||(ug.set(s,new Map),s.registerPostFixer(a=>Fk(ug.get(s),a)),s.on("change:isComposing",()=>{n.change(a=>Fk(ug.get(s),a))},{priority:"high"})),t.is("editableElement")&&t.on("change:placeholder",(a,l,c)=>o(c)),t.placeholder?o(t.placeholder):e&&o(e),e&&k0e();function o(a){const l={text:a,isDirectHost:i,keepOnFocus:r,hostElement:i?t:null};ug.get(s).set(t,l),n.change(c=>Fk([[t,l]],c))}}function v0e(n,t){return t.hasClass("ck-placeholder")?!1:(n.addClass("ck-placeholder",t),!0)}function b0e(n,t){return t.hasClass("ck-placeholder")?(n.removeClass("ck-placeholder",t),!0):!1}function w0e(n,t){if(!n.isAttached()||y0e(n))return!1;const e=n.document,r=e.selection.anchor;return e.isComposing&&r&&r.parent===n?!1:t||!e.isFocused?!0:!!r&&r.parent!==n}function y0e(n){for(const t of n.getChildren())if(!t.is("uiElement"))return!0;return!1}function Fk(n,t){const e=[];let i=!1;for(const[r,s]of n)s.isDirectHost&&(e.push(r),kD(t,r,s)&&(i=!0));for(const[r,s]of n){if(s.isDirectHost)continue;const o=_0e(r);o&&(e.includes(o)||(s.hostElement=o,kD(t,r,s)&&(i=!0)))}return i}function kD(n,t,e){const{text:i,isDirectHost:r,hostElement:s}=e;let o=!1;return s.getAttribute("data-placeholder")!==i&&(n.setAttribute("data-placeholder",i,s),o=!0),(r||t.childCount==1)&&w0e(s,e.keepOnFocus)?v0e(n,s)&&(o=!0):b0e(n,s)&&(o=!0),o}function _0e(n){if(n.childCount){const t=n.getChild(0);if(t.is("element")&&!t.is("uiElement")&&!t.is("attributeElement"))return t}return null}function k0e(){_D||mn("enableplaceholder-deprecated-text-option"),_D=!0}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let Qd=class{is(){throw new Error("is() method is abstract")}},Zd=class extends ri(Qd){constructor(e){super();y(this,"document");y(this,"parent");this.document=e,this.parent=null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))==-1)throw new we("view-node-not-found-in-parent",this);return e}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let i=this;for(;i.parent;)e.unshift(i.index),i=i.parent;return e}getAncestors(e={}){const i=[];let r=e.includeSelf?this:this.parent;for(;r;)i[e.parentFirst?"push":"unshift"](r),r=r.parent;return i}getCommonAncestor(e,i={}){const r=this.getAncestors(i),s=e.getAncestors(i);let o=0;for(;r[o]==s[o]&&r[o];)o++;return o===0?null:r[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const i=this.getPath(),r=e.getPath(),s=ts(i,r);switch(s){case"prefix":return!0;case"extension":return!1;default:return i[s]<r[s]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,i,r){this.fire(`change:${e}`,i,r),this.parent&&this.parent._fireChange(e,i,r)}toJSON(){const e=LI(this);return delete e.parent,e}};Zd.prototype.is=function(n){return n==="node"||n==="view:node"};let Gr=class AT extends Zd{constructor(e,i){super(e);y(this,"_textData");this._textData=i}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof AT?this===e||this.data===e.data:!1}_clone(){return new AT(this.document,this.data)}};Gr.prototype.is=function(n){return n==="$text"||n==="view:$text"||n==="text"||n==="view:text"||n==="node"||n==="view:node"};let Ll=class extends Qd{constructor(e,i,r){super();y(this,"textNode");y(this,"data");y(this,"offsetInText");if(this.textNode=e,i<0||i>e.data.length)throw new we("view-textproxy-wrong-offsetintext",this);if(r<0||i+r>e.data.length)throw new we("view-textproxy-wrong-length",this);this.data=e.data.substring(i,i+r),this.offsetInText=i}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(e={}){const i=[];let r=e.includeSelf?this.textNode:this.parent;for(;r!==null;)i[e.parentFirst?"push":"unshift"](r),r=r.parent;return i}};Ll.prototype.is=function(n){return n==="$textProxy"||n==="view:$textProxy"||n==="textProxy"||n==="view:textProxy"};class Dy{constructor(){y(this,"_consumables",new Map)}add(t,e){let i;if(t.is("$text")||t.is("documentFragment")){this._consumables.set(t,!0);return}this._consumables.has(t)?i=this._consumables.get(t):(i=new E0e(t),this._consumables.set(t,i)),i.add(e?Dg(e):t._getConsumables())}test(t,e){const i=this._consumables.get(t);return i===void 0?null:t.is("$text")||t.is("documentFragment")?i:i.test(Dg(e))}consume(t,e){if(t.is("$text")||t.is("documentFragment"))return this.test(t,e)?(this._consumables.set(t,!1),!0):!1;const i=this._consumables.get(t);return i===void 0?!1:i.consume(Dg(e))}revert(t,e){const i=this._consumables.get(t);i!==void 0&&(t.is("$text")||t.is("documentFragment")?this._consumables.set(t,!0):i.revert(Dg(e)))}static createFrom(t,e){if(e||(e=new Dy),t.is("$text"))e.add(t);else if(t.is("element")||t.is("documentFragment")){e.add(t);for(const i of t.getChildren())Dy.createFrom(i,e)}return e}}class E0e{constructor(t){y(this,"element");y(this,"_canConsumeName",null);y(this,"_attributes",new Map);this.element=t}add(t){t.name&&(this._canConsumeName=!0);for(const[e,i]of t.attributes)if(i){let r=this._attributes.get(e);(!r||typeof r=="boolean")&&(r=new Map,this._attributes.set(e,r)),r.set(i,!0)}else{if(e=="style"||e=="class")throw new we("viewconsumable-invalid-attribute",this);this._attributes.set(e,!0)}}test(t){if(t.name&&!this._canConsumeName)return this._canConsumeName;for(const[e,i]of t.attributes){const r=this._attributes.get(e);if(r===void 0)return null;if(r===!1)return!1;if(r!==!0){if(i){const s=r.get(i);if(s===void 0)return null;if(!s)return!1}else for(const s of r.values())if(!s)return!1}}return!0}consume(t){if(!this.test(t))return!1;t.name&&(this._canConsumeName=!1);for(const[e,i]of t.attributes){const r=this._attributes.get(e);if(typeof r=="boolean")for(const[s]of this.element._getConsumables(e,i).attributes)this._attributes.set(s,!1);else if(i)for(const[,s]of this.element._getConsumables(e,i).attributes)r.set(s,!1);else for(const s of r.keys())r.set(s,!1)}return!0}revert(t){t.name&&(this._canConsumeName=!0);for(const[e,i]of t.attributes){const r=this._attributes.get(e);if(r===!1){this._attributes.set(e,!0);continue}if(!(r===void 0||r===!0))if(i)r.get(i)===!1&&r.set(i,!0);else for(const s of r.keys())r.set(s,!0)}}}function Dg(n){const t=[];return"attributes"in n&&n.attributes&&Uk(t,n.attributes),"classes"in n&&n.classes&&Uk(t,n.classes,"class"),"styles"in n&&n.styles&&Uk(t,n.styles,"style"),{name:n.name||!1,attributes:t}}function Uk(n,t,e){if(typeof t=="string"){n.push(e?[e,t]:[t]);return}for(const i of t)Array.isArray(i)?n.push(i):n.push(e?[e,i]:[i])}class Vs{constructor(...t){y(this,"_patterns",[]);this.add(...t)}add(...t){for(let e of t)(typeof e=="string"||e instanceof RegExp)&&(e={name:e}),this._patterns.push(e)}match(...t){for(const e of t)for(const i of this._patterns){const r=this._isElementMatching(e,i);if(r)return{element:e,pattern:i,match:r}}return null}matchAll(...t){const e=[];for(const i of t)for(const r of this._patterns){const s=this._isElementMatching(i,r);s&&e.push({element:i,pattern:r,match:s})}return e.length>0?e:null}getElementName(){if(this._patterns.length!==1)return null;const t=this._patterns[0],e=t.name;return typeof t!="function"&&e&&!(e instanceof RegExp)?e:null}_isElementMatching(t,e){if(typeof e=="function"){const s=e(t);return!s||typeof s!="object"?s:Dg(s)}const i={};if(e.name&&(i.name=C0e(e.name,t.name),!i.name))return null;const r=[];return e.attributes&&!T0e(e.attributes,t,r)||e.classes&&!S0e(e.classes,t,r)||e.styles&&!A0e(e.styles,t,r)?null:(r.length&&(i.attributes=r),i)}}function Ny(n,t){return n===!0||n===t||n instanceof RegExp&&!!String(t).match(n)}function C0e(n,t){return n instanceof RegExp?!!t.match(n):n===t}function YI(n,t){if(Array.isArray(n))return n.map(i=>typeof i!="object"||i instanceof RegExp?t?[t,i,!0]:[i,!0]:((i.key===void 0||i.value===void 0)&&mn("matcher-pattern-missing-key-or-value",i),t?[t,i.key,i.value]:[i.key,i.value]));if(typeof n!="object"||n instanceof RegExp)return[t?[t,n,!0]:[n,!0]];const e=[];for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.push(t?[t,i,n[i]]:[i,n[i]]);return e}function T0e(n,t,e){let i;return typeof n=="object"&&!(n instanceof RegExp)&&!Array.isArray(n)?(n.style!==void 0&&mn("matcher-pattern-deprecated-attributes-style-key",n),n.class!==void 0&&mn("matcher-pattern-deprecated-attributes-class-key",n)):i=["class","style"],t._collectAttributesMatch(YI(n),e,i)}function S0e(n,t,e){return t._collectAttributesMatch(YI(n,"class"),e)}function A0e(n,t,e){return t._collectAttributesMatch(YI(n,"style"),e)}class Ih{constructor(t){y(this,"_styles");y(this,"_cachedStyleNames",null);y(this,"_cachedExpandedStyleNames",null);y(this,"_styleProcessor");this._styles={},this._styleProcessor=t}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(t){this.clear();const e=P0e(t);for(const[i,r]of e)this._styleProcessor.toNormalizedForm(i,r,this._styles);return this}has(t){if(this.isEmpty)return!1;const i=this._styleProcessor.getReducedForm(t,this._styles).find(([r])=>r===t);return Array.isArray(i)}set(t,e){if(this._cachedStyleNames=null,this._cachedExpandedStyleNames=null,mo(t))for(const[i,r]of Object.entries(t))this._styleProcessor.toNormalizedForm(i,r,this._styles);else this._styleProcessor.toNormalizedForm(t,e,this._styles)}remove(t){for(const e of jn(t)){this._cachedStyleNames=null,this._cachedExpandedStyleNames=null;const i=IT(e);Jye(this._styles,i),delete this._styles[e],this._cleanEmptyObjectsOnPath(i)}}getNormalized(t){return this._styleProcessor.getNormalized(t,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(t=>t.join(":")).sort().join(";")+";"}getAsString(t){if(this.isEmpty)return;if(this._styles[t]&&!mo(this._styles[t]))return this._styles[t];const i=this._styleProcessor.getReducedForm(t,this._styles).find(([r])=>r===t);if(Array.isArray(i))return i[1]}getStyleNames(t=!1){return this.isEmpty?[]:t?(this._cachedExpandedStyleNames||(this._cachedExpandedStyleNames=this._styleProcessor.getStyleNames(this._styles)),this._cachedExpandedStyleNames):(this._cachedStyleNames||(this._cachedStyleNames=this.getStylesEntries().map(([e])=>e)),this._cachedStyleNames)}keys(){return this.getStyleNames()}clear(){this._styles={},this._cachedStyleNames=null,this._cachedExpandedStyleNames=null}isSimilar(t){if(this.size!==t.size)return!1;for(const e of this.getStyleNames())if(!t.has(e)||t.getAsString(e)!==this.getAsString(e))return!1;return!0}getStylesEntries(){const t=[],e=Object.keys(this._styles);for(const i of e)t.push(...this._styleProcessor.getReducedForm(i,this._styles));return t}_clone(){const t=new this.constructor(this._styleProcessor);return t.set(this.getNormalized()),t}_getTokensMatch(t,e){const i=[];for(const r of this.getStyleNames(!0))if(Ny(t,r)){if(e===!0){i.push(r);continue}const s=this.getAsString(r);Ny(e,s)&&i.push(r)}return i.length?i:void 0}_getConsumables(t){const e=[];if(t){e.push(t);for(const i of this._styleProcessor.getRelatedStyles(t))e.push(i)}else for(const i of this.getStyleNames()){for(const r of this._styleProcessor.getRelatedStyles(i))e.push(r);e.push(i)}return e}_canMergeFrom(t){for(const e of t.getStyleNames())if(this.has(e)&&this.getAsString(e)!==t.getAsString(e))return!1;return!0}_mergeFrom(t){for(const e of t.getStyleNames())this.has(e)||this.set(e,t.getAsString(e))}_isMatching(t){for(const e of t.getStyleNames())if(!this.has(e)||this.getAsString(e)!==t.getAsString(e))return!1;return!0}_cleanEmptyObjectsOnPath(t){const e=t.split(".");if(!(e.length>1))return;const r=e.splice(0,e.length-1).join("."),s=pu(this._styles,r);if(!s)return;!Object.keys(s).length&&this.remove(r)}}class I0e{constructor(){y(this,"_normalizers");y(this,"_extractors");y(this,"_reducers");y(this,"_consumables");this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(t,e,i){if(mo(e)){zk(i,IT(t),e);return}if(this._normalizers.has(t)){const r=this._normalizers.get(t),{path:s,value:o}=r(e);zk(i,s,o)}else zk(i,t,e)}getNormalized(t,e){if(!t)return UI({},e);if(e[t]!==void 0)return e[t];if(this._extractors.has(t)){const i=this._extractors.get(t);if(typeof i=="string")return pu(e,i);const r=i(t,e);if(r)return r}return pu(e,IT(t))}getReducedForm(t,e){const i=this.getNormalized(t,e);return i===void 0?[]:this._reducers.has(t)?this._reducers.get(t)(i):[[t,i]]}getStyleNames(t){const e=new Set;for(const i of this._consumables.keys()){const r=this.getNormalized(i,t);r&&(typeof r!="object"||Object.keys(r).length)&&e.add(i)}for(const i of Object.keys(t))e.add(i);return Array.from(e)}getRelatedStyles(t){return this._consumables.get(t)||[]}setNormalizer(t,e){this._normalizers.set(t,e)}setExtractor(t,e){this._extractors.set(t,e)}setReducer(t,e){this._reducers.set(t,e)}setStyleRelation(t,e){this._mapStyleNames(t,e);for(const i of e)this._mapStyleNames(i,[t])}_mapStyleNames(t,e){this._consumables.has(t)||this._consumables.set(t,[]),this._consumables.get(t).push(...e)}}function P0e(n){let t=null,e=0,i=0,r=null;const s=new Map;if(n==="")return s;n.charAt(n.length-1)!=";"&&(n=n+";");for(let o=0;o<n.length;o++){const a=n.charAt(o);if(t===null)switch(a){case":":r||(r=n.substr(e,o-e),i=o+1);break;case'"':case"'":t=a;break;case";":{const l=n.substr(i,o-i);r&&s.set(r.trim(),l.trim()),r=null,e=o+1;break}}else a===t&&(t=null)}return s}function IT(n){return n.replace("-",".")}function zk(n,t,e){let i=e;mo(e)&&(i=UI({},pu(n,t),e)),Q6(n,t,i)}class Hk{constructor(){y(this,"_set",new Set)}get isEmpty(){return this._set.size==0}get size(){return this._set.size}has(t){return this._set.has(t)}keys(){return Array.from(this._set.keys())}setTo(t){this.clear();for(const e of t.split(/\s+/))e&&this._set.add(e);return this}set(t){for(const e of jn(t))e&&this._set.add(e)}remove(t){for(const e of jn(t))this._set.delete(e)}clear(){this._set.clear()}toString(){return Array.from(this._set).join(" ")}isSimilar(t){if(this.size!==t.size)return!1;for(const e of this.keys())if(!t.has(e))return!1;return!0}_clone(){const t=new this.constructor;return t._set=new Set(this._set),t}_getTokensMatch(t){const e=[];if(t===!0){for(const i of this._set.keys())e.push(i);return e}if(typeof t=="string"){for(const i of t.split(/\s+/))if(this._set.has(i))e.push(i);else return;return e}for(const i of this._set.keys())i.match(t)&&e.push(i);return e.length?e:void 0}_getConsumables(t){return t?[t]:this.keys()}_canMergeFrom(){return!0}_mergeFrom(t){for(const e of t._set.keys())this._set.has(e)||this._set.add(e)}_isMatching(t){for(const e of t._set.keys())if(!this._set.has(e))return!1;return!0}}let rc=class Pz extends Zd{constructor(e,i,r,s){super(e);y(this,"name");y(this,"_unsafeAttributesToRender",[]);y(this,"_attrs");y(this,"_children");y(this,"_customProperties",new Map);this.name=i,this._attrs=this._parseAttributes(r),this._children=[],s&&this._insertChild(0,s)}get _classes(){return this._attrs.get("class")}get _styles(){return this._attrs.get("style")}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes&&(yield"class"),this._styles&&(yield"style");for(const e of this._attrs.keys())e!="class"&&e!="style"&&(yield e)}*getAttributes(){for(const[e,i]of this._attrs.entries())yield[e,String(i)]}getAttribute(e){return this._attrs.has(e)?String(this._attrs.get(e)):void 0}hasAttribute(e,i){return this._attrs.has(e)?i!==void 0?wf(this.name,e)||dg(this.name,e)?this._attrs.get(e).has(i):this._attrs.get(e)===i:!0:!1}isSimilar(e){if(!(e instanceof Pz))return!1;if(this===e)return!0;if(this.name!=e.name||this._attrs.size!==e._attrs.size)return!1;for(const[i,r]of this._attrs){const s=e._attrs.get(i);if(s===void 0)return!1;if(typeof r=="string"||typeof s=="string"){if(s!==r)return!1}else if(!r.isSimilar(s))return!1}return!0}hasClass(...e){for(const i of e)if(!this._classes||!this._classes.has(i))return!1;return!0}getClassNames(){const e=this._classes?this._classes.keys():[],i=e[Symbol.iterator]();return Object.assign(e,{next:i.next.bind(i)})}getStyle(e){return this._styles&&this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles&&this._styles.getNormalized(e)}getStyleNames(e){return this._styles?this._styles.getStyleNames(e):[]}hasStyle(...e){for(const i of e)if(!this._styles||!this._styles.has(i))return!1;return!0}findAncestor(...e){const i=new Vs(...e);let r=this.parent;for(;r&&!r.is("documentFragment");){if(i.match(r))return r;r=r.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const e=this._classes?this._classes.keys().sort().join(","):"",i=this._styles&&String(this._styles),r=Array.from(this._attrs).filter(([s])=>s!="style"&&s!="class").map(s=>`${s[0]}="${s[1]}"`).sort().join(" ");return this.name+(e==""?"":` class="${e}"`)+(i?` style="${i}"`:"")+(r==""?"":` ${r}`)}shouldRenderUnsafeAttribute(e){return this._unsafeAttributesToRender.includes(e)}_clone(e=!1){const i=[];if(e)for(const s of this.getChildren())i.push(s._clone(e));const r=new this.constructor(this.document,this.name,this._attrs,i);return r._customProperties=new Map(this._customProperties),r.getFillerOffset=this.getFillerOffset,r._unsafeAttributesToRender=this._unsafeAttributesToRender,r}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,i){this._fireChange("children",this,{index:e});let r=0;const s=x0e(this.document,i);for(const o of s)o.parent!==null&&o._remove(),o.parent=this,o.document=this.document,this._children.splice(e,0,o),e++,r++;return r}_removeChildren(e,i=1){this._fireChange("children",this,{index:e});for(let r=e;r<e+i;r++)this._children[r].parent=null;return this._children.splice(e,i)}_setAttribute(e,i,r=!0){if(this._fireChange("attributes",this),wf(this.name,e)||dg(this.name,e)){let s=this._attrs.get(e);s||(s=wf(this.name,e)?new Ih(this.document.stylesProcessor):new Hk,this._attrs.set(e,s)),r?s.setTo(String(i)):wf(this.name,e)?Array.isArray(i)?s.set(i[0],i[1]):s.set(i):s.set(typeof i=="string"?i.split(/\s+/):i)}else this._attrs.set(e,String(i))}_removeAttribute(e,i){if(this._fireChange("attributes",this),i!==void 0&&(wf(this.name,e)||dg(this.name,e))){const r=this._attrs.get(e);return r?(dg(this.name,e)&&typeof i=="string"&&(i=i.split(/\s+/)),r.remove(i),r.isEmpty?this._attrs.delete(e):!1):!1}return this._attrs.delete(e)}_addClass(e){this._setAttribute("class",e,!1)}_removeClass(e){this._removeAttribute("class",e)}_setStyle(e,i){typeof e!="string"?this._setAttribute("style",e,!1):this._setAttribute("style",[e,i],!1)}_removeStyle(e){this._removeAttribute("style",e)}_collectAttributesMatch(e,i,r){for(const[s,o,a]of e){let l=!1,c=!1;for(const[u,d]of this._attrs)if(!(r&&r.includes(u)||!Ny(s,u)))if(l=!0,typeof d=="string"){if(Ny(o,d))i.push([u]),c=!0;else if(!(s instanceof RegExp))return!1}else{const f=d._getTokensMatch(o,a||!0);if(f){c=!0;for(const h of f)i.push([u,h])}else if(!(s instanceof RegExp))return!1}if(!l||!c)return!1}return!0}_getConsumables(e,i){const r=[];if(e){const s=this._attrs.get(e);if(s!==void 0)if(typeof s=="string")r.push([e]);else for(const o of s._getConsumables(i))r.push([e,o])}else for(const[s,o]of this._attrs)if(typeof o=="string")r.push([s]);else for(const a of o._getConsumables())r.push([s,a]);return{name:!e,attributes:r}}_canMergeAttributesFrom(e){if(this.name!=e.name)return!1;for(const[i,r]of e._attrs){const s=this._attrs.get(i);if(s!==void 0){if(typeof s=="string"||typeof r=="string"){if(s!==r)return!1}else if(!s._canMergeFrom(r))return!1}}return!0}_mergeAttributesFrom(e){this._fireChange("attributes",this);for(const[i,r]of e._attrs){const s=this._attrs.get(i);s===void 0||typeof s=="string"||typeof r=="string"?this._setAttribute(i,r):s._mergeFrom(r)}}_canSubtractAttributesOf(e){if(this.name!=e.name)return!1;for(const[i,r]of e._attrs){const s=this._attrs.get(i);if(s===void 0)return!1;if(typeof s=="string"||typeof r=="string"){if(s!==r)return!1}else if(!s._isMatching(r))return!1}return!0}_subtractAttributesOf(e){this._fireChange("attributes",this);for(const[i,r]of e._attrs){const s=this._attrs.get(i);typeof s=="string"||typeof r=="string"?this._attrs.delete(i):(s.remove(r.keys()),s.isEmpty&&this._attrs.delete(i))}}_setCustomProperty(e,i){this._customProperties.set(e,i)}_removeCustomProperty(e){return this._customProperties.delete(e)}_parseAttributes(e){const i=fl(e);for(const[r,s]of i)if(s===null)i.delete(r);else if(wf(this.name,r)){const o=s instanceof Ih?s._clone():new Ih(this.document.stylesProcessor).setTo(String(s));i.set(r,o)}else if(dg(this.name,r)){const o=s instanceof Hk?s._clone():new Hk().setTo(String(s));i.set(r,o)}else typeof s!="string"&&i.set(r,String(s));return i}};rc.prototype.is=function(n,t){return t?t===this.name&&(n==="element"||n==="view:element"):n==="element"||n==="view:element"||n==="node"||n==="view:node"};function x0e(n,t){if(typeof t=="string")return[new Gr(n,t)];po(t)||(t=[t]);const e=[];for(const i of t)typeof i=="string"?e.push(new Gr(n,i)):i instanceof Ll?e.push(new Gr(n,i.data)):e.push(i);return e}function dg(n,t){return t=="class"||n=="a"&&t=="rel"}function wf(n,t){return t=="style"}class Gp extends rc{constructor(t,e,i,r){super(t,e,i,r),this.getFillerOffset=O0e}}Gp.prototype.is=function(n,t){return t?t===this.name&&(n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function O0e(){const n=[...this.getChildren()],t=n[this.childCount-1];if(t&&t.is("element","br"))return this.childCount;for(const e of n)if(!e.is("uiElement"))return null;return this.childCount}class x0 extends Wn(Gp){constructor(t,e,i,r){super(t,e,i,r),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(t),this.bind("isFocused").to(t,"isFocused",s=>s&&t.selection.editableElement==this),this.listenTo(t.selection,"change",()=>{this.isFocused=t.isFocused&&t.selection.editableElement==this})}destroy(){this.stopListening()}}x0.prototype.is=function(n,t){return t?t===this.name&&(n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};const ED=Symbol("rootName");class xz extends x0{constructor(t,e){super(t,e),this.rootName="main"}get rootName(){return this.getCustomProperty(ED)}set rootName(t){this._setCustomProperty(ED,t)}set _name(t){this.name=t}}xz.prototype.is=function(n,t){return t?t===this.name&&(n==="rootElement"||n==="view:rootElement"||n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="rootElement"||n==="view:rootElement"||n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};let ud=class{constructor(t={}){y(this,"direction");y(this,"boundaries");y(this,"singleCharacters");y(this,"shallow");y(this,"ignoreElementEnd");y(this,"_position");y(this,"_boundaryStartParent");y(this,"_boundaryEndParent");if(!t.boundaries&&!t.startPosition)throw new we("view-tree-walker-no-start-position",null);if(t.direction&&t.direction!="forward"&&t.direction!="backward")throw new we("view-tree-walker-unknown-direction",t.startPosition,{direction:t.direction});this.boundaries=t.boundaries||null,t.startPosition?this._position=vt._createAt(t.startPosition):this._position=vt._createAt(t.boundaries[t.direction=="backward"?"end":"start"]),this.direction=t.direction||"forward",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,i;do i=this.position,e=this.next();while(!e.done&&t(e.value));e.done||(this._position=i)}jumpTo(t){this._boundaryStartParent&&t.isBefore(this.boundaries.start)?t=this.boundaries.start:this._boundaryEndParent&&t.isAfter(this.boundaries.end)&&(t=this.boundaries.end),this._position=t.clone()}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let t=this.position.clone();const e=this.position,i=t.parent;if(i.parent===null&&t.offset===i.childCount)return{done:!0,value:void 0};if(i===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let r;if(i&&i.is("view:$text")){if(t.isAtEnd)return this._position=vt._createAfter(i),this._next();r=i.data[t.offset]}else r=i.getChild(t.offset);if(typeof r=="string"){let s;this.singleCharacters?s=1:s=(i===this._boundaryEndParent?this.boundaries.end.offset:i.data.length)-t.offset;const o=new Ll(i,t.offset,s);return t.offset+=s,this._position=t,this._formatReturnValue("text",o,e,t,s)}if(r&&r.is("view:element")){if(!this.shallow)t=new vt(r,0);else{if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}return this._position=t,this._formatReturnValue("elementStart",r,e,t,1)}if(r&&r.is("view:$text")){if(this.singleCharacters)return t=new vt(r,0),this._position=t,this._next();let s=r.data.length,o;return r==this._boundaryEndParent?(s=this.boundaries.end.offset,o=new Ll(r,0,s),t=vt._createAfter(o)):(o=new Ll(r,0,r.data.length),t.offset++),this._position=t,this._formatReturnValue("text",o,e,t,s)}return t=vt._createAfter(i),this._position=t,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",i,e,t)}_previous(){let t=this.position.clone();const e=this.position,i=t.parent;if(i.parent===null&&t.offset===0)return{done:!0,value:void 0};if(i==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let r;if(i.is("view:$text")){if(t.isAtStart)return this._position=vt._createBefore(i),this._previous();r=i.data[t.offset-1]}else r=i.getChild(t.offset-1);if(typeof r=="string"){let s;if(this.singleCharacters)s=1;else{const a=i===this._boundaryStartParent?this.boundaries.start.offset:0;s=t.offset-a}t.offset-=s;const o=new Ll(i,t.offset,s);return this._position=t,this._formatReturnValue("text",o,e,t,s)}if(r&&r.is("view:element"))return this.shallow?(t.offset--,this._position=t,this._formatReturnValue("elementStart",r,e,t,1)):(t=new vt(r,r.childCount),this._position=t,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",r,e,t));if(r&&r.is("view:$text")){if(this.singleCharacters)return t=new vt(r,r.data.length),this._position=t,this._previous();let s=r.data.length,o;if(r==this._boundaryStartParent){const a=this.boundaries.start.offset;o=new Ll(r,a,r.data.length-a),s=o.data.length,t=vt._createBefore(o)}else o=new Ll(r,0,r.data.length),t.offset--;return this._position=t,this._formatReturnValue("text",o,e,t,s)}return t=vt._createBefore(i),this._position=t,this._formatReturnValue("elementStart",i,e,t,1)}_formatReturnValue(t,e,i,r,s){return e.is("view:$textProxy")&&(e.offsetInText+e.data.length==e.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(r=vt._createAfter(e.textNode),this._position=r):i=vt._createAfter(e.textNode)),e.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(r=vt._createBefore(e.textNode),this._position=r):i=vt._createBefore(e.textNode))),{done:!1,value:{type:t,item:e,previousPosition:i,nextPosition:r,length:s}}}},vt=class Rl extends Qd{constructor(e,i){super();y(this,"parent");y(this,"offset");this.parent=e,this.offset=i}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof x0);)if(e.parent)e=e.parent;else return null;return e}getShiftedBy(e){const i=Rl._createAt(this),r=i.offset+e;return i.offset=r<0?0:r,i}getLastMatchingPosition(e,i={}){i.startPosition=this;const r=new ud(i);return r.skip(e),r.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){const i=this.getAncestors(),r=e.getAncestors();let s=0;for(;i[s]==r[s]&&i[s];)s++;return s===0?null:i[s-1]}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return this.compareWith(e)=="before"}isAfter(e){return this.compareWith(e)=="after"}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";const i=this.parent.is("node")?this.parent.getPath():[],r=e.parent.is("node")?e.parent.getPath():[];i.push(this.offset),r.push(e.offset);const s=ts(i,r);switch(s){case"prefix":return"before";case"extension":return"after";default:return i[s]<r[s]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new ud(e)}clone(){return new Rl(this.parent,this.offset)}static _createAt(e,i){if(e instanceof Rl)return new this(e.parent,e.offset);{const r=e;if(i=="end")i=r.is("$text")?r.data.length:r.childCount;else{if(i=="before")return this._createBefore(r);if(i=="after")return this._createAfter(r);if(i!==0&&!i)throw new we("view-createpositionat-offset-required",r)}return new Rl(r,i)}}static _createAfter(e){if(e.is("$textProxy"))return new Rl(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new we("view-position-after-root",e,{root:e});return new Rl(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new Rl(e.textNode,e.offsetInText);if(!e.parent)throw new we("view-position-before-root",e,{root:e});return new Rl(e.parent,e.index)}};vt.prototype.is=function(n){return n==="position"||n==="view:position"};let un=class Vc extends Qd{constructor(e,i=null){super();y(this,"start");y(this,"end");this.start=e.clone(),this.end=i?i.clone():e.clone()}*[Symbol.iterator](){yield*new ud({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(Sb,{direction:"backward"}),i=this.end.getLastMatchingPosition(Sb);return e.parent.is("$text")&&e.isAtStart&&(e=vt._createBefore(e.parent)),i.parent.is("$text")&&i.isAtEnd&&(i=vt._createAfter(i.parent)),new Vc(e,i)}getTrimmed(){let e=this.start.getLastMatchingPosition(Sb);if(e.isAfter(this.end)||e.isEqual(this.end))return new Vc(e,e);let i=this.end.getLastMatchingPosition(Sb,{direction:"backward"});const r=e.nodeAfter,s=i.nodeBefore;return r&&r.is("$text")&&(e=new vt(r,0)),s&&s.is("$text")&&(i=new vt(s,s.data.length)),new Vc(e,i)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,i=!1){e.isCollapsed&&(i=!1);const r=this.containsPosition(e.start)||i&&this.start.isEqual(e.start),s=this.containsPosition(e.end)||i&&this.end.isEqual(e.end);return r&&s}getDifference(e){const i=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&i.push(new Vc(this.start,e.start)),this.containsPosition(e.end)&&i.push(new Vc(e.end,this.end))):i.push(this.clone()),i}getIntersection(e){if(this.isIntersecting(e)){let i=this.start,r=this.end;return this.containsPosition(e.start)&&(i=e.start),this.containsPosition(e.end)&&(r=e.end),new Vc(i,r)}return null}getWalker(e={}){return e.boundaries=this,new ud(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,i=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(i=this.end.parent.previousSibling),e&&e.is("element")&&e===i?e:null}clone(){return new Vc(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const i=new ud(e);for(const r of i)yield r.item}*getPositions(e={}){e.boundaries=this;const i=new ud(e);yield i.position;for(const r of i)yield r.nextPosition}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,i,r,s){return new this(new vt(e,i),new vt(r,s))}static _createFromPositionAndShift(e,i){const r=e,s=e.getShiftedBy(i);return i>0?new this(r,s):new this(s,r)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){const i=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(vt._createBefore(e),i)}};un.prototype.is=function(n){return n==="range"||n==="view:range"};function Sb(n){return!!(n.item.is("attributeElement")||n.item.is("uiElement"))}let Kl=class Oz extends ri(Qd){constructor(...e){super();y(this,"_ranges");y(this,"_lastRangeBackward");y(this,"_isFake");y(this,"_fakeSelectionLabel");this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",e.length&&this.setTo(...e)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(const i of this._ranges)(!e||i.start.isBefore(e.start))&&(e=i);return e?e.clone():null}getLastRange(){let e=null;for(const i of this._ranges)(!e||i.end.isAfter(e.end))&&(e=i);return e?e.clone():null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}isEqual(e){if(this.isFake!=e.isFake||this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel||this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const i of this._ranges){let r=!1;for(const s of e._ranges)if(i.isEqual(s)){r=!0;break}if(!r)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;const i=TT(this.getRanges()),r=TT(e.getRanges());if(i!=r)return!1;if(i==0)return!0;for(let s of this.getRanges()){s=s.getTrimmed();let o=!1;for(let a of e.getRanges())if(a=a.getTrimmed(),s.start.isEqual(a.start)&&s.end.isEqual(a.end)){o=!0;break}if(!o)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...e){let[i,r,s]=e;if(typeof r=="object"&&(s=r,r=void 0),i===null)this._setRanges([]),this._setFakeOptions(s);else if(i instanceof Oz||i instanceof QI)this._setRanges(i.getRanges(),i.isBackward),this._setFakeOptions({fake:i.isFake,label:i.fakeSelectionLabel});else if(i instanceof un)this._setRanges([i],s&&s.backward),this._setFakeOptions(s);else if(i instanceof vt)this._setRanges([new un(i)]),this._setFakeOptions(s);else if(i instanceof Zd){const o=!!s&&!!s.backward;let a;if(r===void 0)throw new we("view-selection-setto-required-second-parameter",this);r=="in"?a=un._createIn(i):r=="on"?a=un._createOn(i):a=new un(vt._createAt(i,r)),this._setRanges([a],o),this._setFakeOptions(s)}else if(po(i))this._setRanges(i,s&&s.backward),this._setFakeOptions(s);else throw new we("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(e,i){if(this.anchor===null)throw new we("view-selection-setfocus-no-ranges",this);const r=vt._createAt(e,i);if(r.compareWith(this.focus)=="same")return;const s=this.anchor;this._ranges.pop(),r.compareWith(s)=="before"?this._addRange(new un(r,s),!0):this._addRange(new un(s,r)),this.fire("change")}_setRanges(e,i=!1){e=Array.from(e),this._ranges=[];for(const r of e)this._addRange(r);this._lastRangeBackward=!!i}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,i=!1){if(!(e instanceof un))throw new we("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!i}_pushRange(e){for(const i of this._ranges)if(e.isIntersecting(i))throw new we("view-selection-range-intersects",this,{addedRange:e,intersectingRange:i});this._ranges.push(new un(e.start,e.end))}};Kl.prototype.is=function(n){return n==="selection"||n==="view:selection"};let QI=class extends ri(Qd){constructor(...e){super();y(this,"_selection");this._selection=new Kl,this._selection.delegate("change").to(this),e.length&&this._selection.setTo(...e)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}_setTo(...e){this._selection.setTo(...e)}_setFocus(e,i){this._selection.setFocus(e,i)}};QI.prototype.is=function(n){return n==="selection"||n=="documentSelection"||n=="view:selection"||n=="view:documentSelection"};class Jd extends ic{constructor(e,i,r){super(e,i);y(this,"startRange");y(this,"_eventPhase");y(this,"_currentTarget");this.startRange=r,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const Wk=Symbol("bubbling contexts");function PT(n){class t extends n{fire(i,...r){try{const s=i instanceof ic?i:new ic(this,i),o=jk(this);if(!o.size)return;if(fg(s,"capturing",this),yf(o,"$capture",s,...r))return s.return;const a=s.startRange||this.selection.getFirstRange(),l=a?a.getContainedElement():null,c=l?!!Rz(o,l):!1;let u=l||R0e(a);if(fg(s,"atTarget",u),!c){if(yf(o,"$text",s,...r))return s.return;fg(s,"bubbling",u)}for(;u;){if(u.is("rootElement")){if(yf(o,"$root",s,...r))return s.return}else if(u.is("element")&&yf(o,u.name,s,...r))return s.return;if(yf(o,u,s,...r))return s.return;u=u.parent,fg(s,"bubbling",u)}return fg(s,"bubbling",this),yf(o,"$document",s,...r),s.return}catch(s){/* istanbul ignore next -- @preserve */we.rethrowUnexpectedError(s,this)}}_addEventListener(i,r,s){const o=jn(s.context||"$document"),a=jk(this);for(const l of o){let c=a.get(l);c||(c=new(ri()),a.set(l,c)),this.listenTo(c,i,r,s)}}_removeEventListener(i,r){const s=jk(this);for(const o of s.values())this.stopListening(o,i,r)}}return t}{const n=PT(Object);["fire","_addEventListener","_removeEventListener"].forEach(t=>{PT[t]=n.prototype[t]})}function fg(n,t,e){n instanceof Jd&&(n._eventPhase=t,n._currentTarget=e)}function yf(n,t,e,...i){const r=typeof t=="string"?n.get(t):Rz(n,t);return r?(r.fire(e,...i),e.stop.called):!1}function Rz(n,t){for(const[e,i]of n)if(typeof e=="function"&&e(t))return i;return null}function jk(n){return n[Wk]||(n[Wk]=new Map),n[Wk]}function R0e(n){if(!n)return null;const t=n.start.parent,e=n.end.parent,i=t.getPath(),r=e.getPath();return i.length>r.length?t:e}let O0=class extends PT(Wn()){constructor(e){super();y(this,"selection");y(this,"roots");y(this,"stylesProcessor");y(this,"_postFixers",new Set);this.selection=new QI,this.roots=new cr({idProperty:"rootName"}),this.stylesProcessor=e,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(e="main"){return this.roots.get(e)}registerPostFixer(e){this._postFixers.add(e)}destroy(){this.roots.forEach(e=>e.destroy()),this.stopListening()}_callPostFixers(e){let i=!1;do for(const r of this._postFixers)if(i=r(e),i)break;while(i)}};const CD=10;class wd extends rc{constructor(e,i,r,s){super(e,i,r,s);y(this,"_priority",CD);y(this,"_id",null);y(this,"_clonesGroup",null);this.getFillerOffset=V0e}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new we("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(e){return this.id!==null||e.id!==null?this.id===e.id:super.isSimilar(e)&&this.priority==e.priority}_clone(e=!1){const i=super._clone(e);return i._priority=this._priority,i._id=this._id,i}_canMergeAttributesFrom(e){return this.id!==null||e.id!==null||this.priority!==e.priority?!1:super._canMergeAttributesFrom(e)}_canSubtractAttributesOf(e){return this.id!==null||e.id!==null||this.priority!==e.priority?!1:super._canSubtractAttributesOf(e)}}y(wd,"DEFAULT_PRIORITY",CD);wd.prototype.is=function(n,t){return t?t===this.name&&(n==="attributeElement"||n==="view:attributeElement"||n==="element"||n==="view:element"):n==="attributeElement"||n==="view:attributeElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function V0e(){if(qk(this))return null;let n=this.parent;for(;n&&n.is("attributeElement");){if(qk(n)>1)return null;n=n.parent}return!n||qk(n)>1?null:this.childCount}function qk(n){return Array.from(n.getChildren()).filter(t=>!t.is("uiElement")).length}class ZI extends rc{constructor(t,e,i,r){super(t,e,i,r),this.getFillerOffset=D0e}_insertChild(t,e){if(e&&(e instanceof Zd||Array.from(e).length>0))throw new we("view-emptyelement-cannot-add",[this,e]);return 0}}ZI.prototype.is=function(n,t){return t?t===this.name&&(n==="emptyElement"||n==="view:emptyElement"||n==="element"||n==="view:element"):n==="emptyElement"||n==="view:emptyElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function D0e(){return null}class R0 extends rc{constructor(t,e,i,r){super(t,e,i,r),this.getFillerOffset=L0e}_insertChild(t,e){if(e&&(e instanceof Zd||Array.from(e).length>0))throw new we("view-uielement-cannot-add",[this,e]);return 0}render(t,e){return this.toDomElement(t)}toDomElement(t){const e=t.createElement(this.name);for(const i of this.getAttributeKeys())e.setAttribute(i,this.getAttribute(i));return e}}R0.prototype.is=function(n,t){return t?t===this.name&&(n==="uiElement"||n==="view:uiElement"||n==="element"||n==="view:element"):n==="uiElement"||n==="view:uiElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function N0e(n){n.document.on("arrowKey",(t,e)=>M0e(t,e,n.domConverter),{priority:"low"})}function L0e(){return null}function M0e(n,t,e){if(t.keyCode==fn.arrowright){const i=t.domTarget.ownerDocument.defaultView.getSelection(),r=i.rangeCount==1&&i.getRangeAt(0).collapsed;if(r||t.shiftKey){const s=i.focusNode,o=i.focusOffset,a=e.domPositionToView(s,o);if(a===null)return;let l=!1;const c=a.getLastMatchingPosition(u=>(u.item.is("uiElement")&&(l=!0),!!(u.item.is("uiElement")||u.item.is("attributeElement"))));if(l){const u=e.viewPositionToDom(c);r?i.collapse(u.parent,u.offset):i.extend(u.parent,u.offset)}}}}class JI extends rc{constructor(t,e,i,r){super(t,e,i,r),this.getFillerOffset=$0e}_insertChild(t,e){if(e&&(e instanceof Zd||Array.from(e).length>0))throw new we("view-rawelement-cannot-add",[this,e]);return 0}render(t,e){}}JI.prototype.is=function(n,t){return t?t===this.name&&(n==="rawElement"||n==="view:rawElement"||n==="element"||n==="view:element"):n==="rawElement"||n==="view:rawElement"||n===this.name||n==="view:"+this.name||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function $0e(){return null}let yd=class extends ri(Qd){constructor(e,i){super();y(this,"document");y(this,"_children",[]);y(this,"_customProperties",new Map);this.document=e,i&&this._insertChild(0,i)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,i){this._fireChange("children",this,{index:e});let r=0;const s=B0e(this.document,i);for(const o of s)o.parent!==null&&o._remove(),o.parent=this,this._children.splice(e,0,o),e++,r++;return r}_removeChildren(e,i=1){this._fireChange("children",this,{index:e});for(let r=e;r<e+i;r++)this._children[r].parent=null;return this._children.splice(e,i)}_fireChange(e,i,r){this.fire(`change:${e}`,i,r)}_setCustomProperty(e,i){this._customProperties.set(e,i)}_removeCustomProperty(e){return this._customProperties.delete(e)}};yd.prototype.is=function(n){return n==="documentFragment"||n==="view:documentFragment"};function B0e(n,t){return typeof t=="string"?[new Gr(n,t)]:(po(t)||(t=[t]),Array.from(t).map(e=>typeof e=="string"?new Gr(n,e):e instanceof Ll?new Gr(n,e.data):e))}class Vz{constructor(t){y(this,"document");y(this,"_cloneGroups",new Map);y(this,"_slotFactory",null);this.document=t}setSelection(...t){this.document.selection._setTo(...t)}setSelectionFocus(t,e){this.document.selection._setFocus(t,e)}createDocumentFragment(t){return new yd(this.document,t)}createText(t){return new Gr(this.document,t)}createAttributeElement(t,e,i={}){const r=new wd(this.document,t,e);return typeof i.priority=="number"&&(r._priority=i.priority),i.id&&(r._id=i.id),i.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),r}createContainerElement(t,e,i={},r={}){let s=null;aa(i)?r=i:s=i;const o=new Gp(this.document,t,e,s);return r.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...r.renderUnsafeAttributes),o}createEditableElement(t,e,i={}){const r=new x0(this.document,t,e);return i.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),r}createEmptyElement(t,e,i={}){const r=new ZI(this.document,t,e);return i.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),r}createUIElement(t,e,i){const r=new R0(this.document,t,e);return i&&(r.render=i),r}createRawElement(t,e,i,r={}){const s=new JI(this.document,t,e);return i&&(s.render=i),r.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...r.renderUnsafeAttributes),s}setAttribute(t,e,i,r){r!==void 0?r._setAttribute(t,e,i):i._setAttribute(t,e)}removeAttribute(t,e,i){i!==void 0?i._removeAttribute(t,e):e._removeAttribute(t)}addClass(t,e){e._addClass(t)}removeClass(t,e){e._removeClass(t)}setStyle(t,e,i){aa(t)&&i===void 0?e._setStyle(t):i._setStyle(t,e)}removeStyle(t,e){e._removeStyle(t)}setCustomProperty(t,e,i){i._setCustomProperty(t,e)}removeCustomProperty(t,e){return e._removeCustomProperty(t)}breakAttributes(t){return t instanceof vt?this._breakAttributes(t):this._breakAttributesRange(t)}breakContainer(t){const e=t.parent;if(!e.is("containerElement"))throw new we("view-writer-break-non-container-element",this.document);if(!e.parent)throw new we("view-writer-break-root",this.document);if(t.isAtStart)return vt._createBefore(e);if(!t.isAtEnd){const i=e._clone(!1);this.insert(vt._createAfter(e),i);const r=new un(t,vt._createAt(e,"end")),s=new vt(i,0);this.move(r,s)}return vt._createAfter(e)}mergeAttributes(t){const e=t.offset,i=t.parent;if(i.is("$text"))return t;if(i.is("attributeElement")&&i.childCount===0){const o=i.parent,a=i.index;return i._remove(),this._removeFromClonedElementsGroup(i),this.mergeAttributes(new vt(o,a))}const r=i.getChild(e-1),s=i.getChild(e);if(!r||!s)return t;if(r.is("$text")&&s.is("$text"))return SD(r,s);if(r.is("attributeElement")&&s.is("attributeElement")&&r.isSimilar(s)){const o=r.childCount;return r._appendChild(s.getChildren()),s._remove(),this._removeFromClonedElementsGroup(s),this.mergeAttributes(new vt(r,o))}return t}mergeContainers(t){const e=t.nodeBefore,i=t.nodeAfter;if(!e||!i||!e.is("containerElement")||!i.is("containerElement"))throw new we("view-writer-merge-containers-invalid-position",this.document);const r=e.getChild(e.childCount-1),s=r instanceof Gr?vt._createAt(r,"end"):vt._createAt(e,"end");return this.move(un._createIn(i),vt._createAt(e,"end")),this.remove(un._createOn(i)),s}insert(t,e){e=po(e)?[...e]:[e],Dz(e,this.document);const i=e.reduce((o,a)=>{const l=o[o.length-1],c=!a.is("uiElement");return!l||l.breakAttributes!=c?o.push({breakAttributes:c,nodes:[a]}):l.nodes.push(a),o},[]);let r=null,s=t;for(const{nodes:o,breakAttributes:a}of i){const l=this._insertNodes(s,o,a);r||(r=l.start),s=l.end}return r?new un(r,s):new un(t)}remove(t){const e=t instanceof un?t:un._createOn(t);if(hg(e,this.document),e.isCollapsed)return new yd(this.document);const{start:i,end:r}=this._breakAttributesRange(e,!0),s=i.parent,o=r.offset-i.offset,a=s._removeChildren(i.offset,o);for(const c of a)this._removeFromClonedElementsGroup(c);const l=this.mergeAttributes(i);return e.start=l,e.end=l.clone(),new yd(this.document,a)}clear(t,e){hg(t,this.document);const i=t.getWalker({direction:"backward",ignoreElementEnd:!0});for(const r of i){const s=r.item;let o;if(s.is("element")&&e.isSimilar(s))o=un._createOn(s);else if(!r.nextPosition.isAfter(t.start)&&s.is("$textProxy")){const a=s.getAncestors().find(l=>l.is("element")&&e.isSimilar(l));a&&(o=un._createIn(a))}o&&(o.end.isAfter(t.end)&&(o.end=t.end),o.start.isBefore(t.start)&&(o.start=t.start),this.remove(o))}}move(t,e){let i;if(e.isAfter(t.end)){e=this._breakAttributes(e,!0);const r=e.parent,s=r.childCount;t=this._breakAttributesRange(t,!0),i=this.remove(t),e.offset+=r.childCount-s}else i=this.remove(t);return this.insert(e,i)}wrap(t,e){if(!(e instanceof wd))throw new we("view-writer-wrap-invalid-attribute",this.document);if(hg(t,this.document),t.isCollapsed){let i=t.start;i.parent.is("element")&&!F0e(i.parent)&&(i=i.getLastMatchingPosition(s=>s.item.is("uiElement"))),i=this._wrapPosition(i,e);const r=this.document.selection;return r.isCollapsed&&r.getFirstPosition().isEqual(t.start)&&this.setSelection(i),new un(i)}else return this._wrapRange(t,e)}unwrap(t,e){if(!(e instanceof wd))throw new we("view-writer-unwrap-invalid-attribute",this.document);if(hg(t,this.document),t.isCollapsed)return t;const{start:i,end:r}=this._breakAttributesRange(t,!0),s=i.parent,o=this._unwrapChildren(s,i.offset,r.offset,e),a=this.mergeAttributes(o.start);a.isEqual(o.start)||o.end.offset--;const l=this.mergeAttributes(o.end);return new un(a,l)}rename(t,e){const i=new Gp(this.document,t,e.getAttributes());return this.insert(vt._createAfter(e),i),this.move(un._createIn(e),vt._createAt(i,0)),this.remove(un._createOn(e)),i}clearClonedElementsGroup(t){this._cloneGroups.delete(t)}createPositionAt(t,e){return vt._createAt(t,e)}createPositionAfter(t){return vt._createAfter(t)}createPositionBefore(t){return vt._createBefore(t)}createRange(t,e){return new un(t,e)}createRangeOn(t){return un._createOn(t)}createRangeIn(t){return un._createIn(t)}createSelection(...t){return new Kl(...t)}createSlot(t="children"){if(!this._slotFactory)throw new we("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,t)}_registerSlotFactory(t){this._slotFactory=t}_clearSlotFactory(){this._slotFactory=null}_insertNodes(t,e,i){let r;if(i?r=xT(t):r=t.parent.is("$text")?t.parent.parent:t.parent,!r)throw new we("view-writer-invalid-position-container",this.document);let s;i?s=this._breakAttributes(t,!0):s=t.parent.is("$text")?Gk(t):t;const o=r._insertChild(s.offset,e);for(const u of e)this._addToClonedElementsGroup(u);const a=s.getShiftedBy(o),l=this.mergeAttributes(s);l.isEqual(s)||a.offset--;const c=this.mergeAttributes(a);return new un(l,c)}_wrapChildren(t,e,i,r){let s=e;const o=[];for(;s<i;){const l=t.getChild(s),c=l.is("$text"),u=l.is("attributeElement");if(u&&l._canMergeAttributesFrom(r))l._mergeAttributesFrom(r),o.push(new vt(t,s));else if(c||!u||U0e(r,l)){const d=r._clone();l._remove(),d._appendChild(l),t._insertChild(s,d),this._addToClonedElementsGroup(d),o.push(new vt(t,s))}else this._wrapChildren(l,0,l.childCount,r);s++}let a=0;for(const l of o){if(l.offset-=a,l.offset==e)continue;this.mergeAttributes(l).isEqual(l)||(a++,i--)}return un._createFromParentsAndOffsets(t,e,t,i)}_unwrapChildren(t,e,i,r){let s=e;const o=[];for(;s<i;){const l=t.getChild(s);if(!l.is("attributeElement")){s++;continue}if(l.isSimilar(r)){const c=l.getChildren(),u=l.childCount;l._remove(),t._insertChild(s,c),this._removeFromClonedElementsGroup(l),o.push(new vt(t,s),new vt(t,s+u)),s+=u,i+=u-1;continue}if(l._canSubtractAttributesOf(r)){l._subtractAttributesOf(r),o.push(new vt(t,s),new vt(t,s+1)),s++;continue}this._unwrapChildren(l,0,l.childCount,r),s++}let a=0;for(const l of o){if(l.offset-=a,l.offset==e||l.offset==i)continue;this.mergeAttributes(l).isEqual(l)||(a++,i--)}return un._createFromParentsAndOffsets(t,e,t,i)}_wrapRange(t,e){const{start:i,end:r}=this._breakAttributesRange(t,!0),s=i.parent,o=this._wrapChildren(s,i.offset,r.offset,e),a=this.mergeAttributes(o.start);a.isEqual(o.start)||o.end.offset--;const l=this.mergeAttributes(o.end);return new un(a,l)}_wrapPosition(t,e){if(e.isSimilar(t.parent))return TD(t.clone());t.parent.is("$text")&&(t=Gk(t));const i=this.createAttributeElement("_wrapPosition-fake-element");i._priority=Number.POSITIVE_INFINITY,i.isSimilar=()=>!1,t.parent._insertChild(t.offset,i);const r=new un(t,t.getShiftedBy(1));this.wrap(r,e);const s=new vt(i.parent,i.index);i._remove();const o=s.nodeBefore,a=s.nodeAfter;return o&&o.is("view:$text")&&a&&a.is("view:$text")?SD(o,a):TD(s)}_breakAttributesRange(t,e=!1){const i=t.start,r=t.end;if(hg(t,this.document),t.isCollapsed){const l=this._breakAttributes(t.start,e);return new un(l,l)}const s=this._breakAttributes(r,e),o=s.parent.childCount,a=this._breakAttributes(i,e);return s.offset+=s.parent.childCount-o,new un(a,s)}_breakAttributes(t,e=!1){const i=t.offset,r=t.parent;if(t.parent.is("emptyElement"))throw new we("view-writer-cannot-break-empty-element",this.document);if(t.parent.is("uiElement"))throw new we("view-writer-cannot-break-ui-element",this.document);if(t.parent.is("rawElement"))throw new we("view-writer-cannot-break-raw-element",this.document);if(!e&&r.is("$text")&&OT(r.parent)||OT(r))return t.clone();if(r.is("$text"))return this._breakAttributes(Gk(t),e);const s=r.childCount;if(i==s){const o=new vt(r.parent,r.index+1);return this._breakAttributes(o,e)}else if(i===0){const o=new vt(r.parent,r.index);return this._breakAttributes(o,e)}else{const o=r.index+1,a=r._clone();r.parent._insertChild(o,a),this._addToClonedElementsGroup(a);const l=r.childCount-i,c=r._removeChildren(i,l);a._appendChild(c);const u=new vt(r.parent,o);return this._breakAttributes(u,e)}}_addToClonedElementsGroup(t){if(!t.root.is("rootElement"))return;if(t.is("element"))for(const r of t.getChildren())this._addToClonedElementsGroup(r);const e=t.id;if(!e)return;let i=this._cloneGroups.get(e);i||(i=new Set,this._cloneGroups.set(e,i)),i.add(t),t._clonesGroup=i}_removeFromClonedElementsGroup(t){if(t.is("element"))for(const r of t.getChildren())this._removeFromClonedElementsGroup(r);const e=t.id;if(!e)return;const i=this._cloneGroups.get(e);i&&i.delete(t)}}function F0e(n){return Array.from(n.getChildren()).some(t=>!t.is("uiElement"))}function xT(n){let t=n.parent;for(;!OT(t);){if(!t)return;t=t.parent}return t}function U0e(n,t){return n.priority<t.priority?!0:n.priority>t.priority?!1:n.getIdentity()<t.getIdentity()}function TD(n){const t=n.nodeBefore;if(t&&t.is("$text"))return new vt(t,t.data.length);const e=n.nodeAfter;return e&&e.is("$text")?new vt(e,0):n}function Gk(n){if(n.offset==n.parent.data.length)return new vt(n.parent.parent,n.parent.index+1);if(n.offset===0)return new vt(n.parent.parent,n.parent.index);const t=n.parent.data.slice(n.offset);return n.parent._data=n.parent.data.slice(0,n.offset),n.parent.parent._insertChild(n.parent.index+1,new Gr(n.root.document,t)),new vt(n.parent.parent,n.parent.index+1)}function SD(n,t){const e=n.data.length;return n._data+=t.data,t._remove(),new vt(n,e)}const z0e=[Gr,wd,Gp,ZI,JI,R0];function Dz(n,t){for(const e of n){if(!z0e.some(i=>e instanceof i))throw new we("view-writer-insert-invalid-node-type",t);e.is("$text")||Dz(e.getChildren(),t)}}function OT(n){return n&&(n.is("containerElement")||n.is("documentFragment"))}function hg(n,t){const e=xT(n.start),i=xT(n.end);if(!e||!i||e!==i)throw new we("view-writer-invalid-range-container",t)}const Nz=n=>n.createTextNode(" "),Lz=n=>{const t=n.createElement("span");return t.dataset.ckeFiller="true",t.innerText=" ",t},Mz=n=>{const t=n.createElement("br");return t.dataset.ckeFiller="true",t},so=7,Kp="⁠".repeat(so);function _s(n){return typeof n=="string"?n.substr(0,so)===Kp:Oi(n)&&n.data.substr(0,so)===Kp}function ch(n){return n.data.length==so&&_s(n)}function AD(n){const t=typeof n=="string"?n:n.data;return _s(n)?t.slice(so):t}function H0e(n){n.document.on("arrowKey",W0e,{priority:"low"})}function W0e(n,t){if(t.keyCode==fn.arrowleft){const e=t.domTarget.ownerDocument.defaultView.getSelection();if(e.rangeCount==1&&e.getRangeAt(0).collapsed){const i=e.getRangeAt(0).startContainer,r=e.getRangeAt(0).startOffset;_s(i)&&r<=so&&e.collapse(i,0)}}}class j0e extends Wn(){constructor(e,i){super();y(this,"domDocuments",new Set);y(this,"domConverter");y(this,"markedAttributes",new Set);y(this,"markedChildren",new Set);y(this,"markedTexts",new Set);y(this,"selection");y(this,"_inlineFiller",null);y(this,"_fakeSelectionContainer",null);this.domConverter=e,this.selection=i,this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1),Vt.isBlink&&!Vt.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()})}markToSync(e,i){if(e==="text")this.domConverter.mapViewToDom(i.parent)&&this.markedTexts.add(i);else{if(!this.domConverter.mapViewToDom(i))return;if(e==="attributes")this.markedAttributes.add(i);else if(e==="children")this.markedChildren.add(i);else throw new we("view-renderer-unknown-type",this)}}render(){if(this.isComposing&&!Vt.isAndroid)return;let e=null;const i=Vt.isBlink&&!Vt.isAndroid?!this.isSelecting:!0;for(const r of this.markedChildren)this._updateChildrenMappings(r);i?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(e=this.domConverter.domPositionToView(this._inlineFiller),e&&e.parent.is("$text")&&(e=vt._createBefore(e.parent)));for(const r of this.markedAttributes)this._updateAttrs(r);for(const r of this.markedChildren)this._updateChildren(r,{inlineFillerPosition:e});for(const r of this.markedTexts)!this.markedChildren.has(r.parent)&&this.domConverter.mapViewToDom(r.parent)&&this._updateText(r,{inlineFillerPosition:e});if(i)if(e){const r=this.domConverter.viewPositionToDom(e),s=r.parent.ownerDocument;_s(r.parent)?this._inlineFiller=r.parent:this._inlineFiller=ID(s,r.parent,r.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.domConverter._clearTemporaryCustomProperties(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(e){const i=this.domConverter.mapViewToDom(e);if(!i)return;const r=Array.from(i.childNodes),s=Array.from(this.domConverter.viewChildrenToDom(e,{withChildren:!1})),o=this._diffNodeLists(r,s),a=this._findUpdateActions(o,r,s,G0e);if(a.indexOf("update")!==-1){const l={equal:0,insert:0,delete:0};for(const c of a)if(c==="update"){const u=l.equal+l.insert,d=l.equal+l.delete,f=e.getChild(u);f&&!f.is("uiElement")&&!f.is("rawElement")&&this._updateElementMappings(f,r[d]),hD(s[u]),l.equal++}else l[c]++}}_updateElementMappings(e,i){this.domConverter.unbindDomElement(i),this.domConverter.bindElements(i,e),this.markedChildren.add(e),this.markedAttributes.add(e)}_getInlineFillerPosition(){const e=this.selection.getFirstPosition();return e.parent.is("$text")?vt._createBefore(e.parent):e}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),i=this.domConverter.viewPositionToDom(e);return!!(i&&Oi(i.parent)&&_s(i.parent))}_removeInlineFiller(){const e=this._inlineFiller;if(!_s(e))throw new we("view-renderer-filler-was-lost",this);ch(e)?e.remove():e.data=e.data.substr(so),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),i=e.parent,r=e.offset;if(!this.domConverter.mapViewToDom(i.root)||!i.is("element")||!q0e(i))return!1;const s=e.nodeBefore,o=e.nodeAfter;return!(s instanceof Gr||o instanceof Gr||r===i.getFillerOffset()&&(!s||!s.is("element","br"))||Vt.isAndroid&&(s||o))}_updateText(e,i){const r=this.domConverter.findCorrespondingDomText(e);let o=this.domConverter.viewToDom(e).data;const a=i.inlineFillerPosition;a&&a.parent==e.parent&&a.offset==e.index&&(o=Kp+o),this._updateTextNode(r,o)}_updateAttrs(e){const i=this.domConverter.mapViewToDom(e);if(i){for(const r of Array.from(i.attributes)){const s=r.name;e.hasAttribute(s)||this.domConverter.removeDomElementAttribute(i,s)}for(const r of e.getAttributeKeys())this.domConverter.setDomElementAttribute(i,r,e.getAttribute(r),e)}}_updateChildren(e,i){const r=this.domConverter.mapViewToDom(e);if(!r)return;if(Vt.isAndroid){let f=null;for(const h of Array.from(r.childNodes)){if(f&&Oi(f)&&Oi(h)){r.normalize();break}f=h}}const s=i.inlineFillerPosition,o=r.childNodes,a=Array.from(this.domConverter.viewChildrenToDom(e,{bind:!0}));s&&s.parent===e&&ID(r.ownerDocument,a,s.offset);const l=this._diffNodeLists(o,a),c=this._findUpdateActions(l,o,a,K0e);let u=0;const d=new Set;for(const f of c)f==="delete"?(d.add(o[u]),hD(o[u])):(f==="equal"||f==="update")&&u++;u=0;for(const f of c)f==="insert"?(yz(r,u,a[u]),u++):f==="update"?(this._updateTextNode(o[u],a[u].data),u++):f==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(a[u])),u++);for(const f of d)f.parentNode||this.domConverter.unbindDomElement(f)}_diffNodeLists(e,i){return e=Z0e(e,this._fakeSelectionContainer),Ah(e,i,Y0e.bind(null,this.domConverter))}_findUpdateActions(e,i,r,s){if(e.indexOf("insert")===-1||e.indexOf("delete")===-1)return e;let o=[],a=[],l=[];const c={equal:0,insert:0,delete:0};for(const u of e)u==="insert"?l.push(r[c.equal+c.insert]):u==="delete"?a.push(i[c.equal+c.delete]):(o=o.concat(Ah(a,l,s).map(d=>d==="equal"?"update":d)),o.push("equal"),a=[],l=[]),c[u]++;return o.concat(Ah(a,l,s).map(u=>u==="equal"?"update":u))}_updateTextNode(e,i){const r=e.data;r!=i&&(Vt.isAndroid&&this.isComposing&&r.replace(/\u00A0/g," ")==i.replace(/\u00A0/g," ")||this._updateTextNodeInternal(e,i))}_updateTextNodeInternal(e,i){const r=nz(e.data,i);for(const s of r)s.type==="insert"?e.insertData(s.index,s.values.join("")):e.deleteData(s.index,s.howMany)}_markDescendantTextToSync(e){if(e){if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element"))for(const i of e.getChildren())this._markDescendantTextToSync(i)}}_updateSelection(){if(Vt.isBlink&&!Vt.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0){this._removeDomSelection(),this._removeFakeSelection();return}const e=this.domConverter.mapViewToDom(this.selection.editableElement);if(!this.isFocused||!e){!this.selection.isFake&&this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected&&this._removeFakeSelection();return}this.selection.isFake?this._updateFakeSelection(e):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(e)):this.isComposing&&Vt.isAndroid||this._updateDomSelection(e)}_updateFakeSelection(e){const i=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=J0e(i));const r=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(r,this.selection),!this._fakeSelectionNeedsUpdate(e))return;(!r.parentElement||r.parentElement!=e)&&e.appendChild(r),r.textContent=this.selection.fakeSelectionLabel||" ";const s=i.getSelection(),o=i.createRange();s.removeAllRanges(),o.selectNodeContents(r),s.addRange(o)}_updateDomSelection(e){const i=e.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(i))return;const r=this.domConverter.viewPositionToDom(this.selection.anchor),s=this.domConverter.viewPositionToDom(this.selection.focus);i.setBaseAndExtent(r.parent,r.offset,s.parent,s.offset),Vt.isGecko&&Q0e(s,i)}_domSelectionNeedsUpdate(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;const i=e&&this.domConverter.domSelectionToView(e);return!(i&&this.selection.isEqual(i)||!this.selection.isCollapsed&&this.selection.isSimilar(i))}_fakeSelectionNeedsUpdate(e){const i=this._fakeSelectionContainer,r=e.ownerDocument.getSelection();return!i||i.parentElement!==e||r.anchorNode!==i&&!i.contains(r.anchorNode)?!0:i.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const e of this.domDocuments){const i=e.getSelection();if(i.rangeCount){const r=e.activeElement,s=this.domConverter.mapDomToView(r);r&&s&&i.removeAllRanges()}}}_removeFakeSelection(){const e=this._fakeSelectionContainer;e&&e.remove()}_updateFocus(){if(this.isFocused){const e=this.selection.editableElement;e&&this.domConverter.focus(e)}}}function q0e(n){if(n.getAttribute("contenteditable")=="false")return!1;const t=n.findAncestor(e=>e.hasAttribute("contenteditable"));return!t||t.getAttribute("contenteditable")=="true"}function ID(n,t,e){const i=t instanceof Array?t:t.childNodes,r=i[e];if(Oi(r))return r.data=Kp+r.data,r;{const s=n.createTextNode(Kp);return Array.isArray(t)?i.splice(e,0,s):yz(t,e,s),s}}function G0e(n,t){return bu(n)&&bu(t)&&!Oi(n)&&!Oi(t)&&!lp(n)&&!lp(t)&&n.tagName.toLowerCase()===t.tagName.toLowerCase()}function K0e(n,t){return bu(n)&&bu(t)&&Oi(n)&&Oi(t)}function Y0e(n,t,e){return t===e?!0:Oi(t)&&Oi(e)?t.data===e.data:!!(n.isBlockFiller(t)&&n.isBlockFiller(e))}function Q0e(n,t){let e=n.parent,i=n.offset;if(Oi(e)&&ch(e)&&(i=lh(e)+1,e=e.parentNode),e.nodeType!=Node.ELEMENT_NODE||i!=e.childNodes.length-1)return;const r=e.childNodes[i];r&&r.tagName=="BR"&&t.addRange(t.getRangeAt(0))}function Z0e(n,t){const e=Array.from(n);return e.length==0||!t||e[e.length-1]==t&&e.pop(),e}function J0e(n){const t=n.createElement("div");return t.className="ck-fake-selection-container",Object.assign(t.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),t.textContent=" ",t}const X0e=Mz(at.document),e1e=Nz(at.document),t1e=Lz(at.document),Ab="data-ck-unsafe-attribute-",PD="data-ck-unsafe-element";class V0{constructor(t,{blockFillerMode:e,renderingMode:i="editing"}={}){y(this,"document");y(this,"renderingMode");y(this,"blockFillerMode");y(this,"preElements");y(this,"blockElements");y(this,"inlineObjectElements");y(this,"unsafeElements");y(this,"_domDocument");y(this,"_domToViewMapping",new WeakMap);y(this,"_viewToDomMapping",new WeakMap);y(this,"_fakeSelectionMapping",new WeakMap);y(this,"_rawContentElementMatcher",new Vs);y(this,"_inlineObjectElementMatcher",new Vs);y(this,"_elementsWithTemporaryCustomProperties",new Set);this.document=t,this.renderingMode=i,this.blockFillerMode=e||(i==="editing"?"br":"nbsp"),this.preElements=["pre","textarea"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?at.document:at.document.implementation.createHTMLDocument("")}get domDocument(){return this._domDocument}bindFakeSelection(t,e){this._fakeSelectionMapping.set(t,new Kl(e))}fakeSelectionToView(t){return this._fakeSelectionMapping.get(t)}bindElements(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t)}unbindDomElement(t){const e=this._domToViewMapping.get(t);if(e){this._domToViewMapping.delete(t),this._viewToDomMapping.delete(e);for(const i of t.children)this.unbindDomElement(i)}}bindDocumentFragments(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t)}shouldRenderAttribute(t,e,i){return this.renderingMode==="data"?!0:(t=t.toLowerCase(),t.startsWith("on")||t==="srcdoc"&&e.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)?!1:i==="img"&&(t==="src"||t==="srcset")||i==="source"&&t==="srcset"?!0:!e.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(t,e){if(this.renderingMode==="data"){t.innerHTML=e;return}const i=new DOMParser().parseFromString(e,"text/html"),r=i.createDocumentFragment(),s=i.body.childNodes;for(;s.length>0;)r.appendChild(s[0]);const o=i.createTreeWalker(r,NodeFilter.SHOW_ELEMENT),a=[];let l;for(;l=o.nextNode();)a.push(l);for(const c of a){for(const d of c.getAttributeNames())this.setDomElementAttribute(c,d,c.getAttribute(d));const u=c.tagName.toLowerCase();this._shouldRenameElement(u)&&(VD(u),c.replaceWith(this._createReplacementDomElement(u,c)))}for(;t.firstChild;)t.firstChild.remove();t.append(r)}viewToDom(t,e={}){if(t.is("$text")){const i=this._processDataFromViewText(t);return this._domDocument.createTextNode(i)}else{const i=t;if(this.mapViewToDom(i))if(i.getCustomProperty("editingPipeline:doNotReuseOnce"))this._elementsWithTemporaryCustomProperties.add(i);else return this.mapViewToDom(i);let r;if(i.is("documentFragment"))r=this._domDocument.createDocumentFragment(),e.bind&&this.bindDocumentFragments(r,i);else{if(i.is("uiElement"))return i.name==="$comment"?r=this._domDocument.createComment(i.getCustomProperty("$rawContent")):r=i.render(this._domDocument,this),e.bind&&this.bindElements(r,i),r;this._shouldRenameElement(i.name)?(VD(i.name),r=this._createReplacementDomElement(i.name)):i.hasAttribute("xmlns")?r=this._domDocument.createElementNS(i.getAttribute("xmlns"),i.name):r=this._domDocument.createElement(i.name),i.is("rawElement")&&i.render(r,this),e.bind&&this.bindElements(r,i);for(const s of i.getAttributeKeys())this.setDomElementAttribute(r,s,i.getAttribute(s),i)}if(e.withChildren!==!1)for(const s of this.viewChildrenToDom(i,e))r instanceof HTMLTemplateElement?r.content.appendChild(s):r.appendChild(s);return r}}setDomElementAttribute(t,e,i,r){const s=this.shouldRenderAttribute(e,i,t.tagName.toLowerCase())||r&&r.shouldRenderUnsafeAttribute(e);if(s||mn("domconverter-unsafe-attribute-detected",{domElement:t,key:e,value:i}),!_z(e)){mn("domconverter-invalid-attribute-detected",{domElement:t,key:e,value:i});return}t.hasAttribute(e)&&!s?t.removeAttribute(e):t.hasAttribute(Ab+e)&&s&&t.removeAttribute(Ab+e),t.setAttribute(s?e:Ab+e,i)}removeDomElementAttribute(t,e){e!=PD&&(t.removeAttribute(e),t.removeAttribute(Ab+e))}*viewChildrenToDom(t,e={}){const i=t.getFillerOffset&&t.getFillerOffset();let r=0;for(const s of t.getChildren()){i===r&&(yield this._getBlockFiller());const o=s.is("element")&&!!s.getCustomProperty("dataPipeline:transparentRendering")&&!gi(s.getAttributes());if(o&&this.renderingMode=="data")if(s.is("rawElement")){const a=this._domDocument.createElement(s.name);s.render(a,this),yield*[...a.childNodes]}else yield*this.viewChildrenToDom(s,e);else o&&mn("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:s}),yield this.viewToDom(s,e);r++}i===r&&(yield this._getBlockFiller())}viewRangeToDom(t){const e=this.viewPositionToDom(t.start),i=this.viewPositionToDom(t.end),r=this._domDocument.createRange();return r.setStart(e.parent,e.offset),r.setEnd(i.parent,i.offset),r}viewPositionToDom(t){const e=t.parent;if(e.is("$text")){const i=this.findCorrespondingDomText(e);if(!i)return null;let r=t.offset;return _s(i)&&(r+=so),i.data&&r>i.data.length&&(r=i.data.length),{parent:i,offset:r}}else{let i,r,s;if(t.offset===0){if(i=this.mapViewToDom(e),!i)return null;s=i.childNodes[0]}else{const a=t.nodeBefore;if(r=a.is("$text")?this.findCorrespondingDomText(a):this.mapViewToDom(a),!r)return null;i=r.parentNode,s=r.nextSibling}if(Oi(s)&&_s(s))return{parent:s,offset:so};const o=r?lh(r)+1:0;return{parent:i,offset:o}}}domToView(t,e={}){const i=[],r=this._domToView(t,e,i),s=r.next().value;return!s||(r.next(),this._processDomInlineNodes(null,i,e),this.blockFillerMode=="br"&&OD(s))||s.is("$text")&&s.data.length==0?null:s}*domChildrenToView(t,e={},i=[]){let r=[];t instanceof HTMLTemplateElement?r=[...t.content.childNodes]:r=[...t.childNodes];for(let s=0;s<r.length;s++){const o=r[s],a=this._domToView(o,e,i),l=a.next().value;l!==null&&(this._isBlockViewElement(l)&&this._processDomInlineNodes(t,i,e),this.blockFillerMode=="br"&&OD(l)||(yield l),a.next())}this._processDomInlineNodes(t,i,e)}domSelectionToView(t){if(o1e(t))return new Kl([]);if(t.rangeCount===1){let r=t.getRangeAt(0).startContainer;Oi(r)&&(r=r.parentNode);const s=this.fakeSelectionToView(r);if(s)return s}const e=this.isDomSelectionBackward(t),i=[];for(let r=0;r<t.rangeCount;r++){const s=t.getRangeAt(r),o=this.domRangeToView(s);o&&i.push(o)}return new Kl(i,{backward:e})}domRangeToView(t){const e=this.domPositionToView(t.startContainer,t.startOffset),i=this.domPositionToView(t.endContainer,t.endOffset);return e&&i?new un(e,i):null}domPositionToView(t,e=0){if(this.isBlockFiller(t))return this.domPositionToView(t.parentNode,lh(t));const i=this.mapDomToView(t);if(i&&(i.is("uiElement")||i.is("rawElement")))return vt._createBefore(i);if(Oi(t)){if(ch(t))return this.domPositionToView(t.parentNode,lh(t));const r=this.findCorrespondingViewText(t);let s=e;return r?(_s(t)&&(s-=so,s=s<0?0:s),new vt(r,s)):null}else{if(e===0){const r=this.mapDomToView(t);if(r)return new vt(r,0)}else{const r=t.childNodes[e-1];if(Oi(r)&&ch(r)||r&&this.isBlockFiller(r))return this.domPositionToView(r.parentNode,lh(r));const s=Oi(r)?this.findCorrespondingViewText(r):this.mapDomToView(r);if(s&&s.parent)return new vt(s.parent,s.index+1)}return null}}mapDomToView(t){return this.getHostViewElement(t)||this._domToViewMapping.get(t)}findCorrespondingViewText(t){if(ch(t))return null;const e=this.getHostViewElement(t);if(e)return e;const i=t.previousSibling;if(i){if(!this.isElement(i))return null;const r=this.mapDomToView(i);if(r){const s=r.nextSibling;return s instanceof Gr?s:null}}else{const r=this.mapDomToView(t.parentNode);if(r){const s=r.getChild(0);return s instanceof Gr?s:null}}return null}mapViewToDom(t){return this._viewToDomMapping.get(t)}findCorrespondingDomText(t){const e=t.previousSibling;return e&&this.mapViewToDom(e)?this.mapViewToDom(e).nextSibling:!e&&t.parent&&this.mapViewToDom(t.parent)?this.mapViewToDom(t.parent).childNodes[0]:null}focus(t){const e=this.mapViewToDom(t);if(!e||e.ownerDocument.activeElement===e)return;const{scrollX:i,scrollY:r}=at.window,s=[];xD(e,o=>{const{scrollLeft:a,scrollTop:l}=o;s.push([a,l])}),e.focus(),xD(e,o=>{const[a,l]=s.shift();o.scrollLeft=a,o.scrollTop=l}),at.window.scrollTo(i,r)}_clearDomSelection(){const t=this.mapViewToDom(this.document.selection.editableElement);if(!t)return;const e=t.ownerDocument.defaultView.getSelection(),i=this.domSelectionToView(e);i&&i.rangeCount>0&&e.removeAllRanges()}isElement(t){return t&&t.nodeType==Node.ELEMENT_NODE}isDocumentFragment(t){return t&&t.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(t){return this.blockFillerMode=="br"?t.isEqualNode(X0e):RD(t,this.blockElements)?!0:t.isEqualNode(t1e)||i1e(t,this.blockElements)}isDomSelectionBackward(t){if(t.isCollapsed)return!1;const e=this._domDocument.createRange();try{e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset)}catch{return!1}const i=e.collapsed;return e.detach(),i}getHostViewElement(t){const e=gz(t);for(e.pop();e.length;){const i=e.pop(),r=this._domToViewMapping.get(i);if(r&&(r.is("uiElement")||r.is("rawElement")))return r}return null}isDomSelectionCorrect(t){return this._isDomSelectionPositionCorrect(t.anchorNode,t.anchorOffset)&&this._isDomSelectionPositionCorrect(t.focusNode,t.focusOffset)}registerRawContentMatcher(t){this._rawContentElementMatcher.add(t)}registerInlineObjectMatcher(t){this._inlineObjectElementMatcher.add(t)}_clearTemporaryCustomProperties(){for(const t of this._elementsWithTemporaryCustomProperties)t._removeCustomProperty("editingPipeline:doNotReuseOnce");this._elementsWithTemporaryCustomProperties.clear()}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return Nz(this._domDocument);case"markedNbsp":return Lz(this._domDocument);case"br":return Mz(this._domDocument)}}_isDomSelectionPositionCorrect(t,e){if(Oi(t)&&_s(t)&&e<so||this.isElement(t)&&_s(t.childNodes[e]))return!1;const i=this.mapDomToView(t);return!(i&&(i.is("uiElement")||i.is("rawElement")))}*_domToView(t,e,i){if(this.blockFillerMode!="br"&&RD(t,this.blockElements))return null;const r=this.getHostViewElement(t);if(r)return r;if(lp(t)&&e.skipComments)return null;if(Oi(t)){if(ch(t))return null;{const s=t.data;if(s==="")return null;const o=new Gr(this.document,s);return i.push(o),o}}else{let s=this.mapDomToView(t);if(s)return this._isInlineObjectElement(s)&&i.push(s),s;if(this.isDocumentFragment(t))s=new yd(this.document),e.bind&&this.bindDocumentFragments(t,s);else{s=this._createViewElement(t,e),e.bind&&this.bindElements(t,s);const a=t.attributes;if(a)for(let l=a.length,c=0;c<l;c++)s._setAttribute(a[c].name,a[c].value);if(this._isViewElementWithRawContent(s,e))return s._setCustomProperty("$rawContent",t.innerHTML),this._isBlockViewElement(s)||i.push(s),s;if(lp(t))return s._setCustomProperty("$rawContent",t.data),s}yield s;const o=[];if(e.withChildren!==!1)for(const a of this.domChildrenToView(t,e,o))s._appendChild(a);if(this._isInlineObjectElement(s))i.push(s),this._processDomInlineNodes(null,o,e);else for(const a of o)i.push(a)}}_processDomInlineNodes(t,e,i){if(!e.length||t&&!this.isDocumentFragment(t)&&!this._isBlockDomElement(t))return;let r=!1;for(let s=0;s<e.length;s++){const o=e[s];if(!o.is("$text")){r=!1;continue}let a,l=!1;if(this._isPreFormatted(o))a=AD(o.data);else{a=o.data.replace(/[ \n\t\r]{1,}/g," "),l=/[^\S\u00A0]/.test(a.charAt(a.length-1));const c=s>0?e[s-1]:null,u=s+1<e.length?e[s+1]:null,d=!c||c.is("element")&&c.name=="br"||r,f=u?!1:!_s(o.data);i.withChildren!==!1&&(d&&(a=a.replace(/^ /,"")),f&&(a=a.replace(/ $/,""))),a=AD(a),this.blockFillerMode!="br"&&o.parent&&(s1e(o.parent,a)?(a="",o.parent.parent&&(o.parent.parent._setCustomProperty("$hasBlockFiller",!0),o.parent._remove())):r1e(o.parent,a,this.blockElements)&&(a="",o.parent._setCustomProperty("$hasBlockFiller",!0))),a=a.replace(/ \u00A0/g,"  ");const h=u&&u.is("element")&&u.name!="br",g=u&&u.is("$text")&&u.data.charAt(0)==" ";(/[ \u00A0]\u00A0$/.test(a)||!u||h||g)&&(a=a.replace(/\u00A0$/," ")),(d||c&&c.is("element")&&c.name!="br")&&(a=a.replace(/^\u00A0/," "))}a.length==0&&o.parent?(o._remove(),e.splice(s,1),s--):(o._data=a,r=l)}e.length=0}_processDataFromViewText(t){let e=t.data;if(this._isPreFormatted(t))return e;if(e.charAt(0)==" "){const i=this._getTouchingInlineViewNode(t,!1);(i&&i.is("$textProxy")&&this._nodeEndsWithSpace(i)||!i)&&(e=" "+e.substr(1))}if(e.charAt(e.length-1)==" "){const i=this._getTouchingInlineViewNode(t,!0),r=i&&i.is("$textProxy")&&i.data.charAt(0)==" ";(e.charAt(e.length-2)==" "||!i||r)&&(e=e.substr(0,e.length-1)+" ")}return e.replace(/ {2}/g,"  ")}_nodeEndsWithSpace(t){if(this._isPreFormatted(t))return!1;const e=this._processDataFromViewText(t);return e.charAt(e.length-1)==" "}_isPreFormatted(t){if(n1e(t,this.preElements))return!0;for(const e of t.getAncestors({parentFirst:!0}))if(!(!e.is("element")||!e.hasStyle("white-space")||e.getStyle("white-space")==="inherit"))return["pre","pre-wrap","break-spaces"].includes(e.getStyle("white-space"));return!1}_getTouchingInlineViewNode(t,e){const i=new ud({startPosition:e?vt._createAfter(t):vt._createBefore(t),direction:e?"forward":"backward"});for(const{item:r}of i){if(r.is("$textProxy"))return r;if(r.is("element")&&r.getCustomProperty("dataPipeline:transparentRendering"))continue;if(r.is("element","br"))return null;if(this._isInlineObjectElement(r))return r;if(r.is("containerElement"))return null}return null}_isBlockDomElement(t){return this.isElement(t)&&this.blockElements.includes(t.tagName.toLowerCase())}_isBlockViewElement(t){return t.is("element")&&this.blockElements.includes(t.name)}_isInlineObjectElement(t){return t.is("element")?t.name=="br"||this.inlineObjectElements.includes(t.name)||!!this._inlineObjectElementMatcher.match(t):!1}_createViewElement(t,e){if(lp(t))return new R0(this.document,"$comment");const i=e.keepOriginalCase?t.tagName:t.tagName.toLowerCase();return new rc(this.document,i)}_isViewElementWithRawContent(t,e){return e.withChildren!==!1&&t.is("element")&&!!this._rawContentElementMatcher.match(t)}_shouldRenameElement(t){const e=t.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(e)}_createReplacementDomElement(t,e){const i=this._domDocument.createElement("span");if(i.setAttribute(PD,t),e){for(;e.firstChild;)i.appendChild(e.firstChild);for(const r of e.getAttributeNames())i.setAttribute(r,e.getAttribute(r))}return i}}function n1e(n,t){return n.getAncestors().some(e=>e.is("element")&&t.includes(e.name))}function xD(n,t){let e=n;for(;e;)t(e),e=e.parentElement}function i1e(n,t){return n.isEqualNode(e1e)&&$z(n,t)&&n.parentNode.childNodes.length===1}function $z(n,t){const e=n.parentNode;return!!e&&!!e.tagName&&t.includes(e.tagName.toLowerCase())}function r1e(n,t,e){return t==" "&&n&&n.is("element")&&n.childCount==1&&e.includes(n.name)}function s1e(n,t){return t==" "&&n&&n.is("element","span")&&n.childCount==1&&n.hasAttribute("data-cke-filler")}function OD(n){return n.is("element","br")&&n.hasAttribute("data-cke-filler")}function RD(n,t){return n.tagName==="BR"&&$z(n,t)&&n.parentNode.childNodes.length===1}function VD(n){n==="script"&&mn("domconverter-unsafe-script-element-detected"),n==="style"&&mn("domconverter-unsafe-style-element-detected")}function o1e(n){if(!Vt.isGecko||!n.rangeCount)return!1;const t=n.getRangeAt(0).startContainer;try{Object.prototype.toString.call(t)}catch{return!0}return!1}class Aa extends ds(){constructor(e){super();y(this,"view");y(this,"document");y(this,"_isEnabled",!1);this.view=e,this.document=e.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(e){return e&&e.nodeType===3&&(e=e.parentNode),!e||e.nodeType!==1?!1:e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}class Dd{constructor(t,e,i){y(this,"view");y(this,"document");y(this,"domEvent");y(this,"domTarget");this.view=t,this.document=t.document,this.domEvent=e,this.domTarget=e.target,J6(this,i)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class vl extends Aa{constructor(){super(...arguments);y(this,"useCapture",!1);y(this,"usePassive",!1)}observe(e){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(r=>{this.listenTo(e,r,(s,o)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(o.target)&&this.onDomEvent(o)},{useCapture:this.useCapture,usePassive:this.usePassive})})}stopObserving(e){this.stopListening(e)}fire(e,i,r){this.isEnabled&&this.document.fire(e,new Dd(this.view,i,r))}}class a1e extends vl{constructor(){super(...arguments);y(this,"domEventType",["keydown","keyup"])}onDomEvent(e){const i={keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return Vd(this)}};this.fire(e.type,e,i)}}class l1e extends Aa{constructor(e){super(e);y(this,"_fireSelectionChangeDoneDebounced");this._fireSelectionChangeDoneDebounced=go(i=>{this.document.fire("selectionChangeDone",i)},200)}observe(){const e=this.document;e.on("arrowKey",(i,r)=>{e.selection.isFake&&this.isEnabled&&r.preventDefault()},{context:"$capture"}),e.on("arrowKey",(i,r)=>{e.selection.isFake&&this.isEnabled&&this._handleSelectionMove(r.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(e){const i=this.document.selection,r=new Kl(i.getRanges(),{backward:i.isBackward,fake:!1});(e==fn.arrowleft||e==fn.arrowup)&&r.setTo(r.getFirstPosition()),(e==fn.arrowright||e==fn.arrowdown)&&r.setTo(r.getLastPosition());const s={oldSelection:i,newSelection:r,domSelection:null};this.document.fire("selectionChange",s),this._fireSelectionChangeDoneDebounced(s)}}let Bz=class extends Aa{constructor(e){super(e);y(this,"domConverter");y(this,"_config");y(this,"_domElements");y(this,"_mutationObserver");this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=e.domConverter,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(e){this._domElements.add(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}stopObserving(e){if(this._domElements.delete(e),this.isEnabled){this._mutationObserver.disconnect();for(const i of this._domElements)this._mutationObserver.observe(i,this._config)}}enable(){super.enable();for(const e of this._domElements)this._mutationObserver.observe(e,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(e){if(e.length===0)return;const i=this.domConverter,r=new Set,s=new Set;for(const a of e){const l=i.mapDomToView(a.target);l&&(l.is("uiElement")||l.is("rawElement")||a.type==="childList"&&!this._isBogusBrMutation(a)&&s.add(l))}for(const a of e){const l=i.mapDomToView(a.target);if(!(l&&(l.is("uiElement")||l.is("rawElement")))&&a.type==="characterData"){const c=i.findCorrespondingViewText(a.target);c&&!s.has(c.parent)?r.add(c):!c&&_s(a.target)&&s.add(i.mapDomToView(a.target.parentNode))}}const o=[];for(const a of r)o.push({type:"text",node:a});for(const a of s){const l=i.mapViewToDom(a),c=Array.from(a.getChildren()),u=Array.from(i.domChildrenToView(l,{withChildren:!1}));_T(c,u,c1e)||o.push({type:"children",node:a})}o.length&&this.document.fire("mutations",{mutations:o})}_isBogusBrMutation(e){let i=null;return e.nextSibling===null&&e.removedNodes.length===0&&e.addedNodes.length==1&&(i=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),i&&i.is("element","br")}};function c1e(n,t){if(!Array.isArray(n))return n===t?!0:n.is("$text")&&t.is("$text")?n.data===t.data:!1}class Ly extends vl{constructor(e){super(e);y(this,"_renderTimeoutId",null);y(this,"_isFocusChanging",!1);y(this,"domEventType",["focus","blur"]);this.useCapture=!0;const i=this.document;i.on("focus",()=>this._handleFocus()),i.on("blur",(r,s)=>this._handleBlur(s)),i.on("beforeinput",()=>{i.isFocused||this._handleFocus()},{priority:"highest"})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(e){this.fire(e.type,e)}destroy(){this._clearTimeout(),super.destroy()}_handleFocus(){this._clearTimeout(),this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this._renderTimeoutId=null,this.flush(),this.view.change(()=>{})},50)}_handleBlur(e){const i=this.document.selection.editableElement;(i===null||i===e.target)&&(this.document.isFocused=!1,this._isFocusChanging=!1,this.view.change(()=>{}))}_clearTimeout(){this._renderTimeoutId&&(clearTimeout(this._renderTimeoutId),this._renderTimeoutId=null)}}class u1e extends Aa{constructor(e){super(e);y(this,"mutationObserver");y(this,"focusObserver");y(this,"selection");y(this,"domConverter");y(this,"_documents",new WeakSet);y(this,"_fireSelectionChangeDoneDebounced");y(this,"_clearInfiniteLoopInterval");y(this,"_documentIsSelectingInactivityTimeoutDebounced");y(this,"_loopbackCounter",0);y(this,"_pendingSelectionChange",new Set);this.mutationObserver=e.getObserver(Bz),this.focusObserver=e.getObserver(Ly),this.selection=this.document.selection,this.domConverter=e.domConverter,this._fireSelectionChangeDoneDebounced=go(i=>{this.document.fire("selectionChangeDone",i)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=go(()=>this.document.isSelecting=!1,5e3),this.view.document.on("change:isFocused",(i,r,s)=>{if(s&&this._pendingSelectionChange.size){for(const o of Array.from(this._pendingSelectionChange))this._handleSelectionChange(o);this._pendingSelectionChange.clear()}})}observe(e){const i=e.ownerDocument,r=()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},s=()=>{this.document.isSelecting&&(this._handleSelectionChange(i),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(e,"selectstart",r,{priority:"highest"}),this.listenTo(e,"keydown",s,{priority:"highest",useCapture:!0}),this.listenTo(e,"keyup",s,{priority:"highest",useCapture:!0}),!this._documents.has(i)&&(this.listenTo(i,"mouseup",s,{priority:"highest",useCapture:!0}),this.listenTo(i,"selectionchange",()=>{this.document.isComposing&&!Vt.isAndroid||(this._handleSelectionChange(i),this._documentIsSelectingInactivityTimeoutDebounced())}),this.listenTo(this.view.document,"compositionstart",()=>{this._handleSelectionChange(i)},{priority:"lowest"}),this._documents.add(i))}stopObserving(e){this.stopListening(e)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_reportInfiniteLoop(){}_handleSelectionChange(e){if(!this.isEnabled)return;const i=e.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(i.anchorNode))return;this.mutationObserver.flush();const r=this.domConverter.domSelectionToView(i);if(r.rangeCount==0){this.view.hasDomSelection=!1;return}if(this.view.hasDomSelection=!0,this.focusObserver.flush(),!this.view.document.isFocused&&!this.view.document.isReadOnly){this._pendingSelectionChange.add(e);return}if(this._pendingSelectionChange.delete(e),!(this.selection.isEqual(r)&&this.domConverter.isDomSelectionCorrect(i))){if(++this._loopbackCounter>60){this._reportInfiniteLoop();return}if(this.selection.isSimilar(r))this.view.forceRender();else{const s={oldSelection:this.selection,newSelection:r,domSelection:i};this.document.fire("selectionChange",s),this._fireSelectionChangeDoneDebounced(s)}}}_clearInfiniteLoop(){this._loopbackCounter=0}}class d1e extends vl{constructor(e){super(e);y(this,"domEventType",["compositionstart","compositionupdate","compositionend"]);const i=this.document;i.on("compositionstart",()=>{i.isComposing=!0}),i.on("compositionend",()=>{i.isComposing=!1})}onDomEvent(e){this.fire(e.type,e,{data:e.data})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Fz{constructor(t,e={}){y(this,"_files");y(this,"_native");this._files=e.cacheFiles?DD(t):null,this._native=t}get files(){return this._files||(this._files=DD(this._native)),this._files}get types(){return this._native.types}getData(t){return this._native.getData(t)}setData(t,e){this._native.setData(t,e)}set effectAllowed(t){this._native.effectAllowed=t}get effectAllowed(){return this._native.effectAllowed}set dropEffect(t){this._native.dropEffect=t}get dropEffect(){return this._native.dropEffect}setDragImage(t,e,i){this._native.setDragImage(t,e,i)}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}}function DD(n){const t=Array.from(n.files||[]),e=Array.from(n.items||[]);return t.length?t:e.filter(i=>i.kind==="file").map(i=>i.getAsFile())}class f1e extends vl{constructor(){super(...arguments);y(this,"domEventType","beforeinput")}onDomEvent(e){const i=e.getTargetRanges(),r=this.view,s=r.document;let o=null,a=null,l=[];if(e.dataTransfer&&(o=new Fz(e.dataTransfer)),e.data!==null?a=e.data:o&&(a=o.getData("text/plain")),s.selection.isFake)l=Array.from(s.selection.getRanges()),e.preventDefault();else if(i.length)l=i.map(c=>{let u=r.domConverter.domPositionToView(c.startContainer,c.startOffset);const d=r.domConverter.domPositionToView(c.endContainer,c.endOffset);if(u&&_s(c.startContainer)&&c.startOffset<so){e.preventDefault();let f=so-c.startOffset;u=u.getLastMatchingPosition(h=>!!(h.item.is("attributeElement")||h.item.is("uiElement")||h.item.is("$textProxy")&&f--),{direction:"backward",singleCharacters:!0})}if(h1e(c.endContainer,c.endOffset)&&e.preventDefault(),u)return r.createRange(u,d);if(d)return r.createRange(d)}).filter(c=>!!c);else if(Vt.isAndroid){const c=e.target.ownerDocument.defaultView.getSelection();l=Array.from(r.domConverter.domSelectionToView(c).getRanges())}if(Vt.isAndroid&&e.inputType=="insertCompositionText"&&a&&a.endsWith(`
`)){this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:[r.createRange(l[0].end)]});return}if(["insertText","insertReplacementText"].includes(e.inputType)&&a&&a.includes(`
`)){const c=a.split(/\n{1,2}/g);let u=l;e.preventDefault();for(let d=0;d<c.length;d++){const f=c[d];f!=""&&(this.fire(e.type,e,{data:f,dataTransfer:o,targetRanges:u,inputType:e.inputType,isComposing:e.isComposing}),u=[s.selection.getFirstRange()]),d+1<c.length&&(this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:u}),u=[s.selection.getFirstRange()])}return}this.fire(e.type,e,{data:a,dataTransfer:o,targetRanges:l,inputType:e.inputType,isComposing:e.isComposing})}}function h1e(n,t){for(;n.parentNode;){if(Oi(n)){if(t!=n.data.length)return!1}else if(t!=n.childNodes.length)return!1;if(t=lh(n)+1,n=n.parentNode,t<n.childNodes.length&&_s(n.childNodes[t]))return!0}return!1}class m1e extends Aa{constructor(t){super(t),this.document.on("keydown",(e,i)=>{if(this.isEnabled&&q_e(i.keyCode)){const r=new Jd(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(r,i),r.stop.called&&e.stop()}})}observe(){}stopObserving(){}}class g1e extends Aa{constructor(t){super(t);const e=this.document;e.on("keydown",(i,r)=>{if(!this.isEnabled||r.keyCode!=fn.tab||r.ctrlKey)return;const s=new Jd(e,"tab",e.selection.getFirstRange());e.fire(s,r),s.stop.called&&i.stop()})}observe(){}stopObserving(){}}let p1e=class extends Wn(){constructor(e){super();y(this,"document");y(this,"domConverter");y(this,"domRoots",new Map);y(this,"_renderer");y(this,"_initialDomRootAttributes",new WeakMap);y(this,"_observers",new Map);y(this,"_writer");y(this,"_ongoingChange",!1);y(this,"_postFixersInProgress",!1);y(this,"_renderingDisabled",!1);y(this,"_hasChangedSinceTheLastRendering",!1);this.document=new O0(e),this.domConverter=new V0(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new j0e(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new Vz(this.document),this.addObserver(Bz),this.addObserver(Ly),this.addObserver(u1e),this.addObserver(a1e),this.addObserver(l1e),this.addObserver(d1e),this.addObserver(m1e),this.addObserver(f1e),this.addObserver(g1e),H0e(this),N0e(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0}),Vt.isiOS&&this.listenTo(this.document,"blur",(i,r)=>{this.domConverter.mapDomToView(r.domEvent.relatedTarget)||this.domConverter._clearDomSelection()}),this.listenTo(this.document,"mutations",(i,{mutations:r})=>{r.forEach(s=>this._renderer.markToSync(s.type,s.node))},{priority:"low"}),this.listenTo(this.document,"mutations",()=>{this.forceRender()},{priority:"lowest"})}attachDomRoot(e,i="main"){const r=this.document.getRoot(i);r._name=e.tagName.toLowerCase();const s={};for(const{name:a,value:l}of Array.from(e.attributes))s[a]=l,a==="class"?this._writer.addClass(l.split(" "),r):r.hasAttribute(a)||this._writer.setAttribute(a,l,r);this._initialDomRootAttributes.set(e,s);const o=()=>{this._writer.setAttribute("contenteditable",(!r.isReadOnly).toString(),r),r.isReadOnly?this._writer.addClass("ck-read-only",r):this._writer.removeClass("ck-read-only",r)};o(),this.domRoots.set(i,e),this.domConverter.bindElements(e,r),this._renderer.markToSync("children",r),this._renderer.markToSync("attributes",r),this._renderer.domDocuments.add(e.ownerDocument),r.on("change:children",(a,l)=>this._renderer.markToSync("children",l)),r.on("change:attributes",(a,l)=>this._renderer.markToSync("attributes",l)),r.on("change:text",(a,l)=>this._renderer.markToSync("text",l)),r.on("change:isReadOnly",()=>this.change(o)),r.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const a of this._observers.values())a.observe(e,i)}detachDomRoot(e){const i=this.domRoots.get(e);Array.from(i.attributes).forEach(({name:s})=>i.removeAttribute(s));const r=this._initialDomRootAttributes.get(i);for(const s in r)i.setAttribute(s,r[s]);this.domRoots.delete(e),this.domConverter.unbindDomElement(i);for(const s of this._observers.values())s.stopObserving(i)}getDomRoot(e="main"){return this.domRoots.get(e)}addObserver(e){let i=this._observers.get(e);if(i)return i;i=new e(this),this._observers.set(e,i);for(const[r,s]of this.domRoots)i.observe(s,r);return i.enable(),i}getObserver(e){return this._observers.get(e)}disableObservers(){for(const e of this._observers.values())e.disable()}enableObservers(){for(const e of this._observers.values())e.enable()}scrollToTheSelection({alignToTop:e,forceScroll:i,viewportOffset:r=20,ancestorOffset:s=20}={}){const o=this.document.selection.getFirstRange();if(!o)return;const a=Ys({alignToTop:e,forceScroll:i,viewportOffset:r,ancestorOffset:s});typeof r=="number"&&(r={top:r,bottom:r,left:r,right:r});const l={target:this.domConverter.viewRangeToDom(o),viewportOffset:r,ancestorOffset:s,alignToTop:e,forceScroll:i};this.fire("scrollToTheSelection",l,a),Ez(l)}focus(){if(!this.document.isFocused){const e=this.document.selection.editableElement;e&&(this.domConverter.focus(e),this.forceRender())}}change(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new we("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;const i=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),i}catch(i){/* istanbul ignore next -- @preserve */we.rethrowUnexpectedError(i,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(Ly).flush(),this.change(()=>{})}destroy(){for(const e of this._observers.values())e.destroy();this.document.destroy(),this.stopListening()}createPositionAt(e,i){return vt._createAt(e,i)}createPositionAfter(e){return vt._createAfter(e)}createPositionBefore(e){return vt._createBefore(e)}createRange(e,i){return new un(e,i)}createRangeOn(e){return un._createOn(e)}createRangeIn(e){return un._createIn(e)}createSelection(...e){return new Kl(...e)}_disableRendering(e){this._renderingDisabled=e,e==!1&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}};/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Ou{is(){throw new Error("is() method is abstract")}}class da extends Ou{constructor(e,i,r){super();y(this,"textNode");y(this,"data");y(this,"offsetInText");if(this.textNode=e,i<0||i>e.offsetSize)throw new we("model-textproxy-wrong-offsetintext",this);if(r<0||i+r>e.offsetSize)throw new we("model-textproxy-wrong-length",this);this.data=e.data.substring(i,i+r),this.offsetInText=i}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={}){const i=[];let r=e.includeSelf?this:this.parent;for(;r;)i[e.parentFirst?"push":"unshift"](r),r=r.parent;return i}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}da.prototype.is=function(n){return n==="$textProxy"||n==="model:$textProxy"||n==="textProxy"||n==="model:textProxy"};class zl{constructor(t){y(this,"direction");y(this,"boundaries");y(this,"singleCharacters");y(this,"shallow");y(this,"ignoreElementEnd");y(this,"_position");y(this,"_boundaryStartParent");y(this,"_boundaryEndParent");y(this,"_visitedParent");if(!t||!t.boundaries&&!t.startPosition)throw new we("model-tree-walker-no-start-position",null);const e=t.direction||"forward";if(e!="forward"&&e!="backward")throw new we("model-tree-walker-unknown-direction",t,{direction:e});this.direction=e,this.boundaries=t.boundaries||null,t.startPosition?this._position=t.startPosition.clone():this._position=it._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,i,r,s;do r=this.position,s=this._visitedParent,{done:e,value:i}=this.next();while(!e&&t(i));e||(this._position=r,this._visitedParent=s)}jumpTo(t){this._boundaryStartParent&&t.isBefore(this.boundaries.start)?t=this.boundaries.start:this._boundaryEndParent&&t.isAfter(this.boundaries.end)&&(t=this.boundaries.end),this._position=t.clone(),this._visitedParent=t.parent}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const t=this.position,e=this.position.clone(),i=this._visitedParent;if(i.parent===null&&e.offset===i.maxOffset)return{done:!0,value:void 0};if(i===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const r=cp(e,i),s=r||Uz(e,i,r);if(s&&s.is("model:element")){if(!this.shallow)e.path.push(0),this._visitedParent=s;else{if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}return this._position=e,Gu("elementStart",s,t,e,1)}if(s&&s.is("model:$text")){let o;if(this.singleCharacters)o=1;else{let c=s.endOffset;this._boundaryEndParent==i&&this.boundaries.end.offset<c&&(c=this.boundaries.end.offset),o=c-e.offset}const a=e.offset-s.startOffset,l=new da(s,a,o);return e.offset+=o,this._position=e,Gu("text",l,t,e,o)}return e.path.pop(),e.offset++,this._position=e,this._visitedParent=i.parent,this.ignoreElementEnd?this._next():Gu("elementEnd",i,t,e)}_previous(){const t=this.position,e=this.position.clone(),i=this._visitedParent;if(i.parent===null&&e.offset===0)return{done:!0,value:void 0};if(i==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const r=e.parent,s=cp(e,r),o=s||zz(e,r,s);if(o&&o.is("model:element"))return e.offset--,this.shallow?(this._position=e,Gu("elementStart",o,t,e,1)):(e.path.push(o.maxOffset),this._position=e,this._visitedParent=o,this.ignoreElementEnd?this._previous():Gu("elementEnd",o,t,e));if(o&&o.is("model:$text")){let a;if(this.singleCharacters)a=1;else{let u=o.startOffset;this._boundaryStartParent==i&&this.boundaries.start.offset>u&&(u=this.boundaries.start.offset),a=e.offset-u}const l=e.offset-o.startOffset,c=new da(o,l-a,a);return e.offset-=a,this._position=e,Gu("text",c,t,e,a)}return e.path.pop(),this._position=e,this._visitedParent=i.parent,Gu("elementStart",i,t,e,1)}}function Gu(n,t,e,i,r){return{done:!1,value:{type:n,item:t,previousPosition:e,nextPosition:i,length:r}}}class it extends Ou{constructor(e,i,r="toNone"){super();y(this,"root");y(this,"path");y(this,"stickiness");if(!e.is("element")&&!e.is("documentFragment"))throw new we("model-position-root-invalid",e);if(!Array.isArray(i)||i.length===0)throw new we("model-position-path-incorrect-format",e,{path:i});e.is("rootElement")?i=i.slice():(i=[...e.getPath(),...i],e=e.root),this.root=e,this.path=i,this.stickiness=r}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let i=0;i<this.path.length-1;i++)if(e=e.getChildAtOffset(this.path[i]),!e)throw new we("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new we("model-position-path-incorrect",this,{position:this});return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return cp(this,this.parent)}get nodeAfter(){const e=this.parent;return Uz(this,e,cp(this,e))}get nodeBefore(){const e=this.parent;return zz(this,e,cp(this,e))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let e=this.root;for(let i=0;i<this.path.length-1;i++)if(e=e.getChildAtOffset(this.path[i]),!e)return!1;return this.offset<=e.maxOffset}compareWith(e){if(this.root!=e.root)return"different";const i=ts(this.path,e.path);switch(i){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[i]<e.path[i]?"before":"after"}}getLastMatchingPosition(e,i={}){i.startPosition=this;const r=new zl(i);return r.skip(e),r.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){const i=this.parent;return i.is("element")?i.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];const i=ts(this.path,e.path),r=typeof i=="string"?Math.min(this.path.length,e.path.length):i;return this.path.slice(0,r)}getCommonAncestor(e){const i=this.getAncestors(),r=e.getAncestors();let s=0;for(;i[s]==r[s]&&i[s];)s++;return s===0?null:i[s-1]}getShiftedBy(e){const i=this.clone(),r=i.offset+e;return i.offset=r<0?0:r,i}isAfter(e){return this.compareWith(e)=="after"}isBefore(e){return this.compareWith(e)=="before"}isEqual(e){return this.compareWith(e)=="same"}isTouching(e){if(this.root!==e.root)return!1;const i=Math.min(this.path.length,e.path.length);for(let r=0;r<i;r++){const s=this.path[r]-e.path[r];if(s<-1||s>1)return!1;if(s===1)return ND(e,this,r);if(s===-1)return ND(this,e,r)}return this.path.length===e.path.length?!0:this.path.length>e.path.length?RT(this.path,i):RT(e.path,i)}hasSameParentAs(e){if(this.root!==e.root)return!1;const i=this.getParentPath(),r=e.getParentPath();return ts(i,r)=="same"}getTransformedByOperation(e){let i;switch(e.type){case"insert":i=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":i=this._getTransformedByMoveOperation(e);break;case"split":i=this._getTransformedBySplitOperation(e);break;case"merge":i=this._getTransformedByMergeOperation(e);break;default:i=it._createAt(this);break}return i}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){const i=e.movedRange;return i.containsPosition(this)||i.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){const i=e.movedRange,r=i.containsPosition(this)||i.start.isEqual(this);let s;return r?(s=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(s=s._getTransformedByDeletion(e.deletionPosition,1))):this.isEqual(e.deletionPosition)?s=it._createAt(e.deletionPosition):s=this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),s}_getTransformedByDeletion(e,i){const r=it._createAt(this);if(this.root!=e.root)return r;if(ts(e.getParentPath(),this.getParentPath())=="same"){if(e.offset<this.offset){if(e.offset+i>this.offset)return null;r.offset-=i}}else if(ts(e.getParentPath(),this.getParentPath())=="prefix"){const s=e.path.length-1;if(e.offset<=this.path[s]){if(e.offset+i>this.path[s])return null;r.path[s]-=i}}return r}_getTransformedByInsertion(e,i){const r=it._createAt(this);if(this.root!=e.root)return r;if(ts(e.getParentPath(),this.getParentPath())=="same")(e.offset<this.offset||e.offset==this.offset&&this.stickiness!="toPrevious")&&(r.offset+=i);else if(ts(e.getParentPath(),this.getParentPath())=="prefix"){const s=e.path.length-1;e.offset<=this.path[s]&&(r.path[s]+=i)}return r}_getTransformedByMove(e,i,r){if(i=i._getTransformedByDeletion(e,r),e.isEqual(i))return it._createAt(this);const s=this._getTransformedByDeletion(e,r);return s===null||e.isEqual(this)&&this.stickiness=="toNext"||e.getShiftedBy(r).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(e,i):s._getTransformedByInsertion(i,r)}_getCombined(e,i){const r=e.path.length-1,s=it._createAt(i);return s.stickiness=this.stickiness,s.offset=s.offset+this.path[r]-e.offset,s.path=[...s.path,...this.path.slice(r+1)],s}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,i,r="toNone"){if(e.is("model:position"))return new it(e.root,e.path,e.stickiness);{const s=e;if(i=="end")i=s.maxOffset;else{if(i=="before")return this._createBefore(s,r);if(i=="after")return this._createAfter(s,r);if(i!==0&&!i)throw new we("model-createpositionat-offset-required",[this,e])}if(!s.is("element")&&!s.is("documentFragment"))throw new we("model-position-parent-incorrect",[this,e]);const o=s.getPath();return o.push(i),new this(s.root,o,r)}}static _createAfter(e,i){if(!e.parent)throw new we("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,i)}static _createBefore(e,i){if(!e.parent)throw new we("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,i)}static fromJSON(e,i){if(e.root==="$graveyard"){const r=new it(i.graveyard,e.path);return r.stickiness=e.stickiness,r}if(!i.getRoot(e.root))throw new we("model-position-fromjson-no-root",i,{rootName:e.root});return new it(i.getRoot(e.root),e.path,e.stickiness)}}it.prototype.is=function(n){return n==="position"||n==="model:position"};function cp(n,t){const e=t.getChildAtOffset(n.offset);return e&&e.is("$text")&&e.startOffset<n.offset?e:null}function Uz(n,t,e){return e!==null?null:t.getChildAtOffset(n.offset)}function zz(n,t,e){return e!==null?null:t.getChild(t.offsetToIndex(n.offset)-1)}function ND(n,t,e){return!(e+1===n.path.length||!RT(t.path,e+1)||!v1e(n,e+1))}function RT(n,t){for(;t<n.length;){if(n[t]!==0)return!1;t++}return!0}function v1e(n,t){let e=n.parent,i=n.path.length-1,r=0;for(;i>=t;){if(n.path[i]+r!==e.maxOffset)return!1;r=1,i--,e=e.parent}return!0}class qe extends Ou{constructor(e,i){super();y(this,"start");y(this,"end");this.start=it._createAt(e),this.end=i?it._createAt(i):it._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new zl({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const e=this.start.getParentPath(),i=this.end.getParentPath();return ts(e,i)=="same"}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,i=!1){e.isCollapsed&&(i=!1);const r=this.containsPosition(e.start)||i&&this.start.isEqual(e.start),s=this.containsPosition(e.end)||i&&this.end.isEqual(e.end);return r&&s}containsItem(e){const i=it._createBefore(e);return this.containsPosition(i)||this.start.isEqual(i)}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){const i=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&i.push(new qe(this.start,e.start)),this.containsPosition(e.end)&&i.push(new qe(e.end,this.end))):i.push(new qe(this.start,this.end)),i}getIntersection(e){if(this.isIntersecting(e)){let i=this.start,r=this.end;return this.containsPosition(e.start)&&(i=e.start),this.containsPosition(e.end)&&(r=e.end),new qe(i,r)}return null}getJoined(e,i=!1){let r=this.isIntersecting(e);if(r||(this.start.isBefore(e.start)?r=i?this.end.isTouching(e.start):this.end.isEqual(e.start):r=i?e.end.isTouching(this.start):e.end.isEqual(this.start)),!r)return null;let s=this.start,o=this.end;return e.start.isBefore(s)&&(s=e.start),e.end.isAfter(o)&&(o=e.end),new qe(s,o)}getMinimalFlatRanges(){const e=[],i=this.start.getCommonPath(this.end).length,r=it._createAt(this.start);let s=r.parent;for(;r.path.length>i+1;){const o=s.maxOffset-r.offset;o!==0&&e.push(new qe(r,r.getShiftedBy(o))),r.path=r.path.slice(0,-1),r.offset++,s=s.parent}for(;r.path.length<=this.end.path.length;){const o=this.end.path[r.path.length-1],a=o-r.offset;a!==0&&e.push(new qe(r,r.getShiftedBy(a))),r.offset=o,r.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new zl(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const i=new zl(e);for(const r of i)yield r.item}*getPositions(e={}){e.boundaries=this;const i=new zl(e);yield i.position;for(const r of i)yield r.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new qe(this.start,this.end)]}getTransformedByOperations(e){const i=[new qe(this.start,this.end)];for(const r of e)for(let s=0;s<i.length;s++){const o=i[s].getTransformedByOperation(r);i.splice(s,1,...o),s+=o.length-1}for(let r=0;r<i.length;r++){const s=i[r];for(let o=r+1;o<i.length;o++){const a=i[o];(s.containsRange(a)||a.containsRange(s)||s.isEqual(a))&&i.splice(o,1)}}return i}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const e=this.start.nodeAfter,i=this.end.nodeBefore;return e&&e.is("element")&&e===i?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,i=!1){return this._getTransformedByInsertion(e.position,e.howMany,i)}_getTransformedByMoveOperation(e,i=!1){const r=e.sourcePosition,s=e.howMany,o=e.targetPosition;return this._getTransformedByMove(r,o,s,i)}_getTransformedBySplitOperation(e){const i=this.start._getTransformedBySplitOperation(e);let r=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(r=this.end.getShiftedBy(1)),i.root!=r.root&&(r=this.end.getShiftedBy(-1)),new qe(i,r)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new qe(this.start);let i=this.start._getTransformedByMergeOperation(e),r=this.end._getTransformedByMergeOperation(e);return i.root!=r.root&&(r=this.end.getShiftedBy(-1)),i.isAfter(r)?(e.sourcePosition.isBefore(e.targetPosition)?(i=it._createAt(r),i.offset=0):(e.deletionPosition.isEqual(i)||(r=e.deletionPosition),i=e.targetPosition),new qe(i,r)):new qe(i,r)}_getTransformedByInsertion(e,i,r=!1){if(r&&this.containsPosition(e))return[new qe(this.start,e),new qe(e.getShiftedBy(i),this.end._getTransformedByInsertion(e,i))];{const s=new qe(this.start,this.end);return s.start=s.start._getTransformedByInsertion(e,i),s.end=s.end._getTransformedByInsertion(e,i),[s]}}_getTransformedByMove(e,i,r,s=!1){if(this.isCollapsed){const f=this.start._getTransformedByMove(e,i,r);return[new qe(f)]}const o=qe._createFromPositionAndShift(e,r),a=i._getTransformedByDeletion(e,r);if(this.containsPosition(i)&&!s&&(o.containsPosition(this.start)||o.containsPosition(this.end))){const f=this.start._getTransformedByMove(e,i,r),h=this.end._getTransformedByMove(e,i,r);return[new qe(f,h)]}let l;const c=this.getDifference(o);let u=null;const d=this.getIntersection(o);if(c.length==1?u=new qe(c[0].start._getTransformedByDeletion(e,r),c[0].end._getTransformedByDeletion(e,r)):c.length==2&&(u=new qe(this.start,this.end._getTransformedByDeletion(e,r))),u?l=u._getTransformedByInsertion(a,r,d!==null||s):l=[],d){const f=new qe(d.start._getCombined(o.start,a),d.end._getCombined(o.start,a));l.length==2?l.splice(1,0,f):l.push(f)}return l}_getTransformedByDeletion(e,i){let r=this.start._getTransformedByDeletion(e,i),s=this.end._getTransformedByDeletion(e,i);return r==null&&s==null?null:(r==null&&(r=e),s==null&&(s=e),new qe(r,s))}static _createFromPositionAndShift(e,i){const r=e,s=e.getShiftedBy(i);return i>0?new this(r,s):new this(s,r)}static _createIn(e){return new this(it._createAt(e,0),it._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(it._createBefore(e),e.offsetSize)}static _createFromRanges(e){if(e.length===0)throw new we("range-create-from-ranges-empty-array",null);if(e.length==1)return e[0].clone();const i=e[0];e.sort((o,a)=>o.start.isAfter(a.start)?1:-1);const r=e.indexOf(i),s=new this(i.start,i.end);for(let o=r-1;o>=0&&e[o].end.isEqual(s.start);o--)s.start=it._createAt(e[o].start);for(let o=r+1;o<e.length&&e[o].start.isEqual(s.end);o++)s.end=it._createAt(e[o].end);return s}static fromJSON(e,i){return new this(it.fromJSON(e.start,i),it.fromJSON(e.end,i))}}qe.prototype.is=function(n){return n==="range"||n==="model:range"};class Hz extends ri(){constructor(){super();y(this,"_modelToViewMapping",new WeakMap);y(this,"_viewToModelMapping",new WeakMap);y(this,"_viewToModelLengthCallbacks",new Map);y(this,"_markerNameToElements",new Map);y(this,"_elementToMarkerNames",new Map);y(this,"_deferredBindingRemovals",new Map);y(this,"_unboundMarkerNames",new Set);y(this,"_cache",new b1e);this.on("modelToViewPosition",(e,i)=>{if(i.viewPosition)return;const r=this._modelToViewMapping.get(i.modelPosition.parent);if(!r)throw new we("mapping-model-position-view-parent-not-found",this,{modelPosition:i.modelPosition});i.viewPosition=this.findPositionIn(r,i.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(e,i)=>{if(i.modelPosition)return;const r=this.findMappedViewAncestor(i.viewPosition),s=this._viewToModelMapping.get(r),o=this._toModelOffset(i.viewPosition.parent,i.viewPosition.offset,r);i.modelPosition=it._createAt(s,o)},{priority:"low"})}bindElements(e,i){this._modelToViewMapping.set(e,i),this._viewToModelMapping.set(i,e)}unbindViewElement(e,i={}){const r=this.toModelElement(e);if(this._elementToMarkerNames.has(e))for(const s of this._elementToMarkerNames.get(e))this._unboundMarkerNames.add(s);i.defer?this._deferredBindingRemovals.set(e,e.root):(this._viewToModelMapping.delete(e)&&this._cache.stopTracking(e),this._modelToViewMapping.get(r)==e&&this._modelToViewMapping.delete(r))}unbindModelElement(e){const i=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(i)==e&&this._viewToModelMapping.delete(i)&&this._cache.stopTracking(i)}bindElementToMarker(e,i){const r=this._markerNameToElements.get(i)||new Set;r.add(e);const s=this._elementToMarkerNames.get(e)||new Set;s.add(i),this._markerNameToElements.set(i,r),this._elementToMarkerNames.set(e,s)}unbindElementFromMarkerName(e,i){const r=this._markerNameToElements.get(i);r&&(r.delete(e),r.size==0&&this._markerNameToElements.delete(i));const s=this._elementToMarkerNames.get(e);s&&(s.delete(i),s.size==0&&this._elementToMarkerNames.delete(e))}flushUnboundMarkerNames(){const e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}flushDeferredBindings(){for(const[e,i]of this._deferredBindingRemovals)e.root==i&&this.unbindViewElement(e);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(e){return this._viewToModelMapping.get(e)}toViewElement(e){return this._modelToViewMapping.get(e)}toModelRange(e){return new qe(this.toModelPosition(e.start),this.toModelPosition(e.end))}toViewRange(e){return new un(this.toViewPosition(e.start),this.toViewPosition(e.end))}toModelPosition(e){const i={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",i),i.modelPosition}toViewPosition(e,i={}){const r={modelPosition:e,mapper:this,isPhantom:i.isPhantom};return this.fire("modelToViewPosition",r),r.viewPosition}markerNameToElements(e){const i=this._markerNameToElements.get(e);if(!i)return null;const r=new Set;for(const s of i)if(s.is("attributeElement"))for(const o of s.getElementsWithSameId())r.add(o);else r.add(s);return r}registerViewToModelLength(e,i){this._viewToModelLengthCallbacks.set(e,i)}findMappedViewAncestor(e){let i=e.parent;for(;!this._viewToModelMapping.has(i);)i=i.parent;return i}_toModelOffset(e,i,r){if(r!=e){const o=this._toModelOffset(e.parent,e.index,r),a=this._toModelOffset(e,i,e);return o+a}if(e.is("$text"))return i;let s=0;for(let o=0;o<i;o++)s+=this.getModelLength(e.getChild(o));return s}getModelLength(e){const i=[e];let r=0;for(;i.length>0;){const s=i.pop(),o=s.name&&this._viewToModelLengthCallbacks.size>0&&this._viewToModelLengthCallbacks.get(s.name);if(o)r+=o(s);else if(this._viewToModelMapping.has(s))r+=1;else if(s.is("$text"))r+=s.data.length;else{if(s.is("uiElement"))continue;for(const a of s.getChildren())i.push(a)}}return r}findPositionIn(e,i){if(i===0)return this._moveViewPositionToTextNode(new vt(e,0));if(this._viewToModelLengthCallbacks.size==0&&this._viewToModelMapping.has(e)){const s=this._cache.getClosest(e,i);return this._findPositionStartingFrom(s.viewPosition,s.modelOffset,i,e,!0)}else return this._findPositionStartingFrom(new vt(e,0),0,i,e,!1)}_findPositionStartingFrom(e,i,r,s,o){let a=e.parent,l=e.offset;if(a.is("$text"))return new vt(a,r-i);let c,u=i,d=0;for(;u<r;){if(c=a.getChild(l),!c){if(a==s)throw new we("mapping-model-offset-not-found",this,{modelOffset:r,viewContainer:s});l=a.parent.getChildIndex(a)+1,a=a.parent,o&&this._cache.save(a,l,s,u);continue}o?d=this._getModelLengthAndCache(c,s,u):d=this.getModelLength(c),u+=d,l++}let f=new vt(a,l);if(o)for(;f.isAtEnd&&f.parent!==s&&f.parent.parent;){const h=f.parent.parent,g=h.getChildIndex(f.parent)+1;this._cache.save(h,g,s,u),f=new vt(h,g)}return u==r?this._moveViewPositionToTextNode(f):this._findPositionStartingFrom(new vt(c,0),u-d,r,s,o)}_getModelLengthAndCache(e,i,r){let s=0;if(this._viewToModelMapping.has(e))s=1;else if(e.is("$text"))s=e.data.length;else if(!e.is("uiElement"))for(const o of e.getChildren())s+=this._getModelLengthAndCache(o,i,r+s);return this._cache.save(e.parent,e.index+1,i,r+s),s}_moveViewPositionToTextNode(e){const i=e.nodeBefore,r=e.nodeAfter;return i&&i.is("view:$text")?new vt(i,i.data.length):r&&r.is("view:$text")?new vt(r,0):e}}class b1e extends ri(){constructor(){super(...arguments);y(this,"_cachedMapping",new WeakMap);y(this,"_nodeToCacheListIndex",new WeakMap);y(this,"_invalidateOnChildrenChangeCallback",(e,i,r)=>{this._clearCacheInsideParent(i,r.index)});y(this,"_invalidateOnTextChangeCallback",(e,i)=>{this._clearCacheAfter(i)})}save(e,i,r,s){const o=this._cachedMapping.get(r),a=o.cacheMap.get(s);if(a){const d=e.getChild(i-1),f=a.viewPosition.nodeBefore?this._nodeToCacheListIndex.get(a.viewPosition.nodeBefore):0;this._nodeToCacheListIndex.set(d,f);return}const c={viewPosition:new vt(e,i),modelOffset:s};o.maxModelOffset=s>o.maxModelOffset?s:o.maxModelOffset,o.cacheMap.set(s,c);let u=o.cacheList.length-1;for(;u>=0&&o.cacheList[u].modelOffset>s;)u--;if(o.cacheList.splice(u+1,0,c),i>0){const d=e.getChild(i-1);this._nodeToCacheListIndex.set(d,u+1)}}getClosest(e,i){const r=this._cachedMapping.get(e);let s;if(r)if(i>r.maxModelOffset)s=r.cacheList[r.cacheList.length-1];else{const o=r.cacheMap.get(i);o?s=o:s=this._findInCacheList(r.cacheList,i)}else s=this.startTracking(e);return{modelOffset:s.modelOffset,viewPosition:s.viewPosition.clone()}}startTracking(e){const r={viewPosition:new vt(e,0),modelOffset:0},s={maxModelOffset:0,cacheList:[r],cacheMap:new Map([[0,r]])};return this._cachedMapping.set(e,s),e.on("change:children",this._invalidateOnChildrenChangeCallback),e.on("change:text",this._invalidateOnTextChangeCallback),r}stopTracking(e){e.off("change:children",this._invalidateOnChildrenChangeCallback),e.off("change:text",this._invalidateOnTextChangeCallback),this._cachedMapping.delete(e)}_clearCacheInsideParent(e,i){if(i==0)this._cachedMapping.has(e)?this._clearCacheAll(e):this._clearCacheInsideParent(e.parent,e.index);else{const r=e.getChild(i-1);this._clearCacheAfter(r)}}_clearCacheAll(e){const i=this._cachedMapping.get(e);i.maxModelOffset>0&&(i.maxModelOffset=0,i.cacheList.length=1,i.cacheMap.clear(),i.cacheMap.set(0,i.cacheList[0]))}_clearCacheAfter(e){const i=this._nodeToCacheListIndex.get(e);if(i===void 0){const s=e.parent;this._cachedMapping.has(s)||this._clearCacheInsideParent(s.parent,s.index);return}let r=e.parent;for(;!this._cachedMapping.has(r);)r=r.parent;this._clearCacheFromCacheIndex(r,i)}_clearCacheFromCacheIndex(e,i){i===0&&(i=1);const r=this._cachedMapping.get(e),s=r.cacheList[i-1];if(!s)return;r.maxModelOffset=s.modelOffset;const o=r.cacheList.splice(i);for(const a of o){r.cacheMap.delete(a.modelOffset);const l=a.viewPosition.nodeBefore;this._nodeToCacheListIndex.delete(l)}}_findInCacheList(e,i){let r=0,s=e.length-1,o=s-r>>1,a=e[o];for(;r<s;)a.modelOffset<i?r=o+1:s=o-1,o=r+(s-r>>1),a=e[o];return a.modelOffset<=i?a:e[o-1]}}class w1e{constructor(){y(this,"_consumable",new Map);y(this,"_textProxyRegistry",new Map)}add(t,e){e=Ib(e),t instanceof da&&(t=this._getSymbolForTextProxy(t)),this._consumable.has(t)||this._consumable.set(t,new Map),this._consumable.get(t).set(e,!0)}consume(t,e){return e=Ib(e),t instanceof da&&(t=this._getSymbolForTextProxy(t)),this.test(t,e)?(this._consumable.get(t).set(e,!1),!0):!1}test(t,e){e=Ib(e),t instanceof da&&(t=this._getSymbolForTextProxy(t));const i=this._consumable.get(t);if(i===void 0)return null;const r=i.get(e);return r===void 0?null:r}revert(t,e){e=Ib(e),t instanceof da&&(t=this._getSymbolForTextProxy(t));const i=this.test(t,e);return i===!1?(this._consumable.get(t).set(e,!0),!0):i===!0?!1:null}verifyAllConsumed(t){const e=[];for(const[i,r]of this._consumable)for(const[s,o]of r){const a=s.split(":")[0];o&&t==a&&e.push({event:s,item:i.name||i.description})}if(e.length)throw new we("conversion-model-consumable-not-consumed",null,{items:e})}_getSymbolForTextProxy(t){let e=null;const i=this._textProxyRegistry.get(t.startOffset);if(i){const r=i.get(t.endOffset);r&&(e=r.get(t.parent))}return e||(e=this._addSymbolForTextProxy(t)),e}_addSymbolForTextProxy(t){const e=t.startOffset,i=t.endOffset,r=t.parent,s=Symbol("$textProxy:"+t.data);let o,a;return o=this._textProxyRegistry.get(e),o||(o=new Map,this._textProxyRegistry.set(e,o)),a=o.get(i),a||(a=new Map,o.set(i,a)),a.set(r,s),s}}function Ib(n){const t=n.split(":");return t[0]=="insert"?t[0]:t[0]=="addMarker"||t[0]=="removeMarker"?n:t.length>1?t[0]+":"+t[1]:t[0]}class Wz extends ri(){constructor(e){super();y(this,"_conversionApi");y(this,"_firedEventsMap");this._conversionApi={dispatcher:this,...e},this._firedEventsMap=new WeakMap}convertChanges(e,i,r){const s=this._createConversionApi(r,e.getRefreshedItems());for(const a of e.getMarkersToRemove())this._convertMarkerRemove(a.name,a.range,s);const o=this._reduceChanges(e.getChanges());for(const a of o)a.type==="insert"?this._convertInsert(qe._createFromPositionAndShift(a.position,a.length),s):a.type==="reinsert"?this._convertReinsert(qe._createFromPositionAndShift(a.position,a.length),s):a.type==="remove"?this._convertRemove(a.position,a.length,a.name,s):this._convertAttribute(a.range,a.attributeKey,a.attributeOldValue,a.attributeNewValue,s);s.mapper.flushDeferredBindings();for(const a of s.mapper.flushUnboundMarkerNames()){const l=i.get(a).getRange();this._convertMarkerRemove(a,l,s),this._convertMarkerAdd(a,l,s)}for(const a of e.getMarkersToAdd())this._convertMarkerAdd(a.name,a.range,s);s.consumable.verifyAllConsumed("insert")}convert(e,i,r,s={}){const o=this._createConversionApi(r,void 0,s);this._convertInsert(e,o);for(const[a,l]of i)this._convertMarkerAdd(a,l,o);o.consumable.verifyAllConsumed("insert")}convertSelection(e,i,r){const s=this._createConversionApi(r);this.fire("cleanSelection",{selection:e},s);const o=e.getFirstPosition().root;if(!s.mapper.toViewElement(o))return;const a=Array.from(i.getMarkersAtPosition(e.getFirstPosition()));if(this._addConsumablesForSelection(s.consumable,e,a),this.fire("selection",{selection:e},s),!!e.isCollapsed){for(const l of a)if(s.consumable.test(e,"addMarker:"+l.name)){const c=l.getRange();if(!y1e(e.getFirstPosition(),l,s.mapper))continue;const u={item:e,markerName:l.name,markerRange:c};this.fire(`addMarker:${l.name}`,u,s)}for(const l of e.getAttributeKeys())if(s.consumable.test(e,"attribute:"+l)){const c={item:e,range:e.getFirstRange(),attributeKey:l,attributeOldValue:null,attributeNewValue:e.getAttribute(l)};this.fire(`attribute:${l}:$text`,c,s)}}}_convertInsert(e,i,r={}){r.doNotAddConsumables||this._addConsumablesForInsert(i.consumable,e);for(const s of e.getWalker({shallow:!0}))this._testAndFire("insert",LD(s),i)}_convertRemove(e,i,r,s){this.fire(`remove:${r}`,{position:e,length:i},s)}_convertAttribute(e,i,r,s,o){this._addConsumablesForRange(o.consumable,e,`attribute:${i}`);for(const a of e){const l={item:a.item,range:qe._createFromPositionAndShift(a.previousPosition,a.length),attributeKey:i,attributeOldValue:r,attributeNewValue:s};this._testAndFire(`attribute:${i}`,l,o)}}_convertReinsert(e,i){const r=Array.from(e.getWalker({shallow:!0}));this._addConsumablesForInsert(i.consumable,r);for(const s of r.map(LD))this._testAndFire("insert",{...s,reconversion:!0},i)}_convertMarkerAdd(e,i,r){if(i.root.rootName=="$graveyard")return;const s=`addMarker:${e}`;if(r.consumable.add(i,s),this.fire(s,{markerName:e,markerRange:i},r),!!r.consumable.consume(i,s)){this._addConsumablesForRange(r.consumable,i,s);for(const o of i.getItems()){if(!r.consumable.test(o,s))continue;const a={item:o,range:qe._createOn(o),markerName:e,markerRange:i};this.fire(s,a,r)}}}_convertMarkerRemove(e,i,r){i.root.rootName!="$graveyard"&&this.fire(`removeMarker:${e}`,{markerName:e,markerRange:i},r)}_reduceChanges(e){const i={changes:e};return this.fire("reduceChanges",i),i.changes}_addConsumablesForInsert(e,i){for(const r of i){const s=r.item;if(e.test(s,"insert")===null){e.add(s,"insert");for(const o of s.getAttributeKeys())e.add(s,"attribute:"+o)}}return e}_addConsumablesForRange(e,i,r){for(const s of i.getItems())e.add(s,r);return e}_addConsumablesForSelection(e,i,r){e.add(i,"selection");for(const s of r)e.add(i,"addMarker:"+s.name);for(const s of i.getAttributeKeys())e.add(i,"attribute:"+s);return e}_testAndFire(e,i,r){const s=_1e(e,i),o=i.item.is("$textProxy")?r.consumable._getSymbolForTextProxy(i.item):i.item,a=this._firedEventsMap.get(r),l=a.get(o);if(!l)a.set(o,new Set([s]));else if(!l.has(s))l.add(s);else return;this.fire(s,i,r)}_testAndFireAddAttributes(e,i){const r={item:e,range:qe._createOn(e)};for(const s of r.item.getAttributeKeys())r.attributeKey=s,r.attributeOldValue=null,r.attributeNewValue=r.item.getAttribute(s),this._testAndFire(`attribute:${s}`,r,i)}_createConversionApi(e,i=new Set,r={}){const s={...this._conversionApi,consumable:new w1e,writer:e,options:r,convertItem:o=>this._convertInsert(qe._createOn(o),s),convertChildren:o=>this._convertInsert(qe._createIn(o),s,{doNotAddConsumables:!0}),convertAttributes:o=>this._testAndFireAddAttributes(o,s),canReuseView:o=>!i.has(s.mapper.toModelElement(o))};return this._firedEventsMap.set(s,new Map),s}}function y1e(n,t,e){const i=t.getRange(),r=Array.from(n.getAncestors());return r.shift(),r.reverse(),!r.some(o=>{if(i.containsItem(o))return!!e.toViewElement(o).getCustomProperty("addHighlight")})}function _1e(n,t){const e=t.item.is("element")?t.item.name:"$text";return`${n}:${e}`}function LD(n){return{item:n.item,range:qe._createFromPositionAndShift(n.previousPosition,n.length)}}let Xd=class extends Ou{constructor(e){super();y(this,"parent",null);y(this,"_attrs");y(this,"_index",null);y(this,"_startOffset",null);this._attrs=fl(e)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return this.startOffset===null?null:this.startOffset+this.offsetSize}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){const e=[];let i=this;for(;i.parent;)e.unshift(i.startOffset),i=i.parent;return e}getAncestors(e={}){const i=[];let r=e.includeSelf?this:this.parent;for(;r;)i[e.parentFirst?"push":"unshift"](r),r=r.parent;return i}getCommonAncestor(e,i={}){const r=this.getAncestors(i),s=e.getAncestors(i);let o=0;for(;r[o]==s[o]&&r[o];)o++;return o===0?null:r[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const i=this.getPath(),r=e.getPath(),s=ts(i,r);switch(s){case"prefix":return!0;case"extension":return!1;default:return i[s]<r[s]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((i,r)=>(i[r[0]]=r[1],i),{})),e}_clone(e){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,i){this._attrs.set(e,i)}_setAttributesTo(e){this._attrs=fl(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}};Xd.prototype.is=function(n){return n==="node"||n==="model:node"};class to extends ri(Ou){constructor(...e){super();y(this,"_lastRangeBackward",!1);y(this,"_attrs",new Map);y(this,"_ranges",[]);e.length&&this.setTo(...e)}get anchor(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const i of this._ranges){let r=!1;for(const s of e._ranges)if(i.isEqual(s)){r=!0;break}if(!r)return!1}return!0}*getRanges(){for(const e of this._ranges)yield new qe(e.start,e.end)}getFirstRange(){let e=null;for(const i of this._ranges)(!e||i.start.isBefore(e.start))&&(e=i);return e?new qe(e.start,e.end):null}getLastRange(){let e=null;for(const i of this._ranges)(!e||i.end.isAfter(e.end))&&(e=i);return e?new qe(e.start,e.end):null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}setTo(...e){let[i,r,s]=e;if(typeof r=="object"&&(s=r,r=void 0),i===null)this._setRanges([]);else if(i instanceof to)this._setRanges(i.getRanges(),i.isBackward);else if(i&&typeof i.getRanges=="function")this._setRanges(i.getRanges(),i.isBackward);else if(i instanceof qe)this._setRanges([i],!!s&&!!s.backward);else if(i instanceof it)this._setRanges([new qe(i)]);else if(i instanceof Xd){const o=!!s&&!!s.backward;let a;if(r=="in")a=qe._createIn(i);else if(r=="on")a=qe._createOn(i);else if(r!==void 0)a=new qe(it._createAt(i,r));else throw new we("model-selection-setto-required-second-parameter",[this,i]);this._setRanges([a],o)}else if(po(i))this._setRanges(i,s&&!!s.backward);else throw new we("model-selection-setto-not-selectable",[this,i])}_setRanges(e,i=!1){const r=Array.from(e),s=r.some(o=>{if(!(o instanceof qe))throw new we("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every(a=>!a.isEqual(o))});r.length===this._ranges.length&&!s||(this._replaceAllRanges(r),this._lastRangeBackward=!!i,this.fire("change:range",{directChange:!0}))}setFocus(e,i){if(this.anchor===null)throw new we("model-selection-setfocus-no-ranges",[this,e]);const r=it._createAt(e,i);if(r.compareWith(this.focus)=="same")return;const s=this.anchor;this._ranges.length&&this._popRange(),r.compareWith(s)=="before"?(this._pushRange(new qe(r,s)),this._lastRangeBackward=!0):(this._pushRange(new qe(s,r)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,i){this.getAttribute(e)!==i&&(this._attrs.set(e,i),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const e=new WeakSet;for(const i of this.getRanges()){const r=MD(i.start,e);E1e(r,i)&&(yield r);const s=i.getWalker();for(const a of s){const l=a.item;a.type=="elementEnd"&&k1e(l,e,i)?yield l:a.type=="elementStart"&&l.is("model:element")&&l.root.document.model.schema.isBlock(l)&&s.jumpTo(it._createAt(l,"end"))}const o=MD(i.end,e);C1e(o,i)&&(yield o)}}containsEntireContent(e=this.anchor.root){const i=it._createAt(e,0),r=it._createAt(e,"end");return i.isTouching(this.getFirstPosition())&&r.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new qe(e.start,e.end))}_checkRange(e){for(let i=0;i<this._ranges.length;i++)if(e.isIntersecting(this._ranges[i]))throw new we("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[i]})}_replaceAllRanges(e){this._removeAllRanges();for(const i of e)this._pushRange(i)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}to.prototype.is=function(n){return n==="selection"||n==="model:selection"};function jz(n,t){return t.has(n)?!1:(t.add(n),n.root.document.model.schema.isBlock(n)&&!!n.parent)}function k1e(n,t,e){return jz(n,t)&&XI(n,e)}function MD(n,t){const i=n.parent.root.document.model.schema,r=n.parent.getAncestors({parentFirst:!0,includeSelf:!0});let s=!1;const o=r.find(a=>s?!1:(s=i.isLimit(a),!s&&jz(a,t)));return r.forEach(a=>t.add(a)),o}function XI(n,t){const e=T1e(n);return e?!t.containsRange(qe._createOn(e),!0):!0}function E1e(n,t){return n?t.isCollapsed||n.isEmpty?!0:t.start.isTouching(it._createAt(n,n.maxOffset))?!1:XI(n,t):!1}function C1e(n,t){return n?t.isCollapsed||n.isEmpty?!0:t.end.isTouching(it._createAt(n,0))?!1:XI(n,t):!1}function T1e(n){const t=n.root.document.model.schema;let e=n.parent;for(;e;){if(t.isBlock(e))return e;e=e.parent}}class Ts extends ri(qe){constructor(t,e){super(t,e),S1e.call(this)}detach(){this.stopListening()}toRange(){return new qe(this.start,this.end)}static fromRange(t){return new Ts(t.start,t.end)}}Ts.prototype.is=function(n){return n==="liveRange"||n==="model:liveRange"||n=="range"||n==="model:range"};function S1e(){this.listenTo(this.root.document.model,"applyOperation",(n,t)=>{const e=t[0];e.isDocumentOperation&&A1e.call(this,e)},{priority:"low"})}function A1e(n){const t=this.getTransformedByOperation(n),e=qe._createFromRanges(t),i=!e.isEqual(this),r=I1e(this,n);let s=null;if(i){e.root.rootName=="$graveyard"&&(n.type=="remove"?s=n.sourcePosition:s=n.deletionPosition);const o=this.toRange();this.start=e.start,this.end=e.end,this.fire("change:range",o,{deletionPosition:s})}else r&&this.fire("change:content",this.toRange(),{deletionPosition:s})}function I1e(n,t){switch(t.type){case"insert":return n.containsPosition(t.position);case"move":case"remove":case"reinsert":case"merge":return n.containsPosition(t.sourcePosition)||n.start.isEqual(t.sourcePosition)||n.containsPosition(t.targetPosition);case"split":return n.containsPosition(t.splitPosition)||n.containsPosition(t.insertionPosition)}return!1}class yi extends Xd{constructor(e,i){super(i);y(this,"_data");this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const e=super.toJSON();return e.data=this.data,e}_clone(){return new yi(this.data,this.getAttributes())}static fromJSON(e){return new yi(e.data,e.attributes)}}yi.prototype.is=function(n){return n==="$text"||n==="model:$text"||n==="text"||n==="model:text"||n==="node"||n==="model:node"};const Yp="selection:";class Ca extends ri(Ou){constructor(e){super();y(this,"_selection");this._selection=new P1e(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}_setFocus(e,i){this._selection.setFocus(e,i)}_setTo(...e){this._selection.setTo(...e)}_setAttribute(e,i){this._selection.setAttribute(e,i)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return Yp+e}static _isStoreAttributeKey(e){return e.startsWith(Yp)}}Ca.prototype.is=function(n){return n==="selection"||n=="model:selection"||n=="documentSelection"||n=="model:documentSelection"};class P1e extends to{constructor(e){super();y(this,"markers",new cr({idProperty:"name"}));y(this,"_model");y(this,"_document");y(this,"_attributePriority",new Map);y(this,"_selectionRestorePosition",null);y(this,"_hasChangedRange",!1);y(this,"_overriddenGravityRegister",new Set);y(this,"_observedMarkers",new Set);this._model=e.model,this._document=e,this.listenTo(this._model,"applyOperation",(i,r)=>{const s=r[0];!s.isDocumentOperation||s.type=="marker"||s.type=="rename"||s.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(i,r,s,o)=>{this._updateMarker(r,o)}),this.listenTo(this._document,"change",(i,r)=>{x1e(this._model,r)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...e){super.setTo(...e),this._updateAttributes(!0),this.updateMarkers()}setFocus(e,i){super.setFocus(e,i),this._updateAttributes(!0),this.updateMarkers()}setAttribute(e,i){if(this._setAttribute(e,i)){const r=[e];this.fire("change:attribute",{attributeKeys:r,directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){const i=[e];this.fire("change:attribute",{attributeKeys:i,directChange:!0})}}overrideGravity(){const e=cs();return this._overriddenGravityRegister.add(e),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new we("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this.updateMarkers()}_replaceAllRanges(e){this._validateSelectionRanges(e),super._replaceAllRanges(e)}_popRange(){this._ranges.pop().detach()}_pushRange(e){const i=this._prepareRange(e);i&&this._ranges.push(i)}_validateSelectionRanges(e){for(const i of e)if(!this._document._validateSelectionRange(i))throw new we("document-selection-wrong-position",this,{range:i})}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return;const i=Ts.fromRange(e);return i.on("change:range",(r,s,o)=>{if(this._hasChangedRange=!0,i.root==this._document.graveyard){this._selectionRestorePosition=o.deletionPosition;const a=this._ranges.indexOf(i);this._ranges.splice(a,1),i.detach()}}),i}updateMarkers(){if(!this._observedMarkers.size)return;const e=[];let i=!1;for(const s of this._model.markers){const o=s.name.split(":",1)[0];if(!this._observedMarkers.has(o))continue;const a=s.getRange();for(const l of this.getRanges())a.containsRange(l,!l.isCollapsed)&&e.push(s)}const r=Array.from(this.markers);for(const s of e)this.markers.has(s)||(this.markers.add(s),i=!0);for(const s of Array.from(this.markers))e.includes(s)||(this.markers.remove(s),i=!0);i&&this.fire("change:marker",{oldMarkers:r,directChange:!1})}_updateMarker(e,i){const r=e.name.split(":",1)[0];if(!this._observedMarkers.has(r))return;let s=!1;const o=Array.from(this.markers),a=this.markers.has(e);if(!i)a&&(this.markers.remove(e),s=!0);else{let l=!1;for(const c of this.getRanges())if(i.containsRange(c,!c.isCollapsed)){l=!0;break}l&&!a?(this.markers.add(e),s=!0):!l&&a&&(this.markers.remove(e),s=!0)}s&&this.fire("change:marker",{oldMarkers:o,directChange:!1})}_updateAttributes(e){const i=fl(this._getSurroundingAttributes()),r=fl(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(const[o,a]of this._attributePriority)a=="low"&&(this._attrs.delete(o),this._attributePriority.delete(o));this._setAttributesTo(i);const s=[];for(const[o,a]of this.getAttributes())(!r.has(o)||r.get(o)!==a)&&s.push(o);for(const[o]of r)this.hasAttribute(o)||s.push(o);s.length>0&&this.fire("change:attribute",{attributeKeys:s,directChange:!1})}_setAttribute(e,i,r=!0){const s=r?"normal":"low";return s=="low"&&this._attributePriority.get(e)=="normal"||super.getAttribute(e)===i?!1:(this._attrs.set(e,i),this._attributePriority.set(e,s),!0)}_removeAttribute(e,i=!0){const r=i?"normal":"low";return r=="low"&&this._attributePriority.get(e)=="normal"||(this._attributePriority.set(e,r),!super.hasAttribute(e))?!1:(this._attrs.delete(e),!0)}_setAttributesTo(e){const i=new Set;for(const[r,s]of this.getAttributes())e.get(r)!==s&&this._removeAttribute(r,!1);for(const[r,s]of e)this._setAttribute(r,s,!1)&&i.add(r);return i}*getStoredAttributes(){const e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(const i of e.getAttributeKeys())i.startsWith(Yp)&&(yield[i.substr(Yp.length),e.getAttribute(i)])}_getSurroundingAttributes(){const e=this.getFirstPosition(),i=this._model.schema;if(e.root.rootName=="$graveyard")return null;let r=null;if(this.isCollapsed){const s=e.textNode?e.textNode:e.nodeBefore,o=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(r=mg(s,i)),r||(r=mg(o,i)),!this.isGravityOverridden&&!r){let a=s;for(;a&&!r;)a=a.previousSibling,r=mg(a,i)}if(!r){let a=o;for(;a&&!r;)a=a.nextSibling,r=mg(a,i)}r||(r=this.getStoredAttributes())}else{const s=this.getFirstRange();for(const o of s){if(o.item.is("element")&&i.isObject(o.item)){r=mg(o.item,i);break}if(o.type=="text"){r=o.item.getAttributes();break}}}return r}_fixGraveyardSelection(e){const i=this._model.schema.getNearestSelectionRange(e);i&&this._pushRange(i)}}function mg(n,t){if(!n)return null;if(n instanceof da||n instanceof yi)return n.getAttributes();if(!t.isInline(n))return null;if(!t.isObject(n))return[];const e=[];for(const[i,r]of n.getAttributes())t.checkAttribute("$text",i)&&t.getAttributeProperties(i).copyFromObject!==!1&&e.push([i,r]);return e}function x1e(n,t){const e=n.document.differ;for(const i of e.getChanges()){if(i.type!="insert")continue;const r=i.position.parent;i.length===r.maxOffset&&n.enqueueChange(t,o=>{const a=Array.from(r.getAttributeKeys()).filter(l=>l.startsWith(Yp));for(const l of a)o.removeAttribute(l,r)})}}class up{constructor(t){y(this,"_nodes",[]);y(this,"_offsetToNode",[]);t&&this._insertNodes(0,t)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(t){return this._nodes[t]||null}getNodeAtOffset(t){return this._offsetToNode[t]||null}getNodeIndex(t){return t.index}getNodeStartOffset(t){return t.startOffset}indexToOffset(t){if(t==this._nodes.length)return this.maxOffset;const e=this._nodes[t];if(!e)throw new we("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(e)}offsetToIndex(t){if(t==this._offsetToNode.length)return this._nodes.length;const e=this._offsetToNode[t];if(!e)throw new we("model-nodelist-offset-out-of-bounds",this,{offset:t,nodeList:this});return this.getNodeIndex(e)}_insertNodes(t,e){const i=[];for(const s of e){if(!(s instanceof Xd))throw new we("model-nodelist-insertnodes-not-node",this);i.push(s)}let r=this.indexToOffset(t);yD(this._nodes,i,t),yD(this._offsetToNode,O1e(i),r);for(let s=t;s<this._nodes.length;s++)this._nodes[s]._index=s,this._nodes[s]._startOffset=r,r+=this._nodes[s].offsetSize}_removeNodes(t,e=1){if(e==0)return[];let i=this.indexToOffset(t);const r=this._nodes.splice(t,e),s=r[r.length-1],o=s.startOffset+s.offsetSize-i;this._offsetToNode.splice(i,o);for(const a of r)a._index=null,a._startOffset=null;for(let a=t;a<this._nodes.length;a++)this._nodes[a]._index=a,this._nodes[a]._startOffset=i,i+=this._nodes[a].offsetSize;return r}_removeNodesArray(t){if(t.length==0)return;for(const i of t)i._index=null,i._startOffset=null;this._nodes=this._nodes.filter(i=>i.index!==null),this._offsetToNode=this._offsetToNode.filter(i=>i.index!==null);let e=0;for(let i=0;i<this._nodes.length;i++)this._nodes[i]._index=i,this._nodes[i]._startOffset=e,e+=this._nodes[i].offsetSize}toJSON(){return this._nodes.map(t=>t.toJSON())}}function O1e(n){const t=[];let e=0;for(const i of n)for(let r=0;r<i.offsetSize;r++)t[e++]=i;return t}let xi=class Cw extends Xd{constructor(e,i,r){super(i);y(this,"name");y(this,"_children",new up);this.name=e,r&&this._insertChild(0,r)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let i=this;for(const r of e)i=i.getChildAtOffset(r);return i}findAncestor(e,i={}){let r=i.includeSelf?this:this.parent;for(;r;){if(r.name===e)return r;r=r.parent}return null}toJSON(){const e=super.toJSON();if(e.name=this.name,this._children.length>0){e.children=[];for(const i of this._children)e.children.push(i.toJSON())}return e}_clone(e=!1){const i=e?V1e(this._children):void 0;return new Cw(this.name,this.getAttributes(),i)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,i){const r=R1e(i);for(const s of r)s.parent!==null&&s._remove(),s.parent=this;this._children._insertNodes(e,r)}_removeChildren(e,i=1){const r=this._children._removeNodes(e,i);for(const s of r)s.parent=null;return r}_removeChildrenArray(e){this._children._removeNodesArray(e);for(const i of e)i.parent=null}static fromJSON(e){let i;if(e.children){i=[];for(const r of e.children)r.name?i.push(Cw.fromJSON(r)):i.push(yi.fromJSON(r))}return new Cw(e.name,e.attributes,i)}};xi.prototype.is=function(n,t){return t?t===this.name&&(n==="element"||n==="model:element"):n==="element"||n==="model:element"||n==="node"||n==="model:node"};function R1e(n){if(typeof n=="string")return[new yi(n)];po(n)||(n=[n]);const t=[];for(const e of n)typeof e=="string"?t.push(new yi(e)):e instanceof da?t.push(new yi(e.data,e.getAttributes())):t.push(e);return t}function V1e(n){const t=[];for(const e of n)t.push(e._clone(!0));return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class qz{constructor(t){y(this,"_dispatchers");this._dispatchers=t}add(t){for(const e of this._dispatchers)t(e);return this}}class D1e extends qz{elementToElement(t){return this.add(J1e(t))}elementToStructure(t){return this.add(X1e(t))}attributeToElement(t){return this.add(eke(t))}attributeToAttribute(t){return this.add(tke(t))}markerToElement(t){return this.add(nke(t))}markerToHighlight(t){return this.add(rke(t))}markerToData(t){return this.add(ike(t))}}function Gz(){return(n,t,e)=>{if(!e.consumable.consume(t.item,n.name))return;const i=e.writer,r=e.mapper.toViewPosition(t.range.start),s=i.createText(t.item.data);i.insert(r,s)}}function Kz(){return(n,t,e)=>{e.convertAttributes(t.item),!t.reconversion&&t.item.is("element")&&!t.item.isEmpty&&e.convertChildren(t.item)}}function N1e(){return(n,t,e)=>{const i=e.mapper.toViewPosition(t.position),r=t.position.getShiftedBy(t.length),s=e.mapper.toViewPosition(r,{isPhantom:!0}),o=e.writer.createRange(i,s),a=e.writer.remove(o.getTrimmed());for(const l of e.writer.createRangeIn(a).getItems())e.mapper.unbindViewElement(l,{defer:!0})}}function Yz(n,t){const e=n.createAttributeElement("span",t.attributes);return t.classes&&e._addClass(t.classes),typeof t.priority=="number"&&(e._priority=t.priority),e._id=t.id,e}function L1e(){return(n,t,e)=>{const i=t.selection;if(i.isCollapsed||!e.consumable.consume(i,"selection"))return;const r=[];for(const s of i.getRanges())r.push(e.mapper.toViewRange(s));e.writer.setSelection(r,{backward:i.isBackward})}}function M1e(){return(n,t,e)=>{const i=t.selection;if(!i.isCollapsed||!e.consumable.consume(i,"selection"))return;const r=e.writer,s=i.getFirstPosition(),o=e.mapper.toViewPosition(s),a=r.breakAttributes(o);r.setSelection(a)}}function $1e(){return(n,t,e)=>{const i=e.writer,r=i.document.selection;for(const s of r.getRanges())s.isCollapsed&&s.end.parent.isAttached()&&e.writer.mergeAttributes(s.start);i.setSelection(null)}}function B1e(n){return(t,e,i)=>{if(!i.consumable.test(e.item,t.name))return;const r=n(e.attributeOldValue,i,e),s=n(e.attributeNewValue,i,e);if(!r&&!s)return;i.consumable.consume(e.item,t.name);const o=i.writer,a=o.document.selection;if(e.item instanceof to||e.item instanceof Ca)o.wrap(a.getFirstRange(),s);else{let l=i.mapper.toViewRange(e.range);e.attributeOldValue!==null&&r&&(l=o.unwrap(l,r)),e.attributeNewValue!==null&&s&&o.wrap(l,s)}}}function F1e(n,t=dke){return(e,i,r)=>{if(!t(i.item,r.consumable,{preflight:!0}))return;const s=n(i.item,r,i);if(!s)return;t(i.item,r.consumable);const o=r.mapper.toViewPosition(i.range.start);r.mapper.bindElements(i.item,s),r.writer.insert(o,s),r.convertAttributes(i.item),e8(s,i.item.getChildren(),r,{reconversion:i.reconversion})}}function U1e(n,t){return(e,i,r)=>{if(!t(i.item,r.consumable,{preflight:!0}))return;const s=new Map;r.writer._registerSlotFactory(ake(i.item,s,r));const o=n(i.item,r,i);if(r.writer._clearSlotFactory(),!o)return;lke(i.item,s,r),t(i.item,r.consumable);const a=r.mapper.toViewPosition(i.range.start);r.mapper.bindElements(i.item,o),r.writer.insert(a,o),r.convertAttributes(i.item),cke(o,s,r,{reconversion:i.reconversion})}}function z1e(n){return(t,e,i)=>{e.isOpening=!0;const r=n(e,i);e.isOpening=!1;const s=n(e,i);if(!r||!s)return;const o=e.markerRange;if(o.isCollapsed&&!i.consumable.consume(o,t.name))return;for(const c of o)if(!i.consumable.consume(c.item,t.name))return;const a=i.mapper,l=i.writer;l.insert(a.toViewPosition(o.start),r),i.mapper.bindElementToMarker(r,e.markerName),o.isCollapsed||(l.insert(a.toViewPosition(o.end),s),i.mapper.bindElementToMarker(s,e.markerName)),t.stop()}}function H1e(){return(n,t,e)=>{const i=e.mapper.markerNameToElements(t.markerName);if(i){for(const r of i)e.mapper.unbindElementFromMarkerName(r,t.markerName),e.writer.clear(e.writer.createRangeOn(r),r);e.writer.clearClonedElementsGroup(t.markerName),n.stop()}}}function W1e(n){return(t,e,i)=>{const r=n(e.markerName,i);if(!r)return;const s=e.markerRange;i.consumable.consume(s,t.name)&&($D(s,!1,i,e,r),$D(s,!0,i,e,r),t.stop())}}function $D(n,t,e,i,r){const s=t?n.start:n.end,o=s.nodeAfter&&s.nodeAfter.is("element")?s.nodeAfter:null,a=s.nodeBefore&&s.nodeBefore.is("element")?s.nodeBefore:null;if(o||a){let c,u;t&&o||!t&&!a?(c=o,u=!0):(c=a,u=!1);const d=e.mapper.toViewElement(c);if(d){j1e(d,t,u,e,i,r);return}}const l=e.mapper.toViewPosition(s);q1e(l,t,e,i,r)}function j1e(n,t,e,i,r,s){const o=`data-${s.group}-${t?"start":"end"}-${e?"before":"after"}`,a=n.hasAttribute(o)?n.getAttribute(o).split(","):[];a.unshift(s.name),i.writer.setAttribute(o,a.join(","),n),i.mapper.bindElementToMarker(n,r.markerName)}function q1e(n,t,e,i,r){const s=`${r.group}-${t?"start":"end"}`,o=r.name?{name:r.name}:null,a=e.writer.createUIElement(s,o);e.writer.insert(n,a),e.mapper.bindElementToMarker(a,i.markerName)}function G1e(n){return(t,e,i)=>{const r=n(e.markerName,i);if(!r)return;const s=i.mapper.markerNameToElements(e.markerName);if(!s)return;for(const a of s)i.mapper.unbindElementFromMarkerName(a,e.markerName),a.is("containerElement")?(o(`data-${r.group}-start-before`,a),o(`data-${r.group}-start-after`,a),o(`data-${r.group}-end-before`,a),o(`data-${r.group}-end-after`,a)):i.writer.clear(i.writer.createRangeOn(a),a);i.writer.clearClonedElementsGroup(e.markerName),t.stop();function o(a,l){if(l.hasAttribute(a)){const c=new Set(l.getAttribute(a).split(","));c.delete(r.name),c.size==0?i.writer.removeAttribute(a,l):i.writer.setAttribute(a,Array.from(c).join(","),l)}}}}function K1e(n){return(t,e,i)=>{if(!i.consumable.test(e.item,t.name))return;const r=n(e.attributeOldValue,i,e),s=n(e.attributeNewValue,i,e);if(!r&&!s)return;i.consumable.consume(e.item,t.name);const o=i.mapper.toViewElement(e.item),a=i.writer;if(!o)throw new we("conversion-attribute-to-attribute-on-text",i.dispatcher,e);if(e.attributeOldValue!==null&&r){let l=r.value;r.key=="style"&&(typeof r.value=="string"?l=new Ih(a.document.stylesProcessor).setTo(r.value).getStylesEntries().map(([c])=>c):l=Object.keys(r.value)),a.removeAttribute(r.key,l,o)}if(e.attributeNewValue!==null&&s){let l=s.value;s.key=="style"&&typeof s.value=="string"&&(l=Object.fromEntries(new Ih(a.document.stylesProcessor).setTo(s.value).getStylesEntries())),a.setAttribute(s.key,l,!1,o)}}}function Y1e(n){return(t,e,i)=>{if(!e.item||!(e.item instanceof to||e.item instanceof Ca)&&!e.item.is("$textProxy"))return;const r=eP(n,e,i);if(!r||!i.consumable.consume(e.item,t.name))return;const s=i.writer,o=Yz(s,r),a=s.document.selection;if(e.item instanceof to||e.item instanceof Ca)s.wrap(a.getFirstRange(),o);else{const l=i.mapper.toViewRange(e.range),c=s.wrap(l,o);for(const u of c.getItems())if(u.is("attributeElement")&&u.isSimilar(o)){i.mapper.bindElementToMarker(u,e.markerName);break}}}}function Q1e(n){return(t,e,i)=>{if(!e.item||!(e.item instanceof xi))return;const r=eP(n,e,i);if(!r||!i.consumable.test(e.item,t.name))return;const s=i.mapper.toViewElement(e.item);if(s&&s.getCustomProperty("addHighlight")){i.consumable.consume(e.item,t.name);for(const a of qe._createIn(e.item))i.consumable.consume(a.item,t.name);s.getCustomProperty("addHighlight")(s,r,i.writer),i.mapper.bindElementToMarker(s,e.markerName)}}}function Z1e(n){return(t,e,i)=>{if(e.markerRange.isCollapsed)return;const r=eP(n,e,i);if(!r)return;const s=Yz(i.writer,r),o=i.mapper.markerNameToElements(e.markerName);if(o){for(const a of o)i.mapper.unbindElementFromMarkerName(a,e.markerName),a.is("attributeElement")?i.writer.unwrap(i.writer.createRangeOn(a),s):a.getCustomProperty("removeHighlight")(a,r.id,i.writer);i.writer.clearClonedElementsGroup(e.markerName),t.stop()}}}function J1e(n){const t=Qz(n.model),e=Qp(n.view,"container");return t.attributes.length&&(t.children=!0),i=>{i.on(`insert:${t.name}`,F1e(e,Xz(t)),{priority:n.converterPriority||"normal"}),(t.children||t.attributes.length)&&i.on("reduceChanges",Jz(t),{priority:"low"})}}function X1e(n){const t=Qz(n.model),e=Qp(n.view,"container");return t.children=!0,i=>{if(i._conversionApi.schema.checkChild(t.name,"$text"))throw new we("conversion-element-to-structure-disallowed-text",i,{elementName:t.name});i.on(`insert:${t.name}`,U1e(e,Xz(t)),{priority:n.converterPriority||"normal"}),i.on("reduceChanges",Jz(t),{priority:"low"})}}function eke(n){n=Ys(n);let t=n.model;typeof t=="string"&&(t={key:t});let e=`attribute:${t.key}`;if(t.name&&(e+=":"+t.name),t.values)for(const r of t.values)n.view[r]=Qp(n.view[r],"attribute");else n.view=Qp(n.view,"attribute");const i=Zz(n);return r=>{r.on(e,B1e(i),{priority:n.converterPriority||"normal"})}}function tke(n){n=Ys(n);let t=n.model;typeof t=="string"&&(t={key:t});let e=`attribute:${t.key}`;if(t.name&&(e+=":"+t.name),t.values)for(const r of t.values)n.view[r]=BD(n.view[r]);else n.view=BD(n.view);const i=Zz(n);return r=>{r.on(e,K1e(i),{priority:n.converterPriority||"normal"})}}function nke(n){const t=Qp(n.view,"ui");return e=>{e.on(`addMarker:${n.model}`,z1e(t),{priority:n.converterPriority||"normal"}),e.on(`removeMarker:${n.model}`,H1e(),{priority:n.converterPriority||"normal"})}}function ike(n){n=Ys(n);const t=n.model;let e=n.view;return e||(e=i=>({group:t,name:i.substr(n.model.length+1)})),i=>{i.on(`addMarker:${t}`,W1e(e),{priority:n.converterPriority||"normal"}),i.on(`removeMarker:${t}`,G1e(e),{priority:n.converterPriority||"normal"})}}function rke(n){return t=>{t.on(`addMarker:${n.model}`,Y1e(n.view),{priority:n.converterPriority||"normal"}),t.on(`addMarker:${n.model}`,Q1e(n.view),{priority:n.converterPriority||"normal"}),t.on(`removeMarker:${n.model}`,Z1e(n.view),{priority:n.converterPriority||"normal"})}}function Qz(n){return typeof n=="string"&&(n={name:n}),{name:n.name,attributes:n.attributes?jn(n.attributes):[],children:!!n.children}}function Qp(n,t){return typeof n=="function"?n:(e,i)=>ske(n,i,t)}function ske(n,t,e){typeof n=="string"&&(n={name:n});let i;const r=t.writer,s=Object.assign({},n.attributes);if(e=="container")i=r.createContainerElement(n.name,s);else if(e=="attribute"){const o={priority:n.priority||wd.DEFAULT_PRIORITY};i=r.createAttributeElement(n.name,s,o)}else i=r.createUIElement(n.name,s);if(n.styles){const o=Object.keys(n.styles);for(const a of o)r.setStyle(a,n.styles[a],i)}if(n.classes){const o=n.classes;if(typeof o=="string")r.addClass(o,i);else for(const a of o)r.addClass(a,i)}return i}function Zz(n){return n.model.values?(t,e,i)=>{const r=n.view[t];return r?r(t,e,i):null}:n.view}function BD(n){return typeof n=="string"?t=>({key:n,value:t}):typeof n=="object"?n.value?()=>n:t=>({key:n.key,value:t}):n}function eP(n,t,e){const i=typeof n=="function"?n(t,e):n;return i?(i.priority||(i.priority=10),i.id||(i.id=t.markerName),i):null}function oke(n){return(t,e)=>{if(!t.is("element",n.name))return!1;if(e.type=="attribute"){if(n.attributes.includes(e.attributeKey))return!0}else{/* istanbul ignore else: This is always true because otherwise it would not register a reducer callback. -- @preserve */if(n.children)return!0}return!1}}function Jz(n){const t=oke(n);return(e,i)=>{const r=[];i.reconvertedElements||(i.reconvertedElements=new Set);for(const s of i.changes){const o=s.type=="attribute"?s.range.start.nodeAfter:s.position.parent;if(!o||!t(o,s)){r.push(s);continue}if(!i.reconvertedElements.has(o)){i.reconvertedElements.add(o);const a=it._createBefore(o);let l=r.length;for(let c=r.length-1;c>=0;c--){const u=r[c],f=(u.type=="attribute"?u.range.start:u.position).compareWith(a);if(f=="before"||u.type=="remove"&&f=="same")break;l=c}r.splice(l,0,{type:"remove",name:o.name,position:a,length:1},{type:"reinsert",name:o.name,position:a,length:1})}}i.changes=r}}function Xz(n){return(t,e,i={})=>{const r=["insert"];for(const s of n.attributes)t.hasAttribute(s)&&r.push(`attribute:${s}`);return r.every(s=>e.test(t,s))?(i.preflight||r.forEach(s=>e.consume(t,s)),!0):!1}}function ake(n,t,e){return(i,r)=>{const s=i.createContainerElement("$slot");let o=null;if(r==="children")o=Array.from(n.getChildren());else if(typeof r=="function")o=Array.from(n.getChildren()).filter(a=>r(a));else throw new we("conversion-slot-mode-unknown",e.dispatcher,{modeOrFilter:r});return t.set(s,o),s}}function lke(n,t,e){const i=Array.from(t.values()).flat(),r=new Set(i);if(r.size!=i.length)throw new we("conversion-slot-filter-overlap",e.dispatcher,{element:n});if(r.size!=n.childCount)throw new we("conversion-slot-filter-incomplete",e.dispatcher,{element:n})}function cke(n,t,e,i){e.mapper.on("modelToViewPosition",o,{priority:"highest"});let r=null,s=null;for([r,s]of t)e8(n,s,e,i),e.writer.move(e.writer.createRangeIn(r),e.writer.createPositionBefore(r)),e.writer.remove(r);e.mapper.off("modelToViewPosition",o);function o(a,l){const c=l.modelPosition.nodeAfter,u=s.indexOf(c);u<0||(l.viewPosition=l.mapper.findPositionIn(r,u))}}function e8(n,t,e,i){for(const r of t)uke(n.root,r,e,i)||e.convertItem(r)}function uke(n,t,e,i){const{writer:r,mapper:s}=e;if(!i.reconversion)return!1;const o=s.toViewElement(t);return!o||o.root==n||!e.canReuseView(o)?!1:(r.move(r.createRangeOn(o),s.toViewPosition(it._createBefore(t))),!0)}function dke(n,t,{preflight:e}={}){return e?t.test(n,"insert"):t.consume(n,"insert")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function t8(n){const{schema:t,document:e}=n.model;for(const i of e.getRoots())if(i.isEmpty&&!t.checkChild(i,"$text")&&t.checkChild(i,"paragraph"))return n.insertElement("paragraph",i),!0;return!1}function n8(n,t,e){const i=e.createContext(n);return!(!e.checkChild(i,"paragraph")||!e.checkChild(i.push("paragraph"),t))}function i8(n,t){const e=t.createElement("paragraph");return t.insert(e,n),t.createPositionAt(e,0)}class fke extends qz{elementToElement(t){return this.add(r8(t))}elementToAttribute(t){return this.add(gke(t))}attributeToAttribute(t){return this.add(pke(t))}elementToMarker(t){return this.add(vke(t))}dataToMarker(t){return this.add(bke(t))}}function FD(){return(n,t,e)=>{if(!t.modelRange&&e.consumable.consume(t.viewItem,{name:!0})){const{modelRange:i,modelCursor:r}=e.convertChildren(t.viewItem,t.modelCursor);t.modelRange=i,t.modelCursor=r}}}function hke(){return(n,t,{schema:e,consumable:i,writer:r})=>{let s=t.modelCursor;if(!i.test(t.viewItem))return;if(!e.checkChild(s,"$text")){if(!n8(s,"$text",e)||t.viewItem.data.trim().length==0)return;s=i8(s,r)}i.consume(t.viewItem);const o=r.createText(t.viewItem.data);r.insert(o,s),t.modelRange=r.createRange(s,s.getShiftedBy(o.offsetSize)),t.modelCursor=t.modelRange.end}}function mke(n,t){return(e,i)=>{const r=i.newSelection,s=[];for(const a of r.getRanges())s.push(t.toModelRange(a));const o=n.createSelection(s,{backward:r.isBackward});o.isEqual(n.document.selection)||n.change(a=>{a.setSelection(o)})}}function r8(n){n=Ys(n);const t=VT(n),e=tP(n.view),i=e?`element:${e}`:"element";return r=>{r.on(i,t,{priority:n.converterPriority||"normal"})}}function gke(n){n=Ys(n),s8(n);const t=o8(n,!1),e=tP(n.view),i=e?`element:${e}`:"element";return r=>{r.on(i,t,{priority:n.converterPriority||"low"})}}function pke(n){n=Ys(n);let t=null;(typeof n.view=="string"||n.view.key)&&(t=_ke(n)),s8(n,t);const e=o8(n,!0);return i=>{i.on("element",e,{priority:n.converterPriority||"low"})}}function vke(n){const t=Cke(n.model);return r8({...n,model:t})}function bke(n){n=Ys(n),n.model||(n.model=r=>r?n.view+":"+r:n.view);const t={view:n.view,model:n.model},e=VT(UD(t,"start")),i=VT(UD(t,"end"));return r=>{r.on(`element:${n.view}-start`,e,{priority:n.converterPriority||"normal"}),r.on(`element:${n.view}-end`,i,{priority:n.converterPriority||"normal"});const s=ro.low,o=ro.highest,a=ro.get(n.converterPriority)/o;r.on("element",wke(t),{priority:s+a})}}function wke(n){return(t,e,i)=>{const r=`data-${n.view}`;if(!i.consumable.test(e.viewItem,{attributes:r+"-end-after"})&&!i.consumable.test(e.viewItem,{attributes:r+"-start-after"})&&!i.consumable.test(e.viewItem,{attributes:r+"-end-before"})&&!i.consumable.test(e.viewItem,{attributes:r+"-start-before"}))return;e.modelRange||Object.assign(e,i.convertChildren(e.viewItem,e.modelCursor)),i.consumable.consume(e.viewItem,{attributes:r+"-end-after"})&&s(e.modelRange.end,e.viewItem.getAttribute(r+"-end-after").split(",")),i.consumable.consume(e.viewItem,{attributes:r+"-start-after"})&&s(e.modelRange.end,e.viewItem.getAttribute(r+"-start-after").split(",")),i.consumable.consume(e.viewItem,{attributes:r+"-end-before"})&&s(e.modelRange.start,e.viewItem.getAttribute(r+"-end-before").split(",")),i.consumable.consume(e.viewItem,{attributes:r+"-start-before"})&&s(e.modelRange.start,e.viewItem.getAttribute(r+"-start-before").split(","));function s(o,a){for(const l of a){const c=n.model(l,i),u=i.writer.createElement("$marker",{"data-name":c});i.writer.insert(u,o),e.modelCursor.isEqual(o)?e.modelCursor=e.modelCursor.getShiftedBy(1):e.modelCursor=e.modelCursor._getTransformedByInsertion(o,1),e.modelRange=e.modelRange._getTransformedByInsertion(o,1)[0]}}}}function tP(n){return typeof n=="string"?n:typeof n=="object"&&typeof n.name=="string"?n.name:null}function VT(n){const t=new Vs(n.view);return(e,i,r)=>{const s=t.match(i.viewItem);if(!s)return;const o=s.match;if(o.name=!0,!r.consumable.test(i.viewItem,o))return;const a=yke(n.model,i.viewItem,r);a&&r.safeInsert(a,i.modelCursor)&&(r.consumable.consume(i.viewItem,o),r.convertChildren(i.viewItem,a),r.updateConversionResult(a,i))}}function yke(n,t,e){return n instanceof Function?n(t,e):e.writer.createElement(n)}function _ke(n){typeof n.view=="string"&&(n.view={key:n.view});const t=n.view.key,e=typeof n.view.value>"u"?/[\s\S]*/:n.view.value;let i;return t=="class"||t=="style"?i={[t=="class"?"classes":"styles"]:e}:i={attributes:{[t]:e}},n.view.name&&(i.name=n.view.name),n.view=i,t}function s8(n,t=null){const e=t===null?!0:s=>s.getAttribute(t),i=typeof n.model!="object"?n.model:n.model.key,r=typeof n.model!="object"||typeof n.model.value>"u"?e:n.model.value;n.model={key:i,value:r}}function o8(n,t){const e=new Vs(n.view);return(i,r,s)=>{if(!r.modelRange&&t)return;const o=e.match(r.viewItem);if(!o||(kke(n.view,r.viewItem)?o.match.name=!0:delete o.match.name,!s.consumable.test(r.viewItem,o.match)))return;const a=n.model.key,l=typeof n.model.value=="function"?n.model.value(r.viewItem,s,r):n.model.value;if(l===null)return;r.modelRange||Object.assign(r,s.convertChildren(r.viewItem,r.modelCursor)),Eke(r.modelRange,{key:a,value:l},t,s)&&(s.consumable.test(r.viewItem,{name:!0})&&(o.match.name=!0),s.consumable.consume(r.viewItem,o.match))}}function kke(n,t){const e=typeof n=="function"?n(t):n;return typeof e=="object"&&!tP(e)?!1:!e.classes&&!e.attributes&&!e.styles}function Eke(n,t,e,i){let r=!1;for(const s of Array.from(n.getItems({shallow:e})))i.schema.checkAttribute(s,t.key)&&(r=!0,!s.hasAttribute(t.key)&&i.writer.setAttribute(t.key,t.value,s));return r}function Cke(n){return(t,e)=>{const i=typeof n=="string"?n:n(t,e);return e.writer.createElement("$marker",{"data-name":i})}}function UD(n,t){const e=(i,r)=>{const s=i.getAttribute("name"),o=n.model(s,r);return r.writer.createElement("$marker",{"data-name":o})};return{view:`${n.view}-${t}`,model:e}}class Tke extends Wn(){constructor(e,i){super();y(this,"model");y(this,"view");y(this,"mapper");y(this,"downcastDispatcher");this.model=e,this.view=new p1e(i),this.mapper=new Hz,this.downcastDispatcher=new Wz({mapper:this.mapper,schema:e.schema});const r=this.model.document,s=r.selection,o=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(r,"change",()=>{this.view.change(a=>{this.downcastDispatcher.convertChanges(r.differ,o,a),this.downcastDispatcher.convertSelection(s,o,a)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",mke(this.model,this.mapper)),this.downcastDispatcher.on("insert:$text",Gz(),{priority:"lowest"}),this.downcastDispatcher.on("insert",Kz(),{priority:"lowest"}),this.downcastDispatcher.on("remove",N1e(),{priority:"low"}),this.downcastDispatcher.on("cleanSelection",$1e()),this.downcastDispatcher.on("selection",L1e(),{priority:"low"}),this.downcastDispatcher.on("selection",M1e(),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(a=>{if(a.rootName=="$graveyard")return null;const l=new xz(this.view.document,a.name);return l.rootName=a.rootName,this.mapper.bindElements(a,l),l})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(e){const i=typeof e=="string"?e:e.name,r=this.model.markers.get(i);if(!r)throw new we("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:i});this.model.change(()=>{this.model.markers._refresh(r)})}reconvertItem(e){this.model.change(()=>{this.model.document.differ._refreshItem(e)})}}class Ske extends Wn(){constructor(){super();y(this,"_sourceDefinitions",{});y(this,"_attributeProperties",Object.create(null));y(this,"_customChildChecks",new Map);y(this,"_customAttributeChecks",new Map);y(this,"_genericCheckSymbol",Symbol("$generic"));y(this,"_compiledDefinitions");this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(e,i)=>{i[0]=new Zc(i[0])},{priority:"highest"}),this.on("checkChild",(e,i)=>{i[0]=new Zc(i[0]),i[1]=this.getDefinition(i[1])},{priority:"highest"})}register(e,i){if(this._sourceDefinitions[e])throw new we("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},i)],this._clearCache()}extend(e,i){if(!this._sourceDefinitions[e])throw new we("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},i)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(e){let i;return typeof e=="string"?i=e:"is"in e&&(e.is("$text")||e.is("$textProxy"))?i="$text":i=e.name,this.getDefinitions()[i]}isRegistered(e){return!!this.getDefinition(e)}isBlock(e){const i=this.getDefinition(e);return!!(i&&i.isBlock)}isLimit(e){const i=this.getDefinition(e);return i?!!(i.isLimit||i.isObject):!1}isObject(e){const i=this.getDefinition(e);return i?!!(i.isObject||i.isLimit&&i.isSelectable&&i.isContent):!1}isInline(e){const i=this.getDefinition(e);return!!(i&&i.isInline)}isSelectable(e){const i=this.getDefinition(e);return i?!!(i.isSelectable||i.isObject):!1}isContent(e){const i=this.getDefinition(e);return i?!!(i.isContent||i.isObject):!1}checkChild(e,i){return i?this._checkContextMatch(e,i):!1}checkAttribute(e,i){const r=this.getDefinition(e.last);if(!r)return!1;const s=this._evaluateAttributeChecks(e,i);return s!==void 0?s:r.allowAttributes.includes(i)}checkMerge(e,i){if(e instanceof it){const r=e.nodeBefore,s=e.nodeAfter;if(!(r instanceof xi))throw new we("schema-check-merge-no-element-before",this);if(!(s instanceof xi))throw new we("schema-check-merge-no-element-after",this);return this.checkMerge(r,s)}if(this.isLimit(e)||this.isLimit(i))return!1;for(const r of i.getChildren())if(!this.checkChild(e,r))return!1;return!0}addChildCheck(e,i){const r=i!==void 0?i:this._genericCheckSymbol,s=this._customChildChecks.get(r)||[];s.push(e),this._customChildChecks.set(r,s)}addAttributeCheck(e,i){const r=i!==void 0?i:this._genericCheckSymbol,s=this._customAttributeChecks.get(r)||[];s.push(e),this._customAttributeChecks.set(r,s)}setAttributeProperties(e,i){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),i)}getAttributeProperties(e){return this._attributeProperties[e]||Object.create(null)}getLimitElement(e){let i;for(e instanceof it?i=e.parent:i=(e instanceof qe?[e]:Array.from(e.getRanges())).reduce((s,o)=>{const a=o.getCommonAncestor();return s?s.getCommonAncestor(a,{includeSelf:!0}):a},null);!this.isLimit(i)&&i.parent;)i=i.parent;return i}checkAttributeInSelection(e,i){if(e.isCollapsed){const s=[...e.getFirstPosition().getAncestors(),new yi("",e.getAttributes())];return this.checkAttribute(s,i)}else{const r=e.getRanges();for(const s of r)for(const o of s)if(this.checkAttribute(o.item,i))return!0}return!1}*getValidRanges(e,i){e=zke(e);for(const r of e)yield*this._getValidRangesForRange(r,i)}getNearestSelectionRange(e,i="both"){if(e.root.rootName=="$graveyard")return null;if(this.checkChild(e,"$text"))return new qe(e);let r,s;const o=e.getAncestors().reverse().find(a=>this.isLimit(a))||e.root;(i=="both"||i=="backward")&&(r=new zl({boundaries:qe._createIn(o),startPosition:e,direction:"backward"})),(i=="both"||i=="forward")&&(s=new zl({boundaries:qe._createIn(o),startPosition:e}));for(const a of Uke(r,s)){const l=a.walker==r?"elementEnd":"elementStart",c=a.value;if(c.type==l&&this.isObject(c.item))return qe._createOn(c.item);if(this.checkChild(c.nextPosition,"$text"))return new qe(c.nextPosition)}return null}findAllowedParent(e,i){let r=e.parent;for(;r;){if(this.checkChild(r,i))return r;if(this.isLimit(r))return null;r=r.parent}return null}setAllowedAttributes(e,i,r){const s=r.model;for(const[o,a]of Object.entries(i))s.schema.checkAttribute(e,o)&&r.setAttribute(o,a,e)}removeDisallowedAttributes(e,i){for(const r of e)if(r.is("$text"))zD(this,r,i);else{const o=qe._createIn(r).getPositions();for(const a of o){const l=a.nodeBefore||a.parent;zD(this,l,i)}}}getAttributesWithProperty(e,i,r){const s={};for(const[o,a]of e.getAttributes()){const l=this.getAttributeProperties(o);l[i]!==void 0&&(r===void 0||r===l[i])&&(s[o]=a)}return s}createContext(e){return new Zc(e)}_clearCache(){this._compiledDefinitions=null}_compile(){const e={},i=this._sourceDefinitions,r=Object.keys(i);for(const o of r)e[o]=Ake(i[o],o);const s=Object.values(e);for(const o of s)Ike(e,o),Pke(e,o),xke(e,o),Oke(e,o);for(const o of s)Rke(e,o);for(const o of s)Vke(e,o);for(const o of s)Dke(e,o);for(const o of s)Lke(e,o);for(const o of s)Mke(e,o);this._compiledDefinitions=Nke(e)}_checkContextMatch(e,i){const r=e.last;let s=this._evaluateChildChecks(e,i);if(s=s!==void 0?s:i.allowIn.includes(r.name),!s)return!1;const o=this.getDefinition(r),a=e.trimLast();return o?a.length==0?!0:this._checkContextMatch(a,o):!1}_evaluateChildChecks(e,i){const r=this._customChildChecks.get(this._genericCheckSymbol)||[],s=this._customChildChecks.get(i.name)||[];for(const o of[...r,...s]){const a=o(e,i);if(a!==void 0)return a}}_evaluateAttributeChecks(e,i){const r=this._customAttributeChecks.get(this._genericCheckSymbol)||[],s=this._customAttributeChecks.get(i)||[];for(const o of[...r,...s]){const a=o(e,i);if(a!==void 0)return a}}*_getValidRangesForRange(e,i){let r=e.start,s=e.start;for(const o of e.getItems({shallow:!0}))o.is("element")&&(yield*this._getValidRangesForRange(qe._createIn(o),i)),this.checkAttribute(o,i)||(r.isEqual(s)||(yield new qe(r,s)),r=it._createAfter(o)),s=it._createAfter(o);r.isEqual(s)||(yield new qe(r,s))}findOptimalInsertionRange(e,i){const r=e.getSelectedElement();if(r&&this.isObject(r)&&!this.isInline(r))return i=="before"||i=="after"?new qe(it._createAt(r,i)):qe._createOn(r);const s=gi(e.getSelectedBlocks());if(!s)return new qe(e.focus);if(s.isEmpty)return new qe(it._createAt(s,0));const o=it._createAfter(s);return e.focus.isTouching(o)?new qe(o):new qe(it._createBefore(s))}}class Zc{constructor(t){y(this,"_items");if(t instanceof Zc)return t;let e;typeof t=="string"?e=[t]:Array.isArray(t)?e=t:e=t.getAncestors({includeSelf:!0}),this._items=e.map(Fke)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(t){const e=new Zc([t]);return e._items=[...this._items,...e._items],e}trimLast(){const t=new Zc([]);return t._items=this._items.slice(0,-1),t}getItem(t){return this._items[t]}*getNames(){yield*this._items.map(t=>t.name)}endsWith(t){return Array.from(this.getNames()).join(" ").endsWith(t)}startsWith(t){return Array.from(this.getNames()).join(" ").startsWith(t)}}function Ake(n,t){const e={name:t,allowIn:new Set,allowChildren:new Set,disallowIn:new Set,disallowChildren:new Set,allowContentOf:new Set,allowWhere:new Set,allowAttributes:new Set,disallowAttributes:new Set,allowAttributesOf:new Set,inheritTypesFrom:new Set};return $ke(n,e),Na(n,e,"allowIn"),Na(n,e,"allowChildren"),Na(n,e,"disallowIn"),Na(n,e,"disallowChildren"),Na(n,e,"allowContentOf"),Na(n,e,"allowWhere"),Na(n,e,"allowAttributes"),Na(n,e,"disallowAttributes"),Na(n,e,"allowAttributesOf"),Na(n,e,"inheritTypesFrom"),Bke(n,e),e}function Ike(n,t){for(const e of t.allowIn){const i=n[e];i?i.allowChildren.add(t.name):t.allowIn.delete(e)}}function Pke(n,t){for(const e of t.allowChildren){const i=n[e];i?i.allowIn.add(t.name):t.allowChildren.delete(e)}}function xke(n,t){for(const e of t.disallowIn){const i=n[e];i?i.disallowChildren.add(t.name):t.disallowIn.delete(e)}}function Oke(n,t){for(const e of t.disallowChildren){const i=n[e];i?i.disallowIn.add(t.name):t.disallowChildren.delete(e)}}function Rke(n,t){for(const e of t.disallowChildren)t.allowChildren.delete(e);for(const e of t.disallowIn)t.allowIn.delete(e);for(const e of t.disallowAttributes)t.allowAttributes.delete(e)}function Vke(n,t){for(const e of t.allowContentOf){const i=n[e];i&&(i.disallowChildren.forEach(r=>{t.allowChildren.has(r)||(t.disallowChildren.add(r),n[r].disallowIn.add(t.name))}),i.allowChildren.forEach(r=>{t.disallowChildren.has(r)||(t.allowChildren.add(r),n[r].allowIn.add(t.name))}))}}function Dke(n,t){for(const e of t.allowWhere){const i=n[e];i&&(i.disallowIn.forEach(r=>{t.allowIn.has(r)||(t.disallowIn.add(r),n[r].disallowChildren.add(t.name))}),i.allowIn.forEach(r=>{t.disallowIn.has(r)||(t.allowIn.add(r),n[r].allowChildren.add(t.name))}))}}function Nke(n){const t={};for(const e of Object.values(n))t[e.name]={name:e.name,isBlock:!!e.isBlock,isContent:!!e.isContent,isInline:!!e.isInline,isLimit:!!e.isLimit,isObject:!!e.isObject,isSelectable:!!e.isSelectable,allowIn:Array.from(e.allowIn).filter(i=>!!n[i]),allowChildren:Array.from(e.allowChildren).filter(i=>!!n[i]),allowAttributes:Array.from(e.allowAttributes)};return t}function Lke(n,t){for(const e of t.allowAttributesOf){const i=n[e];if(!i)return;i.allowAttributes.forEach(r=>{t.disallowAttributes.has(r)||t.allowAttributes.add(r)})}}function Mke(n,t){for(const e of t.inheritTypesFrom){const i=n[e];if(i){const r=Object.keys(i).filter(s=>s.startsWith("is"));for(const s of r)s in t||(t[s]=i[s])}}}function $ke(n,t){for(const e of n){const i=Object.keys(e).filter(r=>r.startsWith("is"));for(const r of i)t[r]=!!e[r]}}function Na(n,t,e){for(const i of n){let r=i[e];typeof r=="string"&&(r=[r]),Array.isArray(r)&&r.forEach(s=>t[e].add(s))}}function Bke(n,t){for(const e of n){const i=e.inheritAllFrom;i&&(t.allowContentOf.add(i),t.allowWhere.add(i),t.allowAttributesOf.add(i),t.inheritTypesFrom.add(i))}}function Fke(n){return typeof n=="string"||n.is("documentFragment")?{name:typeof n=="string"?n:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:n.is("element")?n.name:"$text",*getAttributeKeys(){yield*n.getAttributeKeys()},getAttribute(t){return n.getAttribute(t)}}}function*Uke(n,t){let e=!1;for(;!e;){if(e=!0,n){const i=n.next();i.done||(e=!1,yield{walker:n,value:i.value})}if(t){const i=t.next();i.done||(e=!1,yield{walker:t,value:i.value})}}}function*zke(n){for(const t of n)yield*t.getMinimalFlatRanges()}function zD(n,t,e){for(const i of t.getAttributeKeys())n.checkAttribute(t,i)||e.removeAttribute(i,t)}class Hke extends ri(){constructor(e){super();y(this,"conversionApi");y(this,"_splitParts",new Map);y(this,"_cursorParents",new Map);y(this,"_modelCursor",null);y(this,"_emptyElementsToKeep",new Set);this.conversionApi={...e,consumable:null,writer:null,store:null,convertItem:(i,r)=>this._convertItem(i,r),convertChildren:(i,r)=>this._convertChildren(i,r),safeInsert:(i,r)=>this._safeInsert(i,r),updateConversionResult:(i,r)=>this._updateConversionResult(i,r),splitToAllowedParent:(i,r)=>this._splitToAllowedParent(i,r),getSplitParts:i=>this._getSplitParts(i),keepEmptyElement:i=>this._keepEmptyElement(i)}}convert(e,i,r=["$root"]){this.fire("viewCleanup",e),this._modelCursor=jke(r,i),this.conversionApi.writer=i,this.conversionApi.consumable=Dy.createFrom(e),this.conversionApi.store={};const{modelRange:s}=this._convertItem(e,this._modelCursor),o=i.createDocumentFragment();if(s){this._removeEmptyElements();const a=this._modelCursor.parent,l=a._removeChildren(0,a.childCount);o._insertChild(0,l),o.markers=Wke(o,i)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,o}_convertItem(e,i){const r={viewItem:e,modelCursor:i,modelRange:null};if(e.is("element")?this.fire(`element:${e.name}`,r,this.conversionApi):e.is("$text")?this.fire("text",r,this.conversionApi):this.fire("documentFragment",r,this.conversionApi),r.modelRange&&!(r.modelRange instanceof qe))throw new we("view-conversion-dispatcher-incorrect-result",this);return{modelRange:r.modelRange,modelCursor:r.modelCursor}}_convertChildren(e,i){let r=i.is("position")?i:it._createAt(i,0);const s=new qe(r);for(const o of Array.from(e.getChildren())){const a=this._convertItem(o,r);a.modelRange instanceof qe&&(s.end=a.modelRange.end,r=a.modelCursor)}return{modelRange:s,modelCursor:r}}_safeInsert(e,i){const r=this._splitToAllowedParent(e,i);return r?(this.conversionApi.writer.insert(e,r.position),!0):!1}_updateConversionResult(e,i){const r=this._getSplitParts(e),s=this.conversionApi.writer;i.modelRange||(i.modelRange=s.createRange(s.createPositionBefore(e),s.createPositionAfter(r[r.length-1])));const o=this._cursorParents.get(e);o?i.modelCursor=s.createPositionAt(o,0):i.modelCursor=i.modelRange.end}_splitToAllowedParent(e,i){const{schema:r,writer:s}=this.conversionApi;let o=r.findAllowedParent(i,e);if(o){if(o===i.parent)return{position:i};this._modelCursor.parent.getAncestors().includes(o)&&(o=null)}if(!o)return n8(i,e,r)?{position:i8(i,s)}:null;const a=this.conversionApi.writer.split(i,o),l=[];for(const u of a.range.getWalker())if(u.type=="elementEnd")l.push(u.item);else{const d=l.pop(),f=u.item;this._registerSplitPair(d,f)}const c=a.range.end.parent;return this._cursorParents.set(e,c),{position:a.position,cursorParent:c}}_registerSplitPair(e,i){this._splitParts.has(e)||this._splitParts.set(e,[e]);const r=this._splitParts.get(e);this._splitParts.set(i,r),r.push(i)}_getSplitParts(e){let i;return this._splitParts.has(e)?i=this._splitParts.get(e):i=[e],i}_keepEmptyElement(e){this._emptyElementsToKeep.add(e)}_removeEmptyElements(){const e=new Map;for(const i of this._splitParts.keys())if(i.isEmpty&&!this._emptyElementsToKeep.has(i)){const r=e.get(i.parent)||[];r.push(i),this._splitParts.delete(i),e.set(i.parent,r)}for(const[i,r]of e)i._removeChildrenArray(r);e.size&&this._removeEmptyElements()}}function Wke(n,t){const e=new Set,i=new Map,r=qe._createIn(n).getItems();for(const s of r)s.is("element","$marker")&&e.add(s);for(const s of e){const o=s.getAttribute("data-name"),a=t.createPositionBefore(s);i.has(o)?i.get(o).end=a.clone():i.set(o,new qe(a.clone())),t.remove(s)}return i}function jke(n,t){let e;for(const i of new Zc(n)){const r={};for(const o of i.getAttributeKeys())r[o]=i.getAttribute(o);const s=t.createElement(i.name,r);e&&t.insert(s,e),e=it._createAt(s,0)}return e}class qke{getHtml(t){const i=at.document.implementation.createHTMLDocument("").createElement("div");return i.appendChild(t),i.innerHTML}}class a8{constructor(t){y(this,"domParser");y(this,"domConverter");y(this,"htmlWriter");y(this,"skipComments",!0);this.domParser=new DOMParser,this.domConverter=new V0(t,{renderingMode:"data"}),this.htmlWriter=new qke}toData(t){const e=this.domConverter.viewToDom(t);return this.htmlWriter.getHtml(e)}toView(t){const e=this._toDom(t);return this.domConverter.domToView(e,{skipComments:this.skipComments})}registerRawContentMatcher(t){this.domConverter.registerRawContentMatcher(t)}useFillerType(t){this.domConverter.blockFillerMode=t=="marked"?"markedNbsp":"nbsp"}_toDom(t){/<(?:html|body|head|meta)(?:\s[^>]*)?>/i.test(t.trim().slice(0,1e4))||(t=`<body>${t}</body>`);const e=this.domParser.parseFromString(t,"text/html"),i=e.createDocumentFragment(),r=e.body.childNodes;for(;r.length>0;)i.appendChild(r[0]);return i}}class Gke extends ri(){constructor(e,i){super();y(this,"model");y(this,"mapper");y(this,"downcastDispatcher");y(this,"upcastDispatcher");y(this,"viewDocument");y(this,"stylesProcessor");y(this,"htmlProcessor");y(this,"processor");y(this,"_viewWriter");this.model=e,this.mapper=new Hz,this.downcastDispatcher=new Wz({mapper:this.mapper,schema:e.schema}),this.downcastDispatcher.on("insert:$text",Gz(),{priority:"lowest"}),this.downcastDispatcher.on("insert",Kz(),{priority:"lowest"}),this.upcastDispatcher=new Hke({schema:e.schema}),this.viewDocument=new O0(i),this.stylesProcessor=i,this.htmlProcessor=new a8(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new Vz(this.viewDocument),this.upcastDispatcher.on("text",hke(),{priority:"lowest"}),this.upcastDispatcher.on("element",FD(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",FD(),{priority:"lowest"}),Wn().prototype.decorate.call(this,"init"),Wn().prototype.decorate.call(this,"set"),Wn().prototype.decorate.call(this,"get"),Wn().prototype.decorate.call(this,"toView"),Wn().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},t8)},{priority:"lowest"})}get(e={}){const{rootName:i="main",trim:r="empty"}=e;if(!this._checkIfRootsExists([i]))throw new we("datacontroller-get-non-existent-root",this);const s=this.model.document.getRoot(i);return s.isAttached()||mn("datacontroller-get-detached-root",this),r==="empty"&&!this.model.hasContent(s,{ignoreWhitespaces:!0})?"":this.stringify(s,e)}stringify(e,i={}){const r=this.toView(e,i);return this.processor.toData(r)}toView(e,i={}){const r=this.viewDocument,s=this._viewWriter;this.mapper.clearBindings();const o=qe._createIn(e),a=new yd(r);this.mapper.bindElements(e,a);const l=e.is("documentFragment")?e.markers:Kke(e);return this.downcastDispatcher.convert(o,l,s,i),a}init(e){if(this.model.document.version)throw new we("datacontroller-init-document-not-empty",this);let i={};if(typeof e=="string"?i.main=e:i=e,!this._checkIfRootsExists(Object.keys(i)))throw new we("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},r=>{for(const s of Object.keys(i)){const o=this.model.document.getRoot(s);r.insert(this.parse(i[s],o),o,0)}}),Promise.resolve()}set(e,i={}){let r={};if(typeof e=="string"?r.main=e:r=e,!this._checkIfRootsExists(Object.keys(r)))throw new we("datacontroller-set-non-existent-root",this);this.model.enqueueChange(i.batchType||{},s=>{s.setSelection(null),s.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const o of Object.keys(r)){const a=this.model.document.getRoot(o);s.remove(s.createRangeIn(a)),s.insert(this.parse(r[o],a),a,0)}})}parse(e,i="$root"){const r=this.processor.toView(e);return this.toModel(r,i)}toModel(e,i="$root"){return this.model.change(r=>this.upcastDispatcher.convert(e,r,i))}addStyleProcessorRules(e){e(this.stylesProcessor)}registerRawContentMatcher(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e)}destroy(){this.stopListening()}_checkIfRootsExists(e){for(const i of e)if(!this.model.document.getRoot(i))return!1;return!0}}function Kke(n){const t=[],e=n.root.document;if(!e)return new Map;const i=qe._createIn(n);for(const r of e.model.markers){const s=r.getRange(),o=s.isCollapsed,a=s.start.isEqual(i.start)||s.end.isEqual(i.end);if(o&&a)t.push([r.name,s]);else{const l=i.getIntersection(s);l&&t.push([r.name,l])}}return t.sort(([r,s],[o,a])=>{if(s.end.compareWith(a.start)!=="after")return 1;if(s.start.compareWith(a.end)!=="before")return-1;switch(s.start.compareWith(a.start)){case"before":return 1;case"after":return-1;default:switch(s.end.compareWith(a.end)){case"before":return 1;case"after":return-1;default:return o.localeCompare(r)}}}),new Map(t)}class Yke{constructor(t,e){y(this,"_helpers",new Map);y(this,"_downcast");y(this,"_upcast");this._downcast=jn(t),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=jn(e),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(t,e){const i=this._downcast.includes(e);if(!this._upcast.includes(e)&&!i)throw new we("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:t,dispatchers:[e],isDowncast:i})}for(t){if(!this._helpers.has(t))throw new we("conversion-for-unknown-group",this);return this._helpers.get(t)}elementToElement(t){this.for("downcast").elementToElement(t);for(const{model:e,view:i}of Kk(t))this.for("upcast").elementToElement({model:e,view:i,converterPriority:t.converterPriority})}attributeToElement(t){this.for("downcast").attributeToElement(t);for(const{model:e,view:i}of Kk(t))this.for("upcast").elementToAttribute({view:i,model:e,converterPriority:t.converterPriority})}attributeToAttribute(t){this.for("downcast").attributeToAttribute(t);for(const{model:e,view:i}of Kk(t))this.for("upcast").attributeToAttribute({view:i,model:e})}_createConversionHelpers({name:t,dispatchers:e,isDowncast:i}){if(this._helpers.has(t))throw new we("conversion-group-exists",this);const r=i?new D1e(e):new fke(e);this._helpers.set(t,r)}}function*Kk(n){if(n.model.values)for(const t of n.model.values){const e={key:n.model.key,value:t},i=n.view[t],r=n.upcastAlso?n.upcastAlso[t]:void 0;yield*HD(e,i,r)}else yield*HD(n.model,n.view,n.upcastAlso)}function*HD(n,t,e){if(yield{model:n,view:t},e)for(const i of jn(e))yield{model:n,view:i}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class vo{constructor(t){y(this,"baseVersion");y(this,"isDocumentOperation");y(this,"batch");this.baseVersion=t,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const t=Object.assign({},this);return t.__className=this.constructor.className,delete t.batch,delete t.isDocumentOperation,t}static get className(){return"Operation"}static fromJSON(t,e){return new this(t.baseVersion)}}function nP(n,t){const e=c8(t),i=e.reduce((o,a)=>o+a.offsetSize,0),r=n.parent;Xp(n);const s=n.index;return r._insertChild(s,e),Jp(r,s+e.length),Jp(r,s),new qe(n,n.getShiftedBy(i))}function l8(n){if(!n.isFlat)throw new we("operation-utils-remove-range-not-flat",this);const t=n.start.parent;Xp(n.start),Xp(n.end);const e=t._removeChildren(n.start.index,n.end.index-n.start.index);return Jp(t,n.start.index),e}function Zp(n,t){if(!n.isFlat)throw new we("operation-utils-move-range-not-flat",this);const e=l8(n);return t=t._getTransformedByDeletion(n.start,n.end.offset-n.start.offset),nP(t,e)}function Qke(n,t,e){Xp(n.start),Xp(n.end);for(const i of n.getItems({shallow:!0})){const r=i.is("$textProxy")?i.textNode:i;e!==null?r._setAttribute(t,e):r._removeAttribute(t),Jp(r.parent,r.index)}Jp(n.end.parent,n.end.index)}function c8(n){const t=[];function e(i){if(typeof i=="string")t.push(new yi(i));else if(i instanceof da)t.push(new yi(i.data,i.getAttributes()));else if(i instanceof Xd)t.push(i);else if(po(i))for(const r of i)e(r)}e(n);for(let i=1;i<t.length;i++){const r=t[i],s=t[i-1];r instanceof yi&&s instanceof yi&&u8(r,s)&&(t.splice(i-1,2,new yi(s.data+r.data,s.getAttributes())),i--)}return t}function Jp(n,t){const e=n.getChild(t-1),i=n.getChild(t);if(e&&i&&e.is("$text")&&i.is("$text")&&u8(e,i)){const r=new yi(e.data+i.data,e.getAttributes());n._removeChildren(t-1,2),n._insertChild(t-1,r)}}function Xp(n){const t=n.textNode,e=n.parent;if(t){const i=n.offset-t.startOffset,r=t.index;e._removeChildren(r,1);const s=new yi(t.data.substr(0,i),t.getAttributes()),o=new yi(t.data.substr(i),t.getAttributes());e._insertChild(r,[s,o])}}function u8(n,t){const e=n.getAttributes(),i=t.getAttributes();for(const r of e){if(r[1]!==t.getAttribute(r[0]))return!1;i.next()}return i.next().done}class qn extends vo{constructor(e,i,r,s){super(s);y(this,"sourcePosition");y(this,"howMany");y(this,"targetPosition");this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=i,this.targetPosition=r.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[qe._createFromPositionAndShift(this.sourcePosition,this.howMany),qe._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new qn(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new qn(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,i=this.targetPosition.parent,r=this.sourcePosition.offset,s=this.targetPosition.offset;if(r+this.howMany>e.maxOffset)throw new we("move-operation-nodes-do-not-exist",this);if(e===i&&r<s&&s<r+this.howMany)throw new we("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&ts(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const o=this.sourcePosition.path.length-1;if(this.targetPosition.path[o]>=r&&this.targetPosition.path[o]<r+this.howMany)throw new we("move-operation-node-into-itself",this)}}_execute(){Zp(qe._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,i){const r=it.fromJSON(e.sourcePosition,i),s=it.fromJSON(e.targetPosition,i);return new this(r,e.howMany,s,e.baseVersion)}}class xr extends vo{constructor(e,i,r){super(r);y(this,"position");y(this,"nodes");y(this,"shouldReceiveAttributes");this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new up(c8(i)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const e=new up([...this.nodes].map(r=>r._clone(!0))),i=new xr(this.position,e,this.baseVersion);return i.shouldReceiveAttributes=this.shouldReceiveAttributes,i}getReversed(){const e=this.position.root.document.graveyard,i=new it(e,[0]);return new qn(this.position,this.nodes.maxOffset,i,this.baseVersion+1)}_validate(){const e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new we("insert-operation-position-invalid",this)}_execute(){const e=this.nodes;this.nodes=new up([...e].map(i=>i._clone(!0))),nP(this.position,e)}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,i){const r=[];for(const o of e.nodes)o.name?r.push(xi.fromJSON(o)):r.push(yi.fromJSON(o));const s=new xr(it.fromJSON(e.position,i),r,e.baseVersion);return s.shouldReceiveAttributes=e.shouldReceiveAttributes,s}}class di extends vo{constructor(e,i,r,s,o){super(o);y(this,"splitPosition");y(this,"howMany");y(this,"insertionPosition");y(this,"graveyardPosition");this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=i,this.insertionPosition=r,this.graveyardPosition=s?s.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const e=this.insertionPosition.path.slice();return e.push(0),new it(this.insertionPosition.root,e)}get movedRange(){const e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new qe(this.splitPosition,e)}get affectedSelectable(){const e=[qe._createFromPositionAndShift(this.splitPosition,0),qe._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&e.push(qe._createFromPositionAndShift(this.graveyardPosition,0)),e}clone(){return new di(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.splitPosition.root.document.graveyard,i=new it(e,[0]);return new ji(this.moveTargetPosition,this.howMany,this.splitPosition,i,this.baseVersion+1)}_validate(){const e=this.splitPosition.parent,i=this.splitPosition.offset;if(!e||e.maxOffset<i)throw new we("split-operation-position-invalid",this);if(e.parent){if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new we("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new we("split-operation-graveyard-position-invalid",this)}else throw new we("split-operation-split-in-root",this)}_execute(){const e=this.splitPosition.parent;if(this.graveyardPosition)Zp(qe._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const r=e._clone();nP(this.insertionPosition,r)}const i=new qe(it._createAt(e,this.splitPosition.offset),it._createAt(e,e.maxOffset));Zp(i,this.moveTargetPosition)}toJSON(){const e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){const i=e.path.slice(0,-1);return i[i.length-1]++,new it(e.root,i,"toPrevious")}static fromJSON(e,i){const r=it.fromJSON(e.splitPosition,i),s=it.fromJSON(e.insertionPosition,i),o=e.graveyardPosition?it.fromJSON(e.graveyardPosition,i):null;return new this(r,e.howMany,s,o,e.baseVersion)}}class ji extends vo{constructor(e,i,r,s,o){super(o);y(this,"sourcePosition");y(this,"howMany");y(this,"targetPosition");y(this,"graveyardPosition");this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=i,this.targetPosition=r.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=s.clone()}get type(){return"merge"}get deletionPosition(){return new it(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new qe(this.sourcePosition,e)}get affectedSelectable(){const e=this.sourcePosition.parent;return[qe._createOn(e),qe._createFromPositionAndShift(this.targetPosition,0),qe._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new ji(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.targetPosition._getTransformedByMergeOperation(this),i=this.sourcePosition.path.slice(0,-1),r=new it(this.sourcePosition.root,i)._getTransformedByMergeOperation(this);return new di(e,this.howMany,r,this.graveyardPosition,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,i=this.targetPosition.parent;if(e.parent)if(i.parent){if(this.howMany!=e.maxOffset)throw new we("merge-operation-how-many-invalid",this)}else throw new we("merge-operation-target-position-invalid",this);else throw new we("merge-operation-source-position-invalid",this)}_execute(){const e=this.sourcePosition.parent,i=qe._createIn(e);Zp(i,this.targetPosition),Zp(qe._createOn(e),this.graveyardPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,i){const r=it.fromJSON(e.sourcePosition,i),s=it.fromJSON(e.targetPosition,i),o=it.fromJSON(e.graveyardPosition,i);return new this(r,e.howMany,s,o,e.baseVersion)}}class Ps extends vo{constructor(e,i,r,s,o,a){super(a);y(this,"name");y(this,"oldRange");y(this,"newRange");y(this,"affectsData");y(this,"_markers");this.name=e,this.oldRange=i?i.clone():null,this.newRange=r?r.clone():null,this.affectsData=o,this._markers=s}get type(){return"marker"}get affectedSelectable(){const e=[];return this.oldRange&&e.push(this.oldRange.clone()),this.newRange&&(this.oldRange?e.push(...this.newRange.getDifference(this.oldRange)):e.push(this.newRange.clone())),e}clone(){return new Ps(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new Ps(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,i){return new Ps(e.name,e.oldRange?qe.fromJSON(e.oldRange,i):null,e.newRange?qe.fromJSON(e.newRange,i):null,i.model.markers,e.affectsData,e.baseVersion)}}class Ji extends vo{constructor(e,i,r,s,o){super(o);y(this,"range");y(this,"key");y(this,"oldValue");y(this,"newValue");this.range=e.clone(),this.key=i,this.oldValue=r===void 0?null:r,this.newValue=s===void 0?null:s}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new Ji(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Ji(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new we("attribute-operation-range-not-flat",this);for(const e of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!em(e.getAttribute(this.key),this.oldValue))throw new we("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&e.hasAttribute(this.key))throw new we("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){em(this.oldValue,this.newValue)||Qke(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,i){return new Ji(qe.fromJSON(e.range,i),e.key,e.oldValue,e.newValue,e.baseVersion)}}class br extends vo{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new br(this.baseVersion)}getReversed(){return new br(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class Gs extends vo{constructor(e,i,r,s){super(s);y(this,"position");y(this,"oldName");y(this,"newName");this.position=e,this.position.stickiness="toNext",this.oldName=i,this.newName=r}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new Gs(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new Gs(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const e=this.position.nodeAfter;if(e instanceof xi){if(e.name!==this.oldName)throw new we("rename-operation-wrong-name",this)}else throw new we("rename-operation-wrong-position",this)}_execute(){const e=this.position.nodeAfter;e.name=this.newName}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,i){return new Gs(it.fromJSON(e.position,i),e.oldName,e.newName,e.baseVersion)}}class Yl extends vo{constructor(e,i,r,s,o){super(o);y(this,"root");y(this,"key");y(this,"oldValue");y(this,"newValue");this.root=e,this.key=i,this.oldValue=r===void 0?null:r,this.newValue=s===void 0?null:s}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new Yl(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Yl(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new we("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new we("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new we("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,i){if(!i.getRoot(e.root))throw new we("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new Yl(i.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}class nl extends vo{constructor(e,i,r,s,o){super(o);y(this,"rootName");y(this,"elementName");y(this,"isAdd");y(this,"_document");if(this.rootName=e,this.elementName=i,this.isAdd=r,this._document=s,!this._document.getRoot(this.rootName)){const a=this._document.createRoot(this.elementName,this.rootName);a._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new nl(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new nl(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const e=super.toJSON();return delete e._document,e}static get className(){return"RootOperation"}static fromJSON(e,i){return new nl(e.rootName,e.elementName,e.isAdd,i,e.baseVersion)}}const Ko={};Ko[Ji.className]=Ji;Ko[xr.className]=xr;Ko[Ps.className]=Ps;Ko[qn.className]=qn;Ko[br.className]=br;Ko[vo.className]=vo;Ko[Gs.className]=Gs;Ko[Yl.className]=Yl;Ko[nl.className]=nl;Ko[di.className]=di;Ko[ji.className]=ji;class Zke{static fromJSON(t,e){return Ko[t.__className].fromJSON(t,e)}}const DT=new Map;function Vn(n,t,e){let i=DT.get(n);i||(i=new Map,DT.set(n,i)),i.set(t,e)}function Jke(n,t){const e=DT.get(n);return e&&e.has(t)?e.get(t):Xke}function Xke(n){return[n]}function WD(n,t,e={}){const i=Jke(n.constructor,t.constructor);try{return n=n.clone(),i(n,t,e)}catch(r){throw r}}function eEe(n,t,e){n=n.slice(),t=t.slice();const i=new tEe(e.document,e.useRelations,e.forceWeakRemove);i.setOriginalOperations(n),i.setOriginalOperations(t);const r=i.originalOperations;if(n.length==0||t.length==0)return{operationsA:n,operationsB:t,originalOperations:r};const s=new WeakMap;for(const l of n)s.set(l,0);const o={nextBaseVersionA:n[n.length-1].baseVersion+1,nextBaseVersionB:t[t.length-1].baseVersion+1,originalOperationsACount:n.length,originalOperationsBCount:t.length};let a=0;for(;a<n.length;){const l=n[a],c=s.get(l);if(c==t.length){a++;continue}const u=t[c],d=WD(l,u,i.getContext(l,u,!0)),f=WD(u,l,i.getContext(u,l,!1));i.updateRelation(l,u),i.setOriginalOperations(d,l),i.setOriginalOperations(f,u);for(const h of d)s.set(h,c+f.length);n.splice(a,1,...d),t.splice(c,1,...f)}return qD(n),qD(t),jD(n,o.nextBaseVersionB),jD(t,o.nextBaseVersionA),{operationsA:n,operationsB:t,originalOperations:r}}class tEe{constructor(t,e,i=!1){y(this,"originalOperations");y(this,"_history");y(this,"_useRelations");y(this,"_forceWeakRemove");y(this,"_relations");this.originalOperations=new Map,this._history=t.history,this._useRelations=e,this._forceWeakRemove=!!i,this._relations=new Map}setOriginalOperations(t,e=null){const i=e?this.originalOperations.get(e):null;for(const r of t)this.originalOperations.set(r,i||r)}updateRelation(t,e){if(t instanceof qn)e instanceof ji?t.targetPosition.isEqual(e.sourcePosition)||e.movedRange.containsPosition(t.targetPosition)?this._setRelation(t,e,"insertAtSource"):t.targetPosition.isEqual(e.deletionPosition)?this._setRelation(t,e,"insertBetween"):t.targetPosition.isAfter(e.sourcePosition)&&this._setRelation(t,e,"moveTargetAfter"):e instanceof qn&&(t.targetPosition.isEqual(e.sourcePosition)||t.targetPosition.isBefore(e.sourcePosition)?this._setRelation(t,e,"insertBefore"):this._setRelation(t,e,"insertAfter"));else if(t instanceof di){if(e instanceof ji)t.splitPosition.isBefore(e.sourcePosition)&&this._setRelation(t,e,"splitBefore");else if(e instanceof qn)if(t.splitPosition.isEqual(e.sourcePosition)||t.splitPosition.isBefore(e.sourcePosition))this._setRelation(t,e,"splitBefore");else{const i=qe._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.splitPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(t.splitPosition)){const r=i.end.offset-t.splitPosition.offset,s=t.splitPosition.offset-i.start.offset;this._setRelation(t,e,{howMany:r,offset:s})}}}else if(t instanceof ji)e instanceof ji?(t.targetPosition.isEqual(e.sourcePosition)||this._setRelation(t,e,"mergeTargetNotMoved"),t.sourcePosition.isEqual(e.targetPosition)&&this._setRelation(t,e,"mergeSourceNotMoved"),t.sourcePosition.isEqual(e.sourcePosition)&&this._setRelation(t,e,"mergeSameElement")):e instanceof di?t.sourcePosition.isEqual(e.splitPosition)&&this._setRelation(t,e,"splitAtSource"):e instanceof qn&&e.howMany>0&&(t.sourcePosition.isEqual(e.sourcePosition.getShiftedBy(e.howMany))&&this._setRelation(t,e,"mergeSourceAffected"),t.targetPosition.isEqual(e.sourcePosition)&&this._setRelation(t,e,"mergeTargetWasBefore"));else if(t instanceof Ps){const i=t.newRange;if(!i)return;if(e instanceof ji){const r=i.start.isEqual(e.targetPosition),s=i.start.isEqual(e.deletionPosition),o=i.end.isEqual(e.deletionPosition),a=i.end.isEqual(e.sourcePosition);(r||s||o||a)&&this._setRelation(t,e,{wasInLeftElement:r,wasStartBeforeMergedElement:s,wasEndBeforeMergedElement:o,wasInRightElement:a})}}}getContext(t,e,i){return{aIsStrong:i,aWasUndone:this._wasUndone(t),bWasUndone:this._wasUndone(e),abRelation:this._useRelations?this._getRelation(t,e):null,baRelation:this._useRelations?this._getRelation(e,t):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(t){const e=this.originalOperations.get(t);return e.wasUndone||this._history.isUndoneOperation(e)}_getRelation(t,e){const i=this.originalOperations.get(e),r=this._history.getUndoneOperation(i);if(!r)return null;const s=this.originalOperations.get(t),o=this._relations.get(s);return o&&o.get(r)||null}_setRelation(t,e,i){const r=this.originalOperations.get(t),s=this.originalOperations.get(e);let o=this._relations.get(r);o||(o=new Map,this._relations.set(r,o)),o.set(s,i)}}function jD(n,t){for(const e of n)e.baseVersion=t++}function qD(n){const t=new Map;for(let e=0;e<n.length;e++){const i=n[e];i instanceof Ps&&(i.baseVersion!==-1?t.set(i.name,{op:i,ranges:i.newRange?[i.newRange]:[]}):(i.newRange&&t.get(i.name).ranges.push(i.newRange),n.splice(e,1),e--))}for(const{op:e,ranges:i}of t.values())i.length?e.newRange=qe._createFromRanges(i):e.newRange=null}Vn(Ji,Ji,(n,t,e)=>{if(n.key===t.key&&n.range.start.hasSameParentAs(t.range.start)){const i=n.range.getDifference(t.range).map(s=>new Ji(s,n.key,n.oldValue,n.newValue,0)),r=n.range.getIntersection(t.range);return r&&e.aIsStrong&&i.push(new Ji(r,t.key,t.newValue,n.newValue,0)),i.length==0?[new br(0)]:i}else return[n]});Vn(Ji,xr,(n,t)=>{if(n.range.start.hasSameParentAs(t.position)&&n.range.containsPosition(t.position)){const i=n.range._getTransformedByInsertion(t.position,t.howMany,!t.shouldReceiveAttributes).map(r=>new Ji(r,n.key,n.oldValue,n.newValue,n.baseVersion));if(t.shouldReceiveAttributes){const r=d8(t,n.key,n.oldValue);r&&i.unshift(r)}return i}return n.range=n.range._getTransformedByInsertion(t.position,t.howMany,!1)[0],[n]});function d8(n,t,e){const r=n.nodes.getNode(0).getAttribute(t);if(r==e)return null;const s=new qe(n.position,n.position.getShiftedBy(n.howMany));return new Ji(s,t,r,e,0)}Vn(Ji,ji,(n,t)=>{const e=[];n.range.start.hasSameParentAs(t.deletionPosition)&&(n.range.containsPosition(t.deletionPosition)||n.range.start.isEqual(t.deletionPosition))&&e.push(qe._createFromPositionAndShift(t.graveyardPosition,1));const i=n.range._getTransformedByMergeOperation(t);return i.isCollapsed||e.push(i),e.map(r=>new Ji(r,n.key,n.oldValue,n.newValue,n.baseVersion))});Vn(Ji,qn,(n,t)=>nEe(n.range,t).map(i=>new Ji(i,n.key,n.oldValue,n.newValue,n.baseVersion)));function nEe(n,t){const e=qe._createFromPositionAndShift(t.sourcePosition,t.howMany);let i=null,r=[];e.containsRange(n,!0)?i=n:n.start.hasSameParentAs(e.start)?(r=n.getDifference(e),i=n.getIntersection(e)):r=[n];const s=[];for(let o of r){o=o._getTransformedByDeletion(t.sourcePosition,t.howMany);const a=t.getMovedRangeStart(),l=o.start.hasSameParentAs(a),c=o._getTransformedByInsertion(a,t.howMany,l);s.push(...c)}return i&&s.push(i._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,!1)[0]),s}Vn(Ji,di,(n,t)=>{if(n.range.end.isEqual(t.insertionPosition))return t.graveyardPosition||n.range.end.offset++,[n];if(n.range.start.hasSameParentAs(t.splitPosition)&&n.range.containsPosition(t.splitPosition)){const e=n.clone();return e.range=new qe(t.moveTargetPosition.clone(),n.range.end._getCombined(t.splitPosition,t.moveTargetPosition)),n.range.end=t.splitPosition.clone(),n.range.end.stickiness="toPrevious",[n,e]}return n.range=n.range._getTransformedBySplitOperation(t),[n]});Vn(xr,Ji,(n,t)=>{const e=[n];if(n.shouldReceiveAttributes&&n.position.hasSameParentAs(t.range.start)&&t.range.containsPosition(n.position)){const i=d8(n,t.key,t.newValue);i&&e.push(i)}return e});Vn(xr,xr,(n,t,e)=>n.position.isEqual(t.position)&&e.aIsStrong?[n]:(n.position=n.position._getTransformedByInsertOperation(t),[n]));Vn(xr,qn,(n,t)=>(n.position=n.position._getTransformedByMoveOperation(t),[n]));Vn(xr,di,(n,t)=>(n.position=n.position._getTransformedBySplitOperation(t),[n]));Vn(xr,ji,(n,t)=>(n.position=n.position._getTransformedByMergeOperation(t),[n]));Vn(Ps,xr,(n,t)=>(n.oldRange&&(n.oldRange=n.oldRange._getTransformedByInsertOperation(t)[0]),n.newRange&&(n.newRange=n.newRange._getTransformedByInsertOperation(t)[0]),[n]));Vn(Ps,Ps,(n,t,e)=>{if(n.name==t.name)if(e.aIsStrong)n.oldRange=t.newRange?t.newRange.clone():null;else return[new br(0)];return[n]});Vn(Ps,ji,(n,t)=>(n.oldRange&&(n.oldRange=n.oldRange._getTransformedByMergeOperation(t)),n.newRange&&(n.newRange=n.newRange._getTransformedByMergeOperation(t)),[n]));Vn(Ps,qn,(n,t)=>{const e=[n];if(n.oldRange&&(n.oldRange=qe._createFromRanges(n.oldRange._getTransformedByMoveOperation(t))),n.newRange){const i=n.newRange._getTransformedByMoveOperation(t);n.newRange=i[0];for(let r=1;r<i.length;r++){const s=n.clone();s.oldRange=null,s.newRange=i[r],s.baseVersion=-1,e.push(s)}}return e});Vn(Ps,di,(n,t,e)=>{if(n.oldRange&&(n.oldRange=n.oldRange._getTransformedBySplitOperation(t)),n.newRange){if(e.abRelation){const i=n.newRange._getTransformedBySplitOperation(t);return n.newRange.start.isEqual(t.splitPosition)?e.abRelation.wasStartBeforeMergedElement?n.newRange.start=it._createAt(t.insertionPosition):e.abRelation.wasInLeftElement?n.newRange.start=it._createAt(n.newRange.start):n.newRange.start=it._createAt(t.moveTargetPosition):n.newRange.start=i.start,n.newRange.end.isEqual(t.splitPosition)?n.newRange.end.isEqual(t.splitPosition)&&e.abRelation.wasEndBeforeMergedElement?n.newRange.end=it._createAt(t.insertionPosition):e.abRelation.wasInRightElement?n.newRange.end=it._createAt(t.moveTargetPosition):n.newRange.end=it._createAt(n.newRange.end):n.newRange.end=i.end,[n]}n.newRange=n.newRange._getTransformedBySplitOperation(t)}return[n]});Vn(ji,xr,(n,t)=>(n.sourcePosition.hasSameParentAs(t.position)&&(n.howMany+=t.howMany),n.sourcePosition=n.sourcePosition._getTransformedByInsertOperation(t),n.targetPosition=n.targetPosition._getTransformedByInsertOperation(t),[n]));Vn(ji,ji,(n,t,e)=>{if(n.sourcePosition.isEqual(t.sourcePosition)&&n.targetPosition.isEqual(t.targetPosition))if(e.bWasUndone){const i=t.graveyardPosition.path.slice();return i.push(0),n.sourcePosition=new it(t.graveyardPosition.root,i),n.howMany=0,[n]}else return[new br(0)];if(n.sourcePosition.isEqual(t.sourcePosition)&&!n.targetPosition.isEqual(t.targetPosition)&&!e.bWasUndone&&e.abRelation!="splitAtSource"){const i=n.targetPosition.root.rootName=="$graveyard",r=t.targetPosition.root.rootName=="$graveyard";if(r&&!i||!(i&&!r)&&e.aIsStrong){const l=t.targetPosition._getTransformedByMergeOperation(t),c=n.targetPosition._getTransformedByMergeOperation(t);return[new qn(l,n.howMany,c,0)]}else return[new br(0)]}return n.sourcePosition.hasSameParentAs(t.targetPosition)&&(n.howMany+=t.howMany),n.sourcePosition=n.sourcePosition._getTransformedByMergeOperation(t),n.targetPosition=n.targetPosition._getTransformedByMergeOperation(t),(!n.graveyardPosition.isEqual(t.graveyardPosition)||!e.aIsStrong)&&(n.graveyardPosition=n.graveyardPosition._getTransformedByMergeOperation(t)),[n]});Vn(ji,qn,(n,t,e)=>{const i=qe._createFromPositionAndShift(t.sourcePosition,t.howMany);return t.type=="remove"&&!e.bWasUndone&&n.deletionPosition.hasSameParentAs(t.sourcePosition)&&i.containsPosition(n.sourcePosition)?[new br(0)]:(t.sourcePosition.getShiftedBy(t.howMany).isEqual(n.sourcePosition)?n.sourcePosition.stickiness="toNone":t.targetPosition.isEqual(n.sourcePosition)&&e.abRelation=="mergeSourceAffected"?n.sourcePosition.stickiness="toNext":t.sourcePosition.isEqual(n.targetPosition)?(n.targetPosition.stickiness="toNone",n.howMany-=t.howMany):t.targetPosition.isEqual(n.targetPosition)&&e.abRelation=="mergeTargetWasBefore"?(n.targetPosition.stickiness="toPrevious",n.howMany+=t.howMany):(n.sourcePosition.hasSameParentAs(t.targetPosition)&&(n.howMany+=t.howMany),n.sourcePosition.hasSameParentAs(t.sourcePosition)&&(n.howMany-=t.howMany)),n.sourcePosition=n.sourcePosition._getTransformedByMoveOperation(t),n.targetPosition=n.targetPosition._getTransformedByMoveOperation(t),n.sourcePosition.stickiness="toPrevious",n.targetPosition.stickiness="toNext",n.graveyardPosition.isEqual(t.targetPosition)||(n.graveyardPosition=n.graveyardPosition._getTransformedByMoveOperation(t)),[n])});Vn(ji,di,(n,t,e)=>{if(t.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedByDeletion(t.graveyardPosition,1),n.deletionPosition.isEqual(t.graveyardPosition)&&(n.howMany=t.howMany)),n.targetPosition.isEqual(t.splitPosition)&&(t.graveyardPosition&&n.deletionPosition.isEqual(t.graveyardPosition)||e.abRelation=="mergeTargetNotMoved"))return n.sourcePosition=n.sourcePosition._getTransformedBySplitOperation(t),[n];if(n.sourcePosition.isEqual(t.splitPosition)){if(e.abRelation=="mergeSourceNotMoved")return n.howMany=0,n.targetPosition=n.targetPosition._getTransformedBySplitOperation(t),[n];if(e.abRelation=="mergeSameElement"||n.sourcePosition.offset>0)return n.sourcePosition=t.moveTargetPosition.clone(),n.targetPosition=n.targetPosition._getTransformedBySplitOperation(t),[n]}return n.sourcePosition.hasSameParentAs(t.splitPosition)&&(n.howMany=t.splitPosition.offset),n.sourcePosition=n.sourcePosition._getTransformedBySplitOperation(t),n.targetPosition=n.targetPosition._getTransformedBySplitOperation(t),[n]});Vn(qn,xr,(n,t)=>{const i=qe._createFromPositionAndShift(n.sourcePosition,n.howMany)._getTransformedByInsertOperation(t,!1)[0];return n.sourcePosition=i.start,n.howMany=i.end.offset-i.start.offset,n.targetPosition.isEqual(t.position)||(n.targetPosition=n.targetPosition._getTransformedByInsertOperation(t)),[n]});Vn(qn,qn,(n,t,e)=>{const i=qe._createFromPositionAndShift(n.sourcePosition,n.howMany),r=qe._createFromPositionAndShift(t.sourcePosition,t.howMany);let s=e.aIsStrong,o=!e.aIsStrong;e.abRelation=="insertBefore"||e.baRelation=="insertAfter"?o=!0:(e.abRelation=="insertAfter"||e.baRelation=="insertBefore")&&(o=!1);let a;if(n.targetPosition.isEqual(t.targetPosition)&&o?a=n.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany):a=n.targetPosition._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),GD(n,t)&&GD(t,n))return[t.getReversed()];if(i.containsPosition(t.targetPosition)&&i.containsRange(r,!0))return i.start=i.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),i.end=i.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),uh([i],a);if(r.containsPosition(n.targetPosition)&&r.containsRange(i,!0))return i.start=i.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),i.end=i.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),uh([i],a);const u=ts(n.sourcePosition.getParentPath(),t.sourcePosition.getParentPath());if(u=="prefix"||u=="extension")return i.start=i.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),i.end=i.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),uh([i],a);n.type=="remove"&&t.type!="remove"&&!e.aWasUndone&&!e.forceWeakRemove?s=!0:n.type!="remove"&&t.type=="remove"&&!e.bWasUndone&&!e.forceWeakRemove&&(s=!1);const d=[],f=i.getDifference(r);for(const g of f){g.start=g.start._getTransformedByDeletion(t.sourcePosition,t.howMany),g.end=g.end._getTransformedByDeletion(t.sourcePosition,t.howMany);const v=ts(g.start.getParentPath(),t.getMovedRangeStart().getParentPath())=="same",_=g._getTransformedByInsertion(t.getMovedRangeStart(),t.howMany,v);d.push(..._)}const h=i.getIntersection(r);return h!==null&&s&&(h.start=h.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),h.end=h.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),d.length===0?d.push(h):d.length==1?r.start.isBefore(i.start)||r.start.isEqual(i.start)?d.unshift(h):d.push(h):d.splice(1,0,h)),d.length===0?[new br(n.baseVersion)]:uh(d,a)});Vn(qn,di,(n,t,e)=>{let i=n.targetPosition.clone();(!n.targetPosition.isEqual(t.insertionPosition)||!t.graveyardPosition||e.abRelation=="moveTargetAfter")&&(i=n.targetPosition._getTransformedBySplitOperation(t));const r=qe._createFromPositionAndShift(n.sourcePosition,n.howMany);if(r.end.isEqual(t.insertionPosition))return t.graveyardPosition||n.howMany++,n.targetPosition=i,[n];if(r.start.hasSameParentAs(t.splitPosition)&&r.containsPosition(t.splitPosition)){let a=new qe(t.splitPosition,r.end);a=a._getTransformedBySplitOperation(t);const l=[new qe(r.start,t.splitPosition),a];return uh(l,i)}n.targetPosition.isEqual(t.splitPosition)&&e.abRelation=="insertAtSource"&&(i=t.moveTargetPosition),n.targetPosition.isEqual(t.insertionPosition)&&e.abRelation=="insertBetween"&&(i=n.targetPosition);const o=[r._getTransformedBySplitOperation(t)];if(t.graveyardPosition){const a=r.start.isEqual(t.graveyardPosition)||r.containsPosition(t.graveyardPosition);n.howMany>1&&a&&!e.aWasUndone&&o.push(qe._createFromPositionAndShift(t.insertionPosition,1))}return uh(o,i)});Vn(qn,ji,(n,t,e)=>{const i=qe._createFromPositionAndShift(n.sourcePosition,n.howMany);if(t.deletionPosition.hasSameParentAs(n.sourcePosition)&&i.containsPosition(t.sourcePosition)){if(n.type=="remove"&&!e.forceWeakRemove){if(!e.aWasUndone){const o=[];let a=t.graveyardPosition.clone(),l=t.targetPosition._getTransformedByMergeOperation(t);const c=n.targetPosition.getTransformedByOperation(t);n.howMany>1&&(o.push(new qn(n.sourcePosition,n.howMany-1,c,0)),a=a._getTransformedByMove(n.sourcePosition,c,n.howMany-1),l=l._getTransformedByMove(n.sourcePosition,c,n.howMany-1));const u=t.deletionPosition._getCombined(n.sourcePosition,c),d=new qn(a,1,u,0),f=d.getMovedRangeStart().path.slice();f.push(0);const h=new it(d.targetPosition.root,f);l=l._getTransformedByMove(a,u,1);const g=new qn(l,t.howMany,h,0);return o.push(d),o.push(g),o}}else if(n.howMany==1)return e.bWasUndone?(n.sourcePosition=t.graveyardPosition.clone(),n.targetPosition=n.targetPosition._getTransformedByMergeOperation(t),[n]):[new br(0)]}const s=qe._createFromPositionAndShift(n.sourcePosition,n.howMany)._getTransformedByMergeOperation(t);return n.sourcePosition=s.start,n.howMany=s.end.offset-s.start.offset,n.targetPosition=n.targetPosition._getTransformedByMergeOperation(t),[n]});Vn(Gs,xr,(n,t)=>(n.position=n.position._getTransformedByInsertOperation(t),[n]));Vn(Gs,ji,(n,t)=>n.position.isEqual(t.deletionPosition)?(n.position=t.graveyardPosition.clone(),n.position.stickiness="toNext",[n]):(n.position=n.position._getTransformedByMergeOperation(t),[n]));Vn(Gs,qn,(n,t)=>(n.position=n.position._getTransformedByMoveOperation(t),[n]));Vn(Gs,Gs,(n,t,e)=>{if(n.position.isEqual(t.position))if(e.aIsStrong)n.oldName=t.newName;else return[new br(0)];return[n]});Vn(Gs,di,(n,t)=>{const e=n.position.path,i=t.splitPosition.getParentPath();if(ts(e,i)=="same"&&!t.graveyardPosition){const r=new Gs(n.position.getShiftedBy(1),n.oldName,n.newName,0);return[n,r]}return n.position=n.position._getTransformedBySplitOperation(t),[n]});Vn(Yl,Yl,(n,t,e)=>{if(n.root===t.root&&n.key===t.key){if(!e.aIsStrong||n.newValue===t.newValue)return[new br(0)];n.oldValue=t.newValue}return[n]});Vn(nl,nl,(n,t)=>n.rootName===t.rootName&&n.isAdd===t.isAdd?[new br(0)]:[n]);Vn(di,xr,(n,t)=>(n.splitPosition.hasSameParentAs(t.position)&&n.splitPosition.offset<t.position.offset&&(n.howMany+=t.howMany),n.splitPosition=n.splitPosition._getTransformedByInsertOperation(t),n.insertionPosition=n.insertionPosition._getTransformedByInsertOperation(t),[n]));Vn(di,ji,(n,t,e)=>{if(!n.graveyardPosition&&!e.bWasUndone&&n.splitPosition.hasSameParentAs(t.sourcePosition)){const i=t.graveyardPosition.path.slice();i.push(0);const r=new it(t.graveyardPosition.root,i),s=di.getInsertionPosition(new it(t.graveyardPosition.root,i)),o=new di(r,0,s,null,0);return n.splitPosition=n.splitPosition._getTransformedByMergeOperation(t),n.insertionPosition=di.getInsertionPosition(n.splitPosition),n.graveyardPosition=o.insertionPosition.clone(),n.graveyardPosition.stickiness="toNext",[o,n]}return n.splitPosition.hasSameParentAs(t.deletionPosition)&&!n.splitPosition.isAfter(t.deletionPosition)&&n.howMany--,n.splitPosition.hasSameParentAs(t.targetPosition)&&(n.howMany+=t.howMany),n.splitPosition=n.splitPosition._getTransformedByMergeOperation(t),n.insertionPosition=di.getInsertionPosition(n.splitPosition),n.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedByMergeOperation(t)),[n]});Vn(di,qn,(n,t,e)=>{const i=qe._createFromPositionAndShift(t.sourcePosition,t.howMany);if(n.graveyardPosition){const s=i.start.isEqual(n.graveyardPosition)||i.containsPosition(n.graveyardPosition);if(!e.bWasUndone&&s){const o=n.splitPosition._getTransformedByMoveOperation(t),a=n.graveyardPosition._getTransformedByMoveOperation(t),l=a.path.slice();l.push(0);const c=new it(a.root,l);return[new qn(o,n.howMany,c,0)]}n.graveyardPosition=n.graveyardPosition._getTransformedByMoveOperation(t)}const r=n.splitPosition.isEqual(t.targetPosition);if(r&&(e.baRelation=="insertAtSource"||e.abRelation=="splitBefore"))return n.howMany+=t.howMany,n.splitPosition=n.splitPosition._getTransformedByDeletion(t.sourcePosition,t.howMany),n.insertionPosition=di.getInsertionPosition(n.splitPosition),[n];if(r&&e.abRelation&&e.abRelation.howMany){const{howMany:s,offset:o}=e.abRelation;return n.howMany+=s,n.splitPosition=n.splitPosition.getShiftedBy(o),[n]}if(n.splitPosition.hasSameParentAs(t.sourcePosition)&&i.containsPosition(n.splitPosition)){const s=t.howMany-(n.splitPosition.offset-t.sourcePosition.offset);return n.howMany-=s,n.splitPosition.hasSameParentAs(t.targetPosition)&&n.splitPosition.offset<t.targetPosition.offset&&(n.howMany+=t.howMany),n.splitPosition=t.sourcePosition.clone(),n.insertionPosition=di.getInsertionPosition(n.splitPosition),[n]}return t.sourcePosition.isEqual(t.targetPosition)||(n.splitPosition.hasSameParentAs(t.sourcePosition)&&n.splitPosition.offset<=t.sourcePosition.offset&&(n.howMany-=t.howMany),n.splitPosition.hasSameParentAs(t.targetPosition)&&n.splitPosition.offset<t.targetPosition.offset&&(n.howMany+=t.howMany)),n.splitPosition.stickiness="toNone",n.splitPosition=n.splitPosition._getTransformedByMoveOperation(t),n.splitPosition.stickiness="toNext",n.graveyardPosition?n.insertionPosition=n.insertionPosition._getTransformedByMoveOperation(t):n.insertionPosition=di.getInsertionPosition(n.splitPosition),[n]});Vn(di,di,(n,t,e)=>{if(n.splitPosition.isEqual(t.splitPosition)){if(!n.graveyardPosition&&!t.graveyardPosition)return[new br(0)];if(n.graveyardPosition&&t.graveyardPosition&&n.graveyardPosition.isEqual(t.graveyardPosition))return[new br(0)];if(e.abRelation=="splitBefore")return n.howMany=0,n.graveyardPosition=n.graveyardPosition._getTransformedBySplitOperation(t),[n]}if(n.graveyardPosition&&t.graveyardPosition&&n.graveyardPosition.isEqual(t.graveyardPosition)){const i=n.splitPosition.root.rootName=="$graveyard",r=t.splitPosition.root.rootName=="$graveyard";if(r&&!i||!(i&&!r)&&e.aIsStrong){const l=[];return t.howMany&&l.push(new qn(t.moveTargetPosition,t.howMany,t.splitPosition,0)),n.howMany&&l.push(new qn(n.splitPosition,n.howMany,n.moveTargetPosition,0)),l}else return[new br(0)]}if(n.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedBySplitOperation(t)),n.splitPosition.isEqual(t.insertionPosition)&&e.abRelation=="splitBefore")return n.howMany++,[n];if(t.splitPosition.isEqual(n.insertionPosition)&&e.baRelation=="splitBefore"){const i=t.insertionPosition.path.slice();i.push(0);const r=new it(t.insertionPosition.root,i),s=new qn(n.insertionPosition,1,r,0);return[n,s]}return n.splitPosition.hasSameParentAs(t.splitPosition)&&n.splitPosition.offset<t.splitPosition.offset&&(n.howMany-=t.howMany),n.splitPosition=n.splitPosition._getTransformedBySplitOperation(t),n.insertionPosition=di.getInsertionPosition(n.splitPosition),[n]});function GD(n,t){return n.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany)===null}function uh(n,t){const e=[];for(let i=0;i<n.length;i++){const r=n[i],s=new qn(r.start,r.end.offset-r.start.offset,t,0);e.push(s);for(let o=i+1;o<n.length;o++)n[o]=n[o]._getTransformedByMove(s.sourcePosition,s.targetPosition,s.howMany)[0];t=t._getTransformedByMove(s.sourcePosition,s.targetPosition,s.howMany)}return e}class Ii extends ri(it){constructor(t,e,i="toNone"){if(super(t,e,i),!this.root.is("rootElement"))throw new we("model-liveposition-root-not-rootelement",t);iEe.call(this)}detach(){this.stopListening()}toPosition(){return new it(this.root,this.path.slice(),this.stickiness)}static fromPosition(t,e){return new this(t.root,t.path.slice(),e||t.stickiness)}}Ii.prototype.is=function(n){return n==="livePosition"||n==="model:livePosition"||n=="position"||n==="model:position"};function iEe(){this.listenTo(this.root.document.model,"applyOperation",(n,t)=>{const e=t[0];e.isDocumentOperation&&rEe.call(this,e)},{priority:"low"})}function rEe(n){const t=this.getTransformedByOperation(n);if(!this.isEqual(t)){const e=this.toPosition();this.path=t.path,this.root=t.root,this.fire("change",e)}}class _f{constructor(t={}){y(this,"operations");y(this,"isUndoable");y(this,"isLocal");y(this,"isUndo");y(this,"isTyping");typeof t=="string"&&(t=t==="transparent"?{isUndoable:!1}:{},mn("batch-constructor-deprecated-string-type"));const{isUndoable:e=!0,isLocal:i=!0,isUndo:r=!1,isTyping:s=!1}=t;this.operations=[],this.isUndoable=e,this.isLocal=i,this.isUndo=r,this.isTyping=s}get type(){return mn("batch-type-deprecated"),"default"}get baseVersion(){for(const t of this.operations)if(t.baseVersion!==null)return t.baseVersion;return null}addOperation(t){return t.isDocumentOperation&&(t.batch=this,this.operations.push(t)),t}}const yp=class yp{constructor(t){y(this,"_markerCollection");y(this,"_changesInElement",new Map);y(this,"_elementsSnapshots",new Map);y(this,"_elementChildrenSnapshots",new Map);y(this,"_elementState",new Map);y(this,"_changedMarkers",new Map);y(this,"_changedRoots",new Map);y(this,"_changeCount",0);y(this,"_cachedChanges",null);y(this,"_cachedChangesWithGraveyard",null);y(this,"_refreshedItems",new Set);this._markerCollection=t}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0&&this._changedRoots.size==0}bufferOperation(t){const e=t;switch(e.type){case"insert":{if(this._isInInsertedElement(e.position.parent))return;this._markInsert(e.position.parent,e.position.offset,e.nodes.maxOffset);break}case"addAttribute":case"removeAttribute":case"changeAttribute":{for(const i of e.range.getItems({shallow:!0}))this._isInInsertedElement(i.parent)||this._markAttribute(i);break}case"remove":case"move":case"reinsert":{if(e.sourcePosition.isEqual(e.targetPosition)||e.sourcePosition.getShiftedBy(e.howMany).isEqual(e.targetPosition))return;const i=this._isInInsertedElement(e.sourcePosition.parent),r=this._isInInsertedElement(e.targetPosition.parent);i||this._markRemove(e.sourcePosition.parent,e.sourcePosition.offset,e.howMany),r||this._markInsert(e.targetPosition.parent,e.getMovedRangeStart().offset,e.howMany);const s=qe._createFromPositionAndShift(e.sourcePosition,e.howMany);for(const o of s.getItems({shallow:!0}))this._setElementState(o,"move");break}case"rename":{if(this._isInInsertedElement(e.position.parent))return;this._markRemove(e.position.parent,e.position.offset,1),this._markInsert(e.position.parent,e.position.offset,1);const i=qe._createFromPositionAndShift(e.position,1);for(const r of this._markerCollection.getMarkersIntersectingRange(i)){const s=r.getData();this.bufferMarkerChange(r.name,s,s)}this._setElementState(e.position.nodeAfter,"rename");break}case"split":{const i=e.splitPosition.parent;if(!this._isInInsertedElement(i)){this._markRemove(i,e.splitPosition.offset,e.howMany);const r=qe._createFromPositionAndShift(e.splitPosition,e.howMany);for(const s of r.getItems({shallow:!0}))this._setElementState(s,"move")}this._isInInsertedElement(e.insertionPosition.parent)||this._markInsert(e.insertionPosition.parent,e.insertionPosition.offset,1),e.graveyardPosition&&(this._markRemove(e.graveyardPosition.parent,e.graveyardPosition.offset,1),this._setElementState(e.graveyardPosition.nodeAfter,"move"));break}case"merge":{const i=e.sourcePosition.parent;this._isInInsertedElement(i.parent)||this._markRemove(i.parent,i.startOffset,1);const r=e.graveyardPosition.parent;this._markInsert(r,e.graveyardPosition.offset,1),this._setElementState(i,"move");const s=e.targetPosition.parent;if(!this._isInInsertedElement(s)){this._markInsert(s,e.targetPosition.offset,i.maxOffset);const o=qe._createFromPositionAndShift(e.sourcePosition,e.howMany);for(const a of o.getItems({shallow:!0}))this._setElementState(a,"move")}break}case"detachRoot":case"addRoot":{const i=e.affectedSelectable;if(!i._isLoaded||i.isAttached()==e.isAdd)return;this._bufferRootStateChange(e.rootName,e.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!e.root._isLoaded)return;const i=e.root.rootName;this._bufferRootAttributeChange(i,e.key,e.oldValue,e.newValue);break}}this._cachedChanges=null}bufferMarkerChange(t,e,i){e.range&&e.range.root.is("rootElement")&&!e.range.root._isLoaded&&(e.range=null),i.range&&i.range.root.is("rootElement")&&!i.range.root._isLoaded&&(i.range=null);let r=this._changedMarkers.get(t);r?r.newMarkerData=i:(r={newMarkerData:i,oldMarkerData:e},this._changedMarkers.set(t,r)),r.oldMarkerData.range==null&&i.range==null&&this._changedMarkers.delete(t)}getMarkersToRemove(){const t=[];for(const[e,i]of this._changedMarkers)i.oldMarkerData.range!=null&&t.push({name:e,range:i.oldMarkerData.range});return t}getMarkersToAdd(){const t=[];for(const[e,i]of this._changedMarkers)i.newMarkerData.range!=null&&t.push({name:e,range:i.newMarkerData.range});return t}getChangedMarkers(){return Array.from(this._changedMarkers).map(([t,e])=>({name:t,data:{oldRange:e.oldMarkerData.range,newRange:e.newMarkerData.range}}))}hasDataChanges(){if(this.getChanges().length||this._changedRoots.size>0)return!0;for(const{newMarkerData:t,oldMarkerData:e}of this._changedMarkers.values()){if(t.affectsData!==e.affectsData)return!0;if(t.affectsData){const i=t.range&&!e.range,r=!t.range&&e.range,s=t.range&&e.range&&!t.range.isEqual(e.range);if(i||r||s)return!0}}return!1}getChanges(t={}){if(this._cachedChanges)return t.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let e=[];for(const i of this._changesInElement.keys()){const r=this._changesInElement.get(i).sort((u,d)=>u.offset===d.offset?u.type!=d.type?u.type=="remove"?-1:1:0:u.offset<d.offset?-1:1),s=this._elementChildrenSnapshots.get(i),o=YD(i.getChildren()),a=sEe(s.length,r);let l=0,c=0;for(const u of a)if(u==="i"){const d=this._getDiffActionForNode(o[l].node,"insert"),f=this._elementsSnapshots.get(o[l].node),h=this._getInsertDiff(i,l,d,o[l],f);e.push(h),l++}else if(u==="r"){const d=this._getDiffActionForNode(s[c].node,"remove"),f=this._getRemoveDiff(i,l,d,s[c]);e.push(f),c++}else if(u==="a"){const d=s[c].attributes,f=o[l].attributes;let h;if(o[l].name=="$text")h=new qe(it._createAt(i,l),it._createAt(i,l+1));else{const v=i.offsetToIndex(l);h=new qe(it._createAt(i,l),it._createAt(i.getChild(v),0))}const g=this._getAttributesDiff(h,d,f);e.push(...g),l++,c++}else l++,c++}e.sort((i,r)=>i.position.root!=r.position.root?i.position.root.rootName<r.position.root.rootName?-1:1:i.position.isEqual(r.position)?i.changeCount-r.changeCount:i.position.isBefore(r.position)?-1:1);for(let i=1,r=0;i<e.length;i++){const s=e[r],o=e[i],a=s.type=="remove"&&o.type=="remove"&&s.name=="$text"&&o.name=="$text"&&s.position.isEqual(o.position),l=s.type=="insert"&&o.type=="insert"&&s.name=="$text"&&o.name=="$text"&&s.position.parent==o.position.parent&&s.position.offset+s.length==o.position.offset,c=s.type=="attribute"&&o.type=="attribute"&&s.position.parent==o.position.parent&&s.range.isFlat&&o.range.isFlat&&s.position.offset+s.length==o.position.offset&&s.attributeKey==o.attributeKey&&s.attributeOldValue==o.attributeOldValue&&s.attributeNewValue==o.attributeNewValue;a||l||c?(s.length++,c&&(s.range.end=s.range.end.getShiftedBy(1)),e[i]=null):r=i}e=e.filter(i=>i);for(const i of e)delete i.changeCount,i.type=="attribute"&&(delete i.position,delete i.length);return this._changeCount=0,this._cachedChangesWithGraveyard=e,this._cachedChanges=e.filter(oEe),t.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(t=>{const e={...t};return e.state!==void 0&&delete e.attributes,e})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementChildrenSnapshots.clear(),this._elementsSnapshots.clear(),this._elementState.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems.clear(),this._cachedChanges=null}_refreshItem(t){if(this._isInInsertedElement(t.parent))return;this._markRemove(t.parent,t.startOffset,t.offsetSize),this._markInsert(t.parent,t.startOffset,t.offsetSize),this._refreshedItems.add(t),this._setElementState(t,"refresh");const e=qe._createOn(t);for(const i of this._markerCollection.getMarkersIntersectingRange(e)){const r=i.getData();this.bufferMarkerChange(i.name,r,r)}this._cachedChanges=null}_bufferRootLoad(t){if(t.isAttached()){this._bufferRootStateChange(t.rootName,!0),this._markInsert(t,0,t.maxOffset);for(const e of t.getAttributeKeys())this._bufferRootAttributeChange(t.rootName,e,null,t.getAttribute(e));for(const e of this._markerCollection)if(e.getRange().root==t){const i=e.getData();this.bufferMarkerChange(e.name,{...i,range:null},i)}}}_bufferRootStateChange(t,e){if(!this._changedRoots.has(t)){this._changedRoots.set(t,{name:t,state:e?"attached":"detached"});return}const i=this._changedRoots.get(t);i.state!==void 0?(delete i.state,i.attributes===void 0&&this._changedRoots.delete(t)):i.state=e?"attached":"detached"}_bufferRootAttributeChange(t,e,i,r){const s=this._changedRoots.get(t)||{name:t},o=s.attributes||{};if(o[e]){const a=o[e];r===a.oldValue?delete o[e]:a.newValue=r}else o[e]={oldValue:i,newValue:r};Object.entries(o).length===0?(delete s.attributes,s.state===void 0&&this._changedRoots.delete(t)):(s.attributes=o,this._changedRoots.set(t,s))}_markInsert(t,e,i){if(t.root.is("rootElement")&&!t.root._isLoaded)return;const r={type:"insert",offset:e,howMany:i,count:this._changeCount++};this._markChange(t,r)}_markRemove(t,e,i){if(t.root.is("rootElement")&&!t.root._isLoaded)return;const r={type:"remove",offset:e,howMany:i,count:this._changeCount++};this._markChange(t,r),this._removeAllNestedChanges(t,e,i)}_markAttribute(t){if(t.root.is("rootElement")&&!t.root._isLoaded)return;const e={type:"attribute",offset:t.startOffset,howMany:t.offsetSize,count:this._changeCount++};this._markChange(t.parent,e)}_markChange(t,e){this._makeSnapshots(t);const i=this._getChangesForElement(t);this._handleChange(e,i),i.push(e);for(let r=0;r<i.length;r++)i[r].howMany<1&&(i.splice(r,1),r--)}_setElementState(t,e){if(!t.is("element"))return;const i=yp._statesPriority.indexOf(this._elementState.get(t));yp._statesPriority.indexOf(e)>i&&this._elementState.set(t,e)}_getDiffActionForNode(t,e){if(!t.is("element")||!this._elementsSnapshots.has(t))return e;const i=this._elementState.get(t);return!i||i=="move"?e:i}_getChangesForElement(t){let e;return this._changesInElement.has(t)?e=this._changesInElement.get(t):(e=[],this._changesInElement.set(t,e)),e}_makeSnapshots(t){if(this._elementChildrenSnapshots.has(t))return;const e=YD(t.getChildren());this._elementChildrenSnapshots.set(t,e);for(const i of e)this._elementsSnapshots.set(i.node,i)}_handleChange(t,e){t.nodesToHandle=t.howMany;for(const i of e){const r=t.offset+t.howMany,s=i.offset+i.howMany;if(t.type=="insert"&&(i.type=="insert"&&(t.offset<=i.offset?i.offset+=t.howMany:t.offset<s&&(i.howMany+=t.nodesToHandle,t.nodesToHandle=0)),i.type=="remove"&&t.offset<i.offset&&(i.offset+=t.howMany),i.type=="attribute")){if(t.offset<=i.offset)i.offset+=t.howMany;else if(t.offset<s){const o=i.howMany;i.howMany=t.offset-i.offset,e.unshift({type:"attribute",offset:r,howMany:o-i.howMany,count:this._changeCount++})}}if(t.type=="remove"){if(i.type=="insert"){if(r<=i.offset)i.offset-=t.howMany;else if(r<=s)if(t.offset<i.offset){const o=r-i.offset;i.offset=t.offset,i.howMany-=o,t.nodesToHandle-=o}else i.howMany-=t.nodesToHandle,t.nodesToHandle=0;else if(t.offset<=i.offset)t.nodesToHandle-=i.howMany,i.howMany=0;else if(t.offset<s){const o=s-t.offset;i.howMany-=o,t.nodesToHandle-=o}}if(i.type=="remove"&&(r<=i.offset?i.offset-=t.howMany:t.offset<i.offset&&(t.nodesToHandle+=i.howMany,i.howMany=0)),i.type=="attribute"){if(r<=i.offset)i.offset-=t.howMany;else if(t.offset<i.offset){const o=r-i.offset;i.offset=t.offset,i.howMany-=o}else if(t.offset<s)if(r<=s){const o=i.howMany;i.howMany=t.offset-i.offset;const a=o-i.howMany-t.nodesToHandle;e.unshift({type:"attribute",offset:t.offset,howMany:a,count:this._changeCount++})}else i.howMany-=s-t.offset}}if(t.type=="attribute"){if(i.type=="insert")if(t.offset<i.offset&&r>i.offset){if(r>s){const o={type:"attribute",offset:s,howMany:r-s,count:this._changeCount++};this._handleChange(o,e),e.push(o)}t.nodesToHandle=i.offset-t.offset,t.howMany=t.nodesToHandle}else t.offset>=i.offset&&t.offset<s&&(r>s?(t.nodesToHandle=r-s,t.offset=s):t.nodesToHandle=0);if(i.type=="remove"&&t.offset<i.offset&&r>i.offset){const o={type:"attribute",offset:i.offset,howMany:r-i.offset,count:this._changeCount++};this._handleChange(o,e),e.push(o),t.nodesToHandle=i.offset-t.offset,t.howMany=t.nodesToHandle}i.type=="attribute"&&(t.offset>=i.offset&&r<=s?(t.nodesToHandle=0,t.howMany=0,t.offset=0):t.offset<=i.offset&&r>=s&&(i.howMany=0))}}t.howMany=t.nodesToHandle,delete t.nodesToHandle}_getInsertDiff(t,e,i,r,s){const o={type:"insert",position:it._createAt(t,e),name:r.name,attributes:new Map(r.attributes),length:1,changeCount:this._changeCount++,action:i};return i!="insert"&&s&&(o.before={name:s.name,attributes:new Map(s.attributes)}),o}_getRemoveDiff(t,e,i,r){return{type:"remove",action:i,position:it._createAt(t,e),name:r.name,attributes:new Map(r.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(t,e,i){const r=[];i=new Map(i);for(const[s,o]of e){const a=i.has(s)?i.get(s):null;a!==o&&r.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:s,attributeOldValue:o,attributeNewValue:a,changeCount:this._changeCount++}),i.delete(s)}for(const[s,o]of i)r.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:s,attributeOldValue:null,attributeNewValue:o,changeCount:this._changeCount++});return r}_isInInsertedElement(t){const e=t.parent;if(!e)return!1;const i=this._changesInElement.get(e),r=t.startOffset;if(i){for(const s of i)if(s.type=="insert"&&r>=s.offset&&r<s.offset+s.howMany)return!0}return this._isInInsertedElement(e)}_removeAllNestedChanges(t,e,i){const r=new qe(it._createAt(t,e),it._createAt(t,e+i));for(const s of r.getItems({shallow:!0}))s.is("element")&&(this._changesInElement.delete(s),this._removeAllNestedChanges(s,0,s.maxOffset))}};y(yp,"_statesPriority",[void 0,"refresh","rename","move"]);let NT=yp;function KD(n){return{node:n,name:n.is("$text")?"$text":n.name,attributes:new Map(n.getAttributes())}}function YD(n){const t=[];for(const e of n)if(e.is("$text"))for(let i=0;i<e.data.length;++i)t.push(KD(e));else t.push(KD(e));return t}function sEe(n,t){const e=[];let i=0,r=0;for(const s of t){if(s.offset>i){for(let o=0;o<s.offset-i;o++)e.push("e");r+=s.offset-i}if(s.type=="insert"){for(let o=0;o<s.howMany;o++)e.push("i");i=s.offset+s.howMany}else if(s.type=="remove"){for(let o=0;o<s.howMany;o++)e.push("r");i=s.offset,r+=s.howMany}else{if(s.howMany>1500)for(let o=0;o<s.howMany;o++)e.push("a");else e.push(..."a".repeat(s.howMany).split(""));i=s.offset+s.howMany,r+=s.howMany}}if(r<n)for(let s=0;s<n-r-i;s++)e.push("e");return e}function oEe(n){const t="position"in n&&n.position.root.rootName=="$graveyard",e="range"in n&&n.range.root.rootName=="$graveyard";return!t&&!e}class aEe{constructor(){y(this,"_operations",[]);y(this,"_undoPairs",new Map);y(this,"_undoneOperations",new Set);y(this,"_baseVersionToOperationIndex",new Map);y(this,"_version",0);y(this,"_gaps",new Map)}get version(){return this._version}set version(t){this._operations.length&&t>this._version+1&&this._gaps.set(this._version,t),this._version=t}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(t){if(t.baseVersion!==this.version)throw new we("model-document-history-addoperation-incorrect-version",this,{operation:t,historyVersion:this.version});this._operations.push(t),this._version++,this._baseVersionToOperationIndex.set(t.baseVersion,this._operations.length-1)}getOperations(t,e=this.version){if(!this._operations.length)return[];const i=this._operations[0];t===void 0&&(t=i.baseVersion);let r=e-1;for(const[a,l]of this._gaps)t>a&&t<l&&(t=l),r>a&&r<l&&(r=a-1);if(r<i.baseVersion||t>this.lastOperation.baseVersion)return[];let s=this._baseVersionToOperationIndex.get(t);s===void 0&&(s=0);let o=this._baseVersionToOperationIndex.get(r);return o===void 0&&(o=this._operations.length-1),this._operations.slice(s,o+1)}getOperation(t){const e=this._baseVersionToOperationIndex.get(t);if(e!==void 0)return this._operations[e]}setOperationAsUndone(t,e){this._undoPairs.set(e,t),this._undoneOperations.add(t)}isUndoingOperation(t){return this._undoPairs.has(t)}isUndoneOperation(t){return this._undoneOperations.has(t)}getUndoneOperation(t){return this._undoPairs.get(t)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}class My extends xi{constructor(e,i,r="main"){super(i);y(this,"rootName");y(this,"_document");y(this,"_isAttached",!0);y(this,"_isLoaded",!0);this._document=e,this.rootName=r}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}My.prototype.is=function(n,t){return t?t===this.name&&(n==="rootElement"||n==="model:rootElement"||n==="element"||n==="model:element"):n==="rootElement"||n==="model:rootElement"||n==="element"||n==="model:element"||n==="node"||n==="model:node"};const QD="$graveyard";class lEe extends ri(){constructor(e){super();y(this,"model");y(this,"history");y(this,"selection");y(this,"roots");y(this,"differ");y(this,"isReadOnly");y(this,"_postFixers");y(this,"_hasSelectionChangedFromTheLastChangeBlock");this.model=e,this.history=new aEe,this.selection=new Ca(this),this.roots=new cr({idProperty:"rootName"}),this.differ=new NT(e.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",QD),this.listenTo(e,"applyOperation",(i,r)=>{const s=r[0];s.isDocumentOperation&&this.differ.bufferOperation(s)},{priority:"high"}),this.listenTo(e,"applyOperation",(i,r)=>{const s=r[0];s.isDocumentOperation&&this.history.addOperation(s)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(e.markers,"update",(i,r,s,o,a)=>{const l={...r.getData(),range:o};this.differ.bufferMarkerChange(r.name,a,l),s===null&&r.on("change",(c,u)=>{const d=r.getData();this.differ.bufferMarkerChange(r.name,{...d,range:u},d)})}),this.registerPostFixer(i=>{let r=!1;for(const s of this.roots)!s.isAttached()&&!s.isEmpty&&(i.remove(i.createRangeIn(s)),r=!0);for(const s of this.model.markers)s.getRange().root.isAttached()||(i.removeMarker(s),r=!0);return r})}get version(){return this.history.version}set version(e){this.history.version=e}get graveyard(){return this.getRoot(QD)}createRoot(e="$root",i="main"){if(this.roots.get(i))throw new we("model-document-createroot-name-exists",this,{name:i});const r=new My(this,e,i);return this.roots.add(r),r}destroy(){this.selection.destroy(),this.stopListening()}getRoot(e="main"){return this.roots.get(e)}getRootNames(e=!1){return this.getRoots(e).map(i=>i.rootName)}getRoots(e=!1){return this.roots.filter(i=>i!=this.graveyard&&(e||i.isAttached())&&i._isLoaded)}registerPostFixer(e){this._postFixers.add(e)}toJSON(){const e=LI(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}_handleChangeBlock(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){const e=this.getRoots();return e.length?e[0]:this.graveyard}_getDefaultRange(){const e=this._getDefaultRoot(),i=this.model,r=i.schema,s=i.createPositionFromPath(e,[0]);return r.getNearestSelectionRange(s)||i.createRange(s)}_validateSelectionRange(e){return e.start.isValid()&&e.end.isValid()&&ZD(e.start)&&ZD(e.end)}_callPostFixers(e){let i=!1;do for(const r of this._postFixers)if(this.selection.refresh(),i=r(e),i)break;while(i)}}function ZD(n){const t=n.textNode;if(t){const e=t.data,i=n.offset-t.startOffset;return!qI(e,i)&&!GI(e,i)}return!0}class cEe extends ri(){constructor(){super(...arguments);y(this,"_markers",new Map)}[Symbol.iterator](){return this._markers.values()}has(e){const i=e instanceof Wf?e.name:e;return this._markers.has(i)}get(e){return this._markers.get(e)||null}_set(e,i,r=!1,s=!1){const o=e instanceof Wf?e.name:e;if(o.includes(","))throw new we("markercollection-incorrect-marker-name",this);const a=this._markers.get(o);if(a){const u=a.getData(),d=a.getRange();let f=!1;return d.isEqual(i)||(a._attachLiveRange(Ts.fromRange(i)),f=!0),r!=a.managedUsingOperations&&(a._managedUsingOperations=r,f=!0),typeof s=="boolean"&&s!=a.affectsData&&(a._affectsData=s,f=!0),f&&this.fire(`update:${o}`,a,d,i,u),a}const l=Ts.fromRange(i),c=new Wf(o,l,r,s);return this._markers.set(o,c),this.fire(`update:${o}`,c,null,i,{...c.getData(),range:null}),c}_remove(e){const i=e instanceof Wf?e.name:e,r=this._markers.get(i);return r?(this._markers.delete(i),this.fire(`update:${i}`,r,r.getRange(),null,r.getData()),this._destroyMarker(r),!0):!1}_refresh(e){const i=e instanceof Wf?e.name:e,r=this._markers.get(i);if(!r)throw new we("markercollection-refresh-marker-not-exists",this);const s=r.getRange();this.fire(`update:${i}`,r,s,s,r.getData())}*getMarkersAtPosition(e){for(const i of this)i.getRange().containsPosition(e)&&(yield i)}*getMarkersIntersectingRange(e){for(const i of this)i.getRange().getIntersection(e)!==null&&(yield i)}destroy(){for(const e of this._markers.values())this._destroyMarker(e);this._markers=null,this.stopListening()}*getMarkersGroup(e){for(const i of this._markers.values())i.name.startsWith(e+":")&&(yield i)}_destroyMarker(e){e.stopListening(),e._detachLiveRange()}}class Wf extends ri(Ou){constructor(e,i,r,s){super();y(this,"name");y(this,"_managedUsingOperations");y(this,"_affectsData");y(this,"_liveRange");this.name=e,this._liveRange=this._attachLiveRange(i),this._managedUsingOperations=r,this._affectsData=s}get managedUsingOperations(){if(!this._liveRange)throw new we("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new we("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new we("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new we("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new we("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}Wf.prototype.is=function(n){return n==="marker"||n==="model:marker"};class uEe extends vo{constructor(e,i){super(null);y(this,"sourcePosition");y(this,"howMany");this.sourcePosition=e.clone(),this.howMany=i}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e}_validate(){if(this.sourcePosition.root.document)throw new we("detach-operation-on-document-node",this)}_execute(){l8(qe._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}class Ua extends Ou{constructor(e){super();y(this,"markers",new Map);y(this,"_children",new up);e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let i=this;for(const r of e)i=i.getChildAtOffset(r);return i}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){const e=[];for(const i of this._children)e.push(i.toJSON());return e}static fromJSON(e){const i=[];for(const r of e)r.name?i.push(xi.fromJSON(r)):i.push(yi.fromJSON(r));return new Ua(i)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,i){const r=dEe(i);for(const s of r)s.parent!==null&&s._remove(),s.parent=this;this._children._insertNodes(e,r)}_removeChildren(e,i=1){const r=this._children._removeNodes(e,i);for(const s of r)s.parent=null;return r}_removeChildrenArray(e){this._children._removeNodesArray(e);for(const i of e)i.parent=null}}Ua.prototype.is=function(n){return n==="documentFragment"||n==="model:documentFragment"};function dEe(n){return typeof n=="string"?[new yi(n)]:(po(n)||(n=[n]),Array.from(n).map(t=>typeof t=="string"?new yi(t):t instanceof da?new yi(t.data,t.getAttributes()):t))}class fEe{constructor(t,e){y(this,"model");y(this,"batch");this.model=t,this.batch=e}createText(t,e){return new yi(t,e)}createElement(t,e){return new xi(t,e)}createDocumentFragment(){return new Ua}cloneElement(t,e=!0){return t._clone(e)}insert(t,e,i=0){if(this._assertWriterUsedCorrectly(),t instanceof yi&&t.data=="")return;const r=it._createAt(e,i);if(t.parent)if(eN(t.root,r.root)){this.move(qe._createOn(t),r);return}else{if(t.root.document)throw new we("model-writer-insert-forbidden-move",this);this.remove(t)}const s=r.root.document?r.root.document.version:null,o=t instanceof Ua?t._removeChildren(0,t.childCount):t,a=new xr(r,o,s);if(t instanceof yi&&(a.shouldReceiveAttributes=!0),this.batch.addOperation(a),this.model.applyOperation(a),t instanceof Ua)for(const[l,c]of t.markers){const u=it._createAt(c.root,0),f={range:new qe(c.start._getCombined(u,r),c.end._getCombined(u,r)),usingOperation:!0,affectsData:!0};this.model.markers.has(l)?this.updateMarker(l,f):this.addMarker(l,f)}}insertText(t,e,i,r){e instanceof Ua||e instanceof xi||e instanceof it?this.insert(this.createText(t),e,i):this.insert(this.createText(t,e),i,r)}insertElement(t,e,i,r){e instanceof Ua||e instanceof xi||e instanceof it?this.insert(this.createElement(t),e,i):this.insert(this.createElement(t,e),i,r)}append(t,e){this.insert(t,e,"end")}appendText(t,e,i){e instanceof Ua||e instanceof xi?this.insert(this.createText(t),e,"end"):this.insert(this.createText(t,e),i,"end")}appendElement(t,e,i){e instanceof Ua||e instanceof xi?this.insert(this.createElement(t),e,"end"):this.insert(this.createElement(t,e),i,"end")}setAttribute(t,e,i){if(this._assertWriterUsedCorrectly(),i instanceof qe){const r=i.getMinimalFlatRanges();for(const s of r)JD(this,t,e,s)}else XD(this,t,e,i)}setAttributes(t,e){for(const[i,r]of fl(t))this.setAttribute(i,r,e)}removeAttribute(t,e){if(this._assertWriterUsedCorrectly(),e instanceof qe){const i=e.getMinimalFlatRanges();for(const r of i)JD(this,t,null,r)}else XD(this,t,null,e)}clearAttributes(t){this._assertWriterUsedCorrectly();const e=i=>{for(const r of i.getAttributeKeys())this.removeAttribute(r,i)};if(!(t instanceof qe))e(t);else for(const i of t.getItems())e(i)}move(t,e,i){if(this._assertWriterUsedCorrectly(),!(t instanceof qe))throw new we("writer-move-invalid-range",this);if(!t.isFlat)throw new we("writer-move-range-not-flat",this);const r=it._createAt(e,i);if(r.isEqual(t.start))return;if(this._addOperationForAffectedMarkers("move",t),!eN(t.root,r.root))throw new we("writer-move-different-document",this);const s=t.root.document?t.root.document.version:null,o=new qn(t.start,t.end.offset-t.start.offset,r,s);this.batch.addOperation(o),this.model.applyOperation(o)}remove(t){this._assertWriterUsedCorrectly();const i=(t instanceof qe?t:qe._createOn(t)).getMinimalFlatRanges().reverse();for(const r of i)this._addOperationForAffectedMarkers("move",r),hEe(r.start,r.end.offset-r.start.offset,this.batch,this.model)}merge(t){this._assertWriterUsedCorrectly();const e=t.nodeBefore,i=t.nodeAfter;if(this._addOperationForAffectedMarkers("merge",t),!(e instanceof xi))throw new we("writer-merge-no-element-before",this);if(!(i instanceof xi))throw new we("writer-merge-no-element-after",this);t.root.document?this._merge(t):this._mergeDetached(t)}createPositionFromPath(t,e,i){return this.model.createPositionFromPath(t,e,i)}createPositionAt(t,e){return this.model.createPositionAt(t,e)}createPositionAfter(t){return this.model.createPositionAfter(t)}createPositionBefore(t){return this.model.createPositionBefore(t)}createRange(t,e){return this.model.createRange(t,e)}createRangeIn(t){return this.model.createRangeIn(t)}createRangeOn(t){return this.model.createRangeOn(t)}createSelection(...t){return this.model.createSelection(...t)}_mergeDetached(t){const e=t.nodeBefore,i=t.nodeAfter;this.move(qe._createIn(i),it._createAt(e,"end")),this.remove(i)}_merge(t){const e=it._createAt(t.nodeBefore,"end"),i=it._createAt(t.nodeAfter,0),r=t.root.document.graveyard,s=new it(r,[0]),o=t.root.document.version,a=new ji(i,t.nodeAfter.maxOffset,e,s,o);this.batch.addOperation(a),this.model.applyOperation(a)}rename(t,e){if(this._assertWriterUsedCorrectly(),!(t instanceof xi))throw new we("writer-rename-not-element-instance",this);const i=t.root.document?t.root.document.version:null,r=new Gs(it._createBefore(t),t.name,e,i);this.batch.addOperation(r),this.model.applyOperation(r)}split(t,e){this._assertWriterUsedCorrectly();let i=t.parent;if(!i.parent)throw new we("writer-split-element-no-parent",this);if(e||(e=i.parent),!t.parent.getAncestors({includeSelf:!0}).includes(e))throw new we("writer-split-invalid-limit-element",this);let r,s;do{const o=i.root.document?i.root.document.version:null,a=i.maxOffset-t.offset,l=di.getInsertionPosition(t),c=new di(t,a,l,null,o);this.batch.addOperation(c),this.model.applyOperation(c),!r&&!s&&(r=i,s=t.parent.nextSibling),t=this.createPositionAfter(t.parent),i=t.parent}while(i!==e);return{position:t,range:new qe(it._createAt(r,"end"),it._createAt(s,0))}}wrap(t,e){if(this._assertWriterUsedCorrectly(),!t.isFlat)throw new we("writer-wrap-range-not-flat",this);const i=e instanceof xi?e:new xi(e);if(i.childCount>0)throw new we("writer-wrap-element-not-empty",this);if(i.parent!==null)throw new we("writer-wrap-element-attached",this);this.insert(i,t.start);const r=new qe(t.start.getShiftedBy(1),t.end.getShiftedBy(1));this.move(r,it._createAt(i,0))}unwrap(t){if(this._assertWriterUsedCorrectly(),t.parent===null)throw new we("writer-unwrap-element-no-parent",this);this.move(qe._createIn(t),this.createPositionAfter(t)),this.remove(t)}addMarker(t,e){if(this._assertWriterUsedCorrectly(),!e||typeof e.usingOperation!="boolean")throw new we("writer-addmarker-no-usingoperation",this);const i=e.usingOperation,r=e.range,s=e.affectsData===void 0?!1:e.affectsData;if(this.model.markers.has(t))throw new we("writer-addmarker-marker-exists",this);if(!r)throw new we("writer-addmarker-no-range",this);return i?(gg(this,t,null,r,s),this.model.markers.get(t)):this.model.markers._set(t,r,i,s)}updateMarker(t,e){this._assertWriterUsedCorrectly();const i=typeof t=="string"?t:t.name,r=this.model.markers.get(i);if(!r)throw new we("writer-updatemarker-marker-not-exists",this);if(!e){mn("writer-updatemarker-reconvert-using-editingcontroller",{markerName:i}),this.model.markers._refresh(r);return}const s=typeof e.usingOperation=="boolean",o=typeof e.affectsData=="boolean",a=o?e.affectsData:r.affectsData;if(!s&&!e.range&&!o)throw new we("writer-updatemarker-wrong-options",this);const l=r.getRange(),c=e.range?e.range:l;if(s&&e.usingOperation!==r.managedUsingOperations){e.usingOperation?gg(this,i,null,c,a):(gg(this,i,l,null,a),this.model.markers._set(i,c,void 0,a));return}r.managedUsingOperations?gg(this,i,l,c,a):this.model.markers._set(i,c,void 0,a)}removeMarker(t){this._assertWriterUsedCorrectly();const e=typeof t=="string"?t:t.name;if(!this.model.markers.has(e))throw new we("writer-removemarker-no-marker",this);const i=this.model.markers.get(e);if(!i.managedUsingOperations){this.model.markers._remove(e);return}const r=i.getRange();gg(this,e,r,null,i.affectsData)}addRoot(t,e="$root"){this._assertWriterUsedCorrectly();const i=this.model.document.getRoot(t);if(i&&i.isAttached())throw new we("writer-addroot-root-exists",this);const r=this.model.document,s=new nl(t,e,!0,r,r.version);return this.batch.addOperation(s),this.model.applyOperation(s),this.model.document.getRoot(t)}detachRoot(t){this._assertWriterUsedCorrectly();const e=typeof t=="string"?this.model.document.getRoot(t):t;if(!e||!e.isAttached())throw new we("writer-detachroot-no-root",this);for(const s of this.model.markers)s.getRange().root===e&&this.removeMarker(s);for(const s of e.getAttributeKeys())this.removeAttribute(s,e);this.remove(this.createRangeIn(e));const i=this.model.document,r=new nl(e.rootName,e.name,!1,i,i.version);this.batch.addOperation(r),this.model.applyOperation(r)}setSelection(...t){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...t)}setSelectionFocus(t,e){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(t,e)}setSelectionAttribute(t,e){if(this._assertWriterUsedCorrectly(),typeof t=="string")this._setSelectionAttribute(t,e);else for(const[i,r]of fl(t))this._setSelectionAttribute(i,r)}removeSelectionAttribute(t){if(this._assertWriterUsedCorrectly(),typeof t=="string")this._removeSelectionAttribute(t);else for(const e of t)this._removeSelectionAttribute(e)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(t){this.model.document.selection._restoreGravity(t)}_setSelectionAttribute(t,e){const i=this.model.document.selection;if(i.isCollapsed&&i.anchor.parent.isEmpty){const r=Ca._getStoreAttributeKey(t);this.setAttribute(r,e,i.anchor.parent)}i._setAttribute(t,e)}_removeSelectionAttribute(t){const e=this.model.document.selection;if(e.isCollapsed&&e.anchor.parent.isEmpty){const i=Ca._getStoreAttributeKey(t);this.removeAttribute(i,e.anchor.parent)}e._removeAttribute(t)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new we("writer-incorrect-use",this)}_addOperationForAffectedMarkers(t,e){for(const i of this.model.markers){if(!i.managedUsingOperations)continue;const r=i.getRange();let s=!1;if(t==="move"){const o=e;s=o.containsPosition(r.start)||o.start.isEqual(r.start)||o.containsPosition(r.end)||o.end.isEqual(r.end)}else{const o=e,a=o.nodeBefore,l=o.nodeAfter,c=r.start.parent==a&&r.start.isAtEnd,u=r.end.parent==l&&r.end.offset==0,d=r.end.nodeAfter==l,f=r.start.nodeAfter==l;s=c||u||d||f}s&&this.updateMarker(i.name,{range:r})}}}function JD(n,t,e,i){const r=n.model,s=r.document;let o=i.start,a,l,c;for(const d of i.getWalker({shallow:!0}))c=d.item.getAttribute(t),a&&l!=c&&(l!=e&&u(),o=a),a=d.nextPosition,l=c;a instanceof it&&a!=o&&l!=e&&u();function u(){const d=new qe(o,a),f=d.root.document?s.version:null,h=new Ji(d,t,l,e,f);n.batch.addOperation(h),r.applyOperation(h)}}function XD(n,t,e,i){const r=n.model,s=r.document,o=i.getAttribute(t);let a,l;if(o!=e){if(i.root===i){const u=i.document?s.version:null;l=new Yl(i,t,o,e,u)}else{a=new qe(it._createBefore(i),n.createPositionAfter(i));const u=a.root.document?s.version:null;l=new Ji(a,t,o,e,u)}n.batch.addOperation(l),r.applyOperation(l)}}function gg(n,t,e,i,r){const s=n.model,o=s.document,a=new Ps(t,e,i,s.markers,!!r,o.version);n.batch.addOperation(a),s.applyOperation(a)}function hEe(n,t,e,i){let r;if(n.root.document){const s=i.document,o=new it(s.graveyard,[0]);r=new qn(n,t,o,s.version)}else r=new uEe(n,t);e.addOperation(r),i.applyOperation(r)}function eN(n,t){return n===t||n instanceof My&&t instanceof My}function mEe(n){n.document.registerPostFixer(t=>gEe(t,n))}function gEe(n,t){const e=t.document.selection,i=t.schema,r=[];let s=!1;for(const o of e.getRanges()){const a=iP(o,i);a&&!a.isEqual(o)?(r.push(a),s=!0):r.push(o)}return s&&n.setSelection(wEe(r),{backward:e.isBackward}),!1}function iP(n,t){return n.isCollapsed?pEe(n,t):vEe(n,t)}function pEe(n,t){const e=n.start,i=t.getNearestSelectionRange(e);if(!i){const s=e.getAncestors().reverse().find(o=>t.isObject(o));return s?qe._createOn(s):null}if(!i.isCollapsed)return i;const r=i.start;return e.isEqual(r)?null:new qe(r)}function vEe(n,t){const{start:e,end:i}=n,r=t.checkChild(e,"$text"),s=t.checkChild(i,"$text"),o=t.getLimitElement(e),a=t.getLimitElement(i);if(o===a){if(r&&s)return null;if(bEe(e,i,t)){const d=e.nodeAfter&&t.isSelectable(e.nodeAfter)?null:t.getNearestSelectionRange(e,"forward"),h=i.nodeBefore&&t.isSelectable(i.nodeBefore)?null:t.getNearestSelectionRange(i,"backward"),g=d?d.start:e,v=h?h.end:i;return new qe(g,v)}}const l=o&&!o.is("rootElement"),c=a&&!a.is("rootElement");if(l||c){const u=e.nodeAfter&&i.nodeBefore&&e.nodeAfter.parent===i.nodeBefore.parent,d=l&&(!u||!nN(e.nodeAfter,t)),f=c&&(!u||!nN(i.nodeBefore,t));let h=e,g=i;return d&&(h=it._createBefore(tN(o,t))),f&&(g=it._createAfter(tN(a,t))),new qe(h,g)}return null}function tN(n,t){let e=n,i=e;for(;t.isLimit(i)&&i.parent;)e=i,i=i.parent;return e}function bEe(n,t,e){const i=n.nodeAfter&&!e.isLimit(n.nodeAfter)||e.checkChild(n,"$text"),r=t.nodeBefore&&!e.isLimit(t.nodeBefore)||e.checkChild(t,"$text");return i||r}function wEe(n){const t=[...n],e=new Set;let i=1;for(;i<t.length;){const s=t[i],o=t.slice(0,i);for(const[a,l]of o.entries())if(!e.has(a)){if(s.isEqual(l))e.add(a);else if(s.isIntersecting(l)){e.add(a),e.add(i);const c=s.getJoined(l);t.push(c)}}i++}return t.filter((s,o)=>!e.has(o))}function nN(n,t){return n&&t.isSelectable(n)}function yEe(n,t,e={}){if(t.isCollapsed)return;const i=t.getFirstRange();if(i.root.rootName=="$graveyard")return;const r=n.schema;n.change(s=>{if(!e.doNotResetEntireContent&&PEe(r,t)){IEe(s,t);return}const o={};if(!e.doNotAutoparagraph){const c=t.getSelectedElement();c&&Object.assign(o,r.getAttributesWithProperty(c,"copyOnReplace",!0))}let a,l;e.doNotFixSelection?(a=Ii.fromPosition(i.start,"toPrevious"),l=Ii.fromPosition(i.end,"toNext")):[a,l]=_Ee(i),a.isTouching(l)||s.remove(s.createRange(a,l)),e.leaveUnmerged||(EEe(s,a,l),r.removeDisallowedAttributes(a.parent.getChildren(),s)),g8(s,t,a),!e.doNotAutoparagraph&&SEe(r,a)&&m8(s,a,t,o),a.detach(),l.detach()})}function _Ee(n){const t=n.root.document.model,e=n.start;let i=n.end;if(t.hasContent(n,{ignoreMarkers:!0})){const r=kEe(i);if(r&&i.isTouching(t.createPositionAt(r,0))){const s=t.createSelection(n);t.modifySelection(s,{direction:"backward"});const o=s.getLastPosition(),a=t.createRange(o,i);t.hasContent(a,{ignoreMarkers:!0})||(i=o)}}return[Ii.fromPosition(e,"toPrevious"),Ii.fromPosition(i,"toNext")]}function kEe(n){const t=n.parent,e=t.root.document.model.schema,i=t.getAncestors({parentFirst:!0,includeSelf:!0});for(const r of i){if(e.isLimit(r))return null;if(e.isBlock(r))return r}}function EEe(n,t,e){const i=n.model;if(!rP(n.model.schema,t,e))return;const[r,s]=TEe(t,e);!r||!s||(!i.hasContent(r,{ignoreMarkers:!0})&&i.hasContent(s,{ignoreMarkers:!0})?h8(n,t,e,r.parent):f8(n,t,e,r.parent))}function f8(n,t,e,i){const r=t.parent,s=e.parent;if(!(r==i||s==i)){for(t=n.createPositionAfter(r),e=n.createPositionBefore(s),e.isEqual(t)||n.insert(s,t),n.merge(t);e.parent.isEmpty;){const o=e.parent;e=n.createPositionBefore(o),n.remove(o)}rP(n.model.schema,t,e)&&f8(n,t,e,i)}}function h8(n,t,e,i){const r=t.parent,s=e.parent;if(!(r==i||s==i)){for(t=n.createPositionAfter(r),e=n.createPositionBefore(s),e.isEqual(t)||n.insert(r,e);t.parent.isEmpty;){const o=t.parent;t=n.createPositionBefore(o),n.remove(o)}e=n.createPositionBefore(s),CEe(n,e),rP(n.model.schema,t,e)&&h8(n,t,e,i)}}function CEe(n,t){const e=t.nodeBefore,i=t.nodeAfter;e.name!=i.name&&n.rename(e,i.name),n.clearAttributes(e),n.setAttributes(Object.fromEntries(i.getAttributes()),e),n.merge(t)}function rP(n,t,e){const i=t.parent,r=e.parent;return i==r||n.isLimit(i)||n.isLimit(r)?!1:AEe(t,e,n)}function TEe(n,t){const e=n.getAncestors(),i=t.getAncestors();let r=0;for(;e[r]&&e[r]==i[r];)r++;return[e[r],i[r]]}function SEe(n,t){const e=n.checkChild(t,"$text"),i=n.checkChild(t,"paragraph");return!e&&i}function AEe(n,t,e){const i=new qe(n,t);for(const r of i.getWalker())if(e.isLimit(r.item))return!1;return!0}function m8(n,t,e,i={}){const r=n.createElement("paragraph");n.model.schema.setAllowedAttributes(r,i,n),n.insert(r,t),g8(n,e,n.createPositionAt(r,0))}function IEe(n,t){const e=n.model.schema.getLimitElement(t);n.remove(n.createRangeIn(e)),m8(n,n.createPositionAt(e,0),t)}function PEe(n,t){const e=n.getLimitElement(t);if(!t.containsEntireContent(e))return!1;const i=t.getFirstRange();return i.start.parent==i.end.parent?!1:n.checkChild(e,"paragraph")}function g8(n,t,e){t instanceof Ca?n.setSelection(e):t.setTo(e)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function xEe(n,t){return n.change(e=>{const i=e.createDocumentFragment(),r=t.getFirstRange();if(!r||r.isCollapsed)return i;const s=r.start.root,o=r.start.getCommonPath(r.end),a=s.getNodeByPath(o);let l;r.start.parent==r.end.parent?l=r:l=e.createRange(e.createPositionAt(a,r.start.path[o.length]),e.createPositionAt(a,r.end.path[o.length]+1));const c=l.end.offset-l.start.offset;for(const u of l.getItems({shallow:!0}))u.is("$textProxy")?e.appendText(u.data,u.getAttributes(),i):e.append(e.cloneElement(u,!0),i);if(l!=r){const u=r._getTransformedByMove(l.start,e.createPositionAt(i,0),c)[0],d=e.createRange(e.createPositionAt(i,0),u.start),f=e.createRange(u.end,e.createPositionAt(i,"end"));iN(f,e),iN(d,e)}return i})}function iN(n,t){const e=[];Array.from(n.getItems({direction:"backward"})).map(i=>t.createRangeOn(i)).filter(i=>(i.start.isAfter(n.start)||i.start.isEqual(n.start))&&(i.end.isBefore(n.end)||i.end.isEqual(n.end))).forEach(i=>{e.push(i.start.parent),t.remove(i)}),e.forEach(i=>{let r=i;for(;r.parent&&r.isEmpty;){const s=t.createRangeOn(r);r=r.parent,t.remove(s)}})}function OEe(n,t,e){return n.change(i=>{const r=e||n.document.selection;r.isCollapsed||n.deleteContent(r,{doNotAutoparagraph:!0});const s=new REe(n,i,r.anchor),o=[];let a;if(t.is("documentFragment")){if(t.markers.size){const u=[];for(const[d,f]of t.markers){const{start:h,end:g}=f,v=h.isEqual(g);u.push({position:h,name:d,isCollapsed:v},{position:g,name:d,isCollapsed:v})}u.sort(({position:d},{position:f})=>d.isBefore(f)?1:-1);for(const{position:d,name:f,isCollapsed:h}of u){let g=null,v=null;const _=d.parent===t&&d.isAtStart,w=d.parent===t&&d.isAtEnd;!_&&!w?(g=i.createElement("$marker"),i.insert(g,d)):h&&(v=_?"start":"end"),o.push({name:f,element:g,collapsed:v})}}a=t.getChildren()}else a=[t];s.handleNodes(a);let l=s.getSelectionRange();if(t.is("documentFragment")&&o.length){const u=l?Ts.fromRange(l):null,d={};for(let f=o.length-1;f>=0;f--){const{name:h,element:g,collapsed:v}=o[f],_=!d[h];if(_&&(d[h]=[]),g){const w=i.createPositionAt(g,"before");d[h].push(w),i.remove(g)}else{const w=s.getAffectedRange();if(!w){v&&d[h].push(s.position);continue}v?d[h].push(w[v]):d[h].push(_?w.start:w.end)}}for(const[f,[h,g]]of Object.entries(d))h&&g&&h.root===g.root&&h.root.document&&!i.model.markers.has(f)&&i.addMarker(f,{usingOperation:!0,affectsData:!0,range:new qe(h,g)});u&&(l=u.toRange(),u.detach())}/* istanbul ignore else -- @preserve */l&&(r instanceof Ca?i.setSelection(l):r.setTo(l));const c=s.getAffectedRange()||n.createRange(r.anchor);return s.destroy(),c})}class REe{constructor(t,e,i){y(this,"model");y(this,"writer");y(this,"position");y(this,"canMergeWith");y(this,"schema");y(this,"_documentFragment");y(this,"_documentFragmentPosition");y(this,"_firstNode",null);y(this,"_lastNode",null);y(this,"_lastAutoParagraph",null);y(this,"_filterAttributesOf",[]);y(this,"_affectedStart",null);y(this,"_affectedEnd",null);y(this,"_nodeToSelect",null);this.model=t,this.writer=e,this.position=i,this.canMergeWith=new Set([this.position.parent]),this.schema=t.schema,this._documentFragment=e.createDocumentFragment(),this._documentFragmentPosition=e.createPositionAt(this._documentFragment,0)}handleNodes(t){for(const e of Array.from(t))this._handleNode(e);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(t){const e=this.writer.createPositionAfter(this._lastNode),i=this.writer.createPositionAfter(t);if(i.isAfter(e)){this._lastNode=t;/* istanbul ignore if -- @preserve */if(this.position.parent!=t||!this.position.isAtEnd)throw new we("insertcontent-invalid-insertion-position",this);this.position=i,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?qe._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new qe(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(t){if(!this._checkAndSplitToAllowedPosition(t)){this.schema.isObject(t)||this._handleDisallowedNode(t);return}this._appendToFragment(t),this._firstNode||(this._firstNode=t),this._lastNode=t}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const t=Ii.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=t.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=t.toPosition(),t.detach()}_handleDisallowedNode(t){t.is("element")&&this.handleNodes(t.getChildren())}_appendToFragment(t){/* istanbul ignore if -- @preserve */if(!this.schema.checkChild(this.position,t))throw new we("insertcontent-wrong-position",this,{node:t,position:this.position});this.writer.insert(t,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(t.offsetSize),this.schema.isObject(t)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=t:this._nodeToSelect=null,this._filterAttributesOf.push(t)}_setAffectedBoundaries(t){this._affectedStart||(this._affectedStart=Ii.fromPosition(t,"toPrevious")),(!this._affectedEnd||this._affectedEnd.isBefore(t))&&(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=Ii.fromPosition(t,"toNext"))}_mergeOnLeft(){const t=this._firstNode;if(!(t instanceof xi)||!this._canMergeLeft(t))return;const e=Ii._createBefore(t);e.stickiness="toNext";const i=Ii.fromPosition(this.position,"toNext");this._affectedStart.isEqual(e)&&(this._affectedStart.detach(),this._affectedStart=Ii._createAt(e.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=e.nodeBefore,this._lastNode=e.nodeBefore),this.writer.merge(e),e.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=Ii._createAt(e.nodeBefore,"end","toNext")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),e.detach()}_mergeOnRight(){const t=this._lastNode;if(!(t instanceof xi)||!this._canMergeRight(t))return;const e=Ii._createAfter(t);e.stickiness="toNext";/* istanbul ignore if -- @preserve */if(!this.position.isEqual(e))throw new we("insertcontent-invalid-insertion-position",this);this.position=it._createAt(e.nodeBefore,"end");const i=Ii.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(e)&&(this._affectedEnd.detach(),this._affectedEnd=Ii._createAt(e.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=e.nodeBefore,this._lastNode=e.nodeBefore),this.writer.merge(e),e.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=Ii._createAt(e.nodeBefore,0,"toPrevious")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),e.detach()}_canMergeLeft(t){const e=t.previousSibling;return e instanceof xi&&this.canMergeWith.has(e)&&this.model.schema.checkMerge(e,t)}_canMergeRight(t){const e=t.nextSibling;return e instanceof xi&&this.canMergeWith.has(e)&&this.model.schema.checkMerge(t,e)}_insertAutoParagraph(){this._insertPartialFragment();const t=this.writer.createElement("paragraph");this.writer.insert(t,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=t,this.position=this.writer.createPositionAt(t,0)}_checkAndSplitToAllowedPosition(t){const e=this._getAllowedIn(this.position.parent,t);if(!e)return!1;for(e!=this.position.parent&&this._insertPartialFragment();e!=this.position.parent;)if(this.position.isAtStart){const i=this.position.parent;this.position=this.writer.createPositionBefore(i),i.isEmpty&&i.parent===e&&this.writer.remove(i)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const i=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=i,this.canMergeWith.add(this.position.nodeAfter)}return this.schema.checkChild(this.position.parent,t)||this._insertAutoParagraph(),!0}_getAllowedIn(t,e){return this.schema.checkChild(t,e)||this.schema.checkChild(t,"paragraph")&&this.schema.checkChild("paragraph",e)?t:this.schema.isLimit(t)?null:this._getAllowedIn(t.parent,e)}}function VEe(n,t,e,i={}){if(!n.schema.isObject(t))throw new we("insertobject-element-not-an-object",n,{object:t});const r=e||n.document.selection;let s=r;i.findOptimalPosition&&n.schema.isBlock(t)&&(s=n.createSelection(n.schema.findOptimalInsertionRange(r,i.findOptimalPosition)));const o=gi(r.getSelectedBlocks()),a={};return o&&Object.assign(a,n.schema.getAttributesWithProperty(o,"copyOnReplace",!0)),n.change(l=>{s.isCollapsed||n.deleteContent(s,{doNotAutoparagraph:!0});let c=t;const u=s.anchor.parent;!n.schema.checkChild(u,t)&&n.schema.checkChild(u,"paragraph")&&n.schema.checkChild("paragraph",t)&&(c=l.createElement("paragraph"),l.insert(t,c)),n.schema.setAllowedAttributes(c,a,l);const d=n.insertContent(c,s);return d.isCollapsed||i.setSelection&&DEe(l,t,i.setSelection,a),d})}function DEe(n,t,e,i){const r=n.model;if(e=="on"){n.setSelection(t,"on");return}if(e!="after")throw new we("insertobject-invalid-place-parameter-value",r);let s=t.nextSibling;if(r.schema.isInline(t)){n.setSelection(t,"after");return}!(s&&r.schema.checkChild(s,"$text"))&&r.schema.checkChild(t.parent,"paragraph")&&(s=n.createElement("paragraph"),r.schema.setAllowedAttributes(s,i,n),r.insertContent(s,n.createPositionAfter(t))),s&&n.setSelection(s,0)}const NEe=' ,.?!:;"-()';function LEe(n,t,e={}){const i=n.schema,r=e.direction!="backward",s=e.unit?e.unit:"character",o=!!e.treatEmojiAsSingleUnit,a=t.focus,l=new zl({boundaries:FEe(a,r),singleCharacters:!0,direction:r?"forward":"backward"}),c={walker:l,schema:i,isForward:r,unit:s,treatEmojiAsSingleUnit:o};let u;for(;u=l.next();){if(u.done)return;const d=MEe(c,u.value);if(d){t instanceof Ca?n.change(f=>{f.setSelectionFocus(d)}):t.setFocus(d);return}}}function MEe(n,t){const{isForward:e,walker:i,unit:r,schema:s,treatEmojiAsSingleUnit:o}=n,{type:a,item:l,nextPosition:c}=t;if(a=="text")return n.unit==="word"?BEe(i,e):$Ee(i,r,o);if(a==(e?"elementStart":"elementEnd")){if(s.isSelectable(l))return it._createAt(l,e?"after":"before");if(s.checkChild(c,"$text"))return c}else{if(s.isLimit(l)){i.skip(()=>!0);return}if(s.checkChild(c,"$text"))return c}}function $Ee(n,t,e){const i=n.position.textNode;if(i){const r=i.data;let s=n.position.offset-i.startOffset;for(;qI(r,s)||t=="character"&&GI(r,s)||e&&Iz(r,s);)n.next(),s=n.position.offset-i.startOffset}return n.position}function BEe(n,t){let e=n.position.textNode;for(e||(e=t?n.position.nodeAfter:n.position.nodeBefore);e&&e.is("$text");){const i=n.position.offset-e.startOffset;if(zEe(e,i,t))e=t?n.position.nodeAfter:n.position.nodeBefore;else{if(UEe(e.data,i,t))break;n.next()}}return n.position}function FEe(n,t){const e=n.root,i=it._createAt(e,t?"end":0);return t?new qe(n,i):new qe(i,n)}function UEe(n,t,e){const i=t+(e?0:-1);return NEe.includes(n.charAt(i))}function zEe(n,t,e){return t===(e?n.offsetSize:0)}let HEe=class extends Wn(){constructor(){super();y(this,"markers");y(this,"document");y(this,"schema");y(this,"_pendingChanges");y(this,"_currentWriter");this.markers=new cEe,this.document=new lEe(this),this.schema=new Ske,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(e=>this.decorate(e)),this.on("applyOperation",(e,i)=>{i[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck(()=>!0,"$marker"),mEe(this),this.document.registerPostFixer(t8),this.on("insertContent",(e,[i,r])=>{e.return=OEe(this,i,r)}),this.on("insertObject",(e,[i,r,s])=>{e.return=VEe(this,i,r,s)}),this.on("canEditAt",e=>{const i=!this.document.isReadOnly;e.return=i,i||e.stop()})}change(e){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new _f,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(i){/* istanbul ignore next -- @preserve */we.rethrowUnexpectedError(i,this)}}enqueueChange(e,i){try{e?typeof e=="function"?(i=e,e=new _f):e instanceof _f||(e=new _f(e)):e=new _f,this._pendingChanges.push({batch:e,callback:i}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(r){/* istanbul ignore next -- @preserve */we.rethrowUnexpectedError(r,this)}}applyOperation(e){e._execute()}insertContent(e,i,r,...s){const o=Yk(i,r);return this.fire("insertContent",[e,o,r,...s])}insertObject(e,i,r,s,...o){const a=Yk(i,r);return this.fire("insertObject",[e,a,s,s,...o])}deleteContent(e,i){yEe(this,e,i)}modifySelection(e,i){LEe(this,e,i)}getSelectedContent(e){return xEe(this,e)}hasContent(e,i={}){const r=e instanceof qe?e:qe._createIn(e);if(r.isCollapsed)return!1;const{ignoreWhitespaces:s=!1,ignoreMarkers:o=!1}=i;if(!o){for(const a of this.markers.getMarkersIntersectingRange(r))if(a.affectsData)return!0}for(const a of r.getItems())if(this.schema.isContent(a))if(a.is("$textProxy"))if(s){if(a.data.search(/\S/)!==-1)return!0}else return!0;else return!0;return!1}canEditAt(e){const i=Yk(e);return this.fire("canEditAt",[i])}createPositionFromPath(e,i,r){return new it(e,i,r)}createPositionAt(e,i){return it._createAt(e,i)}createPositionAfter(e){return it._createAfter(e)}createPositionBefore(e){return it._createBefore(e)}createRange(e,i){return new qe(e,i)}createRangeIn(e){return qe._createIn(e)}createRangeOn(e){return qe._createOn(e)}createSelection(...e){return new to(...e)}createBatch(e){return new _f(e)}createOperationFromJSON(e){return Zke.fromJSON(e,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const e=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){const i=this._pendingChanges[0].batch;this._currentWriter=new fEe(this,i);const r=this._pendingChanges[0].callback(this._currentWriter);e.push(r),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return e}};function Yk(n,t){if(n)return n instanceof to||n instanceof Ca?n:n instanceof Xd?t||t===0?new to(n,t):n.is("rootElement")?new to(n,"in"):new to(n,"on"):new to(n)}class WEe extends vl{constructor(){super(...arguments);y(this,"domEventType","click")}onDomEvent(e){this.fire(e.type,e)}}class D0 extends vl{constructor(){super(...arguments);y(this,"domEventType",["mousedown","mouseup","mouseover","mouseout"])}onDomEvent(e){this.fire(e.type,e)}}class jEe extends vl{constructor(){super(...arguments);y(this,"domEventType",["touchstart","touchend","touchmove"])}onDomEvent(e){this.fire(e.type,e)}}class Eo{constructor(t){y(this,"document");this.document=t}createDocumentFragment(t){return new yd(this.document,t)}createElement(t,e,i){return new rc(this.document,t,e,i)}createText(t){return new Gr(this.document,t)}clone(t,e=!1){return t._clone(e)}appendChild(t,e){return e._appendChild(t)}insertChild(t,e,i){return i._insertChild(t,e)}removeChildren(t,e,i){return i._removeChildren(t,e)}remove(t){const e=t.parent;return e?this.removeChildren(e.getChildIndex(t),1,e):[]}replace(t,e){const i=t.parent;if(i){const r=i.getChildIndex(t);return this.removeChildren(r,1,i),this.insertChild(r,e,i),!0}return!1}unwrapElement(t){const e=t.parent;if(e){const i=e.getChildIndex(t);this.remove(t),this.insertChild(i,t.getChildren(),e)}}rename(t,e){const i=new rc(this.document,t,e.getAttributes(),e.getChildren());return this.replace(e,i)?i:null}setAttribute(t,e,i){i._setAttribute(t,e)}removeAttribute(t,e){e._removeAttribute(t)}addClass(t,e){e._addClass(t)}removeClass(t,e){e._removeClass(t)}setStyle(t,e,i){aa(t)&&i===void 0?e._setStyle(t):i._setStyle(t,e)}removeStyle(t,e){e._removeStyle(t)}setCustomProperty(t,e,i){i._setCustomProperty(t,e)}removeCustomProperty(t,e){return e._removeCustomProperty(t)}createPositionAt(t,e){return vt._createAt(t,e)}createPositionAfter(t){return vt._createAfter(t)}createPositionBefore(t){return vt._createBefore(t)}createRange(t,e){return new un(t,e)}createRangeOn(t){return un._createOn(t)}createRangeIn(t){return un._createIn(t)}createSelection(...t){return new Kl(...t)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const qEe=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,GEe=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,KEe=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,YEe=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,QEe=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,ZEe=/\w+\((?:[^()]|\([^()]*\))*\)|\S+/gi,JEe=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]);function p8(n){return n.startsWith("#")?qEe.test(n):n.startsWith("rgb")?GEe.test(n)||KEe.test(n):n.startsWith("hsl")?YEe.test(n)||QEe.test(n):JEe.has(n.toLowerCase())}const XEe=["none","hidden","dotted","dashed","solid","double","groove","ridge","inset","outset"];function eCe(n){return XEe.includes(n)}const tCe=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;function sP(n){return tCe.test(n)}const nCe=/^[+-]?[0-9]*([.][0-9]+)?%$/;function iCe(n){return nCe.test(n)}const rCe=["repeat-x","repeat-y","repeat","space","round","no-repeat"];function sCe(n){return rCe.includes(n)}const oCe=["center","top","bottom","left","right"];function aCe(n){return oCe.includes(n)}const lCe=["fixed","scroll","local"];function cCe(n){return lCe.includes(n)}const uCe=/^url\(/;function dCe(n){return uCe.test(n)}function dp(n=""){if(n==="")return{top:void 0,right:void 0,bottom:void 0,left:void 0};const t=oP(n),e=t[0],i=t[2]||e,r=t[1]||e,s=t[3]||r;return{top:e,bottom:i,right:r,left:s}}function fp(n){return t=>{const{top:e,right:i,bottom:r,left:s}=t,o=[];return[e,i,s,r].every(a=>!!a)?o.push([n,fCe(t)]):(e&&o.push([n+"-top",e]),i&&o.push([n+"-right",i]),r&&o.push([n+"-bottom",r]),s&&o.push([n+"-left",s])),o}}function fCe({top:n,right:t,bottom:e,left:i}){const r=[];return i!==t?r.push(n,t,e,i):e!==n?r.push(n,t,e):t!==n?r.push(n,t):r.push(n),r.join(" ")}function v8(n){return t=>({path:n,value:dp(t)})}function oP(n){const t=n.trim().slice(0,1500).matchAll(ZEe);return Array.from(t).map(e=>e[0])}function b8(n){n.setNormalizer("background",hCe()),n.setNormalizer("background-color",mCe()),n.setReducer("background",gCe()),n.setStyleRelation("background",["background-color"])}function hCe(){return n=>{const t={},e=oP(n);for(const i of e)sCe(i)?(t.repeat=t.repeat||[],t.repeat.push(i)):aCe(i)?(t.position=t.position||[],t.position.push(i)):cCe(i)?t.attachment=i:p8(i)?t.color=i:dCe(i)&&(t.image=i);return{path:"background",value:t}}}function mCe(){return n=>({path:"background.color",value:n})}function gCe(){return n=>{const t=[];return t.push(["background-color",n.color]),t}}function w8(n){n.setNormalizer("border",pCe()),n.setNormalizer("border-top",Pb("top")),n.setNormalizer("border-right",Pb("right")),n.setNormalizer("border-bottom",Pb("bottom")),n.setNormalizer("border-left",Pb("left")),n.setNormalizer("border-color",Qk("color")),n.setNormalizer("border-width",Qk("width")),n.setNormalizer("border-style",Qk("style")),n.setNormalizer("border-top-color",Ao("color","top")),n.setNormalizer("border-top-style",Ao("style","top")),n.setNormalizer("border-top-width",Ao("width","top")),n.setNormalizer("border-right-color",Ao("color","right")),n.setNormalizer("border-right-style",Ao("style","right")),n.setNormalizer("border-right-width",Ao("width","right")),n.setNormalizer("border-bottom-color",Ao("color","bottom")),n.setNormalizer("border-bottom-style",Ao("style","bottom")),n.setNormalizer("border-bottom-width",Ao("width","bottom")),n.setNormalizer("border-left-color",Ao("color","left")),n.setNormalizer("border-left-style",Ao("style","left")),n.setNormalizer("border-left-width",Ao("width","left")),n.setExtractor("border-top",xb("top")),n.setExtractor("border-right",xb("right")),n.setExtractor("border-bottom",xb("bottom")),n.setExtractor("border-left",xb("left")),n.setExtractor("border-top-color","border.color.top"),n.setExtractor("border-right-color","border.color.right"),n.setExtractor("border-bottom-color","border.color.bottom"),n.setExtractor("border-left-color","border.color.left"),n.setExtractor("border-top-width","border.width.top"),n.setExtractor("border-right-width","border.width.right"),n.setExtractor("border-bottom-width","border.width.bottom"),n.setExtractor("border-left-width","border.width.left"),n.setExtractor("border-top-style","border.style.top"),n.setExtractor("border-right-style","border.style.right"),n.setExtractor("border-bottom-style","border.style.bottom"),n.setExtractor("border-left-style","border.style.left"),n.setReducer("border-color",fp("border-color")),n.setReducer("border-style",fp("border-style")),n.setReducer("border-width",fp("border-width")),n.setReducer("border-top",Ob("top")),n.setReducer("border-right",Ob("right")),n.setReducer("border-bottom",Ob("bottom")),n.setReducer("border-left",Ob("left")),n.setReducer("border",bCe()),n.setStyleRelation("border",["border-color","border-style","border-width","border-top","border-right","border-bottom","border-left","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width"]),n.setStyleRelation("border-color",["border-top-color","border-right-color","border-bottom-color","border-left-color"]),n.setStyleRelation("border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]),n.setStyleRelation("border-width",["border-top-width","border-right-width","border-bottom-width","border-left-width"]),n.setStyleRelation("border-top",["border-top-color","border-top-style","border-top-width"]),n.setStyleRelation("border-right",["border-right-color","border-right-style","border-right-width"]),n.setStyleRelation("border-bottom",["border-bottom-color","border-bottom-style","border-bottom-width"]),n.setStyleRelation("border-left",["border-left-color","border-left-style","border-left-width"])}function pCe(){return n=>{const{color:t,style:e,width:i}=y8(n);return{path:"border",value:{color:dp(t),style:dp(e),width:dp(i)}}}}function Pb(n){return t=>{const{color:e,style:i,width:r}=y8(t),s={};return e!==void 0&&(s.color={[n]:e}),i!==void 0&&(s.style={[n]:i}),r!==void 0&&(s.width={[n]:r}),{path:"border",value:s}}}function Qk(n){return t=>({path:"border",value:vCe(t,n)})}function vCe(n,t){return{[t]:dp(n)}}function Ao(n,t){return e=>({path:"border",value:{[n]:{[t]:e}}})}function xb(n){return(t,e)=>{if(e.border)return Ng(e.border,n)}}function Ng(n,t){const e={};return n.width&&n.width[t]&&(e.width=n.width[t]),n.style&&n.style[t]&&(e.style=n.style[t]),n.color&&n.color[t]&&(e.color=n.color[t]),e}function y8(n){const t={},e=oP(n);for(const i of e)sP(i)||/thin|medium|thick/.test(i)?t.width=i:eCe(i)?t.style=i:t.color=i;return t}function bCe(){return t=>{const e=Ng(t,"top"),i=Ng(t,"right"),r=Ng(t,"bottom"),s=Ng(t,"left"),o=[e,i,r,s],a={width:n(o,"width"),style:n(o,"style"),color:n(o,"color")},l=jf(a,"all");return l.length?l:[...Object.entries(a).reduce((u,[d,f])=>(f&&(u.push([`border-${d}`,f]),o.forEach(h=>delete h[d])),u),[]),...jf(e,"top"),...jf(i,"right"),...jf(r,"bottom"),...jf(s,"left")]};function n(t,e){return t.map(i=>i[e]).reduce((i,r)=>i==r?i:null)}}function Ob(n){return t=>jf(t,n)}function jf(n,t){const e=[];if(n&&n.width&&e.push("width"),n&&n.style&&e.push("style"),n&&n.color&&e.push("color"),e.length==3){const i=e.map(r=>n[r]).join(" ");return[t=="all"?["border",i]:[`border-${t}`,i]]}return t=="all"?[]:e.map(i=>[`border-${t}-${i}`,n[i]])}function wCe(n){n.setNormalizer("margin",v8("margin")),n.setNormalizer("margin-top",t=>({path:"margin.top",value:t})),n.setNormalizer("margin-right",t=>({path:"margin.right",value:t})),n.setNormalizer("margin-bottom",t=>({path:"margin.bottom",value:t})),n.setNormalizer("margin-left",t=>({path:"margin.left",value:t})),n.setReducer("margin",fp("margin")),n.setStyleRelation("margin",["margin-top","margin-right","margin-bottom","margin-left"])}function yCe(n){n.setNormalizer("padding",v8("padding")),n.setNormalizer("padding-top",t=>({path:"padding.top",value:t})),n.setNormalizer("padding-right",t=>({path:"padding.right",value:t})),n.setNormalizer("padding-bottom",t=>({path:"padding.bottom",value:t})),n.setNormalizer("padding-left",t=>({path:"padding.left",value:t})),n.setReducer("padding",fp("padding")),n.setStyleRelation("padding",["padding-top","padding-right","padding-bottom","padding-left"])}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class _8{constructor(t){y(this,"crashes",[]);y(this,"state","initializing");y(this,"_crashNumberLimit");y(this,"_now",Date.now);y(this,"_minimumNonErrorTimePeriod");y(this,"_boundErrorHandler");y(this,"_listeners");if(this.crashes=[],this._crashNumberLimit=typeof t.crashNumberLimit=="number"?t.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof t.minimumNonErrorTimePeriod=="number"?t.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=e=>{const i="error"in e?e.error:e.reason;i instanceof Error&&this._handleError(i,e)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(t,e){this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e)}off(t,e){this._listeners[t]=this._listeners[t].filter(i=>i!==e)}_fire(t,...e){const i=this._listeners[t]||[];for(const r of i)r.apply(this,[null,...e])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(t,e){if(this._shouldReactToError(t)){this.crashes.push({message:t.message,stack:t.stack,filename:e instanceof ErrorEvent?e.filename:void 0,lineno:e instanceof ErrorEvent?e.lineno:void 0,colno:e instanceof ErrorEvent?e.colno:void 0,date:this._now()});const i=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:t,causesRestart:i}),i?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(t){return t.is&&t.is("CKEditorError")&&t.context!==void 0&&t.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(t)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;const t=this.crashes[this.crashes.length-1].date,e=this.crashes[this.crashes.length-1-this._crashNumberLimit].date;return(t-e)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function LT(n,t=new Set){const e=[n],i=new Set;let r=0;for(;e.length>r;){const s=e[r++];if(!(i.has(s)||!_Ce(s)||t.has(s)))if(i.add(s),Symbol.iterator in s)try{for(const o of s)e.push(o)}catch{}else for(const o in s)o!=="defaultValue"&&e.push(s[o])}return i}function _Ce(n){const t=Object.prototype.toString.call(n),e=typeof n;return!(e==="number"||e==="boolean"||e==="string"||e==="symbol"||e==="function"||t==="[object Date]"||t==="[object RegExp]"||t==="[object Module]"||n===void 0||n===null||n._watchdogExcluded||n instanceof EventTarget||n instanceof Event)}function k8(n,t,e=new Set){if(n===t&&kCe(n))return!0;const i=LT(n,e),r=LT(t,e);for(const s of i)if(r.has(s))return!0;return!1}function kCe(n){return typeof n=="object"&&n!==null}class E8 extends _8{constructor(e,i={}){super(i);y(this,"_editor",null);y(this,"_lifecyclePromise",null);y(this,"_throttledSave");y(this,"_data");y(this,"_lastDocumentVersion");y(this,"_elementOrData");y(this,"_initUsingData",!0);y(this,"_editables",{});y(this,"_config");y(this,"_excludedProps");this._throttledSave=tm(this._save.bind(this),typeof i.saveInterval=="number"?i.saveInterval:5e3),e&&(this._creator=(r,s)=>e.create(r,s)),this._destructor=r=>r.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(e=>{console.error("An error happened during the editor destroying.",e)}).then(()=>{const e={},i=[],r=this._config.rootsAttributes||{},s={};for(const[a,l]of Object.entries(this._data.roots))l.isLoaded?(e[a]="",s[a]=r[a]||{}):i.push(a);const o={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:i,rootsAttributes:s,_watchdogInitialData:this._data};return delete o.initialData,o.extraPlugins.push(ECe),this._initUsingData?this.create(e,o,o.context):vu(this._elementOrData)?this.create(this._elementOrData,o,o.context):this.create(this._editables,o,o.context)}).then(()=>{this._fire("restart")})}create(e=this._elementOrData,i=this._config,r){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=e,this._initUsingData=typeof e=="string"||Object.keys(e).length>0&&typeof Object.values(e)[0]=="string",this._config=this._cloneEditorConfiguration(i)||{},this._config.context=r,this._creator(e,this._config))).then(s=>{this._editor=s,s.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=s.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const e=this._editor;return this._editor=null,e.model.document.off("change:data",this._throttledSave),this._destructor(e)})}_save(){const e=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=e}catch(i){console.error(i,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(e){this._excludedProps=e}_getData(){const e=this._editor,i=e.model.document.roots.filter(l=>l.isAttached()&&l.rootName!="$graveyard"),{plugins:r}=e,s=r.has("CommentsRepository")&&r.get("CommentsRepository"),o=r.has("TrackChanges")&&r.get("TrackChanges"),a={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};i.forEach(l=>{a.roots[l.rootName]={content:JSON.stringify(Array.from(l.getChildren())),attributes:JSON.stringify(Array.from(l.getAttributes())),isLoaded:l._isLoaded}});for(const l of e.model.markers)l._affectsData&&(a.markers[l.name]={rangeJSON:l.getRange().toJSON(),usingOperation:l._managedUsingOperations,affectsData:l._affectsData});return s&&(a.commentThreads=JSON.stringify(s.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),o&&(a.suggestions=JSON.stringify(o.getSuggestions({toJSON:!0,skipNotAttached:!0}))),a}_getEditables(){const e={};for(const i of this.editor.model.document.getRootNames()){const r=this.editor.ui.getEditableElement(i);r&&(e[i]=r)}return e}_isErrorComingFromThisItem(e){return k8(this._editor,e.context,this._excludedProps)}_cloneEditorConfiguration(e){return T0(e,(i,r)=>{if(vu(i)||r==="context")return i})}}class ECe{constructor(t){y(this,"editor");y(this,"_data");this.editor=t,this._data=t.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",t=>{t.stop(),this.editor.model.enqueueChange({isUndoable:!1},e=>{this._restoreCollaborationData(),this._restoreEditorData(e)}),this.editor.data.fire("ready")},{priority:999})}_createNode(t,e){if("name"in e){const i=t.createElement(e.name,e.attributes);if(e.children)for(const r of e.children)i._appendChild(this._createNode(t,r));return i}else return t.createText(e.data,e.attributes)}_restoreEditorData(t){const e=this.editor;Object.entries(this._data.roots).forEach(([i,{content:r,attributes:s}])=>{const o=JSON.parse(r),a=JSON.parse(s),l=e.model.document.getRoot(i);for(const[c,u]of a)t.setAttribute(c,u,l);for(const c of o){const u=this._createNode(t,c);t.insert(u,l,"end")}}),Object.entries(this._data.markers).forEach(([i,r])=>{const{document:s}=e.model,{rangeJSON:{start:o,end:a},...l}=r,c=s.getRoot(o.root),u=t.createPositionFromPath(c,o.path,o.stickiness),d=t.createPositionFromPath(c,a.path,a.stickiness),f=t.createRange(u,d);t.addMarker(i,{range:f,...l})})}_restoreCollaborationData(){const t=JSON.parse(this._data.commentThreads),e=JSON.parse(this._data.suggestions);t.forEach(i=>{const r=this.editor.config.get("collaboration.channelId"),s=this.editor.plugins.get("CommentsRepository");s.hasCommentThread(i.threadId)&&s.getCommentThread(i.threadId).remove(),s.addCommentThread({channelId:r,...i})}),e.forEach(i=>{const r=this.editor.plugins.get("TrackChangesEditing");if(r.hasSuggestion(i.id)){const s=r.getSuggestion(i.id);s.attributes=i.attributes}else r.addSuggestionData(i)})}}const hp=Symbol("MainQueueId");class CCe extends _8{constructor(e,i={}){super(i);y(this,"_watchdogs",new Map);y(this,"_watchdogConfig");y(this,"_context",null);y(this,"_contextProps",new Set);y(this,"_actionQueues",new TCe);y(this,"_contextConfig");y(this,"_item");this._watchdogConfig=i,this._creator=r=>e.create(r),this._destructor=r=>r.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}get context(){return this._context}create(e={}){return this._actionQueues.enqueue(hp,()=>(this._contextConfig=e,this._create()))}getItem(e){return this._getWatchdog(e)._item}getItemState(e){return this._getWatchdog(e).state}add(e){const i=rN(e);return Promise.all(i.map(r=>this._actionQueues.enqueue(r.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let s;if(this._watchdogs.has(r.id))throw new Error(`Item with the given id is already added: '${r.id}'.`);if(r.type==="editor")return s=new E8(null,this._watchdogConfig),s.setCreator(r.creator),s._setExcludedProperties(this._contextProps),r.destructor&&s.setDestructor(r.destructor),this._watchdogs.set(r.id,s),s.on("error",(o,{error:a,causesRestart:l})=>{this._fire("itemError",{itemId:r.id,error:a}),l&&this._actionQueues.enqueue(r.id,()=>new Promise(c=>{const u=()=>{s.off("restart",u),this._fire("itemRestart",{itemId:r.id}),c()};s.on("restart",u)}))}),s.create(r.sourceElementOrData,r.config,this._context);throw new Error(`Not supported item type: '${r.type}'.`)})))}remove(e){const i=rN(e);return Promise.all(i.map(r=>this._actionQueues.enqueue(r,()=>{const s=this._getWatchdog(r);return this._watchdogs.delete(r),s.destroy()})))}destroy(){return this._actionQueues.enqueue(hp,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(hp,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(e=>{console.error("An error happened during destroying the context or items.",e)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(e=>(this._context=e,this._contextProps=LT(this._context),Promise.all(Array.from(this._watchdogs.values()).map(i=>(i._setExcludedProperties(this._contextProps),i.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const e=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(i=>i.destroy())).then(()=>this._destructor(e))})}_getWatchdog(e){const i=this._watchdogs.get(e);if(!i)throw new Error(`Item with the given id was not registered: ${e}.`);return i}_isErrorComingFromThisItem(e){for(const i of this._watchdogs.values())if(i._isErrorComingFromThisItem(e))return!1;return k8(this._context,e.context)}}class TCe{constructor(){y(this,"_onEmptyCallbacks",[]);y(this,"_queues",new Map);y(this,"_activeActions",0)}onEmpty(t){this._onEmptyCallbacks.push(t)}enqueue(t,e){const i=t===hp;this._activeActions++,this._queues.get(t)||this._queues.set(t,Promise.resolve());const s=(i?Promise.all(this._queues.values()):Promise.all([this._queues.get(hp),this._queues.get(t)])).then(e),o=s.catch(()=>{});return this._queues.set(t,o),s.finally(()=>{this._activeActions--,this._queues.get(t)===o&&this._activeActions===0&&this._onEmptyCallbacks.forEach(a=>a())})}}function rN(n){return Array.isArray(n)?n:[n]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Ne extends Wn(){constructor(e){super();y(this,"editor");y(this,"_disableStack",new Set);this.editor=e,this.set("isEnabled",!0)}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",sN,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",sN),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}function sN(n){n.return=!1,n.stop()}class Nt extends Wn(){constructor(e){super();y(this,"editor");y(this,"_isEnabledBasedOnSelection");y(this,"_affectsData");y(this,"_disableStack");this.editor=e,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(e,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",i=>{if(!this.affectsData)return;const r=e.model.document.selection,o=!(r.getFirstPosition().root.rootName=="$graveyard")&&e.model.canEditAt(r);(e.isReadOnly||this._isEnabledBasedOnSelection&&!o)&&(i.return=!1,i.stop())},{priority:"highest"}),this.on("execute",i=>{this.isEnabled||i.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(e){this._affectsData=e}refresh(){this.isEnabled=!0}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",oN,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",oN),this.refresh())}execute(...e){}destroy(){this.stopListening()}}function oN(n){n.return=!1,n.stop()}class aN extends Nt{constructor(){super(...arguments);y(this,"_childCommandsDefinitions",[])}refresh(){}execute(...e){const i=this._getFirstEnabledCommand();return!!i&&i.execute(e)}registerChildCommand(e,i={}){iz(this._childCommandsDefinitions,{command:e,priority:i.priority||"normal"}),e.on("change:isEnabled",()=>this._checkEnabled()),this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){const e=this._childCommandsDefinitions.find(({command:i})=>i.isEnabled);return e&&e.command}}class C8 extends ri(){constructor(e,i=[],r=[]){super();y(this,"_context");y(this,"_plugins",new Map);y(this,"_availablePlugins");y(this,"_contextPlugins");this._context=e,this._availablePlugins=new Map;for(const s of i)s.pluginName&&this._availablePlugins.set(s.pluginName,s);this._contextPlugins=new Map;for(const[s,o]of r)this._contextPlugins.set(s,o),this._contextPlugins.set(o,s),s.pluginName&&this._availablePlugins.set(s.pluginName,s)}*[Symbol.iterator](){for(const e of this._plugins)typeof e[0]=="function"&&(yield e)}get(e){const i=this._plugins.get(e);if(!i){let r=e;throw typeof e=="function"&&(r=e.pluginName||e.name),new we("plugincollection-plugin-not-loaded",this._context,{plugin:r})}return i}has(e){return this._plugins.has(e)}init(e,i=[],r=[]){const s=this,o=this._context;g(e),_(e);const a=e.filter(p=>!f(p,i)),l=[...v(a)];x(l,r);const c=E(l);return A(c,"init").then(()=>A(c,"afterInit")).then(()=>c);function u(p){return typeof p=="function"}function d(p){return u(p)&&!!p.isContextPlugin}function f(p,D){return D.some(R=>R===p||h(p)===R||h(R)===p)}function h(p){return u(p)?p.pluginName||p.name:p}function g(p,D=new Set){p.forEach(R=>{u(R)&&(D.has(R)||(D.add(R),R.pluginName&&!s._availablePlugins.has(R.pluginName)&&s._availablePlugins.set(R.pluginName,R),R.requires&&g(R.requires,D)))})}function v(p,D=new Set){return p.map(R=>u(R)?R:s._availablePlugins.get(R)).reduce((R,S)=>D.has(S)?R:(D.add(S),S.requires&&(_(S.requires,S),v(S.requires,D).forEach(I=>R.add(I))),R.add(S)),new Set)}function _(p,D=null){p.map(R=>u(R)?R:s._availablePlugins.get(R)||R).forEach(R=>{w(R,D),C(R,D),k(R,D)})}function w(p,D){if(!u(p))throw D?new we("plugincollection-soft-required",o,{missingPlugin:p,requiredBy:h(D)}):new we("plugincollection-plugin-not-found",o,{plugin:p})}function C(p,D){if(d(D)&&!d(p))throw new we("plugincollection-context-required",o,{plugin:h(p),requiredBy:h(D)})}function k(p,D){if(D&&f(p,i))throw new we("plugincollection-required",o,{plugin:h(p),requiredBy:h(D)})}function E(p){return p.map(D=>{let R=s._contextPlugins.get(D);return R=R||new D(o),s._add(D,R),R})}function A(p,D){return p.reduce((R,S)=>!S[D]||s._contextPlugins.has(S)?R:R.then(S[D].bind(S)),Promise.resolve())}function x(p,D){for(const R of D){if(typeof R!="function")throw new we("plugincollection-replace-plugin-invalid-type",null,{pluginItem:R});const S=R.pluginName;if(!S)throw new we("plugincollection-replace-plugin-missing-name",null,{pluginItem:R});if(R.requires&&R.requires.length)throw new we("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:S});const I=s._availablePlugins.get(S);if(!I)throw new we("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:S});const F=p.indexOf(I);if(F===-1){if(s._contextPlugins.has(I))return;throw new we("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:S})}if(I.requires&&I.requires.length)throw new we("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:S});p.splice(F,1,R),s._availablePlugins.set(S,R)}}}destroy(){const e=[];for(const[,i]of this)typeof i.destroy=="function"&&!this._contextPlugins.has(i)&&e.push(i.destroy());return Promise.all(e)}_add(e,i){this._plugins.set(e,i);const r=e.pluginName;if(r){if(this._plugins.has(r))throw new we("plugincollection-plugin-name-conflict",null,{pluginName:r,plugin1:this._plugins.get(r).constructor,plugin2:e});this._plugins.set(r,i)}}}class $y{constructor(t){y(this,"config");y(this,"plugins");y(this,"locale");y(this,"t");y(this,"editors");y(this,"_contextOwner",null);const{translations:e,...i}=t||{};this.config=new fz(i,this.constructor.defaultConfig);const r=this.constructor.builtinPlugins;this.config.define("plugins",r),this.plugins=new C8(this,r);const s=this.config.get("language")||{};this.locale=new n0e({uiLanguage:typeof s=="string"?s:s.ui,contentLanguage:this.config.get("language.content"),translations:e}),this.t=this.locale.t,this.editors=new cr}initPlugins(){const t=this.config.get("plugins")||[],e=this.config.get("substitutePlugins")||[];for(const i of t.concat(e)){if(typeof i!="function")throw new we("context-initplugins-constructor-only",null,{Plugin:i});if(i.isContextPlugin!==!0)throw new we("context-initplugins-invalid-plugin",null,{Plugin:i})}return this.plugins.init(t,[],e)}destroy(){return Promise.all(Array.from(this.editors,t=>t.destroy())).then(()=>this.plugins.destroy())}_addEditor(t,e){if(this._contextOwner)throw new we("context-addeditor-private-context");this.editors.add(t),e&&(this._contextOwner=t)}_removeEditor(t){return this.editors.has(t)&&this.editors.remove(t),this._contextOwner===t?this.destroy():Promise.resolve()}_getEditorConfig(){const t={};for(const e of this.config.names())["plugins","removePlugins","extraPlugins"].includes(e)||(t[e]=this.config.get(e));return t}static create(t){return new Promise(e=>{const i=new this(t);e(i.initPlugins().then(()=>i))})}}y($y,"defaultConfig"),y($y,"builtinPlugins");class N0 extends Wn(){constructor(e){super();y(this,"context");this.context=e}destroy(){this.stopListening()}static get isContextPlugin(){return!0}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}class SCe{constructor(){y(this,"_commands");this._commands=new Map}add(t,e){this._commands.set(t,e)}get(t){return this._commands.get(t)}execute(t,...e){const i=this.get(t);if(!i)throw new we("commandcollection-command-not-found",this,{commandName:t});return i.execute(...e)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const t of this.commands())t.destroy()}}class ACe extends oi{constructor(e){super();y(this,"editor");this.editor=e}set(e,i,r={}){if(typeof i=="string"){const s=i;i=(o,a)=>{this.editor.execute(s),a()}}super.set(e,i,r)}}const Zk="contentEditing",lN="common";class ICe{constructor(t){y(this,"keystrokeInfos",new Map);y(this,"_editor");this._editor=t;const e=t.config.get("menuBar.isVisible"),i=t.locale.t;this.addKeystrokeInfoCategory({id:Zk,label:i("Content editing keystrokes"),description:i("These keyboard shortcuts allow for quick access to content editing features.")});const r=[{label:i("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:i("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:i("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:i("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:i("Navigate through the toolbar or menu bar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:i("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."),keystroke:[["Enter"],["Space"]]}];e&&r.push({label:i("Move focus to the menu bar, navigate between menu bars"),keystroke:"Alt+F9",mayRequireFn:!0}),this.addKeystrokeInfoCategory({id:"navigation",label:i("User interface and content navigation keystrokes"),description:i("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:r}]})}addKeystrokeInfoCategory({id:t,label:e,description:i,groups:r}){this.keystrokeInfos.set(t,{id:t,label:e,description:i,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:t,id:lN}),r&&r.forEach(s=>{this.addKeystrokeInfoGroup({categoryId:t,...s})})}addKeystrokeInfoGroup({categoryId:t=Zk,id:e,label:i,keystrokes:r}){const s=this.keystrokeInfos.get(t);if(!s)throw new we("accessibility-unknown-keystroke-info-category",this._editor,{groupId:e,categoryId:t});s.groups.set(e,{id:e,label:i,keystrokes:r||[]})}addKeystrokeInfos({categoryId:t=Zk,groupId:e=lN,keystrokes:i}){if(!this.keystrokeInfos.has(t))throw new we("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:t,keystrokes:i});const r=this.keystrokeInfos.get(t);if(!r.groups.has(e))throw new we("accessibility-unknown-keystroke-info-group",this._editor,{groupId:e,categoryId:t,keystrokes:i});r.groups.get(e).keystrokes.push(...i)}}function PCe(n){return{sessionId:DCe(),pageSessionId:NCe(),hostname:window.location.hostname,version:globalThis.CKEDITOR_VERSION,type:xCe(n),plugins:OCe(n.plugins),distribution:RCe(),env:VCe(),integration:Object.create(null),menuBar:{isVisible:!!n.config.get("menuBar.isVisible")},language:{ui:n.locale.uiLanguage,content:n.locale.contentLanguage},toolbar:{main:Jk(n.config.get("toolbar")),block:Jk(n.config.get("blockToolbar")),balloon:Jk(n.config.get("balloonToolbar"))}}}function xCe(n){return Object.getPrototypeOf(n).constructor.editorName}function OCe(n){return Array.from(n).filter(([t])=>!!t.pluginName).map(([t])=>{const{pluginName:e,isContextPlugin:i,isOfficialPlugin:r,isPremiumPlugin:s}=t;return{isContext:!!i,isOfficial:!!r,isPremium:!!s,name:e}})}function Jk(n){if(!n)return;const t=Array.isArray(n)?{items:n}:n,e=s(t.items||[]);return{isMultiline:e.includes("-"),shouldNotGroupWhenFull:!!t.shouldNotGroupWhenFull,items:r(e)};function r(o){return o.filter(a=>a!=="|"&&a!=="-")}function s(o){return o.flatMap(a=>typeof a=="string"?[a]:s(a.items))}}function RCe(){return{channel:window[Symbol.for("cke distribution")]||"sh"}}function VCe(){let n="unknown",t="unknown";return Vt.isMac?n="mac":Vt.isWindows?n="windows":Vt.isiOS?n="ios":Vt.isAndroid&&(n="android"),Vt.isGecko?t="gecko":Vt.isBlink?t="blink":Vt.isSafari&&(t="safari"),{os:n,browser:t}}function DCe(){return localStorage.getItem("__ckeditor-session-id")||localStorage.setItem("__ckeditor-session-id",cs()),localStorage.getItem("__ckeditor-session-id")}function NCe(){return at.window.CKEDITOR_PAGE_SESSION_ID=at.window.CKEDITOR_PAGE_SESSION_ID||cs(),at.window.CKEDITOR_PAGE_SESSION_ID}class qf extends Wn(){constructor(e={}){super();y(this,"accessibility");y(this,"commands");y(this,"config");y(this,"conversion");y(this,"data");y(this,"editing");y(this,"locale");y(this,"model");y(this,"plugins");y(this,"keystrokes");y(this,"t");y(this,"_context");y(this,"_readOnlyLocks");if("sanitizeHtml"in e)throw new we("editor-config-sanitizehtml-not-supported");const i=this.constructor,{translations:r,...s}=i.defaultConfig||{},{translations:o=r,...a}=e,l=e.language||s.language;this._context=e.context||new $y({language:l,translations:o}),this._context._addEditor(this,!e.context);const c=Array.from(i.builtinPlugins||[]);this.config=new fz(a,s),this.config.define("plugins",c),this.config.define(this._context._getEditorConfig()),d(this.config),this.plugins=new C8(this,c,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new SCe,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new HEe,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});const u=new I0e;this.data=new Gke(this.model,u),this.editing=new Tke(this.model,u),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new Yke([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new ACe(this),this.keystrokes.listenTo(this.editing.view.document),this.accessibility=new ICe(this),f(this);function d(h){let g=h.get("licenseKey");if(!g&&window.CKEDITOR_GLOBAL_LICENSE_KEY&&(g=window.CKEDITOR_GLOBAL_LICENSE_KEY,h.set("licenseKey",g)),!g)throw new we("license-key-missing")}function f(h){const g=h.config.get("licenseKey"),v=window[Symbol.for("cke distribution")]||"sh";function _(S){h.enableReadOnlyMode(Symbol("invalidLicense")),h._showLicenseError(S)}function w(S){const I=S.split(".");return I.length!=3?null:I[1]}function C(S){return["exp","jti","vc"].every(F=>F in S)}function k(S){return Object.getOwnPropertyNames(S).sort().filter(H=>H!="vc"&&S[H]!=null).map(H=>S[H])}function E(S){const{hostname:I}=new URL(window.location.href);if(S.includes(I))return!0;const F=I.split(".");return S.filter(H=>H.includes("*")).map(H=>H.split(".")).filter(H=>H.length<=F.length).map(H=>Array(F.length-H.length).fill(H[0]==="*"?"*":"").concat(H)).some(H=>F.every((q,N)=>H[N]===q||H[N]==="*"))}function A(S){const I=S[0].toUpperCase()+S.slice(1),F=S==="evaluation"?"an":"a";console.info(`%cCKEditor 5 ${I} License`,"color: #ffffff; background: #743CCD; font-size: 14px; padding: 4px 8px; border-radius: 4px;"),console.warn(`⚠️ You are using ${F} ${S} license of CKEditor 5${S==="trial"?" which is for evaluation purposes only":""}. For production usage, please obtain a production license at https://portal.ckeditor.com/`)}if(g=="GPL"){v=="cloud"&&_("distributionChannel");return}const x=w(g);if(!x){_("invalid");return}const p=jI(x);if(!p){_("invalid");return}if(!C(p)){_("invalid");return}if(p.distributionChannel&&!jn(p.distributionChannel).includes(v)){_("distributionChannel");return}if(a0e(k(p))!=p.vc.toLowerCase()){_("invalid");return}if(new Date(p.exp*1e3)<w_e){_("expired");return}const R=p.licensedHosts;if(R&&R.length>0&&!E(R)){_("domainLimit");return}if(["evaluation","trial"].includes(p.licenseType)&&p.exp*1e3<Date.now()){_("expired");return}if(["development","evaluation","trial"].includes(p.licenseType)){const{licenseType:S}=p;window.CKEDITOR_WARNING_SUPPRESSIONS=window.CKEDITOR_WARNING_SUPPRESSIONS||{},window.CKEDITOR_WARNING_SUPPRESSIONS[S]||(A(S),window.CKEDITOR_WARNING_SUPPRESSIONS[S]=!0)}if(["evaluation","trial"].includes(p.licenseType)){const S=p.licenseType,I=setTimeout(()=>{_(`${S}Limit`)},6e5);h.on("destroy",()=>{clearTimeout(I)})}p.usageEndpoint&&h.once("ready",()=>{const S={requestId:cs(),requestTime:Math.round(Date.now()/1e3),license:g,editor:LCe(h)};h._sendUsageRequest(p.usageEndpoint,S).then(I=>{const{status:F,message:H}=I;H&&console.warn(H),F!="ok"&&_("usageLimit")},()=>{p_e("license-key-validation-endpoint-not-reachable",{url:p.usageEndpoint})})},{priority:"high"})}}static get editorName(){return"Editor"}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(e){throw new we("editor-isreadonly-has-no-setter")}enableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new we("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)||(this._readOnlyLocks.add(e),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new we("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)&&(this._readOnlyLocks.delete(e),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}setData(e){this.data.set(e)}getData(e){return this.data.get(e)}initPlugins(){const e=this.config,i=e.get("plugins"),r=e.get("removePlugins")||[],s=e.get("extraPlugins")||[],o=e.get("substitutePlugins")||[];return this.plugins.init(i.concat(s),r,o)}destroy(){let e=Promise.resolve();return this.state=="initializing"&&(e=new Promise(i=>this.once("ready",i))),e.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(e,...i){try{return this.commands.execute(e,...i)}catch(r){/* istanbul ignore next -- @preserve */we.rethrowUnexpectedError(r,this)}}focus(){this.editing.view.focus()}static create(...e){throw new Error("This is an abstract method.")}_showLicenseError(e,i){setTimeout(()=>{if(e=="invalid")throw new we("invalid-license-key");if(e=="expired")throw new we("license-key-expired");if(e=="domainLimit")throw new we("license-key-domain-limit");if(e=="featureNotAllowed")throw new we("license-key-plugin-not-allowed",null,{pluginName:i});if(e=="evaluationLimit")throw new we("license-key-evaluation-limit");if(e=="trialLimit")throw new we("license-key-trial-limit");if(e=="developmentLimit")throw new we("license-key-development-limit");if(e=="usageLimit")throw new we("license-key-usage-limit");if(e=="distributionChannel")throw new we("license-key-invalid-distribution-channel")},0),this._showLicenseError=()=>{}}async _sendUsageRequest(e,i){const r=new Headers({"Content-Type":"application/json"}),s=await fetch(new URL(e),{method:"POST",headers:r,body:JSON.stringify(i)});if(!s.ok)throw new Error(`HTTP Response: ${s.status}`);return s.json()}}y(qf,"defaultConfig"),y(qf,"builtinPlugins"),y(qf,"Context",$y),y(qf,"EditorWatchdog",E8),y(qf,"ContextWatchdog",CCe);function LCe(n){const t=PCe(n);function e(i,r){if(pu(t,i)!==void 0)throw new we("editor-usage-data-path-already-set",{path:i});Q6(t,i,r)}return n.fire("collectUsageData",{setUsageData:e}),t}function MCe(n){if(!xy(n.updateSourceElement))throw new we("attachtoform-missing-elementapi-interface",n);const t=n.sourceElement;if($Ce(t)&&t.form){let e;const i=t.form,r=()=>n.updateSourceElement();xy(i.submit)&&(e=i.submit,i.submit=()=>{r(),e.apply(i)}),i.addEventListener("submit",r),n.on("destroy",()=>{i.removeEventListener("submit",r),e&&(i.submit=e)})}}function $Ce(n){return!!n&&n.tagName.toLowerCase()==="textarea"}function MT(n){class t extends n{constructor(){super(...arguments);y(this,"sourceElement")}updateSourceElement(r){if(!this.sourceElement)throw new we("editor-missing-sourceelement",this);const s=this.config.get("updateSourceElementOnDestroy"),o=this.sourceElement instanceof HTMLTextAreaElement;if(!s&&!o){dD(this.sourceElement,"");return}const a=typeof r=="string"?r:this.data.get();dD(this.sourceElement,a)}}return t}MT.updateSourceElement=MT(Object).prototype.updateSourceElement;class nm extends N0{constructor(){super(...arguments);y(this,"_actions")}static get pluginName(){return"PendingActions"}static get isOfficialPlugin(){return!0}init(){this.set("hasAny",!1),this._actions=new cr({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(e){if(typeof e!="string")throw new we("pendingactions-add-invalid-message",this);const i=new(Wn());return i.set("message",e),this._actions.add(i),this.hasAny=!0,i}remove(e){this._actions.remove(e),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let BCe=class extends Wn(){constructor(){super();y(this,"total");y(this,"_reader");y(this,"_data");const e=new window.FileReader;this._reader=e,this._data=void 0,this.set("loaded",0),e.onprogress=i=>{this.loaded=i.loaded}}get error(){return this._reader.error}get data(){return this._data}read(e){const i=this._reader;return this.total=e.size,new Promise((r,s)=>{i.onload=()=>{const o=i.result;this._data=o,r(o)},i.onerror=()=>{s("error")},i.onabort=()=>{s("aborted")},this._reader.readAsDataURL(e)})}abort(){this._reader.abort()}};class dh extends Ne{constructor(){super(...arguments);y(this,"loaders",new cr);y(this,"_loadersMap",new Map);y(this,"_pendingAction",null)}static get pluginName(){return"FileRepository"}static get isOfficialPlugin(){return!0}static get requires(){return[nm]}init(){this.loaders.on("change",()=>this._updatePendingAction()),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(e,i)=>i?e/i*100:0)}getLoader(e){return this._loadersMap.get(e)||null}createLoader(e){if(!this.createUploadAdapter)return mn("filerepository-no-upload-adapter"),null;const i=new cN(Promise.resolve(e),this.createUploadAdapter);return this.loaders.add(i),this._loadersMap.set(e,i),e instanceof Promise&&i.file.then(r=>{this._loadersMap.set(r,i)}).catch(()=>{}),i.on("change:uploaded",()=>{let r=0;for(const s of this.loaders)r+=s.uploaded;this.uploaded=r}),i.on("change:uploadTotal",()=>{let r=0;for(const s of this.loaders)s.uploadTotal&&(r+=s.uploadTotal);this.uploadTotal=r}),i}destroyLoader(e){const i=e instanceof cN?e:this.getLoader(e);i._destroy(),this.loaders.remove(i),this._loadersMap.forEach((r,s)=>{r===i&&this._loadersMap.delete(s)})}_updatePendingAction(){const e=this.editor.plugins.get(nm);if(this.loaders.length){if(!this._pendingAction){const i=this.editor.t,r=s=>`${i("Upload in progress")} ${parseInt(s)}%.`;this._pendingAction=e.add(r(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",r)}}else e.remove(this._pendingAction),this._pendingAction=null}}class cN extends Wn(){constructor(e,i){super();y(this,"id");y(this,"_filePromiseWrapper");y(this,"_adapter");y(this,"_reader");this.id=cs(),this._filePromiseWrapper=this._createFilePromiseWrapper(e),this._adapter=i(this),this._reader=new BCe,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(r,s)=>s?r/s*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(e=>this._filePromiseWrapper?e:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if(this.status!="idle")throw new we("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(e=>this._reader.read(e)).then(e=>{if(this.status!=="reading")throw this.status;return this.status="idle",e}).catch(e=>{throw e==="aborted"?(this.status="aborted","aborted"):(this.status="error",this._reader.error?this._reader.error:e)})}upload(){if(this.status!="idle")throw new we("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(e=>(this.uploadResponse=e,this.status="idle",e)).catch(e=>{throw this.status==="aborted"?"aborted":(this.status="error",e)})}abort(){const e=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?e=="reading"?this._reader.abort():e=="uploading"&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(e){const i={};return i.promise=new Promise((r,s)=>{i.rejecter=s,i.isFulfilled=!1,e.then(o=>{i.isFulfilled=!0,r(o)}).catch(o=>{i.isFulfilled=!0,s(o)})}),i}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */var uN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.628a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/><path d="M8.5 9.125a.3.3 0 0 0-.253-.296L5.11 8.327a.75.75 0 1 1 .388-1.449l4.04.716c.267.072.624.08.893.009l4.066-.724a.75.75 0 1 1 .388 1.45l-3.132.5a.3.3 0 0 0-.253.296v1.357a.3.3 0 0 0 .018.102l1.615 4.438a.75.75 0 0 1-1.41.513l-1.35-3.71a.3.3 0 0 0-.281-.197h-.209a.3.3 0 0 0-.282.198l-1.35 3.711a.75.75 0 0 1-1.41-.513l1.64-4.509a.3.3 0 0 0 .019-.103V9.125Z"/><path clip-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17Zm0 1.5c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10Z"/></svg>',FCe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',T8='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',S8='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',aP='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',UCe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',A8='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',zCe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',I8='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',HCe='<svg viewBox="0 0 14 16" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M2 14.436V2a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v12.436a.5.5 0 0 1-.819.385l-3.862-3.2a.5.5 0 0 0-.638 0l-3.862 3.2A.5.5 0 0 1 2 14.436Z"/></svg>',WCe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M5.68 3.417a.238.238 0 0 0-.24.236v12.66l3.793-3.102a1.215 1.215 0 0 1 1.534 0l3.793 3.103V3.654a.238.238 0 0 0-.24-.237H5.68ZM4 3.653C4 2.74 4.752 2 5.68 2h8.64c.928 0 1.68.74 1.68 1.653v13.164c0 1-1.185 1.547-1.967.908L10 14.426l-4.033 3.299c-.782.64-1.967.092-1.967-.908V3.653Z"/></svg>',jCe='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M4.4 2.24c-.11 0-.2.092-.2.207v11.077l3.16-2.714a.975.975 0 0 1 1.28 0l3.16 2.714V2.447a.203.203 0 0 0-.2-.207H4.4ZM3 2.447C3 1.647 3.627 1 4.4 1h7.2c.773 0 1.4.648 1.4 1.447v11.518c0 .875-.988 1.354-1.64.794L8 11.873 4.64 14.76c-.652.56-1.64.081-1.64-.794V2.447Z"/></svg>',qCe='<svg viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M4.216 2.031a.503.503 0 0 0-.489.516v9.42l2.648-2.324a.938.938 0 0 1 1.25 0l2.648 2.324v-9.42a.503.503 0 0 0-.489-.516H4.216Zm-1.466.516C2.75 1.693 3.406 1 4.216 1h5.568c.81 0 1.466.693 1.466 1.547v9.42c0 .873-.965 1.351-1.602.793L7 10.436 4.352 12.76c-.637.558-1.602.08-1.602-.793v-9.42Z"/></svg>',lP='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>',L0='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',P8='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',M0='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',dN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.87 12.61a.75.75 0 0 1-.089.976l-.085.07-3.154 2.254 3.412 2.414a.75.75 0 0 1 .237.95l-.057.095a.75.75 0 0 1-.95.237l-.096-.058-4.272-3.022-.003-1.223 4.01-2.867a.75.75 0 0 1 1.047.174zm2.795-.231.095.057 4.011 2.867-.003 1.223-4.272 3.022-.095.058a.75.75 0 0 1-.88-.151l-.07-.086-.058-.095a.75.75 0 0 1 .15-.88l.087-.07 3.412-2.414-3.154-2.253-.085-.071a.75.75 0 0 1 .862-1.207zM16 0a2 2 0 0 1 2 2v9.354l-.663-.492-.837-.001V2a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h3.118L7.156 19H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h14zM5.009 15l.003 1H3v-1h2.009zm2.188-2-1.471 1H5v-1h2.197zM10 11v.095L8.668 12H7v-1h3zm4-2v1H7V9h7zm0-2v1H7V7h7zm-4-2v1H5V5h5zM6 3v1H3V3h3z"/></svg>',GCe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.5 5.7 5.2 3.9v1.3l-5.6 4c-.1.2-.3.2-.5.2-.3-.1-.6-.7-.6-1l.3-.4 4.7-3.5L11.5 7l-.2-.2c-.1-.3-.1-.6 0-.8.2-.2.5-.4.8-.4a.8.8 0 0 1 .4.1zm-5.2 0L2 9.6v1.3l5.6 4c.1.2.3.2.5.2.3-.1.7-.7.6-1 0-.1 0-.3-.2-.4l-5-3.5L8.2 7l.2-.2c.1-.3.1-.6 0-.8-.2-.2-.5-.4-.8-.4a.8.8 0 0 0-.3.1z"/></svg>',KCe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.209 18.717A8.5 8.5 0 1 1 18.686 9.6h-.008l.002.12a3 3 0 0 1-2.866 2.997h-.268l-.046-.002v.002h-4.791a2 2 0 1 0 0 4 1 1 0 1 1-.128 1.992 8.665 8.665 0 0 1-.372.008Zm-3.918-7.01a1.25 1.25 0 1 0-2.415-.648 1.25 1.25 0 0 0 2.415.647ZM5.723 8.18a1.25 1.25 0 1 0 .647-2.414 1.25 1.25 0 0 0-.647 2.414ZM9.76 6.155a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Zm4.028 1.759a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Z"/></svg>',YCe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>',QCe='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>',ZCe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>',$0='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>',JCe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',fN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.87 13.786 1.532-1.286 3.857 4.596a1 1 0 1 1-1.532 1.286l-3.857-4.596z"/><path d="M16.004 8.5a6.5 6.5 0 0 1-9.216 5.905c-1.154-.53-.863-1.415-.663-1.615.194-.194.564-.592 1.635-.141a4.5 4.5 0 0 0 5.89-5.904l-.104-.227 1.332-1.331c.045-.046.196-.041.224.007a6.47 6.47 0 0 1 .902 3.306zm-3.4-5.715c.562.305.742 1.106.354 1.494-.388.388-.995.414-1.476.178a4.5 4.5 0 0 0-6.086 5.882l.114.236-1.348 1.349c-.038.037-.17.022-.198-.023a6.5 6.5 0 0 1 5.54-9.9 6.469 6.469 0 0 1 3.1.784z"/><path d="M4.001 11.93.948 8.877a.2.2 0 0 1 .141-.341h6.106a.2.2 0 0 1 .141.341L4.283 11.93a.2.2 0 0 1-.282 0zm11.083-6.789 3.053 3.053a.2.2 0 0 1-.14.342H11.89a.2.2 0 0 1-.14-.342l3.052-3.053a.2.2 0 0 1 .282 0z"/></svg>',XCe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.5 5.75a.75.75 0 0 1 0-1.5H15a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0V6.81l-2.72 2.72a.75.75 0 0 1-1.06-1.06l2.72-2.72H11.5Z"/><path d="M9.53 10.47a.75.75 0 0 1 0 1.06l-2.72 2.72H8.5a.75.75 0 0 1 0 1.5H5a.75.75 0 0 1-.75-.75v-3.5a.75.75 0 0 1 1.5 0v1.69l2.72-2.72a.75.75 0 0 1 1.06 0Z"/><path d="M2 0h16a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2Zm16 1.5H2a.5.5 0 0 0-.5.5v16a.5.5 0 0 0 .5.5h16a.5.5 0 0 0 .5-.5V2a.5.5 0 0 0-.5-.5Z"/></svg>',eTe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M15.53 5.53a.75.75 0 0 0-1.06-1.06l-2.72 2.72V5.5a.75.75 0 0 0-1.5 0V9a.75.75 0 0 0 .75.75h3.5a.75.75 0 0 0 0-1.5h-1.69l2.72-2.72Z"/><path d="M5.5 10.25a.75.75 0 0 0 0 1.5h1.69l-2.72 2.72a.75.75 0 1 0 1.06 1.06l2.72-2.72v1.69a.75.75 0 0 0 1.5 0V11a.75.75 0 0 0-.75-.75H5.5Z"/><path d="M0 2a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2Zm18.5 0a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v16a.5.5 0 0 0 .5.5h16a.5.5 0 0 0 .5-.5V2Z"/></svg>',tTe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 9h16v2H2z"/></svg>',nTe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.66 9.118a.693.693 0 0 1 .956.032l3.65 3.411 2.422-2.238a.695.695 0 0 1 .945 0L17.5 13.6V2.5h-15v11.1l4.16-4.482ZM17.8 1c.652 0 1.2.47 1.2 1.1v14.362c0 .64-.532 1.038-1.184 1.038H2.184C1.532 17.5 1 17.103 1 16.462V2.1C1 1.47 1.537 1 2.2 1h15.6Zm-5.655 6a2.128 2.128 0 0 1 .157-2.364A2.133 2.133 0 1 1 12.145 7Z"/></svg>',iTe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h9.494a2.97 2.97 0 0 1-.414-.287 2.998 2.998 0 0 1-1.055-2.03 3.003 3.003 0 0 1 .693-2.185l.383-.455-.02.018-3.65-3.41a.695.695 0 0 0-.957-.034L1.5 13.6V2.5h15v5.535a2.97 2.97 0 0 1 1.412.932l.088.105V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.146 2.146 0 0 0-2.049 1.992 2.14 2.14 0 0 0 1.28 2.096 2.13 2.13 0 0 0 2.644-3.11 2.134 2.134 0 0 0-1.875-.978Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/></svg>',rTe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h7.029a5.401 5.401 0 0 1 .615-4.338l.762-1.232-2.975-2.78a.696.696 0 0 0-.957-.033L1.5 13.6V2.5h15v6.023c.449.131.887.32 1.307.573l.058.033c.046.028.09.057.135.086V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.15 2.15 0 0 0-1.611.834 2.118 2.118 0 0 0-.438 1.158 2.14 2.14 0 0 0 1.277 2.096 2.132 2.132 0 0 0 2.645-3.11 2.13 2.13 0 0 0-1.873-.978Z"/><path d="M16.63 10.294a3.003 3.003 0 0 0-4.142.887l-.117.177a.647.647 0 0 0-.096.492.664.664 0 0 0 .278.418.7.7 0 0 0 .944-.234 1.741 1.741 0 0 1 2.478-.463 1.869 1.869 0 0 1 .476 2.55.637.637 0 0 0-.071.5.646.646 0 0 0 .309.396.627.627 0 0 0 .869-.19l.027-.041a3.226 3.226 0 0 0-.956-4.492Zm-6.061 3.78-.044.066a3.228 3.228 0 0 0 .82 4.403 3.005 3.005 0 0 0 4.275-.798l.13-.197a.626.626 0 0 0 .092-.475.638.638 0 0 0-.268-.402.713.713 0 0 0-.99.26l-.018.029a1.741 1.741 0 0 1-2.477.461 1.87 1.87 0 0 1-.475-2.55l.029-.047a.647.647 0 0 0 .086-.485.66.66 0 0 0-.275-.408l-.04-.027a.609.609 0 0 0-.845.17Z"/><path d="M15.312 13.925c.24-.36.154-.838-.19-1.067-.346-.23-.82-.124-1.059.236l-1.268 1.907c-.239.36-.153.838.192 1.067.345.23.818.123 1.057-.236l1.268-1.907Z"/></svg>',sTe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>',hN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',oTe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>',x8='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>',aTe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/></svg>',lTe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M5.714 15.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm6.078.914V8.531H10.79c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.344 0v-1.235h-1.235V15h1.235zm-9.422 9.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm7.088.914v-1.147H10.35c.065-.111.149-.226.253-.343.104-.117.35-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.493-.824.104-.263.156-.539.156-.829 0-.51-.181-.936-.544-1.279-.364-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.152-.155.357-.233.615-.233.261 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.467.536-1.024 1.055-.691.641-1.154 1.156-1.388 1.544-.235.389-.375.8-.422 1.233h4.328zm2.334 0v-1.235h-1.235V24h1.235zM5.714 34.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm4.992 1.024c.616 0 1.13-.2 1.543-.598.413-.398.62-.88.62-1.446 0-.39-.111-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.618-.337.927-.788.927-1.353 0-.399-.15-.756-.452-1.073-.366-.386-.853-.58-1.46-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.667.55c-.16.232-.28.544-.359.933l1.139.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.214 0 .386.065.515.194s.193.302.193.518c0 .255-.088.46-.264.613-.175.154-.43.227-.764.218l-.136 1.006c.22-.061.408-.092.566-.092.24 0 .444.09.611.272.167.182.25.428.25.739 0 .328-.086.589-.26.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.308-.698l-1.195.145c.062.542.284.98.668 1.316.384.335.867.503 1.45.503zm4.43-.11v-1.235h-1.235V34h1.235z"/></svg>',cTe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M10.29 15V8.531H9.286c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.343 0v-1.235h-1.235V15h1.235zM11.3 24v-1.147H8.848c.064-.111.148-.226.252-.343.104-.117.351-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.494-.824.104-.263.156-.539.156-.829 0-.51-.182-.936-.545-1.279-.363-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.153-.155.358-.233.616-.233.26 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.468.536-1.024 1.055-.692.641-1.155 1.156-1.389 1.544-.234.389-.375.8-.422 1.233H11.3zm2.333 0v-1.235h-1.235V24h1.235zM9.204 34.11c.615 0 1.129-.2 1.542-.598.413-.398.62-.88.62-1.446 0-.39-.11-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.619-.337.928-.788.928-1.353 0-.399-.151-.756-.453-1.073-.366-.386-.852-.58-1.459-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.668.55c-.16.232-.28.544-.358.933l1.138.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.215 0 .386.065.515.194s.193.302.193.518c0 .255-.087.46-.263.613-.176.154-.43.227-.765.218l-.136 1.006c.22-.061.409-.092.567-.092.24 0 .444.09.61.272.168.182.251.428.251.739 0 .328-.087.589-.261.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.307-.698l-1.196.145c.062.542.285.98.668 1.316.384.335.868.503 1.45.503zm4.43-.11v-1.235h-1.236V34h1.235z"/></svg>',uTe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6z"/></svg>',dTe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M9.62 14.105c.272 0 .528-.05.768-.153s.466-.257.677-.462c.009.024.023.072.044.145.047.161.086.283.119.365h1.221a2.649 2.649 0 0 1-.222-.626c-.04-.195-.059-.498-.059-.908l.013-1.441c0-.536-.055-.905-.165-1.105-.11-.201-.3-.367-.569-.497-.27-.13-.68-.195-1.23-.195-.607 0-1.064.108-1.371.325-.308.217-.525.55-.65 1.002l1.12.202c.076-.217.176-.369.299-.455.123-.086.294-.13.514-.13.325 0 .546.05.663.152.118.101.176.27.176.508v.123c-.222.093-.622.194-1.2.303-.427.082-.755.178-.982.288-.227.11-.403.268-.53.474a1.327 1.327 0 0 0-.188.706c0 .398.138.728.415.988.277.261.656.391 1.136.391zm.368-.87a.675.675 0 0 1-.492-.189.606.606 0 0 1-.193-.448c0-.176.08-.32.241-.435.106-.07.33-.142.673-.215a7.19 7.19 0 0 0 .751-.19v.247c0 .296-.016.496-.048.602a.773.773 0 0 1-.295.409 1.07 1.07 0 0 1-.637.22zm4.645.765v-1.235h-1.235V14h1.235zM10.2 25.105c.542 0 1.003-.215 1.382-.646.38-.43.57-1.044.57-1.84 0-.771-.187-1.362-.559-1.774a1.82 1.82 0 0 0-1.41-.617c-.522 0-.973.216-1.354.65v-2.32H7.594V25h1.147v-.686a1.9 1.9 0 0 0 .67.592c.26.133.523.2.79.2zm-.299-.975c-.354 0-.638-.164-.852-.492-.153-.232-.229-.59-.229-1.073 0-.468.098-.818.295-1.048a.93.93 0 0 1 .738-.345c.302 0 .55.118.743.354.193.236.29.62.29 1.154 0 .5-.096.868-.288 1.1-.192.233-.424.35-.697.35zm4.478.87v-1.235h-1.234V25h1.234zm-4.017 9.105c.6 0 1.08-.142 1.437-.426.357-.284.599-.704.725-1.261l-1.213-.207c-.061.326-.167.555-.316.688a.832.832 0 0 1-.576.2.916.916 0 0 1-.75-.343c-.185-.228-.278-.62-.278-1.173 0-.498.091-.853.274-1.066.183-.212.429-.318.736-.318.232 0 .42.061.565.184.145.123.238.306.28.55l1.216-.22c-.146-.501-.387-.874-.722-1.119-.336-.244-.788-.366-1.356-.366-.695 0-1.245.214-1.653.643-.407.43-.61 1.03-.61 1.8 0 .762.202 1.358.608 1.788.406.431.95.646 1.633.646zM14.633 34v-1.235h-1.235V34h1.235z"/></svg>',fTe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.88 8.7V7.558h-1.234V8.7h1.234zm0 5.3V9.333h-1.234V14h1.234zm2.5 0v-1.235h-1.234V14h1.235zm-4.75 4.7v-1.142H8.395V18.7H9.63zm0 5.3v-4.667H8.395V24H9.63zm2.5-5.3v-1.142h-1.234V18.7h1.235zm0 5.3v-4.667h-1.234V24h1.235zm2.501 0v-1.235h-1.235V24h1.235zM7.38 28.7v-1.142H6.145V28.7H7.38zm0 5.3v-4.667H6.145V34H7.38zm2.5-5.3v-1.142H8.646V28.7H9.88zm0 5.3v-4.667H8.646V34H9.88zm2.5-5.3v-1.142h-1.234V28.7h1.235zm0 5.3v-4.667h-1.234V34h1.235zm2.501 0v-1.235h-1.235V34h1.235z"/></svg>',hTe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M14 27v6H8v-6h6zm0-9v6H8v-6h6zm0-9v6H8V9h6z"/></svg>',mTe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="m7.88 15 .532-1.463h2.575L11.549 15h1.415l-2.58-6.442H9.01L6.5 15h1.38zm2.69-2.549H8.811l.87-2.39.887 2.39zM14.88 15v-1.235h-1.234V15h1.234zM9.352 25c.83-.006 1.352-.02 1.569-.044.346-.038.636-.14.872-.305.236-.166.422-.387.558-.664.137-.277.205-.562.205-.855 0-.372-.106-.695-.317-.97-.21-.276-.512-.471-.905-.585a1.51 1.51 0 0 0 .661-.567 1.5 1.5 0 0 0 .244-.83c0-.28-.066-.53-.197-.754a1.654 1.654 0 0 0-.495-.539 1.676 1.676 0 0 0-.672-.266c-.25-.042-.63-.063-1.14-.063H7.158V25h2.193zm.142-3.88H8.46v-1.49h.747c.612 0 .983.007 1.112.022.217.026.38.102.49.226.11.125.165.287.165.486a.68.68 0 0 1-.192.503.86.86 0 0 1-.525.23 11.47 11.47 0 0 1-.944.023h.18zm.17 2.795H8.46v-1.723h1.05c.592 0 .977.03 1.154.092.177.062.313.16.406.295a.84.84 0 0 1 .14.492c0 .228-.06.41-.181.547a.806.806 0 0 1-.473.257c-.126.026-.423.04-.892.04zM14.88 25v-1.235h-1.234V25h1.234zm-5.018 9.11c.691 0 1.262-.17 1.711-.512.45-.341.772-.864.965-1.567l-1.261-.4c-.109.472-.287.818-.536 1.037-.25.22-.547.33-.892.33-.47 0-.85-.173-1.143-.519-.293-.345-.44-.925-.44-1.74 0-.767.15-1.322.447-1.665.297-.343.684-.514 1.162-.514.346 0 .64.096.881.29.242.193.4.457.477.79l1.288-.307c-.147-.516-.367-.911-.66-1.187-.492-.465-1.132-.698-1.92-.698-.902 0-1.63.296-2.184.89-.554.593-.83 1.426-.83 2.498 0 1.014.275 1.813.825 2.397.551.585 1.254.877 2.11.877zM14.88 34v-1.235h-1.234V34h1.234z"/></svg>',gTe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.916 15V8.558h-1.301V15h1.3zm2.465 0v-1.235h-1.235V15h1.235zM9.665 25v-6.442h-1.3V25h1.3zm2.5 0v-6.442h-1.3V25h1.3zm2.466 0v-1.235h-1.235V25h1.235zm-7.216 9v-6.442h-1.3V34h1.3zm2.5 0v-6.442h-1.3V34h1.3zm2.501 0v-6.442h-1.3V34h1.3zm2.465 0v-1.235h-1.235V34h1.235z"/></svg>',pTe='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>',vTe='<svg viewBox="0 0 22 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.587 1.5c-.612 0-.601-.029-.601.551v14.84c0 .59-.01.559.591.559h18.846c.602 0 .591.03.591-.56V2.052c0-.58.01-.55-.591-.55H1.587Zm.701.971h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-14.24 1h13.008v12H4.467l.029-12Zm-2.208 1h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003l-.029 1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h.974v1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Z"/><path d="M8.374 6.648a.399.399 0 0 1 .395-.4.402.402 0 0 1 .2.049l5.148 2.824a.4.4 0 0 1 0 .7l-5.148 2.824a.403.403 0 0 1-.595-.35V6.648Z"/></svg>',O8='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>',cP='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',By='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',bTe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',uP='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',Fy='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',R8='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',V8='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',D8='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',wTe='<svg xmlns="http://www.w3.org/2000/svg" xmlns:v="https://vecta.io/nano" viewBox="0 0 20 20"><path d="M.95 1.43a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h.75v6.3H.95a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-.65h1.932l1.539-1.5H5v-.95a.95.95 0 0 0-.95-.95H3.2v-6.3h.85A.95.95 0 0 0 5 5.48v-.55h10v.55a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-3.1a.95.95 0 0 0-.95-.95h-3.1a.95.95 0 0 0-.95.95v1.05H5V2.38a.95.95 0 0 0-.95-.95H.95zm.55 3.5v-2h2v2h-2zm0 9.3v2h2v-2h-2zm15-11.3v2h2v-2h-2z"/><path d="M8.139 20.004v-2.388l7.045-7.048 2.391 2.391-7.046 7.046h-2.39zm11.421-9.101a.64.64 0 0 1-.138.206l-1.165 1.168-2.391-2.391 1.167-1.163a.63.63 0 0 1 .206-.138.635.635 0 0 1 .243-.049.63.63 0 0 1 .449.187l1.491 1.488c.059.059.108.129.138.206s.049.16.049.243a.6.6 0 0 1-.049.243z"/></svg>',yTe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',_Te='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M13 5.5H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2ZM13 7a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-8A.5.5 0 0 1 2 7h11Z"/></svg>',kTe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M10 7.5H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2ZM10 9a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6A.5.5 0 0 1 2 9h8Z"/></svg>',ETe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M7 9.5H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2ZM7 11a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4A.5.5 0 0 1 2 11h5Z"/></svg>',mN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>',CTe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',N8='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',TTe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',STe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',sc='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',ATe=`<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>
`,ITe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',gN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>',PTe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.2 7h9.2c.6 0 1 .4 1 1v9.9c0 .5-.4 1-1 1H5.2a1 1 0 0 1-1-1V8c0-.6.4-1 1-1Zm1 1.5c-.3 0-.5.2-.5.5v8c0 .3.2.5.5.5h.5c.2 0 .5-.2.5-.5V9c0-.3-.3-.5-.5-.5h-.5Zm3.2 0c-.2 0-.5.2-.5.5v8c0 .3.3.5.5.5h.5c.3 0 .5-.2.5-.5V9c0-.3-.2-.5-.5-.5h-.5Zm3.5 0c-.2 0-.5.2-.5.5v8c0 .3.3.5.5.5h.5c.3 0 .5-.2.5-.5V9c0-.3-.2-.5-.5-.5h-.5Zm-1.4-7.1H8.3L6.5 3.6H3.8c-.5 0-.7.3-.7.8s.2.7.7.7h12c.6 0 .9-.2.9-.7 0-.5-.3-.8-1-.8h-2.4l-1.8-2.2Z"/></svg>',xTe='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>',OTe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>',RTe=`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.734 6.375H1.75a.75.75 0 0 1 0-1.5h1.984a2.626 2.626 0 0 1 5.032 0h9.48a.75.75 0 0 1 0 1.5h-9.48a2.626 2.626 0 0 1-5.032 0Zm1.141-.75a1.375 1.375 0 1 1 2.75 0 1.375 1.375 0 0 1-2.75 0ZM16.263 14.625h1.983a.75.75 0 0 1 0 1.5h-1.983a2.626 2.626 0 0 1-5.033 0H1.75a.75.75 0 0 1 0-1.5h9.48a2.626 2.626 0 0 1 5.033 0Zm-1.142.75a1.375 1.375 0 1 1-2.75 0 1.375 1.375 0 0 1 2.75 0Z"/></svg>
`,VTe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m6.395 9.196 2.545-.007V6.498a.598.598 0 0 1 .598-.598h.299a.598.598 0 0 1 .598.598v6.877a.598.598 0 0 1-.598.598h-.299a.598.598 0 0 1-.598-.598v-2.691l-2.545.007v2.691a.598.598 0 0 1-.598.598h-.299a.598.598 0 0 1-.598-.598V6.505a.598.598 0 0 1 .598-.598h.299a.598.598 0 0 1 .598.598v2.691Z"/><path d="M15.094 13.417V6.462a.562.562 0 0 0-.562-.562h-.782a1 1 0 0 0-.39.08l-1.017.43a.562.562 0 0 0-.343.517v.197c0 .4.406.67.775.519l.819-.337v6.111c0 .31.251.562.561.562h.377c.31 0 .562-.251.562-.562Z"/><path d="M0 15.417v1.5h1.5v-1.5H0Z"/><path d="M18.5 15.417v1.5H20v-1.5h-1.5Z"/><path d="M18.5 12.333v1.5H20v-1.5h-1.5Z"/><path d="M18.5 9.25v1.5H20v-1.5h-1.5Z"/><path d="M18.5 6.167v1.5H20v-1.5h-1.5Z"/><path d="M0 18.5v.5a1 1 0 0 0 1 1h.5v-1.5H0Z"/><path d="M3.083 18.5V20h1.5v-1.5h-1.5Z"/><path d="M6.167 18.5V20h1.5v-1.5h-1.5Z"/><path d="M9.25 18.5V20h1.5v-1.5h-1.5Z"/><path d="M12.333 18.5V20h1.5v-1.5h-1.5Z"/><path d="M15.417 18.5V20h1.5v-1.5h-1.5Z"/><path d="M18.5 18.5V20h.5a1 1 0 0 0 1-1v-.5h-1.5Z"/><path clip-rule="evenodd" d="M0 1a1 1 0 0 1 1-1h18a1 1 0 0 1 1 1v3.583h-1.5V1.5h-17v12.333H0V1Z"/></svg>',DTe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.5 0 5 4.5v15.003h-16V0h11zM3 1.5v3.25l-1.497 1-.003 8 1.5 1v3.254L7.685 18l-.001 1.504H17.5V8.002L16 9.428l-.004-4.22-4.222-3.692L3 1.5z"/><path d="M4.06 6.64a.75.75 0 0 1 .958 1.15l-.085.07L2.29 9.75l2.646 1.89c.302.216.4.62.232.951l-.058.095a.75.75 0 0 1-.951.232l-.095-.058-3.5-2.5V9.14l3.496-2.5zm4.194 6.22a.75.75 0 0 1-.958-1.149l.085-.07 2.643-1.89-2.646-1.89a.75.75 0 0 1-.232-.952l.058-.095a.75.75 0 0 1 .95-.232l.096.058 3.5 2.5v1.22l-3.496 2.5zm7.644-.836 2.122 2.122-5.825 5.809-2.125-.005.003-2.116zm2.539-1.847 1.414 1.414a.5.5 0 0 1 0 .707l-1.06 1.06-2.122-2.12 1.061-1.061a.5.5 0 0 1 .707 0z"/></svg>',NTe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2.5a7.47 7.47 0 0 1 4.231 1.31 7.268 7.268 0 0 1 2.703 3.454 7.128 7.128 0 0 1 .199 4.353c-.39 1.436-1.475 2.72-2.633 3.677h2.013c0-.226.092-.443.254-.603a.876.876 0 0 1 1.229 0c.163.16.254.377.254.603v.853c0 .209-.078.41-.22.567a.873.873 0 0 1-.547.28l-.101.006h-4.695a.517.517 0 0 1-.516-.518v-1.265c0-.21.128-.398.317-.489a5.601 5.601 0 0 0 2.492-2.371 5.459 5.459 0 0 0 .552-3.693 5.53 5.53 0 0 0-1.955-3.2A5.71 5.71 0 0 0 10 4.206 5.708 5.708 0 0 0 6.419 5.46 5.527 5.527 0 0 0 4.46 8.663a5.457 5.457 0 0 0 .554 3.695 5.6 5.6 0 0 0 2.497 2.37.55.55 0 0 1 .317.49v1.264c0 .286-.23.518-.516.518H2.618a.877.877 0 0 1-.614-.25.845.845 0 0 1-.254-.603v-.853c0-.226.091-.443.254-.603a.876.876 0 0 1 1.228 0c.163.16.255.377.255.603h1.925c-1.158-.958-2.155-2.241-2.545-3.678a7.128 7.128 0 0 1 .199-4.352 7.268 7.268 0 0 1 2.703-3.455A7.475 7.475 0 0 1 10 2.5z"/></svg>',LTe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.105 18-.17 1H2.5A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1h15A1.5 1.5 0 0 1 19 2.5v9.975l-.85-.124-.15-.302V8h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5h3.105zM2 12h5V8H2v4zm10-4H8v4h4V8zM2 2v5h5V2H2zm0 16h5v-5H2v5zM13 7h5V2h-5v5zM8 2v5h4V2H8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM13 6a1 1 0 0 1 1 1v3.172a2.047 2.047 0 0 0-.293.443l-.858 1.736-1.916.28-.151.027A1.976 1.976 0 0 0 9.315 14H7a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm-1 2H8v4h4V8z"/></svg>',MTe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',$Te='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>',BTe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8 2v5h4V2h1v5h5v1h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5H7v-5H2v-1h5V8H2V7h5V2h1zm4 6H8v4h4V8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM17 1a2 2 0 0 1 2 2v9.475l-.85-.124-.857-1.736a2.048 2.048 0 0 0-.292-.44L17 3H3v14h7.808l.402.392L10.935 19H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14z"/></svg>',FTe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',pN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.5v3h4v-3H3Zm0 4v3h4v-3H3Zm0 4v3h4v-3H3Zm5 3h4v-3H8v3Zm5 0h4v-3h-4v3Zm4-4v-3h-4v3h4Zm0-4v-3h-4v3h4Zm1.5 8A1.5 1.5 0 0 1 17 18H3a1.5 1.5 0 0 1-1.5-1.5V3c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13.5Zm-6.5-4v-3H8v3h4Zm0-4v-3H8v3h4Z"/></svg>',UTe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.035 1C2.446 1 2 1.54 2 2.098V10.5h1.5v-8h13v8H18V2.098C18 1.539 17.48 1 16.9 1H3.035Zm10.453 2.61a1.885 1.885 0 0 0-1.442.736 1.89 1.89 0 0 0 1.011 2.976 1.903 1.903 0 0 0 2.253-1.114 1.887 1.887 0 0 0-1.822-2.598ZM7.463 8.163a.611.611 0 0 0-.432.154L5.071 10.5h5.119L7.88 8.348a.628.628 0 0 0-.417-.185Zm6.236 1.059a.62.62 0 0 0-.42.164L12.07 10.5h2.969l-.92-1.113a.618.618 0 0 0-.42-.165ZM.91 11.5a.91.91 0 0 0-.91.912v6.877c0 .505.405.91.91.91h18.178a.91.91 0 0 0 .912-.91v-6.877a.908.908 0 0 0-.912-.912H.91ZM3.668 13h1.947l2.135 5.7H5.898l-.28-.946H3.601l-.278.945H1.516L3.668 13Zm4.947 0h1.801v4.3h2.7v1.4h-4.5V13h-.001Zm4.5 0h5.4v1.4h-1.798v4.3h-1.701v-4.3h-1.9V13h-.001Zm-8.517 1.457-.614 2.059h1.262l-.648-2.059Z"/></svg>',zTe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></svg>',dP='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',HTe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m2.315 14.705 2.224-2.24a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .949L2.865 16.07a.682.682 0 0 1-.112.089.647.647 0 0 1-.852-.051L.688 14.886a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.717.722zm5.185.045a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75zM2.329 5.745l2.21-2.226a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .95L2.865 7.125a.685.685 0 0 1-.496.196.644.644 0 0 1-.468-.187L.688 5.912a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.73.736zM7.5 5.75A.75.75 0 0 1 8.25 5h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',vN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',WTe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>',L8={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const bN=Q_(L8);var wN={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function yN(n){var t,e=[],i=1,r;if(typeof n=="string")if(bN[n])e=bN[n].slice(),r="rgb";else if(n==="transparent")i=0,r="rgb",e=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(n)){var s=n.slice(1),o=s.length,a=o<=4;i=1,a?(e=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],o===4&&(i=parseInt(s[3]+s[3],16)/255)):(e=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],o===8&&(i=parseInt(s[6]+s[7],16)/255)),e[0]||(e[0]=0),e[1]||(e[1]=0),e[2]||(e[2]=0),r="rgb"}else if(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(n)){var l=t[1],c=l==="rgb",s=l.replace(/a$/,"");r=s;var o=s==="cmyk"?4:s==="gray"?1:3;e=t[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(f,h){if(/%$/.test(f))return h===o?parseFloat(f)/100:s==="rgb"?parseFloat(f)*255/100:parseFloat(f);if(s[h]==="h"){if(/deg$/.test(f))return parseFloat(f);if(wN[f]!==void 0)return wN[f]}return parseFloat(f)}),l===s&&e.push(1),i=c||e[o]===void 0?1:e[o],e=e.slice(0,o)}else n.length>10&&/[0-9](?:\s|\/)/.test(n)&&(e=n.match(/([0-9]+)/g).map(function(u){return parseFloat(u)}),r=n.match(/([a-z])/ig).join("").toLowerCase());else isNaN(n)?Array.isArray(n)||n.length?(e=[n[0],n[1],n[2]],r="rgb",i=n.length===4?n[3]:1):n instanceof Object&&(n.r!=null||n.red!=null||n.R!=null?(r="rgb",e=[n.r||n.red||n.R||0,n.g||n.green||n.G||0,n.b||n.blue||n.B||0]):(r="hsl",e=[n.h||n.hue||n.H||0,n.s||n.saturation||n.S||0,n.l||n.lightness||n.L||n.b||n.brightness]),i=n.a||n.alpha||n.opacity||1,n.opacity!=null&&(i/=100)):(r="rgb",e=[n>>>16,(n&65280)>>>8,n&255]);return{space:r,values:e,alpha:i}}const ev=L8,M8={};for(const n of Object.keys(ev))M8[ev[n]]=n;const Dt={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var $8=Dt;for(const n of Object.keys(Dt)){if(!("channels"in Dt[n]))throw new Error("missing channels property: "+n);if(!("labels"in Dt[n]))throw new Error("missing channel labels property: "+n);if(Dt[n].labels.length!==Dt[n].channels)throw new Error("channel and label counts mismatch: "+n);const{channels:t,labels:e}=Dt[n];delete Dt[n].channels,delete Dt[n].labels,Object.defineProperty(Dt[n],"channels",{value:t}),Object.defineProperty(Dt[n],"labels",{value:e})}Dt.rgb.hsl=function(n){const t=n[0]/255,e=n[1]/255,i=n[2]/255,r=Math.min(t,e,i),s=Math.max(t,e,i),o=s-r;let a,l;s===r?a=0:t===s?a=(e-i)/o:e===s?a=2+(i-t)/o:i===s&&(a=4+(t-e)/o),a=Math.min(a*60,360),a<0&&(a+=360);const c=(r+s)/2;return s===r?l=0:c<=.5?l=o/(s+r):l=o/(2-s-r),[a,l*100,c*100]};Dt.rgb.hsv=function(n){let t,e,i,r,s;const o=n[0]/255,a=n[1]/255,l=n[2]/255,c=Math.max(o,a,l),u=c-Math.min(o,a,l),d=function(f){return(c-f)/6/u+1/2};return u===0?(r=0,s=0):(s=u/c,t=d(o),e=d(a),i=d(l),o===c?r=i-e:a===c?r=1/3+t-i:l===c&&(r=2/3+e-t),r<0?r+=1:r>1&&(r-=1)),[r*360,s*100,c*100]};Dt.rgb.hwb=function(n){const t=n[0],e=n[1];let i=n[2];const r=Dt.rgb.hsl(n)[0],s=1/255*Math.min(t,Math.min(e,i));return i=1-1/255*Math.max(t,Math.max(e,i)),[r,s*100,i*100]};Dt.rgb.cmyk=function(n){const t=n[0]/255,e=n[1]/255,i=n[2]/255,r=Math.min(1-t,1-e,1-i),s=(1-t-r)/(1-r)||0,o=(1-e-r)/(1-r)||0,a=(1-i-r)/(1-r)||0;return[s*100,o*100,a*100,r*100]};function jTe(n,t){return(n[0]-t[0])**2+(n[1]-t[1])**2+(n[2]-t[2])**2}Dt.rgb.keyword=function(n){const t=M8[n];if(t)return t;let e=1/0,i;for(const r of Object.keys(ev)){const s=ev[r],o=jTe(n,s);o<e&&(e=o,i=r)}return i};Dt.keyword.rgb=function(n){return ev[n]};Dt.rgb.xyz=function(n){let t=n[0]/255,e=n[1]/255,i=n[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,i=i>.04045?((i+.055)/1.055)**2.4:i/12.92;const r=t*.4124+e*.3576+i*.1805,s=t*.2126+e*.7152+i*.0722,o=t*.0193+e*.1192+i*.9505;return[r*100,s*100,o*100]};Dt.rgb.lab=function(n){const t=Dt.rgb.xyz(n);let e=t[0],i=t[1],r=t[2];e/=95.047,i/=100,r/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,i=i>.008856?i**(1/3):7.787*i+16/116,r=r>.008856?r**(1/3):7.787*r+16/116;const s=116*i-16,o=500*(e-i),a=200*(i-r);return[s,o,a]};Dt.hsl.rgb=function(n){const t=n[0]/360,e=n[1]/100,i=n[2]/100;let r,s,o;if(e===0)return o=i*255,[o,o,o];i<.5?r=i*(1+e):r=i+e-i*e;const a=2*i-r,l=[0,0,0];for(let c=0;c<3;c++)s=t+1/3*-(c-1),s<0&&s++,s>1&&s--,6*s<1?o=a+(r-a)*6*s:2*s<1?o=r:3*s<2?o=a+(r-a)*(2/3-s)*6:o=a,l[c]=o*255;return l};Dt.hsl.hsv=function(n){const t=n[0];let e=n[1]/100,i=n[2]/100,r=e;const s=Math.max(i,.01);i*=2,e*=i<=1?i:2-i,r*=s<=1?s:2-s;const o=(i+e)/2,a=i===0?2*r/(s+r):2*e/(i+e);return[t,a*100,o*100]};Dt.hsv.rgb=function(n){const t=n[0]/60,e=n[1]/100;let i=n[2]/100;const r=Math.floor(t)%6,s=t-Math.floor(t),o=255*i*(1-e),a=255*i*(1-e*s),l=255*i*(1-e*(1-s));switch(i*=255,r){case 0:return[i,l,o];case 1:return[a,i,o];case 2:return[o,i,l];case 3:return[o,a,i];case 4:return[l,o,i];case 5:return[i,o,a]}};Dt.hsv.hsl=function(n){const t=n[0],e=n[1]/100,i=n[2]/100,r=Math.max(i,.01);let s,o;o=(2-e)*i;const a=(2-e)*r;return s=e*r,s/=a<=1?a:2-a,s=s||0,o/=2,[t,s*100,o*100]};Dt.hwb.rgb=function(n){const t=n[0]/360;let e=n[1]/100,i=n[2]/100;const r=e+i;let s;r>1&&(e/=r,i/=r);const o=Math.floor(6*t),a=1-i;s=6*t-o,o&1&&(s=1-s);const l=e+s*(a-e);let c,u,d;switch(o){default:case 6:case 0:c=a,u=l,d=e;break;case 1:c=l,u=a,d=e;break;case 2:c=e,u=a,d=l;break;case 3:c=e,u=l,d=a;break;case 4:c=l,u=e,d=a;break;case 5:c=a,u=e,d=l;break}return[c*255,u*255,d*255]};Dt.cmyk.rgb=function(n){const t=n[0]/100,e=n[1]/100,i=n[2]/100,r=n[3]/100,s=1-Math.min(1,t*(1-r)+r),o=1-Math.min(1,e*(1-r)+r),a=1-Math.min(1,i*(1-r)+r);return[s*255,o*255,a*255]};Dt.xyz.rgb=function(n){const t=n[0]/100,e=n[1]/100,i=n[2]/100;let r,s,o;return r=t*3.2406+e*-1.5372+i*-.4986,s=t*-.9689+e*1.8758+i*.0415,o=t*.0557+e*-.204+i*1.057,r=r>.0031308?1.055*r**(1/2.4)-.055:r*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,r=Math.min(Math.max(0,r),1),s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),[r*255,s*255,o*255]};Dt.xyz.lab=function(n){let t=n[0],e=n[1],i=n[2];t/=95.047,e/=100,i/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,e=e>.008856?e**(1/3):7.787*e+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;const r=116*e-16,s=500*(t-e),o=200*(e-i);return[r,s,o]};Dt.lab.xyz=function(n){const t=n[0],e=n[1],i=n[2];let r,s,o;s=(t+16)/116,r=e/500+s,o=s-i/200;const a=s**3,l=r**3,c=o**3;return s=a>.008856?a:(s-16/116)/7.787,r=l>.008856?l:(r-16/116)/7.787,o=c>.008856?c:(o-16/116)/7.787,r*=95.047,s*=100,o*=108.883,[r,s,o]};Dt.lab.lch=function(n){const t=n[0],e=n[1],i=n[2];let r;r=Math.atan2(i,e)*360/2/Math.PI,r<0&&(r+=360);const o=Math.sqrt(e*e+i*i);return[t,o,r]};Dt.lch.lab=function(n){const t=n[0],e=n[1],r=n[2]/360*2*Math.PI,s=e*Math.cos(r),o=e*Math.sin(r);return[t,s,o]};Dt.rgb.ansi16=function(n,t=null){const[e,i,r]=n;let s=t===null?Dt.rgb.hsv(n)[2]:t;if(s=Math.round(s/50),s===0)return 30;let o=30+(Math.round(r/255)<<2|Math.round(i/255)<<1|Math.round(e/255));return s===2&&(o+=60),o};Dt.hsv.ansi16=function(n){return Dt.rgb.ansi16(Dt.hsv.rgb(n),n[2])};Dt.rgb.ansi256=function(n){const t=n[0],e=n[1],i=n[2];return t===e&&e===i?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(e/255*5)+Math.round(i/255*5)};Dt.ansi16.rgb=function(n){let t=n%10;if(t===0||t===7)return n>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const e=(~~(n>50)+1)*.5,i=(t&1)*e*255,r=(t>>1&1)*e*255,s=(t>>2&1)*e*255;return[i,r,s]};Dt.ansi256.rgb=function(n){if(n>=232){const s=(n-232)*10+8;return[s,s,s]}n-=16;let t;const e=Math.floor(n/36)/5*255,i=Math.floor((t=n%36)/6)/5*255,r=t%6/5*255;return[e,i,r]};Dt.rgb.hex=function(n){const e=(((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255)).toString(16).toUpperCase();return"000000".substring(e.length)+e};Dt.hex.rgb=function(n){const t=n.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let e=t[0];t[0].length===3&&(e=e.split("").map(a=>a+a).join(""));const i=parseInt(e,16),r=i>>16&255,s=i>>8&255,o=i&255;return[r,s,o]};Dt.rgb.hcg=function(n){const t=n[0]/255,e=n[1]/255,i=n[2]/255,r=Math.max(Math.max(t,e),i),s=Math.min(Math.min(t,e),i),o=r-s;let a,l;return o<1?a=s/(1-o):a=0,o<=0?l=0:r===t?l=(e-i)/o%6:r===e?l=2+(i-t)/o:l=4+(t-e)/o,l/=6,l%=1,[l*360,o*100,a*100]};Dt.hsl.hcg=function(n){const t=n[1]/100,e=n[2]/100,i=e<.5?2*t*e:2*t*(1-e);let r=0;return i<1&&(r=(e-.5*i)/(1-i)),[n[0],i*100,r*100]};Dt.hsv.hcg=function(n){const t=n[1]/100,e=n[2]/100,i=t*e;let r=0;return i<1&&(r=(e-i)/(1-i)),[n[0],i*100,r*100]};Dt.hcg.rgb=function(n){const t=n[0]/360,e=n[1]/100,i=n[2]/100;if(e===0)return[i*255,i*255,i*255];const r=[0,0,0],s=t%1*6,o=s%1,a=1-o;let l=0;switch(Math.floor(s)){case 0:r[0]=1,r[1]=o,r[2]=0;break;case 1:r[0]=a,r[1]=1,r[2]=0;break;case 2:r[0]=0,r[1]=1,r[2]=o;break;case 3:r[0]=0,r[1]=a,r[2]=1;break;case 4:r[0]=o,r[1]=0,r[2]=1;break;default:r[0]=1,r[1]=0,r[2]=a}return l=(1-e)*i,[(e*r[0]+l)*255,(e*r[1]+l)*255,(e*r[2]+l)*255]};Dt.hcg.hsv=function(n){const t=n[1]/100,e=n[2]/100,i=t+e*(1-t);let r=0;return i>0&&(r=t/i),[n[0],r*100,i*100]};Dt.hcg.hsl=function(n){const t=n[1]/100,i=n[2]/100*(1-t)+.5*t;let r=0;return i>0&&i<.5?r=t/(2*i):i>=.5&&i<1&&(r=t/(2*(1-i))),[n[0],r*100,i*100]};Dt.hcg.hwb=function(n){const t=n[1]/100,e=n[2]/100,i=t+e*(1-t);return[n[0],(i-t)*100,(1-i)*100]};Dt.hwb.hcg=function(n){const t=n[1]/100,i=1-n[2]/100,r=i-t;let s=0;return r<1&&(s=(i-r)/(1-r)),[n[0],r*100,s*100]};Dt.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]};Dt.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]};Dt.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]};Dt.gray.hsl=function(n){return[0,0,n[0]]};Dt.gray.hsv=Dt.gray.hsl;Dt.gray.hwb=function(n){return[0,100,n[0]]};Dt.gray.cmyk=function(n){return[0,0,0,n[0]]};Dt.gray.lab=function(n){return[n[0],0,0]};Dt.gray.hex=function(n){const t=Math.round(n[0]/100*255)&255,i=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(i.length)+i};Dt.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]};const Uy=$8;function qTe(){const n={},t=Object.keys(Uy);for(let e=t.length,i=0;i<e;i++)n[t[i]]={distance:-1,parent:null};return n}function GTe(n){const t=qTe(),e=[n];for(t[n].distance=0;e.length;){const i=e.pop(),r=Object.keys(Uy[i]);for(let s=r.length,o=0;o<s;o++){const a=r[o],l=t[a];l.distance===-1&&(l.distance=t[i].distance+1,l.parent=i,e.unshift(a))}}return t}function KTe(n,t){return function(e){return t(n(e))}}function YTe(n,t){const e=[t[n].parent,n];let i=Uy[t[n].parent][n],r=t[n].parent;for(;t[r].parent;)e.unshift(t[r].parent),i=KTe(Uy[t[r].parent][r],i),r=t[r].parent;return i.conversion=e,i}var QTe=function(n){const t=GTe(n),e={},i=Object.keys(t);for(let r=i.length,s=0;s<r;s++){const o=i[s];t[o].parent!==null&&(e[o]=YTe(o,t))}return e};const $T=$8,ZTe=QTe,Gf={},JTe=Object.keys($T);function XTe(n){const t=function(...e){const i=e[0];return i==null?i:(i.length>1&&(e=i),n(e))};return"conversion"in n&&(t.conversion=n.conversion),t}function eSe(n){const t=function(...e){const i=e[0];if(i==null)return i;i.length>1&&(e=i);const r=n(e);if(typeof r=="object")for(let s=r.length,o=0;o<s;o++)r[o]=Math.round(r[o]);return r};return"conversion"in n&&(t.conversion=n.conversion),t}JTe.forEach(n=>{Gf[n]={},Object.defineProperty(Gf[n],"channels",{value:$T[n].channels}),Object.defineProperty(Gf[n],"labels",{value:$T[n].labels});const t=ZTe(n);Object.keys(t).forEach(i=>{const r=t[i];Gf[n][i]=eSe(r),Gf[n][i].raw=XTe(r)})});var B8=Gf;const tSe=Q_(B8),F8=mj({__proto__:null,default:tSe},[B8]),tv=(n,t=0,e=1)=>n>e?e:n<t?t:n,zr=(n,t=0,e=Math.pow(10,t))=>Math.round(e*n)/e,nSe=n=>aSe(BT(n)),BT=n=>(n[0]==="#"&&(n=n.substring(1)),n.length<6?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?zr(parseInt(n[3]+n[3],16)/255,2):1}:{r:parseInt(n.substring(0,2),16),g:parseInt(n.substring(2,4),16),b:parseInt(n.substring(4,6),16),a:n.length===8?zr(parseInt(n.substring(6,8),16)/255,2):1}),iSe=n=>oSe(sSe(n)),rSe=({h:n,s:t,v:e,a:i})=>{const r=(200-t)*e/100;return{h:zr(n),s:zr(r>0&&r<200?t*e/100/(r<=100?r:200-r)*100:0),l:zr(r/2),a:zr(i,2)}},FT=n=>{const{h:t,s:e,l:i}=rSe(n);return`hsl(${t}, ${e}%, ${i}%)`},sSe=({h:n,s:t,v:e,a:i})=>{n=n/360*6,t=t/100,e=e/100;const r=Math.floor(n),s=e*(1-t),o=e*(1-(n-r)*t),a=e*(1-(1-n+r)*t),l=r%6;return{r:zr([e,o,s,s,a,e][l]*255),g:zr([a,e,e,o,s,s][l]*255),b:zr([s,s,a,e,e,o][l]*255),a:zr(i,2)}},Rb=n=>{const t=n.toString(16);return t.length<2?"0"+t:t},oSe=({r:n,g:t,b:e,a:i})=>{const r=i<1?Rb(zr(i*255)):"";return"#"+Rb(n)+Rb(t)+Rb(e)+r},aSe=({r:n,g:t,b:e,a:i})=>{const r=Math.max(n,t,e),s=r-Math.min(n,t,e),o=s?r===n?(t-e)/s:r===t?2+(e-n)/s:4+(n-t)/s:0;return{h:zr(60*(o<0?o+6:o)),s:zr(r?s/r*100:0),v:zr(r/255*100),a:i}},U8=(n,t)=>{if(n===t)return!0;for(const e in n)if(n[e]!==t[e])return!1;return!0},lSe=(n,t)=>n.toLowerCase()===t.toLowerCase()?!0:U8(BT(n),BT(t)),_N={},z8=n=>{let t=_N[n];return t||(t=document.createElement("template"),t.innerHTML=n,_N[n]=t),t},fP=(n,t,e)=>{n.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:e}))};let Ph=!1;const UT=n=>"touches"in n,cSe=n=>Ph&&!UT(n)?!1:(Ph||(Ph=UT(n)),!0),kN=(n,t)=>{const e=UT(t)?t.touches[0]:t,i=n.el.getBoundingClientRect();fP(n.el,"move",n.getMove({x:tv((e.pageX-(i.left+window.pageXOffset))/i.width),y:tv((e.pageY-(i.top+window.pageYOffset))/i.height)}))},uSe=(n,t)=>{const e=t.keyCode;e>40||n.xy&&e<37||e<33||(t.preventDefault(),fP(n.el,"move",n.getMove({x:e===39?.01:e===37?-.01:e===34?.05:e===33?-.05:e===35?1:e===36?-1:0,y:e===40?.01:e===38?-.01:0},!0)))};class H8{constructor(t,e,i,r){const s=z8(`<div role="slider" tabindex="0" part="${e}" ${i}><div part="${e}-pointer"></div></div>`);t.appendChild(s.content.cloneNode(!0));const o=t.querySelector(`[part=${e}]`);o.addEventListener("mousedown",this),o.addEventListener("touchstart",this),o.addEventListener("keydown",this),this.el=o,this.xy=r,this.nodes=[o.firstChild,o]}set dragging(t){const e=t?document.addEventListener:document.removeEventListener;e(Ph?"touchmove":"mousemove",this),e(Ph?"touchend":"mouseup",this)}handleEvent(t){switch(t.type){case"mousedown":case"touchstart":if(t.preventDefault(),!cSe(t)||!Ph&&t.button!=0)return;this.el.focus(),kN(this,t),this.dragging=!0;break;case"mousemove":case"touchmove":t.preventDefault(),kN(this,t);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":uSe(this,t);break}}style(t){t.forEach((e,i)=>{for(const r in e)this.nodes[i].style.setProperty(r,e[r])})}}class dSe extends H8{constructor(t){super(t,"hue",'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"',!1)}update({h:t}){this.h=t,this.style([{left:`${t/360*100}%`,color:FT({h:t,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuenow",`${zr(t)}`)}getMove(t,e){return{h:e?tv(this.h+t.x*360,0,360):360*t.x}}}class fSe extends H8{constructor(t){super(t,"saturation",'aria-label="Color"',!0)}update(t){this.hsva=t,this.style([{top:`${100-t.v}%`,left:`${t.s}%`,color:FT(t)},{"background-color":FT({h:t.h,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuetext",`Saturation ${zr(t.s)}%, Brightness ${zr(t.v)}%`)}getMove(t,e){return{s:e?tv(this.hsva.s+t.x*100,0,100):t.x*100,v:e?tv(this.hsva.v-t.y*100,0,100):Math.round(100-t.y*100)}}}const hSe=':host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;display:flex;place-content:center center;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{content:"";width:100%;height:100%;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}',mSe="[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}",gSe="[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}",Vb=Symbol("same"),Xk=Symbol("color"),EN=Symbol("hsva"),eE=Symbol("update"),CN=Symbol("parts"),TN=Symbol("css"),SN=Symbol("sliders");class pSe extends HTMLElement{static get observedAttributes(){return["color"]}get[TN](){return[hSe,mSe,gSe]}get[SN](){return[fSe,dSe]}get color(){return this[Xk]}set color(t){if(!this[Vb](t)){const e=this.colorModel.toHsva(t);this[eE](e),this[Xk]=t}}constructor(){super();const t=z8(`<style>${this[TN].join("")}</style>`),e=this.attachShadow({mode:"open"});e.appendChild(t.content.cloneNode(!0)),e.addEventListener("move",this),this[CN]=this[SN].map(i=>new i(e))}connectedCallback(){if(this.hasOwnProperty("color")){const t=this.color;delete this.color,this.color=t}else this.color||(this.color=this.colorModel.defaultColor)}attributeChangedCallback(t,e,i){const r=this.colorModel.fromAttr(i);this[Vb](r)||(this.color=r)}handleEvent(t){const e=this[EN],i={...e,...t.detail};this[eE](i);let r;!U8(i,e)&&!this[Vb](r=this.colorModel.fromHsva(i))&&(this[Xk]=r,fP(this,"color-changed",{value:r}))}[Vb](t){return this.color&&this.colorModel.equal(t,this.color)}[eE](t){this[EN]=t,this[CN].forEach(e=>e.update(t))}}const vSe={defaultColor:"#000",toHsva:nSe,fromHsva:({h:n,s:t,v:e})=>iSe({h:n,s:t,v:e,a:1}),equal:lSe,fromAttr:n=>n};class bSe extends pSe{get colorModel(){return vSe}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class tr extends cr{constructor(e=[]){super(e,{idProperty:"viewUid"});y(this,"_parentElement");this.on("add",(i,r,s)=>{this._renderViewIntoCollectionParent(r,s)}),this.on("remove",(i,r)=>{r.element&&this._parentElement&&r.element.remove()}),this._parentElement=null}destroy(){this.map(e=>e.destroy())}setParent(e){this._parentElement=e;for(const i of this)this._renderViewIntoCollectionParent(i)}delegate(...e){if(!e.length||!wSe(e))throw new we("ui-viewcollection-delegate-wrong-events",this);return{to:i=>{for(const r of this)for(const s of e)r.delegate(s).to(i);this.on("add",(r,s)=>{for(const o of e)s.delegate(o).to(i)}),this.on("remove",(r,s)=>{for(const o of e)s.stopDelegating(o,i)})}}}_renderViewIntoCollectionParent(e,i){e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[i])}remove(e){return super.remove(e)}}function wSe(n){return n.every(t=>typeof t=="string")}const ySe="http://www.w3.org/1999/xhtml";class Ks extends ri(){constructor(e){super();y(this,"ns");y(this,"tag");y(this,"text");y(this,"attributes");y(this,"children");y(this,"eventListeners");y(this,"_isRendered");y(this,"_revertData");Object.assign(this,IN(AN(e))),this._isRendered=!1,this._revertData=null}render(){const e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}apply(e){return this._revertData=ON(),this._renderNode({node:e,intoFragment:!1,isApplying:!0,revertData:this._revertData}),e}revert(e){if(!this._revertData)throw new we("ui-template-revert-not-applied",[this,e]);this._revertTemplateFromNode(e,this._revertData)}*getViews(){function*e(i){if(i.children)for(const r of i.children)zy(r)?yield r:hP(r)&&(yield*e(r))}yield*e(this)}static bind(e,i){return{to(r,s){return new _Se({eventNameOrFunction:r,attribute:r,observable:e,emitter:i,callback:s})},if(r,s,o){return new W8({observable:e,emitter:i,attribute:r,valueIfTrue:s,callback:o})}}}static extend(e,i){if(e._isRendered)throw new we("template-extend-render",[this,e]);K8(e,IN(AN(i)))}_renderNode(e){let i;if(e.node?i=this.tag&&this.text:i=this.tag?this.text:!this.text,i)throw new we("ui-template-wrong-syntax",this);return this.text?this._renderText(e):this._renderElement(e)}_renderElement(e){let i=e.node;return i||(i=e.node=document.createElementNS(this.ns||ySe,this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),i}_renderText(e){let i=e.node;return i?e.revertData.text=i.textContent:i=e.node=document.createTextNode(""),Tw(this.text)?this._bindToObservable({schema:this.text,updater:ESe(i),data:e}):i.textContent=this.text.join(""),i}_renderAttributes(e){if(!this.attributes)return;const i=e.node,r=e.revertData;for(const s in this.attributes){const o=i.getAttribute(s),a=this.attributes[s];r&&(r.attributes[s]=o);const l=xN(a)?a[0].ns:null;if(Tw(a)){const c=xN(a)?a[0].value:a;r&&RN(s)&&c.unshift(o),this._bindToObservable({schema:c,updater:CSe(i,s,l),data:e})}else if(s=="style"&&typeof a[0]!="string")this._renderStyleAttribute(a[0],e);else{r&&o&&RN(s)&&a.unshift(o);const c=a.map(u=>u&&(u.value||u)).reduce((u,d)=>u.concat(d),[]).reduce(G8,"");im(c)||i.setAttributeNS(l,s,c)}}}_renderStyleAttribute(e,i){const r=i.node;for(const s in e){const o=e[s];Tw(o)?this._bindToObservable({schema:[o],updater:TSe(r,s),data:i}):r.style[s]=o}}_renderElementChildren(e){const i=e.node,r=e.intoFragment?document.createDocumentFragment():i,s=e.isApplying;let o=0;for(const a of this.children)if(mP(a)){if(!s){a.setParent(i);for(const l of a)r.appendChild(l.element)}}else if(zy(a))s||(a.isRendered||a.render(),r.appendChild(a.element));else if(bu(a))r.appendChild(a);else if(s){const l=e.revertData,c=ON();l.children.push(c),a._renderNode({intoFragment:!1,node:r.childNodes[o++],isApplying:!0,revertData:c})}else r.appendChild(a.render());e.intoFragment&&i.appendChild(r)}_setUpListeners(e){if(this.eventListeners)for(const i in this.eventListeners){const r=this.eventListeners[i].map(s=>{const[o,a]=i.split("@");return s.activateDomEventListener(o,a,e)});e.revertData&&e.revertData.bindings.push(r)}}_bindToObservable({schema:e,updater:i,data:r}){const s=r.revertData;j8(e,i,r);const o=e.filter(a=>!im(a)).filter(a=>a.observable).map(a=>a.activateAttributeListener(e,i,r));s&&s.bindings.push(o)}_revertTemplateFromNode(e,i){for(const s of i.bindings)for(const o of s)o();if(i.text){e.textContent=i.text;return}const r=e;for(const s in i.attributes){const o=i.attributes[s];o===null?r.removeAttribute(s):r.setAttribute(s,o)}for(let s=0;s<i.children.length;++s)this._revertTemplateFromNode(r.childNodes[s],i.children[s])}}class Pv{constructor(t){y(this,"attribute");y(this,"observable");y(this,"emitter");y(this,"callback");this.attribute=t.attribute,this.observable=t.observable,this.emitter=t.emitter,this.callback=t.callback}getValue(t){const e=this.observable[this.attribute];return this.callback?this.callback(e,t):e}activateAttributeListener(t,e,i){const r=()=>j8(t,e,i);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,r),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,r)}}}class _Se extends Pv{constructor(e){super(e);y(this,"eventNameOrFunction");this.eventNameOrFunction=e.eventNameOrFunction}activateDomEventListener(e,i,r){const s=(o,a)=>{(!i||a.target.matches(i))&&(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(a):this.observable.fire(this.eventNameOrFunction,a))};return this.emitter.listenTo(r.node,e,s),()=>{this.emitter.stopListening(r.node,e,s)}}}class W8 extends Pv{constructor(e){super(e);y(this,"valueIfTrue");this.valueIfTrue=e.valueIfTrue}getValue(e){const i=super.getValue(e);return im(i)?!1:this.valueIfTrue||!0}}function Tw(n){return n?(n.value&&(n=n.value),Array.isArray(n)?n.some(Tw):n instanceof Pv):!1}function kSe(n,t){return n.map(e=>e instanceof Pv?e.getValue(t):e)}function j8(n,t,{node:e}){const i=kSe(n,e);let r;n.length==1&&n[0]instanceof W8?r=i[0]:r=i.reduce(G8,""),im(r)?t.remove():t.set(r)}function ESe(n){return{set(t){n.textContent=t},remove(){n.textContent=""}}}function CSe(n,t,e){return{set(i){n.setAttributeNS(e,t,i)},remove(){n.removeAttributeNS(e,t)}}}function TSe(n,t){return{set(e){n.style[t]=e},remove(){n.style[t]=null}}}function AN(n){return T0(n,e=>{if(e&&(e instanceof Pv||hP(e)||zy(e)||mP(e)))return e})}function IN(n){if(typeof n=="string"?n=ISe(n):n.text&&PSe(n),n.on&&(n.eventListeners=ASe(n.on),delete n.on),!n.text){n.attributes&&SSe(n.attributes);const t=[];if(n.children)if(mP(n.children))t.push(n.children);else for(const e of n.children)hP(e)||zy(e)||bu(e)?t.push(e):t.push(new Ks(e));n.children=t}return n}function SSe(n){for(const t in n)n[t].value&&(n[t].value=jn(n[t].value)),q8(n,t)}function ASe(n){for(const t in n)q8(n,t);return n}function ISe(n){return{text:[n]}}function PSe(n){n.text=jn(n.text)}function q8(n,t){n[t]=jn(n[t])}function G8(n,t){return im(t)?n:im(n)?t:`${n} ${t}`}function PN(n,t){for(const e in t)n[e]?n[e].push(...t[e]):n[e]=t[e]}function K8(n,t){if(t.attributes&&(n.attributes||(n.attributes={}),PN(n.attributes,t.attributes)),t.eventListeners&&(n.eventListeners||(n.eventListeners={}),PN(n.eventListeners,t.eventListeners)),t.text&&n.text.push(...t.text),t.children&&t.children.length){if(n.children.length!=t.children.length)throw new we("ui-template-extend-children-mismatch",n);let e=0;for(const i of t.children)K8(n.children[e++],i)}}function im(n){return!n&&n!==0}function zy(n){return n instanceof dt}function hP(n){return n instanceof Ks}function mP(n){return n instanceof tr}function xN(n){return mo(n[0])&&n[0].ns}function ON(){return{children:[],bindings:[],attributes:{}}}function RN(n){return n=="class"||n=="style"}class dt extends ds(Wn()){constructor(e){super();y(this,"element");y(this,"isRendered");y(this,"locale");y(this,"t");y(this,"template");y(this,"_viewCollections");y(this,"_unboundChildren");y(this,"_bindTemplate");this.element=null,this.isRendered=!1,this.locale=e,this.t=e&&e.t,this._viewCollections=new cr,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(i,r)=>{r.locale=e,r.t=e&&e.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Ks.bind(this,this)}createCollection(e){const i=new tr(e);return this._viewCollections.add(i),i}registerChild(e){po(e)||(e=[e]);for(const i of e)this._unboundChildren.add(i)}deregisterChild(e){po(e)||(e=[e]);for(const i of e)this._unboundChildren.remove(i)}setTemplate(e){this.template=new Ks(e)}extendTemplate(e){Ks.extend(this.template,e)}render(){if(this.isRendered)throw new we("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(e=>e.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function pc({emitter:n,activator:t,callback:e,contextElements:i,listenerOptions:r}){n.listenTo(document,"mousedown",(s,o)=>{if(!t())return;const a=typeof o.composedPath=="function"?o.composedPath():[],l=typeof i=="function"?i():i;for(const c of l)if(c.contains(o.target)||a.includes(c))return;e()},r)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Nd(n){class t extends n{disableCssTransitions(){this._isCssTransitionsDisabled=!0}enableCssTransitions(){this._isCssTransitionsDisabled=!1}constructor(...i){super(...i),this.set("_isCssTransitionsDisabled",!1),this.initializeCssTransitionDisablerMixin()}initializeCssTransitionDisablerMixin(){this.extendTemplate({attributes:{class:[this.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}}return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function bl({view:n}){n.listenTo(n.element,"submit",(t,e)=>{e.preventDefault(),n.fire("submit")},{useCapture:!0})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function xv({keystrokeHandler:n,focusTracker:t,gridItems:e,numberOfColumns:i,uiLanguageDirection:r}){const s=typeof i=="number"?()=>i:i;n.set("arrowright",o((c,u)=>r==="rtl"?l(c,u.length):a(c,u.length))),n.set("arrowleft",o((c,u)=>r==="rtl"?a(c,u.length):l(c,u.length))),n.set("arrowup",o((c,u)=>{let d=c-s();return d<0&&(d=c+s()*Math.floor(u.length/s()),d>u.length-1&&(d-=s())),d})),n.set("arrowdown",o((c,u)=>{let d=c+s();return d>u.length-1&&(d=c%s()),d}));function o(c){return u=>{const d=e.find(g=>g.element===t.focusedElement),f=e.getIndex(d),h=c(f,e);e.get(h).focus(),u.stopPropagation(),u.preventDefault()}}function a(c,u){return c===u-1?0:c+1}function l(c,u){return c===0?u-1:c-1}}const g_=class g_ extends dt{constructor(){super();const t=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.set("isVisible",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",t.if("isVisible","ck-hidden",e=>!e),"ck-reset_all-excluded",t.if("isColorInherited","ck-icon_inherit-color")],viewBox:t.to("viewBox"),"aria-hidden":!0}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const e=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg");if(!e)throw new we("ui-iconview-invalid-svg",this);const i=e.getAttribute("viewBox");i&&(this.viewBox=i);for(const{name:r,value:s}of Array.from(e.attributes))g_.presentationalAttributeNames.includes(r)&&this.element.setAttribute(r,s);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;e.childNodes.length>0;)this.element.appendChild(e.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(t=>{t.style.fill=this.fillColor})}};y(g_,"presentationalAttributeNames",["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"]);let Uo=g_;class Y8 extends dt{constructor(){super(),this.set({style:void 0,text:void 0,id:void 0});const t=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:t.to("style"),id:t.to("id")},children:[{text:t.to("text")}]})}}class wt extends dt{constructor(e,i=new Y8){super(e);y(this,"children");y(this,"labelView");y(this,"iconView");y(this,"keystrokeView");y(this,"_focusDelayed",null);const r=this.bindTemplate,s=cs();this.set("_ariaPressed",!1),this.set("_ariaChecked",!1),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",`ck-editor__aria-label_${s}`),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._setupLabelView(i),this.iconView=new Uo,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.iconView.bind("content").to(this,"icon"),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const o={tag:"button",attributes:{class:["ck","ck-button",r.to("class"),r.if("isEnabled","ck-disabled",a=>!a),r.if("isVisible","ck-hidden",a=>!a),r.to("isOn",a=>a?"ck-on":"ck-off"),r.if("withText","ck-button_with-text"),r.if("withKeystroke","ck-button_with-keystroke")],role:r.to("role"),type:r.to("type",a=>a||"button"),tabindex:r.to("tabindex"),"aria-checked":r.to("_ariaChecked"),"aria-pressed":r.to("_ariaPressed"),"aria-label":r.to("ariaLabel"),"aria-labelledby":r.to("ariaLabelledBy"),"aria-disabled":r.if("isEnabled",!0,a=>!a),"data-cke-tooltip-text":r.to("_tooltipString"),"data-cke-tooltip-position":r.to("tooltipPosition")},children:this.children,on:{click:r.to(a=>{this.isEnabled?this.fire("execute"):a.preventDefault()})}};this.bind("_ariaPressed").to(this,"isOn",this,"isToggleable",this,"role",(a,l,c)=>!l||VN(c)?!1:String(!!a)),this.bind("_ariaChecked").to(this,"isOn",this,"isToggleable",this,"role",(a,l,c)=>!l||!VN(c)?!1:String(!!a)),Vt.isSafari&&(this._focusDelayed||(this._focusDelayed=WI(()=>this.focus(),0)),o.on.mousedown=r.to(()=>{this._focusDelayed()}),o.on.mouseup=r.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(o)}render(){super.render(),this.icon&&this.children.add(this.iconView),this.on("change:icon",(e,i,r,s)=>{r&&!s?this.children.add(this.iconView,0):!r&&s&&this.children.remove(this.iconView)}),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_setupLabelView(e){return e.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),e}_createKeystrokeView(){const e=new dt;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",i=>Vy(i))}]}),e}_getTooltipString(e,i,r){return e?typeof e=="string"?e:(r&&(r=Vy(r)),e instanceof Function?e(i,r):`${i}${r?` (${r})`:""}`):""}}function VN(n){switch(n){case"radio":case"checkbox":case"option":case"switch":case"menuitemcheckbox":case"menuitemradio":return!0;default:return!1}}class wl extends dt{constructor(e,i={}){super(e);y(this,"children");y(this,"iconView");const r=this.bindTemplate;this.set("label",i.label||""),this.set("class",i.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",r.to("class")]},children:this.children}),i.icon&&(this.iconView=new Uo,this.iconView.content=i.icon,this.children.add(this.iconView));const s=new dt(e);s.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"],role:"presentation"},children:[{text:r.to("label")}]}),this.children.add(s)}}class ur extends ri(){constructor(e){super();y(this,"focusables");y(this,"focusTracker");y(this,"keystrokeHandler");y(this,"actions");if(this.focusables=e.focusables,this.focusTracker=e.focusTracker,this.keystrokeHandler=e.keystrokeHandler,this.actions=e.actions,e.actions&&e.keystrokeHandler)for(const i in e.actions){let r=e.actions[i];typeof r=="string"&&(r=[r]);for(const s of r)e.keystrokeHandler.set(s,(o,a)=>{this[i](),a()},e.keystrokeHandlerOptions)}this.on("forwardCycle",()=>this.focusFirst(),{priority:"low"}),this.on("backwardCycle",()=>this.focusLast(),{priority:"low"})}get first(){return this.focusables.find(tE)||null}get last(){return this.focusables.filter(tE).slice(-1)[0]||null}get next(){return this._getDomFocusableItem(1)}get previous(){return this._getDomFocusableItem(-1)}get current(){let e=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((i,r)=>{const s=i.element===this.focusTracker.focusedElement;return s&&(e=r),s}),e)}focusFirst(){this._focus(this.first,1)}focusLast(){this._focus(this.last,-1)}focusNext(){const e=this.next;if(e&&this.focusables.getIndex(e)===this.current){this.fire("forwardCycle");return}e===this.first?this.fire("forwardCycle"):this._focus(e,1)}focusPrevious(){const e=this.previous;if(e&&this.focusables.getIndex(e)===this.current){this.fire("backwardCycle");return}e===this.last?this.fire("backwardCycle"):this._focus(e,-1)}chain(e){const i=()=>this.current===null?null:this.focusables.get(this.current);this.listenTo(e,"forwardCycle",r=>{const s=i();this.focusNext(),s!==i()&&r.stop()},{priority:"low"}),this.listenTo(e,"backwardCycle",r=>{const s=i();this.focusPrevious(),s!==i()&&r.stop()},{priority:"low"})}unchain(e){this.stopListening(e)}_focus(e,i){e&&this.focusTracker.focusedElement!==e.element&&e.focus(i)}_getDomFocusableItem(e){const i=this.focusables.length;if(!i)return null;const r=this.current;if(r===null)return this[e===1?"first":"last"];let s=this.focusables.get(r),o=(r+i+e)%i;do{const a=this.focusables.get(o);if(tE(a)){s=a;break}o=(o+i+e)%i}while(o!==r);return s}}function tE(n){return Ov(n)&&dl(n.element)}function Ov(n){return"focus"in n&&typeof n.focus=="function"}function xSe(n){return Ov(n)&&"focusCycler"in n&&n.focusCycler instanceof ur}function OSe(n){class t extends n{constructor(...r){super(...r);y(this,"_onDragBound",this._onDrag.bind(this));y(this,"_onDragEndBound",this._onDragEnd.bind(this));y(this,"_lastDraggingCoordinates",{x:0,y:0});this.on("render",()=>{this._attachListeners()}),this.set("isDragging",!1)}_attachListeners(){this.listenTo(this.element,"mousedown",this._onDragStart.bind(this)),this.listenTo(this.element,"touchstart",this._onDragStart.bind(this))}_attachDragListeners(){this.listenTo(at.document,"mouseup",this._onDragEndBound),this.listenTo(at.document,"touchend",this._onDragEndBound),this.listenTo(at.document,"mousemove",this._onDragBound),this.listenTo(at.document,"touchmove",this._onDragBound)}_detachDragListeners(){this.stopListening(at.document,"mouseup",this._onDragEndBound),this.stopListening(at.document,"touchend",this._onDragEndBound),this.stopListening(at.document,"mousemove",this._onDragBound),this.stopListening(at.document,"touchmove",this._onDragBound)}_onDragStart(r,s){if(!this._isHandleElementPressed(s))return;this._attachDragListeners();let o=0,a=0;s instanceof MouseEvent?(o=s.clientX,a=s.clientY):(o=s.touches[0].clientX,a=s.touches[0].clientY),this._lastDraggingCoordinates={x:o,y:a},this.isDragging=!0}_onDrag(r,s){if(!this.isDragging){this._detachDragListeners();return}let o=0,a=0;s instanceof MouseEvent?(o=s.clientX,a=s.clientY):(o=s.touches[0].clientX,a=s.touches[0].clientY),s.preventDefault(),this.fire("drag",{deltaX:Math.round(o-this._lastDraggingCoordinates.x),deltaY:Math.round(a-this._lastDraggingCoordinates.y)}),this._lastDraggingCoordinates={x:o,y:a}}_onDragEnd(){this._detachDragListeners(),this.isDragging=!1}_isHandleElementPressed(r){return this.dragHandleElement?this.dragHandleElement===r.target||r.target instanceof HTMLElement&&this.dragHandleElement.contains(r.target):!1}}return t}class RSe extends dt{constructor(e){super(e);y(this,"children");y(this,"keystrokes");y(this,"focusCycler");y(this,"_focusTracker");y(this,"_focusables");this.children=this.createCollection(),this.keystrokes=new oi,this._focusTracker=new Mn,this._focusables=new tr,this.focusCycler=new ur({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:this.children})}render(){super.render(),this.keystrokes.listenTo(this.element)}setButtons(e){for(const i of e){const r=new wt(this.locale);let s;r.on("execute",()=>i.onExecute()),i.onCreate&&i.onCreate(r);for(s in i)s!="onExecute"&&s!="onCreate"&&r.set(s,i[s]);this.children.add(r)}this._updateFocusCyclableItems()}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}_updateFocusCyclableItems(){Array.from(this.children).forEach(e=>{this._focusables.add(e),this._focusTracker.add(e.element)})}}class VSe extends dt{constructor(e){super(e);y(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__content"]},children:this.children})}reset(){for(;this.children.length;)this.children.remove(0)}}const vs={SCREEN_CENTER:"screen-center",EDITOR_CENTER:"editor-center",EDITOR_TOP_SIDE:"editor-top-side",EDITOR_TOP_CENTER:"editor-top-center",EDITOR_BOTTOM_CENTER:"editor-bottom-center",EDITOR_ABOVE_CENTER:"editor-above-center",EDITOR_BELOW_CENTER:"editor-below-center"},DN=gc("px"),p_=class p_ extends OSe(dt){constructor(e,{getCurrentDomRoot:i,getViewportOffset:r,keystrokeHandlerOptions:s}){super(e);y(this,"parts");y(this,"headerView");y(this,"closeButtonView");y(this,"actionsView");y(this,"contentView");y(this,"keystrokes");y(this,"focusTracker");y(this,"wasMoved",!1);y(this,"_getCurrentDomRoot");y(this,"_getViewportOffset");y(this,"_focusables");y(this,"_focusCycler");const o=this.bindTemplate,a=e.t;this.set("className",""),this.set("ariaLabel",a("Editor dialog")),this.set("isModal",!1),this.set("position",vs.SCREEN_CENTER),this.set("_isVisible",!1),this.set("_isTransparent",!1),this.set("_top",0),this.set("_left",0),this._getCurrentDomRoot=i,this._getViewportOffset=r,this.decorate("moveTo"),this.parts=this.createCollection(),this.keystrokes=new oi,this.focusTracker=new Mn,this._focusables=new tr,this._focusCycler=new ur({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"},keystrokeHandlerOptions:s}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog-overlay",o.if("isModal","ck-dialog-overlay__transparent",l=>!l),o.if("_isVisible","ck-hidden",l=>!l)],tabindex:"-1"},children:[{tag:"div",attributes:{tabindex:"-1",class:["ck","ck-dialog",o.if("isModal","ck-dialog_modal"),o.to("className")],role:"dialog","aria-label":o.to("ariaLabel"),style:{top:o.to("_top",l=>DN(l)),left:o.to("_left",l=>DN(l)),visibility:o.if("_isTransparent","hidden")}},children:this.parts}]})}render(){super.render(),this.keystrokes.set("Esc",(e,i)=>{e.defaultPrevented||(this.fire("close",{source:"escKeyPress"}),i())}),this.on("drag",(e,{deltaX:i,deltaY:r})=>{this.wasMoved=!0,this.moveBy(i,r)}),this.listenTo(at.window,"resize",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.listenTo(at.document,"scroll",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.on("change:_isVisible",(e,i,r)=>{r&&(this._isTransparent=!0,setTimeout(()=>{this.updatePosition(),this._isTransparent=!1,this.focus()},10))}),this.keystrokes.listenTo(this.element)}get dragHandleElement(){return this.headerView&&!this.isModal?this.headerView.element:null}setupParts({icon:e,title:i,hasCloseButton:r=!0,content:s,actionButtons:o}){i&&(this.headerView=new wl(this.locale,{icon:e}),r&&(this.closeButtonView=this._createCloseButton(),this.headerView.children.add(this.closeButtonView)),this.headerView.label=i,this.ariaLabel=i,this.parts.add(this.headerView,0)),s&&(s instanceof dt&&(s=[s]),this.contentView=new VSe(this.locale),this.contentView.children.addMany(s),this.parts.add(this.contentView)),o&&(this.actionsView=new RSe(this.locale),this.actionsView.setButtons(o),this.parts.add(this.actionsView)),this._updateFocusCyclableItems()}focus(){this._focusCycler.focusFirst()}moveTo(e,i){const r=this._getViewportRect(),s=this._getDialogRect();e+s.width>r.right&&(e=r.right-s.width),e<r.left&&(e=r.left),i<r.top&&(i=r.top),this._moveTo(e,i)}_moveTo(e,i){this._left=e,this._top=i}moveBy(e,i){this.moveTo(this._left+e,this._top+i)}_moveOffScreen(){this._moveTo(-9999,-9999)}updatePosition(){if(!this.element||!this.element.parentNode)return;const e=this._getViewportRect();let i=this.position,r;this._getCurrentDomRoot()?r=this._getVisibleDomRootRect(e):i=vs.SCREEN_CENTER;const s=p_.defaultOffset,o=this._getDialogRect();switch(i){case vs.EDITOR_TOP_SIDE:{if(r){const a=this.locale.contentLanguageDirection==="ltr"?r.right-o.width-s:r.left+s;this.moveTo(a,r.top+s)}else this._moveOffScreen();break}case vs.EDITOR_CENTER:{r?this.moveTo(Math.round(r.left+r.width/2-o.width/2),Math.round(r.top+r.height/2-o.height/2)):this._moveOffScreen();break}case vs.SCREEN_CENTER:{this.moveTo(Math.round((e.width-o.width)/2),Math.round((e.height-o.height)/2));break}case vs.EDITOR_TOP_CENTER:{r?this.moveTo(Math.round(r.left+r.width/2-o.width/2),r.top+s):this._moveOffScreen();break}case vs.EDITOR_BOTTOM_CENTER:{r?this.moveTo(Math.round(r.left+r.width/2-o.width/2),r.bottom-o.height-s):this._moveOffScreen();break}case vs.EDITOR_ABOVE_CENTER:{r?this.moveTo(Math.round(r.left+r.width/2-o.width/2),r.top-o.height-s):this._moveOffScreen();break}case vs.EDITOR_BELOW_CENTER:{r?this.moveTo(Math.round(r.left+r.width/2-o.width/2),r.bottom+s):this._moveOffScreen();break}}}_getVisibleDomRootRect(e){let i=new It(this._getCurrentDomRoot()).getVisible();if(i){if(i=e.getIntersection(i),!i)return null}else return null;return i}_getDialogRect(){return new It(this.element.firstElementChild)}_getViewportRect(){const e=new It(at.window);if(this.isModal)return e;const i={top:0,bottom:0,left:0,right:0,...this._getViewportOffset()};return e.top+=i.top,e.height-=i.top,e.bottom-=i.bottom,e.height-=i.bottom,e.left+=i.left,e.right-=i.right,e.width-=i.left+i.right,e}_updateFocusCyclableItems(){const e=[];if(this.contentView)for(const i of this.contentView.children)Ov(i)&&e.push(i);this.actionsView&&e.push(this.actionsView),this.closeButtonView&&e.push(this.closeButtonView),e.forEach(i=>{this._focusables.add(i),this.focusTracker.add(i.element),xSe(i)&&this._focusCycler.chain(i.focusCycler)})}_createCloseButton(){const e=new wt(this.locale),i=this.locale.t;return e.set({label:i("Close"),tooltip:!0,icon:L0}),e.on("execute",()=>this.fire("close",{source:"closeButton"})),e}};y(p_,"defaultOffset",15);let nv=p_;const ta=class ta extends Ne{constructor(e){super(e);y(this,"view");y(this,"_onHide");const i=e.t;this._initShowHideListeners(),this._initFocusToggler(),this._initMultiRootIntegration(),this.set({id:null,isOpen:!1}),e.accessibility.addKeystrokeInfos({categoryId:"navigation",keystrokes:[{label:i("Move focus in and out of an active dialog window"),keystroke:"Ctrl+F6",mayRequireFn:!0}]})}static get pluginName(){return"Dialog"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),ta._visibleDialogPlugin===this&&this._unlockBodyScroll()}_initShowHideListeners(){this.on("show",(e,i)=>{this._show(i)}),this.on("show",(e,i)=>{i.onShow&&i.onShow(this)},{priority:"low"}),this.on("hide",()=>{ta._visibleDialogPlugin&&ta._visibleDialogPlugin._hide()}),this.on("hide",()=>{this._onHide&&(this._onHide(this),this._onHide=void 0)},{priority:"low"})}_initFocusToggler(){const e=this.editor;e.keystrokes.set("Ctrl+F6",(i,r)=>{!this.isOpen||this.view.isModal||(this.view.focusTracker.isFocused?e.editing.view.focus():this.view.focus(),r())})}_initMultiRootIntegration(){const e=this.editor.model;e.document.on("change:data",()=>{if(!this.view)return;const i=e.document.differ.getChangedRoots();for(const r of i)r.state&&this.view.updatePosition()})}show(e){this.hide(),this.fire(`show:${e.id}`,e)}_show({id:e,icon:i,title:r,hasCloseButton:s=!0,content:o,actionButtons:a,className:l,isModal:c,position:u,onHide:d,keystrokeHandlerOptions:f}){const h=this.editor;this.view=new nv(h.locale,{getCurrentDomRoot:()=>h.editing.view.getDomRoot(h.model.document.selection.anchor.root.rootName),getViewportOffset:()=>h.ui.viewportOffset,keystrokeHandlerOptions:f});const g=this.view;g.on("close",()=>{this.hide()}),h.ui.view.body.add(g),h.keystrokes.listenTo(g.element),u||(u=c?vs.SCREEN_CENTER:vs.EDITOR_CENTER),c&&this._lockBodyScroll(),g.set({position:u,_isVisible:!0,className:l,isModal:c}),g.setupParts({icon:i,title:r,hasCloseButton:s,content:o,actionButtons:a}),this.id=e,d&&(this._onHide=d),this.isOpen=!0,ta._visibleDialogPlugin=this}hide(){ta._visibleDialogPlugin&&ta._visibleDialogPlugin.fire(`hide:${ta._visibleDialogPlugin.id}`)}_hide(){if(!this.view)return;const e=this.editor,i=this.view;i.isModal&&this._unlockBodyScroll(),i.contentView&&i.contentView.reset(),e.ui.view.body.remove(i),e.ui.focusTracker.remove(i.element),e.keystrokes.stopListening(i.element),i.destroy(),e.editing.view.focus(),this.id=null,this.isOpen=!1,ta._visibleDialogPlugin=null}_lockBodyScroll(){document.documentElement.classList.add("ck-dialog-scroll-locked")}_unlockBodyScroll(){document.documentElement.classList.remove("ck-dialog-scroll-locked")}};y(ta,"_visibleDialogPlugin");let Ld=ta;class Dm extends wt{constructor(e,i=new Y8){super(e,i);y(this,"_checkIconHolderView",new DSe);this.set({hasCheckSpace:!1,_hasCheck:this.isToggleable});const r=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-list-item-button",r.if("isToggleable","ck-list-item-button_toggleable")]}}),this.bind("_hasCheck").to(this,"hasCheckSpace",this,"isToggleable",(s,o)=>s||o)}render(){super.render(),this._hasCheck&&this.children.add(this._checkIconHolderView,0),this._watchCheckIconHolderMount()}_watchCheckIconHolderMount(){this._checkIconHolderView.bind("isOn").to(this,"isOn",e=>this.isToggleable&&e),this.on("change:_hasCheck",(e,i,r)=>{const{children:s,_checkIconHolderView:o}=this;r?s.add(o,0):s.remove(o)})}}class DSe extends dt{constructor(){super();y(this,"children");y(this,"_checkIconView",this._createCheckIconView());const e=this.bindTemplate;this.children=this.createCollection(),this.set("isOn",!1),this.setTemplate({tag:"span",children:this.children,attributes:{class:["ck","ck-list-item-button__check-holder",e.to("isOn",i=>i?"ck-on":"ck-off")]}})}render(){super.render(),this.isOn&&this.children.add(this._checkIconView,0),this._watchCheckIconMount()}_watchCheckIconMount(){this.on("change:isOn",(e,i,r)=>{const{children:s,_checkIconView:o}=this;r&&!s.has(o)?s.add(o):!r&&s.has(o)&&s.remove(o)})}_createCheckIconView(){const e=new Uo;return e.content=M0,e.extendTemplate({attributes:{class:"ck-list-item-button__check-icon"}}),e}}class Ti extends Dm{constructor(t){super(t),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}class js extends dt{constructor(e){super(e);y(this,"id");this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${cs()}`;const i=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:i.to("for")},children:[{text:i.to("text")}]})}}class NSe extends dt{constructor(t,e){super(t);const i=t.t,r=new js;r.text=i("Help Contents. To close this dialog press ESC."),this.setTemplate({tag:"div",attributes:{class:["ck","ck-accessibility-help-dialog__content"],"aria-labelledby":r.id,role:"document",tabindex:-1},children:[or(document,"p",{},i("Below, you can find a list of keyboard shortcuts that can be used in the editor.")),...this._createCategories(Array.from(e.values())),r]})}focus(){this.element.focus()}_createCategories(t){return t.map(e=>{const i=[or(document,"h3",{},e.label),...Array.from(e.groups.values()).map(r=>this._createGroup(r)).flat()];return e.description&&i.splice(1,0,or(document,"p",{},e.description)),or(document,"section",{},i)})}_createGroup(t){const e=t.keystrokes.sort((r,s)=>r.label.localeCompare(s.label)).map(r=>this._createGroupRow(r)).flat(),i=[or(document,"dl",{},e)];return t.label&&i.unshift(or(document,"h4",{},t.label)),i}_createGroupRow(t){const e=this.locale.t,i=or(document,"dt"),r=or(document,"dd"),s=MSe(t.keystroke),o=[];for(const a of s)o.push(a.map(LSe).join(""));return i.innerHTML=t.label,r.innerHTML=o.join(", ")+(t.mayRequireFn&&Vt.isMac?` ${e("(may require <kbd>Fn</kbd>)")}`:""),[i,r]}}function LSe(n){return Vy(n).split("+").map(t=>`<kbd>${t}</kbd>`).join("+")}function MSe(n){return typeof n=="string"?[[n]]:typeof n[0]=="string"?[n]:n}class $Se extends Ne{constructor(){super(...arguments);y(this,"contentView",null)}static get requires(){return[Ld]}static get pluginName(){return"AccessibilityHelp"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=e.locale.t;e.ui.componentFactory.add("accessibilityHelp",()=>{const r=this._createButton(wt);return r.set({tooltip:!0,withText:!1,label:i("Accessibility help")}),r}),e.ui.componentFactory.add("menuBar:accessibilityHelp",()=>{const r=this._createButton(Ti);return r.label=i("Accessibility"),r}),e.keystrokes.set("Alt+0",(r,s)=>{this._toggleDialog(),s()}),this._setupRootLabels()}_createButton(e){const i=this.editor,r=i.plugins.get("Dialog"),s=i.locale,o=new e(s);return o.set({keystroke:"Alt+0",icon:uN,isToggleable:!0}),o.on("execute",()=>this._toggleDialog()),o.bind("isOn").to(r,"id",a=>a==="accessibilityHelp"),o}_setupRootLabels(){const e=this.editor,i=e.editing.view,r=e.t;e.ui.on("ready",()=>{i.change(o=>{for(const a of i.document.roots)s(o,a)}),e.on("addRoot",(o,a)=>{const l=e.editing.view.document.getRoot(a.rootName);i.change(c=>s(c,l))},{priority:"low"})});function s(o,a){const c=[a.getAttribute("aria-label"),r("Press %0 for help.",[Vy("Alt+0")])].filter(u=>u).join(". ");o.setAttribute("aria-label",c,a)}}_toggleDialog(){const e=this.editor,i=e.plugins.get("Dialog"),r=e.locale.t;this.contentView||(this.contentView=new NSe(e.locale,e.accessibility.keystrokeInfos)),i.id==="accessibilityHelp"?i.hide():i.show({id:"accessibilityHelp",className:"ck-accessibility-help-dialog",title:r("Accessibility help"),icon:uN,hasCloseButton:!0,content:this.contentView})}}const Po=class Po extends tr{constructor(e,i=[]){super(i);y(this,"locale");y(this,"_bodyCollectionContainer");this.locale=e}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new Ks({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection,role:"application"},children:this}).render(),(!Po._bodyWrapper||!Po._bodyWrapper.isConnected)&&(Po._bodyWrapper=or(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(Po._bodyWrapper)),Po._bodyWrapper.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove(),Po._bodyWrapper&&!Po._bodyWrapper.childElementCount&&(Po._bodyWrapper.remove(),delete Po._bodyWrapper)}};y(Po,"_bodyWrapper");let Hy=Po;class Md extends wt{constructor(e){super(e);y(this,"toggleSwitchView");this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const e=new dt;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),e}}class NN extends Q8(wt){}class BSe extends Q8(Dm){}function Q8(n){class t extends n{constructor(...r){super(...r);y(this,"buttonView");y(this,"_fileInputView");this.buttonView=this,this._fileInputView=new FSe(this.locale),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.on("execute",()=>{this._fileInputView.open()}),this.extendTemplate({attributes:{class:"ck-file-dialog-button"}})}render(){super.render(),this.children.add(this._fileInputView)}}return t}class FSe extends dt{constructor(t){super(t),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);const e=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:e.to("acceptedType"),multiple:e.to("allowMultipleFiles")},on:{change:e.to(()=>{var i,r;(r=(i=this.element)==null?void 0:i.files)!=null&&r.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}class gP extends dt{constructor(e,i){super(e);y(this,"buttonView");y(this,"children");const r=this.bindTemplate;this.set("isCollapsed",!1),this.set("label",""),this.buttonView=this._createButtonView(),this.children=this.createCollection(),this.set("_collapsibleAriaLabelUid",void 0),i&&this.children.addMany(i),this.setTemplate({tag:"div",attributes:{class:["ck","ck-collapsible",r.if("isCollapsed","ck-collapsible_collapsed")]},children:[this.buttonView,{tag:"div",attributes:{class:["ck","ck-collapsible__children"],role:"region",hidden:r.if("isCollapsed","hidden"),"aria-labelledby":r.to("_collapsibleAriaLabelUid")},children:this.children}]})}render(){super.render(),this._collapsibleAriaLabelUid=this.buttonView.labelView.element.id}focus(){this.buttonView.focus()}_createButtonView(){const e=new wt(this.locale),i=e.bindTemplate;return e.set({withText:!0,icon:$0}),e.extendTemplate({attributes:{"aria-expanded":i.to("isOn",r=>String(r))}}),e.bind("label").to(this),e.bind("isOn").to(this,"isCollapsed",r=>!r),e.on("execute",()=>{this.isCollapsed=!this.isCollapsed}),e}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Wy(n,t){const e=n.t,i={Black:e("Black"),"Dim grey":e("Dim grey"),Grey:e("Grey"),"Light grey":e("Light grey"),White:e("White"),Red:e("Red"),Orange:e("Orange"),Yellow:e("Yellow"),"Light green":e("Light green"),Green:e("Green"),Aquamarine:e("Aquamarine"),Turquoise:e("Turquoise"),"Light blue":e("Light blue"),Blue:e("Blue"),Purple:e("Purple")};return t.map(r=>{const s=i[r.label];return s&&s!=r.label&&(r.label=s),r})}function jy(n){return n.map(USe).filter(t=>!!t)}function USe(n){return typeof n=="string"?{model:n,label:n,hasBorder:!1,view:{name:"span",styles:{color:n}}}:{model:n.color,label:n.label||n.color,hasBorder:n.hasBorder===void 0?!1:n.hasBorder,view:{name:"span",styles:{color:`${n.color}`}}}}class Z8 extends wt{constructor(t){super(t);const e=this.bindTemplate;this.set("color",void 0),this.set("hasBorder",!1),this.icon=YCe,this.extendTemplate({attributes:{style:{backgroundColor:e.to("color",i=>Vt.isMediaForcedColors?null:i)},class:["ck","ck-color-grid__tile",e.if("hasBorder","ck-color-selector__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}class LN extends dt{constructor(e,i){super(e);y(this,"columns");y(this,"items");y(this,"focusTracker");y(this,"keystrokes");const r=i&&i.colorDefinitions?i.colorDefinitions:[];this.columns=(i==null?void 0:i.columns)||5;const s={gridTemplateColumns:`repeat( ${this.columns}, 1fr)`};this.set("selectedColor",void 0),this.items=this.createCollection(),this.focusTracker=new Mn,this.keystrokes=new oi,this.items.on("add",(o,a)=>{a.isOn=a.color===this.selectedColor}),r.forEach(o=>{const a=new Z8;a.set({color:o.color,label:o.label,tooltip:!0,hasBorder:o.options.hasBorder}),a.on("execute",()=>{this.fire("execute",{value:o.color,hasBorder:o.options.hasBorder,label:o.label})}),this.items.add(a)}),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:s}}),this.on("change:selectedColor",(o,a,l)=>{for(const c of this.items)c.isOn=c.color===l})}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){var e;super.render();for(const i of this.items)this.focusTracker.add(i.element);this.items.on("add",(i,r)=>{this.focusTracker.add(r.element)}),this.items.on("remove",(i,r)=>{this.focusTracker.remove(r.element)}),this.keystrokes.listenTo(this.element),xv({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:this.columns,uiLanguageDirection:(e=this.locale)==null?void 0:e.uiLanguageDirection})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function J8(n,t){if(!n)return"";const e=X8(n);if(!e)return"";if(e.space===t)return n;if(!jSe(e))return"";const r=F8[e.space][t];if(!r)return"";const s=r(e.space==="hex"?e.hexValue:e.values);return WSe(s,t)}function zSe(n){if(!n)return"";const t=X8(n);return t?t.space==="hex"?t.hexValue:J8(n,"hex"):"#000"}function HSe(n,t){customElements.get(n)===void 0&&customElements.define(n,t)}function WSe(n,t){switch(t){case"hex":return`#${n}`;case"rgb":return`rgb(${n[0]}, ${n[1]}, ${n[2]})`;case"hsl":return`hsl(${n[0]}, ${n[1]}%, ${n[2]}%)`;case"hwb":return`hwb(${n[0]}, ${n[1]}, ${n[2]})`;case"lab":return`lab(${n[0]}% ${n[1]} ${n[2]})`;case"lch":return`lch(${n[0]}% ${n[1]} ${n[2]})`;default:return""}}function X8(n){if(n.startsWith("#")){const e=yN(n);return{space:"hex",values:e.values,hexValue:n,alpha:e.alpha}}const t=yN(n);return t.space?t:null}function jSe(n){return Object.keys(F8).includes(n.space)}class Ri extends dt{constructor(e,i){super(e);y(this,"fieldView");y(this,"labelView");y(this,"statusView");y(this,"fieldWrapperChildren");const r=`ck-labeled-field-view-${cs()}`,s=`ck-labeled-field-view-status-${cs()}`;this.fieldView=i(this,r,s),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(r),this.statusView=this._createStatusView(s),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(a,l)=>a||l);const o=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",o.to("class"),o.if("isEnabled","ck-disabled",a=>!a),o.if("isEmpty","ck-labeled-field-view_empty"),o.if("isFocused","ck-labeled-field-view_focused"),o.if("placeholder","ck-labeled-field-view_placeholder"),o.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(e){const i=new js(this.locale);return i.for=e,i.bind("text").to(this,"label"),i}_createStatusView(e){const i=new dt(this.locale),r=this.bindTemplate;return i.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",r.if("errorText","ck-labeled-field-view__status_error"),r.if("_statusText","ck-hidden",s=>!s)],id:e,role:r.if("errorText","alert")},children:[{text:r.to("_statusText")}]}),i}focus(e){this.fieldView.focus(e)}}class qSe extends dt{constructor(e){super(e);y(this,"focusTracker");this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("tabIndex",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.set("ariaLabel",void 0),this.focusTracker=new Mn,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);const i=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",i.if("isFocused","ck-input_focused"),i.if("isEmpty","ck-input-text_empty"),i.if("hasError","ck-error")],id:i.to("id"),placeholder:i.to("placeholder"),tabindex:i.to("tabIndex"),readonly:i.to("isReadOnly"),"aria-invalid":i.if("hasError",!0),"aria-describedby":i.to("ariaDescribedById"),"aria-label":i.to("ariaLabel")},on:{input:i.to((...r)=>{this.fire("input",...r),this._updateIsEmpty()}),change:i.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(e,i,r)=>{this._setDomElementValue(r),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}reset(){this.value=this.element.value="",this._updateIsEmpty()}_updateIsEmpty(){this.isEmpty=GSe(this.element)}_setDomElementValue(e){this.element.value=!e&&e!==0?"":e}}function GSe(n){return!n.value}class e7 extends qSe{constructor(t){super(t),this.set("inputMode","text");const e=this.bindTemplate;this.extendTemplate({attributes:{inputmode:e.to("inputMode")}})}}class t7 extends e7{constructor(t){super(t),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}}class KSe extends e7{constructor(t,{min:e,max:i,step:r}={}){super(t);const s=this.bindTemplate;this.set("min",e),this.set("max",i),this.set("step",r),this.extendTemplate({attributes:{type:"number",class:["ck-input-number"],min:s.to("min"),max:s.to("max"),step:s.to("step")}})}}class YSe extends dt{constructor(e){super(e);y(this,"children");const i=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",i.to("position",r=>`ck-dropdown__panel_${r}`),i.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:i.to(r=>{r.target.tagName.toLocaleLowerCase()!=="input"&&r.preventDefault()})}})}focus(){if(this.children.length){const e=this.children.first;typeof e.focus=="function"?e.focus():mn("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){const e=this.children.last;typeof e.focusLast=="function"?e.focusLast():e.focus()}}}const hh=class hh extends dt{constructor(e,i,r){super(e);y(this,"buttonView");y(this,"panelView");y(this,"focusTracker");y(this,"keystrokes");y(this,"listView");y(this,"toolbarView");y(this,"menuView");const s=this.bindTemplate;this.buttonView=i,this.panelView=r,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new oi,this.focusTracker=new Mn,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",s.to("class"),s.if("isEnabled","ck-disabled",o=>!o)],id:s.to("id"),"aria-describedby":s.to("ariaDescribedById")},children:[i,r]}),i.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":s.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.on("change:isOpen",(i,r,s)=>{if(s)if(this.panelPosition==="auto"){const o=hh._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=o?o.name:this._defaultPanelPositionName}else this.panelView.position=this.panelPosition}),this.keystrokes.listenTo(this.element);const e=(i,r)=>{this.isOpen&&(this.isOpen=!1,r())};this.keystrokes.set("arrowdown",(i,r)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,r())}),this.keystrokes.set("arrowright",(i,r)=>{this.isOpen&&r()}),this.keystrokes.set("arrowleft",e),this.keystrokes.set("esc",e)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:e,north:i,southEast:r,southWest:s,northEast:o,northWest:a,southMiddleEast:l,southMiddleWest:c,northMiddleEast:u,northMiddleWest:d}=hh.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[r,s,l,c,e,o,a,u,d,i]:[s,r,c,l,e,a,o,d,u,i]}get _defaultPanelPositionName(){return this.locale.uiLanguageDirection==="rtl"?"sw":"se"}};y(hh,"defaultPanelPositions",{south:(e,i)=>({top:e.bottom,left:e.left-(i.width-e.width)/2,name:"s"}),southEast:e=>({top:e.bottom,left:e.left,name:"se"}),southWest:(e,i)=>({top:e.bottom,left:e.left-i.width+e.width,name:"sw"}),southMiddleEast:(e,i)=>({top:e.bottom,left:e.left-(i.width-e.width)/4,name:"sme"}),southMiddleWest:(e,i)=>({top:e.bottom,left:e.left-(i.width-e.width)*3/4,name:"smw"}),north:(e,i)=>({top:e.top-i.height,left:e.left-(i.width-e.width)/2,name:"n"}),northEast:(e,i)=>({top:e.top-i.height,left:e.left,name:"ne"}),northWest:(e,i)=>({top:e.top-i.height,left:e.left-i.width+e.width,name:"nw"}),northMiddleEast:(e,i)=>({top:e.top-i.height,left:e.left-(i.width-e.width)/4,name:"nme"}),northMiddleWest:(e,i)=>({top:e.top-i.height,left:e.left-(i.width-e.width)*3/4,name:"nmw"})}),y(hh,"_getOptimalPosition",zI);let qy=hh;class n7 extends wt{constructor(e){super(e);y(this,"arrowView");this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",i=>String(i))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new Uo;return e.content=$0,e.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),e}}class Ta extends dt{constructor(e){super(e);y(this,"children");const i=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",i.if("isVisible","ck-hidden",r=>!r)],role:"presentation"},children:this.children})}focus(){this.children.first&&this.children.first.focus()}}class pP extends dt{constructor(t){super(t),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}class Sw extends dt{constructor(e,i=new js){super(e);y(this,"labelView");y(this,"items");y(this,"children");const r=this.bindTemplate,s=new Nm(e);this.set({label:"",isVisible:!0}),this.labelView=i,this.labelView.bind("text").to(this,"label"),this.children=this.createCollection(),this.children.addMany([this.labelView,s]),s.set({role:"group",ariaLabelledBy:i.id}),s.focusTracker.destroy(),s.keystrokes.destroy(),this.items=s.items,this.setTemplate({tag:"li",attributes:{role:"presentation",class:["ck","ck-list__group",r.if("isVisible","ck-hidden",o=>!o)]},children:this.children})}focus(){if(this.items){const e=this.items.find(i=>!(i instanceof pP));e&&e.focus()}}}class Nm extends dt{constructor(e){super(e);y(this,"focusables");y(this,"items");y(this,"focusTracker");y(this,"keystrokes");y(this,"_focusCycler");y(this,"_listItemGroupToChangeListeners",new WeakMap);const i=this.bindTemplate;this.focusables=new tr,this.items=this.createCollection(),this.focusTracker=new Mn,this.keystrokes=new oi,this._focusCycler=new ur({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:i.to("role"),"aria-label":i.to("ariaLabel"),"aria-labelledby":i.to("ariaLabelledBy")},children:this.items})}render(){super.render();for(const e of this.items)e instanceof Sw?this._registerFocusableItemsGroup(e):e instanceof Ta&&this._registerFocusableListItem(e);this.items.on("change",(e,i)=>{for(const r of i.removed)r instanceof Sw?this._deregisterFocusableItemsGroup(r):r instanceof Ta&&this._deregisterFocusableListItem(r);for(const r of Array.from(i.added).reverse())r instanceof Sw?this._registerFocusableItemsGroup(r,i.index):this._registerFocusableListItem(r,i.index)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_registerFocusableListItem(e,i){this.focusTracker.add(e.element),this.focusables.add(e,i)}_deregisterFocusableListItem(e){this.focusTracker.remove(e.element),this.focusables.remove(e)}_getOnGroupItemsChangeCallback(e){return(i,r)=>{for(const s of r.removed)this._deregisterFocusableListItem(s);for(const s of Array.from(r.added).reverse())this._registerFocusableListItem(s,this.items.getIndex(e)+r.index)}}_registerFocusableItemsGroup(e,i){Array.from(e.items).forEach((s,o)=>{const a=typeof i<"u"?i+o:void 0;this._registerFocusableListItem(s,a)});const r=this._getOnGroupItemsChangeCallback(e);this._listItemGroupToChangeListeners.set(e,r),e.items.on("change",r)}_deregisterFocusableItemsGroup(e){for(const i of e.items)this._deregisterFocusableListItem(i);e.items.off("change",this._listItemGroupToChangeListeners.get(e)),this._listItemGroupToChangeListeners.delete(e)}}const MN=gc("px"),QSe={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}},Xs=class Xs extends dt{constructor(e){super(e);y(this,"content");y(this,"_pinWhenIsVisibleCallback");y(this,"_resizeObserver");const i=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this._resizeObserver=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",i.to("position",r=>`ck-balloon-panel_${r}`),i.if("isVisible","ck-balloon-panel_visible"),i.if("withArrow","ck-balloon-panel_with-arrow"),i.to("class")],style:{top:i.to("top",MN),left:i.to("left",MN)}},children:this.content})}destroy(){this.hide(),super.destroy()}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(e){const i=Aw(e.target);if(i&&!dl(i))return!1;this.show();const r=Xs.defaultPositions,s=Object.assign({},{element:this.element,positions:[r.southArrowNorth,r.southArrowNorthMiddleWest,r.southArrowNorthMiddleEast,r.southArrowNorthWest,r.southArrowNorthEast,r.northArrowSouth,r.northArrowSouthMiddleWest,r.northArrowSouthMiddleEast,r.northArrowSouthWest,r.northArrowSouthEast,r.viewportStickyNorth],limiter:at.document.body,fitInViewport:!0},e),o=Xs._getOptimalPosition(s)||QSe,a=parseInt(o.left),l=parseInt(o.top),c=o.name,u=o.config||{},{withArrow:d=!0}=u;return this.top=l,this.left=a,this.position=c,this.withArrow=d,!0}pin(e){this.unpin(),this._startPinning(e)&&(this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(e):this._stopPinning()},this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback))}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(e){if(!this.attachTo(e))return!1;let i=Aw(e.target);const r=e.limiter?Aw(e.limiter):at.document.body;if(this.listenTo(at.document,"scroll",(s,o)=>{const a=o.target,l=i&&a.contains(i),c=r&&a.contains(r);(l||c||!i||!r)&&this.attachTo(e)},{useCapture:!0}),this.listenTo(at.window,"resize",()=>{this.attachTo(e)}),!this._resizeObserver&&(i&&Oi(i)&&(i=i.parentElement),i)){const s=()=>{dl(i)||this.unpin()};this._resizeObserver=new Rd(i,s)}return!0}_stopPinning(){this.stopListening(at.document,"scroll"),this.stopListening(at.window,"resize"),this._resizeObserver&&(this._resizeObserver.destroy(),this._resizeObserver=null)}static generatePositions(e={}){const{sideOffset:i=Xs.arrowSideOffset,heightOffset:r=Xs.arrowHeightOffset,stickyVerticalOffset:s=Xs.stickyVerticalOffset,config:o}=e;return{northWestArrowSouthWest:(c,u)=>({top:a(c,u),left:c.left-i,name:"arrow_sw",...o&&{config:o}}),northWestArrowSouthMiddleWest:(c,u)=>({top:a(c,u),left:c.left-u.width*.25-i,name:"arrow_smw",...o&&{config:o}}),northWestArrowSouth:(c,u)=>({top:a(c,u),left:c.left-u.width/2,name:"arrow_s",...o&&{config:o}}),northWestArrowSouthMiddleEast:(c,u)=>({top:a(c,u),left:c.left-u.width*.75+i,name:"arrow_sme",...o&&{config:o}}),northWestArrowSouthEast:(c,u)=>({top:a(c,u),left:c.left-u.width+i,name:"arrow_se",...o&&{config:o}}),northArrowSouthWest:(c,u)=>({top:a(c,u),left:c.left+c.width/2-i,name:"arrow_sw",...o&&{config:o}}),northArrowSouthMiddleWest:(c,u)=>({top:a(c,u),left:c.left+c.width/2-u.width*.25-i,name:"arrow_smw",...o&&{config:o}}),northArrowSouth:(c,u)=>({top:a(c,u),left:c.left+c.width/2-u.width/2,name:"arrow_s",...o&&{config:o}}),northArrowSouthMiddleEast:(c,u)=>({top:a(c,u),left:c.left+c.width/2-u.width*.75+i,name:"arrow_sme",...o&&{config:o}}),northArrowSouthEast:(c,u)=>({top:a(c,u),left:c.left+c.width/2-u.width+i,name:"arrow_se",...o&&{config:o}}),northEastArrowSouthWest:(c,u)=>({top:a(c,u),left:c.right-i,name:"arrow_sw",...o&&{config:o}}),northEastArrowSouthMiddleWest:(c,u)=>({top:a(c,u),left:c.right-u.width*.25-i,name:"arrow_smw",...o&&{config:o}}),northEastArrowSouth:(c,u)=>({top:a(c,u),left:c.right-u.width/2,name:"arrow_s",...o&&{config:o}}),northEastArrowSouthMiddleEast:(c,u)=>({top:a(c,u),left:c.right-u.width*.75+i,name:"arrow_sme",...o&&{config:o}}),northEastArrowSouthEast:(c,u)=>({top:a(c,u),left:c.right-u.width+i,name:"arrow_se",...o&&{config:o}}),southWestArrowNorthWest:c=>({top:l(c),left:c.left-i,name:"arrow_nw",...o&&{config:o}}),southWestArrowNorthMiddleWest:(c,u)=>({top:l(c),left:c.left-u.width*.25-i,name:"arrow_nmw",...o&&{config:o}}),southWestArrowNorth:(c,u)=>({top:l(c),left:c.left-u.width/2,name:"arrow_n",...o&&{config:o}}),southWestArrowNorthMiddleEast:(c,u)=>({top:l(c),left:c.left-u.width*.75+i,name:"arrow_nme",...o&&{config:o}}),southWestArrowNorthEast:(c,u)=>({top:l(c),left:c.left-u.width+i,name:"arrow_ne",...o&&{config:o}}),southArrowNorthWest:c=>({top:l(c),left:c.left+c.width/2-i,name:"arrow_nw",...o&&{config:o}}),southArrowNorthMiddleWest:(c,u)=>({top:l(c),left:c.left+c.width/2-u.width*.25-i,name:"arrow_nmw",...o&&{config:o}}),southArrowNorth:(c,u)=>({top:l(c),left:c.left+c.width/2-u.width/2,name:"arrow_n",...o&&{config:o}}),southArrowNorthMiddleEast:(c,u)=>({top:l(c),left:c.left+c.width/2-u.width*.75+i,name:"arrow_nme",...o&&{config:o}}),southArrowNorthEast:(c,u)=>({top:l(c),left:c.left+c.width/2-u.width+i,name:"arrow_ne",...o&&{config:o}}),southEastArrowNorthWest:c=>({top:l(c),left:c.right-i,name:"arrow_nw",...o&&{config:o}}),southEastArrowNorthMiddleWest:(c,u)=>({top:l(c),left:c.right-u.width*.25-i,name:"arrow_nmw",...o&&{config:o}}),southEastArrowNorth:(c,u)=>({top:l(c),left:c.right-u.width/2,name:"arrow_n",...o&&{config:o}}),southEastArrowNorthMiddleEast:(c,u)=>({top:l(c),left:c.right-u.width*.75+i,name:"arrow_nme",...o&&{config:o}}),southEastArrowNorthEast:(c,u)=>({top:l(c),left:c.right-u.width+i,name:"arrow_ne",...o&&{config:o}}),westArrowEast:(c,u)=>({top:c.top+c.height/2-u.height/2,left:c.left-u.width-r,name:"arrow_e",...o&&{config:o}}),eastArrowWest:(c,u)=>({top:c.top+c.height/2-u.height/2,left:c.right+r,name:"arrow_w",...o&&{config:o}}),viewportStickyNorth:(c,u,d)=>{const f=new It(at.document.body).getIntersection(d.getVisible());if(!f)return null;const h=f.getVisible();return!c.getIntersection(h)||!(h.top-c.top-s<u.height&&h.bottom-c.bottom<u.height)?null:{top:h.top+s,left:c.left+c.width/2-u.width/2,name:"arrowless",config:{withArrow:!1,...o}}}};function a(c,u){return c.top-u.height-r}function l(c){return c.bottom+r}}};y(Xs,"arrowSideOffset",25),y(Xs,"arrowHeightOffset",10),y(Xs,"stickyVerticalOffset",20),y(Xs,"_getOptimalPosition",zI),y(Xs,"defaultPositions",Xs.generatePositions());let ar=Xs;function Aw(n){return vu(n)?n:A0(n)?n.commonAncestorContainer:typeof n=="function"?Aw(n()):null}class i7 extends dt{constructor(t){super(t),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}class ZSe extends dt{constructor(t){super(t),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function JSe(n){return n.bindTemplate.to(t=>{t.target===n.element&&t.preventDefault()})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function B0(n){if(Array.isArray(n))return{items:n,removeItems:[]};const t={items:[],removeItems:[]};return n?{...t,...n}:t}const zT={alignLeft:aP,bold:I8,importExport:sTe,paragraph:CTe,plus:STe,text:zTe,threeVerticalDots:dP,pilcrow:TTe,dragIndicator:ZCe};class oc extends dt{constructor(e,i){super(e);y(this,"options");y(this,"items");y(this,"focusTracker");y(this,"keystrokes");y(this,"itemsView");y(this,"children");y(this,"focusables");y(this,"_focusCycler");y(this,"_behavior");const r=this.bindTemplate,s=this.t;this.options=i||{},this.set("ariaLabel",s("Editor toolbar")),this.set("maxWidth","auto"),this.set("role","toolbar"),this.set("isGrouping",!!this.options.shouldGroupWhenFull),this.items=this.createCollection(),this.focusTracker=new Mn,this.keystrokes=new oi,this.set("class",void 0),this.set("isCompact",!1),this.set("isVertical",!1),this.itemsView=new XSe(e),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const o=e.uiLanguageDirection==="rtl";this._focusCycler=new ur({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[o?"arrowright":"arrowleft","arrowup"],focusNext:[o?"arrowleft":"arrowright","arrowdown"]}});const a=["ck","ck-toolbar",r.to("class"),r.if("isCompact","ck-toolbar_compact"),r.if("isGrouping","ck-toolbar_grouping"),r.if("isVertical","ck-toolbar_vertical")];this.options.shouldGroupWhenFull&&this.options.isFloating&&a.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:a,role:r.to("role"),"aria-label":r.to("ariaLabel"),style:{maxWidth:r.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:JSe(this)}}),this._behavior=this.options.shouldGroupWhenFull?new BN(this):new $N(this)}render(){super.render(),this.focusTracker.add(this.element);for(const e of this.items)this.focusTracker.add(e);this.items.on("add",(e,i)=>{this.focusTracker.add(i)}),this.items.on("remove",(e,i)=>{this.focusTracker.remove(i)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(e,i,r){this.items.addMany(this._buildItemsFromConfig(e,i,r))}switchBehavior(e){this._behavior.type!==e&&(this._behavior.destroy(),this.itemsView.children.clear(),this.focusables.clear(),e==="dynamic"?(this._behavior=new BN(this),this._behavior.render(this),this._behavior.refreshItems()):(this._behavior=new $N(this),this._behavior.render(this)))}_buildItemsFromConfig(e,i,r){const s=B0(e),o=r||s.removeItems;return this._cleanItemsConfiguration(s.items,i,o).map(l=>mo(l)?this._createNestedToolbarDropdown(l,i,o):l==="|"?new i7:l==="-"?new ZSe:i.create(l)).filter(l=>!!l)}_cleanItemsConfiguration(e,i,r){const s=e.filter((o,a,l)=>o==="|"?!0:r.indexOf(o)!==-1?!1:o==="-"?this.options.shouldGroupWhenFull?(mn("toolbarview-line-break-ignored-when-grouping-items",l),!1):!0:!mo(o)&&!i.has(o)?(mn("toolbarview-item-unavailable",{item:o}),!1):!0);return this._cleanSeparatorsAndLineBreaks(s)}_cleanSeparatorsAndLineBreaks(e){const i=a=>a!=="-"&&a!=="|",r=e.length,s=e.findIndex(i);if(s===-1)return[];const o=r-e.slice().reverse().findIndex(i);return e.slice(s,o).filter((a,l,c)=>i(a)?!0:!(l>0&&c[l-1]===a))}_createNestedToolbarDropdown(e,i,r){let{label:s,icon:o,items:a,tooltip:l=!0,withText:c=!1}=e;if(a=this._cleanItemsConfiguration(a,i,r),!a.length)return null;const u=this.locale,d=as(u);return s||mn("toolbarview-nested-toolbar-dropdown-missing-label",e),d.class="ck-toolbar__nested-toolbar-dropdown",d.buttonView.set({label:s,tooltip:l,withText:!!c}),o!==!1?d.buttonView.icon=zT[o]||o||dP:d.buttonView.withText=!0,F0(d,()=>d.toolbarView._buildItemsFromConfig(a,i,r)),d}}class XSe extends dt{constructor(e){super(e);y(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class $N{constructor(t){y(this,"type","static");t.isGrouping=!1,t.itemsView.children.bindTo(t.items).using(e=>e),t.focusables.bindTo(t.items).using(e=>Ov(e)?e:null)}render(){}destroy(){}}class BN{constructor(t){y(this,"type","dynamic");y(this,"view");y(this,"viewChildren");y(this,"viewFocusables");y(this,"viewItemsView");y(this,"viewFocusTracker");y(this,"viewLocale");y(this,"ungroupedItems");y(this,"groupedItems");y(this,"groupedItemsDropdown");y(this,"resizeObserver",null);y(this,"cachedPadding",null);y(this,"shouldUpdateGroupingOnNextResize",!1);y(this,"viewElement");this.view=t,this.viewChildren=t.children,this.viewFocusables=t.focusables,this.viewItemsView=t.itemsView,this.viewFocusTracker=t.focusTracker,this.viewLocale=t.locale,this.view.isGrouping=!0,this.ungroupedItems=t.createCollection(),this.groupedItems=t.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),t.itemsView.children.bindTo(this.ungroupedItems).using(e=>e),this.ungroupedItems.on("change",this._updateFocusCyclableItems.bind(this)),t.children.on("change",this._updateFocusCyclableItems.bind(this)),t.items.on("change",(e,i)=>{const r=i.index,s=Array.from(i.added);for(const o of i.removed)r>=this.ungroupedItems.length?this.groupedItems.remove(o):this.ungroupedItems.remove(o);for(let o=r;o<r+s.length;o++){const a=s[o-r];o>this.ungroupedItems.length?this.groupedItems.add(a,o-this.ungroupedItems.length):this.ungroupedItems.add(a,o)}this._updateGrouping()})}render(t){this.viewElement=t.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(t)}destroy(){this.groupedItemsDropdown.destroy(),this.viewChildren.length>1&&(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last)),this.resizeObserver.destroy()}refreshItems(){const t=this.view;if(t.items.length){for(let e=0;e<t.items.length;e++){const i=[...t.items][e];this.ungroupedItems.add(i,e)}this._updateGrouping()}}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!dl(this.viewElement)){this.shouldUpdateGroupingOnNextResize=!0;return}const t=this.groupedItems.length;let e;for(;this._areItemsOverflowing;)this._groupLastItem(),e=!0;if(!e&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==t&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const t=this.viewElement,e=this.viewLocale.uiLanguageDirection,i=new It(t.lastChild),r=new It(t);if(!this.cachedPadding){const s=at.window.getComputedStyle(t),o=e==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(s[o])}return e==="ltr"?i.right>r.right-this.cachedPadding:i.left<r.left+this.cachedPadding}_enableGroupingOnResize(){let t;this.resizeObserver=new Rd(this.viewElement,e=>{(!t||t!==e.contentRect.width||this.shouldUpdateGroupingOnNextResize)&&(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),t=e.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(t){t.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new i7),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const t=this.viewLocale,e=t.t,i=as(t);return i.class="ck-toolbar__grouped-dropdown",i.panelPosition=t.uiLanguageDirection==="ltr"?"sw":"se",F0(i,this.groupedItems),i.buttonView.set({label:e("Show more items"),tooltip:!0,tooltipPosition:t.uiLanguageDirection==="rtl"?"se":"sw",icon:dP}),i}_updateFocusCyclableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(t=>{Ov(t)&&this.viewFocusables.add(t)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}class Lm extends dt{constructor(e,i){super(e);y(this,"children");y(this,"actionView");y(this,"arrowView");y(this,"keystrokes");y(this,"focusTracker");const r=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(i),this.arrowView=this._createArrowView(),this.keystrokes=new oi,this.focusTracker=new Mn,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",r.to("class"),r.if("isVisible","ck-hidden",s=>!s),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(e,i)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),i())}),this.keystrokes.set("arrowleft",(e,i)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),i())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(e){const i=e||new wt;return e||i.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),i.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),i.delegate("execute").to(this),i}_createArrowView(){const e=new wt,i=e.bindTemplate;return e.icon=$0,e.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":i.to("isOn"),"aria-haspopup":!0,"aria-expanded":i.to("isOn",r=>String(r))}}),e.bind("isEnabled").to(this),e.bind("label").to(this),e.bind("tooltip").to(this),e.delegate("execute").to(this,"open"),e}}function as(n,t=n7){const e=typeof t=="function"?new t(n):t,i=new YSe(n),r=new qy(n,e,i);return e.bind("isEnabled").to(r),e instanceof Lm?e.arrowView.bind("isOn").to(r,"isOpen"):e.bind("isOn").to(r,"isOpen"),eAe(r),r}function F0(n,t,e={}){n.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),n.isOpen?FN(n,t,e):n.once("change:isOpen",()=>FN(n,t,e),{priority:"highest"}),e.enableActiveItemFocusOnDropdownOpen&&vP(n,()=>n.toolbarView.items.find(i=>i.isOn))}function FN(n,t,e){const i=n.locale,r=i.t,s=n.toolbarView=new oc(i),o=typeof t=="function"?t():t;s.ariaLabel=e.ariaLabel||r("Dropdown toolbar"),e.maxWidth&&(s.maxWidth=e.maxWidth),e.class&&(s.class=e.class),e.isCompact&&(s.isCompact=e.isCompact),e.isVertical&&(s.isVertical=!0),o instanceof tr?s.items.bindTo(o).using(a=>a):s.items.addMany(o),n.panelView.children.add(s),n.focusTracker.add(s),s.items.delegate("execute").to(n)}function ef(n,t,e={}){n.isOpen?UN(n,t,e):n.once("change:isOpen",()=>UN(n,t,e),{priority:"highest"}),vP(n,()=>n.listView.items.find(i=>i instanceof Ta?i.children.first.isOn:!1))}function UN(n,t,e){const i=n.locale,r=n.listView=new Nm(i),s=typeof t=="function"?t():t;r.ariaLabel=e.ariaLabel,r.role=e.role,s7(n,r.items,s,i),n.panelView.children.add(r),r.items.delegate("execute").to(n)}function vP(n,t){n.on("change:isOpen",()=>{if(!n.isOpen)return;const e=t();e&&(typeof e.focus=="function"?e.focus():mn("ui-dropdown-focus-child-on-open-child-missing-focus",{view:e}))},{priority:ro.low-10})}function eAe(n){tAe(n),nAe(n),iAe(n),rAe(n),sAe(n),oAe(n)}function tAe(n){pc({emitter:n,activator:()=>n.isRendered&&n.isOpen,callback:()=>{n.isOpen=!1},contextElements:()=>[n.element,...r7(n.focusTracker).filter(t=>!n.element.contains(t))]})}function r7(n){return[...n.elements,...n.externalViews.flatMap(t=>r7(t.focusTracker))]}function nAe(n){n.on("execute",t=>{t.source instanceof Md||(n.isOpen=!1)})}function iAe(n){n.focusTracker.on("change:isFocused",(t,e,i)=>{i||!n.isOpen||(n.isOpen=!1)})}function rAe(n){n.keystrokes.set("arrowdown",(t,e)=>{n.isOpen&&(n.panelView.focus(),e())}),n.keystrokes.set("arrowup",(t,e)=>{n.isOpen&&(n.panelView.focusLast(),e())})}function sAe(n){n.on("change:isOpen",(t,e,i)=>{if(i)return;n.focusTracker.elements.some(s=>s.contains(at.document.activeElement))&&n.buttonView.focus()})}function oAe(n){n.on("change:isOpen",(t,e,i)=>{i&&n.panelView.focus()},{priority:"low"})}function s7(n,t,e,i){aAe(t),t.bindTo(e).using(r=>{if(r.type==="separator")return new pP(i);if(r.type==="group"){const s=new Sw(i);return s.set({label:r.label}),s7(n,s.items,r.items,i),s.items.delegate("execute").to(n),s}else if(r.type==="button"||r.type==="switchbutton"){const s=r.model.role==="menuitemcheckbox"||r.model.role==="menuitemradio",o=new Ta(i);let a;return r.type==="button"?(a=new Dm(i),a.set({isToggleable:s})):a=new Md(i),a.bind(...Object.keys(r.model)).to(r.model),a.delegate("execute").to(o),o.children.add(a),o}return null})}function aAe(n){let t=0;const e=s=>!(s instanceof Ta)||!(s.children.first instanceof Dm)?null:s.children.first,i=s=>{const o=e(s);return!o||!o.isToggleable?null:o},r=s=>{for(const o of n){const a=e(o);a&&(a.hasCheckSpace=s)}};n.on("change",(s,o)=>{const a=t>0;for(const c of o.removed)i(c)&&t--;for(const c of o.added){const u=e(c);u&&(u.isToggleable&&t++,u.hasCheckSpace=t>0)}const l=t>0;a!==l&&r(l)})}const Ss=(n,t,e)=>{const i=new t7(n.locale);return i.set({id:t,ariaDescribedById:e}),i.bind("isReadOnly").to(n,"isEnabled",r=>!r),i.bind("hasError").to(n,"errorText",r=>!!r),i.on("input",()=>{n.errorText=null}),n.bind("isEmpty","isFocused","placeholder").to(i),i},o7=(n,t,e)=>{const i=new KSe(n.locale);return i.set({id:t,ariaDescribedById:e,inputMode:"numeric"}),i.bind("isReadOnly").to(n,"isEnabled",r=>!r),i.bind("hasError").to(n,"errorText",r=>!!r),i.on("input",()=>{n.errorText=null}),n.bind("isEmpty","isFocused","placeholder").to(i),i},bP=(n,t,e)=>{const i=as(n.locale);return i.set({id:t,ariaDescribedById:e}),i.bind("isEnabled").to(n),i},lAe=150;class cAe extends dt{constructor(e,i={}){super(e);y(this,"hexInputRow");y(this,"_debounceColorPickerEvent");y(this,"_config");this.set({color:"",_hexColor:""}),this.hexInputRow=this._createInputRow();const r=this.createCollection();i.hideInput||r.add(this.hexInputRow),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker"],tabindex:-1},children:r}),this._config=i,this._debounceColorPickerEvent=go(s=>{this.set("color",s),this.fire("colorSelected",{color:this.color})},lAe,{leading:!0}),this.on("set:color",(s,o,a)=>{s.return=J8(a,this._config.format||"hsl")}),this.on("change:color",()=>{this._hexColor=nE(this.color)}),this.on("change:_hexColor",()=>{document.activeElement!==this.picker&&this.picker.setAttribute("color",this._hexColor),nE(this.color)!=nE(this._hexColor)&&(this.color=this._hexColor)})}render(){if(super.render(),HSe("hex-color-picker",bSe),this.picker=at.document.createElement("hex-color-picker"),this.picker.setAttribute("class","hex-color-picker"),this.picker.setAttribute("tabindex","-1"),this._createSlidersView(),this.element){this.hexInputRow.element?this.element.insertBefore(this.picker,this.hexInputRow.element):this.element.appendChild(this.picker);const e=document.createElement("style");e.textContent='[role="slider"]:focus [part$="pointer"] {border: 1px solid #fff;outline: 1px solid var(--ck-color-focus-border);box-shadow: 0 0 0 2px #fff;}',this.picker.shadowRoot.appendChild(e)}this.picker.addEventListener("color-changed",e=>{const i=e.detail.value;this._debounceColorPickerEvent(i)})}focus(){/* istanbul ignore next -- @preserve */!this._config.hideInput&&(Vt.isGecko||Vt.isiOS||Vt.isSafari||Vt.isBlink)&&this.hexInputRow.children.get(1).focus(),this.slidersView.first.focus()}_createSlidersView(){const r=[...this.picker.shadowRoot.children].filter(s=>s.getAttribute("role")==="slider").map(s=>new uAe(s));this.slidersView=this.createCollection(),r.forEach(s=>{this.slidersView.add(s)})}_createInputRow(){const e=this._createColorInput();return new fAe(this.locale,e)}_createColorInput(){const e=new Ri(this.locale,Ss),{t:i}=this.locale;return e.set({label:i("HEX"),class:"color-picker-hex-input"}),e.fieldView.bind("value").to(this,"_hexColor",r=>e.isFocused?e.fieldView.value:r.startsWith("#")?r.substring(1):r),e.fieldView.on("input",()=>{const r=e.fieldView.element.value;if(r){const s=a7(r);s&&this._debounceColorPickerEvent(s)}}),e}isValid(){const{t:e}=this.locale;return this._config.hideInput?!0:(this.resetValidationStatus(),this.hexInputRow.getParsedColor()?!0:(this.hexInputRow.inputView.errorText=e('Please enter a valid color (e.g. "ff0000").'),!1))}resetValidationStatus(){this.hexInputRow.inputView.errorText=null}}function nE(n){let t=zSe(n);return t||(t="#000"),t.length===4&&(t="#"+[t[1],t[1],t[2],t[2],t[3],t[3]].join("")),t.toLowerCase()}class uAe extends dt{constructor(t){super(),this.element=t}focus(){this.element.focus()}}class dAe extends dt{constructor(t){super(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__hash-view"]},children:"#"})}}class fAe extends dt{constructor(e,i){super(e);y(this,"children");y(this,"inputView");this.inputView=i,this.children=this.createCollection([new dAe,this.inputView]),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__row"]},children:this.children})}getParsedColor(){return a7(this.inputView.fieldView.element.value)}}function a7(n){if(!n)return null;const t=n.trim().replace(/^#/,"");return![3,4,6,8].includes(t.length)||!/^(([0-9a-fA-F]{2}){3,4}|([0-9a-fA-F]){3,4})$/.test(t)?null:`#${t}`}class hAe extends Wn(cr){constructor(t){super(t),this.set("isEmpty",!0),this.on("change",()=>{this.set("isEmpty",this.length===0)})}add(t,e){return this.find(i=>i.color===t.color)?this:super.add(t,e)}hasColor(t){return!!this.find(e=>e.color===t)}}class mAe extends dt{constructor(e,{colors:i,columns:r,removeButtonLabel:s,documentColorsLabel:o,documentColorsCount:a,colorPickerLabel:l,focusTracker:c,focusables:u}){super(e);y(this,"items");y(this,"colorDefinitions");y(this,"focusTracker");y(this,"columns");y(this,"documentColors");y(this,"documentColorsCount");y(this,"staticColorsGrid");y(this,"documentColorsGrid");y(this,"colorPickerButtonView");y(this,"removeColorButtonView");y(this,"_focusables");y(this,"_documentColorsLabel");y(this,"_removeButtonLabel");y(this,"_colorPickerLabel");const d=this.bindTemplate;this.set("isVisible",!0),this.focusTracker=c,this.items=this.createCollection(),this.colorDefinitions=i,this.columns=r,this.documentColors=new hAe,this.documentColorsCount=a,this._focusables=u,this._removeButtonLabel=s,this._colorPickerLabel=l,this._documentColorsLabel=o,this.setTemplate({tag:"div",attributes:{class:["ck-color-grids-fragment",d.if("isVisible","ck-hidden",f=>!f)]},children:this.items}),this.removeColorButtonView=this._createRemoveColorButton(),this.items.add(this.removeColorButtonView)}updateDocumentColors(e,i){const r=e.document,s=this.documentColorsCount;this.documentColors.clear();for(const o of r.getRoots()){const a=e.createRangeIn(o);for(const l of a.getItems())if(l.is("$textProxy")&&l.hasAttribute(i)&&(this._addColorToDocumentColors(l.getAttribute(i)),this.documentColors.length>=s))return}}updateSelectedColors(){const e=this.documentColorsGrid,i=this.staticColorsGrid,r=this.selectedColor;i.selectedColor=r,e&&(e.selectedColor=r)}render(){if(super.render(),this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount){const e=Ks.bind(this.documentColors,this.documentColors),i=new dt(this.locale);i.setTemplate({tag:"span",attributes:{class:["ck","ck-color-grid__label",e.if("isEmpty","ck-hidden")]},children:[{text:this._documentColorsLabel}]}),this.items.add(i),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)}this._createColorPickerButton(),this._addColorSelectorElementsToFocusTracker()}focus(){this.removeColorButtonView.focus()}destroy(){super.destroy()}addColorPickerButton(){this.colorPickerButtonView&&(this.items.add(this.colorPickerButtonView),this.focusTracker.add(this.colorPickerButtonView.element),this._focusables.add(this.colorPickerButtonView))}_addColorSelectorElementsToFocusTracker(){this.focusTracker.add(this.removeColorButtonView.element),this._focusables.add(this.removeColorButtonView),this.staticColorsGrid&&(this.focusTracker.add(this.staticColorsGrid.element),this._focusables.add(this.staticColorsGrid)),this.documentColorsGrid&&(this.focusTracker.add(this.documentColorsGrid.element),this._focusables.add(this.documentColorsGrid))}_createColorPickerButton(){this.colorPickerButtonView=new wt,this.colorPickerButtonView.set({label:this._colorPickerLabel,withText:!0,icon:KCe,class:"ck-color-selector__color-picker"}),this.colorPickerButtonView.on("execute",()=>{this.fire("colorPicker:show")})}_createRemoveColorButton(){const e=new wt;return e.set({withText:!0,icon:JCe,label:this._removeButtonLabel}),e.class="ck-color-selector__remove-color",e.on("execute",()=>{this.fire("execute",{value:null,source:"removeColorButton"})}),e.render(),e}_createStaticColorsGrid(){const e=new LN(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return e.on("execute",(i,r)=>{this.fire("execute",{value:r.value,source:"staticColorsGrid"})}),e}_createDocumentColorsGrid(){const e=Ks.bind(this.documentColors,this.documentColors),i=new LN(this.locale,{columns:this.columns});return i.extendTemplate({attributes:{class:e.if("isEmpty","ck-hidden")}}),i.items.bindTo(this.documentColors).using(r=>{var o;const s=new Z8;return s.set({color:r.color,hasBorder:(o=r.options)==null?void 0:o.hasBorder}),r.label&&s.set({label:r.label,tooltip:!0}),s.on("execute",()=>{this.fire("execute",{value:r.color,source:"documentColorsGrid"})}),s}),this.documentColors.on("change:isEmpty",(r,s,o)=>{o&&(i.selectedColor=null)}),i}_addColorToDocumentColors(e){const i=this.colorDefinitions.find(r=>r.color===e);i?this.documentColors.add(Object.assign({},i)):this.documentColors.add({color:e,label:e,options:{hasBorder:!1}})}}class gAe extends dt{constructor(e,{focusTracker:i,focusables:r,keystrokes:s,colorPickerViewConfig:o}){super(e);y(this,"items");y(this,"colorPickerView");y(this,"saveButtonView");y(this,"cancelButtonView");y(this,"actionBarView");y(this,"focusTracker");y(this,"keystrokes");y(this,"_focusables");y(this,"_colorPickerViewConfig");this.items=this.createCollection(),this.focusTracker=i,this.keystrokes=s,this.set("isVisible",!1),this.set("selectedColor",void 0),this._focusables=r,this._colorPickerViewConfig=o;const a=this.bindTemplate,{saveButtonView:l,cancelButtonView:c}=this._createActionButtons();this.saveButtonView=l,this.cancelButtonView=c,this.actionBarView=this._createActionBarView({saveButtonView:l,cancelButtonView:c}),this.setTemplate({tag:"div",attributes:{class:["ck-color-picker-fragment",a.if("isVisible","ck-hidden",u=>!u)]},children:this.items})}render(){super.render();const e=new cAe(this.locale,{...this._colorPickerViewConfig});this.colorPickerView=e,this.colorPickerView.render(),this.selectedColor&&(e.color=this.selectedColor),this.listenTo(this,"change:selectedColor",(i,r,s)=>{e.color=s}),this.items.add(this.colorPickerView),this.items.add(this.actionBarView),this._addColorPickersElementsToFocusTracker(),this._stopPropagationOnArrowsKeys(),this._executeOnEnterPress(),this._executeUponColorChange()}destroy(){super.destroy()}focus(){this.colorPickerView.focus()}resetValidationStatus(){this.colorPickerView.resetValidationStatus()}_executeOnEnterPress(){this.keystrokes.set("enter",e=>{this.isVisible&&this.focusTracker.focusedElement!==this.cancelButtonView.element&&this.colorPickerView.isValid()&&(this.fire("execute",{value:this.selectedColor}),e.stopPropagation(),e.preventDefault())})}_stopPropagationOnArrowsKeys(){const e=i=>i.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}_addColorPickersElementsToFocusTracker(){for(const i of this.colorPickerView.slidersView)this.focusTracker.add(i.element),this._focusables.add(i);const e=this.colorPickerView.hexInputRow.children.get(1);e.element&&(this.focusTracker.add(e.element),this._focusables.add(e)),this.focusTracker.add(this.saveButtonView.element),this._focusables.add(this.saveButtonView),this.focusTracker.add(this.cancelButtonView.element),this._focusables.add(this.cancelButtonView)}_createActionBarView({saveButtonView:e,cancelButtonView:i}){const r=new dt,s=this.createCollection();return s.add(e),s.add(i),r.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector_action-bar"]},children:s}),r}_createActionButtons(){const e=this.locale,i=e.t,r=new wt(e),s=new wt(e);return r.set({icon:M0,class:"ck-button-save",type:"button",withText:!1,label:i("Accept")}),s.set({icon:L0,class:"ck-button-cancel",type:"button",withText:!1,label:i("Cancel")}),r.on("execute",()=>{this.colorPickerView.isValid()&&this.fire("execute",{source:"colorPickerSaveButton",value:this.selectedColor})}),s.on("execute",()=>{this.fire("colorPicker:cancel")}),{saveButtonView:r,cancelButtonView:s}}_executeUponColorChange(){this.colorPickerView.on("colorSelected",(e,i)=>{this.fire("execute",{value:i.color,source:"colorPicker"}),this.set("selectedColor",i.color)})}}class pAe extends dt{constructor(e,{colors:i,columns:r,removeButtonLabel:s,documentColorsLabel:o,documentColorsCount:a,colorPickerLabel:l,colorPickerViewConfig:c}){super(e);y(this,"focusTracker");y(this,"keystrokes");y(this,"items");y(this,"colorGridsFragmentView");y(this,"colorPickerFragmentView");y(this,"_focusCycler");y(this,"_focusables");y(this,"_colorPickerViewConfig");this.items=this.createCollection(),this.focusTracker=new Mn,this.keystrokes=new oi,this._focusables=new tr,this._colorPickerViewConfig=c,this._focusCycler=new ur({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.colorGridsFragmentView=new mAe(e,{colors:i,columns:r,removeButtonLabel:s,documentColorsLabel:o,documentColorsCount:a,colorPickerLabel:l,focusTracker:this.focusTracker,focusables:this._focusables}),this.colorPickerFragmentView=new gAe(e,{focusables:this._focusables,focusTracker:this.focusTracker,keystrokes:this.keystrokes,colorPickerViewConfig:c}),this.set("_isColorGridsFragmentVisible",!0),this.set("_isColorPickerFragmentVisible",!1),this.set("selectedColor",void 0),this.colorGridsFragmentView.bind("isVisible").to(this,"_isColorGridsFragmentVisible"),this.colorPickerFragmentView.bind("isVisible").to(this,"_isColorPickerFragmentVisible"),this.on("change:selectedColor",(u,d,f)=>{this.colorGridsFragmentView.set("selectedColor",f),this.colorPickerFragmentView.set("selectedColor",f)}),this.colorGridsFragmentView.on("change:selectedColor",(u,d,f)=>{this.set("selectedColor",f)}),this.colorPickerFragmentView.on("change:selectedColor",(u,d,f)=>{this.set("selectedColor",f)}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector"]},children:this.items})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}appendUI(){this._appendColorGridsFragment(),this._colorPickerViewConfig&&this._appendColorPickerFragment()}showColorPickerFragment(){!this.colorPickerFragmentView.colorPickerView||this._isColorPickerFragmentVisible||(this._isColorPickerFragmentVisible=!0,this.colorPickerFragmentView.focus(),this.colorPickerFragmentView.resetValidationStatus(),this._isColorGridsFragmentVisible=!1)}showColorGridsFragment(){this._isColorGridsFragmentVisible||(this._isColorGridsFragmentVisible=!0,this.colorGridsFragmentView.focus(),this._isColorPickerFragmentVisible=!1)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}updateDocumentColors(e,i){this.colorGridsFragmentView.updateDocumentColors(e,i)}updateSelectedColors(){this.colorGridsFragmentView.updateSelectedColors()}_appendColorGridsFragment(){this.items.length||(this.items.add(this.colorGridsFragmentView),this.colorGridsFragmentView.delegate("execute").to(this),this.colorGridsFragmentView.delegate("colorPicker:show").to(this))}_appendColorPickerFragment(){this.items.length!==2&&(this.items.add(this.colorPickerFragmentView),this.colorGridsFragmentView.colorPickerButtonView&&this.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{this.showColorPickerFragment()}),this.colorGridsFragmentView.addColorPickerButton(),this.colorPickerFragmentView.delegate("execute").to(this),this.colorPickerFragmentView.delegate("colorPicker:cancel").to(this))}}class vAe{constructor(t){y(this,"editor");y(this,"_components",new Map);this.editor=t}*names(){for(const t of this._components.values())yield t.originalName}add(t,e){this._components.set(iE(t),{callback:e,originalName:t})}create(t){if(!this.has(t))throw new we("componentfactory-item-missing",this,{name:t});return this._components.get(iE(t)).callback(this.editor.locale)}has(t){return this._components.has(iE(t))}}function iE(n){return String(n).toLowerCase()}const zN="ck-tooltip",wr=class wr extends ds(){constructor(e){super();y(this,"tooltipTextView");y(this,"balloonPanelView");y(this,"_currentElementWithTooltip",null);y(this,"_currentTooltipPosition",null);y(this,"_mutationObserver",null);y(this,"_pinTooltipDebounced");y(this,"_unpinTooltipDebounced");y(this,"_watchdogExcluded");if(wr._editors.add(e),wr._instance)return wr._instance;wr._instance=this,this.tooltipTextView=new dt(e.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new ar(e.locale),this.balloonPanelView.class=zN,this.balloonPanelView.content.add(this.tooltipTextView),this._mutationObserver=bAe(()=>{this._updateTooltipPosition()}),this._pinTooltipDebounced=go(this._pinTooltip,600),this._unpinTooltipDebounced=go(this._unpinTooltip,400),this.listenTo(at.document,"keydown",this._onKeyDown.bind(this),{useCapture:!0}),this.listenTo(at.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(at.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(at.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(at.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(at.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(e){const i=e.ui.view&&e.ui.view.body;wr._editors.delete(e),this.stopListening(e.ui),i&&i.has(this.balloonPanelView)&&i.remove(this.balloonPanelView),wr._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),wr._instance=null)}static getPositioningFunctions(e){const i=wr.defaultBalloonPositions;return{s:[i.southArrowNorth,i.southArrowNorthEast,i.southArrowNorthWest],n:[i.northArrowSouth],e:[i.eastArrowWest],w:[i.westArrowEast],sw:[i.southArrowNorthEast],se:[i.southArrowNorthWest]}[e]}_onKeyDown(e,i){i.key==="Escape"&&this._currentElementWithTooltip&&(this._unpinTooltip(),i.stopPropagation())}_onEnterOrFocus(e,{target:i}){const r=rE(i);if(!r){e.name==="focus"&&this._unpinTooltip();return}if(r===this._currentElementWithTooltip){this._unpinTooltipDebounced.cancel();return}this._unpinTooltip(),e.name==="focus"&&!r.matches(":hover")||r.matches("[data-cke-tooltip-instant]")?this._pinTooltip(r,sE(r)):this._pinTooltipDebounced(r,sE(r))}_onLeaveOrBlur(e,{target:i,relatedTarget:r}){if(e.name==="mouseleave"){if(!vu(i))return;const s=this.balloonPanelView.element,o=s&&(s===r||s.contains(r)),a=!o&&i===s;if(o){this._unpinTooltipDebounced.cancel();return}if(!a&&this._currentElementWithTooltip&&i!==this._currentElementWithTooltip)return;const l=rE(i),c=rE(r);(a||l&&l!==c)&&(this._pinTooltipDebounced.cancel(),this._currentElementWithTooltip&&this._currentElementWithTooltip.matches("[data-cke-tooltip-instant]")||l&&l.matches("[data-cke-tooltip-instant]")?this._unpinTooltip():this._unpinTooltipDebounced())}else{if(this._currentElementWithTooltip&&i!==this._currentElementWithTooltip)return;this._pinTooltipDebounced.cancel(),this._unpinTooltipDebounced()}}_onScroll(e,{target:i}){this._currentElementWithTooltip&&(i.contains(this.balloonPanelView.element)&&i.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(e,{text:i,position:r,cssClass:s}){this._unpinTooltip();const o=gi(wr._editors.values()).ui.view.body;o.has(this.balloonPanelView)||o.add(this.balloonPanelView),this.tooltipTextView.text=i,this.balloonPanelView.class=[zN,s].filter(a=>a).join(" "),this.balloonPanelView.pin({target:e,positions:wr.getPositioningFunctions(r)}),this._mutationObserver.attach(e);for(const a of wr._editors)this.listenTo(a.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=e,this._currentTooltipPosition=r}_unpinTooltip(){this._unpinTooltipDebounced.cancel(),this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const e of wr._editors)this.stopListening(e.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this.tooltipTextView.text="",this._mutationObserver.detach()}_updateTooltipPosition(){if(!this._currentElementWithTooltip)return;const e=sE(this._currentElementWithTooltip);if(!dl(this._currentElementWithTooltip)||!e.text){this._unpinTooltip();return}this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:wr.getPositioningFunctions(e.position)})}};y(wr,"defaultBalloonPositions",ar.generatePositions({heightOffset:5,sideOffset:13})),y(wr,"_editors",new Set),y(wr,"_instance",null);let HT=wr;function rE(n){return vu(n)?n.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function sE(n){return{text:n.dataset.ckeTooltipText,position:n.dataset.ckeTooltipPosition||"s",cssClass:n.dataset.ckeTooltipClass||""}}function bAe(n){const t=new MutationObserver(()=>{n()});return{attach(e){t.observe(e,{attributes:!0,attributeFilter:["data-cke-tooltip-text","data-cke-tooltip-position"]})},detach(){t.disconnect()}}}const wAe=50,yAe=350;class l7 extends ds(){constructor(e,i={}){super();y(this,"editor");y(this,"_balloonView",null);y(this,"_showBalloonThrottled",tm(()=>this._showBalloon(),50,{leading:!0}));y(this,"_lastFocusedEditableElement",null);y(this,"_balloonClass");this.editor=e,this._balloonClass=i.balloonClass,e.on("ready",()=>this._handleEditorReady())}destroy(){const e=this._balloonView;e&&(e.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){const e=this.editor;this._isEnabled()&&e.ui.view&&(e.ui.focusTracker.on("change:isFocused",(i,r,s)=>{this._updateLastFocusedEditableElement(),s?this._showBalloon():this._hideBalloon()}),e.ui.focusTracker.on("change:focusedElement",(i,r,s)=>{this._updateLastFocusedEditableElement(),s&&this._showBalloon()}),e.ui.on("update",()=>{this._showBalloonThrottled()}))}_getNormalizedConfig(){return{side:this.editor.locale.contentLanguageDirection==="ltr"?"right":"left",position:"border",verticalOffset:0,horizontalOffset:5}}_showBalloon(){const e=this._getBalloonAttachOptions();e&&(this._balloonView||(this._balloonView=this._createBalloonView()),this._balloonView.pin(e))}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_createBalloonView(){const e=this.editor,i=new ar,r=this._createBadgeContent();return i.content.add(r),this._balloonClass&&(i.class=this._balloonClass),e.ui.view.body.add(i),i}_getBalloonAttachOptions(){if(!this._lastFocusedEditableElement)return null;const e=this._getNormalizedConfig(),i=e.side==="right"?_Ae(this._lastFocusedEditableElement,e):kAe(this._lastFocusedEditableElement,e);return{target:this._lastFocusedEditableElement,positions:[i]}}_updateLastFocusedEditableElement(){const e=this.editor,i=e.ui.focusTracker.isFocused,r=e.ui.focusTracker.focusedElement;if(!i||!r){this._lastFocusedEditableElement=null;return}const s=Array.from(e.ui.getEditableElementsNames()).map(o=>e.ui.getEditableElement(o));s.includes(r)?this._lastFocusedEditableElement=r:this._lastFocusedEditableElement=s[0]}}function _Ae(n,t){return c7(n,t,(e,i)=>e.left+e.width-i.width-t.horizontalOffset)}function kAe(n,t){return c7(n,t,e=>e.left+t.horizontalOffset)}function c7(n,t,e){return(i,r)=>{const s=new It(n);if(s.width<yAe||s.height<wAe)return null;let o;t.position==="inside"?o=s.bottom-r.height:o=s.bottom-r.height/2,o-=t.verticalOffset;const a=e(s,r),c=i.clone().moveTo(a,o).getIntersection(r.clone().moveTo(a,o)).getVisible();return!c||c.getArea()<r.getArea()?null:{top:o,left:a,name:`position_${t.position}-side_${t.side}`,config:{withArrow:!1}}}}const EAe="Powered by";class CAe extends l7{constructor(t){super(t,{balloonClass:"ck-powered-by-balloon"})}_isEnabled(){const t=this.editor;if(t.config.get("ui.poweredBy.forceVisible"))return!0;const i=t.config.get("licenseKey");if(i=="GPL")return!0;const r=jI(i.split(".")[1]);return r?!r.whiteLabel:!0}_createBadgeContent(){return new TAe(this.editor.locale,this._getNormalizedConfig().label)}_getNormalizedConfig(){const t=super._getNormalizedConfig(),e=this.editor.config.get("ui.poweredBy")||{},i=e.position||t.position,r=i==="inside"?5:t.verticalOffset;return{position:i,side:e.side||t.side,label:e.label===void 0?EAe:e.label,verticalOffset:e.verticalOffset!==void 0?e.verticalOffset:r,horizontalOffset:e.horizontalOffset!==void 0?e.horizontalOffset:t.horizontalOffset,forceVisible:!!e.forceVisible}}}class TAe extends dt{constructor(t,e){super(t);const i=new Uo,r=this.bindTemplate;i.set({content:ATe,isColorInherited:!1}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/powered-by-ckeditor/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...e?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[e]}]:[],i],on:{dragstart:r.to(s=>s.preventDefault())}}]})}}class SAe extends l7{constructor(e){super(e,{balloonClass:"ck-evaluation-badge-balloon"});y(this,"licenseTypeMessage",{evaluation:"For evaluation purposes only",trial:"For evaluation purposes only",development:"For development purposes only"})}_isEnabled(){const i=this.editor.config.get("licenseKey"),r=HN(i);return!!(r&&this.licenseTypeMessage[r])}_createBadgeContent(){const e=this.editor.config.get("licenseKey"),i=HN(e);return new AAe(this.editor.locale,this.licenseTypeMessage[i])}_getNormalizedConfig(){const e=super._getNormalizedConfig(),i=this.editor.config.get("ui.poweredBy")||{},r=i.position||e.position,s=i.side||e.side;return{position:r,side:s==="left"?"right":"left",verticalOffset:e.verticalOffset,horizontalOffset:e.horizontalOffset}}}class AAe extends dt{constructor(t,e){super(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-evaluation-badge"],"aria-hidden":!0},children:[{tag:"span",attributes:{class:["ck","ck-evaluation-badge__label"]},children:[e]}]})}}function HN(n){if(n=="GPL")return"GPL";const t=jI(n.split(".")[1]);return t?t.licenseType||"production":null}const WN={POLITE:"polite",ASSERTIVE:"assertive"};class IAe{constructor(t){y(this,"editor");y(this,"view");this.editor=t,t.once("ready",()=>{for(const e of Object.values(WN))this.announce("",e)})}announce(t,e=WN.POLITE){const i=this.editor;if(!i.ui.view)return;this.view||(this.view=new PAe(i.locale),i.ui.view.body.add(this.view));const{politeness:r,isUnsafeHTML:s}=typeof e=="string"?{politeness:e}:e;let o=this.view.regionViews.find(a=>a.politeness===r);o||(o=new xAe(i,r),this.view.regionViews.add(o)),o.announce({announcement:t,isUnsafeHTML:s})}}class PAe extends dt{constructor(e){super(e);y(this,"regionViews");this.regionViews=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-aria-live-announcer"]},children:this.regionViews})}}class xAe extends dt{constructor(e,i){super(e.locale);y(this,"politeness");y(this,"_domConverter");y(this,"_pruneAnnouncementsInterval");this.setTemplate({tag:"div",attributes:{"aria-live":i,"aria-relevant":"additions"},children:[{tag:"ul",attributes:{class:["ck","ck-aria-live-region-list"]}}]}),e.on("destroy",()=>{this._pruneAnnouncementsInterval!==null&&(clearInterval(this._pruneAnnouncementsInterval),this._pruneAnnouncementsInterval=null)}),this.politeness=i,this._domConverter=e.data.htmlProcessor.domConverter,this._pruneAnnouncementsInterval=setInterval(()=>{this.element&&this._listElement.firstChild&&this._listElement.firstChild.remove()},5e3)}announce({announcement:e,isUnsafeHTML:i}){if(!e.trim().length)return;const r=document.createElement("li");i?this._domConverter.setContentOf(r,e):r.innerText=e,this._listElement.appendChild(r)}get _listElement(){return this.element.querySelector("ul")}}class Mm extends Ta{constructor(t,e){super(t);const i=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item"]},on:{mouseenter:i.to("mouseenter")}}),this.delegate("mouseenter").to(e)}}const Db=5,kf={toggleMenusAndFocusItemsOnHover(n){n.on("menu:mouseenter",t=>{if(!(!n.isFocusBorderEnabled&&!n.isOpen)){if(n.isOpen)for(const e of n.menus){const i=t.path[0],r=i instanceof Mm&&i.children.first===e;e.isOpen=(t.path.includes(e)||r)&&e.isEnabled}t.source.focus()}})},focusCycleMenusOnArrows(n){const t=n.locale.uiLanguageDirection==="rtl";n.on("menu:arrowright",i=>{e(i.source,t?-1:1)}),n.on("menu:arrowleft",i=>{e(i.source,t?1:-1)});function e(i,r){const s=n.children.getIndex(i),o=i.isOpen,a=n.children.length,l=n.children.get((s+a+r)%a);i.isOpen=!1,o&&(l.isOpen=!0),l.buttonView.focus()}},closeMenusWhenTheBarCloses(n){n.on("change:isOpen",()=>{n.isOpen||n.menus.forEach(t=>{t.isOpen=!1})})},closeMenuWhenAnotherOnTheSameLevelOpens(n){n.on("menu:change:isOpen",(t,e,i)=>{i&&n.menus.filter(r=>t.source.parentMenuView===r.parentMenuView&&t.source!==r&&r.isOpen).forEach(r=>{r.isOpen=!1})})},closeOnClickOutside(n){pc({emitter:n,activator:()=>n.isOpen,callback:()=>n.close(),contextElements:()=>n.children.map(t=>t.element)})},enableFocusHighlightOnInteraction(n){let t=!1;n.on("change:isOpen",(e,i,r)=>{r||(t||(n.isFocusBorderEnabled=!1),t=!1)}),n.listenTo(n.element,"keydown",()=>{t=!0},{useCapture:!0}),n.listenTo(n.element,"keyup",()=>{t=!1},{useCapture:!0}),n.listenTo(n.element,"focus",()=>{t&&(n.isFocusBorderEnabled=!0)},{useCapture:!0})}},Sc={openAndFocusPanelOnArrowDownKey(n){n.keystrokes.set("arrowdown",(t,e)=>{n.isEnabled&&n.focusTracker.focusedElement===n.buttonView.element&&(n.isOpen||(n.isOpen=!0),n.panelView.focus(),e())})},openOnArrowRightKey(n){const t=n.locale.uiLanguageDirection==="rtl"?"arrowleft":"arrowright";n.keystrokes.set(t,(e,i)=>{n.focusTracker.focusedElement!==n.buttonView.element||!n.isEnabled||(n.isOpen||(n.isOpen=!0),n.panelView.focus(),i())})},openOnButtonClick(n){n.buttonView.on("execute",()=>{n.isOpen=!0})},toggleOnButtonClick(n){n.buttonView.on("execute",()=>{n.isOpen=!n.isOpen})},openAndFocusOnEnterKeyPress(n){n.keystrokes.set("enter",(t,e)=>{n.focusTracker.focusedElement===n.buttonView.element&&(n.isOpen=!0,n.panelView.focus(),e())})},closeOnArrowLeftKey(n){const t=n.locale.uiLanguageDirection==="rtl"?"arrowright":"arrowleft";n.keystrokes.set(t,(e,i)=>{n.isOpen&&(n.isOpen=!1,n.focus(),i())})},closeOnEscKey(n){n.keystrokes.set("esc",(t,e)=>{n.isOpen&&(n.isOpen=!1,n.focus(),e())})},closeOnParentClose(n){n.parentMenuView.on("change:isOpen",(t,e,i)=>{!i&&t.source===n.parentMenuView&&(n.isOpen=!1)})}},OAe={southEast:n=>({top:n.bottom,left:n.left,name:"se"}),southWest:(n,t)=>({top:n.bottom,left:n.left-t.width+n.width,name:"sw"}),northEast:(n,t)=>({top:n.top-t.height,left:n.left,name:"ne"}),northWest:(n,t)=>({top:n.top-t.height,left:n.left-t.width+n.width,name:"nw"}),eastSouth:n=>({top:n.top,left:n.right-Db,name:"es"}),eastNorth:(n,t)=>({top:n.top-t.height,left:n.right-Db,name:"en"}),westSouth:(n,t)=>({top:n.top,left:n.left-t.width+Db,name:"ws"}),westNorth:(n,t)=>({top:n.top-t.height,left:n.left-t.width+Db,name:"wn"})},RAe=[{menuId:"file",label:"File",groups:[{groupId:"export",items:["menuBar:exportPdf","menuBar:exportWord"]},{groupId:"import",items:["menuBar:importWord"]},{groupId:"revisionHistory",items:["menuBar:revisionHistory"]}]},{menuId:"edit",label:"Edit",groups:[{groupId:"undo",items:["menuBar:undo","menuBar:redo"]},{groupId:"selectAll",items:["menuBar:selectAll"]},{groupId:"findAndReplace",items:["menuBar:findAndReplace"]}]},{menuId:"view",label:"View",groups:[{groupId:"sourceEditingEnhanced",items:["menuBar:sourceEditingEnhanced"]},{groupId:"sourceEditing",items:["menuBar:sourceEditing"]},{groupId:"showBlocks",items:["menuBar:showBlocks"]},{groupId:"previewMergeFields",items:["menuBar:previewMergeFields"]},{groupId:"fullscreen",items:["menuBar:fullscreen"]},{groupId:"restrictedEditing",items:["menuBar:restrictedEditing"]}]},{menuId:"insert",label:"Insert",groups:[{groupId:"insertMainWidgets",items:["menuBar:insertImage","menuBar:ckbox","menuBar:ckfinder","menuBar:insertTable","menuBar:insertTableLayout"]},{groupId:"insertInline",items:["menuBar:link","menuBar:bookmark","menuBar:comment","menuBar:insertMergeField","menuBar:emoji"]},{groupId:"insertMinorWidgets",items:["menuBar:mediaEmbed","menuBar:insertTemplate","menuBar:specialCharacters","menuBar:blockQuote","menuBar:codeBlock","menuBar:htmlEmbed"]},{groupId:"insertStructureWidgets",items:["menuBar:horizontalLine","menuBar:pageBreak","menuBar:tableOfContents"]},{groupId:"restrictedEditingException",items:["menuBar:restrictedEditingException"]}]},{menuId:"format",label:"Format",groups:[{groupId:"textAndFont",items:[{menuId:"text",label:"Text",groups:[{groupId:"basicStyles",items:["menuBar:bold","menuBar:italic","menuBar:underline","menuBar:strikethrough","menuBar:superscript","menuBar:subscript","menuBar:code"]},{groupId:"textPartLanguage",items:["menuBar:textPartLanguage"]}]},{menuId:"font",label:"Font",groups:[{groupId:"fontProperties",items:["menuBar:fontSize","menuBar:fontFamily"]},{groupId:"fontColors",items:["menuBar:fontColor","menuBar:fontBackgroundColor"]},{groupId:"highlight",items:["menuBar:highlight"]}]},"menuBar:heading"]},{groupId:"list",items:["menuBar:bulletedList","menuBar:numberedList","menuBar:multiLevelList","menuBar:todoList"]},{groupId:"indent",items:["menuBar:alignment","menuBar:indent","menuBar:outdent"]},{groupId:"caseChange",items:["menuBar:caseChange"]},{groupId:"removeFormat",items:["menuBar:removeFormat"]}]},{menuId:"tools",label:"Tools",groups:[{groupId:"aiTools",items:["menuBar:aiAssistant","menuBar:aiCommands"]},{groupId:"tools",items:["menuBar:trackChanges","menuBar:commentsArchive"]}]},{menuId:"help",label:"Help",groups:[{groupId:"help",items:["menuBar:accessibilityHelp"]}]}];function VAe(n){let t;return!("items"in n)||!n.items?t={items:Ys(RAe),addItems:[],removeItems:[],isVisible:!0,isUsingDefaultConfig:!0,...n}:t={items:n.items,removeItems:[],addItems:[],isVisible:!0,isUsingDefaultConfig:!1,...n},t}function DAe({normalizedConfig:n,locale:t,componentFactory:e,extraItems:i}){const r=Ys(n);return jN(n,r,i),NAe(n,r),jN(n,r,r.addItems),LAe(n,r,e),u7(n,r),MAe(r,t),r}function NAe(n,t){const e=t.removeItems,i=[];t.items=t.items.filter(({menuId:r})=>e.includes(r)?(i.push(r),!1):!0),$m(t.items,r=>{r.groups=r.groups.filter(({groupId:s})=>e.includes(s)?(i.push(s),!1):!0);for(const s of r.groups)s.items=s.items.filter(o=>{const a=d7(o);return e.includes(a)?(i.push(a),!1):!0})});for(const r of e)i.includes(r)||mn("menu-bar-item-could-not-be-removed",{menuBarConfig:n,itemName:r})}function jN(n,t,e){const i=[];if(e.length!=0){for(const r of e){const s=FAe(r.position),o=UAe(r.position);if($Ae(r))if(!o)s==="start"?(t.items.unshift(r.menu),i.push(r)):s==="end"&&(t.items.push(r.menu),i.push(r));else{const a=t.items.findIndex(l=>l.menuId===o);a!=-1?s==="before"?(t.items.splice(a,0,r.menu),i.push(r)):s==="after"&&(t.items.splice(a+1,0,r.menu),i.push(r)):qN(t,r.menu,o,s)&&i.push(r)}else BAe(r)?$m(t.items,a=>{if(a.menuId===o)s==="start"?(a.groups.unshift(r.group),i.push(r)):s==="end"&&(a.groups.push(r.group),i.push(r));else{const l=a.groups.findIndex(c=>c.groupId===o);l!==-1&&(s==="before"?(a.groups.splice(l,0,r.group),i.push(r)):s==="after"&&(a.groups.splice(l+1,0,r.group),i.push(r)))}}):qN(t,r.item,o,s)&&i.push(r)}for(const r of e)i.includes(r)||mn("menu-bar-item-could-not-be-added",{menuBarConfig:n,addedItemConfig:r})}}function qN(n,t,e,i){let r=!1;return $m(n.items,s=>{for(const{groupId:o,items:a}of s.groups){if(r)return;if(o===e)i==="start"?(a.unshift(t),r=!0):i==="end"&&(a.push(t),r=!0);else{const l=a.findIndex(c=>d7(c)===e);l!==-1&&(i==="before"?(a.splice(l,0,t),r=!0):i==="after"&&(a.splice(l+1,0,t),r=!0))}}}),r}function LAe(n,t,e){$m(t.items,i=>{for(const r of i.groups)r.items=r.items.filter(s=>{const o=typeof s=="string"&&!e.has(s);return o&&!t.isUsingDefaultConfig&&mn("menu-bar-item-unavailable",{menuBarConfig:n,parentMenuConfig:Ys(i),componentName:s}),!o})})}function u7(n,t){const e=t.isUsingDefaultConfig;let i=!1;if(t.items=t.items.filter(r=>r.groups.length?!0:(oE(n,r,e),!1)),!t.items.length){oE(n,n,e);return}$m(t.items,r=>{r.groups=r.groups.filter(s=>s.items.length?!0:(i=!0,!1));for(const s of r.groups)s.items=s.items.filter(o=>f7(o)&&!o.groups.length?(oE(n,o,e),i=!0,!1):!0)}),i&&u7(n,t)}function oE(n,t,e){e||mn("menu-bar-menu-empty",{menuBarConfig:n,emptyMenuConfig:t})}function MAe(n,t){const e=t.t,i={File:e({string:"File",id:"MENU_BAR_MENU_FILE"}),Edit:e({string:"Edit",id:"MENU_BAR_MENU_EDIT"}),View:e({string:"View",id:"MENU_BAR_MENU_VIEW"}),Insert:e({string:"Insert",id:"MENU_BAR_MENU_INSERT"}),Format:e({string:"Format",id:"MENU_BAR_MENU_FORMAT"}),Tools:e({string:"Tools",id:"MENU_BAR_MENU_TOOLS"}),Help:e({string:"Help",id:"MENU_BAR_MENU_HELP"}),Text:e({string:"Text",id:"MENU_BAR_MENU_TEXT"}),Font:e({string:"Font",id:"MENU_BAR_MENU_FONT"})};$m(n.items,r=>{r.label in i&&(r.label=i[r.label])})}function $m(n,t){if(Array.isArray(n))for(const i of n)e(i);function e(i){t(i);for(const r of i.groups)for(const s of r.items)f7(s)&&e(s)}}function $Ae(n){return typeof n=="object"&&"menu"in n}function BAe(n){return typeof n=="object"&&"group"in n}function FAe(n){return n.startsWith("start")?"start":n.startsWith("end")?"end":n.startsWith("after")?"after":"before"}function UAe(n){const t=n.match(/^[^:]+:(.+)/);return t?t[1]:null}function d7(n){return typeof n=="string"?n:n.menuId}function f7(n){return typeof n=="object"&&"menuId"in n}class zAe extends Wn(){constructor(e){super();y(this,"editor");y(this,"componentFactory");y(this,"focusTracker");y(this,"tooltipManager");y(this,"poweredBy");y(this,"evaluationBadge");y(this,"ariaLiveAnnouncer");y(this,"isReady",!1);y(this,"_editableElementsMap",new Map);y(this,"_focusableToolbarDefinitions",[]);y(this,"_extraMenuBarElements",[]);y(this,"_lastFocusedForeignElement",null);y(this,"_domEmitter");const i=e.editing.view;this.editor=e,this.componentFactory=new vAe(e),this.focusTracker=new Mn,this.tooltipManager=new HT(e),this.poweredBy=new CAe(e),this.evaluationBadge=new SAe(e),this.ariaLiveAnnouncer=new IAe(e),this._initViewportOffset(this._readViewportOffsetFromConfig()),this.once("ready",()=>{this._bindBodyCollectionWithFocusTracker(),this.isReady=!0}),this.listenTo(i.document,"layoutChanged",this.update.bind(this)),this.listenTo(i,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking(),this._initVisualViewportSupport()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy(),this.evaluationBadge.destroy();for(const e of this._editableElementsMap.values())e.ckeditorInstance=null,this.editor.keystrokes.stopListening(e);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[],this._domEmitter&&this._domEmitter.stopListening()}setEditableElement(e,i){this._editableElementsMap.set(e,i),i.ckeditorInstance||(i.ckeditorInstance=this.editor),this.focusTracker.add(i);const r=()=>{this.editor.editing.view.getDomRoot(e)||this.editor.keystrokes.listenTo(i)};this.isReady?r():this.once("ready",r)}removeEditableElement(e){const i=this._editableElementsMap.get(e);i&&(this._editableElementsMap.delete(e),this.editor.keystrokes.stopListening(i),this.focusTracker.remove(i),i.ckeditorInstance=null)}getEditableElement(e="main"){return this._editableElementsMap.get(e)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(e,i={}){e.isRendered?(this.focusTracker.add(e),this.editor.keystrokes.listenTo(e.element)):e.once("render",()=>{this.focusTracker.add(e),this.editor.keystrokes.listenTo(e.element)}),this._focusableToolbarDefinitions.push({toolbarView:e,options:i})}extendMenuBar(e){this._extraMenuBarElements.push(e)}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}initMenuBar(e){const i=e.element;this.focusTracker.add(i),this.editor.keystrokes.listenTo(i);const r=VAe(this.editor.config.get("menuBar")||{});e.fillFromConfig(r,this.componentFactory,this._extraMenuBarElements),this.editor.keystrokes.set("Esc",(s,o)=>{i.contains(this.editor.ui.focusTracker.focusedElement)&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):this.editor.editing.view.focus(),o())}),this.editor.keystrokes.set("Alt+F9",(s,o)=>{i.contains(this.editor.ui.focusTracker.focusedElement)||(this._saveLastFocusedForeignElement(),e.isFocusBorderEnabled=!0,e.focus(),o())})}_readViewportOffsetFromConfig(){const e=this.editor,i=e.config.get("ui.viewportOffset");if(i)return i;const r=e.config.get("toolbar.viewportTopOffset");return r?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:r}):{top:0}}_initFocusTracking(){const e=this.editor;let i;e.keystrokes.set("Alt+F10",(r,s)=>{this._saveLastFocusedForeignElement();const o=this._getCurrentFocusedToolbarDefinition();(!o||!i)&&(i=this._getFocusableCandidateToolbarDefinitions());for(let a=0;a<i.length;a++){const l=i.shift();if(i.push(l),l!==o&&this._focusFocusableCandidateToolbar(l)){o&&o.options.afterBlur&&o.options.afterBlur();break}}s()}),e.keystrokes.set("Esc",(r,s)=>{const o=this._getCurrentFocusedToolbarDefinition();o&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):e.editing.view.focus(),o.options.afterBlur&&o.options.afterBlur(),s())})}_saveLastFocusedForeignElement(){const e=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(e)&&!Array.from(this.editor.editing.view.domRoots.values()).includes(e)&&(this._lastFocusedForeignElement=e)}_getFocusableCandidateToolbarDefinitions(){const e=[];for(const i of this._focusableToolbarDefinitions){const{toolbarView:r,options:s}=i;(dl(r.element)||s.beforeFocus)&&e.push(i)}return e.sort((i,r)=>GN(i)-GN(r)),e}_getCurrentFocusedToolbarDefinition(){for(const e of this._focusableToolbarDefinitions)if(e.toolbarView.element&&e.toolbarView.element.contains(this.focusTracker.focusedElement))return e;return null}_focusFocusableCandidateToolbar(e){const{toolbarView:i,options:{beforeFocus:r}}=e;return r&&r(),dl(i.element)?(i.focus(),!0):!1}_handleScrollToTheSelection(e,i){const r={top:0,bottom:0,left:0,right:0,...this.viewportOffset};i.viewportOffset.top+=r.top,i.viewportOffset.bottom+=r.bottom,i.viewportOffset.left+=r.left,i.viewportOffset.right+=r.right}_bindBodyCollectionWithFocusTracker(){const e=this.view.body;for(const i of e)this.focusTracker.add(i.element);e.on("add",(i,r)=>{this.focusTracker.add(r.element)}),e.on("remove",(i,r)=>{this.focusTracker.remove(r.element)})}_initViewportOffset(e){this.on("set:viewportOffset",(i,r,s)=>{const o=this._getVisualViewportTopOffset(s);s.visualTop!==o&&(i.return={...s,visualTop:o})}),this.set("viewportOffset",e)}_initVisualViewportSupport(){if(!at.window.visualViewport)return;const e=()=>{const i=this._getVisualViewportTopOffset(this.viewportOffset);this.viewportOffset.visualTop!==i&&(this.viewportOffset={...this.viewportOffset,visualTop:i})};this._domEmitter=new(ds()),this._domEmitter.listenTo(at.window.visualViewport,"scroll",e),this._domEmitter.listenTo(at.window.visualViewport,"resize",e)}_getVisualViewportTopOffset(e){const i=Ew().top,r=e.top||0;return i>r?0:r-i}}function GN(n){const{toolbarView:t,options:e}=n;let i=10;return dl(t.element)&&i--,e.isContextual&&(i-=2),i}class HAe extends dt{constructor(e){super(e);y(this,"body");y(this,"menuBarView");y(this,"toolbar");this.body=new Hy(e)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}class WAe extends HAe{constructor(e){super(e);y(this,"top");y(this,"main");y(this,"_voiceLabelView");this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:e.uiLanguageDirection,lang:e.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const e=this.t,i=new js;return i.text=e("Rich Text Editor"),i.extendTemplate({attributes:{class:"ck-voice-label"}}),i}}class jAe extends dt{constructor(e,i,r){super(e);y(this,"name",null);y(this,"_editingView");y(this,"_editableElement");y(this,"_hasExternalElement");this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=r,this._hasExternalElement=!!this._editableElement,this._editingView=i}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){const e=this._editingView;e.isRenderingInProgress?r(this):i(this);function i(s){e.change(o=>{const a=e.document.getRoot(s.name);o.addClass(s.isFocused?"ck-focused":"ck-blurred",a),o.removeClass(s.isFocused?"ck-blurred":"ck-focused",a)})}function r(s){e.once("change:isRenderingInProgress",(o,a,l)=>{l?r(s):i(s)})}}}class qAe extends jAe{constructor(e,i,r,s={}){super(e,i,r);y(this,"_options");this._options=s,this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();const e=this._editingView;e.change(i=>{const r=e.document.getRoot(this.name);i.setAttribute("aria-label",this.getEditableAriaLabel(),r)})}getEditableAriaLabel(){const e=this.locale.t,i=this._options.label,r=this._editableElement,s=this.name;if(typeof i=="string")return i;if(typeof i=="object")return i[s];if(typeof i=="function")return i(this);if(r){const o=r.getAttribute("aria-label");if(o)return o}return e("Rich Text Editor. Editing area: %0",s)}}class Cr extends dt{constructor(e,i={}){super(e);y(this,"children");const r=this.bindTemplate;this.set("class",["ck","ck-form__row",...jn(i.class||[])]),this.children=this.createCollection(),i.children&&i.children.forEach(s=>this.children.add(s)),this.set("_role",null),this.set("_ariaLabelledBy",null),i.labelView&&this.set({_role:"group",_ariaLabelledBy:i.labelView.id}),this.setTemplate({tag:"div",attributes:{class:r.to("class",s=>s.join(" ")),role:r.to("_role"),"aria-labelledby":r.to("_ariaLabelledBy")},children:this.children})}}class KN extends N0{static get pluginName(){return"Notification"}static get isOfficialPlugin(){return!0}init(){this.on("show:warning",(t,e)=>{window.alert(e.message)},{priority:"lowest"})}showSuccess(t,e={}){this._showNotification({message:t,type:"success",namespace:e.namespace,title:e.title})}showInfo(t,e={}){this._showNotification({message:t,type:"info",namespace:e.namespace,title:e.title})}showWarning(t,e={}){this._showNotification({message:t,type:"warning",namespace:e.namespace,title:e.title})}_showNotification(t){const e=t.namespace?`show:${t.type}:${t.namespace}`:`show:${t.type}`;this.fire(e,{message:t.message,type:t.type,title:t.title||""})}}class $d extends Wn(){constructor(t,e){super(),e&&J6(this,e),t&&this.set(t)}}const Nb=gc("px");class bo extends Ne{constructor(e){super(e);y(this,"positionLimiter");y(this,"visibleStack");y(this,"_viewToStack",new Map);y(this,"_idToStack",new Map);y(this,"_view",null);y(this,"_rotatorView",null);y(this,"_fakePanelsView",null);this.positionLimiter=()=>{const i=this.editor.editing.view,s=i.document.selection.editableElement;return s?i.domConverter.mapViewToDom(s.root):null},this.decorate("getPositionOptions"),this.set("visibleView",null),this.set("_numberOfStacks",0),this.set("_singleViewMode",!1)}static get pluginName(){return"ContextualBalloon"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(e){return Array.from(this._viewToStack.keys()).includes(e)}add(e){if(this._view||this._createPanelView(),this.hasView(e.view))throw new we("contextualballoon-add-view-exist",[this,e]);const i=e.stackId||"main";if(!this._idToStack.has(i)){this._idToStack.set(i,new Map([[e.view,e]])),this._viewToStack.set(e.view,this._idToStack.get(i)),this._numberOfStacks=this._idToStack.size,(!this._visibleStack||e.singleViewMode)&&this.showStack(i);return}const r=this._idToStack.get(i);e.singleViewMode&&this.showStack(i),r.set(e.view,e),this._viewToStack.set(e.view,r),r===this._visibleStack&&this._showView(e)}remove(e){if(!this.hasView(e))throw new we("contextualballoon-remove-view-not-exist",[this,e]);const i=this._viewToStack.get(e);this._singleViewMode&&this.visibleView===e&&(this._singleViewMode=!1),this.visibleView===e&&(i.size===1?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(i.values())[i.size-2])),i.size===1?(this._idToStack.delete(this._getStackId(i)),this._numberOfStacks=this._idToStack.size):i.delete(e),this._viewToStack.delete(e)}updatePosition(e){e&&(this._visibleStack.get(this.visibleView).position=e),this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition()}getPositionOptions(){let e=Array.from(this._visibleStack.values()).pop().position;return e&&(e.limiter||(e=Object.assign({},e,{limiter:this.positionLimiter})),e=Object.assign({},e,{viewportOffsetConfig:{...this.editor.ui.viewportOffset,top:this.editor.ui.viewportOffset.visualTop}})),e}showStack(e){this.visibleStack=e;const i=this._idToStack.get(e);if(!i)throw new we("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==i&&this._showView(Array.from(i.values()).pop())}_createPanelView(){this._view=new ar(this.editor.locale),this.editor.ui.view.body.add(this._view),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(e){return Array.from(this._idToStack.entries()).find(r=>r[1]===e)[0]}_showNextStack(){const e=Array.from(this._idToStack.values());let i=e.indexOf(this._visibleStack)+1;e[i]||(i=0),this.showStack(this._getStackId(e[i]))}_showPrevStack(){const e=Array.from(this._idToStack.values());let i=e.indexOf(this._visibleStack)-1;e[i]||(i=e.length-1),this.showStack(this._getStackId(e[i]))}_createRotatorView(){const e=new GAe(this.editor.locale),i=this.editor.locale.t;return this.view.content.add(e),e.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(r,s)=>!s&&r>1),e.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),e.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(r,s)=>{if(s<2)return"";const o=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return i("%0 of %1",[o,s])}),e.buttonNextView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),e.buttonPrevView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),e}_createFakePanelsView(){const e=new KAe(this.editor.locale,this.view);return e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(i,r)=>!r&&i>=2?Math.min(i-1,2):0),e.listenTo(this.view,"change:top",()=>e.updatePosition()),e.listenTo(this.view,"change:left",()=>e.updatePosition()),this.editor.ui.view.body.add(e),e}_showView({view:e,balloonClassName:i="",withArrow:r=!0,singleViewMode:s=!1}){this.view.class=i,this.view.withArrow=r,this._rotatorView.showView(e),this.visibleView=e,this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition(),s&&(this._singleViewMode=!0)}}class GAe extends dt{constructor(e){super(e);y(this,"focusTracker");y(this,"buttonPrevView");y(this,"buttonNextView");y(this,"content");const i=e.t,r=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new Mn,this.buttonPrevView=this._createButtonView(i("Previous"),sc),this.buttonNextView=this._createButtonView(i("Next"),O8),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",r.to("isNavigationVisible",s=>s?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:r.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(e){this.hideView(),this.content.add(e)}hideView(){this.content.clear()}_createButtonView(e,i){const r=new wt(this.locale);return r.set({label:e,icon:i,tooltip:!0}),r}}class KAe extends dt{constructor(e,i){super(e);y(this,"content");y(this,"_balloonPanelView");const r=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=i,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",r.to("numberOfPanels",s=>s?"":"ck-hidden")],style:{top:r.to("top",Nb),left:r.to("left",Nb),width:r.to("width",Nb),height:r.to("height",Nb)}},children:this.content}),this.on("change:numberOfPanels",(s,o,a,l)=>{a>l?this._addPanels(a-l):this._removePanels(l-a),this.updatePosition()})}_addPanels(e){for(;e--;){const i=new dt;i.setTemplate({tag:"div"}),this.content.add(i),this.registerChild(i)}}_removePanels(e){for(;e--;){const i=this.content.last;this.content.remove(i),this.deregisterChild(i),i.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:e,left:i}=this._balloonPanelView,{width:r,height:s}=new It(this._balloonPanelView.element);Object.assign(this,{top:e,left:i,width:r,height:s})}}}const Ef=gc("px");class YAe extends dt{constructor(e){super(e);y(this,"content");y(this,"contentPanelElement");y(this,"_contentPanelPlaceholder");const i=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheBottomOfLimiter",!1),this.set("_stickyTopOffset",null),this.set("_stickyBottomOffset",null),this.content=this.createCollection(),this._contentPanelPlaceholder=new Ks({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:i.to("isSticky",r=>r?"block":"none"),height:i.to("isSticky",r=>r?Ef(this._contentPanelRect.height):null)}}}).render(),this.contentPanelElement=new Ks({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",i.if("isSticky","ck-sticky-panel__content_sticky"),i.if("_isStickyToTheBottomOfLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:i.to("isSticky",r=>r?Ef(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:i.to("_stickyTopOffset",r=>r&&Ef(r)),bottom:i.to("_stickyBottomOffset",r=>r&&Ef(r)),marginLeft:i.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this.contentPanelElement]})}render(){super.render(),this.checkIfShouldBeSticky(),this.listenTo(at.document,"scroll",()=>{this.checkIfShouldBeSticky()},{useCapture:!0}),this.listenTo(this,"change:isActive",()=>{this.checkIfShouldBeSticky()}),at.window.visualViewport&&(this.listenTo(at.window.visualViewport,"scroll",()=>{this.checkIfShouldBeSticky()}),this.listenTo(at.window.visualViewport,"resize",()=>{this.checkIfShouldBeSticky()}))}checkIfShouldBeSticky(){if(!this.limiterElement||!this.isActive){this._unstick();return}const e=new It(this.limiterElement);let i=e.getVisible();if(i){const o=new It(at.window);o.top+=this.viewportTopOffset,o.height-=this.viewportTopOffset,i=i.getIntersection(o)}const{left:r,top:s}=Ew();if(e.moveBy(r,s),i&&i.moveBy(r,s),i&&e.top<i.top)if(this._contentPanelRect.height+this.limiterBottomOffset>i.height){const o=Math.max(e.bottom-i.bottom,0)+this.limiterBottomOffset;this._contentPanelRect.height+o+1<e.height?this._stickToBottomOfLimiter(o):this._unstick()}else this._contentPanelRect.height+this.limiterBottomOffset<e.height?this._stickToTopOfAncestors(i.top):this._unstick();else this._unstick()}_stickToTopOfAncestors(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=e,this._stickyBottomOffset=null,this._marginLeft=Ef(-at.window.scrollX+Ew().left)}_stickToBottomOfLimiter(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!0,this._stickyTopOffset=null,this._stickyBottomOffset=e,this._marginLeft=Ef(-at.window.scrollX+Ew().left)}_unstick(){this.isSticky=!1,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=null,this._stickyBottomOffset=null,this._marginLeft=null}get _contentPanelRect(){return new It(this.contentPanelElement)}}const QAe=gc("px");class ZAe extends Ne{constructor(e){super(e);y(this,"toolbarView");y(this,"focusTracker");y(this,"_balloonConfig");y(this,"_resizeObserver",null);y(this,"_balloon");y(this,"_fireSelectionChangeDebounced");this._balloonConfig=B0(e.config.get("balloonToolbar")),this.toolbarView=this._createToolbarView(),this.focusTracker=new Mn,this._trackFocusableEditableElements(),this.focusTracker.add(this.toolbarView),e.ui.addToolbar(this.toolbarView,{beforeFocus:()=>this.show(!0),afterBlur:()=>this.hide(),isContextual:!0}),this._balloon=e.plugins.get(bo),this._fireSelectionChangeDebounced=go(()=>this.fire("_selectionChangeDebounced"),200),this.decorate("show")}static get pluginName(){return"BalloonToolbar"}static get isOfficialPlugin(){return!0}static get requires(){return[bo]}init(){const e=this.editor,i=e.model.document.selection;this.listenTo(this.focusTracker,"change:isFocused",(r,s,o)=>{const a=this._balloon.visibleView===this.toolbarView;!o&&a?this.hide():o&&this.show()}),this.listenTo(i,"change:range",(r,s)=>{(s.directChange||i.isCollapsed)&&this.hide(),this._fireSelectionChangeDebounced()}),this.listenTo(this,"_selectionChangeDebounced",()=>{this.editor.editing.view.document.isFocused&&this.show()}),this._balloonConfig.shouldNotGroupWhenFull||this.listenTo(e,"ready",()=>{const r=e.ui.view.editable.element;this._resizeObserver=new Rd(r,s=>{this.toolbarView.maxWidth=QAe(s.contentRect.width*.9)})}),this.listenTo(this.toolbarView,"groupedItemsUpdate",()=>{this._updatePosition()}),e.ui.once("ready",()=>{this.toolbarView.fillFromConfig(this._balloonConfig,this.editor.ui.componentFactory)})}_createToolbarView(){const e=this.editor.locale.t,i=!this._balloonConfig.shouldNotGroupWhenFull,r=new oc(this.editor.locale,{shouldGroupWhenFull:i,isFloating:!0});return r.ariaLabel=e("Editor contextual toolbar"),r.render(),r}show(e=!1){const i=this.editor,r=i.model.document.selection,s=i.model.schema;this._balloon.hasView(this.toolbarView)||r.isCollapsed&&!e||JAe(r,s)||Array.from(this.toolbarView.items).every(o=>o.isEnabled!==void 0&&!o.isEnabled)||(this.listenTo(this.editor.ui,"update",()=>{this._updatePosition()}),this._balloon.add({view:this.toolbarView,position:this._getBalloonPositionData(),balloonClassName:"ck-toolbar-container"}))}hide(){this._balloon.hasView(this.toolbarView)&&(this.stopListening(this.editor.ui,"update"),this._balloon.remove(this.toolbarView))}_trackFocusableEditableElements(){const{editor:e,focusTracker:i}=this,{editing:r}=e;r.view.addObserver(class extends Aa{observe(o){i.add(o)}stopObserving(o){i.remove(o)}})}_getBalloonPositionData(){const i=this.editor.editing.view,r=i.document,s=r.selection,o=r.selection.isBackward;return{target:()=>{const a=o?s.getFirstRange():s.getLastRange(),l=It.getDomRangeRects(i.domConverter.viewRangeToDom(a));return o?l[0]:(l.length>1&&l[l.length-1].width===0&&l.pop(),l[l.length-1])},positions:this._getBalloonPositions(o)}}_updatePosition(){this._balloon.updatePosition(this._getBalloonPositionData())}destroy(){super.destroy(),this.stopListening(),this._fireSelectionChangeDebounced.cancel(),this.toolbarView.destroy(),this.focusTracker.destroy(),this._resizeObserver&&this._resizeObserver.destroy()}_getBalloonPositions(e){const r=Vt.isSafari&&Vt.isiOS?ar.generatePositions({heightOffset:Math.max(ar.arrowHeightOffset,Math.round(20/at.window.visualViewport.scale))}):ar.defaultPositions;return e?[r.northWestArrowSouth,r.northWestArrowSouthWest,r.northWestArrowSouthEast,r.northWestArrowSouthMiddleEast,r.northWestArrowSouthMiddleWest,r.southWestArrowNorth,r.southWestArrowNorthWest,r.southWestArrowNorthEast,r.southWestArrowNorthMiddleWest,r.southWestArrowNorthMiddleEast]:[r.southEastArrowNorth,r.southEastArrowNorthEast,r.southEastArrowNorthWest,r.southEastArrowNorthMiddleEast,r.southEastArrowNorthMiddleWest,r.northEastArrowSouth,r.northEastArrowSouthEast,r.northEastArrowSouthWest,r.northEastArrowSouthMiddleEast,r.northEastArrowSouthMiddleWest]}}function JAe(n,t){return n.rangeCount===1?!1:[...n.getRanges()].every(e=>{const i=e.getContainedElement();return i&&t.isSelectable(i)})}const YN=gc("px");class XAe extends wt{constructor(t){super(t);const e=this.bindTemplate;this.isVisible=!1,this.isToggleable=!0,this.set("top",0),this.set("left",0),this.extendTemplate({attributes:{class:"ck-block-toolbar-button",style:{top:e.to("top",i=>YN(i)),left:e.to("left",i=>YN(i))}}})}}const pg=gc("px");class eIe extends Ne{constructor(e){super(e);y(this,"toolbarView");y(this,"panelView");y(this,"buttonView");y(this,"_resizeObserver",null);y(this,"_blockToolbarConfig");this._blockToolbarConfig=B0(this.editor.config.get("blockToolbar")),this.toolbarView=this._createToolbarView(),this.panelView=this._createPanelView(),this.buttonView=this._createButtonView(),pc({emitter:this.panelView,contextElements:[this.panelView.element,this.buttonView.element],activator:()=>this.panelView.isVisible,callback:()=>this._hidePanel()})}static get pluginName(){return"BlockToolbar"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=e.t,r=i("Click to edit block"),s=i("Drag to move"),o=i("Edit block"),a=e.plugins.has("DragDropBlockToolbar"),l=a?`${r}
${s}`:o;this.buttonView.label=l,a&&(this.buttonView.element.dataset.ckeTooltipClass="ck-tooltip_multi-line"),this.listenTo(e.model.document.selection,"change:range",(c,u)=>{u.directChange&&this._hidePanel()}),this.listenTo(e.ui,"update",()=>this._updateButton()),this.listenTo(e,"change:isReadOnly",()=>this._updateButton(),{priority:"low"}),this.listenTo(e.ui.focusTracker,"change:isFocused",()=>this._updateButton()),this.listenTo(this.buttonView,"change:isVisible",(c,u,d)=>{d?this.buttonView.listenTo(window,"resize",()=>this._updateButton()):(this.buttonView.stopListening(window,"resize"),this._hidePanel())}),this._repositionButtonOnScroll(),e.ui.addToolbar(this.toolbarView,{beforeFocus:()=>this._showPanel(),afterBlur:()=>this._hidePanel()}),e.ui.once("ready",()=>{this.toolbarView.fillFromConfig(this._blockToolbarConfig,this.editor.ui.componentFactory);for(const c of this.toolbarView.items)c.on("execute",()=>this._hidePanel(!0),{priority:"high"})})}destroy(){super.destroy(),this.panelView.destroy(),this.buttonView.destroy(),this.toolbarView.destroy(),this._resizeObserver&&this._resizeObserver.destroy()}_createToolbarView(){const e=this.editor.locale.t,i=!this._blockToolbarConfig.shouldNotGroupWhenFull,r=new oc(this.editor.locale,{shouldGroupWhenFull:i,isFloating:!0});return r.ariaLabel=e("Editor block content toolbar"),r}_createPanelView(){const e=this.editor,i=new ar(e.locale);return i.content.add(this.toolbarView),i.class="ck-toolbar-container",e.ui.view.body.add(i),this.toolbarView.keystrokes.set("Esc",(r,s)=>{this._hidePanel(!0),s()}),i}_createButtonView(){const e=this.editor,i=e.t,r=new XAe(e.locale),s=this._blockToolbarConfig.icon,o=zT[s]||s||zT.dragIndicator;return r.set({label:i("Edit block"),icon:o,withText:!1}),r.bind("isOn").to(this.panelView,"isVisible"),r.bind("tooltip").to(this.panelView,"isVisible",a=>!a),this.listenTo(r,"execute",()=>{this.panelView.isVisible?this._hidePanel(!0):this._showPanel()}),this.listenTo(r,"change:isEnabled",(a,l,c)=>{!c&&this.panelView.isVisible&&this._hidePanel(!1)}),e.ui.view.body.add(r),r}_updateButton(){const e=this.editor,i=e.model,r=e.editing.view;if(!e.ui.focusTracker.isFocused){this._hideButton();return}if(!e.model.canEditAt(e.model.document.selection)){this._hideButton();return}const s=Array.from(i.document.selection.getSelectedBlocks())[0];if(!s||Array.from(this.toolbarView.items).every(a=>!a.isEnabled)){this._hideButton();return}const o=r.domConverter.mapViewToDom(e.editing.mapper.toViewElement(s));this.buttonView.isVisible=!0,this._setupToolbarResize(),this._attachButtonToElement(o),this.panelView.isVisible&&this._showPanel()}_hideButton(){this.buttonView.isVisible=!1}_showPanel(){if(!this.buttonView.isVisible)return;const e=this.panelView.isVisible;this.panelView.show();const i=this._getSelectedEditableElement();this.toolbarView.maxWidth=this._getToolbarMaxWidth(i),this.panelView.pin({target:this.buttonView.element,limiter:i}),e||this.toolbarView.items.get(0).focus()}_getSelectedEditableElement(){const e=this.editor.model.document.selection.getFirstRange().root.rootName;return this.editor.ui.getEditableElement(e)}_hidePanel(e){this.panelView.isVisible=!1,e&&this.editor.editing.view.focus()}_repositionButtonOnScroll(){const{buttonView:e}=this;let i=!1;const r=(s,o)=>{if(i)return;const a=this._getSelectedEditableElement();o.target!==at.document&&!gz(a).includes(o.target)||(i=!0,at.window.requestAnimationFrame(()=>{this._updateButton(),i=!1}))};e.on("change:isVisible",(s,o,a)=>{a?e.listenTo(at.document,"scroll",r,{useCapture:!0,usePassive:!0}):e.stopListening(at.document,"scroll",r)})}_attachButtonToElement(e){const i=this.buttonView.element,r=this._getSelectedEditableElement(),s=window.getComputedStyle(e),o=new It(r),a=parseInt(s.paddingTop,10),l=parseInt(s.lineHeight,10)||parseInt(s.fontSize,10)*1.2,c=new It(i),u=new It(e);let d;this.editor.locale.uiLanguageDirection==="ltr"?d=o.left-c.width:d=o.right;const f=u.top+a+(l-c.height)/2;c.moveTo(d,f);const h=c.toAbsoluteRect();this.buttonView.top=h.top,this.buttonView.left=h.left,this._clipButtonToViewport(this.buttonView,r)}_clipButtonToViewport(e,i){const r=new It(e.element),s=new It(i).getVisible(),o=(...l)=>{e.element.style.clipPath=l.length?`polygon(${l.join(",")})`:""},a=l=>{e.isEnabled=!l,e.element.style.pointerEvents=l?"none":""};if(s&&s.bottom<r.bottom){const l=Math.min(r.height,r.bottom-s.bottom);a(l>=r.height),o("0 0","100% 0",`100% calc(100% - ${pg(l)})`,`0 calc(100% - ${pg(l)}`)}else if(s&&s.top>r.top){const l=Math.min(r.height,s.top-r.top);a(l>=r.height),o(`0 ${pg(l)}`,`100% ${pg(l)}`,"100% 100%","0 100%")}else a(!1),o()}_setupToolbarResize(){const e=this._getSelectedEditableElement();this._blockToolbarConfig.shouldNotGroupWhenFull||(this._resizeObserver&&this._resizeObserver.element!==e&&(this._resizeObserver.destroy(),this._resizeObserver=null),this._resizeObserver||(this._resizeObserver=new Rd(e,()=>{this.toolbarView.maxWidth=this._getToolbarMaxWidth(e)})))}_getToolbarMaxWidth(e){const i=new It(e),r=new It(this.buttonView.element),o=this.editor.locale.uiLanguageDirection==="rtl"?r.left-i.right+r.width:i.left-r.left;return pg(i.width+o)}}class tIe extends Dm{constructor(e){super(e);y(this,"arrowView");const i=this.bindTemplate;this.set({withText:!0,role:"menuitem"}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__button"],"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",r=>String(r)),"data-cke-tooltip-disabled":i.to("isOn")},on:{mouseenter:i.to("mouseenter")}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new Uo;return e.content=$0,e.extendTemplate({attributes:{class:"ck-menu-bar__menu__button__arrow"}}),e}}class nIe extends dt{constructor(e){super(e);y(this,"children");const i=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-menu-bar__menu__panel",i.to("position",r=>`ck-menu-bar__menu__panel_position_${r}`),i.if("isVisible","ck-hidden",r=>!r)],tabindex:"-1"},children:this.children,on:{selectstart:i.to(r=>{r.target.tagName.toLocaleLowerCase()!=="input"&&r.preventDefault()})}})}focus(e=1){this.children.length&&(e===1?this.children.first.focus():this.children.last.focus())}}const v_=class v_ extends dt{constructor(e){super(e);y(this,"buttonView");y(this,"panelView");y(this,"focusTracker");y(this,"keystrokes");const i=this.bindTemplate;this.buttonView=new tIe(e),this.buttonView.delegate("mouseenter").to(this),this.buttonView.bind("isOn","isEnabled").to(this,"isOpen","isEnabled"),this.panelView=new nIe(e),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new oi,this.focusTracker=new Mn,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("panelPosition","w"),this.set("class",void 0),this.set("parentMenuView",null),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar__menu",i.to("class"),i.if("isEnabled","ck-disabled",r=>!r),i.if("parentMenuView","ck-menu-bar__menu_top-level",r=>!r)]},children:[this.buttonView,this.panelView]})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.keystrokes.listenTo(this.element),Sc.closeOnEscKey(this),this._repositionPanelOnOpen()}_attachBehaviors(){this.parentMenuView?(Sc.openOnButtonClick(this),Sc.openOnArrowRightKey(this),Sc.closeOnArrowLeftKey(this),Sc.openAndFocusOnEnterKeyPress(this),Sc.closeOnParentClose(this)):(this._propagateArrowKeystrokeEvents(),Sc.openAndFocusPanelOnArrowDownKey(this),Sc.toggleOnButtonClick(this))}_propagateArrowKeystrokeEvents(){this.keystrokes.set("arrowright",(e,i)=>{this.fire("arrowright"),i()}),this.keystrokes.set("arrowleft",(e,i)=>{this.fire("arrowleft"),i()})}_repositionPanelOnOpen(){this.on("change:isOpen",(e,i,r)=>{if(!r)return;const s=v_._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=s?s.name:this._defaultMenuPositionName})}focus(){this.buttonView.focus()}get _panelPositions(){const{southEast:e,southWest:i,northEast:r,northWest:s,westSouth:o,eastSouth:a,westNorth:l,eastNorth:c}=OAe;return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?[a,c,o,l]:[e,i,r,s]:this.parentMenuView?[o,l,a,c]:[i,e,s,r]}get _defaultMenuPositionName(){return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?"es":"se":this.parentMenuView?"ws":"sw"}};y(v_,"_getOptimalPosition",zI);let ma=v_;class rm extends Nm{constructor(t){super(t),this.role="menu",this.items.on("change",this._setItemsCheckSpace.bind(this))}_setItemsCheckSpace(){const t=Array.from(this.items).some(e=>{const i=QN(e);return i&&i.isToggleable});this.items.forEach(e=>{const i=QN(e);i&&(i.hasCheckSpace=t)})}}function QN(n){return n instanceof Ta?n.children.map(t=>iIe(t)?t.buttonView:t).find(t=>t instanceof Dm):null}function iIe(n){return typeof n=="object"&&"buttonView"in n&&n.buttonView instanceof wt}class h7 extends BSe{constructor(t){super(t),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}const ZN=["mouseenter","arrowleft","arrowright","change:isOpen"];class m7 extends dt{constructor(e){super(e);y(this,"children");y(this,"menus",[]);const i=e.t,r=this.bindTemplate;this.set({isOpen:!1,isFocusBorderEnabled:!1}),this._setupIsOpenUpdater(),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar",r.if("isFocusBorderEnabled","ck-menu-bar_focus-border-enabled")],"aria-label":i("Editor menu bar"),role:"menubar"},children:this.children})}fillFromConfig(e,i,r=[]){const s=this.locale,a=DAe({normalizedConfig:e,locale:s,componentFactory:i,extraItems:r}).items.map(l=>this._createMenu({componentFactory:i,menuDefinition:l}));this.children.addMany(a)}render(){super.render(),kf.toggleMenusAndFocusItemsOnHover(this),kf.closeMenusWhenTheBarCloses(this),kf.closeMenuWhenAnotherOnTheSameLevelOpens(this),kf.focusCycleMenusOnArrows(this),kf.closeOnClickOutside(this),kf.enableFocusHighlightOnInteraction(this)}focus(){this.children.first&&this.children.first.focus()}close(){for(const e of this.children)e.isOpen=!1}disable(){for(const e of this.children)e.isEnabled=!1}enable(){for(const e of this.children)e.isEnabled=!0}registerMenu(e,i=null){i?(e.delegate(...ZN).to(i),e.parentMenuView=i):e.delegate(...ZN).to(this,r=>"menu:"+r),e._attachBehaviors(),this.menus.push(e)}_createMenu({componentFactory:e,menuDefinition:i,parentMenuView:r}){const s=this.locale,o=new ma(s);return this.registerMenu(o,r),o.buttonView.set({label:i.label}),o.once("change:isOpen",()=>{const a=new rm(s);a.ariaLabel=i.label,o.panelView.children.add(a),a.items.addMany(this._createMenuItems({menuDefinition:i,parentMenuView:o,componentFactory:e}))}),o}_createMenuItems({menuDefinition:e,parentMenuView:i,componentFactory:r}){const s=this.locale,o=[];for(const a of e.groups){for(const l of a.items){const c=new Mm(s,i);if(mo(l))c.children.add(this._createMenu({componentFactory:r,menuDefinition:l,parentMenuView:i}));else{const u=this._createMenuItemContentFromFactory({componentName:l,componentFactory:r,parentMenuView:i});if(!u)continue;c.children.add(u)}o.push(c)}a!==e.groups[e.groups.length-1]&&o.push(new pP(s))}return o}_createMenuItemContentFromFactory({componentName:e,parentMenuView:i,componentFactory:r}){const s=r.create(e);return s instanceof ma||s instanceof Ti||s instanceof h7?(this._registerMenuTree(s,i),s.on("execute",()=>{this.close()}),s):(mn("menu-bar-component-unsupported",{componentName:e,componentView:s}),null)}_registerMenuTree(e,i){if(!(e instanceof ma)){e.delegate("mouseenter").to(i);return}this.registerMenu(e,i);const r=e.panelView.children.filter(o=>o instanceof rm)[0];if(!r){e.delegate("mouseenter").to(i);return}const s=r.items.filter(o=>o instanceof Ta);for(const o of s)this._registerMenuTree(o.children.get(0),e)}_setupIsOpenUpdater(){let e;this.on("menu:change:isOpen",(i,r,s)=>{clearTimeout(e),s?this.isOpen=!0:e=setTimeout(()=>{this.isOpen=Array.from(this.children).some(o=>o.isOpen)},0)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const wP=["left","right","center","justify"];function g7(n){return wP.includes(n)}function p7(n,t){return t.contentLanguageDirection=="rtl"?n==="right":n==="left"}function v7(n){const t=n.map(i=>{let r;return typeof i=="string"?r={name:i}:r=i,r}).filter(i=>{const r=wP.includes(i.name);return r||mn("alignment-config-name-not-recognized",{option:i}),r}),e=t.filter(i=>!!i.className).length;if(e&&e<t.length)throw new we("alignment-config-classnames-are-missing",{configuredOptions:n});return t.forEach((i,r,s)=>{const o=s.slice(r+1);if(o.some(l=>l.name==i.name))throw new we("alignment-config-name-already-defined",{option:i,configuredOptions:n});if(i.className&&o.some(c=>c.className==i.className))throw new we("alignment-config-classname-already-defined",{option:i,configuredOptions:n})}),t}const yP="alignment";class rIe extends Nt{refresh(){const e=this.editor.locale,i=gi(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!i&&this._canBeAligned(i),this.isEnabled&&i.hasAttribute("alignment")?this.value=i.getAttribute("alignment"):this.value=e.contentLanguageDirection==="rtl"?"right":"left"}execute(t={}){const e=this.editor,i=e.locale,r=e.model,s=r.document,o=t.value;r.change(a=>{const l=Array.from(s.selection.getSelectedBlocks()).filter(d=>this._canBeAligned(d)),c=l[0].getAttribute("alignment");p7(o,i)||c===o||!o?sIe(l,a):oIe(l,a,o)})}_canBeAligned(t){return this.editor.model.schema.checkAttribute(t,yP)}}function sIe(n,t){for(const e of n)t.removeAttribute(yP,e)}function oIe(n,t,e){for(const i of n)t.setAttribute(yP,e,i)}class aIe extends Ne{static get pluginName(){return"AlignmentEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("alignment",{options:wP.map(e=>({name:e}))})}init(){const t=this.editor,e=t.locale,i=t.model.schema,s=v7(t.config.get("alignment.options")).filter(c=>g7(c.name)&&!p7(c.name,e)),o=s.some(c=>!!c.className);i.extend("$block",{allowAttributes:"alignment"}),t.model.schema.setAttributeProperties("alignment",{isFormatting:!0}),o?t.conversion.attributeToAttribute(dIe(s)):t.conversion.for("downcast").attributeToAttribute(lIe(s));const a=cIe(s);for(const c of a)t.conversion.for("upcast").attributeToAttribute(c);const l=uIe(s);for(const c of l)t.conversion.for("upcast").attributeToAttribute(c);t.commands.add("alignment",new rIe(t))}}function lIe(n){const t={};for(const{name:i}of n)t[i]={key:"style",value:{"text-align":i}};return{model:{key:"alignment",values:n.map(i=>i.name)},view:t}}function cIe(n){const t=[];for(const{name:e}of n)t.push({view:{key:"style",value:{"text-align":e}},model:{key:"alignment",value:e}});return t}function uIe(n){const t=[];for(const{name:e}of n)t.push({view:{key:"align",value:e},model:{key:"alignment",value:e}});return t}function dIe(n){const t={};for(const i of n)t[i.name]={key:"class",value:i.className};return{model:{key:"alignment",values:n.map(i=>i.name)},view:t}}const vg=new Map([["left",aP],["right",A8],["center",T8],["justify",S8]]);class fIe extends Ne{get localizedOptionTitles(){const t=this.editor.t;return{left:t("Align left"),right:t("Align right"),center:t("Align center"),justify:t("Justify")}}static get pluginName(){return"AlignmentUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=v7(t.config.get("alignment.options"));e.map(i=>i.name).filter(g7).forEach(i=>this._addButton(i)),this._addToolbarDropdown(e),this._addMenuBarMenu(e)}_addButton(t){this.editor.ui.componentFactory.add(`alignment:${t}`,i=>this._createButton(i,t))}_createButton(t,e,i={}){const r=this.editor,s=r.commands.get("alignment"),o=new wt(t);return o.set({label:this.localizedOptionTitles[e],icon:vg.get(e),tooltip:!0,isToggleable:!0,...i}),o.bind("isEnabled").to(s),o.bind("isOn").to(s,"value",a=>a===e),this.listenTo(o,"execute",()=>{r.execute("alignment",{value:e}),r.editing.view.focus()}),o}_addToolbarDropdown(t){const e=this.editor;e.ui.componentFactory.add("alignment",r=>{const s=as(r),o=r.uiLanguageDirection==="rtl"?"w":"e",a=r.t;F0(s,()=>t.map(u=>this._createButton(r,u.name,{tooltipPosition:o})),{enableActiveItemFocusOnDropdownOpen:!0,isVertical:!0,ariaLabel:a("Text alignment toolbar")}),s.buttonView.set({label:a("Text alignment"),tooltip:!0}),s.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});const l=r.contentLanguageDirection==="rtl"?vg.get("right"):vg.get("left"),c=e.commands.get("alignment");return s.buttonView.bind("icon").to(c,"value",u=>vg.get(u)||l),s.bind("isEnabled").to(c,"isEnabled"),this.listenTo(s,"execute",()=>{e.editing.view.focus()}),s})}_addMenuBarMenu(t){const e=this.editor;e.ui.componentFactory.add("menuBar:alignment",i=>{const r=e.commands.get("alignment"),s=i.t,o=new ma(i),a=new rm(i);o.bind("isEnabled").to(r),a.set({ariaLabel:s("Text alignment"),role:"menu"}),o.buttonView.set({label:s("Text alignment")});for(const l of t){const c=new Mm(i,o),u=new Ti(i);u.delegate("execute").to(o),u.set({label:this.localizedOptionTitles[l.name],icon:vg.get(l.name),role:"menuitemcheckbox",isToggleable:!0}),u.on("execute",()=>{e.execute("alignment",{value:l.name}),e.editing.view.focus()}),u.bind("isOn").to(r,"value",d=>d===l.name),u.bind("isEnabled").to(r,"isEnabled"),c.children.add(u),a.items.add(c)}return o.panelView.children.add(a),o})}}class hIe extends Ne{static get requires(){return[aIe,fIe]}static get pluginName(){return"Alignment"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class b7{constructor(t,e=20){y(this,"model");y(this,"limit");y(this,"_isLocked");y(this,"_size");y(this,"_batch",null);y(this,"_changeCallback");y(this,"_selectionChangeCallback");this.model=t,this._size=0,this.limit=e,this._isLocked=!1,this._changeCallback=(i,r)=>{r.isLocal&&r.isUndoable&&r!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(t){this._size+=t,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(t=!1){(!this.isLocked||t)&&(this._batch=null,this._size=0)}}class mIe extends Nt{constructor(e,i){super(e);y(this,"_buffer");this._buffer=new b7(e.model,i),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(e={}){const i=this.editor.model,r=i.document,s=e.text||"",o=s.length;let a=r.selection;if(e.selection?a=e.selection:e.range&&(a=i.createSelection(e.range)),!i.canEditAt(a))return;const l=e.resultRange;i.enqueueChange(this._buffer.batch,c=>{this._buffer.lock();const u=Array.from(r.selection.getAttributes());i.deleteContent(a),s&&i.insertContent(c.createText(s,u),a),l?c.setSelection(l):a.is("documentSelection")||c.setSelection(a),this._buffer.unlock(),this._buffer.input(o)})}}const w7=["insertText","insertReplacementText"],gIe=[...w7,"insertCompositionText"];class pIe extends Aa{constructor(e){super(e);y(this,"focusObserver");this.focusObserver=e.getObserver(Ly);const i=Vt.isAndroid?gIe:w7,r=e.document;r.on("beforeinput",(s,o)=>{if(!this.isEnabled)return;const{data:a,targetRanges:l,inputType:c,domEvent:u,isComposing:d}=o;if(!i.includes(c))return;this.focusObserver.flush();const f=new ic(r,"insertText");r.fire(f,new Dd(e,u,{text:a,selection:e.createSelection(l),isComposing:d})),f.stop.called&&s.stop()}),Vt.isAndroid||r.on("compositionend",(s,{data:o,domEvent:a})=>{this.isEnabled&&o&&r.fire("insertText",new Dd(e,a,{text:o,isComposing:!0}))},{priority:"low"})}observe(){}stopObserving(){}}class y7 extends Ne{constructor(){super(...arguments);y(this,"_typingQueue")}static get pluginName(){return"Input"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=e.model,r=e.editing.view,s=e.editing.mapper,o=i.document.selection;this._typingQueue=new vIe(e),r.addObserver(pIe);const a=new mIe(e,e.config.get("typing.undoStep")||20);e.commands.add("insertText",a),e.commands.add("input",a),this.listenTo(r.document,"beforeinput",()=>{this._typingQueue.flush("next beforeinput")},{priority:"high"}),this.listenTo(r.document,"insertText",(l,c)=>{const{text:u,selection:d}=c;if(r.document.selection.isFake&&d&&r.document.selection.isSimilar(d)&&c.preventDefault(),d&&Array.from(d.getRanges()).some(v=>!v.isCollapsed)&&c.preventDefault(),!a.isEnabled){c.preventDefault();return}let f;d?f=Array.from(d.getRanges()).map(v=>s.toModelRange(v)).map(v=>iP(v,i.schema)||v):f=Array.from(o.getRanges());let h=u;if(Vt.isAndroid){const v=Array.from(f[0].getItems()).reduce((_,w)=>_+(w.is("$textProxy")?w.data:""),"");if(v&&(v.length<=h.length?h.startsWith(v)&&(h=h.substring(v.length),f[0].start=f[0].start.getShiftedBy(v.length)):v.startsWith(h)&&(f[0].start=f[0].start.getShiftedBy(h.length),h="")),h.length==0&&f[0].isCollapsed)return}const g={text:h,selection:i.createSelection(f)};this._typingQueue.push(g,!!c.isComposing),c.domEvent.defaultPrevented&&this._typingQueue.flush("beforeinput default prevented")}),Vt.isAndroid?this.listenTo(r.document,"keydown",(l,c)=>{o.isCollapsed||c.keyCode!=229||!r.document.isComposing||JN(i,a)}):this.listenTo(r.document,"compositionstart",()=>{o.isCollapsed||JN(i,a)},{priority:"high"}),this.listenTo(r.document,"mutations",(l,{mutations:c})=>{if(this._typingQueue.hasAffectedElements())for(const{node:u}of c){const d=wIe(u,s),f=s.toModelElement(d);if(this._typingQueue.isElementAffected(f)){this._typingQueue.flush("mutations");return}}}),this.listenTo(r.document,"compositionend",()=>{this._typingQueue.flush("before composition end")},{priority:"high"}),this.listenTo(r.document,"compositionend",()=>{this._typingQueue.flush("after composition end");const l=[];if(this._typingQueue.hasAffectedElements())for(const c of this._typingQueue.flushAffectedElements()){const u=s.toViewElement(c);u&&l.push({type:"children",node:u})}(l.length||!Vt.isAndroid)&&r.document.fire("mutations",{mutations:l})},{priority:"lowest"})}destroy(){super.destroy(),this._typingQueue.destroy()}}class vIe{constructor(t){y(this,"editor");y(this,"flushDebounced",go(()=>this.flush("timeout"),50));y(this,"_queue",[]);y(this,"_isComposing",!1);y(this,"_affectedElements",new Set);this.editor=t}destroy(){for(this.flushDebounced.cancel(),this._affectedElements.clear();this._queue.length;)this.shift()}get length(){return this._queue.length}push(t,e){const i={text:t.text};if(t.selection){i.selectionRanges=[];for(const r of t.selection.getRanges())i.selectionRanges.push(Ts.fromRange(r)),this._affectedElements.add(r.start.parent)}this._queue.push(i),this._isComposing||(this._isComposing=e),this.flushDebounced()}shift(){const t=this._queue.shift(),e={text:t.text};if(t.selectionRanges){const i=t.selectionRanges.map(r=>bIe(r)).filter(r=>!!r);i.length&&(e.selection=this.editor.model.createSelection(i))}return e}flush(t){const e=this.editor,i=e.model,r=e.editing.view;if(this.flushDebounced.cancel(),!this._queue.length)return;const o=e.commands.get("insertText").buffer;i.enqueueChange(o.batch,()=>{for(o.lock();this._queue.length;){const a=this.shift();e.execute("insertText",a)}o.unlock(),this._isComposing||this._affectedElements.clear(),this._isComposing=!1}),r.scrollToTheSelection()}isElementAffected(t){return this._affectedElements.has(t)}hasAffectedElements(){return this._affectedElements.size>0}flushAffectedElements(){const t=Array.from(this._affectedElements);return this._affectedElements.clear(),t}}function JN(n,t){if(!t.isEnabled)return;const e=t.buffer;e.lock(),n.enqueueChange(e.batch,()=>{n.deleteContent(n.document.selection)}),e.unlock()}function bIe(n){const t=n.toRange();return n.detach(),t.root.rootName=="$graveyard"?null:t}function wIe(n,t){let e=n.is("$text")?n.parent:n;for(;!t.toModelElement(e);)e=e.parent;return e}class XN extends Nt{constructor(e,i){super(e);y(this,"direction");y(this,"_buffer");this.direction=i,this._buffer=new b7(e.model,e.config.get("typing.undoStep")),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}execute(e={}){const i=this.editor.model,r=i.document;i.enqueueChange(this._buffer.batch,s=>{this._buffer.lock();const o=s.createSelection(e.selection||r.selection);if(!i.canEditAt(o))return;const a=e.sequence||1,l=o.isCollapsed;if(o.isCollapsed&&i.modifySelection(o,{direction:this.direction,unit:e.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(a)){this._replaceEntireContentWithParagraph(s);return}if(this._shouldReplaceFirstBlockWithParagraph(o,a)){this.editor.execute("paragraph",{selection:o});return}if(o.isCollapsed)return;let c=0;o.getFirstRange().getMinimalFlatRanges().forEach(u=>{c+=TT(u.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),i.deleteContent(o,{doNotResetEntireContent:l,direction:this.direction}),this._buffer.input(c),s.setSelection(o),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(e){if(e>1)return!1;const i=this.editor.model,s=i.document.selection,o=i.schema.getLimitElement(s);if(!(s.isCollapsed&&s.containsEntireContent(o))||!i.schema.checkChild(o,"paragraph"))return!1;const l=o.getChild(0);return!(l&&l.is("element","paragraph"))}_replaceEntireContentWithParagraph(e){const i=this.editor.model,s=i.document.selection,o=i.schema.getLimitElement(s),a=e.createElement("paragraph");e.remove(e.createRangeIn(o)),e.insert(a,o),e.setSelection(a,0)}_shouldReplaceFirstBlockWithParagraph(e,i){const r=this.editor.model;if(i>1||this.direction!="backward"||!e.isCollapsed)return!1;const s=e.getFirstPosition(),o=r.schema.getLimitElement(s),a=o.getChild(0);return!(s.parent!=a||!e.containsEntireContent(a)||!r.schema.checkChild(o,"paragraph")||a.name=="paragraph")}}const yIe="character",eL="word",_Ie="codePoint",Wc="selection",Kf="backward",Lg="forward",_7={deleteContent:{unit:Wc,direction:Kf},deleteContentBackward:{unit:_Ie,direction:Kf},deleteWordBackward:{unit:eL,direction:Kf},deleteHardLineBackward:{unit:Wc,direction:Kf},deleteSoftLineBackward:{unit:Wc,direction:Kf},deleteContentForward:{unit:yIe,direction:Lg},deleteWordForward:{unit:eL,direction:Lg},deleteHardLineForward:{unit:Wc,direction:Lg},deleteSoftLineForward:{unit:Wc,direction:Lg}};class kIe extends Aa{constructor(t){super(t);const e=t.document;let i=0;e.on("keydown",()=>{i++}),e.on("keyup",()=>{i=0}),e.on("beforeinput",(r,s)=>{if(!this.isEnabled)return;const{targetRanges:o,domEvent:a,inputType:l}=s,c=_7[l];if(!c)return;const u={direction:c.direction,unit:c.unit,sequence:i};u.unit==Wc&&(u.selectionToRemove=t.createSelection(o[0])),l==="deleteContentBackward"&&(Vt.isAndroid&&(u.sequence=1),CIe(o)&&(u.unit=Wc,u.selectionToRemove=t.createSelection(o)));const d=new Jd(e,"delete",o[0]);e.fire(d,new Dd(t,a,u)),d.stop.called&&r.stop()}),Vt.isBlink&&EIe(this)}observe(){}stopObserving(){}}function EIe(n){const t=n.view,e=t.document;let i=null,r=!1;e.on("keydown",(a,{keyCode:l})=>{i=l,r=!1}),e.on("keyup",(a,{keyCode:l,domEvent:c})=>{const u=e.selection,d=n.isEnabled&&l==i&&s(l)&&!u.isCollapsed&&!r;if(i=null,d){const f=u.getFirstRange(),h=new Jd(e,"delete",f),g={unit:Wc,direction:o(l),selectionToRemove:u};e.fire(h,new Dd(t,c,g))}}),e.on("beforeinput",(a,{inputType:l})=>{const c=_7[l];s(i)&&c&&c.direction==o(i)&&(r=!0)},{priority:"high"}),e.on("beforeinput",(a,{inputType:l,data:c})=>{i==fn.delete&&l=="insertText"&&c==""&&a.stop()},{priority:"high"});function s(a){return a==fn.backspace||a==fn.delete}function o(a){return a==fn.backspace?Kf:Lg}}function CIe(n){if(n.length!=1||n[0].isCollapsed)return!1;const t=n[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0});let e=0;for(const{nextPosition:i,item:r}of t){if(i.parent.is("$text")){const s=i.parent.data,o=i.offset;if(qI(s,o)||GI(s,o)||Iz(s,o))continue;e++}else(r.is("containerElement")||r.is("emptyElement"))&&e++;if(e>1)return!0}return!1}class hl extends Ne{constructor(){super(...arguments);y(this,"_undoOnBackspace")}static get pluginName(){return"Delete"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=e.editing.view,r=i.document,s=e.model.document;i.addObserver(kIe),this._undoOnBackspace=!1;const o=new XN(e,"forward");e.commands.add("deleteForward",o),e.commands.add("forwardDelete",o),e.commands.add("delete",new XN(e,"backward")),this.listenTo(r,"delete",(a,l)=>{r.isComposing||l.preventDefault();const{direction:c,sequence:u,selectionToRemove:d,unit:f}=l,h=c==="forward"?"deleteForward":"delete",g={sequence:u};if(f=="selection"){const v=Array.from(d.getRanges()).map(_=>e.editing.mapper.toModelRange(_)).map(_=>iP(_,e.model.schema)||_);g.selection=e.model.createSelection(v)}else g.unit=f;e.execute(h,g),i.scrollToTheSelection()},{priority:"low"}),this.listenTo(r,"keydown",(a,l)=>{if(r.isComposing||l.keyCode!=fn.backspace||!s.selection.isCollapsed)return;const c=e.model.schema.getLimitElement(s.selection),u=e.model.createPositionAt(c,0);if(u.isTouching(s.selection.getFirstPosition())){l.preventDefault();const d=e.model.schema.getNearestSelectionRange(u,"forward");if(!d)return;const f=i.createSelection(e.editing.mapper.toViewRange(d)),h=f.getFirstRange(),g=new Jd(document,"delete",h),v={unit:"selection",direction:"backward",selectionToRemove:f};r.fire(g,new Dd(i,l.domEvent,v))}}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(r,"delete",(a,l)=>{this._undoOnBackspace&&l.direction=="backward"&&l.sequence==1&&l.unit=="codePoint"&&(this._undoOnBackspace=!1,e.execute("undo"),l.preventDefault(),a.stop())},{context:"$capture"}),this.listenTo(s,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}class k7 extends Ne{static get requires(){return[y7,hl]}static get pluginName(){return"Typing"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function E7(n,t){let e=n.start;return{text:Array.from(n.getWalker({ignoreElementEnd:!1})).reduce((r,{item:s})=>s.is("$text")||s.is("$textProxy")?r+s.data:(e=t.createPositionAfter(s),""),""),range:t.createRange(e,n.end)}}class C7 extends Wn(){constructor(e,i){super();y(this,"model");y(this,"testCallback");y(this,"_hasMatch");this.model=e,this.testCallback=i,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(e.document.selection),this.stopListening(e.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){const i=this.model.document;this.listenTo(i.selection,"change:range",(r,{directChange:s})=>{if(s){if(!i.selection.isCollapsed){this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1);return}this._evaluateTextBeforeSelection("selection")}}),this.listenTo(i,"change:data",(r,s)=>{s.isUndo||!s.isLocal||this._evaluateTextBeforeSelection("data",{batch:s})})}_evaluateTextBeforeSelection(e,i={}){const r=this.model,o=r.document.selection,a=r.createRange(r.createPositionAt(o.focus.parent,0),o.focus),{text:l,range:c}=E7(a,r),u=this.testCallback(l);if(!u&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!u,u){const d=Object.assign(i,{text:l,range:c});typeof u=="object"&&Object.assign(d,u),this.fire(`matched:${e}`,d)}}}class Gy extends Ne{constructor(e){super(e);y(this,"attributes");y(this,"_overrideUid");y(this,"_isNextGravityRestorationSkipped",!1);this.attributes=new Set,this._overrideUid=null}static get pluginName(){return"TwoStepCaretMovement"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=e.model,r=e.editing.view,s=e.locale,o=i.document.selection;this.listenTo(r.document,"arrowKey",(a,l)=>{if(!o.isCollapsed||l.shiftKey||l.altKey||l.ctrlKey)return;const c=l.keyCode==fn.arrowright,u=l.keyCode==fn.arrowleft;if(!c&&!u)return;const d=s.contentLanguageDirection;let f=!1;d==="ltr"&&c||d==="rtl"&&u?f=this._handleForwardMovement(l):f=this._handleBackwardMovement(l),f===!0&&a.stop()},{context:"$text",priority:"highest"}),this.listenTo(o,"change:range",(a,l)=>{if(this._isNextGravityRestorationSkipped){this._isNextGravityRestorationSkipped=!1;return}this._isGravityOverridden&&(!l.directChange&&Io(o.getFirstPosition(),this.attributes)||this._restoreGravity())}),this._enableClickingAfterNode(),this._enableInsertContentSelectionAttributesFixer(),this._handleDeleteContentAfterNode()}registerAttribute(e){this.attributes.add(e)}_handleForwardMovement(e){const i=this.attributes,r=this.editor.model,s=r.document.selection,o=s.getFirstPosition();return this._isGravityOverridden||o.isAtStart&&Pl(s,i)?!1:Io(o,i)?(e&&wg(e),Pl(s,i)&&Io(o,i,!0)?bg(r,i):this._overrideGravity(),!0):!1}_handleBackwardMovement(e){const i=this.attributes,r=this.editor.model,s=r.document.selection,o=s.getFirstPosition();return this._isGravityOverridden?(e&&wg(e),this._restoreGravity(),Io(o,i,!0)?bg(r,i):Lb(r,i,o),!0):o.isAtStart?Pl(s,i)?(e&&wg(e),Lb(r,i,o),!0):!1:!Pl(s,i)&&Io(o,i,!0)?(e&&wg(e),Lb(r,i,o),!0):tL(o,i)?o.isAtEnd&&!Pl(s,i)&&Io(o,i)?(e&&wg(e),Lb(r,i,o),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):!1}_enableClickingAfterNode(){const e=this.editor,i=e.model,r=i.document.selection,s=e.editing.view.document;e.editing.view.addObserver(D0),e.editing.view.addObserver(jEe);let o=!1,a=!1;this.listenTo(s,"touchstart",()=>{a=!1,o=!0}),this.listenTo(s,"mousedown",()=>{a=!0}),this.listenTo(s,"selectionChange",()=>{const l=this.attributes;if(!a&&!o||(a=!1,o=!1,!r.isCollapsed)||!Pl(r,l))return;const c=r.getFirstPosition();Io(c,l)&&(c.isAtStart||Io(c,l,!0)?bg(i,l):this._isGravityOverridden||this._overrideGravity())})}_enableInsertContentSelectionAttributesFixer(){const i=this.editor.model,r=i.document.selection,s=this.attributes;this.listenTo(i,"insertContent",()=>{const o=r.getFirstPosition();Pl(r,s)&&Io(o,s)&&bg(i,s)},{priority:"low"})}_handleDeleteContentAfterNode(){const e=this.editor,i=e.model,r=i.document.selection,s=e.editing.view;let o=!1,a=!1;this.listenTo(s.document,"delete",(l,c)=>{o=c.direction==="backward"},{priority:"high"}),this.listenTo(i,"deleteContent",()=>{if(!o)return;const l=r.getFirstPosition();a=Pl(r,this.attributes)&&!tL(l,this.attributes)},{priority:"high"}),this.listenTo(i,"deleteContent",()=>{o&&(o=!1,!a&&e.model.enqueueChange(()=>{const l=r.getFirstPosition();Pl(r,this.attributes)&&Io(l,this.attributes)&&(l.isAtStart||Io(l,this.attributes,!0)?bg(i,this.attributes):this._isGravityOverridden||this._overrideGravity())}))},{priority:"low"})}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(e=>e.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(e=>{e.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}}function Pl(n,t){for(const e of t)if(n.hasAttribute(e))return!0;return!1}function Lb(n,t,e){const i=e.nodeBefore;n.change(r=>{if(i){const s=[],o=n.schema.isObject(i)&&n.schema.isInline(i);for(const[a,l]of i.getAttributes())n.schema.checkAttribute("$text",a)&&(!o||n.schema.getAttributeProperties(a).copyFromObject!==!1)&&s.push([a,l]);r.setSelectionAttribute(s)}else r.removeSelectionAttribute(t)})}function bg(n,t){n.change(e=>{e.removeSelectionAttribute(t)})}function wg(n){n.preventDefault()}function tL(n,t){const e=n.getShiftedBy(-1);return Io(e,t)}function Io(n,t,e=!1){const{nodeBefore:i,nodeAfter:r}=n;for(const s of t){const o=i?i.getAttribute(s):void 0,a=r?r.getAttribute(s):void 0;if(!(e&&(o===void 0||a===void 0))&&a!==o)return!0}return!1}const nL={copyright:{from:"(c)",to:"©"},registeredTrademark:{from:"(r)",to:"®"},trademark:{from:"(tm)",to:"™"},oneHalf:{from:/(^|[^/a-z0-9])(1\/2)([^/a-z0-9])$/i,to:[null,"½",null]},oneThird:{from:/(^|[^/a-z0-9])(1\/3)([^/a-z0-9])$/i,to:[null,"⅓",null]},twoThirds:{from:/(^|[^/a-z0-9])(2\/3)([^/a-z0-9])$/i,to:[null,"⅔",null]},oneForth:{from:/(^|[^/a-z0-9])(1\/4)([^/a-z0-9])$/i,to:[null,"¼",null]},threeQuarters:{from:/(^|[^/a-z0-9])(3\/4)([^/a-z0-9])$/i,to:[null,"¾",null]},lessThanOrEqual:{from:"<=",to:"≤"},greaterThanOrEqual:{from:">=",to:"≥"},notEqual:{from:"!=",to:"≠"},arrowLeft:{from:"<-",to:"←"},arrowRight:{from:"->",to:"→"},horizontalEllipsis:{from:"...",to:"…"},enDash:{from:/(^| )(--)( )$/,to:[null,"–",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"—",null]},quotesPrimary:{from:Cf('"'),to:[null,"“",null,"”"]},quotesSecondary:{from:Cf("'"),to:[null,"‘",null,"’"]},quotesPrimaryEnGb:{from:Cf("'"),to:[null,"‘",null,"’"]},quotesSecondaryEnGb:{from:Cf('"'),to:[null,"“",null,"”"]},quotesPrimaryPl:{from:Cf('"'),to:[null,"„",null,"”"]},quotesSecondaryPl:{from:Cf("'"),to:[null,"‚",null,"’"]}},iL={symbols:["copyright","registeredTrademark","trademark"],mathematical:["oneHalf","oneThird","twoThirds","oneForth","threeQuarters","lessThanOrEqual","greaterThanOrEqual","notEqual","arrowLeft","arrowRight"],typography:["horizontalEllipsis","enDash","emDash"],quotes:["quotesPrimary","quotesSecondary"]},TIe=["symbols","mathematical","typography","quotes"];class SIe extends Ne{static get requires(){return["Delete","Input"]}static get pluginName(){return"TextTransformation"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("typing",{transformations:{include:TIe}})}init(){const e=this.editor.model.document.selection;e.on("change:range",()=>{this.isEnabled=!e.anchor.parent.is("element","codeBlock")}),this._enableTransformationWatchers()}_enableTransformationWatchers(){const t=this.editor,e=t.model,i=t.plugins.get("Delete"),r=xIe(t.config.get("typing.transformations")),s=a=>{for(const l of r)if(l.from.test(a))return{normalizedTransformation:l}},o=new C7(t.model,s);o.on("matched:data",(a,l)=>{if(!l.batch.isTyping)return;const{from:c,to:u}=l.normalizedTransformation,d=c.exec(l.text),f=u(d.slice(1)),h=l.range;let g=d.index;e.enqueueChange(v=>{for(let _=1;_<d.length;_++){const w=d[_],C=f[_-1];if(C==null){g+=w.length;continue}const k=h.start.getShiftedBy(g),E=e.createRange(k,k.getShiftedBy(w.length)),A=PIe(k);e.insertContent(v.createText(C,A),E),g+=C.length}e.enqueueChange(()=>{i.requestUndoOnBackspace()})})}),o.bind("isEnabled").to(this)}}function AIe(n){return typeof n=="string"?new RegExp(`(${ez(n)})$`):n}function IIe(n){return typeof n=="string"?()=>[n]:n instanceof Array?()=>n:n}function PIe(n){return(n.textNode?n.textNode:n.nodeAfter).getAttributes()}function Cf(n){return new RegExp(`(^|\\s)(${n})([^${n}]*)(${n})$`)}function xIe(n){const t=n.extra||[],e=n.remove||[],i=s=>!e.includes(s),r=n.include.concat(t).filter(i);return OIe(r).filter(i).map(s=>typeof s=="string"&&nL[s]?nL[s]:s).filter(s=>typeof s=="object").map(s=>({from:AIe(s.from),to:IIe(s.to)}))}function OIe(n){const t=new Set;for(const e of n)if(typeof e=="string"&&iL[e])for(const i of iL[e])t.add(i);else t.add(e);return Array.from(t)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Rv(n,t,e,i){return i.createRange(WT(n,t,e,!0,i),WT(n,t,e,!1,i))}function WT(n,t,e,i,r){let s=n.textNode||(i?n.nodeBefore:n.nodeAfter),o=null;for(;s&&s.getAttribute(t)==e;)o=s,s=i?s.previousSibling:s.nextSibling;return o?r.createPositionAt(o,i?"before":"after"):n}function T7(n,t,e,i){const r=n.editing.view,s=new Set;r.document.registerPostFixer(o=>{const a=n.model.document.selection;let l=!1;if(a.hasAttribute(t)){const c=Rv(a.getFirstPosition(),t,a.getAttribute(t),n.model),u=n.editing.mapper.toViewRange(c);for(const d of u.getItems())d.is("element",e)&&!d.hasClass(i)&&(o.addClass(i,d),s.add(d),l=!0)}return l}),n.conversion.for("editingDowncast").add(o=>{o.on("insert",a,{priority:"highest"}),o.on("remove",a,{priority:"highest"}),o.on("attribute",a,{priority:"highest"}),o.on("selection",a,{priority:"highest"});function a(){r.change(l=>{for(const c of s.values())l.removeClass(i,c),s.delete(c)})}})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Ac(n,t,e,i){let r,s=null;typeof i=="function"?r=i:(s=n.commands.get(i),r=()=>{n.execute(i)}),n.model.document.on("change:data",(o,a)=>{if(s&&!s.isEnabled||!t.isEnabled)return;const l=gi(n.model.document.selection.getRanges());if(!l.isCollapsed||a.isUndo||!a.isLocal)return;const c=Array.from(n.model.document.differ.getChanges()),u=c[0];if(c.length!=1||u.type!=="insert"||u.name!="$text"||u.length!=1)return;const d=u.position.parent;if(d.is("element","codeBlock")||d.is("element","listItem")&&typeof i!="function"&&!["numberedList","bulletedList","todoList"].includes(i)||s&&s.value===!0)return;const f=d.getChild(0),h=n.model.createRangeOn(f);if(!h.containsRange(l)&&!l.end.isEqual(h.end))return;const g=e.exec(f.data.substr(0,l.end.offset));g&&n.model.enqueueChange(v=>{const _=v.createPositionAt(d,0),w=v.createPositionAt(d,g[0].length),C=new Ts(_,w);if(r({match:g})!==!1){v.remove(C);const E=n.model.document.selection.getFirstRange(),A=v.createRangeIn(d);d.isEmpty&&!A.isEqual(E)&&!A.containsRange(E,!0)&&v.remove(d)}C.detach(),n.model.enqueueChange(()=>{n.plugins.get("Delete").requestUndoOnBackspace()})})})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Tf(n,t,e,i){let r,s;e instanceof RegExp?r=e:s=e,s=s||(o=>{let a;const l=[],c=[];for(;(a=r.exec(o))!==null&&!(a&&a.length<4);){let{index:u,"1":d,"2":f,"3":h}=a;const g=d+f+h;u+=a[0].length-g.length;const v=[u,u+d.length],_=[u+d.length+f.length,u+d.length+f.length+h.length];l.push(v),l.push(_),c.push([u+d.length,u+d.length+f.length])}return{remove:l,format:c}}),n.model.document.on("change:data",(o,a)=>{if(a.isUndo||!a.isLocal||!t.isEnabled)return;const l=n.model,c=l.document.selection;if(!c.isCollapsed)return;const u=Array.from(l.document.differ.getChanges()),d=u[0];if(u.length!=1||d.type!=="insert"||d.name!="$text"||d.length!=1)return;const f=c.focus,h=f.parent,{text:g,range:v}=RIe(l.createRange(l.createPositionAt(h,0),f),l),_=s(g),w=rL(v.start,_.format,l),C=rL(v.start,_.remove,l);w.length&&C.length&&l.enqueueChange(k=>{if(i(k,w)!==!1){for(const A of C.reverse())k.remove(A);l.enqueueChange(()=>{n.plugins.get("Delete").requestUndoOnBackspace()})}})})}function rL(n,t,e){return t.filter(i=>i[0]!==void 0&&i[1]!==void 0).map(i=>e.createRange(n.getShiftedBy(i[0]),n.getShiftedBy(i[1])))}function RIe(n,t){let e=n.start;return{text:Array.from(n.getItems()).reduce((r,s)=>!(s.is("$text")||s.is("$textProxy"))||s.getAttribute("code")?(e=t.createPositionAfter(s),""):r+s.data,""),range:t.createRange(e,n.end)}}class VIe extends Ne{static get requires(){return[hl]}static get pluginName(){return"Autoformat"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=this.editor.t;this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats(),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Revert autoformatting action"),keystroke:"Backspace"}]})}_addListAutoformats(){const t=this.editor.commands;t.get("bulletedList")&&Ac(this.editor,this,/^[*-]\s$/,"bulletedList"),t.get("numberedList")&&Ac(this.editor,this,/^1[.|)]\s$/,"numberedList"),t.get("todoList")&&Ac(this.editor,this,/^\[\s?\]\s$/,"todoList"),t.get("checkTodoList")&&Ac(this.editor,this,/^\[\s?x\s?\]\s$/,()=>{this.editor.execute("todoList"),this.editor.execute("checkTodoList")})}_addBasicStylesAutoformats(){const t=this.editor.commands;if(t.get("bold")){const e=Mb(this.editor,"bold");Tf(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,e),Tf(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,e)}if(t.get("italic")){const e=Mb(this.editor,"italic");Tf(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,e),Tf(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,e)}if(t.get("code")){const e=Mb(this.editor,"code");Tf(this.editor,this,/(`)([^`]+)(`)$/g,e)}if(t.get("strikethrough")){const e=Mb(this.editor,"strikethrough");Tf(this.editor,this,/(~~)([^~]+)(~~)$/g,e)}}_addHeadingAutoformats(){const t=this.editor.commands.get("heading");t&&t.modelElements.filter(e=>e.match(/^heading[1-6]$/)).forEach(e=>{const i=e[7],r=new RegExp(`^(#{${i}})\\s$`);Ac(this.editor,this,r,()=>{if(!t.isEnabled||t.value===e)return!1;this.editor.execute("heading",{value:e})})})}_addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&Ac(this.editor,this,/^>\s$/,"blockQuote")}_addCodeBlockAutoformats(){const t=this.editor,e=t.model.document.selection;t.commands.get("codeBlock")&&Ac(t,this,/^```$/,()=>{if(e.getFirstPosition().parent.is("element","listItem"))return!1;this.editor.execute("codeBlock",{usePreviousLanguageChoice:!0})})}_addHorizontalLineAutoformats(){this.editor.commands.get("horizontalLine")&&Ac(this.editor,this,/^---$/,"horizontalLine")}}function Mb(n,t){return(e,i)=>{if(!n.commands.get(t).isEnabled)return!1;const s=n.model.schema.getValidRanges(i,t);for(const o of s)e.setAttribute(t,!0,o);e.removeSelectionAttribute(t)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class DIe extends Ne{constructor(e){super(e);y(this,"adapter");y(this,"_debouncedSave");y(this,"_lastDocumentVersion");y(this,"_savePromise");y(this,"_domEmitter");y(this,"_config");y(this,"_pendingActions");y(this,"_makeImmediateSave");y(this,"_action",null);const i=e.config.get("autosave")||{},r=i.waitingTime||1e3;this.set("state","synchronized"),this._debouncedSave=go(this._save.bind(this),r),this._lastDocumentVersion=e.model.document.version,this._savePromise=null,this._domEmitter=new(ds()),this._config=i,this._pendingActions=e.plugins.get(nm),this._makeImmediateSave=!1}static get pluginName(){return"Autosave"}static get isOfficialPlugin(){return!0}static get requires(){return[nm]}init(){const e=this.editor,i=e.model.document;this.listenTo(e,"ready",()=>{this.listenTo(i,"change:data",(r,s)=>{this._saveCallbacks.length&&s.isLocal&&(this.state==="synchronized"&&(this.state="waiting",this._setPendingAction()),this.state==="waiting"&&this._debouncedSave())})}),this.listenTo(e,"destroy",()=>this._flush(),{priority:"highest"});/* istanbul ignore next -- @preserve */this._domEmitter.listenTo(window,"beforeunload",(r,s)=>{this._pendingActions.hasAny&&(s.returnValue=this._pendingActions.first.message)})}destroy(){this._domEmitter.stopListening(),super.destroy()}save(){return this._debouncedSave.cancel(),this._save()}_flush(){this._debouncedSave.flush()}_save(){return this._savePromise?(this._makeImmediateSave=this.editor.model.document.version>this._lastDocumentVersion,this._savePromise):(this._setPendingAction(),this.state="saving",this._lastDocumentVersion=this.editor.model.document.version,this._savePromise=Promise.resolve().then(()=>Promise.all(this._saveCallbacks.map(e=>e(this.editor)))).finally(()=>{this._savePromise=null}).then(()=>{if(this._makeImmediateSave)return this._makeImmediateSave=!1,this._save();this.editor.model.document.version>this._lastDocumentVersion?(this.state="waiting",this._debouncedSave()):(this.state="synchronized",this._pendingActions.remove(this._action),this._action=null)}).catch(e=>{throw this.state="error",this.state="saving",this._debouncedSave(),e}),this._savePromise)}_setPendingAction(){const e=this.editor.t;this._action||(this._action=this._pendingActions.add(e("Saving changes")))}get _saveCallbacks(){const e=[];return this.adapter&&this.adapter.save&&e.push(this.adapter.save),this._config.save&&e.push(this._config.save),e}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class _P extends Nt{constructor(e,i){super(e);y(this,"attributeKey");this.attributeKey=i}refresh(){const e=this.editor.model,i=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(i.selection,this.attributeKey)}execute(e={}){const i=this.editor.model,s=i.document.selection,o=e.forceValue===void 0?!this.value:e.forceValue;i.change(a=>{if(s.isCollapsed)o?a.setSelectionAttribute(this.attributeKey,!0):a.removeSelectionAttribute(this.attributeKey);else{const l=i.schema.getValidRanges(s.getRanges(),this.attributeKey);for(const c of l)o?a.setAttribute(this.attributeKey,o,c):a.removeAttribute(this.attributeKey,c)}})}_getValueFromFirstAllowedNode(){const e=this.editor.model,i=e.schema,r=e.document.selection;if(r.isCollapsed)return r.hasAttribute(this.attributeKey);for(const s of r.getRanges())for(const o of s.getItems())if(i.checkAttribute(o,this.attributeKey))return o.hasAttribute(this.attributeKey);return!1}}const Sf="bold";class NIe extends Ne{static get pluginName(){return"BoldEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:Sf}),t.model.schema.setAttributeProperties(Sf,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:Sf,view:"strong",upcastAlso:["b",i=>{const r=i.getStyle("font-weight");return r&&(r=="bold"||Number(r)>=600)?{name:!0,styles:["font-weight"]}:null}]}),t.commands.add(Sf,new _P(t,Sf)),t.keystrokes.set("CTRL+B",Sf),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Bold text"),keystroke:"CTRL+B"}]})}}function kP({editor:n,commandName:t,plugin:e,icon:i,label:r,keystroke:s}){return o=>{const a=n.commands.get(t),l=new o(n.locale);return l.set({label:r,icon:i,keystroke:s,isToggleable:!0}),l.bind("isEnabled").to(a,"isEnabled"),l.bind("isOn").to(a,"value"),l instanceof Ti?l.set({role:"menuitemcheckbox"}):l.set({tooltip:!0}),e.listenTo(l,"execute",()=>{n.execute(t),n.editing.view.focus()}),l}}const aE="bold";class LIe extends Ne{static get pluginName(){return"BoldUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,i=kP({editor:t,commandName:aE,plugin:this,icon:I8,label:e("Bold"),keystroke:"CTRL+B"});t.ui.componentFactory.add(aE,()=>i(wt)),t.ui.componentFactory.add("menuBar:"+aE,()=>i(Ti))}}class MIe extends Ne{static get requires(){return[NIe,LIe]}static get pluginName(){return"Bold"}static get isOfficialPlugin(){return!0}}const Ku="code",$Ie="ck-code_selected";class BIe extends Ne{static get pluginName(){return"CodeEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Gy]}init(){const t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:Ku}),t.model.schema.setAttributeProperties(Ku,{isFormatting:!0,copyOnEnter:!1}),t.conversion.attributeToElement({model:Ku,view:"code"}),t.commands.add(Ku,new _P(t,Ku)),t.plugins.get(Gy).registerAttribute(Ku),T7(t,Ku,"code",$Ie),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Move out of an inline code style"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}}const lE="code";class FIe extends Ne{static get pluginName(){return"CodeUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,i=kP({editor:t,commandName:lE,plugin:this,icon:GCe,label:e("Code")});t.ui.componentFactory.add(lE,()=>i(wt)),t.ui.componentFactory.add("menuBar:"+lE,()=>i(Ti))}}class UIe extends Ne{static get requires(){return[BIe,FIe]}static get pluginName(){return"Code"}static get isOfficialPlugin(){return!0}}const Af="italic";class zIe extends Ne{static get pluginName(){return"ItalicEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:Af}),t.model.schema.setAttributeProperties(Af,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:Af,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),t.commands.add(Af,new _P(t,Af)),t.keystrokes.set("CTRL+I",Af),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Italic text"),keystroke:"CTRL+I"}]})}}const cE="italic";class HIe extends Ne{static get pluginName(){return"ItalicUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,i=kP({editor:t,commandName:cE,plugin:this,icon:oTe,keystroke:"CTRL+I",label:e("Italic")});t.ui.componentFactory.add(cE,()=>i(wt)),t.ui.componentFactory.add("menuBar:"+cE,()=>i(Ti))}}class WIe extends Ne{static get requires(){return[zIe,HIe]}static get pluginName(){return"Italic"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function*S7(n,t){for(const e of t)e&&n.getAttributeProperties(e[0]).copyOnEnter&&(yield e)}class jIe extends Nt{execute(){this.editor.model.change(t=>{this.enterBlock(t),this.fire("afterExecute",{writer:t})})}enterBlock(t){const e=this.editor.model,i=e.document.selection,r=e.schema,s=i.isCollapsed,o=i.getFirstRange(),a=o.start.parent,l=o.end.parent;if(r.isLimit(a)||r.isLimit(l))return!s&&a==l&&e.deleteContent(i),!1;if(s){const c=S7(t.model.schema,i.getAttributes());return sL(t,o.start),t.setSelectionAttribute(c),!0}else{const c=!(o.start.isAtStart&&o.end.isAtEnd),u=a==l;if(e.deleteContent(i,{leaveUnmerged:c}),c){if(u)return sL(t,i.focus),!0;t.setSelection(l,0)}}return!1}}function sL(n,t){n.split(t),n.setSelection(t.parent.nextSibling,0)}const qIe={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}};class A7 extends Aa{constructor(t){super(t);const e=this.document;let i=!1;e.on("keydown",(r,s)=>{i=s.shiftKey}),e.on("beforeinput",(r,s)=>{if(!this.isEnabled)return;let o=s.inputType;Vt.isSafari&&i&&o=="insertParagraph"&&(o="insertLineBreak");const a=s.domEvent,l=qIe[o];if(!l)return;const c=new Jd(e,"enter",s.targetRanges[0]);e.fire(c,new Dd(t,a,{isSoft:l.isSoft})),c.stop.called&&r.stop()})}observe(){}stopObserving(){}}class Vv extends Ne{static get pluginName(){return"Enter"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view,i=e.document,r=this.editor.t;e.addObserver(A7),t.commands.add("enter",new jIe(t)),this.listenTo(i,"enter",(s,o)=>{i.isComposing||o.preventDefault(),!o.isSoft&&(t.execute("enter"),e.scrollToTheSelection())},{priority:"low"}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:r("Insert a hard break (a new paragraph)"),keystroke:"Enter"}]})}}class GIe extends Nt{execute(){const t=this.editor.model,e=t.document;t.change(i=>{YIe(t,i,e.selection),this.fire("afterExecute",{writer:i})})}refresh(){const t=this.editor.model,e=t.document;this.isEnabled=KIe(t.schema,e.selection)}}function KIe(n,t){if(t.rangeCount>1)return!1;const e=t.anchor;if(!e||!n.checkChild(e,"softBreak"))return!1;const i=t.getFirstRange(),r=i.start.parent,s=i.end.parent;return!((jT(r,n)||jT(s,n))&&r!==s)}function YIe(n,t,e){const i=e.isCollapsed,r=e.getFirstRange(),s=r.start.parent,o=r.end.parent,a=s==o;if(i){const l=S7(n.schema,e.getAttributes());oL(n,t,r.end),t.removeSelectionAttribute(e.getAttributeKeys()),t.setSelectionAttribute(l)}else{const l=!(r.start.isAtStart&&r.end.isAtEnd);n.deleteContent(e,{leaveUnmerged:l}),a?oL(n,t,e.focus):l&&t.setSelection(o,0)}}function oL(n,t,e){const i=t.createElement("softBreak");n.insertContent(i,e),t.setSelection(i,"after")}function jT(n,t){return n.is("rootElement")?!1:t.isLimit(n)||jT(n.parent,t)}class I7 extends Ne{static get pluginName(){return"ShiftEnter"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model.schema,i=t.conversion,r=t.editing.view,s=r.document,o=this.editor.t;e.register("softBreak",{allowWhere:"$text",isInline:!0}),i.for("upcast").elementToElement({model:"softBreak",view:"br"}),i.for("downcast").elementToElement({model:"softBreak",view:(a,{writer:l})=>l.createEmptyElement("br")}),r.addObserver(A7),t.commands.add("shiftEnter",new GIe(t)),this.listenTo(s,"enter",(a,l)=>{s.isComposing||l.preventDefault(),l.isSoft&&(t.execute("shiftEnter"),r.scrollToTheSelection())},{priority:"low"}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:o("Insert a soft break (a <code>&lt;br&gt;</code> element)"),keystroke:"Shift+Enter"}]})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class QIe extends Nt{refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(t={}){const e=this.editor.model,i=e.schema,r=e.document.selection,s=Array.from(r.getSelectedBlocks()),o=t.forceValue===void 0?!this.value:t.forceValue;e.change(a=>{if(!o)this._removeQuote(a,s.filter($b));else{const l=s.filter(c=>$b(c)||lL(i,c));this._applyQuote(a,l)}})}_getValue(){const t=this.editor.model.document.selection,e=gi(t.getSelectedBlocks());return!!(e&&$b(e))}_checkEnabled(){if(this.value)return!0;const t=this.editor.model.document.selection,e=this.editor.model.schema,i=gi(t.getSelectedBlocks());return i?lL(e,i):!1}_removeQuote(t,e){aL(t,e).reverse().forEach(i=>{if(i.start.isAtStart&&i.end.isAtEnd){t.unwrap(i.start.parent);return}if(i.start.isAtStart){const s=t.createPositionBefore(i.start.parent);t.move(i,s);return}i.end.isAtEnd||t.split(i.end);const r=t.createPositionAfter(i.end.parent);t.move(i,r)})}_applyQuote(t,e){const i=[];aL(t,e).reverse().forEach(r=>{let s=$b(r.start);s||(s=t.createElement("blockQuote"),t.wrap(r,s)),i.push(s)}),i.reverse().reduce((r,s)=>r.nextSibling==s?(t.merge(t.createPositionAfter(r)),r):s)}}function $b(n){return n.parent.name=="blockQuote"?n.parent:null}function aL(n,t){let e,i=0;const r=[];for(;i<t.length;){const s=t[i],o=t[i+1];e||(e=n.createPositionBefore(s)),(!o||s.nextSibling!=o)&&(r.push(n.createRange(e,n.createPositionAfter(s))),e=null),i++}return r}function lL(n,t){const e=n.checkChild(t.parent,"blockQuote"),i=n.checkChild(["$root","blockQuote"],t);return e&&i}class ZIe extends Ne{static get pluginName(){return"BlockQuoteEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Vv,hl]}init(){const t=this.editor,e=t.model.schema;t.commands.add("blockQuote",new QIe(t)),e.register("blockQuote",{inheritAllFrom:"$container"}),t.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),t.model.document.registerPostFixer(o=>{const a=t.model.document.differ.getChanges();for(const l of a)if(l.type=="insert"){const c=l.position.nodeAfter;if(!c)continue;if(c.is("element","blockQuote")&&c.isEmpty)return o.remove(c),!0;if(c.is("element","blockQuote")&&!e.checkChild(l.position,c))return o.unwrap(c),!0;if(c.is("element")){const u=o.createRangeIn(c);for(const d of u.getItems())if(d.is("element","blockQuote")&&!e.checkChild(o.createPositionBefore(d),d))return o.unwrap(d),!0}}else if(l.type=="remove"){const c=l.position.parent;if(c.is("element","blockQuote")&&c.isEmpty)return o.remove(c),!0}return!1});const i=this.editor.editing.view.document,r=t.model.document.selection,s=t.commands.get("blockQuote");this.listenTo(i,"enter",(o,a)=>{if(!r.isCollapsed||!s.value)return;r.getLastPosition().parent.isEmpty&&(t.execute("blockQuote"),t.editing.view.scrollToTheSelection(),a.preventDefault(),o.stop())},{context:"blockquote"}),this.listenTo(i,"delete",(o,a)=>{if(a.direction!="backward"||!r.isCollapsed||!s.value)return;const l=r.getLastPosition().parent;l.isEmpty&&!l.previousSibling&&(t.execute("blockQuote"),t.editing.view.scrollToTheSelection(),a.preventDefault(),o.stop())},{context:"blockquote"})}}class JIe extends Ne{static get pluginName(){return"BlockQuoteUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("blockQuote",()=>{const e=this._createButton(wt);return e.set({tooltip:!0}),e}),t.ui.componentFactory.add("menuBar:blockQuote",()=>{const e=this._createButton(Ti);return e.set({role:"menuitemcheckbox"}),e})}_createButton(t){const e=this.editor,i=e.locale,r=e.commands.get("blockQuote"),s=new t(e.locale),o=i.t;return s.set({label:o("Block quote"),icon:ITe,isToggleable:!0}),s.bind("isEnabled").to(r,"isEnabled"),s.bind("isOn").to(r,"value"),this.listenTo(s,"execute",()=>{e.execute("blockQuote"),e.editing.view.focus()}),s}}class XIe extends Ne{static get requires(){return[ZIe,JIe]}static get pluginName(){return"BlockQuote"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ePe extends ri(){constructor(){super(...arguments);y(this,"_stack",[])}add(e,i){const r=this._stack,s=r[0];this._insertDescriptor(e);const o=r[0];s!==o&&!uE(s,o)&&this.fire("change:top",{oldDescriptor:s,newDescriptor:o,writer:i})}remove(e,i){const r=this._stack,s=r[0];this._removeDescriptor(e);const o=r[0];s!==o&&!uE(s,o)&&this.fire("change:top",{oldDescriptor:s,newDescriptor:o,writer:i})}_insertDescriptor(e){const i=this._stack,r=i.findIndex(o=>o.id===e.id);if(uE(e,i[r]))return;r>-1&&i.splice(r,1);let s=0;for(;i[s]&&tPe(i[s],e);)s++;i.splice(s,0,e)}_removeDescriptor(e){const i=this._stack,r=i.findIndex(s=>s.id===e);r>-1&&i.splice(r,1)}}function uE(n,t){return n&&t&&n.priority==t.priority&&Ky(n.classes)==Ky(t.classes)}function tPe(n,t){return n.priority>t.priority?!0:n.priority<t.priority?!1:Ky(n.classes)>Ky(t.classes)}function Ky(n){return Array.isArray(n)?n.sort().join(","):n}const nPe="ck-widget",cL="ck-widget_selected";function Mi(n){return n.is("element")?!!n.getCustomProperty("widget"):!1}function tf(n,t,e={}){if(!n.is("containerElement"))throw new we("widget-to-widget-wrong-element-type",null,{element:n});return t.setAttribute("contenteditable","false",n),t.addClass(nPe,n),t.setCustomProperty("widget",!0,n),n.getFillerOffset=aPe,t.setCustomProperty("widgetLabel",[],n),e.label&&sPe(n,e.label),e.hasSelectionHandle&&lPe(n,t),P7(n,t),n}function iPe(n,t,e){if(t.classes&&e.addClass(jn(t.classes),n),t.attributes)for(const i in t.attributes)e.setAttribute(i,t.attributes[i],n)}function rPe(n,t,e){if(t.classes&&e.removeClass(jn(t.classes),n),t.attributes)for(const i in t.attributes)e.removeAttribute(i,n)}function P7(n,t,e=iPe,i=rPe){const r=new ePe;r.on("change:top",(a,l)=>{l.oldDescriptor&&i(n,l.oldDescriptor,l.writer),l.newDescriptor&&e(n,l.newDescriptor,l.writer)});const s=(a,l,c)=>r.add(l,c),o=(a,l,c)=>r.remove(l,c);t.setCustomProperty("addHighlight",s,n),t.setCustomProperty("removeHighlight",o,n)}function sPe(n,t){n.getCustomProperty("widgetLabel").push(t)}function oPe(n){return n.getCustomProperty("widgetLabel").reduce((e,i)=>typeof i=="function"?e?e+". "+i():i():e?e+". "+i:i,"")}function EP(n,t,e={}){return t.addClass(["ck-editor__editable","ck-editor__nested-editable"],n),e.withAriaRole!==!1&&t.setAttribute("role","textbox",n),t.setAttribute("tabindex","-1",n),e.label&&t.setAttribute("aria-label",e.label,n),t.setAttribute("contenteditable",n.isReadOnly?"false":"true",n),n.on("change:isReadOnly",(i,r,s)=>{t.setAttribute("contenteditable",s?"false":"true",n)}),n.on("change:isFocused",(i,r,s)=>{s?t.addClass("ck-editor__nested-editable_focused",n):t.removeClass("ck-editor__nested-editable_focused",n)}),P7(n,t),n}function CP(n,t){const e=n.getSelectedElement();if(e){const i=Dc(n);if(i)return t.createRange(t.createPositionAt(e,i))}return t.schema.findOptimalInsertionRange(n)}function aPe(){return null}function lPe(n,t){const e=t.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(i){const r=this.toDomElement(i),s=new Uo;return s.set("content",QCe),s.render(),r.appendChild(s.element),r});t.insert(t.createPositionAt(n,0),e),t.addClass(["ck-widget_with-selection-handle"],n)}function TP(n){const t=a=>{const{width:l,paddingLeft:c,paddingRight:u}=a.ownerDocument.defaultView.getComputedStyle(a);return parseFloat(l)-(parseFloat(c)||0)-(parseFloat(u)||0)},e=n.parentElement;if(!e)return 0;let i=t(e);const r=5;let s=0,o=e;for(;isNaN(i);){if(o=o.parentElement,++s>r)return 0;i=t(o)}return i}function cPe(n,t=new It(n)){const e=TP(n);return e?t.width/e*100:0}const Vl="widget-type-around";function Yu(n,t,e){return!!n&&Mi(n)&&!e.isInline(t)}function uPe(n){return n.closest(".ck-widget__type-around__button")}function dPe(n){return n.classList.contains("ck-widget__type-around__button_before")?"before":"after"}function fPe(n,t){const e=n.closest(".ck-widget");return t.mapDomToView(e)}function Dc(n){return n.getAttribute(Vl)}const x7=["before","after"],hPe=new DOMParser().parseFromString(xTe,"image/svg+xml").firstChild,uL="ck-widget__type-around_disabled";class mPe extends Ne{constructor(){super(...arguments);y(this,"_currentFakeCaretModelElement",null)}static get pluginName(){return"WidgetTypeAround"}static get isOfficialPlugin(){return!0}static get requires(){return[Vv,hl]}init(){const e=this.editor,i=e.editing.view;this.on("change:isEnabled",(r,s,o)=>{i.change(a=>{for(const l of i.document.roots)o?a.removeClass(uL,l):a.addClass(uL,l)}),o||e.model.change(a=>{a.removeSelectionAttribute(Vl)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(e,i){const r=this.editor,s=r.editing.view,o=r.model.schema.getAttributesWithProperty(e,"copyOnReplace",!0);r.execute("insertParagraph",{position:r.model.createPositionAt(e,i),attributes:o}),s.focus(),s.scrollToTheSelection()}_listenToIfEnabled(e,i,r,s){this.listenTo(e,i,(...o)=>{this.isEnabled&&r(...o)},s)}_insertParagraphAccordingToFakeCaretPosition(){const r=this.editor.model.document.selection,s=Dc(r);if(!s)return!1;const o=r.getSelectedElement();return this._insertParagraph(o,s),!0}_enableTypeAroundUIInjection(){const e=this.editor,i=e.model.schema,r=e.locale.t,s={before:r("Insert paragraph before block"),after:r("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",(o,a,l)=>{const c=l.mapper.toViewElement(a.item);c&&Yu(c,a.item,i)&&(gPe(l.writer,s,c),c.getCustomProperty("widgetLabel").push(()=>this.isEnabled?r("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const e=this.editor,i=e.model,r=i.document.selection,s=i.schema,o=e.editing.view;this._listenToIfEnabled(o.document,"arrowKey",(l,c)=>{this._handleArrowKeyPress(l,c)},{context:[Mi,"$text"],priority:"high"}),this._listenToIfEnabled(r,"change:range",(l,c)=>{c.directChange&&e.model.change(u=>{u.removeSelectionAttribute(Vl)})}),this._listenToIfEnabled(i.document,"change:data",()=>{const l=r.getSelectedElement();if(l){const c=e.editing.mapper.toViewElement(l);if(Yu(c,l,s))return}e.model.change(c=>{c.removeSelectionAttribute(Vl)})}),this._listenToIfEnabled(e.editing.downcastDispatcher,"selection",(l,c,u)=>{const d=u.writer;if(this._currentFakeCaretModelElement){const v=u.mapper.toViewElement(this._currentFakeCaretModelElement);v&&(d.removeClass(x7.map(a),v),this._currentFakeCaretModelElement=null)}const f=c.selection.getSelectedElement();if(!f)return;const h=u.mapper.toViewElement(f);if(!Yu(h,f,s))return;const g=Dc(c.selection);g&&(d.addClass(a(g),h),this._currentFakeCaretModelElement=f)}),this._listenToIfEnabled(e.ui.focusTracker,"change:isFocused",(l,c,u)=>{u||e.model.change(d=>{d.removeSelectionAttribute(Vl)})});function a(l){return`ck-widget_type-around_show-fake-caret_${l}`}}_handleArrowKeyPress(e,i){const r=this.editor,s=r.model,o=s.document.selection,a=s.schema,l=r.editing.view,c=i.keyCode,u=K_e(c,r.locale.contentLanguageDirection),d=l.document.selection.getSelectedElement(),f=r.editing.mapper.toModelElement(d);let h;Yu(d,f,a)?h=this._handleArrowKeyPressOnSelectedWidget(u):o.isCollapsed?h=this._handleArrowKeyPressWhenSelectionNextToAWidget(u):i.shiftKey||(h=this._handleArrowKeyPressWhenNonCollapsedSelection(u)),h&&(i.preventDefault(),e.stop())}_handleArrowKeyPressOnSelectedWidget(e){const r=this.editor.model,s=r.document.selection,o=Dc(s);return r.change(a=>{if(o){if(!(o===(e?"after":"before")))return a.removeSelectionAttribute(Vl),!0}else return a.setSelectionAttribute(Vl,e?"after":"before"),!0;return!1})}_handleArrowKeyPressWhenSelectionNextToAWidget(e){const i=this.editor,r=i.model,s=r.schema,o=i.plugins.get("Widget"),a=o._getObjectElementNextToSelection(e),l=i.editing.mapper.toViewElement(a);return Yu(l,a,s)?(r.change(c=>{o._setSelectionOverElement(a),c.setSelectionAttribute(Vl,e?"before":"after")}),!0):!1}_handleArrowKeyPressWhenNonCollapsedSelection(e){const i=this.editor,r=i.model,s=r.schema,o=i.editing.mapper,a=r.document.selection,l=e?a.getLastPosition().nodeBefore:a.getFirstPosition().nodeAfter,c=o.toViewElement(l);return Yu(c,l,s)?(r.change(u=>{u.setSelection(l,"on"),u.setSelectionAttribute(Vl,e?"after":"before")}),!0):!1}_enableInsertingParagraphsOnButtonClick(){const e=this.editor,i=e.editing.view;this._listenToIfEnabled(i.document,"mousedown",(r,s)=>{const o=uPe(s.domTarget);if(!o)return;const a=dPe(o),l=fPe(o,i.domConverter),c=e.editing.mapper.toModelElement(l);this._insertParagraph(c,a),s.preventDefault(),r.stop()})}_enableInsertingParagraphsOnEnterKeypress(){const e=this.editor,i=e.model.document.selection,r=e.editing.view;this._listenToIfEnabled(r.document,"enter",(s,o)=>{if(s.eventPhase!="atTarget")return;const a=i.getSelectedElement(),l=e.editing.mapper.toViewElement(a),c=e.model.schema;let u;this._insertParagraphAccordingToFakeCaretPosition()?u=!0:Yu(l,a,c)&&(this._insertParagraph(a,o.isSoft?"before":"after"),u=!0),u&&(o.preventDefault(),s.stop())},{context:Mi})}_enableInsertingParagraphsOnTypingKeystroke(){const i=this.editor.editing.view.document;this._listenToIfEnabled(i,"insertText",(r,s)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(s.selection=i.selection)},{priority:"high"}),Vt.isAndroid?this._listenToIfEnabled(i,"keydown",(r,s)=>{s.keyCode==229&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(i,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"highest"})}_enableDeleteIntegration(){const e=this.editor,i=e.editing.view,r=e.model,s=r.schema;this._listenToIfEnabled(i.document,"delete",(o,a)=>{if(o.eventPhase!="atTarget")return;const l=Dc(r.document.selection);if(!l)return;const c=a.direction,u=r.document.selection.getSelectedElement(),d=l==="before",f=c=="forward";if(d===f)e.execute("delete",{selection:r.createSelection(u,"on")});else{const g=s.getNearestSelectionRange(r.createPositionAt(u,l),c);if(g)if(!g.isCollapsed)r.change(v=>{v.setSelection(g),e.execute(f?"deleteForward":"delete")});else{const v=r.createSelection(g.start);if(r.modifySelection(v,{direction:c}),!v.focus.isEqual(g.start))r.change(_=>{_.setSelection(g),e.execute(f?"deleteForward":"delete")});else{const _=bPe(s,g.start.parent);r.deleteContent(r.createSelection(_,"on"),{doNotAutoparagraph:!0})}}}a.preventDefault(),o.stop()},{context:Mi})}_enableInsertContentIntegration(){const e=this.editor,i=this.editor.model,r=i.document.selection;this._listenToIfEnabled(e.model,"insertContent",(s,[o,a])=>{if(a&&!a.is("documentSelection"))return;const l=Dc(r);if(l)return s.stop(),i.change(c=>{const u=r.getSelectedElement(),d=i.createPositionAt(u,l),f=c.createSelection(d),h=i.insertContent(o,f);return c.setSelection(f),h})},{priority:"high"})}_enableInsertObjectIntegration(){const e=this.editor,r=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"insertObject",(s,o)=>{const[,a,l={}]=o;if(a&&!a.is("documentSelection"))return;const c=Dc(r);c&&(l.findOptimalPosition=c,o[3]=l)},{priority:"high"})}_enableDeleteContentIntegration(){const e=this.editor,r=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"deleteContent",(s,[o])=>{if(o&&!o.is("documentSelection"))return;Dc(r)&&s.stop()},{priority:"high"})}}function gPe(n,t,e){const i=n.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(r){const s=this.toDomElement(r);return pPe(s,t),vPe(s),s});n.insert(n.createPositionAt(e,"end"),i)}function pPe(n,t){for(const e of x7){const i=new Ks({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${e}`],title:t[e],"aria-hidden":"true"},children:[n.ownerDocument.importNode(hPe,!0)]});n.appendChild(i.render())}}function vPe(n){const t=new Ks({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});n.appendChild(t.render())}function bPe(n,t){let e=t;for(const i of t.getAncestors({parentFirst:!0})){if(i.childCount>1||n.isLimit(i))break;e=i}return e}function wPe(n){const t=n.model;return(e,i)=>{const r=i.keyCode==fn.arrowup,s=i.keyCode==fn.arrowdown,o=i.shiftKey,a=t.document.selection;if(!r&&!s)return;const l=s;if(o&&kPe(a,l))return;const c=yPe(n,a,l);if(c){if(c.isCollapsed){if(a.isCollapsed)return;if(o)return}(c.isCollapsed||_Pe(n,c,l))&&(t.change(u=>{const d=l?c.end:c.start;if(o){const f=t.createSelection(a.anchor);f.setFocus(d),u.setSelection(f)}else u.setSelection(d)}),e.stop(),i.preventDefault(),i.stopPropagation())}}}function yPe(n,t,e){const i=n.model;if(e){const r=t.isCollapsed?t.focus:t.getLastPosition(),s=dL(i,r,"forward");if(!s)return null;const o=i.createRange(r,s),a=fL(i.schema,o,"backward");return a?i.createRange(r,a):null}else{const r=t.isCollapsed?t.focus:t.getFirstPosition(),s=dL(i,r,"backward");if(!s)return null;const o=i.createRange(s,r),a=fL(i.schema,o,"forward");return a?i.createRange(a,r):null}}function dL(n,t,e){const i=n.schema,r=n.createRangeIn(t.root),s=e=="forward"?"elementStart":"elementEnd";for(const{previousPosition:o,item:a,type:l}of r.getWalker({startPosition:t,direction:e})){if(i.isLimit(a)&&!i.isInline(a))return o;if(l==s&&i.isBlock(a))return null}return null}function fL(n,t,e){const i=e=="backward"?t.end:t.start;if(n.checkChild(i,"$text"))return i;for(const{nextPosition:r}of t.getWalker({direction:e}))if(n.checkChild(r,"$text"))return r;return null}function _Pe(n,t,e){const i=n.model,r=n.view.domConverter;if(e){const c=i.createSelection(t.start);i.modifySelection(c),!c.focus.isAtEnd&&!t.start.isEqual(c.focus)&&(t=i.createRange(c.focus,t.end))}const s=n.mapper.toViewRange(t),o=r.viewRangeToDom(s),a=It.getDomRangeRects(o);let l;for(const c of a){if(l===void 0){l=Math.round(c.bottom);continue}if(Math.round(c.top)>=l)return!1;l=Math.max(l,Math.round(c.bottom))}return!0}function kPe(n,t){return!n.isCollapsed&&n.isBackward==t}class Ru extends Ne{constructor(){super(...arguments);y(this,"_previouslySelected",new Set)}static get pluginName(){return"Widget"}static get isOfficialPlugin(){return!0}static get requires(){return[mPe,hl]}init(){const e=this.editor,i=e.editing.view,r=i.document,s=e.t;this.editor.editing.downcastDispatcher.on("selection",(o,a,l)=>{const c=l.writer,u=a.selection;if(u.isCollapsed)return;const d=u.getSelectedElement();if(!d)return;const f=e.editing.mapper.toViewElement(d);Mi(f)&&l.consumable.consume(u,"selection")&&c.setSelection(c.createRangeOn(f),{fake:!0,label:oPe(f)})}),this.editor.editing.downcastDispatcher.on("selection",(o,a,l)=>{this._clearPreviouslySelectedWidgets(l.writer);const c=l.writer,u=c.document.selection;let d=null;for(const f of u.getRanges())for(const h of f){const g=h.item;Mi(g)&&!TPe(g,d)&&(c.addClass(cL,g),this._previouslySelected.add(g),d=g)}},{priority:"low"}),i.addObserver(D0),this.listenTo(r,"mousedown",(...o)=>this._onMousedown(...o)),this.listenTo(r,"arrowKey",(...o)=>{this._handleSelectionChangeOnArrowKeyPress(...o)},{context:[Mi,"$text"]}),this.listenTo(r,"arrowKey",(...o)=>{this._preventDefaultOnArrowKeyPress(...o)},{context:"$root"}),this.listenTo(r,"arrowKey",wPe(this.editor.editing),{context:"$text"}),this.listenTo(r,"delete",(o,a)=>{this._handleDelete(a.direction=="forward")&&(a.preventDefault(),o.stop())},{context:"$root"}),this.listenTo(r,"tab",(o,a)=>{o.eventPhase=="atTarget"&&(a.shiftKey||this._selectFirstNestedEditable()&&(a.preventDefault(),o.stop()))},{context:Mi,priority:"low"}),this.listenTo(r,"tab",(o,a)=>{a.shiftKey&&this._selectAncestorWidget()&&(a.preventDefault(),o.stop())},{priority:"low"}),this.listenTo(r,"keydown",(o,a)=>{a.keystroke==fn.esc&&this._selectAncestorWidget()&&(a.preventDefault(),o.stop())},{priority:"low"}),e.accessibility.addKeystrokeInfoGroup({id:"widget",label:s("Keystrokes that can be used when a widget is selected (for example: image, table, etc.)"),keystrokes:[{label:s("Move focus from an editable area back to the parent widget"),keystroke:"Esc"},{label:s("Insert a new paragraph directly after a widget"),keystroke:"Enter"},{label:s("Insert a new paragraph directly before a widget"),keystroke:"Shift+Enter"},{label:s("Move the caret to allow typing directly before a widget"),keystroke:[["arrowup"],["arrowleft"]]},{label:s("Move the caret to allow typing directly after a widget"),keystroke:[["arrowdown"],["arrowright"]]}]})}_onMousedown(e,i){const r=this.editor,s=r.editing.view,o=s.document;let a=i.target;if(!a)return;if(i.domEvent.detail>=3){this._selectBlockContent(a)&&i.preventDefault();return}if(!Mi(a)){const c=EPe(a);if(!c)return;if(Mi(c))a=c;else{const u=CPe(s,i);if(u&&Mi(u))a=u;else return}}Vt.isAndroid&&i.preventDefault(),o.isFocused||s.focus();const l=r.editing.mapper.toModelElement(a);this._setSelectionOverElement(l)}_selectBlockContent(e){const i=this.editor,r=i.model,s=i.editing.mapper,o=r.schema,a=s.findMappedViewAncestor(this.editor.editing.view.createPositionAt(e,0)),l=SPe(s.toModelElement(a),r.schema);return l?(r.change(c=>{const u=o.isLimit(l)?null:APe(c.createPositionAfter(l),o),d=c.createPositionAt(l,0),f=u?c.createPositionAt(u,0):c.createPositionAt(l,"end");c.setSelection(c.createRange(d,f))}),!0):!1}_handleSelectionChangeOnArrowKeyPress(e,i){const r=i.keyCode,s=this.editor.model,o=s.schema,a=s.document.selection,l=a.getSelectedElement(),c=P0(r,this.editor.locale.contentLanguageDirection),u=c=="down"||c=="right",d=c=="up"||c=="down";if(l&&o.isObject(l)){const h=u?a.getLastPosition():a.getFirstPosition(),g=o.getNearestSelectionRange(h,u?"forward":"backward");g&&(s.change(v=>{v.setSelection(g)}),i.preventDefault(),e.stop());return}if(!a.isCollapsed&&!i.shiftKey){const h=a.getFirstPosition(),g=a.getLastPosition(),v=h.nodeAfter,_=g.nodeBefore;(v&&o.isObject(v)||_&&o.isObject(_))&&(s.change(w=>{w.setSelection(u?g:h)}),i.preventDefault(),e.stop());return}if(!a.isCollapsed)return;const f=this._getObjectElementNextToSelection(u);if(f&&o.isObject(f)){if(o.isInline(f)&&d)return;this._setSelectionOverElement(f),i.preventDefault(),e.stop()}}_preventDefaultOnArrowKeyPress(e,i){const r=this.editor.model,s=r.schema,o=r.document.selection.getSelectedElement();o&&s.isObject(o)&&(i.preventDefault(),e.stop())}_handleDelete(e){const r=this.editor.model.document.selection;if(!this.editor.model.canEditAt(r)||!r.isCollapsed)return;const s=this._getObjectElementNextToSelection(e);if(s)return this.editor.model.change(o=>{let a=r.anchor.parent;for(;a.isEmpty;){const l=a;a=l.parent,o.remove(l)}this._setSelectionOverElement(s)}),!0}_setSelectionOverElement(e){this.editor.model.change(i=>{i.setSelection(i.createRangeOn(e))})}_getObjectElementNextToSelection(e){const i=this.editor.model,r=i.schema,s=i.document.selection,o=i.createSelection(s);if(i.modifySelection(o,{direction:e?"forward":"backward"}),o.isEqual(s))return null;const a=e?o.focus.nodeBefore:o.focus.nodeAfter;return a&&r.isObject(a)?a:null}_clearPreviouslySelectedWidgets(e){for(const i of this._previouslySelected)e.removeClass(cL,i);this._previouslySelected.clear()}_selectFirstNestedEditable(){const e=this.editor,r=this.editor.editing.view.document;for(const s of r.selection.getFirstRange().getItems())if(s.is("editableElement")){const o=e.editing.mapper.toModelElement(s);/* istanbul ignore next -- @preserve */if(!o)continue;const a=e.model.createPositionAt(o,0),l=e.model.schema.getNearestSelectionRange(a,"forward");return e.model.change(c=>{c.setSelection(l)}),!0}return!1}_selectAncestorWidget(){const e=this.editor,i=e.editing.mapper,s=e.editing.view.document.selection.getFirstPosition().parent,a=(s.is("$text")?s.parent:s).findAncestor(Mi);if(!a)return!1;const l=i.toModelElement(a);/* istanbul ignore next -- @preserve */return l?(e.model.change(c=>{c.setSelection(l,"on")}),!0):!1}}function EPe(n){let t=n;for(;t;){if(t.is("editableElement")||Mi(t))return t;t=t.parent}return null}function CPe(n,t){const e=vz(t.domEvent);let i=null;if(e?i=n.domConverter.domRangeToView(e):i=n.createRange(n.createPositionAt(t.target,0)),!i)return null;const r=i.start;if(!r.parent)return null;let s=r.parent;return r.parent.is("editableElement")&&(r.isAtEnd&&r.nodeBefore?s=r.nodeBefore:r.isAtStart&&r.nodeAfter&&(s=r.nodeAfter)),s.is("$text")?s.parent:s}function TPe(n,t){return t?Array.from(n.getAncestors()).includes(t):!1}function SPe(n,t){for(const e of n.getAncestors({includeSelf:!0,parentFirst:!0})){if(t.checkChild(e,"$text"))return e;if(t.isLimit(e)&&!t.isObject(e))break}return null}function APe(n,t){const e=new zl({startPosition:n});for(const{item:i}of e){if(t.isLimit(i)||!i.is("element"))return null;if(t.checkChild(i,"$text"))return i}return null}class sm extends Ne{constructor(){super(...arguments);y(this,"_toolbarDefinitions",new Map);y(this,"_balloon")}static get requires(){return[bo]}static get pluginName(){return"WidgetToolbarRepository"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(e.plugins.has("BalloonToolbar")){const i=e.plugins.get("BalloonToolbar");this.listenTo(i,"show",r=>{IPe(e.editing.view.document.selection)&&r.stop()},{priority:"high"})}this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const e of this._toolbarDefinitions.values())e.view.destroy()}register(e,{ariaLabel:i,items:r,getRelatedElement:s,balloonClassName:o="ck-toolbar-container",positions:a}){if(!r.length){mn("widget-toolbar-no-items",{toolbarId:e});return}const l=this.editor,c=l.t,u=new oc(l.locale);if(u.ariaLabel=i||c("Widget toolbar"),this._toolbarDefinitions.has(e))throw new we("widget-toolbar-duplicated",this,{toolbarId:e});const d={view:u,getRelatedElement:s,balloonClassName:o,itemsConfig:r,positions:a,initialized:!1};l.ui.addToolbar(u,{isContextual:!0,beforeFocus:()=>{const f=s(l.editing.view.document.selection);f&&this._showToolbar(d,f)},afterBlur:()=>{this._hideToolbar(d)}}),this._toolbarDefinitions.set(e,d)}_updateToolbarsVisibility(){let e=0,i=null,r=null;for(const s of this._toolbarDefinitions.values()){const o=s.getRelatedElement(this.editor.editing.view.document.selection);if(!this.isEnabled||!o)this._isToolbarInBalloon(s)&&this._hideToolbar(s);else if(!this.editor.ui.focusTracker.isFocused)this._isToolbarVisible(s)&&this._hideToolbar(s);else{const a=o.getAncestors().length;a>e&&(e=a,i=o,r=s)}}r&&this._showToolbar(r,i)}_hideToolbar(e){this._balloon.remove(e.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(e,i){this._isToolbarVisible(e)?hL(this.editor,i,e.positions):this._isToolbarInBalloon(e)||(e.initialized||(e.initialized=!0,e.view.fillFromConfig(e.itemsConfig,this.editor.ui.componentFactory)),this._balloon.add({view:e.view,position:O7(this.editor,i,e.positions),balloonClassName:e.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(const r of this._toolbarDefinitions.values())if(this._isToolbarVisible(r)){const s=r.getRelatedElement(this.editor.editing.view.document.selection);hL(this.editor,s,e.positions)}}))}_isToolbarVisible(e){return this._balloon.visibleView===e.view}_isToolbarInBalloon(e){return this._balloon.hasView(e.view)}}function hL(n,t,e){const i=n.plugins.get("ContextualBalloon"),r=O7(n,t,e);i.updatePosition(r)}function O7(n,t,e){const i=n.editing.view,r=ar.defaultPositions;return{target:i.domConverter.mapViewToDom(t),positions:e||[r.northArrowSouth,r.northArrowSouthWest,r.northArrowSouthEast,r.southArrowNorth,r.southArrowNorthWest,r.southArrowNorthEast,r.viewportStickyNorth]}}function IPe(n){const t=n.getSelectedElement();return!!(t&&Mi(t))}class PPe extends Wn(){constructor(e){super();y(this,"_referenceCoordinates");y(this,"_options");y(this,"_originalWidth");y(this,"_originalHeight");y(this,"_originalWidthPercents");y(this,"_aspectRatio");this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=e,this._referenceCoordinates=null}get originalWidth(){return this._originalWidth}get originalHeight(){return this._originalHeight}get originalWidthPercents(){return this._originalWidthPercents}get aspectRatio(){return this._aspectRatio}begin(e,i,r){const s=new It(i);this.activeHandlePosition=RPe(e),this._referenceCoordinates=xPe(i,VPe(this.activeHandlePosition)),this._originalWidth=s.width,this._originalHeight=s.height,this._aspectRatio=s.width/s.height;const o=r.style.width;o&&o.match(/^\d+(\.\d*)?%$/)?this._originalWidthPercents=parseFloat(o):this._originalWidthPercents=cPe(r,s)}update(e){this.proposedWidth=e.width,this.proposedHeight=e.height,this.proposedWidthPercents=e.widthPercents,this.proposedHandleHostWidth=e.handleHostWidth,this.proposedHandleHostHeight=e.handleHostHeight}}function xPe(n,t){const e=new It(n),i=t.split("-"),r={x:i[1]=="right"?e.right:e.left,y:i[0]=="bottom"?e.bottom:e.top};return r.x+=n.ownerDocument.defaultView.scrollX,r.y+=n.ownerDocument.defaultView.scrollY,r}function OPe(n){return`ck-widget__resizer__handle-${n}`}function RPe(n){const t=["top-left","top-right","bottom-right","bottom-left"];for(const e of t)if(n.classList.contains(OPe(e)))return e}function VPe(n){const t=n.split("-"),e={top:"bottom",bottom:"top",left:"right",right:"left"};return`${e[t[0]]}-${e[t[1]]}`}class DPe extends dt{constructor(){super();const t=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",t.to("_viewPosition",e=>e?`ck-orientation-${e}`:"")],style:{display:t.if("_isVisible","none",e=>!e)}},children:[{text:t.to("_label")}]})}_bindToState(t,e){this.bind("_isVisible").to(e,"proposedWidth",e,"proposedHeight",(i,r)=>i!==null&&r!==null),this.bind("_label").to(e,"proposedHandleHostWidth",e,"proposedHandleHostHeight",e,"proposedWidthPercents",(i,r,s)=>t.unit==="px"?`${i}×${r}`:`${s}%`),this.bind("_viewPosition").to(e,"activeHandlePosition",e,"proposedHandleHostWidth",e,"proposedHandleHostHeight",(i,r,s)=>r<50||s<50?"above-center":i)}_dismiss(){this.unbind(),this._isVisible=!1}}class mL extends Wn(){constructor(e){super();y(this,"_state");y(this,"_sizeView");y(this,"_options");y(this,"_viewResizerWrapper",null);y(this,"_initialViewWidth");this._options=e,this.set("isEnabled",!0),this.set("isSelected",!1),this.bind("isVisible").to(this,"isEnabled",this,"isSelected",(i,r)=>i&&r),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",i=>{!this.state.proposedWidth&&!this.state.proposedWidthPercents&&(this._cleanup(),i.stop())},{priority:"high"})}get state(){return this._state}show(){this._options.editor.editing.view.change(i=>{i.removeClass("ck-hidden",this._viewResizerWrapper)})}hide(){this._options.editor.editing.view.change(i=>{i.addClass("ck-hidden",this._viewResizerWrapper)})}attach(){const e=this,i=this._options.viewElement;this._options.editor.editing.view.change(s=>{const o=s.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(a){const l=this.toDomElement(a);return e._appendHandles(l),e._appendSizeUI(l),l});s.insert(s.createPositionAt(i,"end"),o),s.addClass("ck-widget_with-resizer",i),this._viewResizerWrapper=o,this.isVisible||this.hide()}),this.on("change:isVisible",()=>{this.isVisible?(this.show(),this.redraw()):this.hide()})}begin(e){this._state=new PPe(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(e,this._getHandleHost(),this._getResizeHost())}updateSize(e){const i=this._proposeNewSize(e);this._options.editor.editing.view.change(u=>{const d=this._options.unit||"%",f=(d==="%"?i.widthPercents:i.width)+d;u.setStyle("width",f,this._options.viewElement)});const s=this._getHandleHost(),o=new It(s),a=Math.round(o.width),l=Math.round(o.height),c=new It(s);i.width=Math.round(c.width),i.height=Math.round(c.height),this.redraw(o),this.state.update({...i,handleHostWidth:a,handleHostHeight:l})}commit(){const e=this._options.unit||"%",i=(e==="%"?this.state.proposedWidthPercents:this.state.proposedWidth)+e;this._options.editor.editing.view.change(()=>{this._cleanup(),this._options.onCommit(i)})}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(e){const i=this._domResizerWrapper;if(!MPe(i))return;const r=i.parentElement,s=this._getHandleHost(),o=this._viewResizerWrapper,a=[o.getStyle("width"),o.getStyle("height"),o.getStyle("left"),o.getStyle("top")];let l;if(r.isSameNode(s)){const c=e||new It(s);l=[c.width+"px",c.height+"px",void 0,void 0]}else l=[s.offsetWidth+"px",s.offsetHeight+"px",s.offsetLeft+"px",s.offsetTop+"px"];ts(a,l)!=="same"&&this._options.editor.editing.view.change(c=>{c.setStyle({width:l[0],height:l[1],left:l[2],top:l[3]},o)})}containsHandle(e){return this._domResizerWrapper.contains(e)}static isResizeHandle(e){return e.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss(),this._options.editor.editing.view.change(i=>{i.setStyle("width",this._initialViewWidth,this._options.viewElement)})}_proposeNewSize(e){const i=this.state,r=LPe(e),s=this._options.isCentered?this._options.isCentered(this):!0,o={x:i._referenceCoordinates.x-(r.x+i.originalWidth),y:r.y-i.originalHeight-i._referenceCoordinates.y};s&&i.activeHandlePosition.endsWith("-right")&&(o.x=r.x-(i._referenceCoordinates.x+i.originalWidth)),s&&(o.x*=2);let a=Math.abs(i.originalWidth+o.x),l=Math.abs(i.originalHeight+o.y);return(a/i.aspectRatio>l?"width":"height")=="width"?l=a/i.aspectRatio:a=l*i.aspectRatio,{width:Math.round(a),height:Math.round(l),widthPercents:Math.min(Math.round(i.originalWidthPercents/i.originalWidth*a*100)/100,100)}}_getResizeHost(){const e=this._domResizerWrapper.parentElement;return this._options.getResizeHost(e)}_getHandleHost(){const e=this._domResizerWrapper.parentElement;return this._options.getHandleHost(e)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(e){const i=["top-left","top-right","bottom-right","bottom-left"];for(const r of i)e.appendChild(new Ks({tag:"div",attributes:{class:`ck-widget__resizer__handle ${NPe(r)}`}}).render())}_appendSizeUI(e){this._sizeView=new DPe,this._sizeView.render(),e.appendChild(this._sizeView.element)}}function NPe(n){return`ck-widget__resizer__handle-${n}`}function LPe(n){return{x:n.pageX,y:n.pageY}}function MPe(n){return n&&n.ownerDocument&&n.ownerDocument.contains(n)}class dE extends Ne{constructor(){super(...arguments);y(this,"_resizers",new Map);y(this,"_observer");y(this,"_redrawSelectedResizerThrottled")}static get pluginName(){return"WidgetResize"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.editing,i=at.window.document;this.set("selectedResizer",null),this.set("_activeResizer",null),e.view.addObserver(D0),this._observer=new(ds()),this.listenTo(e.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(i,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(i,"mouseup",this._mouseUpListener.bind(this)),this._redrawSelectedResizerThrottled=tm(()=>this.redrawSelectedResizer(),200),this.editor.ui.on("update",this._redrawSelectedResizerThrottled),this.editor.model.document.on("change",()=>{for(const[s,o]of this._resizers)s.isAttached()||(this._resizers.delete(s),o.destroy())},{priority:"lowest"}),this._observer.listenTo(at.window,"resize",this._redrawSelectedResizerThrottled);const r=this.editor.editing.view.document.selection;r.on("change",()=>{const s=r.getSelectedElement(),o=this.getResizerByViewElement(s)||null;o?this.select(o):this.deselect()})}redrawSelectedResizer(){this.selectedResizer&&this.selectedResizer.isVisible&&this.selectedResizer.redraw()}destroy(){super.destroy(),this._observer.stopListening();for(const e of this._resizers.values())e.destroy();this._redrawSelectedResizerThrottled.cancel()}select(e){this.deselect(),this.selectedResizer=e,this.selectedResizer.isSelected=!0}deselect(){this.selectedResizer&&(this.selectedResizer.isSelected=!1),this.selectedResizer=null}attachTo(e){const i=new mL(e),r=this.editor.plugins;if(i.attach(),r.has("WidgetToolbarRepository")){const a=r.get("WidgetToolbarRepository");i.on("begin",()=>{a.forceDisabled("resize")},{priority:"lowest"}),i.on("cancel",()=>{a.clearForceDisabled("resize")},{priority:"highest"}),i.on("commit",()=>{a.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(e.viewElement,i);const o=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(o)==i&&this.select(i),i}getResizerByViewElement(e){return this._resizers.get(e)}_getResizerByHandle(e){for(const i of this._resizers.values())if(i.containsHandle(e))return i}_mouseDownListener(e,i){const r=i.domTarget;mL.isResizeHandle(r)&&(this._activeResizer=this._getResizerByHandle(r)||null,this._activeResizer&&(this._activeResizer.begin(r),e.stop(),i.preventDefault()))}_mouseMoveListener(e,i){this._activeResizer&&this._activeResizer.updateSize(i)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class $Pe extends dt{constructor(e,i){super(e);y(this,"focusTracker",new Mn);y(this,"keystrokes",new oi);y(this,"idInputView");y(this,"backButtonView");y(this,"saveButtonView");y(this,"children");y(this,"_validators");y(this,"_focusables",new tr);y(this,"_focusCycler");this._validators=i,this.backButtonView=this._createBackButton(),this.saveButtonView=this._createSaveButton(),this.idInputView=this._createIdInput(),this.children=this.createCollection([this._createHeaderView()]),this.children.add(new Cr(e,{children:[this.idInputView,this.saveButtonView],class:["ck-form__row_with-submit","ck-form__row_large-top-padding"]})),this.keystrokes.set("Esc",(r,s)=>{this.fire("cancel"),s()}),this._focusCycler=new ur({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-bookmark-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),bl({view:this}),[this.backButtonView,this.idInputView,this.saveButtonView].forEach(i=>{this._focusables.add(i),this.focusTracker.add(i.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.idInputView.focus()}isValid(){this.resetFormStatus();for(const e of this._validators){const i=e(this);if(i)return this.idInputView.errorText=i,!1}return!0}resetFormStatus(){this.idInputView.errorText=null}_createBackButton(){const e=this.locale.t,i=new wt(this.locale);return i.set({class:"ck-button-back",label:e("Back"),icon:sc,tooltip:!0}),i.delegate("execute").to(this,"cancel"),i}_createSaveButton(){const e=this.locale.t,i=new wt(this.locale);return i.set({label:e("Save"),withText:!0,type:"submit",class:"ck-button-action ck-button-bold"}),i}_createHeaderView(){const e=this.locale.t,i=new wl(this.locale,{label:e("Bookmark")});return i.children.add(this.backButtonView,0),i}_createIdInput(){const e=this.locale.t,i=new Ri(this.locale,Ss);return i.label=e("Bookmark name"),i.infoText=e("Enter the bookmark name without spaces."),i.class="ck-labeled-field-view_full-width",i}get id(){const{element:e}=this.idInputView.fieldView;return e?e.value.trim():null}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function R7(n){return!(!n||typeof n!="string"||/\s/.test(n))}class BPe extends Nt{refresh(){const e=this.editor.model.document.selection,i=this._getPositionToInsertBookmark(e);this.isEnabled=!!i}execute(t){if(!t)return;const{bookmarkId:e}=t;if(!R7(e)){mn("insert-bookmark-command-executed-with-invalid-name");return}const i=this.editor,r=i.model,s=r.document.selection;r.change(o=>{let a=this._getPositionToInsertBookmark(s);if(!r.schema.checkChild(a,"bookmark")){const u=i.execute("insertParagraph",{position:a});if(!u)return;a=u}const c=o.createElement("bookmark",{...Object.fromEntries(s.getAttributes()),bookmarkId:e});r.insertObject(c,a,null,{setSelection:"on"})})}_getPositionToInsertBookmark(t){const e=this.editor.model,i=e.schema,r=t.getFirstRange(),s=r.start;if(fE(s,i))return s;for(const{previousPosition:o,item:a}of r){if(a.is("element")&&i.checkChild(a,"$text")&&fE(a,i))return e.createPositionAt(a,0);if(fE(o,i))return o}return null}}function fE(n,t){return t.checkChild(n,"bookmark")?!0:t.checkChild(n,"paragraph")?t.checkChild("paragraph","bookmark"):!1}class FPe extends Nt{refresh(){const e=this.editor.model.document.selection,i=gL(e);this.isEnabled=!!i,this.value=i?i.getAttribute("bookmarkId"):void 0}execute(t){if(!t)return;const{bookmarkId:e}=t;if(!R7(e)){mn("update-bookmark-command-executed-with-invalid-name");return}const i=this.editor.model,r=i.document.selection,s=gL(r);s&&i.change(o=>{o.setAttribute("bookmarkId",e,s)})}}function gL(n){const t=n.getSelectedElement();return t&&t.is("element","bookmark")?t:null}class mp extends Ne{constructor(e){super(e);y(this,"_bookmarkElements",new Map);e.config.define("bookmark",{toolbar:["bookmarkPreview","|","editBookmark","removeBookmark"]})}static get pluginName(){return"BookmarkEditing"}static get isOfficialPlugin(){return!0}init(){const{editor:e}=this;this._defineSchema(),this._defineConverters(),e.commands.add("insertBookmark",new BPe(e)),e.commands.add("updateBookmark",new FPe(e)),this.listenTo(e.model.document,"change:data",()=>{this._trackBookmarkElements()})}getElementForBookmarkId(e){for(const[i,r]of this._bookmarkElements)if(r==e)return i;return null}getAllBookmarkNames(){return new Set(this._bookmarkElements.values())}_defineSchema(){this.editor.model.schema.register("bookmark",{inheritAllFrom:"$inlineObject",allowAttributes:"bookmarkId",disallowAttributes:["linkHref","htmlA"]})}_defineConverters(){const{editor:e}=this,{conversion:i,t:r}=e;e.data.htmlProcessor.domConverter.registerInlineObjectMatcher(s=>qT(s)),e.editing.view.domConverter.registerInlineObjectMatcher(s=>qT(s,!1)),i.for("dataDowncast").elementToElement({model:{name:"bookmark",attributes:["bookmarkId"]},view:(s,{writer:o})=>o.createEmptyElement("a",{id:s.getAttribute("bookmarkId")})}),i.for("editingDowncast").elementToElement({model:{name:"bookmark",attributes:["bookmarkId"]},view:(s,{writer:o})=>{const a=s.getAttribute("bookmarkId"),l=o.createContainerElement("a",{id:a,class:"ck-bookmark"},[this._createBookmarkUIElement(o)]);return o.setCustomProperty("bookmark",!0,l),this._bookmarkElements.set(s,a),tf(l,o,{label:()=>`${a} ${r("bookmark widget")}`})}}),i.for("upcast").add(s=>s.on("element:a",UPe(e)))}_createBookmarkUIElement(e){return e.createUIElement("span",{class:"ck-bookmark__icon"},function(i){const r=this.toDomElement(i),s=new Uo;return s.set({content:HCe,isColorInherited:!1}),s.render(),r.appendChild(s.element),r})}_trackBookmarkElements(){this._bookmarkElements.forEach((e,i)=>{i.root.rootName==="$graveyard"&&this._bookmarkElements.delete(i)})}}function qT(n,t=!0){if(!(n.name==="a")||t&&!n.isEmpty)return null;const i=n.hasAttribute("id"),r=n.hasAttribute("name"),s=n.hasAttribute("href");return i&&!s?{name:!0,attributes:["id"]}:r&&!s?{name:!0,attributes:["name"]}:null}function UPe(n){return(t,e,i)=>{const r=e.viewItem,s=qT(r,!1);if(!s||!i.consumable.test(r,s)||!zPe(n)&&!r.isEmpty)return;const a=i.writer,l=r.getAttribute("id"),c=r.getAttribute("name"),u=l||c,d=a.createElement("bookmark",{bookmarkId:u});if(!i.safeInsert(d,e.modelCursor))return;i.consumable.consume(r,s),l===c&&i.consumable.consume(r,{attributes:["name"]}),i.updateConversionResult(d,e);const{modelCursor:f,modelRange:h}=i.convertChildren(r,e.modelCursor);e.modelCursor=f,e.modelRange=a.createRange(e.modelRange.start,h.end)}}function zPe(n){const t=n.config.get("bookmark.enableNonEmptyAnchorConversion");return t!==void 0?t:!0}const La="bookmark-ui";class HPe extends Ne{constructor(){super(...arguments);y(this,"formView",null);y(this,"_balloon")}static get requires(){return[mp,bo,sm]}static get pluginName(){return"BookmarkUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;this._balloon=e.plugins.get(bo),e.plugins.has("LinkUI")&&this._registerLinkProvider(),this._registerComponents(),e.conversion.for("editingDowncast").markerToHighlight({model:La,view:{classes:["ck-fake-bookmark-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:La,view:(i,{writer:r})=>{if(!i.markerRange.isCollapsed)return null;const s=r.createUIElement("span");return r.addClass(["ck-fake-bookmark-selection","ck-fake-bookmark-selection_collapsed"],s),s}})}afterInit(){const e=this.editor,i=e.locale.t,r=this.editor.plugins.get(sm),s=ar.defaultPositions;r.register("bookmark",{ariaLabel:i("Bookmark toolbar"),items:e.config.get("bookmark.toolbar"),getRelatedElement:jPe,balloonClassName:"ck-bookmark-balloon ck-toolbar-container",positions:[s.southArrowNorth,s.southArrowNorthMiddleWest,s.southArrowNorthMiddleEast,s.southArrowNorthWest,s.southArrowNorthEast,s.northArrowSouth,s.northArrowSouthMiddleWest,s.northArrowSouthMiddleEast,s.northArrowSouthWest,s.northArrowSouthEast,s.viewportStickyNorth]})}destroy(){super.destroy(),this.formView&&this.formView.destroy()}_createViews(){this.formView=this._createFormView(),this._enableUserBalloonInteractions()}_createFormView(){const e=this.editor,i=e.locale,r=i.t,s=e.commands.get("insertBookmark"),o=e.commands.get("updateBookmark"),a=[s,o],l=new(Nd($Pe))(i,WPe(e));return l.idInputView.fieldView.bind("value").to(o,"value"),l.saveButtonView.bind("label").to(o,"value",c=>r(c?"Save":"Insert")),l.idInputView.bind("isEnabled").toMany(a,"isEnabled",(...c)=>c.some(u=>u)),l.saveButtonView.bind("isEnabled").toMany(a,"isEnabled",(...c)=>c.some(u=>u)),this.listenTo(l,"cancel",()=>{this._hideFormView()}),this.listenTo(l,"submit",()=>{if(l.isValid()){const c=l.id;this._getSelectedBookmarkElement()?e.execute("updateBookmark",{bookmarkId:c}):e.execute("insertBookmark",{bookmarkId:c}),this._hideFormView()}}),this.listenTo(l.idInputView,"change:errorText",()=>{e.ui.update()}),l}_registerLinkProvider(){const e=this.editor.locale.t,i=this.editor.plugins.get("LinkUI"),r=this.editor.plugins.get(mp),s=()=>Array.from(r.getAllBookmarkNames()).sort((a,l)=>a.localeCompare(l)).map(a=>({id:a,href:`#${a}`,label:a,icon:jCe})),o=a=>{const l=[...r.getAllBookmarkNames()].find(c=>`#${c}`===a);return l?{href:a,label:l,icon:qCe,tooltip:e("Scroll to bookmark")}:null};i.registerLinksListProvider({label:e("Bookmarks"),emptyListPlaceholder:e("No bookmarks available."),navigate:({href:a})=>this._scrollToBookmark(a),getListItems:s,getItem:o})}_scrollToBookmark(e){const r=this.editor.plugins.get(mp).getElementForBookmarkId(e.slice(1));return r?(this.editor.model.change(s=>{s.setSelection(r,"on")}),this.editor.editing.view.scrollToTheSelection({alignToTop:!0,forceScroll:!0}),!0):!1}_registerComponents(){const e=this.editor;e.ui.componentFactory.add("bookmark",()=>{const i=this._createBookmarkButton(wt);return i.set({tooltip:!0}),i}),e.ui.componentFactory.add("menuBar:bookmark",()=>this._createBookmarkButton(Ti)),e.ui.componentFactory.add("bookmarkPreview",i=>{const r=e.commands.get("updateBookmark"),s=new js(i);return s.extendTemplate({attributes:{class:["ck-bookmark-toolbar__preview"]}}),s.bind("text").to(r,"value"),s}),e.ui.componentFactory.add("editBookmark",i=>{const r=e.commands.get("updateBookmark"),s=new wt(i),o=i.t;return s.set({label:o("Edit bookmark"),icon:N8,tooltip:!0}),s.bind("isEnabled").to(r),this.listenTo(s,"execute",()=>{this._showFormView()}),s}),e.ui.componentFactory.add("removeBookmark",i=>{const r=e.commands.get("delete"),s=new wt(i),o=i.t;return s.set({label:o("Remove bookmark"),icon:PTe,tooltip:!0}),s.bind("isEnabled").to(r),this.listenTo(s,"execute",()=>{e.execute("delete"),e.editing.view.focus()}),s})}_createBookmarkButton(e){const i=this.editor,r=i.locale,s=new e(r),o=i.commands.get("insertBookmark"),a=i.commands.get("updateBookmark"),l=r.t;return s.set({label:l("Bookmark"),icon:WCe}),this.listenTo(s,"execute",()=>{i.editing.view.scrollToTheSelection(),this._showFormView()}),s.bind("isEnabled").toMany([o,a],"isEnabled",(...c)=>c.some(u=>u)),s.bind("isOn").to(a,"value",c=>!!c),s}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Esc",(e,i)=>{this._isFormVisible&&(this._hideFormView(),i())}),pc({emitter:this.formView,activator:()=>this._isFormInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>{this._hideFormView(!1)}})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const e=this.editor.commands.get("updateBookmark");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.formView.backButtonView.isVisible=e.isEnabled,this.formView.idInputView.fieldView.value=e.value||"",this._balloon.visibleView===this.formView&&this.formView.idInputView.fieldView.select(),this.formView.enableCssTransitions()}_removeFormView(e=!0){this.formView.saveButtonView.focus(),this.formView.idInputView.fieldView.reset(),this._balloon.remove(this.formView),e&&this.editor.editing.view.focus(),this._hideFakeVisualSelection()}_showFormView(){this.formView||this._createViews(),this._getSelectedBookmarkElement()||this._showFakeVisualSelection(),this._addFormView(),this._balloon.showStack("main"),this._startUpdatingUI()}_hideFormView(e=!0){if(!this._isFormInPanel)return;const i=this.editor;this.stopListening(i.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e&&i.editing.view.focus(),this._removeFormView(e),this._hideFakeVisualSelection()}_startUpdatingUI(){const e=this.editor,i=e.editing.view.document;let r=this._getSelectedBookmarkElement(),s=a();const o=()=>{const l=this._getSelectedBookmarkElement(),c=a();r&&!l||!r&&c!==s?this._hideFormView():this._isFormVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),r=l,s=c};function a(){return i.selection.focus.getAncestors().reverse().find(l=>l.is("element"))}this.listenTo(e.ui,"update",o),this.listenTo(this._balloon,"change:visibleView",o)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _isFormVisible(){return!!this.formView&&this._balloon.visibleView==this.formView}_getBalloonPositionData(){const e=this.editor.editing.view,i=this.editor.model;let r;const s=this._getSelectedBookmarkElement();if(i.markers.has(La)){const o=Array.from(this.editor.editing.mapper.markerNameToElements(La)),a=e.createRange(e.createPositionBefore(o[0]),e.createPositionAfter(o[o.length-1]));r=e.domConverter.viewRangeToDom(a)}else s&&(r=()=>{const o=this.editor.editing.mapper,a=e.domConverter,l=o.toViewElement(s);return a.mapViewToDom(l)});if(r)return{target:r}}_getSelectedBookmarkElement(){const i=this.editor.model.document.selection.getSelectedElement();return i&&i.is("element","bookmark")?i:null}_showFakeVisualSelection(){const e=this.editor.model;e.change(i=>{const r=e.document.selection.getFirstRange();if(e.markers.has(La))i.updateMarker(La,{range:r});else if(r.start.isAtEnd){const s=r.start.getLastMatchingPosition(({item:o})=>!e.schema.isContent(o),{boundaries:r});i.addMarker(La,{usingOperation:!1,affectsData:!1,range:i.createRange(s,r.end)})}else i.addMarker(La,{usingOperation:!1,affectsData:!1,range:r})})}_hideFakeVisualSelection(){const e=this.editor.model;e.markers.has(La)&&e.change(i=>{i.removeMarker(La)})}}function WPe(n){const{t}=n,e=n.plugins.get(mp);return[i=>{if(!i.id)return t("Bookmark must not be empty.")},i=>{if(i.id&&/\s/.test(i.id))return t("Bookmark name cannot contain space characters.")},i=>{const r=n.model.document.selection.getSelectedElement(),s=e.getElementForBookmarkId(i.id);if(r!==s&&s)return t("Bookmark name already exists.")}]}function jPe(n){const t=n.getSelectedElement();return!t||!Mi(t)||!t.getCustomProperty("bookmark")?null:t}class qPe extends Ne{static get pluginName(){return"Bookmark"}static get requires(){return[mp,HPe,Ru]}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class iv extends vl{constructor(e){super(e);y(this,"domEventType",["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"]);const i=this.document;this.listenTo(i,"paste",r("clipboardInput"),{priority:"low"}),this.listenTo(i,"drop",r("clipboardInput"),{priority:"low"}),this.listenTo(i,"dragover",r("dragging"),{priority:"low"});function r(s){return(o,a)=>{a.preventDefault();const l=a.dropRange?[a.dropRange]:null,c=new ic(i,s);i.fire(c,{dataTransfer:a.dataTransfer,method:o.name,targetRanges:l,target:a.target,domEvent:a.domEvent}),c.stop.called&&a.stopPropagation()}}}onDomEvent(e){const i="clipboardData"in e?e.clipboardData:e.dataTransfer,r=e.type=="drop"||e.type=="paste",s={dataTransfer:new Fz(i,{cacheFiles:r})};if(e.type=="drop"||e.type=="dragover"){const o=vz(e);s.dropRange=o&&this.view.domConverter.domRangeToView(o)}this.fire(e.type,e,s)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function GPe(n){return n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),(n.includes("</p><p>")||n.includes("<br>"))&&(n=`<p>${n}</p>`),n}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function KPe(n){return n.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(t,e)=>e.length==1?" ":e).replace(/<!--[\s\S]*?-->/g,"")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const pL=["figcaption","li"],vL=["ol","ul"];function V7(n,t){if(t.is("$text")||t.is("$textProxy"))return t.data;if(t.is("element","img")&&t.hasAttribute("alt"))return t.getAttribute("alt");if(t.is("element","br"))return`
`;let e="",i=null;for(const r of t.getChildren())e+=YPe(r,i)+V7(n,r),i=r;if(t.is("rawElement")){const s=document.implementation.createHTMLDocument("").createElement("div");t.render(s,n),e+=D7(s)}return e}function D7(n){let t="";if(n.nodeType===Node.TEXT_NODE)return n.textContent;if(n.tagName==="BR")return`
`;for(const e of n.childNodes)t+=D7(e);return t}function YPe(n,t){return t?n.is("element","li")&&!n.isEmpty&&n.getChild(0).is("containerElement")||vL.includes(n.name)&&vL.includes(t.name)?`

`:!n.is("containerElement")&&!t.is("containerElement")?"":pL.includes(n.name)||pL.includes(t.name)?`
`:n.is("element")&&n.getCustomProperty("dataPipeline:transparentRendering")||t.is("element")&&t.getCustomProperty("dataPipeline:transparentRendering")?"":`

`:""}class gp extends Ne{constructor(){super(...arguments);y(this,"_markersToCopy",new Map)}static get pluginName(){return"ClipboardMarkersUtils"}static get isOfficialPlugin(){return!0}_registerMarkerToCopy(e,i){this._markersToCopy.set(e,i)}_copySelectedFragmentWithMarkers(e,i,r=s=>s.model.getSelectedContent(s.model.document.selection)){return this.editor.model.change(s=>{const o=s.model.document.selection;s.setSelection(i);const a=this._insertFakeMarkersIntoSelection(s,s.model.document.selection,e),l=r(s),c=this._removeFakeMarkersInsideElement(s,l);for(const[u,d]of Object.entries(a)){c[u]||(c[u]=s.createRangeIn(l));for(const f of d)s.remove(f)}l.markers.clear();for(const[u,d]of Object.entries(c))l.markers.set(u,d);return s.setSelection(o),l})}_pasteMarkersIntoTransformedElement(e,i){const r=this._getPasteMarkersFromRangeMap(e);return this.editor.model.change(s=>{const o=this._insertFakeMarkersElements(s,r),a=i(s),l=this._removeFakeMarkersInsideElement(s,a);for(const c of Object.values(o).flat())s.remove(c);for(const[c,u]of Object.entries(l))s.model.markers.has(c)||s.addMarker(c,{usingOperation:!0,affectsData:!0,range:u});return a})}_pasteFragmentWithMarkers(e){const i=this._getPasteMarkersFromRangeMap(e.markers);e.markers.clear();for(const r of i)e.markers.set(r.name,r.range);return this.editor.model.insertContent(e)}_forceMarkersCopy(e,i,r={allowedActions:"all",copyPartiallySelected:!0,duplicateOnPaste:!0}){const s=this._markersToCopy.get(e);this._markersToCopy.set(e,r),i(),s?this._markersToCopy.set(e,s):this._markersToCopy.delete(e)}_isMarkerCopyable(e,i){const r=this._getMarkerClipboardConfig(e);if(!r)return!1;if(!i)return!0;const{allowedActions:s}=r;return s==="all"||s.includes(i)}_hasMarkerConfiguration(e){return!!this._getMarkerClipboardConfig(e)}_getMarkerClipboardConfig(e){const[i]=e.split(":");return this._markersToCopy.get(i)||null}_insertFakeMarkersIntoSelection(e,i,r){const s=this._getCopyableMarkersFromSelection(e,i,r);return this._insertFakeMarkersElements(e,s)}_getCopyableMarkersFromSelection(e,i,r){const s=Array.from(i.getRanges()),o=new Set(s.flatMap(l=>Array.from(e.model.markers.getMarkersIntersectingRange(l)))),a=l=>{if(!this._isMarkerCopyable(l.name,r))return!1;const{copyPartiallySelected:u}=this._getMarkerClipboardConfig(l.name);if(!u){const d=l.getRange();return s.some(f=>f.containsRange(d,!0))}return!0};return Array.from(o).filter(a).map(l=>({name:r==="dragstart"?this._getUniqueMarkerName(l.name):l.name,range:l.getRange()}))}_getPasteMarkersFromRangeMap(e,i=null){const{model:r}=this.editor;return(e instanceof Map?Array.from(e.entries()):Object.entries(e)).flatMap(([o,a])=>{if(!this._hasMarkerConfiguration(o))return[{name:o,range:a}];if(this._isMarkerCopyable(o,i)){const l=this._getMarkerClipboardConfig(o),c=r.markers.has(o)&&r.markers.get(o).getRange().root.rootName==="$graveyard";return(l.duplicateOnPaste||c)&&(o=this._getUniqueMarkerName(o)),[{name:o,range:a}]}return[]})}_insertFakeMarkersElements(e,i){const r={},s=i.flatMap(o=>{const{start:a,end:l}=o.range;return[{position:a,marker:o,type:"start"},{position:l,marker:o,type:"end"}]}).sort(({position:o},{position:a})=>o.isBefore(a)?1:-1);for(const{position:o,marker:a,type:l}of s){const c=e.createElement("$marker",{"data-name":a.name,"data-type":l});r[a.name]||(r[a.name]=[]),r[a.name].push(c),e.insert(c,o)}return r}_removeFakeMarkersInsideElement(e,i){const s=this._getAllFakeMarkersFromElement(e,i).reduce((o,a)=>{const l=a.markerElement&&e.createPositionBefore(a.markerElement);let c=o[a.name],u=!1;return c!=null&&c.start&&(c!=null&&c.end)&&(this._getMarkerClipboardConfig(a.name).duplicateOnPaste?o[this._getUniqueMarkerName(a.name)]=o[a.name]:u=!0,c=null),u||(o[a.name]={...c,[a.type]:l}),a.markerElement&&e.remove(a.markerElement),o},{});return Zye(s,o=>new qe(o.start||e.createPositionFromPath(i,[0]),o.end||e.createPositionAt(i,"end")))}_getAllFakeMarkersFromElement(e,i){const r=Array.from(e.createRangeIn(i)).flatMap(({item:a})=>{if(!a.is("element","$marker"))return[];const l=a.getAttribute("data-name"),c=a.getAttribute("data-type");return[{markerElement:a,name:l,type:c}]}),s=[],o=[];for(const a of r)a.type==="end"&&(r.some(c=>c.name===a.name&&c.type==="start")||s.push({markerElement:null,name:a.name,type:"start"})),a.type==="start"&&(r.some(c=>c.name===a.name&&c.type==="end")||o.unshift({markerElement:null,name:a.name,type:"end"}));return[...s,...r,...o]}_getUniqueMarkerName(e){const i=e.split(":"),r=cs().substring(1,6);return i.length===3?`${i.slice(0,2).join(":")}:${r}`:`${i.join(":")}:${r}`}}class Qs extends Ne{static get pluginName(){return"ClipboardPipeline"}static get isOfficialPlugin(){return!0}static get requires(){return[gp]}init(){this.editor.editing.view.addObserver(iv),this._setupPasteDrop(),this._setupCopyCut()}_fireOutputTransformationEvent(t,e,i){const r=this.editor.plugins.get("ClipboardMarkersUtils");this.editor.model.enqueueChange({isUndoable:i==="cut"},()=>{const s=r._copySelectedFragmentWithMarkers(i,e);this.fire("outputTransformation",{dataTransfer:t,content:s,method:i})})}_setupPasteDrop(){const t=this.editor,e=t.model,i=t.editing.view,r=i.document,s=this.editor.plugins.get("ClipboardMarkersUtils");this.listenTo(r,"clipboardInput",(o,a)=>{a.method=="paste"&&!t.model.canEditAt(t.model.document.selection)&&o.stop()},{priority:"highest"}),this.listenTo(r,"clipboardInput",(o,a)=>{const l=a.dataTransfer;let c;if(a.content)c=a.content;else{let f="";l.getData("text/html")?f=KPe(l.getData("text/html")):l.getData("text/plain")&&(f=GPe(l.getData("text/plain"))),c=this.editor.data.htmlProcessor.toView(f)}const u=new ic(this,"inputTransformation"),d=l.getData("application/ckeditor5-editor-id")||null;this.fire(u,{content:c,dataTransfer:l,sourceEditorId:d,targetRanges:a.targetRanges,method:a.method}),u.stop.called&&o.stop(),i.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(o,a)=>{if(a.content.isEmpty)return;const c=this.editor.data.toModel(a.content,"$clipboardHolder");c.childCount!=0&&(o.stop(),e.change(()=>{this.fire("contentInsertion",{content:c,method:a.method,sourceEditorId:a.sourceEditorId,dataTransfer:a.dataTransfer,targetRanges:a.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(o,a)=>{a.resultRange=s._pasteFragmentWithMarkers(a.content)},{priority:"low"})}_setupCopyCut(){const t=this.editor,e=t.model.document,r=t.editing.view.document,s=(o,a)=>{const l=a.dataTransfer;a.preventDefault(),this._fireOutputTransformationEvent(l,e.selection,o.name)};this.listenTo(r,"copy",s,{priority:"low"}),this.listenTo(r,"cut",(o,a)=>{t.model.canEditAt(t.model.document.selection)?s(o,a):a.preventDefault()},{priority:"low"}),this.listenTo(this,"outputTransformation",(o,a)=>{const l=t.data.toView(a.content,{isClipboardPipeline:!0});r.fire("clipboardOutput",{dataTransfer:a.dataTransfer,content:l,method:a.method})},{priority:"low"}),this.listenTo(r,"clipboardOutput",(o,a)=>{a.content.isEmpty||(a.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(a.content)),a.dataTransfer.setData("text/plain",V7(t.data.htmlProcessor.domConverter,a.content)),a.dataTransfer.setData("application/ckeditor5-editor-id",this.editor.id)),a.method=="cut"&&t.model.deleteContent(e.selection)},{priority:"low"})}}const hE=gc("px");class QPe extends dt{constructor(){super();const t=this.bindTemplate;this.set({isVisible:!1,left:null,top:null,width:null}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-clipboard-drop-target-line",t.if("isVisible","ck-hidden",e=>!e)],style:{left:t.to("left",e=>hE(e)),top:t.to("top",e=>hE(e)),width:t.to("width",e=>hE(e))}}})}}class Bb extends Ne{constructor(){super(...arguments);y(this,"removeDropMarkerDelayed",WI(()=>this.removeDropMarker(),40));y(this,"_updateDropMarkerThrottled",tm(e=>this._updateDropMarker(e),40));y(this,"_reconvertMarkerThrottled",tm(()=>{this.editor.model.markers.has("drop-target")&&this.editor.editing.reconvertMarker("drop-target")},0));y(this,"_dropTargetLineView",new QPe);y(this,"_domEmitter",new(ds()));y(this,"_scrollables",new Map)}static get pluginName(){return"DragDropTarget"}static get isOfficialPlugin(){return!0}init(){this._setupDropMarker()}destroy(){this._domEmitter.stopListening();for(const{resizeObserver:e}of this._scrollables.values())e.destroy();return this._updateDropMarkerThrottled.cancel(),this.removeDropMarkerDelayed.cancel(),this._reconvertMarkerThrottled.cancel(),super.destroy()}updateDropMarker(e,i,r,s,o,a){this.removeDropMarkerDelayed.cancel();const l=bL(this.editor,e,i,r,s,o,a);/* istanbul ignore next -- @preserve */if(l){if(a&&a.containsRange(l))return this.removeDropMarker();this._updateDropMarkerThrottled(l)}}getFinalDropRange(e,i,r,s,o,a){const l=bL(this.editor,e,i,r,s,o,a);return this.removeDropMarker(),l}removeDropMarker(){const e=this.editor.model;this.removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),this._dropTargetLineView.isVisible=!1,e.markers.has("drop-target")&&e.change(i=>{i.removeMarker("drop-target")})}_setupDropMarker(){const e=this.editor;e.ui.view.body.add(this._dropTargetLineView),e.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),e.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(i,{writer:r})=>{if(e.model.schema.checkChild(i.markerRange.start,"$text"))return this._dropTargetLineView.isVisible=!1,this._createDropTargetPosition(r);i.markerRange.isCollapsed?this._updateDropTargetLine(i.markerRange):this._dropTargetLineView.isVisible=!1}})}_updateDropMarker(e){const i=this.editor,r=i.model.markers;i.model.change(s=>{r.has("drop-target")?r.get("drop-target").getRange().isEqual(e)||s.updateMarker("drop-target",{range:e}):s.addMarker("drop-target",{range:e,usingOperation:!1,affectsData:!1})})}_createDropTargetPosition(e){return e.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(i){const r=this.toDomElement(i);return r.append("⁠",i.createElement("span"),"⁠"),r})}_updateDropTargetLine(e){const i=this.editor.editing,r=e.start.nodeBefore,s=e.start.nodeAfter,o=e.start.parent,a=r?i.mapper.toViewElement(r):null,l=a?i.view.domConverter.mapViewToDom(a):null,c=s?i.mapper.toViewElement(s):null,u=c?i.view.domConverter.mapViewToDom(c):null,d=i.mapper.toViewElement(o);if(!d)return;const f=i.view.domConverter.mapViewToDom(d),h=this._getScrollableRect(d),{scrollX:g,scrollY:v}=at.window,_=l?new It(l):null,w=u?new It(u):null,C=new It(f).excludeScrollbarsAndBorders(),k=_?_.bottom:C.top,E=w?w.top:C.bottom,A=at.window.getComputedStyle(f),x=k<=E?(k+E)/2:E;if(h.top<x&&x<h.bottom){const p=C.left+parseFloat(A.paddingLeft),D=C.right-parseFloat(A.paddingRight),R=Math.max(p+g,h.left),S=Math.min(D+g,h.right);this._dropTargetLineView.set({isVisible:!0,left:R,top:x+v,width:S-R})}else this._dropTargetLineView.isVisible=!1}_getScrollableRect(e){const i=e.root.rootName;let r;if(this._scrollables.has(i))r=this._scrollables.get(i).domElement;else{const s=this.editor.editing.view.domConverter.mapViewToDom(e);r=JPe(s),this._domEmitter.listenTo(r,"scroll",this._reconvertMarkerThrottled,{usePassive:!0});const o=new Rd(r,this._reconvertMarkerThrottled);this._scrollables.set(i,{domElement:r,resizeObserver:o})}return new It(r).excludeScrollbarsAndBorders()}}function bL(n,t,e,i,r,s,o){const a=n.model,l=n.editing.mapper;let u=wL(n,t);for(;u;){if(!s){if(a.schema.checkChild(u,"$text")){if(e){const d=e[0].start,f=l.toModelPosition(d);if(!o||Array.from(o.getItems({shallow:!0})).every(g=>a.schema.checkChild(f,g))){if(a.schema.checkChild(f,"$text"))return a.createRange(f);if(d)return Fb(n,wL(n,d.parent),i,r)}}}else if(a.schema.isInline(u))return Fb(n,u,i,r)}if(a.schema.isBlock(u))return Fb(n,u,i,r);if(a.schema.checkChild(u,"$block")){const d=Array.from(u.getChildren()).filter(g=>g.is("element")&&!ZPe(n,g));let f=0,h=d.length;if(h==0)return a.createRange(a.createPositionAt(u,"end"));for(;f<h-1;){const g=Math.floor((f+h)/2);N7(n,d[g],i,r)=="before"?h=g:f=g}return Fb(n,d[f],i,r)}u=u.parent}return null}function ZPe(n,t){const e=n.editing.mapper,i=n.editing.view.domConverter,r=e.toViewElement(t);if(!r)return!0;const s=i.mapViewToDom(r);return at.window.getComputedStyle(s).float!="none"}function Fb(n,t,e,i){const r=n.model;return r.createRange(r.createPositionAt(t,N7(n,t,e,i)))}function N7(n,t,e,i){const r=n.editing.mapper,s=n.editing.view.domConverter,o=r.toViewElement(t),a=s.mapViewToDom(o),l=new It(a);return n.model.schema.isInline(t)?e<(l.left+l.right)/2?"before":"after":i<(l.top+l.bottom)/2?"before":"after"}function wL(n,t){const e=n.editing.mapper,i=n.editing.view,r=e.toModelElement(t);if(r)return r;const s=i.createPositionBefore(t),o=e.findMappedViewAncestor(s);return e.toModelElement(o)}function JPe(n){let t=n;do{t=t.parentElement;const e=at.window.getComputedStyle(t).overflowY;if(e=="auto"||e=="scroll")break}while(t.tagName!="BODY");return t}class XPe extends Ne{constructor(){super(...arguments);y(this,"_isBlockDragging",!1);y(this,"_domEmitter",new(ds()))}static get pluginName(){return"DragDropBlockToolbar"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(this.listenTo(e,"change:isReadOnly",(i,r,s)=>{s?(this.forceDisabled("readOnlyMode"),this._isBlockDragging=!1):this.clearForceDisabled("readOnlyMode")}),Vt.isAndroid&&this.forceDisabled("noAndroidSupport"),e.plugins.has("BlockToolbar")){const r=e.plugins.get("BlockToolbar").buttonView.element;this._domEmitter.listenTo(r,"dragstart",(s,o)=>this._handleBlockDragStart(o)),this._domEmitter.listenTo(at.document,"dragover",(s,o)=>this._handleBlockDragging(o)),this._domEmitter.listenTo(at.document,"drop",(s,o)=>this._handleBlockDragging(o)),this._domEmitter.listenTo(at.document,"dragend",()=>this._handleBlockDragEnd(),{useCapture:!0}),this.isEnabled&&r.setAttribute("draggable","true"),this.on("change:isEnabled",(s,o,a)=>{r.setAttribute("draggable",a?"true":"false")})}}destroy(){return this._domEmitter.stopListening(),super.destroy()}_handleBlockDragStart(e){if(!this.isEnabled)return;const i=this.editor.model,r=i.document.selection,s=this.editor.editing.view,o=Array.from(r.getSelectedBlocks()),a=i.createRange(i.createPositionBefore(o[0]),i.createPositionAfter(o[o.length-1]));i.change(l=>l.setSelection(a)),this._isBlockDragging=!0,s.focus(),s.getObserver(iv).onDomEvent(e)}_handleBlockDragging(e){if(!this.isEnabled||!this._isBlockDragging)return;const i=e.clientX+(this.editor.locale.contentLanguageDirection=="ltr"?100:-100),r=e.clientY,s=document.elementFromPoint(i,r),o=this.editor.editing.view;!s||!s.closest(".ck-editor__editable")||o.getObserver(iv).onDomEvent({...e,type:e.type,dataTransfer:e.dataTransfer,target:s,clientX:i,clientY:r,preventDefault:()=>e.preventDefault(),stopPropagation:()=>e.stopPropagation()})}_handleBlockDragEnd(){this._isBlockDragging=!1}}class exe extends Ne{constructor(){super(...arguments);y(this,"_draggedRange");y(this,"_draggingUid");y(this,"_draggableElement");y(this,"_clearDraggableAttributesDelayed",WI(()=>this._clearDraggableAttributes(),40));y(this,"_blockMode",!1);y(this,"_domEmitter",new(ds()));y(this,"_previewContainer")}static get pluginName(){return"DragDrop"}static get isOfficialPlugin(){return!0}static get requires(){return[Qs,Ru,Bb,XPe]}init(){const e=this.editor,i=e.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,i.addObserver(iv),i.addObserver(D0),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDraggableAttributeHandling(),this.listenTo(e,"change:isReadOnly",(r,s,o)=>{o?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(r,s,o)=>{o||this._finalizeDragging(!1)}),Vt.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._previewContainer&&this._previewContainer.remove(),this._domEmitter.stopListening(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const e=this.editor,i=e.model,r=e.editing.view,s=r.document,o=e.plugins.get(Bb);this.listenTo(s,"dragstart",(a,l)=>{var v;if((v=l.target)!=null&&v.is("editableElement")){l.preventDefault();return}if(this._prepareDraggedRange(l.target),!this._draggedRange){l.preventDefault();return}this._draggingUid=cs(),l.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",l.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const c=i.createSelection(this._draggedRange.toRange());this.editor.plugins.get("ClipboardPipeline")._fireOutputTransformationEvent(l.dataTransfer,c,"dragstart");const{dataTransfer:d,domTarget:f,domEvent:h}=l,{clientX:g}=h;this._updatePreview({dataTransfer:d,domTarget:f,clientX:g}),l.stopPropagation(),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(s,"dragend",(a,l)=>{this._finalizeDragging(!l.dataTransfer.isCanceled&&l.dataTransfer.dropEffect=="move")},{priority:"low"}),this._domEmitter.listenTo(at.document,"dragend",()=>{this._blockMode=!1},{useCapture:!0}),this.listenTo(s,"dragenter",()=>{this.isEnabled&&r.focus()}),this.listenTo(s,"dragleave",()=>{o.removeDropMarkerDelayed()}),this.listenTo(s,"dragging",(a,l)=>{if(!this.isEnabled){l.dataTransfer.dropEffect="none";return}const{clientX:c,clientY:u}=l.domEvent;o.updateDropMarker(l.target,l.targetRanges,c,u,this._blockMode,this._draggedRange),this._draggedRange||(l.dataTransfer.dropEffect="copy"),Vt.isGecko||(l.dataTransfer.effectAllowed=="copy"?l.dataTransfer.dropEffect="copy":["all","copyMove"].includes(l.dataTransfer.effectAllowed)&&(l.dataTransfer.dropEffect="move")),a.stop()},{priority:"low"})}_setupClipboardInputIntegration(){const e=this.editor,r=e.editing.view.document,s=e.plugins.get(Bb);this.listenTo(r,"clipboardInput",(o,a)=>{if(a.method!="drop")return;const{clientX:l,clientY:c}=a.domEvent,u=s.getFinalDropRange(a.target,a.targetRanges,l,c,this._blockMode,this._draggedRange);if(!u){this._finalizeDragging(!1),o.stop();return}if(this._draggedRange&&this._draggingUid!=a.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),yL(a.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(u,!0)){this._finalizeDragging(!1),o.stop();return}a.targetRanges=[e.editing.mapper.toViewRange(u)]},{priority:"high"})}_setupContentInsertionIntegration(){const e=this.editor.plugins.get(Qs);e.on("contentInsertion",(i,r)=>{if(!this.isEnabled||r.method!=="drop")return;const s=r.targetRanges.map(o=>this.editor.editing.mapper.toModelRange(o));this.editor.model.change(o=>o.setSelection(s))},{priority:"high"}),e.on("contentInsertion",(i,r)=>{if(!this.isEnabled||r.method!=="drop")return;const s=yL(r.dataTransfer)=="move",o=!r.resultRange||!r.resultRange.isCollapsed;this._finalizeDragging(o&&s)},{priority:"lowest"})}_setupDraggableAttributeHandling(){const e=this.editor,i=e.editing.view,r=i.document;this.listenTo(r,"mousedown",(s,o)=>{if(Vt.isAndroid||!o)return;this._clearDraggableAttributesDelayed.cancel();let a=_L(o.target);if(Vt.isBlink&&!e.isReadOnly&&!a&&!r.selection.isCollapsed){const l=r.selection.getSelectedElement();(!l||!Mi(l))&&(a=r.selection.editableElement)}a&&(i.change(l=>{l.setAttribute("draggable","true",a)}),this._draggableElement=e.editing.mapper.toModelElement(a))}),this.listenTo(r,"mouseup",()=>{Vt.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const e=this.editor.editing;e.view.change(i=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&i.removeAttribute("draggable",e.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_finalizeDragging(e){const i=this.editor,r=i.model;i.plugins.get(Bb).removeDropMarker(),this._clearDraggableAttributes(),i.plugins.has("WidgetToolbarRepository")&&i.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._previewContainer&&(this._previewContainer.remove(),this._previewContainer=void 0),this._draggedRange&&(e&&this.isEnabled&&r.change(o=>{const a=r.createSelection(this._draggedRange);r.deleteContent(a,{doNotAutoparagraph:!0});const l=a.getFirstPosition().parent;l.isEmpty&&!r.schema.checkChild(l,"$text")&&r.schema.checkChild(l,"paragraph")&&o.insertElement("paragraph",l,0)}),this._draggedRange.detach(),this._draggedRange=null)}_prepareDraggedRange(e){const i=this.editor,r=i.model,s=r.document.selection,o=e?_L(e):null;if(o){const u=i.editing.mapper.toModelElement(o);this._draggedRange=Ts.fromRange(r.createRangeOn(u)),this._blockMode=r.schema.isBlock(u),i.plugins.has("WidgetToolbarRepository")&&i.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop");return}if(s.isCollapsed&&!s.getFirstPosition().parent.isEmpty)return;const a=Array.from(s.getSelectedBlocks()),l=s.getFirstRange();if(a.length==0){this._draggedRange=Ts.fromRange(l);return}const c=L7(r,a);if(a.length>1)this._draggedRange=Ts.fromRange(c),this._blockMode=!0;else if(a.length==1){const u=l.start.isTouching(c.start)&&l.end.isTouching(c.end);this._draggedRange=Ts.fromRange(u?c:l),this._blockMode=u}r.change(u=>u.setSelection(this._draggedRange.toRange()))}_updatePreview({dataTransfer:e,domTarget:i,clientX:r}){const s=this.editor.editing.view,o=s.document.selection.editableElement,a=s.domConverter.mapViewToDom(o),l=at.window.getComputedStyle(a);this._previewContainer?this._previewContainer.firstElementChild&&this._previewContainer.removeChild(this._previewContainer.firstElementChild):(this._previewContainer=or(at.document,"div",{style:"position: fixed; left: -999999px;"}),at.document.body.appendChild(this._previewContainer));const c=new It(a);if(a.contains(i))return;const u=parseFloat(l.paddingLeft),d=or(at.document,"div");d.className="ck ck-content",d.style.width=l.width,d.style.paddingLeft=`${c.left-r+u}px`,Vt.isiOS&&(d.style.backgroundColor="white"),s.domConverter.setContentOf(d,e.getData("text/html")),e.setDragImage(d,0,0),this._previewContainer.appendChild(d)}}function yL(n){return Vt.isGecko?n.dropEffect:["all","copyMove"].includes(n.effectAllowed)?"move":"copy"}function _L(n){if(n.is("editableElement"))return null;if(n.hasClass("ck-widget__selection-handle"))return n.findAncestor(Mi);if(Mi(n))return n;const t=n.findAncestor(e=>Mi(e)||e.is("editableElement"));return Mi(t)?t:null}function L7(n,t){const e=t[0],i=t[t.length-1],r=e.getCommonAncestor(i),s=n.createPositionBefore(e),o=n.createPositionAfter(i);if(r&&r.is("element")&&!n.schema.isLimit(r)){const a=n.createRangeOn(r),l=s.isTouching(a.start),c=o.isTouching(a.end);if(l&&c)return L7(n,[r])}return n.createRange(s,o)}class txe extends Ne{static get pluginName(){return"PastePlainText"}static get isOfficialPlugin(){return!0}static get requires(){return[Qs]}init(){const t=this.editor,e=t.model,i=t.editing.view,r=e.document.selection;i.addObserver(iv),t.plugins.get(Qs).on("contentInsertion",(s,o)=>{nxe(o.content,e)&&e.change(a=>{const l=Array.from(r.getAttributes()).filter(([u])=>e.schema.getAttributeProperties(u).isFormatting);r.isCollapsed||e.deleteContent(r,{doNotAutoparagraph:!0}),l.push(...r.getAttributes());const c=a.createRangeIn(o.content);for(const u of c.getItems())for(const d of l)e.schema.checkAttribute(u,d[0])&&a.setAttribute(d[0],d[1],u)})})}}function nxe(n,t){let e=t.createRangeIn(n);if(n.childCount==1){const i=n.getChild(0);i.is("element")&&t.schema.isBlock(i)&&!t.schema.isObject(i)&&!t.schema.isLimit(i)&&(e=t.createRangeIn(i))}for(const i of e.getItems())if(!t.schema.isInline(i)||Array.from(i.getAttributeKeys()).find(s=>t.schema.getAttributeProperties(s).isFormatting))return!1;return!0}class SP extends Ne{static get pluginName(){return"Clipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[gp,Qs,exe,txe]}init(){const t=this.editor,e=this.editor.t;t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Copy selected content"),keystroke:"CTRL+C"},{label:e("Paste content"),keystroke:"CTRL+V"},{label:e("Paste content as plain text"),keystroke:"CTRL+SHIFT+V"}]})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const ixe={autoRefresh:!0},kL=36e5,rxe=5e3;class AP extends Wn(){constructor(e,i={}){super();y(this,"_refresh");y(this,"_options");y(this,"_tokenRefreshTimeout");y(this,"_isDestroyed",!1);if(!e)throw new we("token-missing-token-url",this);i.initValue&&this._validateTokenValue(i.initValue),this.set("value",i.initValue),typeof e=="function"?this._refresh=e:this._refresh=()=>sxe(e),this._options={...ixe,...i}}init(){return new Promise((e,i)=>{if(!this.value){this.refreshToken().then(e).catch(i);return}this._options.autoRefresh&&this._registerRefreshTokenTimeout(),e(this)})}refreshToken(){const e=this._options.autoRefresh;return this._refresh().then(i=>(this._validateTokenValue(i),this.set("value",i),e&&this._registerRefreshTokenTimeout(),this)).catch(i=>{throw mn("token-refresh-failed",{autoRefresh:e}),e&&this._registerRefreshTokenTimeout(rxe),i})}destroy(){this._isDestroyed=!0,clearTimeout(this._tokenRefreshTimeout)}_validateTokenValue(e){const i=typeof e=="string",r=!/^".*"$/.test(e),s=i&&e.split(".").length===3;if(!(r&&s))throw new we("token-not-in-jwt-format",this)}_registerRefreshTokenTimeout(e){if(clearTimeout(this._tokenRefreshTimeout),this._isDestroyed)return;const i=e||this._getTokenRefreshTimeoutTime();this._tokenRefreshTimeout=setTimeout(()=>{this.refreshToken()},i)}_getTokenRefreshTimeoutTime(){try{const[,e]=this.value.split("."),{exp:i}=JSON.parse(atob(e));return i?Math.floor((i*1e3-Date.now())/2):kL}catch{return kL}}static create(e,i={}){return new AP(e,i).init()}}function sxe(n){return new Promise((t,e)=>{const i=new XMLHttpRequest;i.open("GET",n),i.addEventListener("load",()=>{const r=i.status,s=i.response;return r<200||r>299?e(new we("token-cannot-download-new-token",null)):t(s)}),i.addEventListener("error",()=>e(new Error("Network Error"))),i.addEventListener("abort",()=>e(new Error("Abort"))),i.send()})}const GT=/^data:(\S*?);base64,/;class oxe extends ri(){constructor(e,i,r){super();y(this,"file");y(this,"xhr");y(this,"_token");y(this,"_apiAddress");if(!e)throw new we("fileuploader-missing-file",null);if(!i)throw new we("fileuploader-missing-token",null);if(!r)throw new we("fileuploader-missing-api-address",null);this.file=lxe(e)?axe(e):e,this._token=i,this._apiAddress=r}onProgress(e){return this.on("progress",(i,r)=>e(r)),this}onError(e){return this.once("error",(i,r)=>e(r)),this}abort(){this.xhr.abort()}send(){return this._prepareRequest(),this._attachXHRListeners(),this._sendRequest()}_prepareRequest(){const e=new XMLHttpRequest;e.open("POST",this._apiAddress),e.setRequestHeader("Authorization",this._token.value),e.responseType="json",this.xhr=e}_attachXHRListeners(){const e=this.xhr,i=r=>()=>this.fire("error",r);e.addEventListener("error",i("Network Error")),e.addEventListener("abort",i("Abort"));/* istanbul ignore else -- @preserve */e.upload&&e.upload.addEventListener("progress",r=>{r.lengthComputable&&this.fire("progress",{total:r.total,uploaded:r.loaded})}),e.addEventListener("load",()=>{const r=e.status,s=e.response;if(r<200||r>299)return this.fire("error",s.message||s.error)})}_sendRequest(){const e=new FormData,i=this.xhr;return e.append("file",this.file),new Promise((r,s)=>{i.addEventListener("load",()=>{const o=i.status,a=i.response;return o<200||o>299?a.message?s(new we("fileuploader-uploading-data-failed",this,{message:a.message})):s(a.error):r(a)}),i.addEventListener("error",()=>s(new Error("Network Error"))),i.addEventListener("abort",()=>s(new Error("Abort"))),i.send(e)})}}function axe(n,t=512){try{const e=n.match(GT)[1],i=atob(n.replace(GT,"")),r=[];for(let s=0;s<i.length;s+=t){const o=i.slice(s,s+t),a=new Array(o.length);for(let l=0;l<o.length;l++)a[l]=o.charCodeAt(l);r.push(new Uint8Array(a))}return new Blob(r,{type:e})}catch{throw new we("fileuploader-decoding-image-data-error",null)}}function lxe(n){var t;return typeof n!="string"?!1:!!((t=n.match(GT))!=null&&t.length)}class cxe{constructor(t,e){y(this,"_token");y(this,"_apiAddress");if(!t)throw new we("uploadgateway-missing-token",null);if(!e)throw new we("uploadgateway-missing-api-address",null);this._token=t,this._apiAddress=e}upload(t){return new oxe(t,this._token,this._apiAddress)}}class uxe extends N0{static get pluginName(){return"CloudServicesCore"}static get isOfficialPlugin(){return!0}createToken(t,e){return new AP(t,e)}createUploadGateway(t,e){return new cxe(t,e)}}class dxe extends N0{constructor(){super(...arguments);y(this,"tokenUrl");y(this,"uploadUrl");y(this,"webSocketUrl");y(this,"bundleVersion");y(this,"token",null);y(this,"_tokens",new Map)}static get pluginName(){return"CloudServices"}static get isOfficialPlugin(){return!0}static get requires(){return[uxe]}async init(){const i=this.context.config.get("cloudServices")||{};for(const[o,a]of Object.entries(i))this[o]=a;if(!this.tokenUrl){this.token=null;return}const s=this.context.plugins.get("CloudServicesCore").createToken(this.tokenUrl);try{this.token=await s.init(),this._tokens.set(this.tokenUrl,this.token)}catch(o){throw s.destroy(),o}}async registerTokenUrl(e){if(this._tokens.has(e))return this.getTokenFor(e);const r=await this.context.plugins.get("CloudServicesCore").createToken(e).init();return this._tokens.set(e,r),r}getTokenFor(e){const i=this._tokens.get(e);if(!i)throw new we("cloudservices-token-not-registered",this);return i}destroy(){super.destroy();for(const e of this._tokens.values())e.destroy()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Yy(n){const t=n.t,e=n.config.get("codeBlock.languages");for(const i of e)i.label==="Plain text"&&(i.label=t("Plain text")),i.class===void 0&&(i.class=`language-${i.language}`);return e}function Qy(n,t,e){const i={};for(const r of n)if(t==="class"){const s=r[t].split(" ").shift();i[s]=r[e]}else i[r[t]]=r[e];return i}function IP(n){return n.data.match(/^(\s*)/)[0]}function fxe(n,t){const e=n.createDocumentFragment(),i=t.split(`
`),r=i.reduce((s,o,a)=>(s.push(o),a<i.length-1&&s.push(n.createElement("br")),s),[]);return n.appendChild(r,e),e}function KT(n){const t=n.document.selection,e=[];if(t.isCollapsed)return[t.anchor];const i=t.getFirstRange().getWalker({ignoreElementEnd:!0,direction:"backward"});for(const{item:r}of i){let s=r.is("$textProxy")?r.textNode:r;const o=s.parent;if(!o.is("element","codeBlock")||s.is("element","softBreak"))continue;for(;s.previousSibling&&!s.previousSibling.is("element","softBreak");)s=s.previousSibling;const a=s.is("$text")?s.startOffset+IP(s).length:s.startOffset,l=n.createPositionAt(o,a);e.every(c=>!c.isEqual(l))&&e.push(l)}return e}function M7(n){const t=gi(n.getSelectedBlocks());return!!t&&t.is("element","codeBlock")}function EL(n,t){return t.is("rootElement")||n.isLimit(t)?!1:n.checkChild(t.parent,"codeBlock")}function CL(n,t,e,i){const r=Qy(t,"language","label"),s=e.getAttribute("language");if(s in r){const o=r[s];return n(i==="enter"?"Entering %0 code snippet":"Leaving %0 code snippet",o)}return n(i==="enter"?"Entering code snippet":"Leaving code snippet")}function $7(n,t){for(n.textNode&&(n=t.createPositionBefore(n.textNode));n.nodeBefore&&!n.nodeBefore.is("element","softBreak");)n=t.createPositionBefore(n.nodeBefore);const e=n.nodeAfter;return e&&e.is("$text")?e:null}class hxe extends Nt{constructor(e){super(e);y(this,"_lastLanguage");this._lastLanguage=null}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const i=this.editor,r=i.model,s=r.document.selection,a=Yy(i)[0],l=Array.from(s.getSelectedBlocks()),c=e.forceValue==null?!this.value:e.forceValue,u=mxe(e,this._lastLanguage,a.language);r.change(d=>{c?this._applyCodeBlock(d,l,u):this._removeCodeBlock(d,l)})}_getValue(){const e=this.editor.model.document.selection,i=gi(e.getSelectedBlocks());return!!(i!=null&&i.is("element","codeBlock"))?i.getAttribute("language"):!1}_checkEnabled(){if(this.value)return!0;const e=this.editor.model.document.selection,i=this.editor.model.schema,r=gi(e.getSelectedBlocks());return r?EL(i,r):!1}_applyCodeBlock(e,i,r){this._lastLanguage=r;const s=this.editor.model.schema,o=i.filter(a=>EL(s,a));for(const a of o)e.rename(a,"codeBlock"),e.setAttribute("language",r,a),s.removeDisallowedAttributes([a],e),Array.from(a.getChildren()).filter(l=>!s.checkChild(a,l)).forEach(l=>e.remove(l));o.reverse().forEach((a,l)=>{const c=o[l+1];a.previousSibling===c&&(e.appendElement("softBreak",c),e.merge(e.createPositionBefore(a)))})}_removeCodeBlock(e,i){const r=i.filter(s=>s.is("element","codeBlock"));for(const s of r){const o=e.createRangeOn(s);for(const a of Array.from(o.getItems()).reverse())if(a.is("element","softBreak")&&a.parent.is("element","codeBlock")){const{position:l}=e.split(e.createPositionBefore(a)),c=l.nodeAfter;e.rename(c,"paragraph"),e.removeAttribute("language",c),e.remove(a)}e.rename(s,"paragraph"),e.removeAttribute("language",s)}}}function mxe(n,t,e){return n.language?n.language:n.usePreviousLanguageChoice&&t?t:e}class gxe extends Nt{constructor(e){super(e);y(this,"_indentSequence");this._indentSequence=e.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){const i=this.editor.model;i.change(r=>{const s=KT(i);for(const o of s){const a=r.createText(this._indentSequence);i.insertContent(a,o)}})}_checkEnabled(){return this._indentSequence?M7(this.editor.model.document.selection):!1}}class pxe extends Nt{constructor(e){super(e);y(this,"_indentSequence");this._indentSequence=e.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){const i=this.editor.model;i.change(()=>{const r=KT(i);for(const s of r){const o=TL(i,s,this._indentSequence);o&&i.deleteContent(i.createSelection(o))}})}_checkEnabled(){if(!this._indentSequence)return!1;const e=this.editor.model;return M7(e.document.selection)?KT(e).some(i=>TL(e,i,this._indentSequence)):!1}}function TL(n,t,e){const i=$7(t,n);if(!i)return null;const r=IP(i),s=r.lastIndexOf(e);if(s+e.length!==r.length||s===-1)return null;const{parent:o,startOffset:a}=i;return n.createRange(n.createPositionAt(o,a+s),n.createPositionAt(o,a+s+e.length))}function SL(n,t,e=!1){const i=Qy(t,"language","class"),r=Qy(t,"language","label");return(s,o,a)=>{const{writer:l,mapper:c,consumable:u}=a;if(!u.consume(o.item,"insert"))return;const d=o.item.getAttribute("language"),f=c.toViewPosition(n.createPositionBefore(o.item)),h={};e&&(h["data-language"]=r[d],h.spellcheck="false");const g=i[d]?{class:i[d]}:void 0,v=l.createContainerElement("code",g),_=l.createContainerElement("pre",h,v);l.insert(f,_),c.bindElements(o.item,v)}}function vxe(n){return(t,e,i)=>{if(e.item.parent.name!=="codeBlock")return;const{writer:r,mapper:s,consumable:o}=i;if(!o.consume(e.item,"insert"))return;const a=s.toViewPosition(n.createPositionBefore(e.item));r.insert(a,r.createText(`
`))}}function bxe(n,t){const e=Qy(t,"class","language"),i=t[0].language;return(r,s,o)=>{const a=s.viewItem,l=a.parent;if(!l||!l.is("element","pre")||s.modelCursor.findAncestor("codeBlock"))return;const{consumable:c,writer:u}=o;if(!c.test(a,{name:!0}))return;const d=u.createElement("codeBlock"),f=[...a.getClassNames()];f.length||f.push("");for(const h of f){const g=e[h];if(g){u.setAttribute("language",g,d);break}}d.hasAttribute("language")||u.setAttribute("language",i,d),o.convertChildren(a,d),o.safeInsert(d,s.modelCursor)&&(c.consume(a,{name:!0}),o.updateConversionResult(d,s))}}function wxe(){return(n,t,{consumable:e,writer:i})=>{let r=t.modelCursor;if(!e.test(t.viewItem)||!r.findAncestor("codeBlock"))return;e.consume(t.viewItem);const o=t.viewItem.data.split(`
`).map(l=>i.createText(l)),a=o[o.length-1];for(const l of o)if(i.insert(l,r),r=r.getShiftedBy(l.offsetSize),l!==a){const c=i.createElement("softBreak");i.insert(c,r),r=i.createPositionAfter(c)}t.modelRange=i.createRange(t.modelCursor,r),t.modelCursor=r}}function yxe(){return(n,t,{consumable:e})=>{const i=t.viewItem;if(i.findAncestor("pre"))return;const r=Array.from(i.getChildren()),s=r.find(o=>o.is("element","code"));if(s)for(const o of r)o===s||!o.is("$text")||e.consume(o,{name:!0})}}const B7="paragraph";class _xe extends Ne{static get pluginName(){return"CodeBlockEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[I7]}constructor(t){super(t),t.config.define("codeBlock",{languages:[{language:"plaintext",label:"Plain text"},{language:"c",label:"C"},{language:"cs",label:"C#"},{language:"cpp",label:"C++"},{language:"css",label:"CSS"},{language:"diff",label:"Diff"},{language:"go",label:"Go"},{language:"html",label:"HTML"},{language:"java",label:"Java"},{language:"javascript",label:"JavaScript"},{language:"php",label:"PHP"},{language:"python",label:"Python"},{language:"ruby",label:"Ruby"},{language:"typescript",label:"TypeScript"},{language:"xml",label:"XML"}],indentSequence:"	"})}init(){const t=this.editor,e=t.model.schema,i=t.model,r=t.editing.view,s=Yy(t);t.commands.add("codeBlock",new hxe(t)),t.commands.add("indentCodeBlock",new gxe(t)),t.commands.add("outdentCodeBlock",new pxe(t)),this.listenTo(r.document,"tab",(o,a)=>{const l=a.shiftKey?"outdentCodeBlock":"indentCodeBlock";t.commands.get(l).isEnabled&&(t.execute(l),a.stopPropagation(),a.preventDefault(),o.stop())},{context:"pre"}),e.register("codeBlock",{allowWhere:"$block",allowChildren:"$text",disallowChildren:"$inlineObject",allowAttributes:["language"],allowAttributesOf:"$listItem",isBlock:!0}),e.addAttributeCheck((o,a)=>{const l=o.getItem(o.length-2);if(e.getAttributeProperties(a).isFormatting&&l&&l.name=="codeBlock")return!1}),t.editing.downcastDispatcher.on("insert:codeBlock",SL(i,s,!0)),t.data.downcastDispatcher.on("insert:codeBlock",SL(i,s)),t.data.downcastDispatcher.on("insert:softBreak",vxe(i),{priority:"high"}),t.data.upcastDispatcher.on("element:code",bxe(r,s)),t.data.upcastDispatcher.on("text",wxe()),t.data.upcastDispatcher.on("element:pre",yxe(),{priority:"high"}),this.listenTo(t.editing.view.document,"clipboardInput",(o,a)=>{let l=i.createRange(i.document.selection.anchor);if(a.targetRanges&&(l=t.editing.mapper.toModelRange(a.targetRanges[0])),!l.start.parent.is("element","codeBlock"))return;const c=a.dataTransfer.getData("text/plain"),u=new Eo(t.editing.view.document);a.content=fxe(u,c)}),t.plugins.has("ClipboardPipeline")&&t.plugins.get(Qs).on("contentInsertion",(o,a)=>{const l=t.model,c=l.document.selection;c.anchor.parent.is("element","codeBlock")&&l.change(u=>{const d=u.createRangeIn(a.content);for(const f of[...d.getItems()])f.is("node")&&!e.checkChild(c.anchor,f)&&u.remove(f)})}),this.listenTo(i,"getSelectedContent",(o,[a])=>{const l=a.anchor;a.isCollapsed||!l.parent.is("element","codeBlock")||!l.hasSameParentAs(a.focus)||i.change(c=>{const u=o.return;if(l.parent.is("element")&&(u.childCount>1||a.containsEntireContent(l.parent))){const f=c.createElement("codeBlock",l.parent.getAttributes());c.append(u,f);const h=c.createDocumentFragment();c.append(f,h),o.return=h;return}const d=u.getChild(0);e.checkAttribute(d,"code")&&c.setAttribute("code",!0,d)})})}afterInit(){const t=this.editor,e=t.commands,i=e.get("indent"),r=e.get("outdent");i&&i.registerChildCommand(e.get("indentCodeBlock"),{priority:"highest"}),r&&r.registerChildCommand(e.get("outdentCodeBlock")),this.listenTo(t.editing.view.document,"enter",(s,o)=>{t.model.document.selection.getLastPosition().parent.is("element","codeBlock")&&(!Exe(t,o.isSoft)&&!Cxe(t,o.isSoft)&&kxe(t),o.preventDefault(),s.stop())},{context:"pre"}),this._initAriaAnnouncements()}_initAriaAnnouncements(){const{model:t,ui:e,t:i}=this.editor,r=Yy(this.editor);let s=null;t.document.selection.on("change:range",()=>{const o=t.document.selection.focus.parent;!e||s===o||!o.is("element")||(s&&s.is("element","codeBlock")&&e.ariaLiveAnnouncer.announce(CL(i,r,s,"leave")),o.is("element","codeBlock")&&e.ariaLiveAnnouncer.announce(CL(i,r,o,"enter")),s=o)})}}function kxe(n){const t=n.model,e=t.document,i=e.selection.getLastPosition();let r;const s=$7(i,t);s&&s.is("$text")&&(r=IP(s)),n.model.change(o=>{n.execute("shiftEnter"),r&&o.insertText(r,e.selection.anchor)})}function Exe(n,t){const i=n.model.document,r=n.editing.view,s=i.selection.getLastPosition(),o=s.nodeAfter;return t||!i.selection.isCollapsed||!s.isAtStart||!Xu(o)?!1:(n.model.change(a=>{n.execute("enter");const l=i.selection.anchor.parent.previousSibling;a.rename(l,B7),a.setSelection(l,"in"),n.model.schema.removeDisallowedAttributes([l],a),a.remove(o)}),r.scrollToTheSelection(),!0)}function Cxe(n,t){const e=n.model,i=e.document,r=n.editing.view,s=i.selection.getLastPosition(),o=s.nodeBefore;let a;if(t||!i.selection.isCollapsed||!s.isAtEnd||!o||!o.previousSibling)return!1;if(Xu(o)&&Xu(o.previousSibling))a=e.createRange(e.createPositionBefore(o.previousSibling),e.createPositionAfter(o));else if(mE(o)&&Xu(o.previousSibling)&&Xu(o.previousSibling.previousSibling))a=e.createRange(e.createPositionBefore(o.previousSibling.previousSibling),e.createPositionAfter(o));else if(mE(o)&&Xu(o.previousSibling)&&mE(o.previousSibling.previousSibling)&&o.previousSibling.previousSibling&&Xu(o.previousSibling.previousSibling.previousSibling))a=e.createRange(e.createPositionBefore(o.previousSibling.previousSibling.previousSibling),e.createPositionAfter(o));else return!1;return n.model.change(l=>{l.remove(a),n.execute("enter");const c=i.selection.anchor.parent;l.rename(c,B7),n.model.schema.removeDisallowedAttributes([c],l)}),r.scrollToTheSelection(),!0}function mE(n){return n&&n.is("$text")&&!n.data.match(/\S/)}function Xu(n){return n&&n.is("element","softBreak")}class Txe extends Ne{static get pluginName(){return"CodeBlockUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t,i=t.ui.componentFactory,r=Yy(t),s=this._getLanguageListItemDefinitions(r),o=t.commands.get("codeBlock");i.add("codeBlock",a=>{const l=as(a,Lm),c=l.buttonView,u=e("Insert code block");return c.set({label:u,tooltip:!0,icon:dN,isToggleable:!0}),c.bind("isOn").to(o,"value",d=>!!d),c.on("execute",()=>{t.execute("codeBlock",{usePreviousLanguageChoice:!0}),t.editing.view.focus()}),l.on("execute",d=>{t.execute("codeBlock",{language:d.source._codeBlockLanguage,forceValue:!0}),t.editing.view.focus()}),l.class="ck-code-block-dropdown",l.bind("isEnabled").to(o),ef(l,s,{role:"menu",ariaLabel:u}),l}),i.add("menuBar:codeBlock",a=>{const l=new ma(a);l.buttonView.set({role:"menuitem",label:e("Code block"),icon:dN}),l.bind("isEnabled").to(o);const c=new rm(a);c.set({ariaLabel:e("Insert code block")});for(const u of s){const d=new Mm(a,l),f=new Ti(a);f.bind(...Object.keys(u.model)).to(u.model),f.set({isToggleable:!0,role:"menuitemcheckbox"}),f.delegate("execute").to(l),f.on("execute",()=>{t.execute("codeBlock",{language:u.model._codeBlockLanguage,forceValue:o.value!=u.model._codeBlockLanguage}),t.editing.view.focus()}),d.children.add(f),c.items.add(d)}return l.panelView.children.add(c),l})}_getLanguageListItemDefinitions(t){const i=this.editor.commands.get("codeBlock"),r=new cr;for(const s of t){const o={type:"button",model:new $d({_codeBlockLanguage:s.language,label:s.label,role:"menuitemradio",withText:!0})};o.model.bind("isOn").to(i,"value",a=>a===o.model._codeBlockLanguage),r.add(o)}return r}}class Sxe extends Ne{static get requires(){return[_xe,Txe]}static get pluginName(){return"CodeBlock"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Axe extends zAe{constructor(e,i){super(e);y(this,"view");y(this,"_toolbarConfig");y(this,"_elementReplacer");this.view=i,this._toolbarConfig=B0(e.config.get("toolbar")),this._elementReplacer=new dz,this.listenTo(e.editing.view,"scrollToTheSelection",this._handleScrollToTheSelectionWithStickyPanel.bind(this))}get element(){return this.view.element}init(e){const i=this.editor,r=this.view,s=i.editing.view,o=r.editable,a=s.document.getRoot();o.name=a.rootName,r.render();const l=o.element;this.setEditableElement(o.name,l),r.editable.bind("isFocused").to(this.focusTracker),s.attachDomRoot(l),e&&this._elementReplacer.replace(e,this.element),this._initPlaceholder(),this._initToolbar(),r.menuBarView&&this.initMenuBar(r.menuBarView),this._initDialogPluginIntegration(),this._initContextualBalloonIntegration(),this.fire("ready")}destroy(){super.destroy();const e=this.view,i=this.editor.editing.view;this._elementReplacer.restore(),i.getDomRoot(e.editable.name)&&i.detachDomRoot(e.editable.name),e.destroy()}_initToolbar(){const e=this.view;e.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),e.stickyPanel.limiterElement=e.element,e.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({visualTop:i})=>i||0),e.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(e.toolbar)}_initPlaceholder(){const e=this.editor,i=e.editing.view,r=i.document.getRoot(),s=e.sourceElement;let o;const a=e.config.get("placeholder");a&&(o=typeof a=="string"?a:a[this.view.editable.name]),!o&&s&&s.tagName.toLowerCase()==="textarea"&&(o=s.getAttribute("placeholder")),o&&(r.placeholder=o),KI({view:i,element:r,isDirectHost:!1,keepOnFocus:!0})}_initContextualBalloonIntegration(){if(!this.editor.plugins.has("ContextualBalloon"))return;const{stickyPanel:e}=this.view,i=this.editor.plugins.get("ContextualBalloon");i.on("getPositionOptions",s=>{const o=s.return;if(!o||!e.isSticky||!e.element)return;const a=new It(e.element).height,l=typeof o.target=="function"?o.target():o.target,c=typeof o.limiter=="function"?o.limiter():o.limiter;if(l&&c&&new It(l).height>=new It(c).height-a)return;const u={...o.viewportOffsetConfig},d=(u.top||0)+a;s.return={...o,viewportOffsetConfig:{...u,top:d}}},{priority:"low"});const r=()=>{i.visibleView&&i.updatePosition()};this.listenTo(e,"change:isSticky",r),this.listenTo(this.editor.ui,"change:viewportOffset",r)}_handleScrollToTheSelectionWithStickyPanel(e,i,r){const s=this.view.stickyPanel;if(s.isSticky){const o=new It(s.element).height;i.viewportOffset.top+=o}else{const o=()=>{this.editor.editing.view.scrollToTheSelection(r)};this.listenTo(s,"change:isSticky",o),setTimeout(()=>{this.stopListening(s,"change:isSticky",o)},20)}}_initDialogPluginIntegration(){if(!this.editor.plugins.has("Dialog"))return;const e=this.view.stickyPanel,i=this.editor.plugins.get("Dialog");i.on("show",()=>{const r=i.view;r.on("moveTo",(s,o)=>{if(!e.isSticky||r.wasMoved||r.isModal)return;const a=new It(e.contentPanelElement);o[1]<a.bottom+nv.defaultOffset&&(o[1]=a.bottom+nv.defaultOffset)},{priority:"high"})},{priority:"low"})}}class Ixe extends WAe{constructor(e,i,r={}){super(e);y(this,"stickyPanel");y(this,"toolbar");y(this,"editable");this.stickyPanel=new YAe(e),this.toolbar=new oc(e,{shouldGroupWhenFull:r.shouldToolbarGroupWhenFull}),r.useMenuBar&&(this.menuBarView=new m7(e)),this.editable=new qAe(e,i,void 0,{label:r.label})}render(){super.render(),this.menuBarView?this.stickyPanel.content.addMany([this.menuBarView,this.toolbar]):this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}class Pxe extends MT(qf){constructor(e,i={}){if(!Iw(e)&&i.initialData!==void 0)throw new we("editor-create-initial-data",null);super(i);y(this,"ui");this.config.define("menuBar.isVisible",!1),this.config.get("initialData")===void 0&&this.config.set("initialData",xxe(e)),Iw(e)&&(this.sourceElement=e),this.model.document.createRoot();const r=!this.config.get("toolbar.shouldNotGroupWhenFull"),s=this.config.get("menuBar"),o=new Ixe(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:r,useMenuBar:s.isVisible,label:this.config.get("label")});this.ui=new Axe(this,o),MCe(this)}static get editorName(){return"ClassicEditor"}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(e,i={}){return new Promise(r=>{const s=new this(e,i);r(s.initPlugins().then(()=>s.ui.init(Iw(e)?e:null)).then(()=>s.data.init(s.config.get("initialData"))).then(()=>s.fire("ready")).then(()=>s))})}}function xxe(n){return Iw(n)?N_e(n):n}function Iw(n){return vu(n)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Oxe extends Nt{constructor(t){super(t),this.affectsData=!1}execute(){const t=this.editor.model,e=t.document.selection;let i=t.schema.getLimitElement(e);if(e.containsEntireContent(i)||!AL(t.schema,i))do if(i=i.parent,!i)return;while(!AL(t.schema,i));t.change(r=>{r.setSelection(i,"in")})}}function AL(n,t){return n.isLimit(t)&&(n.checkChild(t,"$text")||n.checkChild(t,"paragraph"))}const Rxe=I0("Ctrl+A");class Vxe extends Ne{static get pluginName(){return"SelectAllEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t,r=t.editing.view.document;t.commands.add("selectAll",new Oxe(t)),this.listenTo(r,"keydown",(s,o)=>{Vd(o)===Rxe&&(t.execute("selectAll"),o.preventDefault())}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Select all"),keystroke:"CTRL+A"}]})}}class Dxe extends Ne{static get pluginName(){return"SelectAllUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("selectAll",()=>{const e=this._createButton(wt);return e.set({tooltip:!0}),e}),t.ui.componentFactory.add("menuBar:selectAll",()=>this._createButton(Ti))}_createButton(t){const e=this.editor,i=e.locale,r=e.commands.get("selectAll"),s=new t(e.locale),o=i.t;return s.set({label:o("Select all"),icon:OTe,keystroke:"Ctrl+A"}),s.bind("isEnabled").to(r,"isEnabled"),this.listenTo(s,"execute",()=>{e.execute("selectAll"),e.editing.view.focus()}),s}}class Nxe extends Ne{static get requires(){return[Vxe,Dxe]}static get pluginName(){return"SelectAll"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class F7 extends Nt{constructor(e){super(e);y(this,"_stack",[]);y(this,"_createdBatches",new WeakSet);this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(e.data,"set",(i,r)=>{r[1]={...r[1]};const s=r[1];s.batchType||(s.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(e.data,"set",(i,r)=>{r[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(e){const i=this.editor.model.document.selection,r={ranges:i.hasOwnRange?Array.from(i.getRanges()):[],isBackward:i.isBackward};this._stack.push({batch:e,selection:r}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(e,i,r){const s=this.editor.model,o=s.document,a=[],l=e.map(u=>u.getTransformedByOperations(r)),c=l.flat();for(const u of l){const d=u.filter(f=>f.root!=o.graveyard).filter(f=>!Mxe(f,c));d.length&&(Lxe(d),a.push(d[0]))}a.length&&s.change(u=>{u.setSelection(a,{backward:i})})}_undo(e,i){const r=this.editor.model,s=r.document;this._createdBatches.add(i);const o=e.operations.slice().filter(a=>a.isDocumentOperation);o.reverse();for(const a of o){const l=a.baseVersion+1,c=Array.from(s.history.getOperations(l)),d=eEe([a.getReversed()],c,{useRelations:!0,document:this.editor.model.document,forceWeakRemove:!0}).operationsA;for(let f of d){const h=f.affectedSelectable;h&&!r.canEditAt(h)&&(f=new br(f.baseVersion)),i.addOperation(f),r.applyOperation(f),s.history.setOperationAsUndone(a,f)}}}}function Lxe(n){n.sort((t,e)=>t.start.isBefore(e.start)?-1:1);for(let t=1;t<n.length;t++){const i=n[t-1].getJoined(n[t],!0);i&&(t--,n.splice(t,2,i))}}function Mxe(n,t){return t.some(e=>e!==n&&e.containsRange(n,!0))}class $xe extends F7{execute(t=null){const e=t?this._stack.findIndex(s=>s.batch==t):this._stack.length-1,i=this._stack.splice(e,1)[0],r=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(r,()=>{this._undo(i.batch,r);const s=this.editor.model.document.history.getOperations(i.batch.baseVersion);this._restoreSelection(i.selection.ranges,i.selection.isBackward,s)}),this.fire("revert",i.batch,r),this.refresh()}}class Bxe extends F7{execute(){const t=this._stack.pop(),e=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(e,()=>{const r=t.batch.operations[t.batch.operations.length-1].baseVersion+1,s=this.editor.model.document.history.getOperations(r);this._restoreSelection(t.selection.ranges,t.selection.isBackward,s),this._undo(t.batch,e)}),this.refresh()}}class Fxe extends Ne{constructor(){super(...arguments);y(this,"_undoCommand");y(this,"_redoCommand");y(this,"_batchRegistry",new WeakSet)}static get pluginName(){return"UndoEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=e.t;this._undoCommand=new $xe(e),this._redoCommand=new Bxe(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",(r,s)=>{const o=s[0];if(!o.isDocumentOperation)return;const a=o.batch,l=this._redoCommand.createdBatches.has(a),c=this._undoCommand.createdBatches.has(a);this._batchRegistry.has(a)||(this._batchRegistry.add(a),a.isUndoable&&(l?this._undoCommand.addBatch(a):c||(this._undoCommand.addBatch(a),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(r,s,o)=>{this._redoCommand.addBatch(o)}),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:i("Undo"),keystroke:"CTRL+Z"},{label:i("Redo"),keystroke:[["CTRL+Y"],["CTRL+SHIFT+Z"]]}]})}}class Uxe extends Ne{static get pluginName(){return"UndoUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale,i=t.t,r=e.uiLanguageDirection=="ltr"?vN:gN,s=e.uiLanguageDirection=="ltr"?gN:vN;this._addButtonsToFactory("undo",i("Undo"),"CTRL+Z",r),this._addButtonsToFactory("redo",i("Redo"),"CTRL+Y",s)}_addButtonsToFactory(t,e,i,r){const s=this.editor;s.ui.componentFactory.add(t,()=>{const o=this._createButton(wt,t,e,i,r);return o.set({tooltip:!0}),o}),s.ui.componentFactory.add("menuBar:"+t,()=>this._createButton(Ti,t,e,i,r))}_createButton(t,e,i,r,s){const o=this.editor,a=o.locale,l=o.commands.get(e),c=new t(a);return c.set({label:i,icon:s,keystroke:r}),c.bind("isEnabled").to(l,"isEnabled"),this.listenTo(c,"execute",()=>{o.execute(e),o.editing.view.focus()}),c}}class PP extends Ne{static get requires(){return[Fxe,Uxe]}static get pluginName(){return"Undo"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class zxe extends Ne{static get requires(){return[$Se,SP,Vv,Nxe,I7,k7,PP]}static get pluginName(){return"Essentials"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Hxe extends dt{constructor(e){super(e);y(this,"children");y(this,"_findInputView");y(this,"_replaceInputView");y(this,"_findButtonView");y(this,"_findPrevButtonView");y(this,"_findNextButtonView");y(this,"_advancedOptionsCollapsibleView");y(this,"_matchCaseSwitchView");y(this,"_wholeWordsOnlySwitchView");y(this,"_replaceButtonView");y(this,"_replaceAllButtonView");y(this,"_inputsDivView");y(this,"_actionButtonsDivView");y(this,"_focusTracker");y(this,"_keystrokes");y(this,"_focusables");y(this,"focusCycler");const i=e.t;this.children=this.createCollection(),this.set("matchCount",0),this.set("highlightOffset",0),this.set("isDirty",!1),this.set("_areCommandsEnabled",{}),this.set("_resultsCounterText",""),this.set("_matchCase",!1),this.set("_wholeWordsOnly",!1),this.bind("_searchResultsFound").to(this,"matchCount",this,"isDirty",(r,s)=>r>0&&!s),this._findInputView=this._createInputField(i("Find in text…")),this._findPrevButtonView=this._createButton({label:i("Previous result"),class:"ck-button-prev",icon:sc,keystroke:"Shift+F3",tooltip:!0}),this._findNextButtonView=this._createButton({label:i("Next result"),class:"ck-button-next",icon:sc,keystroke:"F3",tooltip:!0}),this._replaceInputView=this._createInputField(i("Replace with…"),"ck-labeled-field-replace"),this._inputsDivView=this._createInputsDiv(),this._matchCaseSwitchView=this._createMatchCaseSwitch(),this._wholeWordsOnlySwitchView=this._createWholeWordsOnlySwitch(),this._advancedOptionsCollapsibleView=this._createAdvancedOptionsCollapsible(),this._replaceAllButtonView=this._createButton({label:i("Replace all"),class:"ck-button-replaceall",withText:!0}),this._replaceButtonView=this._createButton({label:i("Replace"),class:"ck-button-replace",withText:!0}),this._findButtonView=this._createButton({label:i("Find"),class:"ck-button-find ck-button-action",withText:!0}),this._actionButtonsDivView=this._createActionButtonsDiv(),this._focusTracker=new Mn,this._keystrokes=new oi,this._focusables=new tr,this.focusCycler=new ur({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this._keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.addMany([this._inputsDivView,this._advancedOptionsCollapsibleView,this._actionButtonsDivView]),this.setTemplate({tag:"form",attributes:{class:["ck","ck-find-and-replace-form"],tabindex:"-1"},children:this.children})}render(){super.render(),bl({view:this}),this._initFocusCycling(),this._initKeystrokeHandling()}destroy(){super.destroy(),this._focusTracker.destroy(),this._keystrokes.destroy()}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}reset(){this._findInputView.errorText=null,this.isDirty=!0}get _textToFind(){return this._findInputView.fieldView.element.value}get _textToReplace(){return this._replaceInputView.fieldView.element.value}_createInputsDiv(){const e=this.locale,i=e.t,r=new dt(e);return this._findInputView.fieldView.on("input",()=>{this.isDirty=!0}),this._findPrevButtonView.delegate("execute").to(this,"findPrevious"),this._findNextButtonView.delegate("execute").to(this,"findNext"),this._findPrevButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",({findPrevious:s})=>s),this._findNextButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",({findNext:s})=>s),this._injectFindResultsCounter(),this._replaceInputView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replace:s},o)=>s&&o),this._replaceInputView.bind("infoText").to(this._replaceInputView,"isEnabled",this._replaceInputView,"isFocused",(s,o)=>s||!o?"":i("Tip: Find some text first in order to replace it.")),r.setTemplate({tag:"div",attributes:{class:["ck","ck-find-and-replace-form__inputs"]},children:[this._findInputView,this._findPrevButtonView,this._findNextButtonView,this._replaceInputView]}),r}_onFindButtonExecute(){if(!this._textToFind){const e=this.t;this._findInputView.errorText=e("Text to find must not be empty.");return}this.isDirty=!1,this.fire("findNext",{searchText:this._textToFind,matchCase:this._matchCase,wholeWords:this._wholeWordsOnly})}_injectFindResultsCounter(){const e=this.locale,i=e.t,r=this.bindTemplate,s=new dt(this.locale);this.bind("_resultsCounterText").to(this,"highlightOffset",this,"matchCount",(a,l)=>i("%0 of %1",[a,l])),s.setTemplate({tag:"span",attributes:{class:["ck","ck-results-counter",r.if("isDirty","ck-hidden")]},children:[{text:r.to("_resultsCounterText")}]});const o=()=>{const a=this._findInputView.fieldView.element;if(!a||!dl(a))return;const l=new It(s.element).width,c=e.uiLanguageDirection==="ltr"?"paddingRight":"paddingLeft";l?a.style[c]=`calc( 2 * var(--ck-spacing-standard) + ${l}px )`:a.style[c]=""};this.on("change:_resultsCounterText",o,{priority:"low"}),this.on("change:isDirty",o,{priority:"low"}),this._findInputView.template.children[0].children.push(s)}_createAdvancedOptionsCollapsible(){const e=this.locale.t,i=new gP(this.locale,[this._matchCaseSwitchView,this._wholeWordsOnlySwitchView]);return i.set({label:e("Advanced options"),isCollapsed:!0}),i}_createActionButtonsDiv(){const e=new dt(this.locale);return this._replaceButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replace:i},r)=>i&&r),this._replaceAllButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replaceAll:i},r)=>i&&r),this._replaceButtonView.on("execute",()=>{this.fire("replace",{searchText:this._textToFind,replaceText:this._textToReplace})}),this._replaceAllButtonView.on("execute",()=>{this.fire("replaceAll",{searchText:this._textToFind,replaceText:this._textToReplace}),this.focus()}),this._findButtonView.on("execute",this._onFindButtonExecute.bind(this)),e.setTemplate({tag:"div",attributes:{class:["ck","ck-find-and-replace-form__actions"]},children:[this._replaceAllButtonView,this._replaceButtonView,this._findButtonView]}),e}_createMatchCaseSwitch(){const e=this.locale.t,i=new Md(this.locale);return i.set({label:e("Match case"),withText:!0}),i.bind("isOn").to(this,"_matchCase"),i.on("execute",()=>{this._matchCase=!this._matchCase,this.isDirty=!0}),i}_createWholeWordsOnlySwitch(){const e=this.locale.t,i=new Md(this.locale);return i.set({label:e("Whole words only"),withText:!0}),i.bind("isOn").to(this,"_wholeWordsOnly"),i.on("execute",()=>{this._wholeWordsOnly=!this._wholeWordsOnly,this.isDirty=!0}),i}_initFocusCycling(){[this._findInputView,this._findPrevButtonView,this._findNextButtonView,this._replaceInputView,this._advancedOptionsCollapsibleView.buttonView,this._matchCaseSwitchView,this._wholeWordsOnlySwitchView,this._replaceAllButtonView,this._replaceButtonView,this._findButtonView].forEach(i=>{this._focusables.add(i),this._focusTracker.add(i.element)})}_initKeystrokeHandling(){const e=r=>r.stopPropagation(),i=r=>{r.stopPropagation(),r.preventDefault()};this._keystrokes.listenTo(this.element),this._keystrokes.set("f3",r=>{i(r),this._findNextButtonView.fire("execute")}),this._keystrokes.set("shift+f3",r=>{i(r),this._findPrevButtonView.fire("execute")}),this._keystrokes.set("enter",r=>{const s=r.target;s===this._findInputView.fieldView.element?(this._areCommandsEnabled.findNext?this._findNextButtonView.fire("execute"):this._findButtonView.fire("execute"),i(r)):s===this._replaceInputView.fieldView.element&&!this.isDirty&&(this._replaceButtonView.fire("execute"),i(r))}),this._keystrokes.set("shift+enter",r=>{r.target===this._findInputView.fieldView.element&&(this._areCommandsEnabled.findPrevious?this._findPrevButtonView.fire("execute"):this._findButtonView.fire("execute"),i(r))}),this._keystrokes.set("arrowright",e),this._keystrokes.set("arrowleft",e),this._keystrokes.set("arrowup",e),this._keystrokes.set("arrowdown",e)}_createButton(e){const i=new wt(this.locale);return i.set(e),i}_createInputField(e,i){const r=new Ri(this.locale,Ss);return r.label=e,r.class=i,r}}class Wxe extends Ne{constructor(e){super(e);y(this,"formView");e.config.define("findAndReplace.uiType","dialog"),this.formView=null}static get requires(){return[Ld]}static get pluginName(){return"FindAndReplaceUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=e.config.get("findAndReplace.uiType")==="dropdown",r=e.commands.get("find"),s=this.editor.t;e.ui.componentFactory.add("findAndReplace",()=>{let o;return i?(o=this._createDropdown(),o.bind("isEnabled").to(r)):o=this._createDialogButtonForToolbar(),e.keystrokes.set("Ctrl+F",(a,l)=>{if(r.isEnabled){if(o instanceof qy){const c=o.buttonView;c.isOn||c.fire("execute")}else o.isOn?e.plugins.get("Dialog").view.focus():o.fire("execute");l()}}),o}),i||e.ui.componentFactory.add("menuBar:findAndReplace",()=>this._createDialogButtonForMenuBar()),e.accessibility.addKeystrokeInfos({keystrokes:[{label:s("Find in the document"),keystroke:"CTRL+F"}]})}_createDropdown(){const e=this.editor,i=e.locale.t,r=as(e.locale);return r.once("change:isOpen",()=>{this.formView=this._createFormView(),this.formView.children.add(new wl(e.locale,{label:i("Find and replace")}),0),r.panelView.children.add(this.formView)}),r.on("change:isOpen",(s,o,a)=>{a?this._setupFormView():this.fire("searchReseted")},{priority:"low"}),r.buttonView.set({icon:fN,label:i("Find and replace"),keystroke:"CTRL+F",tooltip:!0}),r}_createDialogButtonForToolbar(){const e=this.editor,i=this._createButton(wt),r=e.plugins.get("Dialog");return i.set({tooltip:!0}),i.bind("isOn").to(r,"id",s=>s==="findAndReplace"),i.on("execute",()=>{i.isOn?r.hide():this._showDialog()}),i}_createDialogButtonForMenuBar(){const e=this._createButton(Ti),i=this.editor.plugins.get("Dialog"),r=this.editor.plugins.get("Dialog");return e.set({role:"menuitemcheckbox",isToggleable:!0}),e.bind("isOn").to(r,"id",s=>s==="findAndReplace"),e.on("execute",()=>{if(i.id==="findAndReplace"){i.hide();return}this._showDialog()}),e}_createButton(e){const i=this.editor,r=i.commands.get("find"),s=new e(i.locale),o=i.locale.t;return s.bind("isEnabled").to(r),s.set({icon:fN,label:o("Find and replace"),keystroke:"CTRL+F"}),s}_showDialog(){const e=this.editor,i=e.plugins.get("Dialog"),r=e.locale.t;this.formView||(this.formView=this._createFormView()),i.show({id:"findAndReplace",title:r("Find and replace"),content:this.formView,position:vs.EDITOR_TOP_SIDE,onShow:()=>{this._setupFormView()},onHide:()=>{this.fire("searchReseted")}})}_createFormView(){const e=this.editor,i=new(Nd(Hxe))(e.locale),r=e.commands,o=this.editor.plugins.get("FindAndReplaceEditing").state;i.bind("highlightOffset").to(o,"highlightedOffset"),i.listenTo(o.results,"change",()=>{i.matchCount=o.results.length});const a=r.get("findNext"),l=r.get("findPrevious"),c=r.get("replace"),u=r.get("replaceAll");return i.bind("_areCommandsEnabled").to(a,"isEnabled",l,"isEnabled",c,"isEnabled",u,"isEnabled",(d,f,h,g)=>({findNext:d,findPrevious:f,replace:h,replaceAll:g})),i.delegate("findNext","findPrevious","replace","replaceAll").to(this),i.on("change:isDirty",(d,f,h)=>{h&&this.fire("searchReseted")}),i}_setupFormView(){this.formView.disableCssTransitions(),this.formView.reset(),this.formView._findInputView.fieldView.select(),this.formView.enableCssTransitions()}}class jxe extends Nt{constructor(e,i){super(e);y(this,"_state");this.isEnabled=!0,this.affectsData=!1,this._state=i}execute(e,{matchCase:i,wholeWords:r}={}){const{editor:s}=this,{model:o}=s,a=s.plugins.get("FindAndReplaceUtils");let l,c="";typeof e=="string"?l=(...f)=>({results:a.findByTextCallback(e,{matchCase:i,wholeWords:r})(...f),searchText:e}):l=e;const u=l;l=(...f)=>{const h=u(...f);return h&&"searchText"in h&&(c=h.searchText),h};const d=o.document.getRootNames().reduce((f,h)=>a.updateFindResultFromRange(o.createRangeIn(o.document.getRoot(h)),o,l,f),null);return this._state.clear(o),this._state.results.addMany(d),this._state.highlightedResult=d.get(0),this._state.searchText=c,l&&(this._state.lastSearchCallback=l),this._state.matchCase=!!i,this._state.matchWholeWords=!!r,{results:d,findCallback:l}}}class qxe extends Wn(){constructor(t){super(),this.set("results",new cr),this.set("highlightedResult",null),this.set("highlightedOffset",0),this.set("searchText",""),this.set("replaceText",""),this.set("lastSearchCallback",null),this.set("matchCase",!1),this.set("matchWholeWords",!1),this.results.on("change",(e,{removed:i,index:r})=>{if(Array.from(i).length){let s=!1;if(t.change(o=>{for(const a of i)this.highlightedResult===a&&(s=!0),t.markers.has(a.marker.name)&&o.removeMarker(a.marker)}),s){const o=r>=this.results.length?0:r;this.highlightedResult=this.results.get(o)}}}),this.on("change:highlightedResult",()=>{this.refreshHighlightOffset(t)})}clear(t){this.searchText="",t.change(e=>{if(this.highlightedResult){const i=this.highlightedResult.marker.name.split(":")[1],r=t.markers.get(`findResultHighlighted:${i}`);r&&e.removeMarker(r)}[...this.results].forEach(({marker:i})=>{e.removeMarker(i)})}),this.results.clear()}refreshHighlightOffset(t){const{highlightedResult:e,results:i}=this;e?this.highlightedOffset=U7(t,[...i]).indexOf(e)+1:this.highlightedOffset=0}}function U7(n,t){const e={before:-1,same:0,after:1,different:1};return n.document.getRootNames().flatMap(i=>t.filter(r=>r.marker.getStart().root.rootName===i).sort((r,s)=>e[r.marker.getStart().compareWith(s.marker.getStart())]))}class z7 extends Nt{constructor(e,i){super(e);y(this,"_state");this.isEnabled=!0,this._state=i,this._isEnabledBasedOnSelection=!1}_replace(e,i){const{model:r}=this.editor,s=i.marker.getRange();r.canEditAt(s)&&r.change(o=>{if(s.root.rootName==="$graveyard"){this._state.results.remove(i);return}let a={};for(const l of s.getItems())if(l.is("$text")||l.is("$textProxy")){a=l.getAttributes();break}r.insertContent(o.createText(e,a),s),this._state.results.has(i)&&this._state.results.remove(i)})}}class Gxe extends z7{execute(t,e){const i=Math.max(this._state.highlightedOffset-1,0);if(this._replace(t,e),this._state.results.length){const r=U7(this.editor.model,[...this._state.results]);this._state.highlightedResult=r[i%r.length]}}}class Kxe extends z7{execute(t,e){const{editor:i}=this,{model:r}=i,s=i.plugins.get("FindAndReplaceUtils"),o=e instanceof cr?e:r.document.getRootNames().reduce((a,l)=>s.updateFindResultFromRange(r.createRangeIn(r.document.getRoot(l)),r,s.findByTextCallback(e,this._state),a),null);o.length&&r.change(()=>{[...o].forEach(a=>{this._replace(t,a)})})}}class H7 extends Nt{constructor(e,i){super(e);y(this,"_state");this.affectsData=!1,this._state=i,this.isEnabled=!1,this.listenTo(this._state.results,"change",()=>{this.isEnabled=this._state.results.length>1})}refresh(){this.isEnabled=this._state.results.length>1}execute(){const e=this._state.results,i=e.getIndex(this._state.highlightedResult),r=i+1>=e.length?0:i+1;this._state.highlightedResult=this._state.results.get(r)}}class Yxe extends H7{execute(){const e=this._state.results.getIndex(this._state.highlightedResult),i=e-1<0?this._state.results.length-1:e-1;this._state.highlightedResult=this._state.results.get(i)}}class Qxe extends Ne{static get pluginName(){return"FindAndReplaceUtils"}static get isOfficialPlugin(){return!0}updateFindResultFromRange(t,e,i,r){const s=r||new cr,o=a=>s.find(l=>{const{marker:c}=l,u=c.getRange(),d=a.getRange();return u.isEqual(d)});return e.change(a=>{[...t].forEach(({type:l,item:c})=>{if(l==="elementStart"&&e.schema.checkChild(c,"$text")){let u=i({item:c,text:this.rangeToText(e.createRangeIn(c))});if(!u)return;"results"in u&&(u=u.results),u.forEach(d=>{const f=`findResult:${cs()}`,h=a.addMarker(f,{usingOperation:!1,affectsData:!1,range:a.createRange(a.createPositionAt(c,d.start),a.createPositionAt(c,d.end))}),g=Zxe(s,h);o(h)||s.add({id:f,label:d.label,marker:h},g)})}})}),s}rangeToText(t){return Array.from(t.getItems({shallow:!0})).reduce((e,i)=>i.is("$text")||i.is("$textProxy")?e+i.data:`${e}
`,"")}findByTextCallback(t,e){let i="gu";e.matchCase||(i+="i");let r=`(${ez(t)})`;if(e.wholeWords){const a="[^a-zA-ZÀ-ɏḀ-ỿ]";new RegExp("^"+a).test(t)||(r=`(^|${a}|_)${r}`),new RegExp(a+"$").test(t)||(r=`${r}(?=_|${a}|$)`)}const s=new RegExp(r,i);function o({text:a}){return[...a.matchAll(s)].map(Jxe)}return o}}function Zxe(n,t){const e=n.find(({marker:i})=>t.getStart().isBefore(i.getStart()));return e?n.getIndex(e):n.length}function Jxe(n){const t=n.length-1;let e=n.index;return n.length===3&&(e+=n[1].length),{label:n[t],start:e,end:e+n[t].length}}const Xxe="ck-find-result_selected";class eOe extends Ne{constructor(){super(...arguments);y(this,"state");y(this,"_onDocumentChange",()=>{const e=new Set,i=new Set,r=this.editor.model,{results:s}=this.state,o=r.document.differ.getChanges(),a=r.document.differ.getChangedMarkers();o.forEach(u=>{u.position&&(u.name==="$text"||u.position.nodeAfter&&r.schema.isInline(u.position.nodeAfter)?(e.add(u.position.parent),[...r.markers.getMarkersAtPosition(u.position)].forEach(d=>{i.add(d.name)})):u.type==="insert"&&u.position.nodeAfter&&e.add(u.position.nodeAfter))}),a.forEach(({name:u,data:{newRange:d}})=>{d&&d.start.root.rootName==="$graveyard"&&i.add(u)}),e.forEach(u=>{[...r.markers.getMarkersIntersectingRange(r.createRangeIn(u))].forEach(f=>i.add(f.name))}),i.forEach(u=>{s.has(u)&&(s.get(u)===this.state.highlightedResult&&(this.state.highlightedResult=null),s.remove(u))});const l=[],c=this.editor.plugins.get("FindAndReplaceUtils");e.forEach(u=>{const d=c.updateFindResultFromRange(r.createRangeOn(u),r,this.state.lastSearchCallback,s);l.push(...d)}),a.forEach(u=>{if(u.data.newRange){const d=c.updateFindResultFromRange(u.data.newRange,r,this.state.lastSearchCallback,s);l.push(...d)}}),!this.state.highlightedResult&&l.length?this.state.highlightedResult=l[0]:this.state.refreshHighlightOffset(r)})}static get requires(){return[Qxe]}static get pluginName(){return"FindAndReplaceEditing"}static get isOfficialPlugin(){return!0}init(){this.state=new qxe(this.editor.model),this.set("_isSearchActive",!1),this._defineConverters(),this._defineCommands(),this.listenTo(this.state,"change:highlightedResult",(r,s,o,a)=>{const{model:l}=this.editor;l.change(c=>{if(a){const u=a.marker.name.split(":")[1],d=l.markers.get(`findResultHighlighted:${u}`);d&&c.removeMarker(d)}if(o){const u=o.marker.name.split(":")[1];c.addMarker(`findResultHighlighted:${u}`,{usingOperation:!1,affectsData:!1,range:o.marker.getRange()})}})});/* istanbul ignore next -- @preserve */const i=go(((r,s,o)=>{if(o){const a=this.editor.editing.view.domConverter,l=this.editor.editing.mapper.toViewRange(o.marker.getRange());Ez({target:a.viewRangeToDom(l),viewportOffset:40})}}).bind(this),32);this.listenTo(this.state,"change:highlightedResult",i,{priority:"low"}),this.listenTo(this.editor,"destroy",i.cancel),this.on("change:_isSearchActive",(r,s,o)=>{o?this.listenTo(this.editor.model.document,"change:data",this._onDocumentChange):this.stopListening(this.editor.model.document,"change:data",this._onDocumentChange)})}find(e,i){return this._isSearchActive=!0,this.editor.execute("find",e,i),this.state.results}stop(){this.state.clear(this.editor.model),this._isSearchActive=!1}_defineCommands(){this.editor.commands.add("find",new jxe(this.editor,this.state)),this.editor.commands.add("findNext",new H7(this.editor,this.state)),this.editor.commands.add("findPrevious",new Yxe(this.editor,this.state)),this.editor.commands.add("replace",new Gxe(this.editor,this.state)),this.editor.commands.add("replaceAll",new Kxe(this.editor,this.state))}_defineConverters(){const{editor:e}=this;e.conversion.for("editingDowncast").markerToHighlight({model:"findResult",view:({markerName:i})=>{const[,r]=i.split(":");return{name:"span",classes:["ck-find-result"],attributes:{"data-find-result":r}}}}),e.conversion.for("editingDowncast").markerToHighlight({model:"findResultHighlighted",view:({markerName:i})=>{const[,r]=i.split(":");return{name:"span",classes:[Xxe],attributes:{"data-find-result":r}}}})}}class tOe extends Ne{static get requires(){return[eOe,Wxe]}static get pluginName(){return"FindAndReplace"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.plugins.get("FindAndReplaceUI"),e=this.editor.plugins.get("FindAndReplaceEditing"),i=e.state;t.on("findNext",(r,s)=>{s?(i.searchText=s.searchText,e.find(s.searchText,s)):this.editor.execute("findNext")}),t.on("findPrevious",(r,s)=>{s&&i.searchText!==s.searchText?e.find(s.searchText):this.editor.execute("findPrevious")}),t.on("replace",(r,s)=>{i.searchText!==s.searchText&&e.find(s.searchText);const o=i.highlightedResult;o&&this.editor.execute("replace",s.replaceText,o)}),t.on("replaceAll",(r,s)=>{i.searchText!==s.searchText&&e.find(s.searchText),this.editor.execute("replaceAll",s.replaceText,i.results)}),t.on("searchReseted",()=>{i.clear(this.editor.model),e.stop()})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const nOe=28;class xP{constructor(t){y(this,"_placeholderMap");y(this,"_wrapper",null);y(this,"_document");y(this,"_annotationsUIsData",null);y(this,"_paginationBodyCollection",null);y(this,"_sourceEditingCallback",(t,e,i)=>{this.getWrapper().querySelector(".ck-fullscreen__document-outline-header").style.display=i?"none":""});y(this,"_hiddenElements",new Map);y(this,"_savedAncestorsScrollPositions",new Map);y(this,"_showRevisionViewerCallback",null);y(this,"_closeRevisionViewerCallback",null);y(this,"updateDialogPositionCallback",this._updateDialogPosition.bind(this));this._placeholderMap=new Map,t.plugins.has("RevisionHistory")&&(this._showRevisionViewerCallback=t.config.get("revisionHistory").showRevisionViewerCallback,this._closeRevisionViewerCallback=t.config.get("revisionHistory").closeRevisionViewerCallback),this._editor=t,this._document=this._editor.sourceElement?this._editor.sourceElement.ownerDocument:at.document,this._editor.config.define("fullscreen.container",this._document.body),t.on("destroy",()=>{this._wrapper&&this.destroy()})}moveToFullscreen(t,e){const i=or(this._document,"div");i.setAttribute("data-ck-fullscreen-placeholder",e),t.replaceWith(i),this.getWrapper().querySelector(`[data-ck-fullscreen="${e}"]`).append(t),this._placeholderMap.set(e,{placeholderElement:i,movedElement:t})}restoreMovedElementLocation(t){if(!this._placeholderMap.has(t))return;const{placeholderElement:e,movedElement:i}=this._placeholderMap.get(t);e.replaceWith(i),e.remove(),this._placeholderMap.delete(t),this._placeholderMap.size===0&&this._destroyContainer()}getWrapper(){return this._wrapper||(this._wrapper=or(this._document,"div",{class:"ck ck-fullscreen__main-wrapper"}),this._wrapper.innerHTML=`
				<div class="ck ck-fullscreen__top-wrapper ck-reset_all">
					<div class="ck ck-fullscreen__menu-bar" data-ck-fullscreen="menu-bar"></div>
					<div class="ck ck-fullscreen__toolbar" data-ck-fullscreen="toolbar"></div>
				</div>
				<div class="ck ck-fullscreen__editable-wrapper">
					<div class="ck ck-fullscreen__sidebar ck-fullscreen__left-sidebar" data-ck-fullscreen="left-sidebar"></div>
					<div class="ck ck-fullscreen__editable" data-ck-fullscreen="editable">
						<div class="ck ck-fullscreen__pagination-view" data-ck-fullscreen="pagination-view"></div>
					</div>
					<div class="ck ck-fullscreen__sidebar ck-fullscreen__right-sidebar" data-ck-fullscreen="right-sidebar"></div>
				</div>
				<div class="ck ck-fullscreen__bottom-wrapper">
					<div class="ck ck-fullscreen__body-wrapper" data-ck-fullscreen="body-wrapper"></div>
				</div>
			`,this._editor.config.get("fullscreen.container").appendChild(this._wrapper)),this._wrapper}enable(){this._saveAncestorsScrollPositions(this._editor.ui.getEditableElement()),this.defaultOnEnter(),this._editor.config.get("fullscreen.container")===this._document.body&&(this._document.body.classList.add("ck-fullscreen"),this._document.body.parentElement.classList.add("ck-fullscreen")),this._editor.plugins.has("Dialog")&&this._registerFullscreenDialogPositionAdjustments();/* istanbul ignore if -- @preserve */this._editor.plugins.has("PresenceListUI")&&this._generatePresenceListContainer();/* istanbul ignore if -- @preserve */this._editor.plugins.has("DocumentOutlineUI")&&this._generateDocumentOutlineContainer();/* istanbul ignore next -- @preserve */if(this._editor.plugins.has("Pagination")&&this._editor.plugins.get("Pagination").isEnabled){const t=this._editor.plugins.get("PaginationRenderer");t.setupScrollableAncestor(),this._paginationBodyCollection=new Hy(this._editor.locale),this._paginationBodyCollection.attachToDom(),t.linesRepository.setViewCollection(this._paginationBodyCollection),this._editor.once("destroy",()=>{this._paginationBodyCollection.detachFromDom()}),this.moveToFullscreen(this._paginationBodyCollection.bodyCollectionContainer,"body-wrapper")}/* istanbul ignore if -- @preserve */if(this._editor.plugins.has("AnnotationsUIs")&&this._overrideAnnotationsUIs(),this._editor.plugins.has("RevisionHistory")){/* istanbul ignore if -- @preserve */this._editor.plugins.get("RevisionHistory").isRevisionViewerOpen&&this._editor.config.get("revisionHistory.closeRevisionViewerCallback")(),this._overrideRevisionHistoryCallbacks()}this._editor.plugins.has("SourceEditing")&&this._editor.plugins.has("DocumentOutlineUI")&&this._editor.plugins.get("SourceEditing").on("change:isSourceEditingMode",this._sourceEditingCallback);for(const t of this._editor.config.get("fullscreen.container").children)t!==this._wrapper&&!t.classList.contains("ck-body-wrapper")&&!t.classList.contains("ckbox-wrapper")&&t.style.display!=="none"&&(this._hiddenElements.set(t,t.style.display),t.style.display="none");this._editor.config.get("fullscreen.onEnterCallback")&&this._editor.config.get("fullscreen.onEnterCallback")(this.getWrapper())}disable(){var t;this._editor.config.get("fullscreen.onLeaveCallback")&&this._editor.config.get("fullscreen.onLeaveCallback")(this.getWrapper()),this._document.body.classList.remove("ck-fullscreen"),this._document.body.parentElement.classList.remove("ck-fullscreen");/* istanbul ignore if -- @preserve */this._editor.plugins.has("DocumentOutlineUI")&&this._restoreDocumentOutlineDefaultContainer();/* istanbul ignore if -- @preserve */this._annotationsUIsData&&this._restoreAnnotationsUIs(),this._editor.plugins.has("RevisionHistory")&&this._restoreRevisionHistoryCallbacks(),this._editor.plugins.has("SourceEditing")&&this._editor.plugins.has("DocumentOutlineUI")&&this._editor.plugins.get("SourceEditing").off("change:isSourceEditingMode",this._sourceEditingCallback);for(const e of this._placeholderMap.keys())this.restoreMovedElementLocation(e);this._destroyContainer(),this._editor.ui.view.toolbar&&this._editor.ui.view.toolbar.switchBehavior(this._editor.config.get("toolbar.shouldNotGroupWhenFull")===!0?"static":"dynamic");for(const[e,i]of this._savedAncestorsScrollPositions)e.scrollTo({left:i.scrollLeft,top:i.scrollTop,behavior:"instant"});this._savedAncestorsScrollPositions.clear();/* istanbul ignore next -- @preserve */if(this._editor.plugins.has("Pagination")&&this._editor.plugins.get("Pagination").isEnabled){const e=this._editor.plugins.get("PaginationRenderer");e.setupScrollableAncestor(),e.linesRepository.setViewCollection(this._editor.ui.view.body),this._paginationBodyCollection.detachFromDom(),(t=this._paginationBodyCollection)==null||t.destroy()}this._editor.plugins.has("Dialog")&&this._unregisterFullscreenDialogPositionAdjustments()}destroy(){for(const{placeholderElement:t,movedElement:e}of this._placeholderMap.values())t.remove(),e.remove();this._destroyContainer(),this._document.body.classList.remove("ck-fullscreen"),this._document.body.parentElement.classList.remove("ck-fullscreen")}defaultOnEnter(){return this.getWrapper()}_destroyContainer(){if(this._wrapper){this._wrapper.remove(),this._wrapper=null;for(const[t,e]of this._hiddenElements)t.style.display=e;this._hiddenElements.clear()}}_generatePresenceListContainer(){const t=this._editor.t,e=or(document,"div",{class:"ck ck-fullscreen__left-sidebar-item"});e.innerHTML=`
			<div class="ck ck-fullscreen__left-sidebar-header"></div>
			<div class="ck ck-fullscreen__presence-list" data-ck-fullscreen="presence-list"></div>
		`,e.firstElementChild.innerText=t("Connected users"),document.querySelector('[data-ck-fullscreen="left-sidebar-sticky"]')||document.querySelector('[data-ck-fullscreen="left-sidebar"]').appendChild(or(document,"div",{class:"ck ck-fullscreen__left-sidebar-sticky","data-ck-fullscreen":"left-sidebar-sticky"})),document.querySelector('[data-ck-fullscreen="left-sidebar-sticky"]').appendChild(e);const i=this._editor.plugins.get("PresenceListUI");this.moveToFullscreen(i.view.element,"presence-list")}_generateDocumentOutlineContainer(){const t=this._editor.t,e=or(document,"div",{class:"ck-fullscreen__left-sidebar-item ck-fullscreen__left-sidebar-item--no-margin"});e.innerHTML=`
			<div class="ck ck-fullscreen__left-sidebar-header ck-fullscreen__document-outline-header"></div>
		`,e.firstElementChild.innerText=t("Document outline");const i=or(document,"div",{class:"ck ck-fullscreen__left-sidebar-item ck-fullscreen__document-outline-wrapper"});i.innerHTML=`
			<div class="ck ck-fullscreen__document-outline" data-ck-fullscreen="document-outline"></div>
		`,document.querySelector('[data-ck-fullscreen="left-sidebar-sticky"]')||document.querySelector('[data-ck-fullscreen="left-sidebar"]').appendChild(or(document,"div",{class:"ck ck-fullscreen__left-sidebar-sticky","data-ck-fullscreen":"left-sidebar-sticky"})),document.querySelector('[data-ck-fullscreen="left-sidebar"]').appendChild(i),document.querySelector('[data-ck-fullscreen="left-sidebar-sticky"]').appendChild(e);const r=this._editor.plugins.get("DocumentOutlineUI");r.view.documentOutlineContainer=document.querySelector('[data-ck-fullscreen="left-sidebar"]'),this.moveToFullscreen(r.view.element,"document-outline")}_restoreDocumentOutlineDefaultContainer(){const t=this._editor.plugins.get("DocumentOutlineUI");t.view.documentOutlineContainer=t.view.element}_overrideAnnotationsUIs(){const t=this._editor.plugins.get("AnnotationsUIs");this._annotationsUIsData=new Map(t.uisData);const e=new Map;for(const[s,o]of[...this._annotationsUIsData])o.filter!==t.defaultFilter&&e.set(s,o.filter);t.deactivateAll();const i=this._editor.plugins.get("Sidebar");i.container?(r(),this.moveToFullscreen(i.container.firstElementChild,"right-sidebar"),i.setContainer(this.getWrapper().querySelector('[data-ck-fullscreen="right-sidebar"]'))):(i.setContainer(this.getWrapper().querySelector('[data-ck-fullscreen="right-sidebar"]')),r(),this.moveToFullscreen(i.container.firstElementChild,"right-sidebar"));function r(){e.has("wideSidebar")?t.activate("wideSidebar",e.get("wideSidebar")):e.size?t.activate("wideSidebar",s=>[...e.values()].some(o=>o(s))):t.switchTo("wideSidebar")}}_restoreAnnotationsUIs(){const t=this._editor.plugins.get("Sidebar"),e=t.context.config.get("sidebar.container");e&&t.setContainer(e);const i=this._editor.plugins.get("AnnotationsUIs");i.deactivateAll();for(const[r,s]of[...this._annotationsUIsData])i.activate(r,s.filter);this._annotationsUIsData=null}_overrideRevisionHistoryCallbacks(){/* istanbul ignore next -- @preserve */this._editor.config.set("revisionHistory.showRevisionViewerCallback",async()=>{const t=await this._showRevisionViewerCallback();return this._editor.plugins.has("DocumentOutlineUI")&&(this.getWrapper().querySelector(".ck-fullscreen__document-outline-header").style.display="none"),this.restoreMovedElementLocation("editable"),this.restoreMovedElementLocation("toolbar"),this.restoreMovedElementLocation("right-sidebar"),this._annotationsUIsData&&this._restoreAnnotationsUIs(),this._editor.ui.view.menuBarView&&this._editor.ui.view.menuBarView.disable(),this.moveToFullscreen(t.ui.getEditableElement(),"editable"),this.moveToFullscreen(t.ui.view.toolbar.element,"toolbar"),this.moveToFullscreen(this._editor.config.get("revisionHistory.viewerSidebarContainer"),"right-sidebar"),t});/* istanbul ignore next -- @preserve */this._editor.config.set("revisionHistory.closeRevisionViewerCallback",async()=>{this.restoreMovedElementLocation("toolbar"),this.restoreMovedElementLocation("editable"),this.restoreMovedElementLocation("right-sidebar"),this._editor.plugins.has("DocumentOutlineUI")&&(this.getWrapper().querySelector(".ck-fullscreen__document-outline-header").style.display=""),this.moveToFullscreen(this._editor.ui.getEditableElement(),"editable"),this.moveToFullscreen(this._editor.ui.view.toolbar.element,"toolbar"),await this._closeRevisionViewerCallback(),this._editor.plugins.has("AnnotationsUIs")&&this._overrideAnnotationsUIs(),this._editor.ui.view.menuBarView&&this._editor.ui.view.menuBarView.enable()})}_restoreRevisionHistoryCallbacks(){/* istanbul ignore next -- @preserve */this._editor.config.set("revisionHistory.showRevisionViewerCallback",async()=>this._showRevisionViewerCallback());/* istanbul ignore next -- @preserve */this._editor.config.set("revisionHistory.closeRevisionViewerCallback",async()=>this._closeRevisionViewerCallback())}_registerFullscreenDialogPositionAdjustments(){const t=this._editor.plugins.get("Dialog");this._setNewDialogPosition(),t.on("change:isOpen",this.updateDialogPositionCallback,{priority:"highest"})}_unregisterFullscreenDialogPositionAdjustments(){const t=this._editor.plugins.get("Dialog"),e=t.view;e&&e.position===null&&(e.position=vs.EDITOR_TOP_SIDE),e&&e.updatePosition(),t.off("change:isOpen",this.updateDialogPositionCallback)}_updateDialogPosition(t,e,i){i&&this._setNewDialogPosition()}_setNewDialogPosition(){const e=this._editor.plugins.get("Dialog").view;if(!e||e.position!==vs.EDITOR_TOP_SIDE)return;const i=new It(this._wrapper).getVisible(),r=new It(document.querySelector(".ck-fullscreen__editable")).getVisible(),s=new It(e.element.querySelector(".ck-dialog")).getVisible(),o=new It(document.querySelector(".ck-fullscreen__editable-wrapper")).excludeScrollbarsAndBorders().getVisible().width-new It(document.querySelector(".ck-fullscreen__editable-wrapper")).getVisible().width;i&&r&&s&&(e.position=null,e.moveTo(i.left+i.width-s.width-nOe+o,r.top))}_saveAncestorsScrollPositions(t){let e=t.parentElement;if(e)for(;e;){const i=e.style.overflowY||at.window.getComputedStyle(e).overflowY,r=e.style.overflowX||at.window.getComputedStyle(e).overflowX;i==="auto"||i==="scroll"||r==="auto"||r==="scroll"?this._savedAncestorsScrollPositions.set(e,{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}):e.tagName==="HTML"&&this._savedAncestorsScrollPositions.set(e,{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}),e=e.parentElement}}}class iOe extends xP{constructor(e){super(e);y(this,"_editor");this._editor=e}defaultOnEnter(){const e=this._editor.ui,i=e.view;/* istanbul ignore next -- @preserve */return this._editor.plugins.has("Pagination")&&this._editor.plugins.get("Pagination").isEnabled&&this.moveToFullscreen(e.getEditableElement().parentElement.querySelector(".ck-pagination-view"),"pagination-view"),this.moveToFullscreen(e.getEditableElement(),"editable"),this.moveToFullscreen(i.toolbar.element,"toolbar"),i.toolbar.switchBehavior(this._editor.config.get("fullscreen.toolbar.shouldNotGroupWhenFull")===!0?"static":"dynamic"),this.getWrapper().setAttribute("dir",i.element.getAttribute("dir")),this.getWrapper().classList.add("ck-rounded-corners"),this._editor.config.get("fullscreen.menuBar.isVisible")&&(i.menuBarView||(i.menuBarView=new m7(this._editor.locale),i.menuBarView.render(),e.initMenuBar(i.menuBarView)),this.moveToFullscreen(i.menuBarView.element,"menu-bar")),this.getWrapper()}}class rOe extends xP{constructor(e){super(e);y(this,"_editor");this._editor=e}defaultOnEnter(){/* istanbul ignore next -- @preserve */return this._editor.plugins.has("Pagination")&&this._editor.plugins.get("Pagination").isEnabled&&this.moveToFullscreen(this._editor.ui.getEditableElement().parentElement.querySelector(".ck-pagination-view"),"pagination-view"),this.moveToFullscreen(this._editor.ui.getEditableElement(),"editable"),this.moveToFullscreen(this._editor.ui.view.toolbar.element,"toolbar"),this._editor.ui.view.toolbar.switchBehavior(this._editor.config.get("fullscreen.toolbar.shouldNotGroupWhenFull")===!0?"static":"dynamic"),this._editor.config.get("fullscreen.menuBar.isVisible")&&this.moveToFullscreen(this._editor.ui.view.menuBarView.element,"menu-bar"),this.getWrapper()}}class sOe extends Nt{constructor(e){super(e);y(this,"fullscreenHandler");this.affectsData=!1,this.isEnabled=!0,this.value=!1,oOe(e)?this.fullscreenHandler=new iOe(e):aOe(e)?this.fullscreenHandler=new rOe(e):this.fullscreenHandler=new xP(e)}execute(){this.value?this._disableFullscreenMode():this._enableFullscreenMode()}_enableFullscreenMode(){this.fullscreenHandler.enable(),this.value=!0}_disableFullscreenMode(){this.fullscreenHandler.disable(),this.value=!1}}function oOe(n){return n.constructor.editorName==="ClassicEditor"}function aOe(n){return n.constructor.editorName==="DecoupledEditor"}class W7 extends Ne{static get pluginName(){return"FullscreenEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("fullscreen.menuBar.isVisible",!0),t.config.define("fullscreen.toolbar.shouldNotGroupWhenFull",t.config.get("toolbar.shouldNotGroupWhenFull")===!0)}init(){this.editor.commands.add("toggleFullscreen",new sOe(this.editor));const t=this.editor.locale.t;this.editor.keystrokes.set("Ctrl+Shift+F",(e,i)=>{this.editor.execute("toggleFullscreen"),Vt.isBlink||(this.editor.editing.view.document.isFocused=!1,this.editor.ui.view.toolbar.focusTracker.focusedElement=null),this.editor.editing.view.scrollToTheSelection(),this.editor.editing.view.focus(),i()}),this.editor.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Toggle fullscreen mode"),keystroke:"CTRL+SHIFT+F"}],categoryId:"navigation"})}}const IL="toggleFullscreen";class lOe extends Ne{static get requires(){return[W7]}static get pluginName(){return"FullscreenUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("fullscreen",()=>this._createButton(wt)),t.ui.componentFactory.add("menuBar:fullscreen",()=>this._createButton(Ti))}_createButton(t){const e=this.editor,i=e.t,r=e.commands.get(IL),s=new t(e.locale);return s.set({isToggleable:!0}),s.bind("isEnabled").to(r,"isEnabled"),s.bind("isOn").to(r,"value"),s instanceof Ti?s.set({role:"menuitemcheckbox",label:i("Fullscreen mode")}):(s.bind("icon").to(r,"value",o=>o?eTe:XCe),s.bind("label").to(r,"value",o=>i(o?"Leave fullscreen mode":"Enter fullscreen mode")),s.set({tooltip:!0})),this.listenTo(s,"execute",()=>{e.execute(IL),Vt.isBlink||(this.editor.ui.view.toolbar.focusTracker.focusedElement=null),e.editing.view.scrollToTheSelection(),e.editing.view.focus()}),s}}class cOe extends Ne{static get requires(){return[W7,lOe]}static get pluginName(){return"Fullscreen"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class uOe extends Nt{constructor(t){super(t),this._isEnabledBasedOnSelection=!1}refresh(){const t=this.editor.model,e=t.document,i=gi(e.selection.getSelectedBlocks());this.value=!!i&&i.is("element","paragraph"),this.isEnabled=!!i&&PL(i,t.schema)}execute(t={}){const e=this.editor.model,i=e.document,r=t.selection||i.selection;e.canEditAt(r)&&e.change(s=>{const o=r.getSelectedBlocks();for(const a of o)!a.is("element","paragraph")&&PL(a,e.schema)&&s.rename(a,"paragraph")})}}function PL(n,t){return t.checkChild(n.parent,"paragraph")&&!t.isObject(n)}class dOe extends Nt{constructor(t){super(t),this._isEnabledBasedOnSelection=!1}execute(t){const e=this.editor.model,i=t.attributes;let r=t.position;return e.canEditAt(r)?e.change(s=>{if(r=this._findPositionToInsertParagraph(r,s),!r)return null;const o=s.createElement("paragraph");return i&&e.schema.setAllowedAttributes(o,i,s),e.insertContent(o,r),s.setSelection(o,"in"),s.createPositionAt(o,0)}):null}_findPositionToInsertParagraph(t,e){const i=this.editor.model;if(i.schema.checkChild(t,"paragraph"))return t;const r=i.schema.findAllowedParent(t,"paragraph");if(!r)return null;const s=t.parent,o=i.schema.checkChild(s,"$text");return s.isEmpty||o&&t.isAtEnd?i.createPositionAfter(s):!s.isEmpty&&o&&t.isAtStart?i.createPositionBefore(s):e.split(t,r).position}}const b_=class b_ extends Ne{static get pluginName(){return"Paragraph"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model;t.commands.add("paragraph",new uOe(t)),t.commands.add("insertParagraph",new dOe(t)),e.schema.register("paragraph",{inheritAllFrom:"$block"}),t.conversion.elementToElement({model:"paragraph",view:"p"}),t.conversion.for("upcast").elementToElement({model:(i,{writer:r})=>!b_.paragraphLikeElements.has(i.name)||i.isEmpty?null:r.createElement("paragraph"),view:/.+/,converterPriority:"low"})}};y(b_,"paragraphLikeElements",new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]));let Zy=b_;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class fOe extends Nt{constructor(e,i){super(e);y(this,"modelElements");this.modelElements=i}refresh(){const e=gi(this.editor.model.document.selection.getSelectedBlocks());this.value=!!e&&this.modelElements.includes(e.name)&&e.name,this.isEnabled=!!e&&this.modelElements.some(i=>xL(e,i,this.editor.model.schema))}execute(e){const i=this.editor.model,r=i.document,s=e.value;i.change(o=>{const a=Array.from(r.selection.getSelectedBlocks()).filter(l=>xL(l,s,i.schema));for(const l of a)l.is("element",s)||o.rename(l,s)})}}function xL(n,t,e){return e.checkChild(n.parent,t)&&!e.isObject(n)}const OL="paragraph";class hOe extends Ne{static get pluginName(){return"HeadingEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[Zy]}init(){const t=this.editor,e=t.config.get("heading.options"),i=[];for(const r of e)r.model!=="paragraph"&&(t.model.schema.register(r.model,{inheritAllFrom:"$block"}),t.conversion.elementToElement(r),i.push(r.model));this._addDefaultH1Conversion(t),t.commands.add("heading",new fOe(t,i))}afterInit(){const t=this.editor,e=t.commands.get("enter"),i=t.config.get("heading.options");e&&this.listenTo(e,"afterExecute",(r,s)=>{const o=t.model.document.selection.getFirstPosition().parent;i.some(l=>o.is("element",l.model))&&!o.is("element",OL)&&o.childCount===0&&s.writer.rename(o,OL)})}_addDefaultH1Conversion(t){t.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:ro.low+1})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function mOe(n){const t=n.t,e={Paragraph:t("Paragraph"),"Heading 1":t("Heading 1"),"Heading 2":t("Heading 2"),"Heading 3":t("Heading 3"),"Heading 4":t("Heading 4"),"Heading 5":t("Heading 5"),"Heading 6":t("Heading 6")};return n.config.get("heading.options").map(i=>{const r=e[i.title];return r&&r!=i.title&&(i.title=r),i})}class gOe extends Ne{static get pluginName(){return"HeadingUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t,i=mOe(t),r=e("Choose heading"),s=e("Heading");t.ui.componentFactory.add("heading",o=>{const a={},l=new cr,c=t.commands.get("heading"),u=t.commands.get("paragraph"),d=[c];for(const h of i){const g={type:"button",model:new $d({label:h.title,class:h.class,role:"menuitemradio",withText:!0})};h.model==="paragraph"?(g.model.bind("isOn").to(u,"value"),g.model.set("commandName","paragraph"),d.push(u)):(g.model.bind("isOn").to(c,"value",v=>v===h.model),g.model.set({commandName:"heading",commandValue:h.model})),l.add(g),a[h.model]=h.title}const f=as(o);return ef(f,l,{ariaLabel:s,role:"menu"}),f.buttonView.set({ariaLabel:s,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:s}),f.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),f.bind("isEnabled").toMany(d,"isEnabled",(...h)=>h.some(g=>g)),f.buttonView.bind("label").to(c,"value",u,"value",(h,g)=>{const v=g?"paragraph":h;return typeof v=="boolean"||!a[v]?r:a[v]}),f.buttonView.bind("ariaLabel").to(c,"value",u,"value",(h,g)=>{const v=g?"paragraph":h;return typeof v=="boolean"||!a[v]?s:`${a[v]}, ${s}`}),this.listenTo(f,"execute",h=>{const{commandName:g,commandValue:v}=h.source;t.execute(g,v?{value:v}:void 0),t.editing.view.focus()}),f}),t.ui.componentFactory.add("menuBar:heading",o=>{const a=new ma(o),l=t.commands.get("heading"),c=t.commands.get("paragraph"),u=[l],d=new rm(o);a.set({class:"ck-heading-dropdown"}),d.set({ariaLabel:e("Heading"),role:"menu"}),a.buttonView.set({label:e("Heading")}),a.panelView.children.add(d);for(const f of i){const h=new Mm(o,a),g=new Ti(o);h.children.add(g),d.items.add(h),g.set({isToggleable:!0,label:f.title,role:"menuitemradio",class:f.class}),g.delegate("execute").to(a),g.on("execute",()=>{const v=f.model==="paragraph"?"paragraph":"heading";t.execute(v,{value:f.model}),t.editing.view.focus()}),f.model==="paragraph"?(g.bind("isOn").to(c,"value"),u.push(c)):g.bind("isOn").to(l,"value",v=>v===f.model)}return a.bind("isEnabled").toMany(u,"isEnabled",(...f)=>f.some(h=>h)),a})}}class pOe extends Ne{static get requires(){return[hOe,gOe]}static get pluginName(){return"Heading"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class vOe extends Nt{refresh(){const t=this.editor.model,e=t.schema,i=t.document.selection;this.isEnabled=bOe(i,e,t)}execute(){const t=this.editor.model;t.change(e=>{const i=e.createElement("horizontalLine");t.insertObject(i,null,null,{setSelection:"after"})})}}function bOe(n,t,e){const i=wOe(n,e);return t.checkChild(i,"horizontalLine")}function wOe(n,t){const i=CP(n,t).start.parent;return i.isEmpty&&!i.is("element","$root")?i.parent:i}class yOe extends Ne{static get pluginName(){return"HorizontalLineEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model.schema,i=t.t,r=t.conversion;e.register("horizontalLine",{inheritAllFrom:"$blockObject"}),r.for("dataDowncast").elementToElement({model:"horizontalLine",view:(s,{writer:o})=>o.createEmptyElement("hr")}),r.for("editingDowncast").elementToStructure({model:"horizontalLine",view:(s,{writer:o})=>{const a=i("Horizontal line"),l=o.createContainerElement("div",null,o.createEmptyElement("hr"));return o.addClass("ck-horizontal-line",l),o.setCustomProperty("hr",!0,l),_Oe(l,o,a)}}),r.for("upcast").elementToElement({view:"hr",model:"horizontalLine"}),t.commands.add("horizontalLine",new vOe(t))}}function _Oe(n,t,e){return t.setCustomProperty("horizontalLine",!0,n),tf(n,t,{label:e})}class kOe extends Ne{static get pluginName(){return"HorizontalLineUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("horizontalLine",()=>{const e=this._createButton(wt);return e.set({tooltip:!0}),e}),t.ui.componentFactory.add("menuBar:horizontalLine",()=>this._createButton(Ti))}_createButton(t){const e=this.editor,i=e.locale,r=e.commands.get("horizontalLine"),s=new t(e.locale),o=i.t;return s.set({label:o("Horizontal line"),icon:tTe}),s.bind("isEnabled").to(r,"isEnabled"),this.listenTo(s,"execute",()=>{e.execute("horizontalLine"),e.editing.view.focus()}),s}}class EOe extends Ne{static get requires(){return[yOe,kOe,Ru]}static get pluginName(){return"HorizontalLine"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function il(n,t,e,i){t&&COe(n,t,i),e&&rl(n,e,i)}function rl(n,t,e){if(t.attributes)for(const[i,r]of Object.entries(t.attributes))n.setAttribute(i,r,e);t.styles&&n.setStyle(t.styles,e),t.classes&&n.addClass(t.classes,e)}function COe(n,t,e){if(t.attributes)for(const[i]of Object.entries(t.attributes))n.removeAttribute(i,e);if(t.styles)for(const i of Object.keys(t.styles))n.removeStyle(i,e);t.classes&&n.removeClass(t.classes,e)}function TOe(n,t){const e=Ys(n);let i="attributes";for(i in t)i=="classes"?e[i]=Array.from(new Set([...n[i]||[],...t[i]])):e[i]={...n[i],...t[i]};return e}function If(n,t,e,i,r){const s=t.getAttribute(e),o={};for(const a of["attributes","styles","classes"]){if(a!=i){s&&s[a]&&(o[a]=s[a]);continue}if(i=="classes"){const c=new Set(s&&s.classes||[]);r(c),c.size&&(o[a]=Array.from(c));continue}const l=new Map(Object.entries(s&&s[a]||{}));r(l),l.size&&(o[a]=Object.fromEntries(l))}Object.keys(o).length?t.is("documentSelection")?n.setSelectionAttribute(e,o):n.setAttribute(e,o,t):s&&(t.is("documentSelection")?n.removeSelectionAttribute(e):n.removeAttribute(e,t))}function SOe(n){return t_e(n).replace(/ /g,"")}function Mo(n){return`html${SOe(n)}Attributes`}function OP({model:n}){return(t,e)=>e.writer.createElement(n,{htmlContent:t.getCustomProperty("$rawContent")})}function AOe(n,{view:t,isInline:e}){const i=n.t;return(r,{writer:s})=>{const o=i("HTML object"),a=U0(t,r,s),l=r.getAttribute(Mo(t));s.addClass("html-object-embed__content",a),l&&rl(s,l,a);const c=s.createContainerElement(e?"span":"div",{class:"html-object-embed","data-html-object-embed-label":o},a);return tf(c,s,{label:o})}}function U0(n,t,e){return e.createRawElement(n,null,(i,r)=>{r.setContentOf(i,t.getAttribute("htmlContent"))})}function IOe({view:n,model:t,allowEmpty:e},i){return s=>{s.on(`element:${n}`,(o,a,l)=>{let c=i.processViewAttributes(a.viewItem,l);if(!(!c&&!l.consumable.test(a.viewItem,{name:!0}))){if(c=c||{},l.consumable.consume(a.viewItem,{name:!0}),a.modelRange||(a=Object.assign(a,l.convertChildren(a.viewItem,a.modelCursor))),e&&a.modelRange.isCollapsed&&Object.keys(c).length){const u=l.writer.createElement("htmlEmptyElement");if(!l.safeInsert(u,a.modelCursor))return;const d=l.getSplitParts(u);a.modelRange=l.writer.createRange(a.modelRange.start,l.writer.createPositionAfter(d[d.length-1])),l.updateConversionResult(u,a),r(u,c,l);return}for(const u of a.modelRange.getItems())r(u,c,l)}},{priority:"low"})};function r(s,o,a){if(a.schema.checkAttribute(s,t)){const l=s.getAttribute(t),c=TOe(o,l||{});a.writer.setAttribute(t,c,s)}}}function RL({model:n,view:t},e){return(i,{writer:r,consumable:s})=>{if(!i.hasAttribute(n))return null;const o=r.createContainerElement(t),a=i.getAttribute(n);return s.consume(i,`attribute:${n}`),rl(r,a,o),o.getFillerOffset=()=>null,e?tf(o,r):o}}function POe({priority:n,view:t}){return(e,i)=>{if(!e)return;const{writer:r}=i,s=r.createAttributeElement(t,null,{priority:n});return rl(r,e,s),s}}function om({view:n},t){return e=>{e.on(`element:${n}`,(i,r,s)=>{if(!r.modelRange||r.modelRange.isCollapsed)return;const o=t.processViewAttributes(r.viewItem,s);o&&s.writer.setAttribute(Mo(r.viewItem.name),o,r.modelRange)},{priority:"low"})}}function rv({view:n,model:t}){return e=>{e.on(`attribute:${Mo(n)}:${t}`,(i,r,s)=>{if(!s.consumable.consume(r.item,i.name))return;const{attributeOldValue:o,attributeNewValue:a}=r,l=s.writer,c=s.mapper.toViewElement(r.item);il(l,o,a,c)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */var VL={block:[{model:"codeBlock",view:"pre"},{model:"paragraph",view:"p"},{model:"blockQuote",view:"blockquote"},{model:"listItem",view:"li"},{model:"pageBreak",view:"div"},{model:"rawHtml",view:"div"},{model:"table",view:"table"},{model:"tableRow",view:"tr"},{model:"tableCell",view:"td"},{model:"tableCell",view:"th"},{model:"tableColumnGroup",view:"colgroup"},{model:"tableColumn",view:"col"},{model:"caption",view:"caption"},{model:"caption",view:"figcaption"},{model:"imageBlock",view:"img"},{model:"imageInline",view:"img"},{model:"horizontalLine",view:"hr"},{model:"htmlP",view:"p",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlBlockquote",view:"blockquote",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlTable",view:"table",modelSchema:{allowWhere:"$block",isBlock:!0}},{model:"htmlTbody",view:"tbody",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlThead",view:"thead",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlTfoot",view:"tfoot",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlCaption",view:"caption",modelSchema:{allowIn:"htmlTable",allowChildren:"$text",isBlock:!1}},{model:"htmlColgroup",view:"colgroup",modelSchema:{allowIn:"htmlTable",allowChildren:"col",isBlock:!1}},{model:"htmlCol",view:"col",modelSchema:{allowIn:"htmlColgroup",isBlock:!1}},{model:"htmlTr",view:"tr",modelSchema:{allowIn:["htmlTable","htmlThead","htmlTbody"],isLimit:!0}},{model:"htmlTd",view:"td",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlTh",view:"th",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlFigure",view:"figure",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFigcaption",view:"figcaption",modelSchema:{allowIn:"htmlFigure",allowChildren:"$text",isBlock:!1}},{model:"htmlAddress",view:"address",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlAside",view:"aside",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlMain",view:"main",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDetails",view:"details",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSummary",view:"summary",modelSchema:{allowChildren:["htmlH1","htmlH2","htmlH3","htmlH4","htmlH5","htmlH6","$text"],allowIn:"htmlDetails",isBlock:!1}},{model:"htmlDiv",view:"div",paragraphLikeModel:"htmlDivParagraph",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlFieldset",view:"fieldset",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlLegend",view:"legend",modelSchema:{allowIn:"htmlFieldset",allowChildren:"$text"}},{model:"htmlHeader",view:"header",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFooter",view:"footer",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlForm",view:"form",modelSchema:{inheritAllFrom:"$container",isBlock:!0}},{model:"htmlHgroup",view:"hgroup",modelSchema:{allowIn:["$root","$container"],allowChildren:["paragraph","htmlP","htmlH1","htmlH2","htmlH3","htmlH4","htmlH5","htmlH6"],isBlock:!1}},{model:"htmlH1",view:"h1",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH2",view:"h2",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH3",view:"h3",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH4",view:"h4",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH5",view:"h5",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH6",view:"h6",modelSchema:{inheritAllFrom:"$block"}},{model:"$htmlList",modelSchema:{allowWhere:"$container",allowChildren:["$htmlList","htmlLi"],isBlock:!1}},{model:"htmlDir",view:"dir",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlMenu",view:"menu",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlUl",view:"ul",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlOl",view:"ol",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlLi",view:"li",modelSchema:{allowIn:"$htmlList",allowChildren:"$text",isBlock:!1}},{model:"htmlPre",view:"pre",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlArticle",view:"article",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSection",view:"section",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlNav",view:"nav",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDivDl",view:"div",modelSchema:{allowChildren:["htmlDt","htmlDd"],allowIn:"htmlDl"}},{model:"htmlDl",view:"dl",modelSchema:{allowWhere:"$container",allowChildren:["htmlDt","htmlDd","htmlDivDl"],isBlock:!1}},{model:"htmlDt",view:"dt",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlDd",view:"dd",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlCenter",view:"center",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlHr",view:"hr",isEmpty:!0,modelSchema:{inheritAllFrom:"$blockObject"}}],inline:[{model:"htmlLiAttributes",view:"li",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlOlAttributes",view:"ol",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlUlAttributes",view:"ul",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"table"},{model:"htmlTheadAttributes",view:"thead",appliesToBlock:"table"},{model:"htmlTbodyAttributes",view:"tbody",appliesToBlock:"table"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"imageBlock"},{model:"htmlAcronym",view:"acronym",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTt",view:"tt",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlFont",view:"font",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTime",view:"time",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlVar",view:"var",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBig",view:"big",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSmall",view:"small",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSamp",view:"samp",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlQ",view:"q",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlOutput",view:"output",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlKbd",view:"kbd",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdi",view:"bdi",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdo",view:"bdo",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlAbbr",view:"abbr",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlA",view:"a",priority:5,coupledAttribute:"linkHref"},{model:"htmlStrong",view:"strong",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlB",view:"b",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlI",view:"i",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlEm",view:"em",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlS",view:"s",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDel",view:"del",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlIns",view:"ins",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlU",view:"u",coupledAttribute:"underline",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSub",view:"sub",coupledAttribute:"subscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSup",view:"sup",coupledAttribute:"superscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCode",view:"code",coupledAttribute:"code",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlMark",view:"mark",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSpan",view:"span",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCite",view:"cite",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlLabel",view:"label",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDfn",view:"dfn",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlObject",view:"object",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlIframe",view:"iframe",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlInput",view:"input",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlButton",view:"button",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlTextarea",view:"textarea",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlSelect",view:"select",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlVideo",view:"video",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlEmbed",view:"embed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlOembed",view:"oembed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlAudio",view:"audio",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlImg",view:"img",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlCanvas",view:"canvas",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlMeter",view:"meter",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlProgress",view:"progress",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlScript",view:"script",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlStyle",view:"style",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlCustomElement",view:"$customElement",modelSchema:{allowWhere:["$text","$block"],allowAttributesOf:"$inlineObject",isInline:!0}}]};class am extends Ne{constructor(){super(...arguments);y(this,"_definitions",[])}static get pluginName(){return"DataSchema"}static get isOfficialPlugin(){return!0}init(){for(const e of VL.block)this.registerBlockElement(e);for(const e of VL.inline)this.registerInlineElement(e)}registerBlockElement(e){this._definitions.push({...e,isBlock:!0})}registerInlineElement(e){this._definitions.push({...e,isInline:!0})}extendBlockElement(e){this._extendDefinition({...e,isBlock:!0})}extendInlineElement(e){this._extendDefinition({...e,isInline:!0})}getDefinitionsForView(e,i=!1){const r=new Set;for(const s of this._getMatchingViewDefinitions(e)){if(i)for(const o of this._getReferences(s.model))r.add(o);r.add(s)}return r}getDefinitionsForModel(e){return this._definitions.filter(i=>i.model==e)}_getMatchingViewDefinitions(e){return this._definitions.filter(i=>i.view&&xOe(e,i.view))}*_getReferences(e){const i=["inheritAllFrom","inheritTypesFrom","allowWhere","allowContentOf","allowAttributesOf"],r=this._definitions.filter(s=>s.model==e);for(const{modelSchema:s}of r)if(s)for(const o of i)for(const a of jn(s[o]||[])){const l=this._definitions.filter(c=>c.model==a);for(const c of l)a!==e&&(yield*this._getReferences(c.model),yield c)}}_extendDefinition(e){const i=Array.from(this._definitions.entries()).filter(([,r])=>r.model==e.model);if(i.length==0){this._definitions.push(e);return}for(const[r,s]of i)this._definitions[r]=X6({},s,e,(o,a)=>Array.isArray(o)?o.concat(a):void 0)}}function xOe(n,t){return typeof n=="string"?n===t:n instanceof RegExp?n.test(t):!1}class Fi extends Ne{constructor(e){super(e);y(this,"_dataSchema");y(this,"_allowedAttributes");y(this,"_disallowedAttributes");y(this,"_allowedElements");y(this,"_disallowedElements");y(this,"_dataInitialized");y(this,"_coupledAttributes");this._dataSchema=e.plugins.get("DataSchema"),this._allowedAttributes=new Vs,this._disallowedAttributes=new Vs,this._allowedElements=new Set,this._disallowedElements=new Set,this._dataInitialized=!1,this._coupledAttributes=null,this._registerElementsAfterInit(),this._registerElementHandlers(),this._registerCoupledAttributesPostFixer(),this._registerAssociatedHtmlAttributesPostFixer()}static get pluginName(){return"DataFilter"}static get isOfficialPlugin(){return!0}static get requires(){return[am,Ru]}loadAllowedConfig(e){for(const i of e){const r=i.name||/[\s\S]+/,s=NL(i);this.allowElement(r),s.forEach(o=>this.allowAttributes(o))}}loadDisallowedConfig(e){for(const i of e){const r=i.name||/[\s\S]+/,s=NL(i);s.length==0?this.disallowElement(r):s.forEach(o=>this.disallowAttributes(o))}}loadAllowedEmptyElementsConfig(e){for(const i of e)this.allowEmptyElement(i)}allowElement(e){for(const i of this._dataSchema.getDefinitionsForView(e,!0))this._addAllowedElement(i),this._coupledAttributes=null}disallowElement(e){for(const i of this._dataSchema.getDefinitionsForView(e,!1))this._disallowedElements.add(i.view)}allowEmptyElement(e){for(const i of this._dataSchema.getDefinitionsForView(e,!0))i.isInline&&this._dataSchema.extendInlineElement({...i,allowEmpty:!0})}allowAttributes(e){this._allowedAttributes.add(e)}disallowAttributes(e){this._disallowedAttributes.add(e)}processViewAttributes(e,i){const{consumable:r}=i;return DL(e,this._disallowedAttributes,r),OOe(e,DL(e,this._allowedAttributes,r))}_addAllowedElement(e){if(!this._allowedElements.has(e)){if(this._allowedElements.add(e),"appliesToBlock"in e&&typeof e.appliesToBlock=="string")for(const i of this._dataSchema.getDefinitionsForModel(e.appliesToBlock))i.isBlock&&this._addAllowedElement(i);this._dataInitialized&&this.editor.data.once("set",()=>{this._fireRegisterEvent(e)},{priority:ro.highest+1})}}_registerElementsAfterInit(){this.editor.data.on("init",()=>{this._dataInitialized=!0;for(const e of this._allowedElements)this._fireRegisterEvent(e)},{priority:ro.highest+1})}_registerElementHandlers(){this.on("register",(e,i)=>{const r=this.editor.model.schema;if(i.isObject&&!r.isRegistered(i.model))this._registerObjectElement(i);else if(i.isBlock)this._registerBlockElement(i);else if(i.isInline)this._registerInlineElement(i);else throw new we("data-filter-invalid-definition",null,i);e.stop()},{priority:"lowest"})}_registerCoupledAttributesPostFixer(){const e=this.editor.model,i=e.document.selection;e.document.registerPostFixer(r=>{const s=e.document.differ.getChanges();let o=!1;const a=this._getCoupledAttributesMap();for(const l of s){if(l.type!="attribute"||l.attributeNewValue!==null)continue;const c=a.get(l.attributeKey);if(c)for(const{item:u}of l.range.getWalker())for(const d of c)u.hasAttribute(d)&&(r.removeAttribute(d,u),o=!0)}return o}),this.listenTo(i,"change:attribute",(r,{attributeKeys:s})=>{const o=new Set,a=this._getCoupledAttributesMap();for(const l of s){if(i.hasAttribute(l))continue;const c=a.get(l);if(c)for(const u of c)i.hasAttribute(u)&&o.add(u)}o.size!=0&&e.change(l=>{for(const c of o)l.removeSelectionAttribute(c)})})}_registerAssociatedHtmlAttributesPostFixer(){const e=this.editor.model;e.document.registerPostFixer(i=>{const r=e.document.differ.getChanges();let s=!1;for(const o of r)if(!(o.type!=="insert"||o.name==="$text"))for(const a of o.attributes.keys())!a.startsWith("html")||!a.endsWith("Attributes")||e.schema.checkAttribute(o.name,a)||(i.removeAttribute(a,o.position.nodeAfter),s=!0);return s})}_getCoupledAttributesMap(){if(this._coupledAttributes)return this._coupledAttributes;this._coupledAttributes=new Map;for(const e of this._allowedElements)if(e.coupledAttribute&&e.model){const i=this._coupledAttributes.get(e.coupledAttribute);i?i.push(e.model):this._coupledAttributes.set(e.coupledAttribute,[e.model])}return this._coupledAttributes}_fireRegisterEvent(e){e.view&&this._disallowedElements.has(e.view)||this.fire(e.view?`register:${e.view}`:"register",e)}_registerObjectElement(e){const i=this.editor,r=i.model.schema,s=i.conversion,{view:o,model:a}=e;r.register(a,e.modelSchema);/* istanbul ignore next: paranoid check -- @preserve */o&&(r.extend(e.model,{allowAttributes:[Mo(o),"htmlContent"]}),i.data.registerRawContentMatcher({name:o}),s.for("upcast").elementToElement({view:o,model:OP(e),converterPriority:ro.low+2}),s.for("upcast").add(om(e,this)),s.for("editingDowncast").elementToStructure({model:{name:a,attributes:[Mo(o)]},view:AOe(i,e)}),s.for("dataDowncast").elementToElement({model:a,view:(l,{writer:c})=>U0(o,l,c)}),s.for("dataDowncast").add(rv(e)))}_registerBlockElement(e){const i=this.editor,r=i.model.schema,s=i.conversion,{view:o,model:a}=e;if(!r.isRegistered(e.model)){if(!e.modelSchema||(r.register(e.model,e.modelSchema),!o))return;s.for("upcast").elementToElement({model:a,view:o,converterPriority:ro.low+2}),s.for("downcast").elementToElement({model:a,view:(l,{writer:c})=>e.isEmpty?c.createEmptyElement(o):c.createContainerElement(o)})}o&&(r.extend(e.model,{allowAttributes:Mo(o)}),s.for("upcast").add(om(e,this)),s.for("downcast").add(rv(e)))}_registerInlineElement(e){const i=this.editor,r=i.model.schema,s=i.conversion,o=e.model;if(!e.appliesToBlock&&(r.extend("$text",{allowAttributes:o}),e.attributeProperties&&r.setAttributeProperties(o,e.attributeProperties),s.for("upcast").add(IOe(e,this)),s.for("downcast").attributeToElement({model:o,view:POe(e)}),!!e.allowEmpty)){if(r.setAttributeProperties(o,{copyFromObject:!1}),!r.isRegistered("htmlEmptyElement")){r.register("htmlEmptyElement",{inheritAllFrom:"$inlineObject"});const a=l=>Array.from(l.getAttributeKeys()).some(c=>c.startsWith("html"));i.model.document.registerPostFixer(l=>{const c=i.model.document.differ.getChanges(),u=new Set;for(const d of c)if(d.type!=="remove"){if(d.type==="attribute"&&d.attributeNewValue===null)for(const{item:f}of d.range)f.is("element","htmlEmptyElement")&&!a(f)&&u.add(f);if(d.type==="insert"&&d.position.nodeAfter){const f=d.position.nodeAfter;for(const{item:h}of l.createRangeOn(f))h.is("element","htmlEmptyElement")&&!a(h)&&u.add(h)}}for(const d of u)l.remove(d);return u.size>0})}i.data.htmlProcessor.domConverter.registerInlineObjectMatcher(a=>a.name==e.view&&a.isEmpty&&Array.from(a.getAttributeKeys()).length?{name:!0}:null),s.for("editingDowncast").elementToElement({model:"htmlEmptyElement",view:RL(e,!0)}),s.for("dataDowncast").elementToElement({model:"htmlEmptyElement",view:RL(e)})}}}function DL(n,t,e){const i=t.matchAll(n)||[],r=n.document.stylesProcessor;return i.reduce((s,{match:o})=>{for(const[a,l]of o.attributes||[])if(a=="style"){const c=l,u=r.getRelatedStyles(c).filter(d=>d.split("-").length>c.split("-").length).sort((d,f)=>f.split("-").length-d.split("-").length);for(const d of u)e.consume(n,{styles:[d]})&&s.styles.push(d);e.consume(n,{styles:[c]})&&s.styles.push(c)}else if(a=="class"){const c=l;e.consume(n,{classes:[c]})&&s.classes.push(c)}else e.consume(n,{attributes:[a]})&&s.attributes.push(a);return s},{attributes:[],classes:[],styles:[]})}function OOe(n,{attributes:t,classes:e,styles:i}){return!t.length&&!e.length&&!i.length?null:{...t.length&&{attributes:ROe(n,t)},...i.length&&{styles:VOe(n,i)},...e.length&&{classes:e}}}function ROe(n,t){const e={};for(const i of t){const r=n.getAttribute(i);r!==void 0&&_z(i)&&(e[i]=r)}return e}function VOe(n,t){const e=new Ih(n.document.stylesProcessor);for(const i of t){const r=n.getStyle(i);r!==void 0&&e.set(i,r)}return Object.fromEntries(e.getStylesEntries())}function gE(n,t){const{name:e}=n,i=n[t];return aa(i)?Object.entries(i).map(([r,s])=>({name:e,[t]:{[r]:s}})):Array.isArray(i)?i.map(r=>({name:e,[t]:[r]})):[n]}function NL(n){const{name:t,attributes:e,classes:i,styles:r}=n,s=[];return e&&s.push(...gE({name:t,attributes:e},"attributes")),i&&s.push(...gE({name:t,classes:i},"classes")),r&&s.push(...gE({name:t,styles:r},"styles")),s}class DOe extends Ne{static get requires(){return[Fi]}static get pluginName(){return"CodeBlockElementSupport"}static get isOfficialPlugin(){return!0}init(){if(!this.editor.plugins.has("CodeBlockEditing"))return;const t=this.editor.plugins.get(Fi);t.on("register:pre",(e,i)=>{if(i.model!=="codeBlock")return;const r=this.editor,s=r.model.schema,o=r.conversion;s.extend("codeBlock",{allowAttributes:["htmlPreAttributes","htmlContentAttributes"]}),o.for("upcast").add(NOe(t)),o.for("downcast").add(LOe()),e.stop()})}}function NOe(n){return t=>{t.on("element:code",(e,i,r)=>{const s=i.viewItem,o=s.parent;if(!o||!o.is("element","pre"))return;a(o,"htmlPreAttributes"),a(s,"htmlContentAttributes");function a(l,c){const u=n.processViewAttributes(l,r);u&&r.writer.setAttribute(c,u,i.modelRange)}},{priority:"low"})}}function LOe(){return n=>{n.on("attribute:htmlPreAttributes:codeBlock",(t,e,i)=>{if(!i.consumable.consume(e.item,t.name))return;const{attributeOldValue:r,attributeNewValue:s}=e,a=i.mapper.toViewElement(e.item).parent;il(i.writer,r,s,a)}),n.on("attribute:htmlContentAttributes:codeBlock",(t,e,i)=>{if(!i.consumable.consume(e.item,t.name))return;const{attributeOldValue:r,attributeNewValue:s}=e,o=i.mapper.toViewElement(e.item);il(i.writer,r,s,o)})}}class MOe extends Ne{static get requires(){return[Fi]}static get pluginName(){return"DualContentModelElementSupport"}static get isOfficialPlugin(){return!0}init(){this.editor.plugins.get(Fi).on("register",(e,i)=>{const r=i,s=this.editor,o=s.model.schema,a=s.conversion;if(!r.paragraphLikeModel||o.isRegistered(r.model)||o.isRegistered(r.paragraphLikeModel))return;const l={model:r.paragraphLikeModel,view:r.view};o.register(r.model,r.modelSchema),o.register(l.model,{inheritAllFrom:"$block"}),a.for("upcast").elementToElement({view:r.view,model:(c,{writer:u})=>this._hasBlockContent(c)?u.createElement(r.model):u.createElement(l.model),converterPriority:ro.low+.5}),a.for("downcast").elementToElement({view:r.view,model:r.model}),this._addAttributeConversion(r),a.for("downcast").elementToElement({view:l.view,model:l.model}),this._addAttributeConversion(l),e.stop()})}_hasBlockContent(t){const e=this.editor.editing.view,i=e.domConverter.blockElements;for(const r of e.createRangeIn(t).getItems())if(r.is("element")&&i.includes(r.name))return!0;return!1}_addAttributeConversion(t){const e=this.editor,i=e.conversion,r=e.plugins.get(Fi);e.model.schema.extend(t.model,{allowAttributes:Mo(t.view)}),i.for("upcast").add(om(t,r)),i.for("downcast").add(rv(t))}}class $Oe extends Ne{static get requires(){return[am,Vv]}static get pluginName(){return"HeadingElementSupport"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;if(!t.plugins.has("HeadingEditing"))return;const e=t.config.get("heading.options");this.registerHeadingElements(t,e)}registerHeadingElements(t,e){const i=t.plugins.get(am),r=[];for(const s of e)"model"in s&&"view"in s&&(i.registerBlockElement({view:s.view,model:s.model}),r.push(s.model));i.extendBlockElement({model:"htmlHgroup",modelSchema:{allowChildren:r}}),i.extendBlockElement({model:"htmlSummary",modelSchema:{allowChildren:r}})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function sv(n,t,e){const i=n.createRangeOn(t);for(const{item:r}of i.getWalker())if(r.is("element",e))return r}class BOe extends Ne{static get requires(){return[Fi]}static get pluginName(){return"ImageElementSupport"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;if(!t.plugins.has("ImageInlineEditing")&&!t.plugins.has("ImageBlockEditing"))return;const e=t.model.schema,i=t.conversion,r=t.plugins.get(Fi);r.on("register:figure",()=>{i.for("upcast").add(zOe(r))}),r.on("register:img",(s,o)=>{o.model!=="imageBlock"&&o.model!=="imageInline"||(e.isRegistered("imageBlock")&&e.extend("imageBlock",{allowAttributes:["htmlImgAttributes","htmlFigureAttributes","htmlLinkAttributes"]}),e.isRegistered("imageInline")&&e.extend("imageInline",{allowAttributes:["htmlA","htmlImgAttributes"]}),i.for("upcast").add(FOe(r)),i.for("downcast").add(HOe()),t.plugins.has("LinkImage")&&i.for("upcast").add(UOe(r,t)),s.stop())})}}function FOe(n){return t=>{t.on("element:img",(e,i,r)=>{if(!i.modelRange)return;const s=i.viewItem,o=n.processViewAttributes(s,r);o&&r.writer.setAttribute("htmlImgAttributes",o,i.modelRange)},{priority:"low"})}}function UOe(n,t){const e=t.plugins.get("ImageUtils");return i=>{i.on("element:a",(r,s,o)=>{const a=s.viewItem;if(!e.findViewImgElement(a))return;const c=s.modelCursor.parent;if(!c.is("element","imageBlock"))return;const u=n.processViewAttributes(a,o);u&&o.writer.setAttribute("htmlLinkAttributes",u,c)},{priority:"low"})}}function zOe(n){return t=>{t.on("element:figure",(e,i,r)=>{const s=i.viewItem;if(!i.modelRange||!s.hasClass("image"))return;const o=n.processViewAttributes(s,r);o&&r.writer.setAttribute("htmlFigureAttributes",o,i.modelRange)},{priority:"low"})}}function HOe(){return n=>{t("htmlImgAttributes"),e("img","htmlImgAttributes"),e("figure","htmlFigureAttributes"),e("a","htmlLinkAttributes");function t(i){n.on(`attribute:${i}:imageInline`,(r,s,o)=>{if(!o.consumable.consume(s.item,r.name))return;const{attributeOldValue:a,attributeNewValue:l}=s,c=o.mapper.toViewElement(s.item);il(o.writer,a,l,c)},{priority:"low"})}function e(i,r){n.on(`attribute:${r}:imageBlock`,(s,o,a)=>{if(!a.consumable.test(o.item,s.name))return;const{attributeOldValue:l,attributeNewValue:c}=o,u=a.mapper.toViewElement(o.item),d=sv(a.writer,u,i);d&&(il(a.writer,l,c,d),a.consumable.consume(o.item,s.name))},{priority:"low"}),i==="a"&&n.on("attribute:linkHref:imageBlock",(s,o,a)=>{if(!a.consumable.consume(o.item,"attribute:htmlLinkAttributes:imageBlock"))return;const l=a.mapper.toViewElement(o.item),c=sv(a.writer,l,"a");rl(a.writer,o.item.getAttribute("htmlLinkAttributes"),c)},{priority:"low"})}}}class WOe extends Ne{static get requires(){return[Fi]}static get pluginName(){return"MediaEmbedElementSupport"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;if(!t.plugins.has("MediaEmbed")||t.config.get("mediaEmbed.previewsInData"))return;const e=t.model.schema,i=t.conversion,r=this.editor.plugins.get(Fi),s=this.editor.plugins.get(am),o=t.config.get("mediaEmbed.elementName");s.registerBlockElement({model:"media",view:o}),r.on("register:figure",()=>{i.for("upcast").add(qOe(r))}),r.on(`register:${o}`,(a,l)=>{l.model==="media"&&(e.extend("media",{allowAttributes:[Mo(o),"htmlFigureAttributes"]}),i.for("upcast").add(jOe(r,o)),i.for("dataDowncast").add(GOe(o)),a.stop())})}}function jOe(n,t){const e=(i,r,s)=>{const o=r.viewItem;a(o,Mo(t));function a(l,c){const u=n.processViewAttributes(l,s);u&&s.writer.setAttribute(c,u,r.modelRange)}};return i=>{i.on(`element:${t}`,e,{priority:"low"})}}function qOe(n){return t=>{t.on("element:figure",(e,i,r)=>{const s=i.viewItem;if(!i.modelRange||!s.hasClass("media"))return;const o=n.processViewAttributes(s,r);o&&r.writer.setAttribute("htmlFigureAttributes",o,i.modelRange)},{priority:"low"})}}function GOe(n){return t=>{e(n,Mo(n)),e("figure","htmlFigureAttributes");function e(i,r){t.on(`attribute:${r}:media`,(s,o,a)=>{if(!a.consumable.consume(o.item,s.name))return;const{attributeOldValue:l,attributeNewValue:c}=o,u=a.mapper.toViewElement(o.item),d=sv(a.writer,u,i);il(a.writer,l,c,d)})}}}class KOe extends Ne{static get requires(){return[Fi]}static get pluginName(){return"ScriptElementSupport"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.plugins.get(Fi);t.on("register:script",(e,i)=>{const r=this.editor,s=r.model.schema,o=r.conversion;s.register("htmlScript",i.modelSchema),s.extend("htmlScript",{allowAttributes:["htmlScriptAttributes","htmlContent"],isContent:!0}),r.data.registerRawContentMatcher({name:"script"}),o.for("upcast").elementToElement({view:"script",model:OP(i)}),o.for("upcast").add(om(i,t)),o.for("downcast").elementToElement({model:"htmlScript",view:(a,{writer:l})=>U0("script",a,l)}),o.for("downcast").add(rv(i)),e.stop()})}}const YOe=["width","max-width","min-width","height","min-height","max-height"];class QOe extends Ne{static get requires(){return[Fi]}static get pluginName(){return"TableElementSupport"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;if(!t.plugins.has("TableEditing"))return;const e=t.model.schema,i=t.conversion,r=t.plugins.get(Fi),s=t.plugins.get("TableUtils");r.on("register:figure",()=>{i.for("upcast").add(XOe(r))}),r.on("register:table",(o,a)=>{a.model==="table"&&(e.extend("table",{allowAttributes:["htmlTableAttributes","htmlFigureAttributes","htmlTheadAttributes","htmlTbodyAttributes"]}),i.for("upcast").add(JOe(r)),i.for("downcast").add(e2e()),t.model.document.registerPostFixer(ZOe(t.model,s)),o.stop())})}}function ZOe(n,t){return e=>{const i=n.document.differ.getChanges();let r=!1;for(const s of i){if(s.type!="attribute"||s.attributeKey!="headingRows")continue;const o=s.range.start.nodeAfter,a=o.getAttribute("htmlTheadAttributes"),l=o.getAttribute("htmlTbodyAttributes");a&&!s.attributeNewValue?(e.removeAttribute("htmlTheadAttributes",o),r=!0):l&&s.attributeNewValue==t.getRows(o)&&(e.removeAttribute("htmlTbodyAttributes",o),r=!0)}return r}}function JOe(n){return t=>{t.on("element:table",(e,i,r)=>{if(!i.modelRange)return;const s=i.viewItem;o(s,"htmlTableAttributes");for(const a of s.getChildren())a.is("element","thead")&&o(a,"htmlTheadAttributes"),a.is("element","tbody")&&o(a,"htmlTbodyAttributes");function o(a,l){const c=n.processViewAttributes(a,r);c&&r.writer.setAttribute(l,c,i.modelRange)}},{priority:"low"})}}function XOe(n){return t=>{t.on("element:figure",(e,i,r)=>{const s=i.viewItem;if(!i.modelRange||!s.hasClass("table"))return;const o=n.processViewAttributes(s,r);o&&r.writer.setAttribute("htmlFigureAttributes",o,i.modelRange)},{priority:"low"})}}function e2e(){return n=>{t("table","htmlTableAttributes"),t("figure","htmlFigureAttributes"),t("thead","htmlTheadAttributes"),t("tbody","htmlTbodyAttributes");function t(e,i){n.on(`attribute:${i}:table`,(r,s,o)=>{if(!o.consumable.test(s.item,r.name))return;const a=o.mapper.toViewElement(s.item),l=sv(o.writer,a,e);if(l)if(o.consumable.consume(s.item,r.name),i==="htmlTableAttributes"&&a!==l){const c=LL(s.attributeOldValue),u=LL(s.attributeNewValue);il(o.writer,c.tableAttributes,u.tableAttributes,l),il(o.writer,c.figureAttributes,u.figureAttributes,a)}else il(o.writer,s.attributeOldValue,s.attributeNewValue,l)})}}}function LL(n){const t={},e={...n};if(!n||!("styles"in n))return{figureAttributes:t,tableAttributes:e};e.styles={};for(const[i,r]of Object.entries(n.styles))YOe.includes(i)?t.styles={...t.styles,[i]:r}:e.styles={...e.styles,[i]:r};return{figureAttributes:t,tableAttributes:e}}class t2e extends Ne{static get requires(){return[Fi]}static get pluginName(){return"StyleElementSupport"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.plugins.get(Fi);t.on("register:style",(e,i)=>{const r=this.editor,s=r.model.schema,o=r.conversion;s.register("htmlStyle",i.modelSchema),s.extend("htmlStyle",{allowAttributes:["htmlStyleAttributes","htmlContent"],isContent:!0}),r.data.registerRawContentMatcher({name:"style"}),o.for("upcast").elementToElement({view:"style",model:OP(i)}),o.for("upcast").add(om(i,t)),o.for("downcast").elementToElement({model:"htmlStyle",view:(a,{writer:l})=>U0("style",a,l)}),o.for("downcast").add(rv(i)),e.stop()})}}class n2e extends Ne{static get requires(){return[Fi]}static get pluginName(){return"ListElementSupport"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;if(!t.plugins.has("ListEditing"))return;const e=t.model.schema,i=t.conversion,r=t.plugins.get(Fi),s=t.plugins.get("ListEditing"),o=t.plugins.get("ListUtils"),a=["ul","ol","li"];s.registerDowncastStrategy({scope:"item",attributeName:"htmlLiAttributes",setAttributeOnDowncast:rl}),s.registerDowncastStrategy({scope:"list",attributeName:"htmlUlAttributes",setAttributeOnDowncast:rl}),s.registerDowncastStrategy({scope:"list",attributeName:"htmlOlAttributes",setAttributeOnDowncast:rl}),r.on("register",(l,c)=>{if(!a.includes(c.view)||(l.stop(),e.checkAttribute("$block","htmlLiAttributes")))return;const u=a.map(d=>Mo(d));e.extend("$listItem",{allowAttributes:u}),i.for("upcast").add(d=>{d.on("element:ul",pE("htmlUlAttributes",r),{priority:"low"}),d.on("element:ol",pE("htmlOlAttributes",r),{priority:"low"}),d.on("element:li",pE("htmlLiAttributes",r),{priority:"low"})})}),s.on("postFixer",(l,{listNodes:c,writer:u})=>{for(const{node:d,previousNodeInList:f}of c)if(f){if(f.getAttribute("listType")==d.getAttribute("listType")){const h=ML(f.getAttribute("listType")),g=f.getAttribute(h);!em(d.getAttribute(h),g)&&u.model.schema.checkAttribute(d,h)&&(u.setAttribute(h,g,d),l.return=!0)}if(f.getAttribute("listItemId")==d.getAttribute("listItemId")){const h=f.getAttribute("htmlLiAttributes");!em(d.getAttribute("htmlLiAttributes"),h)&&u.model.schema.checkAttribute(d,"htmlLiAttributes")&&(u.setAttribute("htmlLiAttributes",h,d),l.return=!0)}}}),s.on("postFixer",(l,{listNodes:c,writer:u})=>{for(const{node:d}of c){const f=d.getAttribute("listType");!o.isNumberedListType(f)&&d.getAttribute("htmlOlAttributes")&&(u.removeAttribute("htmlOlAttributes",d),l.return=!0),o.isNumberedListType(f)&&d.getAttribute("htmlUlAttributes")&&(u.removeAttribute("htmlUlAttributes",d),l.return=!0)}})}afterInit(){const t=this.editor;if(!t.commands.get("indentList"))return;const e=t.commands.get("indentList");this.listenTo(e,"afterExecute",(i,r)=>{t.model.change(s=>{for(const o of r){const a=ML(o.getAttribute("listType"));t.model.schema.checkAttribute(o,a)&&s.setAttribute(a,{},o)}})})}}function pE(n,t){return(e,i,r)=>{const s=i.viewItem;i.modelRange||Object.assign(i,r.convertChildren(i.viewItem,i.modelCursor));const o=t.processViewAttributes(s,r);for(const a of i.modelRange.getItems({shallow:!0}))a.hasAttribute("listItemId")&&(a.hasAttribute("htmlUlAttributes")||a.hasAttribute("htmlOlAttributes")||r.writer.model.schema.checkAttribute(a,n)&&r.writer.setAttribute(n,o||{},a))}}function ML(n){return n==="numbered"||n=="customNumbered"?"htmlOlAttributes":"htmlUlAttributes"}class i2e extends Ne{static get requires(){return[Fi]}static get pluginName(){return"HorizontalLineElementSupport"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;if(!t.plugins.has("HorizontalLineEditing"))return;const e=t.model.schema,i=t.conversion,r=t.plugins.get(Fi);r.on("register:hr",(s,o)=>{o.model==="horizontalLine"&&(e.extend("horizontalLine",{allowAttributes:["htmlHrAttributes"]}),i.for("upcast").add(om(o,r)),i.for("downcast").add(r2e()),s.stop())})}}function r2e(){return n=>{n.on("attribute:htmlHrAttributes:horizontalLine",(t,e,i)=>{if(!i.consumable.test(e.item,t.name))return;const{attributeOldValue:r,attributeNewValue:s}=e,o=i.mapper.toViewElement(e.item),a=sv(i.writer,o,"hr");a&&(il(i.writer,r,s,a),i.consumable.consume(e.item,t.name))},{priority:"low"})}}class s2e extends Ne{static get requires(){return[Fi,am]}static get pluginName(){return"CustomElementSupport"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.plugins.get(Fi),e=this.editor.plugins.get(am);t.on("register:$customElement",(i,r)=>{i.stop();const s=this.editor,o=s.model.schema,a=s.conversion,l=s.editing.view.domConverter.unsafeElements,c=s.data.htmlProcessor.domConverter.preElements;o.register(r.model,r.modelSchema),o.extend(r.model,{allowAttributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"],isContent:!0}),s.data.htmlProcessor.domConverter.registerRawContentMatcher({name:"template"}),a.for("upcast").elementToElement({view:/.*/,model:(u,d)=>{if(u.name=="$comment"||!o2e(u.name)||e.getDefinitionsForView(u.name).size)return null;l.includes(u.name)||l.push(u.name),c.includes(u.name)||c.push(u.name);const f=d.writer.createElement(r.model,{htmlElementName:u.name}),h=t.processViewAttributes(u,d);h&&d.writer.setAttribute("htmlCustomElementAttributes",h,f);let g;if(u.is("element","template")&&u.getCustomProperty("$rawContent"))g=u.getCustomProperty("$rawContent");else{const _=new Eo(u.document).createDocumentFragment(u),w=s.data.htmlProcessor.domConverter.viewToDom(_),C=w.firstChild;for(;C.firstChild;)w.appendChild(C.firstChild);C.remove(),g=s.data.htmlProcessor.htmlWriter.getHtml(w)}d.writer.setAttribute("htmlContent",g,f);for(const{item:v}of s.editing.view.createRangeIn(u))d.consumable.consume(v,{name:!0});return f},converterPriority:"low"}),a.for("editingDowncast").elementToElement({model:{name:r.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(u,{writer:d})=>{const f=u.getAttribute("htmlElementName"),h=d.createRawElement(f);return u.hasAttribute("htmlCustomElementAttributes")&&rl(d,u.getAttribute("htmlCustomElementAttributes"),h),h}}),a.for("dataDowncast").elementToElement({model:{name:r.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(u,{writer:d})=>{const f=u.getAttribute("htmlElementName"),h=u.getAttribute("htmlContent"),g=d.createRawElement(f,null,(v,_)=>{_.setContentOf(v,h)});return u.hasAttribute("htmlCustomElementAttributes")&&rl(d,u.getAttribute("htmlCustomElementAttributes"),g),g}})})}}function o2e(n){try{document.createElement(n)}catch{return!1}return!0}class a2e extends Ne{static get pluginName(){return"GeneralHtmlSupport"}static get isOfficialPlugin(){return!0}static get requires(){return[Fi,DOe,MOe,$Oe,BOe,WOe,KOe,QOe,t2e,n2e,i2e,s2e]}init(){const t=this.editor,e=t.plugins.get(Fi);e.loadAllowedEmptyElementsConfig(t.config.get("htmlSupport.allowEmpty")||[]),e.loadAllowedConfig(t.config.get("htmlSupport.allow")||[]),e.loadDisallowedConfig(t.config.get("htmlSupport.disallow")||[])}getGhsAttributeNameForElement(t){const e=this.editor.plugins.get("DataSchema"),i=Array.from(e.getDefinitionsForView(t,!1)),r=i.find(s=>s.isInline&&!i[0].isObject);return r?r.model:Mo(t)}addModelHtmlClass(t,e,i){const r=this.editor.model,s=this.getGhsAttributeNameForElement(t);r.change(o=>{for(const a of Pf(r,i,s))If(o,a,s,"classes",l=>{for(const c of jn(e))l.add(c)})})}removeModelHtmlClass(t,e,i){const r=this.editor.model,s=this.getGhsAttributeNameForElement(t);r.change(o=>{for(const a of Pf(r,i,s))If(o,a,s,"classes",l=>{for(const c of jn(e))l.delete(c)})})}setModelHtmlAttributes(t,e,i){const r=this.editor.model,s=this.getGhsAttributeNameForElement(t);r.change(o=>{for(const a of Pf(r,i,s))If(o,a,s,"attributes",l=>{for(const[c,u]of Object.entries(e))l.set(c,u)})})}removeModelHtmlAttributes(t,e,i){const r=this.editor.model,s=this.getGhsAttributeNameForElement(t);r.change(o=>{for(const a of Pf(r,i,s))If(o,a,s,"attributes",l=>{for(const c of jn(e))l.delete(c)})})}setModelHtmlStyles(t,e,i){const r=this.editor.model,s=this.getGhsAttributeNameForElement(t);r.change(o=>{for(const a of Pf(r,i,s))If(o,a,s,"styles",l=>{for(const[c,u]of Object.entries(e))l.set(c,u)})})}removeModelHtmlStyles(t,e,i){const r=this.editor.model,s=this.getGhsAttributeNameForElement(t);r.change(o=>{for(const a of Pf(r,i,s))If(o,a,s,"styles",l=>{for(const c of jn(e))l.delete(c)})})}}function*Pf(n,t,e){if(t)if(!(Symbol.iterator in t)&&t.is("documentSelection")&&t.isCollapsed)n.schema.checkAttributeInSelection(t,e)&&(yield t);else for(const i of l2e(n,t,e))yield*i.getItems({shallow:!0})}function l2e(n,t,e){return!(Symbol.iterator in t)&&(t.is("node")||t.is("$text")||t.is("$textProxy"))?n.schema.checkAttribute(t,e)?[n.createRangeOn(t)]:[]:n.schema.getValidRanges(n.createSelection(t).getRanges(),e)}class c2e extends a8{toView(t){if(!/<(?:html|body|head|meta)(?:\s[^>]*)?>/i.test(t.trim().slice(0,1e4)))return super.toView(t);let e="",i="";t=t.trim().replace(/<\?xml\s[^?]*\?>/i,l=>(i=l,"")),t=t.trim().replace(/^<!DOCTYPE\s[^>]*?>/i,l=>(e=l,""));const r=this._toDom(t),s=this.domConverter.domToView(r,{skipComments:this.skipComments}),o=new Eo(s.document);o.setCustomProperty("$fullPageDocument",r.ownerDocument.documentElement.outerHTML,s);const a=Array.from(r.ownerDocument.querySelectorAll("head style"));return o.setCustomProperty("$fullPageHeadStyles",a,s),e&&o.setCustomProperty("$fullPageDocType",e,s),i&&o.setCustomProperty("$fullPageXmlDeclaration",i,s),s}toData(t){let e=super.toData(t);const i=t.getCustomProperty("$fullPageDocument"),r=t.getCustomProperty("$fullPageDocType"),s=t.getCustomProperty("$fullPageXmlDeclaration");return i&&(e=i.replace(/<\/body\s*>/,e+"$&"),r&&(e=r+`
`+e),s&&(e=s+`
`+e)),e}}class u2e extends Ne{static get pluginName(){return"FullPage"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("htmlSupport.fullPage",{allowRenderStylesFromHead:!1,sanitizeCss:e=>(mn("css-full-page-provide-sanitize-function"),{css:e,hasChanged:!1})}),t.data.processor=new c2e(t.data.viewDocument)}init(){const t=this.editor,e=["$fullPageDocument","$fullPageDocType","$fullPageXmlDeclaration","$fullPageHeadStyles"];t.model.schema.extend("$root",{allowAttributes:e}),t.data.on("toModel",(i,[r])=>{const s=t.model.document.getRoot();t.model.change(o=>{for(const a of e){const l=r.getCustomProperty(a);l&&o.setAttribute(a,l,s)}}),$L(t)&&this._renderStylesFromHead(s)},{priority:"low"}),t.data.on("toView",(i,[r])=>{if(!r.is("rootElement"))return;const s=r,o=i.return;if(!s.hasAttribute("$fullPageDocument"))return;const a=new Eo(o.document);for(const l of e){const c=s.getAttribute(l);c&&a.setCustomProperty(l,c,o)}},{priority:"low"}),t.data.on("set",()=>{const i=t.model.document.getRoot();t.model.change(r=>{for(const s of e)i.hasAttribute(s)&&r.removeAttribute(s,i)})},{priority:"high"}),t.data.on("get",(i,r)=>{r[0]||(r[0]={}),r[0].trim=!1},{priority:"high"})}destroy(){super.destroy(),$L(this.editor)&&this._removeStyleElementsFromDom()}_removeStyleElementsFromDom(){const t=Array.from(at.document.querySelectorAll(`[data-full-page-style-id="${this.editor.id}"]`));for(const e of t)e.remove()}_renderStyleElementsInDom(t){const e=this.editor,i=t.getAttribute("$fullPageHeadStyles");if(!i)return;const r=e.config.get("htmlSupport.fullPage.sanitizeCss");for(const s of i){s.setAttribute("data-full-page-style-id",e.id);const o=r(s.innerText);o.hasChanged&&(s.innerText=o.css),at.document.head.append(s)}}_renderStylesFromHead(t){this._removeStyleElementsFromDom(),this._renderStyleElementsInDom(t)}}function $L(n){return n.config.get("htmlSupport.fullPage.allowRenderStylesFromHead")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function d2e(n){return n.createContainerElement("span",{class:"image-inline"},n.createEmptyElement("img"))}function BL(n){return n.createContainerElement("figure",{class:"image"},[n.createEmptyElement("img"),n.createSlot("children")])}function j7(n,t){const e=n.plugins.get("ImageUtils"),i=n.plugins.has("ImageInlineEditing")&&n.plugins.has("ImageBlockEditing");return s=>e.isInlineImageView(s)?i&&(s.getStyle("display")=="block"||s.findAncestor(e.isBlockImageView)?"imageBlock":"imageInline")!==t?null:r(s):null;function r(s){const o={name:!0};return s.hasAttribute("src")&&(o.attributes=["src"]),o}}function RP(n,t){const e=gi(t.getSelectedBlocks());return!e||n.isObject(e)||e.isEmpty&&e.name!="listItem"?"imageBlock":"imageInline"}function Jy(n){return n&&n.endsWith("px")?parseInt(n):null}function Xy(n){const t=Jy(n.getStyle("width")),e=Jy(n.getStyle("height"));return!!(t&&e)}const f2e=/^(image|image-inline)$/;class Kr extends Ne{constructor(){super(...arguments);y(this,"_domEmitter",new(ds()))}static get pluginName(){return"ImageUtils"}static get isOfficialPlugin(){return!0}isImage(e){return this.isInlineImage(e)||this.isBlockImage(e)}isInlineImageView(e){return!!e&&e.is("element","img")}isBlockImageView(e){return!!e&&e.is("element","figure")&&e.hasClass("image")}insertImage(e={},i=null,r=null,s={}){const o=this.editor,a=o.model,l=a.document.selection,c=q7(o,i||l,r);e={...Object.fromEntries(l.getAttributes()),...e};for(const u in e)a.schema.checkAttribute(c,u)||delete e[u];return a.change(u=>{const{setImageSizes:d=!0}=s,f=u.createElement(c,e);return a.insertObject(f,i,null,{setSelection:"on",findOptimalPosition:!i&&c!="imageInline"?"auto":void 0}),f.parent?(d&&this.setImageNaturalSizeAttributes(f),f):null})}setImageNaturalSizeAttributes(e){const i=e.getAttribute("src");i&&(e.getAttribute("width")||e.getAttribute("height")||this.editor.model.change(r=>{const s=new at.window.Image;this._domEmitter.listenTo(s,"load",()=>{!e.getAttribute("width")&&!e.getAttribute("height")&&this.editor.model.enqueueChange(r.batch,o=>{o.setAttribute("width",s.naturalWidth,e),o.setAttribute("height",s.naturalHeight,e)}),this._domEmitter.stopListening(s,"load")}),s.src=i}))}getClosestSelectedImageWidget(e){const i=e.getFirstPosition();if(!i)return null;const r=e.getSelectedElement();if(r&&this.isImageWidget(r))return r;let s=i.parent;for(;s;){if(s.is("element")&&this.isImageWidget(s))return s;s=s.parent}return null}getClosestSelectedImageElement(e){const i=e.getSelectedElement();return this.isImage(i)?i:e.getFirstPosition().findAncestor("imageBlock")}getImageWidgetFromImageView(e){return e.findAncestor({classes:f2e})}isImageAllowed(){const i=this.editor.model.document.selection;return h2e(this.editor,i)&&m2e(i)}toImageWidget(e,i,r){return i.setCustomProperty("image",!0,e),tf(e,i,{label:()=>{const a=this.findViewImgElement(e).getAttribute("alt");return a?`${a} ${r}`:r}})}isImageWidget(e){return!!e.getCustomProperty("image")&&Mi(e)}isBlockImage(e){return!!e&&e.is("element","imageBlock")}isInlineImage(e){return!!e&&e.is("element","imageInline")}findViewImgElement(e){if(this.isInlineImageView(e))return e;const i=this.editor.editing.view;for(const{item:r}of i.createRangeIn(e))if(this.isInlineImageView(r))return r}destroy(){return this._domEmitter.stopListening(),super.destroy()}}function h2e(n,t){if(q7(n,t,null)=="imageBlock"){const i=g2e(t,n.model);if(n.model.schema.checkChild(i,"imageBlock"))return!0}else if(n.model.schema.checkChild(t.focus,"imageInline"))return!0;return!1}function m2e(n){return[...n.focus.getAncestors()].every(t=>!t.is("element","imageBlock"))}function g2e(n,t){const i=CP(n,t).start.parent;return i.isEmpty&&!i.is("element","$root")?i.parent:i}function q7(n,t,e){const i=n.model.schema,r=n.config.get("image.insert.type");return n.plugins.has("ImageBlockEditing")?n.plugins.has("ImageInlineEditing")?e||(r==="inline"?"imageInline":r!=="auto"?"imageBlock":t.is("selection")?RP(i,t):i.checkChild(t,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}const p2e=new RegExp(String(/^(http(s)?:\/\/)?[\w-]+\.[\w.~:/[\]@!$&'()*+,;=%-]+/.source+/\.(jpg|jpeg|png|gif|ico|webp|JPG|JPEG|PNG|GIF|ICO|WEBP)/.source+/(\?[\w.~:/[\]@!$&'()*+,;=%-]*)?/.source+/(#[\w.~:/[\]@!$&'()*+,;=%-]*)?$/.source));class v2e extends Ne{constructor(e){super(e);y(this,"_timeoutId");y(this,"_positionToInsert");this._timeoutId=null,this._positionToInsert=null}static get requires(){return[SP,Kr,PP,hl]}static get pluginName(){return"AutoImage"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=e.model.document,r=e.plugins.get("ClipboardPipeline");this.listenTo(r,"inputTransformation",()=>{const s=i.selection.getFirstRange(),o=Ii.fromPosition(s.start);o.stickiness="toPrevious";const a=Ii.fromPosition(s.end);a.stickiness="toNext",i.once("change:data",()=>{this._embedImageBetweenPositions(o,a),o.detach(),a.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&(at.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedImageBetweenPositions(e,i){const r=this.editor,s=new Ts(e,i),o=s.getWalker({ignoreElementEnd:!0}),a=Object.fromEntries(r.model.document.selection.getAttributes()),l=this.editor.plugins.get("ImageUtils");let c="";for(const u of o)u.item.is("$textProxy")&&(c+=u.item.data);if(c=c.trim(),!c.match(p2e)){s.detach();return}this._positionToInsert=Ii.fromPosition(e),this._timeoutId=setTimeout(()=>{if(!r.commands.get("insertImage").isEnabled){s.detach();return}r.model.change(f=>{this._timeoutId=null,f.remove(s),s.detach();let h;this._positionToInsert.root.rootName!=="$graveyard"&&(h=this._positionToInsert.toPosition()),l.insertImage({...a,src:c},h),this._positionToInsert.detach(),this._positionToInsert=null}),r.plugins.get("Delete").requestUndoOnBackspace()},100)}}class b2e extends Nt{refresh(){const i=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!i,this.isEnabled&&i.hasAttribute("alt")?this.value=i.getAttribute("alt"):this.value=!1}execute(t){const e=this.editor,i=e.plugins.get("ImageUtils"),r=e.model,s=i.getClosestSelectedImageElement(r.document.selection);r.change(o=>{o.setAttribute("alt",t.newValue,s)})}}class w2e extends Ne{static get requires(){return[Kr]}static get pluginName(){return"ImageTextAlternativeEditing"}static get isOfficialPlugin(){return!0}init(){this.editor.commands.add("imageTextAlternative",new b2e(this.editor))}}class y2e extends dt{constructor(e){super(e);y(this,"focusTracker");y(this,"keystrokes");y(this,"labeledInput");y(this,"backButtonView");y(this,"saveButtonView");y(this,"children");y(this,"_focusables");y(this,"_focusCycler");this.focusTracker=new Mn,this.keystrokes=new oi,this.backButtonView=this._createBackButton(),this.saveButtonView=this._createSaveButton(),this.labeledInput=this._createLabeledInputView(),this.children=this.createCollection([this._createHeaderView()]),this.children.add(new Cr(e,{children:[this.labeledInput,this.saveButtonView],class:["ck-form__row_with-submit","ck-form__row_large-top-padding"]})),this._focusables=new tr,this.keystrokes.set("Esc",(i,r)=>{this.fire("cancel"),r()}),this._focusCycler=new ur({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),bl({view:this}),[this.backButtonView,this.labeledInput,this.saveButtonView].forEach(i=>{this._focusables.add(i),this.focusTracker.add(i.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createBackButton(){const e=this.locale.t,i=new wt(this.locale);return i.set({class:"ck-button-back",label:e("Back"),icon:sc,tooltip:!0}),i.delegate("execute").to(this,"cancel"),i}_createSaveButton(){const e=this.locale.t,i=new wt(this.locale);return i.set({label:e("Save"),withText:!0,type:"submit",class:"ck-button-action ck-button-bold"}),i}_createHeaderView(){const e=this.locale.t,i=new wl(this.locale,{label:e("Text Alternative")});return i.children.add(this.backButtonView,0),i}_createLabeledInputView(){const e=this.locale.t,i=new Ri(this.locale,Ss);return i.label=e("Text alternative"),i.class="ck-labeled-field-view_full-width",i}}function _2e(n){const t=n.plugins.get("ContextualBalloon");if(n.plugins.get("ImageUtils").getClosestSelectedImageWidget(n.editing.view.document.selection)){const i=VP(n);t.updatePosition(i)}}function VP(n){const t=n.editing.view,e=ar.defaultPositions,i=n.plugins.get("ImageUtils");return{target:t.domConverter.mapViewToDom(i.getClosestSelectedImageWidget(t.document.selection)),positions:[e.northArrowSouth,e.northArrowSouthWest,e.northArrowSouthEast,e.southArrowNorth,e.southArrowNorthWest,e.southArrowNorthEast,e.viewportStickyNorth]}}class k2e extends Ne{constructor(){super(...arguments);y(this,"_balloon");y(this,"_form")}static get requires(){return[bo]}static get pluginName(){return"ImageTextAlternativeUI"}static get isOfficialPlugin(){return!0}init(){this._createButton()}destroy(){super.destroy(),this._form&&this._form.destroy()}_createButton(){const e=this.editor,i=e.t;e.ui.componentFactory.add("imageTextAlternative",r=>{const s=e.commands.get("imageTextAlternative"),o=new wt(r);return o.set({label:i("Change image text alternative"),icon:UTe,tooltip:!0}),o.bind("isEnabled").to(s,"isEnabled"),o.bind("isOn").to(s,"value",a=>!!a),this.listenTo(o,"execute",()=>{this._showForm()}),o})}_createForm(){const e=this.editor,r=e.editing.view.document,s=e.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(Nd(y2e))(e.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{e.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this.listenTo(e.ui,"update",()=>{s.getClosestSelectedImageWidget(r.selection)?this._isVisible&&_2e(e):this._hideForm(!0)}),pc({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;this._form||this._createForm();const e=this.editor,i=e.commands.get("imageTextAlternative"),r=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:VP(e)}),r.fieldView.value=r.fieldView.element.value=i.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}class DP extends Ne{static get requires(){return[w2e,k2e]}static get pluginName(){return"ImageTextAlternative"}static get isOfficialPlugin(){return!0}}function E2e(n){const t=(e,i,r)=>{if(!r.consumable.test(i.viewItem,{name:!0,classes:"image"}))return;const s=n.findViewImgElement(i.viewItem);if(!s||!r.consumable.test(s,{name:!0}))return;r.consumable.consume(i.viewItem,{name:!0,classes:"image"});const o=r.convertItem(s,i.modelCursor),a=gi(o.modelRange.getItems());if(!a){r.consumable.revert(i.viewItem,{name:!0,classes:"image"});return}r.convertChildren(i.viewItem,a),r.updateConversionResult(a,i)};return e=>{e.on("element:figure",t)}}function G7(n,t){const e=(i,r,s)=>{if(!s.consumable.consume(r.item,i.name))return;const o=s.writer,a=s.mapper.toViewElement(r.item),l=n.findViewImgElement(a);r.attributeNewValue===null?(o.removeAttribute("srcset",l),o.removeAttribute("sizes",l)):r.attributeNewValue&&(o.setAttribute("srcset",r.attributeNewValue,l),o.setAttribute("sizes","100vw",l))};return i=>{i.on(`attribute:srcset:${t}`,e)}}function e_(n,t,e){const i=(r,s,o)=>{if(!o.consumable.consume(s.item,r.name))return;const a=o.writer,l=o.mapper.toViewElement(s.item),c=n.findViewImgElement(l);a.setAttribute(s.attributeKey,s.attributeNewValue||"",c)};return r=>{r.on(`attribute:${e}:${t}`,i)}}class NP extends Aa{observe(t){this.listenTo(t,"load",(e,i)=>{const r=i.target;this.checkShouldIgnoreEventFromTarget(r)||r.tagName=="IMG"&&this._fireEvents(i)},{useCapture:!0})}stopObserving(t){this.stopListening(t)}_fireEvents(t){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",t))}}class C2e extends Nt{constructor(t){super(t);const e=t.config.get("image.insert.type");t.plugins.has("ImageBlockEditing")||e==="block"&&mn("image-block-plugin-required"),t.plugins.has("ImageInlineEditing")||e==="inline"&&mn("image-inline-plugin-required")}refresh(){const t=this.editor.plugins.get("ImageUtils");this.isEnabled=t.isImageAllowed()}execute(t){const e=jn(t.source),i=this.editor.model.document.selection,r=this.editor.plugins.get("ImageUtils"),s=Object.fromEntries(i.getAttributes());e.forEach((o,a)=>{const l=i.getSelectedElement();if(typeof o=="string"&&(o={src:o}),a&&l&&r.isImage(l)){const c=this.editor.model.createPositionAfter(l);r.insertImage({...o,...s},c,t.imageType)}else t.breakBlock?r.insertImage({...o,...s},i.getFirstPosition(),t.imageType):r.insertImage({...o,...s},null,t.imageType)})}}class T2e extends Nt{constructor(t){super(t),this.decorate("cleanupImage")}refresh(){const e=this.editor.plugins.get("ImageUtils"),i=this.editor.model.document.selection.getSelectedElement();this.isEnabled=e.isImage(i),this.value=this.isEnabled?i.getAttribute("src"):null}execute(t){const e=this.editor.model.document.selection.getSelectedElement(),i=this.editor.plugins.get("ImageUtils");this.editor.model.change(r=>{r.setAttribute("src",t.source,e),this.cleanupImage(r,e),i.setImageNaturalSizeAttributes(e)})}cleanupImage(t,e){t.removeAttribute("srcset",e),t.removeAttribute("sizes",e),t.removeAttribute("sources",e),t.removeAttribute("width",e),t.removeAttribute("height",e),t.removeAttribute("alt",e)}}class K7 extends Ne{static get requires(){return[Kr]}static get pluginName(){return"ImageEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.conversion;t.editing.view.addObserver(NP),e.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:"srcset"});const i=new C2e(t),r=new T2e(t);t.commands.add("insertImage",i),t.commands.add("replaceImageSource",r),t.commands.add("imageInsert",i)}}class Y7 extends Ne{static get requires(){return[Kr]}static get pluginName(){return"ImageSizeAttributes"}static get isOfficialPlugin(){return!0}afterInit(){this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline")}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["width","height"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["width","height"]})}_registerConverters(t){const e=this.editor,i=e.plugins.get("ImageUtils"),r=t==="imageBlock"?"figure":"img";e.conversion.for("upcast").attributeToAttribute({view:{name:r,styles:{width:/.+/}},model:{key:"width",value:o=>Xy(o)?Jy(o.getStyle("width")):null}}).attributeToAttribute({view:{name:r,key:"width"},model:"width"}).attributeToAttribute({view:{name:r,styles:{height:/.+/}},model:{key:"height",value:o=>Xy(o)?Jy(o.getStyle("height")):null}}).attributeToAttribute({view:{name:r,key:"height"},model:"height"}),e.conversion.for("editingDowncast").add(o=>{s(o,"width","width",!0,!0),s(o,"height","height",!0,!0)}),e.conversion.for("dataDowncast").add(o=>{s(o,"width","width",!1),s(o,"height","height",!1)}),e.conversion.for("upcast").add(o=>{o.on("element:img",(a,l,c)=>{const u=l.viewItem.getAttribute("width"),d=l.viewItem.getAttribute("height");u&&d&&c.consumable.consume(l.viewItem,{styles:["aspect-ratio"]})})});function s(o,a,l,c,u=!1){o.on(`attribute:${a}:${t}`,(d,f,h)=>{if(!h.consumable.consume(f.item,d.name))return;const g=h.writer,v=h.mapper.toViewElement(f.item),_=i.findViewImgElement(v);f.attributeNewValue!==null?g.setAttribute(l,f.attributeNewValue,_):g.removeAttribute(l,_);const w=f.item.getAttribute("width"),C=f.item.getAttribute("height"),k=w&&C;if(k&&u&&g.setAttribute("loading","lazy",_),f.item.hasAttribute("sources"))return;const E=f.item.hasAttribute("resizedWidth");t==="imageInline"&&!E&&!c||k&&g.setStyle("aspect-ratio",`${w}/${C}`,_)})}}}class Q7 extends Nt{constructor(e,i){super(e);y(this,"_modelElementName");this._modelElementName=i}refresh(){const i=this.editor.plugins.get("ImageUtils"),r=i.getClosestSelectedImageElement(this.editor.model.document.selection);this._modelElementName==="imageBlock"?this.isEnabled=i.isInlineImage(r):this.isEnabled=i.isBlockImage(r)}execute(e={}){const i=this.editor,r=this.editor.model,s=i.plugins.get("ImageUtils"),o=s.getClosestSelectedImageElement(r.document.selection),a=Object.fromEntries(o.getAttributes());return!a.src&&!a.uploadId?null:r.change(l=>{const{setImageSizes:c=!0}=e,u=Array.from(r.markers).filter(h=>h.getRange().containsItem(o)),d=s.insertImage(a,r.createSelection(o,"on"),this._modelElementName,{setImageSizes:c});if(!d)return null;const f=l.createRangeOn(d);for(const h of u){const g=h.getRange(),v=g.root.rootName!="$graveyard"?g.getJoined(f,!0):f;l.updateMarker(h,{range:v})}return{oldElement:o,newElement:d}})}}class Z7 extends Ne{static get requires(){return[Kr]}static get pluginName(){return"ImagePlaceholder"}static get isOfficialPlugin(){return!0}afterInit(){this._setupSchema(),this._setupConversion(),this._setupLoadListener()}_setupSchema(){const t=this.editor.model.schema;t.isRegistered("imageBlock")&&t.extend("imageBlock",{allowAttributes:["placeholder"]}),t.isRegistered("imageInline")&&t.extend("imageInline",{allowAttributes:["placeholder"]})}_setupConversion(){const t=this.editor,e=t.conversion,i=t.plugins.get("ImageUtils");e.for("editingDowncast").add(r=>{r.on("attribute:placeholder",(s,o,a)=>{if(!a.consumable.test(o.item,s.name)||!o.item.is("element","imageBlock")&&!o.item.is("element","imageInline"))return;a.consumable.consume(o.item,s.name);const l=a.writer,c=a.mapper.toViewElement(o.item),u=i.findViewImgElement(c);o.attributeNewValue?(l.addClass("image_placeholder",u),l.setStyle("background-image",`url(${o.attributeNewValue})`,u),l.setCustomProperty("editingPipeline:doNotReuseOnce",!0,u)):(l.removeClass("image_placeholder",u),l.removeStyle("background-image",u))})})}_setupLoadListener(){const t=this.editor,e=t.model,i=t.editing,r=i.view,s=t.plugins.get("ImageUtils");r.addObserver(NP),this.listenTo(r.document,"imageLoaded",(o,a)=>{const l=r.domConverter.mapDomToView(a.target);if(!l)return;const c=s.getImageWidgetFromImageView(l);if(!c)return;const u=i.mapper.toModelElement(c);!u||!u.hasAttribute("placeholder")||e.enqueueChange({isUndoable:!1},d=>{d.removeAttribute("placeholder",u)})})}}class J7 extends Ne{static get requires(){return[K7,Y7,Kr,Z7,Qs]}static get pluginName(){return"ImageBlockEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.model.schema.register("imageBlock",{inheritAllFrom:"$blockObject",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),t.plugins.has("ImageInlineEditing")&&(t.commands.add("imageTypeBlock",new Q7(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const t=this.editor,e=t.t,i=t.conversion,r=t.plugins.get("ImageUtils");i.for("dataDowncast").elementToStructure({model:"imageBlock",view:(s,{writer:o})=>BL(o)}),i.for("editingDowncast").elementToStructure({model:"imageBlock",view:(s,{writer:o})=>r.toImageWidget(BL(o),o,e("image widget"))}),i.for("downcast").add(e_(r,"imageBlock","src")).add(e_(r,"imageBlock","alt")).add(G7(r,"imageBlock")),i.for("upcast").elementToElement({view:j7(t,"imageBlock"),model:(s,{writer:o})=>o.createElement("imageBlock",s.hasAttribute("src")?{src:s.getAttribute("src")}:void 0)}).add(E2e(r))}_setupClipboardIntegration(){const t=this.editor,e=t.model,i=t.editing.view,r=t.plugins.get("ImageUtils"),s=t.plugins.get("ClipboardPipeline");this.listenTo(s,"inputTransformation",(o,a)=>{const l=Array.from(a.content.getChildren());let c;if(!l.every(r.isInlineImageView))return;a.targetRanges?c=t.editing.mapper.toModelRange(a.targetRanges[0]):c=e.document.selection.getFirstRange();const u=e.createSelection(c);if(RP(e.schema,u)==="imageBlock"){const d=new Eo(i.document),f=l.map(h=>d.createElement("figure",{class:"image"},h));a.content=d.createDocumentFragment(f)}}),this.listenTo(s,"contentInsertion",(o,a)=>{a.method==="paste"&&e.change(l=>{const c=l.createRangeIn(a.content);for(const u of c.getItems())u.is("element","imageBlock")&&r.setImageNaturalSizeAttributes(u)})})}}class S2e extends dt{constructor(e,i=[]){super(e);y(this,"focusTracker");y(this,"keystrokes");y(this,"_focusables");y(this,"_focusCycler");y(this,"children");this.focusTracker=new Mn,this.keystrokes=new oi,this._focusables=new tr,this.children=this.createCollection(),this._focusCycler=new ur({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});for(const r of i)this.children.add(r),this._focusables.add(r),r instanceof gP&&this._focusables.addMany(r.children);this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-form"],tabindex:-1},children:this.children})}render(){super.render(),bl({view:this});for(const i of this._focusables)this.focusTracker.add(i.element);this.keystrokes.listenTo(this.element);const e=i=>i.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}class z0 extends Ne{constructor(e){super(e);y(this,"dropdownView");y(this,"_integrations",new Map);e.config.define("image.insert.integrations",["upload","assetManager","url"])}static get pluginName(){return"ImageInsertUI"}static get isOfficialPlugin(){return!0}static get requires(){return[Kr]}init(){const e=this.editor,i=e.model.document.selection,r=e.plugins.get("ImageUtils");this.set("isImageSelected",!1),this.listenTo(e.model.document,"change",()=>{this.isImageSelected=r.isImage(i.getSelectedElement())});const s=a=>this._createToolbarComponent(a),o=a=>this._createMenuBarComponent(a);e.ui.componentFactory.add("insertImage",s),e.ui.componentFactory.add("imageInsert",s),e.ui.componentFactory.add("menuBar:insertImage",o)}registerIntegration({name:e,observable:i,buttonViewCreator:r,formViewCreator:s,menuBarButtonViewCreator:o,requiresForm:a=!1,override:l=!1}){this._integrations.has(e)&&!l&&mn("image-insert-integration-exists",{name:e}),this._integrations.set(e,{observable:i,buttonViewCreator:r,menuBarButtonViewCreator:o,formViewCreator:s,requiresForm:a})}_createToolbarComponent(e){const i=this.editor,r=e.t,s=this._prepareIntegrations();if(!s.length)return null;let o;const a=s[0];if(s.length==1){if(!a.requiresForm)return a.buttonViewCreator(!0);o=a.buttonViewCreator(!0)}else{const u=a.buttonViewCreator(!1);o=new Lm(e,u),o.tooltip=!0,o.bind("label").to(this,"isImageSelected",d=>r(d?"Replace image":"Insert image"))}const l=this.dropdownView=as(e,o),c=s.map(({observable:u})=>typeof u=="function"?u():u);return l.bind("isEnabled").toMany(c,"isEnabled",(...u)=>u.some(d=>d)),l.once("change:isOpen",()=>{const u=s.flatMap(({formViewCreator:f})=>f(s.length==1)),d=new S2e(i.locale,u);l.panelView.children.add(d)}),l}_createMenuBarComponent(e){const i=e.t,r=this._prepareIntegrations();if(!r.length)return null;const s=r.flatMap(({menuBarButtonViewCreator:l})=>l(r.length==1)),o=new ma(e),a=new rm(e);o.panelView.children.add(a),o.buttonView.set({icon:nTe,label:i("Image")});for(const l of s){const c=new Mm(e,o);c.children.add(l),a.items.add(c),l.delegate("execute").to(o)}return o}_prepareIntegrations(){const i=this.editor.config.get("image.insert.integrations"),r=[];if(!i.length)return mn("image-insert-integrations-not-specified"),r;for(const s of i){if(!this._integrations.has(s)){["upload","assetManager","url"].includes(s)||mn("image-insert-unknown-integration",{item:s});continue}r.push(this._integrations.get(s))}return r.length||mn("image-insert-integrations-not-registered"),r}}class A2e extends Ne{static get requires(){return[J7,Ru,DP,z0]}static get pluginName(){return"ImageBlock"}static get isOfficialPlugin(){return!0}}class I2e extends Ne{static get requires(){return[K7,Y7,Kr,Z7,Qs]}static get pluginName(){return"ImageInlineEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.model.schema.register("imageInline",{inheritAllFrom:"$inlineObject",allowAttributes:["alt","src","srcset"],disallowIn:["caption"]}),this._setupConversion(),t.plugins.has("ImageBlockEditing")&&(t.commands.add("imageTypeInline",new Q7(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const t=this.editor,e=t.t,i=t.conversion,r=t.plugins.get("ImageUtils");i.for("dataDowncast").elementToElement({model:"imageInline",view:(s,{writer:o})=>o.createEmptyElement("img")}),i.for("editingDowncast").elementToStructure({model:"imageInline",view:(s,{writer:o})=>r.toImageWidget(d2e(o),o,e("image widget"))}),i.for("downcast").add(e_(r,"imageInline","src")).add(e_(r,"imageInline","alt")).add(G7(r,"imageInline")),i.for("upcast").elementToElement({view:j7(t,"imageInline"),model:(s,{writer:o})=>o.createElement("imageInline",s.hasAttribute("src")?{src:s.getAttribute("src")}:void 0)})}_setupClipboardIntegration(){const t=this.editor,e=t.model,i=t.editing.view,r=t.plugins.get("ImageUtils"),s=t.plugins.get("ClipboardPipeline");this.listenTo(s,"inputTransformation",(o,a)=>{const l=Array.from(a.content.getChildren());let c;if(!l.every(r.isBlockImageView))return;a.targetRanges?c=t.editing.mapper.toModelRange(a.targetRanges[0]):c=e.document.selection.getFirstRange();const u=e.createSelection(c);if(RP(e.schema,u)==="imageInline"){const d=new Eo(i.document),f=l.map(h=>h.childCount===1?(Array.from(h.getAttributes()).forEach(g=>d.setAttribute(...g,r.findViewImgElement(h))),h.getChild(0)):h);a.content=d.createDocumentFragment(f)}}),this.listenTo(s,"contentInsertion",(o,a)=>{a.method==="paste"&&e.change(l=>{const c=l.createRangeIn(a.content);for(const u of c.getItems())u.is("element","imageInline")&&r.setImageNaturalSizeAttributes(u)})})}}class P2e extends Ne{static get requires(){return[I2e,Ru,DP,z0]}static get pluginName(){return"ImageInline"}static get isOfficialPlugin(){return!0}}class X7 extends Ne{static get pluginName(){return"ImageCaptionUtils"}static get isOfficialPlugin(){return!0}static get requires(){return[Kr]}getCaptionFromImageModelElement(t){for(const e of t.getChildren())if(e&&e.is("element","caption"))return e;return null}getCaptionFromModelSelection(t){const e=this.editor.plugins.get("ImageUtils"),i=t.getFirstPosition().findAncestor("caption");return i&&e.isBlockImage(i.parent)?i:null}matchImageCaptionViewElement(t){const e=this.editor.plugins.get("ImageUtils");return t.name=="figcaption"&&e.isBlockImageView(t.parent)?{name:!0}:null}}class x2e extends Nt{refresh(){const t=this.editor,e=t.plugins.get("ImageCaptionUtils"),i=t.plugins.get("ImageUtils");if(!t.plugins.has(J7)){this.isEnabled=!1,this.value=!1;return}const r=t.model.document.selection,s=r.getSelectedElement();if(!s){const o=e.getCaptionFromModelSelection(r);this.isEnabled=!!o,this.value=!!o;return}this.isEnabled=i.isImage(s),this.isEnabled?this.value=!!e.getCaptionFromImageModelElement(s):this.value=!1}execute(t={}){const{focusCaptionOnShow:e}=t;this.editor.model.change(i=>{this.value?this._hideImageCaption(i):this._showImageCaption(i,e)})}_showImageCaption(t,e){const r=this.editor.model.document.selection,s=this.editor.plugins.get("ImageCaptionEditing"),o=this.editor.plugins.get("ImageUtils");let a=r.getSelectedElement();const l=s._getSavedCaption(a);o.isInlineImage(a)&&(this.editor.execute("imageTypeBlock"),a=r.getSelectedElement());const c=l||t.createElement("caption");t.append(c,a),e&&t.setSelection(c,"in")}_hideImageCaption(t){const e=this.editor,i=e.model.document.selection,r=e.plugins.get("ImageCaptionEditing"),s=e.plugins.get("ImageCaptionUtils");let o=i.getSelectedElement(),a;o?a=s.getCaptionFromImageModelElement(o):(a=s.getCaptionFromModelSelection(i),o=a.parent),r._saveCaption(o,a),t.setSelection(o,"on"),t.remove(a)}}class O2e extends Ne{constructor(e){super(e);y(this,"_savedCaptionsMap");this._savedCaptionsMap=new WeakMap}static get requires(){return[Kr,X7]}static get pluginName(){return"ImageCaptionEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=e.model.schema;i.isRegistered("caption")?i.extend("caption",{allowIn:"imageBlock"}):i.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleImageCaption",new x2e(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration(),this._registerCaptionReconversion()}_setupConversion(){const e=this.editor,i=e.editing.view,r=e.plugins.get("ImageUtils"),s=e.plugins.get("ImageCaptionUtils"),o=e.t;e.conversion.for("upcast").elementToElement({view:a=>s.matchImageCaptionViewElement(a),model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(a,{writer:l})=>r.isBlockImage(a.parent)?l.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(a,{writer:l})=>{if(!r.isBlockImage(a.parent))return null;const c=l.createEditableElement("figcaption");l.setCustomProperty("imageCaption",!0,c),c.placeholder=o("Enter image caption"),KI({view:i,element:c,keepOnFocus:!0});const u=a.parent.getAttribute("alt"),d=u?o("Caption for image: %0",[u]):o("Caption for the image");return EP(c,l,{label:d})}})}_setupImageTypeCommandsIntegration(){const e=this.editor,i=e.plugins.get("ImageUtils"),r=e.plugins.get("ImageCaptionUtils"),s=e.commands.get("imageTypeInline"),o=e.commands.get("imageTypeBlock"),a=l=>{if(!l.return)return;const{oldElement:c,newElement:u}=l.return;/* istanbul ignore if: paranoid check -- @preserve */if(!c)return;if(i.isBlockImage(c)){const f=r.getCaptionFromImageModelElement(c);if(f){this._saveCaption(u,f);return}}const d=this._getSavedCaption(c);d&&this._saveCaption(u,d)};s&&this.listenTo(s,"execute",a,{priority:"low"}),o&&this.listenTo(o,"execute",a,{priority:"low"})}_getSavedCaption(e){const i=this._savedCaptionsMap.get(e);return i?xi.fromJSON(i):null}_saveCaption(e,i){this._savedCaptionsMap.set(e,i.toJSON())}_registerCaptionReconversion(){const e=this.editor,i=e.model,r=e.plugins.get("ImageUtils"),s=e.plugins.get("ImageCaptionUtils");i.document.on("change:data",()=>{const o=i.document.differ.getChanges();for(const a of o){if(a.attributeKey!=="alt")continue;const l=a.range.start.nodeAfter;if(r.isBlockImage(l)){const c=s.getCaptionFromImageModelElement(l);if(!c)return;e.editing.reconvertItem(c)}}})}}class R2e extends Ne{static get requires(){return[X7]}static get pluginName(){return"ImageCaptionUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view,i=t.plugins.get("ImageCaptionUtils"),r=t.t;t.ui.componentFactory.add("toggleImageCaption",s=>{const o=t.commands.get("toggleImageCaption"),a=new wt(s);return a.set({icon:P8,tooltip:!0,isToggleable:!0}),a.bind("isOn","isEnabled").to(o,"value","isEnabled"),a.bind("label").to(o,"value",l=>r(l?"Toggle caption off":"Toggle caption on")),this.listenTo(a,"execute",()=>{t.execute("toggleImageCaption",{focusCaptionOnShow:!0});const l=i.getCaptionFromModelSelection(t.model.document.selection);if(l){const c=t.editing.mapper.toViewElement(l);e.scrollToTheSelection(),e.change(u=>{u.addClass("image__caption_highlighted",c)})}t.editing.view.focus()}),a})}}class V2e extends Ne{static get requires(){return[O2e,R2e]}static get pluginName(){return"ImageCaption"}static get isOfficialPlugin(){return!0}}function eH(n){const t=n.map(e=>e.replace("+","\\+"));return new RegExp(`^image\\/(${t.join("|")})$`)}function D2e(n){return new Promise((t,e)=>{const i=n.getAttribute("src");fetch(i).then(r=>r.blob()).then(r=>{const s=tH(r,i),a=`image.${s.replace("image/","")}`,l=new File([r],a,{type:s});t(l)}).catch(r=>r&&r.name==="TypeError"?L2e(i).then(t).catch(e):e(r))})}function N2e(n,t){return!n.isInlineImageView(t)||!t.getAttribute("src")?!1:!!t.getAttribute("src").match(/^data:image\/\w+;base64,/g)||!!t.getAttribute("src").match(/^blob:/g)}function tH(n,t){return n.type?n.type:t.match(/data:(image\/\w+);base64/)?t.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}function L2e(n){return M2e(n).then(t=>{const e=tH(t,n),r=`image.${e.replace("image/","")}`;return new File([t],r,{type:e})})}function M2e(n){return new Promise((t,e)=>{const i=at.document.createElement("img");i.addEventListener("load",()=>{const r=at.document.createElement("canvas");r.width=i.width,r.height=i.height,r.getContext("2d").drawImage(i,0,0),r.toBlob(o=>o?t(o):e())}),i.addEventListener("error",()=>e()),i.src=n})}class $2e extends Ne{static get pluginName(){return"ImageUploadUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("uploadImage",()=>this._createToolbarButton()),t.ui.componentFactory.add("imageUpload",()=>this._createToolbarButton()),t.ui.componentFactory.add("menuBar:uploadImage",()=>this._createMenuBarButton("standalone")),t.plugins.has("ImageInsertUI")&&t.plugins.get("ImageInsertUI").registerIntegration({name:"upload",observable:()=>t.commands.get("uploadImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:e=>this._createMenuBarButton(e?"insertOnly":"insertNested")})}_createButton(t){const e=this.editor,i=e.locale,r=e.commands.get("uploadImage"),s=e.config.get("image.upload.types"),o=eH(s),a=new t(e.locale),l=i.t;return a.set({acceptedType:s.map(c=>`image/${c}`).join(","),allowMultipleFiles:!0,label:l("Upload from computer"),icon:iTe}),a.bind("isEnabled").to(r),a.on("done",(c,u)=>{const d=Array.from(u).filter(f=>o.test(f.type));d.length&&(e.execute("uploadImage",{file:d}),e.editing.view.focus())}),a}_createToolbarButton(){const t=this.editor.locale.t,e=this.editor.plugins.get("ImageInsertUI"),i=this.editor.commands.get("uploadImage"),r=this._createButton(NN);return r.tooltip=!0,r.bind("label").to(e,"isImageSelected",i,"isAccessAllowed",(s,o)=>t(o?s?"Replace image from computer":"Upload image from computer":"You have no image upload permissions.")),r}_createDropdownButton(){const t=this.editor.locale.t,e=this.editor.plugins.get("ImageInsertUI"),i=this._createButton(NN);return i.withText=!0,i.bind("label").to(e,"isImageSelected",r=>t(r?"Replace from computer":"Upload from computer")),i.on("execute",()=>{e.dropdownView.isOpen=!1}),i}_createMenuBarButton(t){const e=this.editor.locale.t,i=this._createButton(h7);switch(i.withText=!0,t){case"standalone":i.label=e("Image from computer");break;case"insertOnly":i.label=e("Image");break;case"insertNested":i.label=e("From computer");break}return i}}class B2e extends Ne{constructor(e){super(e);y(this,"placeholder");y(this,"uploadStatusChange",(e,i,r)=>{const s=this.editor,o=i.item,a=o.getAttribute("uploadId");if(!r.consumable.consume(i.item,e.name))return;const l=s.plugins.get("ImageUtils"),c=s.plugins.get(dh),u=a?i.attributeNewValue:null,d=this.placeholder,f=s.editing.mapper.toViewElement(o),h=r.writer;if(u=="reading"){FL(f,h),UL(l,d,f,h);return}if(u=="uploading"){const g=c.loaders.get(a);FL(f,h),g?(zL(f,h),U2e(f,h,g,s.editing.view),q2e(l,f,h,g)):UL(l,d,f,h);return}u=="complete"&&c.loaders.get(a)&&H2e(f,h,s.editing.view),z2e(f,h),zL(f,h),F2e(f,h)});this.placeholder="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}static get pluginName(){return"ImageUploadProgress"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.plugins.has("ImageBlockEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",this.uploadStatusChange),e.plugins.has("ImageInlineEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",this.uploadStatusChange)}}function FL(n,t){n.hasClass("ck-appear")||t.addClass("ck-appear",n)}function F2e(n,t){t.removeClass("ck-appear",n)}function UL(n,t,e,i){e.hasClass("ck-image-upload-placeholder")||i.addClass("ck-image-upload-placeholder",e);const r=n.findViewImgElement(e);r.getAttribute("src")!==t&&i.setAttribute("src",t,r),nH(e,"placeholder")||i.insert(i.createPositionAfter(r),j2e(i))}function zL(n,t){n.hasClass("ck-image-upload-placeholder")&&t.removeClass("ck-image-upload-placeholder",n),iH(n,t,"placeholder")}function U2e(n,t,e,i){const r=W2e(t);t.insert(t.createPositionAt(n,"end"),r),e.on("change:uploadedPercent",(s,o,a)=>{i.change(l=>{l.setStyle("width",a+"%",r)})})}function z2e(n,t){iH(n,t,"progressBar")}function H2e(n,t,e){const i=t.createUIElement("div",{class:"ck-image-upload-complete-icon"});t.insert(t.createPositionAt(n,"end"),i),setTimeout(()=>{e.change(r=>r.remove(r.createRangeOn(i)))},3e3)}function W2e(n){const t=n.createUIElement("div",{class:"ck-progress-bar"});return n.setCustomProperty("progressBar",!0,t),t}function j2e(n){const t=n.createUIElement("div",{class:"ck-upload-placeholder-loader"});return n.setCustomProperty("placeholder",!0,t),t}function nH(n,t){for(const e of n.getChildren())if(e.getCustomProperty(t))return e}function iH(n,t,e){const i=nH(n,e);i&&t.remove(t.createRangeOn(i))}function q2e(n,t,e,i){if(i.data){const r=n.findViewImgElement(t);e.setAttribute("src",i.data,r)}}class G2e extends Nt{constructor(t){super(t),this.set("isAccessAllowed",!0)}refresh(){const t=this.editor,e=t.plugins.get("ImageUtils"),i=t.model.document.selection.getSelectedElement();this.isEnabled=e.isImageAllowed()||e.isImage(i)}execute(t){const e=jn(t.file),i=this.editor.model.document.selection,r=this.editor.plugins.get("ImageUtils"),s=Object.fromEntries(i.getAttributes());e.forEach((o,a)=>{const l=i.getSelectedElement();if(a&&l&&r.isImage(l)){const c=this.editor.model.createPositionAfter(l);this._uploadImage(o,s,c)}else this._uploadImage(o,s)})}_uploadImage(t,e,i){const r=this.editor,o=r.plugins.get(dh).createLoader(t),a=r.plugins.get("ImageUtils");o&&a.insertImage({...e,uploadId:o.id},i)}}class K2e extends Ne{constructor(e){super(e);y(this,"_uploadImageElements");y(this,"_uploadedImages",new Map);e.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}static get requires(){return[dh,KN,Qs,Kr]}static get pluginName(){return"ImageUploadEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=e.model.document,r=e.conversion,s=e.plugins.get(dh),o=e.plugins.get("ImageUtils"),a=e.plugins.get("ClipboardPipeline"),l=eH(e.config.get("image.upload.types")),c=new G2e(e);e.commands.add("uploadImage",c),e.commands.add("imageUpload",c),r.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}).add(u=>u.on("element:img",(d,f,h)=>{if(!h.consumable.test(f.viewItem,{attributes:["data-ck-upload-id"]}))return;const g=f.viewItem.getAttribute("data-ck-upload-id");if(!g)return;const[v]=Array.from(f.modelRange.getItems({shallow:!0})),_=s.loaders.get(g);v&&(h.writer.setAttribute("uploadId",g,v),h.consumable.consume(f.viewItem,{attributes:["data-ck-upload-id"]}),_&&_.data&&h.writer.setAttribute("uploadStatus",_.status,v))},{priority:"low"})),this.listenTo(e.editing.view.document,"clipboardInput",(u,d)=>{if(Y2e(d.dataTransfer))return;const f=Array.from(d.dataTransfer.files).filter(g=>g?l.test(g.type):!1);if(!f.length)return;if(u.stop(),e.model.change(g=>{d.targetRanges&&g.setSelection(d.targetRanges.map(v=>e.editing.mapper.toModelRange(v))),e.execute("uploadImage",{file:f})}),!e.commands.get("uploadImage").isAccessAllowed){const g=e.plugins.get("Notification"),v=e.locale.t;g.showWarning(v("You have no image upload permissions."),{namespace:"image"})}}),this.listenTo(a,"inputTransformation",(u,d)=>{const f=Array.from(e.editing.view.createRangeIn(d.content)).map(g=>g.item).filter(g=>N2e(o,g)&&!g.getAttribute("uploadProcessed")).map(g=>({promise:D2e(g),imageElement:g}));if(!f.length)return;const h=new Eo(e.editing.view.document);for(const g of f){h.setAttribute("uploadProcessed",!0,g.imageElement);const v=s.createLoader(g.promise);v&&(h.setAttribute("src","",g.imageElement),h.setAttribute("uploadId",v.id,g.imageElement))}}),e.editing.view.document.on("dragover",(u,d)=>{d.preventDefault()}),i.on("change",()=>{const u=i.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),d=new Set;for(const f of u)if(f.type=="insert"&&f.name!="$text"){const h=f.position.nodeAfter,g=f.position.root.rootName=="$graveyard";for(const v of Q2e(e,h)){const _=v.getAttribute("uploadId");if(!_)continue;const w=s.loaders.get(_);if(!w){!g&&this._uploadedImages.has(_)&&e.model.enqueueChange({isUndoable:!1},C=>{C.setAttribute("uploadStatus","complete",v),this.fire("uploadComplete",{data:this._uploadedImages.get(_),imageElement:v})});continue}g?d.has(_)||Array.from(this._uploadImageElements.get(_)).every(k=>k.root.rootName=="$graveyard")&&w.abort():(d.add(_),this._uploadImageElements.has(_)?this._uploadImageElements.get(_).add(v):this._uploadImageElements.set(_,new Set([v])),w.status=="idle"&&this._readAndUpload(w))}}}),this.on("uploadComplete",(u,{imageElement:d,data:f})=>{const h=f.urls?f.urls:f;this.editor.model.change(g=>{g.setAttribute("src",h.default,d),this._parseAndSetSrcsetAttributeOnImage(h,d,g),o.setImageNaturalSizeAttributes(d)})},{priority:"low"})}afterInit(){const e=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&(e.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageBlock")),this.editor.plugins.has("ImageInlineEditing")&&(e.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageInline"))}_readAndUpload(e){const i=this.editor,r=i.model,s=i.locale.t,o=i.plugins.get(dh),a=i.plugins.get(KN),l=i.plugins.get("ImageUtils"),c=this._uploadImageElements;return r.enqueueChange({isUndoable:!1},d=>{const f=c.get(e.id);for(const h of f)d.setAttribute("uploadStatus","reading",h)}),e.read().then(()=>{const d=e.upload();i.ui&&i.ui.ariaLiveAnnouncer.announce(s("Uploading image"));for(const f of c.get(e.id)){/* istanbul ignore next -- @preserve */if(Vt.isSafari){const h=i.editing.mapper.toViewElement(f),g=l.findViewImgElement(h);i.editing.view.once("render",()=>{if(!g.parent)return;const v=i.editing.view.domConverter.mapViewToDom(g.parent);if(!v)return;const _=v.style.display;v.style.display="none",v._ckHack=v.offsetHeight,v.style.display=_})}r.enqueueChange({isUndoable:!1},h=>{h.setAttribute("uploadStatus","uploading",f)})}return d}).then(d=>{r.enqueueChange({isUndoable:!1},f=>{for(const h of c.get(e.id))f.setAttribute("uploadStatus","complete",h),this.fire("uploadComplete",{data:d,imageElement:h});i.ui&&i.ui.ariaLiveAnnouncer.announce(s("Image upload complete")),this._uploadedImages.set(e.id,d)}),u()}).catch(d=>{if(i.ui&&i.ui.ariaLiveAnnouncer.announce(s("Error during image upload")),e.status!=="error"&&e.status!=="aborted")throw d;e.status=="error"&&d&&a.showWarning(d,{title:s("Upload failed"),namespace:"upload"}),r.enqueueChange({isUndoable:!1},f=>{for(const h of c.get(e.id))h.root.rootName!=="$graveyard"&&f.remove(h)}),u()});function u(){r.enqueueChange({isUndoable:!1},d=>{for(const f of c.get(e.id))d.removeAttribute("uploadId",f),d.removeAttribute("uploadStatus",f);c.delete(e.id)}),o.destroyLoader(e)}}_parseAndSetSrcsetAttributeOnImage(e,i,r){let s=0;const o=Object.keys(e).filter(a=>{const l=parseInt(a,10);if(!isNaN(l))return s=Math.max(s,l),!0}).map(a=>`${e[a]} ${a}w`).join(", ");if(o!=""){const a={srcset:o};!i.hasAttribute("width")&&!i.hasAttribute("height")&&(a.width=s),r.setAttributes(a,i)}}_registerConverters(e){const{conversion:i,plugins:r}=this.editor,s=r.get(dh),o=r.get(Kr);i.for("dataDowncast").add(a=>{a.on(`attribute:uploadId:${e}`,(l,c,u)=>{if(!u.consumable.test(c.item,l.name))return;const d=s.loaders.get(c.attributeNewValue);if(!d||!d.data)return null;const f=u.mapper.toViewElement(c.item),h=o.findViewImgElement(f);h&&(u.consumable.consume(c.item,l.name),u.writer.setAttribute("data-ck-upload-id",d.id,h))})})}}function Y2e(n){return Array.from(n.types).includes("text/html")&&n.getData("text/html")!==""}function Q2e(n,t){const e=n.plugins.get("ImageUtils");return Array.from(n.model.createRangeOn(t)).filter(i=>e.isImage(i.item)).map(i=>i.item)}class Z2e extends Ne{static get pluginName(){return"ImageUpload"}static get isOfficialPlugin(){return!0}static get requires(){return[K2e,$2e,B2e]}}class J2e extends dt{constructor(e){super(e);y(this,"urlInputView");y(this,"keystrokes");this.set("imageURLInputValue",""),this.set("isImageSelected",!1),this.set("isEnabled",!0),this.keystrokes=new oi,this.urlInputView=this._createUrlInputView(),this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-url"],tabindex:"-1"},children:[this.urlInputView,{tag:"div",attributes:{class:["ck","ck-image-insert-url__action-row"]}}]})}render(){super.render(),bl({view:this}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}_createUrlInputView(){const e=this.locale,i=e.t,r=new Ri(e,Ss);return r.bind("label").to(this,"isImageSelected",s=>i(s?"Update image URL":"Insert image via URL")),r.bind("isEnabled").to(this),r.fieldView.inputMode="url",r.fieldView.placeholder="https://example.com/image.png",r.fieldView.bind("value").to(this,"imageURLInputValue",s=>s||""),r.fieldView.on("input",()=>{this.imageURLInputValue=r.fieldView.element.value.trim()}),r}focus(){this.urlInputView.focus()}}class X2e extends Ne{constructor(){super(...arguments);y(this,"_imageInsertUI");y(this,"_formView")}static get pluginName(){return"ImageInsertViaUrlUI"}static get isOfficialPlugin(){return!0}static get requires(){return[z0,Ld]}init(){this.editor.ui.componentFactory.add("insertImageViaUrl",()=>this._createToolbarButton()),this.editor.ui.componentFactory.add("menuBar:insertImageViaUrl",()=>this._createMenuBarButton("standalone"))}afterInit(){this._imageInsertUI=this.editor.plugins.get("ImageInsertUI"),this._imageInsertUI.registerIntegration({name:"url",observable:()=>this.editor.commands.get("insertImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:e=>this._createMenuBarButton(e?"insertOnly":"insertNested")})}_createInsertUrlButton(e){const i=new e(this.editor.locale);return i.icon=rTe,i.on("execute",()=>{this._showModal()}),i}_createToolbarButton(){const e=this.editor.locale.t,i=this._createInsertUrlButton(wt);return i.tooltip=!0,i.bind("label").to(this._imageInsertUI,"isImageSelected",r=>e(r?"Update image URL":"Insert image via URL")),i}_createDropdownButton(){const e=this.editor.locale.t,i=this._createInsertUrlButton(wt);return i.withText=!0,i.bind("label").to(this._imageInsertUI,"isImageSelected",r=>e(r?"Update image URL":"Insert via URL")),i}_createMenuBarButton(e){const i=this.editor.locale.t,r=this._createInsertUrlButton(Ti);switch(r.withText=!0,e){case"standalone":r.label=i("Image via URL");break;case"insertOnly":r.label=i("Image");break;case"insertNested":r.label=i("Via URL");break}return r}_createInsertUrlView(){const e=this.editor,i=e.locale,r=e.commands.get("replaceImageSource"),s=e.commands.get("insertImage"),o=new J2e(i);return o.bind("isImageSelected").to(this._imageInsertUI),o.bind("isEnabled").toMany([s,r],"isEnabled",(...a)=>a.some(l=>l)),o}_showModal(){const e=this.editor,r=e.locale.t,s=e.plugins.get("Dialog");this._formView||(this._formView=this._createInsertUrlView(),this._formView.on("submit",()=>this._handleSave()));const o=e.commands.get("replaceImageSource");this._formView.imageURLInputValue=o.value||"",s.show({id:"insertImageViaUrl",title:r("Image via URL"),isModal:!0,content:this._formView,actionButtons:[{label:r("Cancel"),withText:!0,onExecute:()=>s.hide()},{label:this._imageInsertUI.isImageSelected?r("Save"):r("Insert"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSave()}]})}_handleSave(){this.editor.commands.get("replaceImageSource").isEnabled?this.editor.execute("replaceImageSource",{source:this._formView.imageURLInputValue}):this.editor.execute("insertImage",{source:this._formView.imageURLInputValue}),this.editor.plugins.get("Dialog").hide()}}class eRe extends Ne{static get pluginName(){return"ImageInsertViaUrl"}static get isOfficialPlugin(){return!0}static get requires(){return[X2e,z0]}}class tRe extends Nt{refresh(){const t=this.editor,i=t.plugins.get("ImageUtils").getClosestSelectedImageElement(t.model.document.selection);this.isEnabled=!!i,!i||!i.hasAttribute("resizedWidth")?this.value=null:this.value={width:i.getAttribute("resizedWidth"),height:null}}execute(t){const e=this.editor,i=e.model,r=e.plugins.get("ImageUtils"),s=r.getClosestSelectedImageElement(i.document.selection);this.value={width:t.width,height:null},s&&i.change(o=>{o.setAttribute("resizedWidth",t.width,s),o.removeAttribute("resizedHeight",s),r.setImageNaturalSizeAttributes(s)})}}class rH extends Ne{static get requires(){return[Kr]}static get pluginName(){return"ImageResizeEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:custom",value:"custom",icon:"custom"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]})}init(){const t=this.editor,e=new tRe(t);this._registerConverters("imageBlock"),this._registerConverters("imageInline"),t.commands.add("resizeImage",e),t.commands.add("imageResize",e)}afterInit(){this._registerSchema()}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["resizedWidth","resizedHeight"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["resizedWidth","resizedHeight"]})}_registerConverters(t){const e=this.editor,i=e.plugins.get("ImageUtils");e.conversion.for("downcast").add(r=>r.on(`attribute:resizedWidth:${t}`,(s,o,a)=>{if(!a.consumable.consume(o.item,s.name))return;const l=a.writer,c=a.mapper.toViewElement(o.item);o.attributeNewValue!==null?(l.setStyle("width",o.attributeNewValue,c),l.addClass("image_resized",c)):(l.removeStyle("width",c),l.removeClass("image_resized",c))})),e.conversion.for("dataDowncast").attributeToAttribute({model:{name:t,key:"resizedHeight"},view:r=>({key:"style",value:{height:r}})}),e.conversion.for("editingDowncast").add(r=>r.on(`attribute:resizedHeight:${t}`,(s,o,a)=>{if(!a.consumable.consume(o.item,s.name))return;const l=a.writer,c=a.mapper.toViewElement(o.item),u=t==="imageInline"?i.findViewImgElement(c):c;o.attributeNewValue!==null?l.setStyle("height",o.attributeNewValue,u):l.removeStyle("height",u)})),e.conversion.for("upcast").attributeToAttribute({view:{name:t==="imageBlock"?"figure":"img",styles:{width:/.+/}},model:{key:"resizedWidth",value:r=>Xy(r)?null:r.getStyle("width")}}),e.conversion.for("upcast").attributeToAttribute({view:{name:t==="imageBlock"?"figure":"img",styles:{height:/.+/}},model:{key:"resizedHeight",value:r=>Xy(r)?null:r.getStyle("height")}}),e.conversion.for("upcast").add(r=>{r.on(`element:${t==="imageBlock"?"figure":"img"}`,(s,o,a)=>{a.consumable.consume(o.viewItem,{classes:["image_resized"]})})})}}const vE={small:ETe,medium:kTe,large:_Te,custom:wTe,original:yTe};class nRe extends Ne{constructor(e){super(e);y(this,"_resizeUnit");this._resizeUnit=e.config.get("image.resizeUnit")}static get requires(){return[rH]}static get pluginName(){return"ImageResizeButtons"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=e.config.get("image.resizeOptions"),r=e.commands.get("resizeImage");this.bind("isEnabled").to(r);for(const s of i)this._registerImageResizeButton(s);this._registerImageResizeDropdown(i)}_registerImageResizeButton(e){const i=this.editor,{name:r,value:s,icon:o}=e;i.ui.componentFactory.add(r,a=>{const l=new wt(a),c=i.commands.get("resizeImage"),u=this._getOptionLabelValue(e,!0);if(!vE[o])throw new we("imageresizebuttons-missing-icon",i,e);if(l.set({label:u,icon:vE[o],tooltip:u,isToggleable:!0}),l.bind("isEnabled").to(this),i.plugins.has("ImageCustomResizeUI")&&yg(e)){const d=i.plugins.get("ImageCustomResizeUI");this.listenTo(l,"execute",()=>{d._showForm(this._resizeUnit)})}else{const d=s?s+this._resizeUnit:null;l.bind("isOn").to(c,"value",c,"isEnabled",YT(d)),this.listenTo(l,"execute",()=>{i.execute("resizeImage",{width:d})})}return l})}_registerImageResizeDropdown(e){const i=this.editor,r=i.t,s=e.find(a=>!a.value),o=a=>{const l=i.commands.get("resizeImage"),c=as(a,n7),u=c.buttonView,d=r("Resize image");return u.set({tooltip:d,commandValue:s.value,icon:vE.medium,isToggleable:!0,label:this._getOptionLabelValue(s),withText:!0,class:"ck-resize-image-button",ariaLabel:d,ariaLabelledBy:void 0}),u.bind("label").to(l,"value",f=>f&&f.width?f.width:this._getOptionLabelValue(s)),c.bind("isEnabled").to(this),ef(c,()=>this._getResizeDropdownListItemDefinitions(e,l),{ariaLabel:r("Image resize list"),role:"menu"}),this.listenTo(c,"execute",f=>{"onClick"in f.source?f.source.onClick():(i.execute(f.source.commandName,{width:f.source.commandValue}),i.editing.view.focus())}),c};i.ui.componentFactory.add("resizeImage",o),i.ui.componentFactory.add("imageResize",o)}_getOptionLabelValue(e,i=!1){const r=this.editor.t;return e.label?e.label:i?yg(e)?r("Custom image size"):e.value?r("Resize image to %0",e.value+this._resizeUnit):r("Resize image to the original size"):yg(e)?r("Custom"):e.value?e.value+this._resizeUnit:r("Original")}_getResizeDropdownListItemDefinitions(e,i){const{editor:r}=this,s=new cr,o=e.map(a=>yg(a)?{...a,valueWithUnits:"custom"}:a.value?{...a,valueWithUnits:`${a.value}${this._resizeUnit}`}:{...a,valueWithUnits:null});for(const a of o){let l=null;if(r.plugins.has("ImageCustomResizeUI")&&yg(a)){const c=r.plugins.get("ImageCustomResizeUI");l={type:"button",model:new $d({label:this._getOptionLabelValue(a),role:"menuitemradio",withText:!0,icon:null,onClick:()=>{c._showForm(this._resizeUnit)}})};const u=Object.values(o).map(d=>d.valueWithUnits);l.model.bind("isOn").to(i,"value",i,"isEnabled",iRe(u))}else l={type:"button",model:new $d({commandName:"resizeImage",commandValue:a.valueWithUnits,label:this._getOptionLabelValue(a),role:"menuitemradio",withText:!0,icon:null})},l.model.bind("isOn").to(i,"value",i,"isEnabled",YT(a.valueWithUnits));l.model.bind("isEnabled").to(i,"isEnabled"),s.add(l)}return s}}function yg(n){return n.value==="custom"}function YT(n){return(t,e)=>{const i=t;return i===void 0||!e?!1:n===null&&i===n?!0:i!==null&&i.width===n}}function iRe(n){return(t,e)=>!n.some(i=>YT(i)(t,e))}const rRe="figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img",bE="image_resized";class sRe extends Ne{static get requires(){return[dE,Kr]}static get pluginName(){return"ImageResizeHandles"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(t),this._setupResizerCreator()}_setupResizerCreator(){const t=this.editor,e=t.editing.view,i=t.plugins.get("ImageUtils");e.addObserver(NP),this.listenTo(e.document,"imageLoaded",(r,s)=>{if(!s.target.matches(rRe))return;const o=t.editing.view.domConverter,a=o.domToView(s.target),l=i.getImageWidgetFromImageView(a);let c=this.editor.plugins.get(dE).getResizerByViewElement(l);if(c){c.redraw();return}const u=t.editing.mapper,d=u.toModelElement(l);c=t.plugins.get(dE).attachTo({unit:t.config.get("image.resizeUnit"),modelElement:d,viewElement:l,editor:t,getHandleHost(f){return f.querySelector("img")},getResizeHost(){return o.mapViewToDom(u.toViewElement(d))},isCentered(){return d.getAttribute("imageStyle")=="alignCenter"},onCommit(f){e.change(h=>{h.removeClass(bE,l)}),t.execute("resizeImage",{width:f})}}),c.on("updateSize",()=>{l.hasClass(bE)||e.change(h=>{h.addClass(bE,l)});const f=d.name==="imageInline"?a:l;f.getStyle("height")&&e.change(h=>{h.removeStyle("height",f)})}),c.bind("isEnabled").to(this)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function sH(n){if(!n)return null;const[,t,e]=n.trim().match(/([.,\d]+)(%|px)$/)||[],i=Number.parseFloat(t);return Number.isNaN(i)?null:{value:i,unit:e}}function oH(n,t,e){return e==="px"?{value:t.value,unit:"px"}:{value:t.value/n*100,unit:"%"}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function aH(n){const{editing:t}=n,i=n.plugins.get("ImageUtils").getClosestSelectedImageElement(n.model.document.selection);if(!i)return null;const r=t.mapper.toViewElement(i),s=t.view.domConverter.mapViewToDom(r);return{model:i,view:r,dom:s}}function oRe(n,t){const e=aH(n);if(!e)return null;const i=sH(e.model.getAttribute("resizedWidth")||null);if(!i)return null;if(i.unit===t)return i;const r=TP(e.dom),s={value:new It(e.dom).width};return oH(r,s,t)}class aRe extends dt{constructor(e,i,r){super(e);y(this,"focusTracker");y(this,"keystrokes");y(this,"unit");y(this,"backButtonView");y(this,"saveButtonView");y(this,"labeledInput");y(this,"children");y(this,"_focusables");y(this,"_focusCycler");y(this,"_validators");this.focusTracker=new Mn,this.keystrokes=new oi,this.unit=i,this.backButtonView=this._createBackButton(),this.saveButtonView=this._createSaveButton(),this.labeledInput=this._createLabeledInputView(),this.children=this.createCollection([this._createHeaderView()]),this.children.add(new Cr(e,{children:[this.labeledInput,this.saveButtonView],class:["ck-form__row_with-submit","ck-form__row_large-top-padding"]})),this._focusables=new tr,this._validators=r,this.keystrokes.set("Esc",(s,o)=>{this.fire("cancel"),o()}),this._focusCycler=new ur({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-image-custom-resize-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),bl({view:this}),[this.backButtonView,this.labeledInput,this.saveButtonView].forEach(i=>{this._focusables.add(i),this.focusTracker.add(i.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createBackButton(){const e=this.locale.t,i=new wt(this.locale);return i.set({class:"ck-button-back",label:e("Back"),icon:sc,tooltip:!0}),i.delegate("execute").to(this,"cancel"),i}_createSaveButton(){const e=this.locale.t,i=new wt(this.locale);return i.set({label:e("Save"),withText:!0,type:"submit",class:"ck-button-action ck-button-bold"}),i}_createHeaderView(){const e=this.locale.t,i=new wl(this.locale,{label:e("Image Resize")});return i.children.add(this.backButtonView,0),i}_createLabeledInputView(){const e=this.locale.t,i=new Ri(this.locale,o7);return i.label=e("Resize image (in %0)",this.unit),i.class="ck-labeled-field-view_full-width",i.fieldView.set({step:.1}),i}isValid(){this.resetFormStatus();for(const e of this._validators){const i=e(this);if(i)return this.labeledInput.errorText=i,!1}return!0}resetFormStatus(){this.labeledInput.errorText=null}get rawSize(){const{element:e}=this.labeledInput.fieldView;return e?e.value:null}get parsedSize(){const{rawSize:e}=this;if(e===null)return null;const i=Number.parseFloat(e);return Number.isNaN(i)?null:i}get sizeWithUnits(){const{parsedSize:e,unit:i}=this;return e===null?null:`${e}${i}`}}function lRe(n,t){const e=aH(n);if(!e)return null;const i=TP(e.dom),r=sH(window.getComputedStyle(e.dom).minWidth)||{value:1},s=Math.max(.1,oH(i,r,t).value);return{unit:t,lower:s,upper:t==="px"?i:100}}class cRe extends Ne{constructor(){super(...arguments);y(this,"_balloon");y(this,"_form")}static get requires(){return[bo]}static get pluginName(){return"ImageCustomResizeUI"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._form&&this._form.destroy()}_createForm(e){const i=this.editor;this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(Nd(aRe))(i.locale,e,uRe(i)),this._form.render(),this.listenTo(this._form,"submit",()=>{this._form.isValid()&&(i.execute("resizeImage",{width:this._form.sizeWithUnits}),this._hideForm(!0))}),this.listenTo(this._form.labeledInput,"change:errorText",()=>{i.ui.update()}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),pc({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(e){if(this._isVisible)return;this._form||this._createForm(e);const i=this.editor,r=this._form.labeledInput;this._form.disableCssTransitions(),this._form.resetFormStatus(),this._isInBalloon||this._balloon.add({view:this._form,position:VP(i)});const s=oRe(i,e),o=s?s.value.toFixed(1):"",a=lRe(i,e);r.fieldView.value=r.fieldView.element.value=o,a&&Object.assign(r.fieldView,{min:a.lower.toFixed(1),max:Math.ceil(a.upper).toFixed(1)}),this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}function uRe(n){const t=n.t;return[e=>{if(e.rawSize.trim()==="")return t("The value must not be empty.");if(e.parsedSize===null)return t("The value should be a plain number.")}]}class dRe extends Ne{static get requires(){return[rH,sRe,cRe,nRe]}static get pluginName(){return"ImageResize"}static get isOfficialPlugin(){return!0}}class fRe extends Nt{constructor(e,i){super(e);y(this,"_defaultStyles");y(this,"_styles");this._defaultStyles={imageBlock:!1,imageInline:!1},this._styles=new Map(i.map(r=>{if(r.isDefault)for(const s of r.modelElements)this._defaultStyles[s]=r.name;return[r.name,r]}))}refresh(){const r=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!r,this.isEnabled?r.hasAttribute("imageStyle")?this.value=r.getAttribute("imageStyle"):this.value=this._defaultStyles[r.name]:this.value=!1}execute(e={}){const i=this.editor,r=i.model,s=i.plugins.get("ImageUtils");r.change(o=>{const a=e.value,{setImageSizes:l=!0}=e;let c=s.getClosestSelectedImageElement(r.document.selection);a&&this.shouldConvertImageType(a,c)&&(this.editor.execute(s.isBlockImage(c)?"imageTypeInline":"imageTypeBlock",{setImageSizes:l}),c=s.getClosestSelectedImageElement(r.document.selection)),!a||this._styles.get(a).isDefault?o.removeAttribute("imageStyle",c):o.setAttribute("imageStyle",a,c),l&&s.setImageNaturalSizeAttributes(c)})}shouldConvertImageType(e,i){return!this._styles.get(e).modelElements.includes(i.name)}}const Pw={get inline(){return{name:"inline",title:"In line",icon:R8,modelElements:["imageInline"],isDefault:!0}},get alignLeft(){return{name:"alignLeft",title:"Left aligned image",icon:uP,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"}},get alignBlockLeft(){return{name:"alignBlockLeft",title:"Left aligned image",icon:V8,modelElements:["imageBlock"],className:"image-style-block-align-left"}},get alignCenter(){return{name:"alignCenter",title:"Centered image",icon:By,modelElements:["imageBlock"],className:"image-style-align-center"}},get alignRight(){return{name:"alignRight",title:"Right aligned image",icon:Fy,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"}},get alignBlockRight(){return{name:"alignBlockRight",title:"Right aligned image",icon:D8,modelElements:["imageBlock"],className:"image-style-block-align-right"}},get block(){return{name:"block",title:"Centered image",icon:By,modelElements:["imageBlock"],isDefault:!0}},get side(){return{name:"side",title:"Side image",icon:Fy,modelElements:["imageBlock"],className:"image-style-side"}}},lH={full:bTe,left:V8,right:D8,center:By,inlineLeft:uP,inlineRight:Fy,inline:R8},cH=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function hRe(n){return(n.configuredStyles.options||[]).map(i=>pRe(i)).filter(i=>vRe(i,n))}function mRe(n,t){return n&&t?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:n?{options:["block","side"]}:t?{options:["inline","alignLeft","alignRight"]}:{}}function gRe(n){return n.has("ImageBlockEditing")&&n.has("ImageInlineEditing")?[...cH]:[]}function pRe(n){return typeof n=="string"?Pw[n]?n={...Pw[n]}:n={name:n}:n=bRe(Pw[n.name],n),typeof n.icon=="string"&&(n.icon=lH[n.icon]||n.icon),n}function vRe(n,{isBlockPluginLoaded:t,isInlinePluginLoaded:e}){const{modelElements:i,name:r}=n;if(!i||!i.length||!r)return uH({style:n}),!1;{const s=[t?"imageBlock":null,e?"imageInline":null];if(!i.some(o=>s.includes(o)))return mn("image-style-missing-dependency",{style:n,missingPlugins:i.map(o=>o==="imageBlock"?"ImageBlockEditing":"ImageInlineEditing")}),!1}return!0}function bRe(n,t){const e={...t};for(const i in n)Object.prototype.hasOwnProperty.call(t,i)||(e[i]=n[i]);return e}function uH(n){mn("image-style-configuration-definition-invalid",n)}var QT={normalizeStyles:hRe,getDefaultStylesConfiguration:mRe,getDefaultDropdownDefinitions:gRe,warnInvalidStyle:uH,DEFAULT_OPTIONS:Pw,DEFAULT_ICONS:lH,DEFAULT_DROPDOWN_DEFINITIONS:cH};function wRe(n){return(t,e,i)=>{if(!i.consumable.consume(e.item,t.name))return;const r=HL(e.attributeNewValue,n),s=HL(e.attributeOldValue,n),o=i.mapper.toViewElement(e.item),a=i.writer;s&&a.removeClass(s.className,o),r&&a.addClass(r.className,o)}}function yRe(n){const t={imageInline:n.filter(e=>!e.isDefault&&e.modelElements.includes("imageInline")),imageBlock:n.filter(e=>!e.isDefault&&e.modelElements.includes("imageBlock"))};return(e,i,r)=>{if(!i.modelRange)return;const s=i.viewItem,o=gi(i.modelRange.getItems());if(o&&r.schema.checkAttribute(o,"imageStyle"))for(const a of t[o.name])r.consumable.consume(s,{classes:a.className})&&r.writer.setAttribute("imageStyle",a.name,o)}}function HL(n,t){for(const e of t)if(e.name===n)return e}class dH extends Ne{constructor(){super(...arguments);y(this,"normalizedStyles")}static get pluginName(){return"ImageStyleEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Kr]}init(){const{normalizeStyles:e,getDefaultStylesConfiguration:i}=QT,r=this.editor,s=r.plugins.has("ImageBlockEditing"),o=r.plugins.has("ImageInlineEditing");r.config.define("image.styles",i(s,o)),this.normalizedStyles=e({configuredStyles:r.config.get("image.styles"),isBlockPluginLoaded:s,isInlinePluginLoaded:o}),this._setupConversion(s,o),this._setupPostFixer(),r.commands.add("imageStyle",new fRe(r,this.normalizedStyles))}_setupConversion(e,i){const r=this.editor,s=r.model.schema,o=wRe(this.normalizedStyles),a=yRe(this.normalizedStyles);r.editing.downcastDispatcher.on("attribute:imageStyle",o),r.data.downcastDispatcher.on("attribute:imageStyle",o),e&&(s.extend("imageBlock",{allowAttributes:"imageStyle"}),r.data.upcastDispatcher.on("element:figure",a,{priority:"low"})),i&&(s.extend("imageInline",{allowAttributes:"imageStyle"}),r.data.upcastDispatcher.on("element:img",a,{priority:"low"}))}_setupPostFixer(){const e=this.editor,i=e.model.document,r=e.plugins.get(Kr),s=new Map(this.normalizedStyles.map(o=>[o.name,o]));i.registerPostFixer(o=>{let a=!1;for(const l of i.differ.getChanges())if(l.type=="insert"||l.type=="attribute"&&l.attributeKey=="imageStyle"){let c=l.type=="insert"?l.position.nodeAfter:l.range.start.nodeAfter;if(c&&c.is("element","paragraph")&&c.childCount>0&&(c=c.getChild(0)),!r.isImage(c))continue;const u=c.getAttribute("imageStyle");if(!u)continue;const d=s.get(u);(!d||!d.modelElements.includes(c.name))&&(o.removeAttribute("imageStyle",c),a=!0)}return a})}}class _Re extends Ne{static get requires(){return[dH]}static get pluginName(){return"ImageStyleUI"}static get isOfficialPlugin(){return!0}get localizedDefaultStylesTitles(){const t=this.editor.t;return{"Wrap text":t("Wrap text"),"Break text":t("Break text"),"In line":t("In line"),"Full size image":t("Full size image"),"Side image":t("Side image"),"Left aligned image":t("Left aligned image"),"Centered image":t("Centered image"),"Right aligned image":t("Right aligned image")}}init(){const t=this.editor.plugins,e=this.editor.config.get("image.toolbar")||[],i=t.get("ImageStyleEditing"),r=WL(i.normalizedStyles,this.localizedDefaultStylesTitles);for(const o of r)this._createButton(o);const s=WL([...e.filter(mo),...QT.getDefaultDropdownDefinitions(t)],this.localizedDefaultStylesTitles);for(const o of s)this._createDropdown(o,r)}_createDropdown(t,e){const i=this.editor.ui.componentFactory;i.add(t.name,r=>{let s;const{defaultItem:o,items:a,title:l}=t,c=a.filter(h=>e.find(({name:g})=>jL(g)===h)).map(h=>{const g=i.create(h);return h===o&&(s=g),g});a.length!==c.length&&QT.warnInvalidStyle({dropdown:t});const u=as(r,Lm),d=u.buttonView,f=d.arrowView;return F0(u,c,{enableActiveItemFocusOnDropdownOpen:!0}),d.set({label:qL(l,s.label),class:null,tooltip:!0}),f.unbind("label"),f.set({label:l}),d.bind("icon").toMany(c,"isOn",(...h)=>{const g=h.findIndex(zf);return g<0?s.icon:c[g].icon}),d.bind("label").toMany(c,"isOn",(...h)=>{const g=h.findIndex(zf);return qL(l,g<0?s.label:c[g].label)}),d.bind("isOn").toMany(c,"isOn",(...h)=>h.some(zf)),d.bind("class").toMany(c,"isOn",(...h)=>h.some(zf)?"ck-splitbutton_flatten":void 0),d.on("execute",()=>{c.some(({isOn:h})=>h)?u.isOpen=!u.isOpen:s.fire("execute")}),u.bind("isEnabled").toMany(c,"isEnabled",(...h)=>h.some(zf)),this.listenTo(u,"execute",()=>{this.editor.editing.view.focus()}),u})}_createButton(t){const e=t.name;this.editor.ui.componentFactory.add(jL(e),i=>{const r=this.editor.commands.get("imageStyle"),s=new wt(i);return s.set({label:t.title,icon:t.icon,tooltip:!0,isToggleable:!0}),s.bind("isEnabled").to(r,"isEnabled"),s.bind("isOn").to(r,"value",o=>o===e),s.on("execute",this._executeCommand.bind(this,e)),s})}_executeCommand(t){this.editor.execute("imageStyle",{value:t}),this.editor.editing.view.focus()}}function WL(n,t){for(const e of n)t[e.title]&&(e.title=t[e.title]);return n}function jL(n){return`imageStyle:${n}`}function qL(n,t){return(n?n+": ":"")+t}class kRe extends Ne{static get requires(){return[dH,_Re]}static get pluginName(){return"ImageStyle"}static get isOfficialPlugin(){return!0}}class ERe extends Ne{static get requires(){return[sm,Kr]}static get pluginName(){return"ImageToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=t.t,i=t.plugins.get(sm),r=t.plugins.get("ImageUtils");i.register("image",{ariaLabel:e("Image toolbar"),items:CRe(t.config.get("image.toolbar")||[]),getRelatedElement:s=>r.getClosestSelectedImageWidget(s)})}}function CRe(n){return n.map(t=>mo(t)?t.name:t)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class TRe extends Ne{static get pluginName(){return"IndentEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.commands.add("indent",new aN(t)),t.commands.add("outdent",new aN(t))}}class SRe extends Ne{static get pluginName(){return"IndentUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale,i=t.t,r=e.uiLanguageDirection=="ltr"?hN:mN,s=e.uiLanguageDirection=="ltr"?mN:hN;this._defineButton("indent",i("Increase indent"),r),this._defineButton("outdent",i("Decrease indent"),s)}_defineButton(t,e,i){const r=this.editor;r.ui.componentFactory.add(t,()=>{const s=this._createButton(wt,t,e,i);return s.set({tooltip:!0}),s}),r.ui.componentFactory.add("menuBar:"+t,()=>this._createButton(Ti,t,e,i))}_createButton(t,e,i,r){const s=this.editor,o=s.commands.get(e),a=new t(s.locale);return a.set({label:i,icon:r}),a.bind("isEnabled").to(o,"isEnabled"),this.listenTo(a,"execute",()=>{s.execute(e),s.editing.view.focus()}),a}}class ARe extends Ne{static get pluginName(){return"Indent"}static get isOfficialPlugin(){return!0}static get requires(){return[TRe,SRe]}}class Ub extends Nt{constructor(e,i){super(e);y(this,"_indentBehavior");this._indentBehavior=i}refresh(){const i=this.editor.model,r=gi(i.document.selection.getSelectedBlocks());if(!r||!this._isIndentationChangeAllowed(r)){this.isEnabled=!1;return}this.isEnabled=this._indentBehavior.checkEnabled(r.getAttribute("blockIndent"))}execute(){const e=this.editor.model,i=this._getBlocksToChange();e.change(r=>{for(const s of i){const o=s.getAttribute("blockIndent"),a=this._indentBehavior.getNextIndent(o);a?r.setAttribute("blockIndent",a,s):r.removeAttribute("blockIndent",s)}})}_getBlocksToChange(){const i=this.editor.model.document.selection;return Array.from(i.getSelectedBlocks()).filter(s=>this._isIndentationChangeAllowed(s))}_isIndentationChangeAllowed(e){const i=this.editor;return i.model.schema.checkAttribute(e,"blockIndent")?!i.plugins.has("ListUtils")||!this._indentBehavior.isForward?!0:!i.plugins.get("ListUtils").isListItemBlock(e):!1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class GL{constructor(t){y(this,"isForward");y(this,"offset");y(this,"unit");this.isForward=t.direction==="forward",this.offset=t.offset,this.unit=t.unit}checkEnabled(t){const e=parseFloat(t||"0");return this.isForward||e>0}getNextIndent(t){const e=parseFloat(t||"0");if(!(!t||t.endsWith(this.unit)))return this.isForward?this.offset+this.unit:void 0;const r=this.isForward?this.offset:-this.offset,s=e+r;return s>0?s+this.unit:void 0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class KL{constructor(t){y(this,"isForward");y(this,"classes");this.isForward=t.direction==="forward",this.classes=t.classes}checkEnabled(t){const e=this.classes.indexOf(t);return this.isForward?e<this.classes.length-1:e>=0}getNextIndent(t){const e=this.classes.indexOf(t),i=this.isForward?1:-1;return this.classes[e+i]}}const IRe=["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"];class PRe extends Ne{constructor(t){super(t),t.config.define("indentBlock",{offset:40,unit:"px"})}static get pluginName(){return"IndentBlock"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.config.get("indentBlock");e.classes&&e.classes.length?(this._setupConversionUsingClasses(e.classes),t.commands.add("indentBlock",new Ub(t,new KL({direction:"forward",classes:e.classes}))),t.commands.add("outdentBlock",new Ub(t,new KL({direction:"backward",classes:e.classes})))):(t.data.addStyleProcessorRules(wCe),this._setupConversionUsingOffset(),t.commands.add("indentBlock",new Ub(t,new GL({direction:"forward",offset:e.offset,unit:e.unit}))),t.commands.add("outdentBlock",new Ub(t,new GL({direction:"backward",offset:e.offset,unit:e.unit}))))}afterInit(){const t=this.editor,e=t.model.schema,i=t.commands.get("indent"),r=t.commands.get("outdent"),s=t.config.get("heading.options");(s&&s.map(l=>l.model)||IRe).forEach(l=>{e.isRegistered(l)&&e.extend(l,{allowAttributes:"blockIndent"})}),e.setAttributeProperties("blockIndent",{isFormatting:!0}),i.registerChildCommand(t.commands.get("indentBlock")),r.registerChildCommand(t.commands.get("outdentBlock"))}_setupConversionUsingOffset(){const t=this.editor.conversion,i=this.editor.locale.contentLanguageDirection==="rtl"?"margin-right":"margin-left";t.for("upcast").attributeToAttribute({view:{styles:{[i]:/[\s\S]+/}},model:{key:"blockIndent",value:r=>{if(!r.is("element","li"))return r.getStyle(i)}}}),t.for("downcast").attributeToAttribute({model:"blockIndent",view:r=>({key:"style",value:{[i]:r}})})}_setupConversionUsingClasses(t){const e={model:{key:"blockIndent",values:[]},view:{}};for(const i of t)e.model.values.push(i),e.view[i]={key:"class",value:[i]};this.editor.conversion.attributeToAttribute(e)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class xRe{constructor(){y(this,"_definitions",new Set)}get length(){return this._definitions.size}add(t){Array.isArray(t)?t.forEach(e=>this._definitions.add(e)):this._definitions.add(t)}getDispatcher(){return t=>{t.on("attribute:linkHref",(e,i,r)=>{if(!r.consumable.test(i.item,"attribute:linkHref")||!(i.item.is("selection")||r.schema.isInline(i.item)))return;const s=r.writer,o=s.document.selection;for(const a of this._definitions){const l=s.createAttributeElement("a",a.attributes,{priority:5});a.classes&&s.addClass(a.classes,l);for(const c in a.styles)s.setStyle(c,a.styles[c],l);s.setCustomProperty("link",!0,l),a.callback(i.attributeNewValue)?i.item.is("selection")?s.wrap(o.getFirstRange(),l):s.wrap(r.mapper.toViewRange(i.range),l):s.unwrap(r.mapper.toViewRange(i.range),l)}},{priority:"high"})}}getDispatcherForLinkedImage(){return t=>{t.on("attribute:linkHref:imageBlock",(e,i,{writer:r,mapper:s})=>{const o=s.toViewElement(i.item),a=Array.from(o.getChildren()).find(l=>l.is("element","a"));if(a)for(const l of this._definitions){const c=fl(l.attributes);if(l.callback(i.attributeNewValue)){for(const[u,d]of c)u==="class"?r.addClass(d,a):r.setAttribute(u,d,a);l.classes&&r.addClass(l.classes,a);for(const u in l.styles)r.setStyle(u,l.styles[u],a)}else{for(const[u,d]of c)u==="class"?r.removeClass(d,a):r.removeAttribute(u,a);l.classes&&r.removeClass(l.classes,a);for(const u in l.styles)r.removeStyle(u,a)}}})}}}const ORe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,RRe="^(?:(?:<protocols>):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))",VRe=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,DRe=/^((\w+:(\/{2,})?)|(\W))/i,NRe=["https?","ftps?","mailto"],Mg="Ctrl+K";function LRe(n){return n.is("attributeElement")&&!!n.getCustomProperty("link")}function YL(n,{writer:t}){const e=t.createAttributeElement("a",{href:n},{priority:5});return t.setCustomProperty("link",!0,e),e}function fH(n,t=NRe){const e=String(n),i=t.join("|"),r=new RegExp(`${RRe.replace("<protocols>",i)}`,"i");return MRe(e,r)?e:"#"}function MRe(n,t){return!!n.replace(ORe,"").match(t)}function $Re(n,t){const e={"Open in a new tab":n("Open in a new tab"),Downloadable:n("Downloadable")};return t.forEach(i=>("label"in i&&e[i.label]&&(i.label=e[i.label]),i)),t}function BRe(n){const t=[];if(n)for(const[e,i]of Object.entries(n)){const r=Object.assign({},i,{id:`link${i_e(e)}`});t.push(r)}return t}function ZT(n,t){return n?t.checkAttribute(n.name,"linkHref"):!1}function FRe(n){return VRe.test(n)}function LP(n,t){const e=FRe(n)?"mailto:":t,i=!!e&&!hH(n);return n&&i?e+n:n}function hH(n){return DRe.test(n)}function URe(n){window.open(n,"_blank","noopener")}function JT(n){let t="";for(const e of n.getItems()){if(!e.is("$text")&&!e.is("$textProxy"))return;t+=e.data}return t}class zRe extends Nt{constructor(){super(...arguments);y(this,"manualDecorators",new cr);y(this,"automaticDecorators",new xRe)}restoreManualDecoratorStates(){for(const e of this.manualDecorators)e.value=this._getDecoratorStateFromModel(e.id)}refresh(){const e=this.editor.model,i=e.document.selection,r=i.getSelectedElement()||gi(i.getSelectedBlocks());ZT(r,e.schema)?(this.value=r.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(r,"linkHref")):(this.value=i.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(i,"linkHref"));for(const s of this.manualDecorators)s.value=this._getDecoratorStateFromModel(s.id)}execute(e,i={},r){const s=this.editor.model,o=s.document.selection,a=[],l=[];for(const c in i)i[c]?a.push(c):l.push(c);s.change(c=>{const u=h=>{c.setAttribute("linkHref",e,h),a.forEach(g=>c.setAttribute(g,!0,h)),l.forEach(g=>c.removeAttribute(g,h))},d=(h,g)=>{const v=JT(h);if(!v)return h;let _=r;if(_||(_=g&&g==v?e:v),_!=v){const w=HRe(v,_);let C=0;for(const{offset:k,actual:E,expected:A}of w){const x=k+C,p=c.createRange(h.start.getShiftedBy(x),h.start.getShiftedBy(x+E.length)),R=WRe(p,h).getAttributes(),S=Array.from(R).filter(([F])=>s.schema.getAttributeProperties(F).isFormatting),I=c.createText(A,S);u(I),s.insertContent(I,p),C+=A.length}return c.createRange(h.start,h.start.getShiftedBy(_.length))}},f=h=>{const{plugins:g}=this.editor;if(c.setSelection(h.end),g.has("TwoStepCaretMovement"))g.get("TwoStepCaretMovement")._handleForwardMovement();else for(const v of["linkHref",...a,...l])c.removeSelectionAttribute(v)};if(o.isCollapsed){const h=o.getFirstPosition();if(o.hasAttribute("linkHref")){const g=o.getAttribute("linkHref"),v=Rv(h,"linkHref",g,s),_=d(v,g);u(_||v),_&&f(_)}else if(e!==""){const g=fl(o.getAttributes());g.set("linkHref",e),a.forEach(_=>{g.set(_,!0)});const v=s.insertContent(c.createText(r||e,g),h);f(v)}}else{const h=Array.from(o.getRanges()),g=s.schema.getValidRanges(h,"linkHref"),v=[];for(const C of o.getSelectedBlocks())s.schema.checkAttribute(C,"linkHref")&&v.push(c.createRangeOn(C));const _=v.slice();for(const C of g)this._isRangeToUpdate(C,v)&&_.push(C);const w=h.map(C=>({start:Ii.fromPosition(C.start,"toPrevious"),end:Ii.fromPosition(C.end,"toNext")}));for(let C of _){const k=(C.start.textNode||C.start.nodeAfter).getAttribute("linkHref");C=d(C,k)||C,u(C)}c.setSelection(w.map(C=>{const k=C.start.toPosition(),E=C.end.toPosition();return C.start.detach(),C.end.detach(),s.createRange(k,E)}))}})}_getDecoratorStateFromModel(e){const i=this.editor.model,r=i.document.selection,s=r.getSelectedElement();return ZT(s,i.schema)?s.getAttribute(e):r.getAttribute(e)}_isRangeToUpdate(e,i){for(const r of i)if(r.containsRange(e))return!1;return!0}}function HRe(n,t){const e=Ah(n,t),i={equal:0,insert:0,delete:0},r=[];let s="",o="";for(const a of[...e,null])a=="insert"?o+=t[i.equal+i.insert]:a=="delete"?s+=n[i.equal+i.delete]:(s.length||o.length)&&(r.push({offset:i.equal,actual:s,expected:o}),s="",o=""),a&&i[a]++;return r}function WRe(n,t){if(!n.isCollapsed)return gi(n.getItems());const e=n.start;return e.textNode?e.textNode:!e.nodeBefore||e.isEqual(t.start)?e.nodeAfter:e.nodeBefore}class jRe extends Nt{refresh(){const t=this.editor.model,e=t.document.selection,i=e.getSelectedElement();ZT(i,t.schema)?this.isEnabled=t.schema.checkAttribute(i,"linkHref"):this.isEnabled=t.schema.checkAttributeInSelection(e,"linkHref")}execute(){const t=this.editor,e=this.editor.model,i=e.document.selection,r=t.commands.get("link");e.change(s=>{const o=i.isCollapsed?[Rv(i.getFirstPosition(),"linkHref",i.getAttribute("linkHref"),e)]:e.schema.getValidRanges(i.getRanges(),"linkHref");for(const a of o)if(s.removeAttribute("linkHref",a),r)for(const l of r.manualDecorators)s.removeAttribute(l.id,a)})}}class qRe extends Wn(){constructor({id:e,label:i,attributes:r,classes:s,styles:o,defaultValue:a}){super();y(this,"id");y(this,"defaultValue");y(this,"label");y(this,"attributes");y(this,"classes");y(this,"styles");this.id=e,this.set("value",void 0),this.defaultValue=a,this.label=i,this.attributes=r,this.classes=s,this.styles=o}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}const GRe="ck-link_selected",QL="automatic",KRe="manual",YRe=/^(https?:)?\/\//;class lm extends Ne{constructor(e){super(e);y(this,"_linkOpeners",[]);e.config.define("link",{allowCreatingEmptyLinks:!1,addTargetToExternalLinks:!1,toolbar:["linkPreview","|","editLink","linkProperties","unlink"]})}static get pluginName(){return"LinkEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Gy,y7,Qs]}init(){const e=this.editor,i=this.editor.config.get("link.allowedProtocols");e.model.schema.extend("$text",{allowAttributes:"linkHref"}),e.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:YL}),e.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(o,a)=>YL(fH(o,i),a)}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:o=>o.getAttribute("href")}}),e.commands.add("link",new zRe(e)),e.commands.add("unlink",new jRe(e));const r=$Re(e.t,BRe(e.config.get("link.decorators")));this._enableAutomaticDecorators(r.filter(o=>o.mode===QL)),this._enableManualDecorators(r.filter(o=>o.mode===KRe)),e.plugins.get(Gy).registerAttribute("linkHref"),T7(e,"linkHref","a",GRe),this._enableLinkOpen(),this._enableSelectionAttributesFixer(),this._enableClipboardIntegration()}_registerLinkOpener(e){this._linkOpeners.push(e)}_enableAutomaticDecorators(e){const i=this.editor,s=i.commands.get("link").automaticDecorators;i.config.get("link.addTargetToExternalLinks")&&s.add({id:"linkIsExternal",mode:QL,callback:o=>!!o&&YRe.test(o),attributes:{target:"_blank",rel:"noopener noreferrer"}}),s.add(e),s.length&&i.conversion.for("downcast").add(s.getDispatcher())}_enableManualDecorators(e){if(!e.length)return;const i=this.editor,s=i.commands.get("link").manualDecorators;e.forEach(o=>{i.model.schema.extend("$text",{allowAttributes:o.id});const a=new qRe(o);s.add(a),i.conversion.for("downcast").attributeToElement({model:a.id,view:(l,{writer:c,schema:u},{item:d})=>{if((d.is("selection")||u.isInline(d))&&l){const f=c.createAttributeElement("a",a.attributes,{priority:5});a.classes&&c.addClass(a.classes,f);for(const h in a.styles)c.setStyle(h,a.styles[h],f);return c.setCustomProperty("link",!0,f),f}}}),i.conversion.for("upcast").elementToAttribute({view:{name:"a",...a._createPattern()},model:{key:a.id}})})}_enableLinkOpen(){const e=this.editor,r=e.editing.view.document,s=o=>{this._linkOpeners.some(a=>a(o))||URe(o)};this.listenTo(r,"click",(o,a)=>{if(!(Vt.isMac?a.domEvent.metaKey:a.domEvent.ctrlKey))return;let c=a.domTarget;if(c.tagName.toLowerCase()!="a"&&(c=c.closest("a")),!c)return;const u=c.getAttribute("href");u&&(o.stop(),a.preventDefault(),s(u))},{context:"$capture"}),this.listenTo(r,"keydown",(o,a)=>{const c=e.commands.get("link").value;c&&a.keyCode===fn.enter&&a.altKey&&(o.stop(),s(c))})}_enableSelectionAttributesFixer(){const i=this.editor.model,r=i.document.selection;this.listenTo(r,"change:attribute",(s,{attributeKeys:o})=>{!o.includes("linkHref")||r.hasAttribute("linkHref")||i.change(a=>{QRe(a,ZRe(i.schema))})})}_enableClipboardIntegration(){const e=this.editor,i=e.model,r=this.editor.config.get("link.defaultProtocol");r&&this.listenTo(e.plugins.get("ClipboardPipeline"),"contentInsertion",(s,o)=>{i.change(a=>{const l=a.createRangeIn(o.content);for(const c of l.getItems())if(c.hasAttribute("linkHref")){const u=LP(c.getAttribute("linkHref"),r);a.setAttribute("linkHref",u,c)}})})}}function QRe(n,t){n.removeSelectionAttribute("linkHref");for(const e of t)n.removeSelectionAttribute(e)}function ZRe(n){return n.getDefinition("$text").allowAttributes.filter(e=>e.startsWith("link"))}class JRe extends wt{constructor(t){super(t);const e=this.bindTemplate;this.set({href:void 0,withText:!0}),this.extendTemplate({attributes:{class:["ck-link-toolbar__preview"],href:e.to("href"),target:"_blank",rel:"noopener noreferrer"},on:{click:e.to(i=>{if(this.href){const r=()=>i.preventDefault();this.fire("navigate",this.href,r)}})}}),this.template.tag="a"}}class XRe extends dt{constructor(e,i){super(e);y(this,"focusTracker",new Mn);y(this,"keystrokes",new oi);y(this,"backButtonView");y(this,"saveButtonView");y(this,"displayedTextInputView");y(this,"urlInputView");y(this,"children");y(this,"providersListChildren");y(this,"_validators");y(this,"_focusables",new tr);y(this,"_focusCycler");this._validators=i,this.backButtonView=this._createBackButton(),this.saveButtonView=this._createSaveButton(),this.displayedTextInputView=this._createDisplayedTextInput(),this.urlInputView=this._createUrlInput(),this.providersListChildren=this.createCollection(),this.children=this.createCollection([this._createHeaderView()]),this._createFormChildren(),this.listenTo(this.providersListChildren,"add",()=>{this.stopListening(this.providersListChildren,"add"),this.children.add(this._createProvidersListView())}),this._focusCycler=new ur({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-link-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),bl({view:this}),[this.urlInputView,this.saveButtonView,...this.providersListChildren,this.backButtonView,this.displayedTextInputView].forEach(i=>{this._focusables.add(i),this.focusTracker.add(i.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}isValid(){this.resetFormStatus();for(const e of this._validators){const i=e(this);if(i)return this.urlInputView.errorText=i,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null}_createBackButton(){const e=this.locale.t,i=new wt(this.locale);return i.set({class:"ck-button-back",label:e("Back"),icon:sc,tooltip:!0}),i.delegate("execute").to(this,"cancel"),i}_createSaveButton(){const e=this.locale.t,i=new wt(this.locale);return i.set({label:e("Insert"),tooltip:!1,withText:!0,type:"submit",class:"ck-button-action ck-button-bold"}),i}_createHeaderView(){const e=this.locale.t,i=new wl(this.locale,{label:e("Link")});return i.children.add(this.backButtonView,0),i}_createProvidersListView(){const e=new Nm(this.locale);return e.extendTemplate({attributes:{class:["ck-link-form__providers-list"]}}),e.items.bindTo(this.providersListChildren).using(i=>{const r=new Ta(this.locale);return r.children.add(i),r}),e}_createDisplayedTextInput(){const e=this.locale.t,i=new Ri(this.locale,Ss);return i.label=e("Displayed text"),i.class="ck-labeled-field-view_full-width",i}_createUrlInput(){const e=this.locale.t,i=new Ri(this.locale,Ss);return i.fieldView.inputMode="url",i.label=e("Link URL"),i.class="ck-labeled-field-view_full-width",i}_createFormChildren(){this.children.add(new Cr(this.locale,{children:[this.displayedTextInputView],class:["ck-form__row_large-top-padding"]})),this.children.add(new Cr(this.locale,{children:[this.urlInputView,this.saveButtonView],class:["ck-form__row_with-submit","ck-form__row_large-top-padding","ck-form__row_large-bottom-padding"]}))}get url(){const{element:e}=this.urlInputView.fieldView;return e?e.value.trim():null}}class eVe extends dt{constructor(e){super(e);y(this,"focusTracker",new Mn);y(this,"keystrokes",new oi);y(this,"backButtonView");y(this,"listView");y(this,"listChildren");y(this,"emptyListInformation");y(this,"children");y(this,"_focusables",new tr);y(this,"_focusCycler");this.listChildren=this.createCollection(),this.backButtonView=this._createBackButton(),this.listView=this._createListView(),this.emptyListInformation=this._createEmptyLinksListItemView(),this.children=this.createCollection([this._createHeaderView(),this.emptyListInformation]),this.set("title",""),this.set("emptyListPlaceholder",""),this.set("hasItems",!1),this.listenTo(this.listChildren,"change",()=>{this.hasItems=this.listChildren.length>0}),this.on("change:hasItems",(i,r,s)=>{s?(this.children.remove(this.emptyListInformation),this.children.add(this.listView)):(this.children.remove(this.listView),this.children.add(this.emptyListInformation))}),this.keystrokes.set("Esc",(i,r)=>{this.fire("cancel"),r()}),this._focusCycler=new ur({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-providers"],tabindex:"-1"},children:this.children})}render(){super.render(),[this.listView,this.backButtonView].forEach(i=>{this._focusables.add(i),this.focusTracker.add(i.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createListView(){const e=new Nm(this.locale);return e.extendTemplate({attributes:{class:["ck-link-providers__list"]}}),e.items.bindTo(this.listChildren).using(i=>{const r=new Ta(this.locale);return r.children.add(i),r}),e}_createBackButton(){const e=this.locale.t,i=new wt(this.locale);return i.set({class:"ck-button-back",label:e("Back"),icon:sc,tooltip:!0}),i.delegate("execute").to(this,"cancel"),i}_createHeaderView(){const e=new wl(this.locale);return e.bind("label").to(this,"title"),e.children.add(this.backButtonView,0),e}_createEmptyLinksListItemView(){const e=new dt(this.locale);return e.setTemplate({tag:"p",attributes:{class:["ck","ck-link__empty-list-info"]},children:[{text:this.bindTemplate.to("emptyListPlaceholder")}]}),e}}class tVe extends dt{constructor(e){super(e);y(this,"focusTracker",new Mn);y(this,"keystrokes",new oi);y(this,"backButtonView");y(this,"children");y(this,"listChildren");y(this,"_focusables",new tr);y(this,"_focusCycler");this.backButtonView=this._createBackButton(),this.listChildren=this.createCollection(),this.children=this.createCollection([this._createHeaderView(),this._createListView()]),this._focusCycler=new ur({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-properties"],tabindex:"-1"},children:this.children}),this.keystrokes.set("Esc",(i,r)=>{this.fire("back"),r()})}render(){super.render(),[...this.listChildren,this.backButtonView].forEach(i=>{this._focusables.add(i),this.focusTracker.add(i.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBackButton(){const e=this.locale.t,i=new wt(this.locale);return i.set({class:"ck-button-back",label:e("Back"),icon:sc,tooltip:!0}),i.delegate("execute").to(this,"back"),i}_createHeaderView(){const e=this.locale.t,i=new wl(this.locale,{label:e("Link properties")});return i.children.add(this.backButtonView,0),i}_createListView(){const e=new Nm(this.locale);return e.extendTemplate({attributes:{class:["ck-link__list"]}}),e.items.bindTo(this.listChildren).using(i=>{const r=new Ta(this.locale);return r.children.add(i),r}),e}}class nVe extends wt{constructor(e){super(e);y(this,"arrowView");this.set({withText:!0}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-link__button"]}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new Uo;return e.content=O8,e}}const Ma="link-ui";class mH extends Ne{constructor(){super(...arguments);y(this,"toolbarView",null);y(this,"formView",null);y(this,"linkProviderItemsView",null);y(this,"propertiesView",null);y(this,"_balloon");y(this,"_linksProviders",new cr)}static get requires(){return[bo,lm]}static get pluginName(){return"LinkUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=this.editor.t;this.set("selectedLinkableText",void 0),e.editing.view.addObserver(WEe),this._balloon=e.plugins.get(bo),this._registerComponents(),this._registerEditingOpeners(),this._enableBalloonActivators(),e.conversion.for("editingDowncast").markerToHighlight({model:Ma,view:{classes:["ck-fake-link-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:Ma,view:(r,{writer:s})=>{if(!r.markerRange.isCollapsed)return null;const o=s.createUIElement("span");return s.addClass(["ck-fake-link-selection","ck-fake-link-selection_collapsed"],o),o}}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:i("Create link"),keystroke:Mg},{label:i("Move out of a link"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}destroy(){super.destroy(),this.propertiesView&&this.propertiesView.destroy(),this.formView&&this.formView.destroy(),this.toolbarView&&this.toolbarView.destroy(),this.linkProviderItemsView&&this.linkProviderItemsView.destroy()}registerLinksListProvider(e){const i=this._linksProviders.filter(r=>(r.order||0)<=(e.order||0)).length;this._linksProviders.add(e,i)}_createViews(){const e=this.editor.commands.get("link");this.toolbarView=this._createToolbarView(),this.formView=this._createFormView(),e.manualDecorators.length&&(this.propertiesView=this._createPropertiesView()),this._enableUserBalloonInteractions()}_createToolbarView(){const e=this.editor,i=new oc(e.locale),r=e.commands.get("link");i.class="ck-link-toolbar";let s=e.config.get("link.toolbar");return r.manualDecorators.length||(s=s.filter(o=>o!=="linkProperties")),i.fillFromConfig(s,e.ui.componentFactory),i.keystrokes.set("Esc",(o,a)=>{this._hideUI(),a()}),i.keystrokes.set(Mg,(o,a)=>{this._addFormView(),a()}),e.ui.addToolbar(i,{isContextual:!0,beforeFocus:()=>{this._getSelectedLinkElement()&&!this._isToolbarVisible&&this._showUI(!0)},afterBlur:()=>{this._hideUI(!1)}}),i}_createFormView(){const e=this.editor,i=e.locale.t,r=e.commands.get("link"),s=e.config.get("link.defaultProtocol"),o=new(Nd(XRe))(e.locale,iVe(e));return o.displayedTextInputView.bind("isEnabled").to(this,"selectedLinkableText",a=>a!==void 0),o.urlInputView.bind("isEnabled").to(r,"isEnabled"),o.saveButtonView.bind("isEnabled").to(r,"isEnabled"),o.saveButtonView.bind("label").to(r,"value",a=>i(a?"Update":"Insert")),this.listenTo(o,"submit",()=>{if(o.isValid()){const a=o.urlInputView.fieldView.element.value,l=LP(a,s),c=o.displayedTextInputView.fieldView.element.value;e.execute("link",l,this._getDecoratorSwitchesState(),c!==this.selectedLinkableText?c:void 0),this._closeFormView()}}),this.listenTo(o.urlInputView,"change:errorText",()=>{e.ui.update()}),this.listenTo(o,"cancel",()=>{this._closeFormView()}),o.keystrokes.set("Esc",(a,l)=>{this._closeFormView(),l()}),o.providersListChildren.bindTo(this._linksProviders).using(a=>this._createLinksListProviderButton(a)),o}_createLinkProviderListView(e){return e.getListItems().map(({href:i,label:r,icon:s})=>{const o=new wt;return o.set({label:r,icon:s,tooltip:!1,withText:!0}),o.on("execute",()=>{this.formView.resetFormStatus(),this.formView.urlInputView.fieldView.value=i,this.editor.editing.view.focus(),this._removeLinksProviderView(),this.formView.focus()}),o})}_createLinkProviderItemsView(e){const i=this.editor,r=i.locale.t,s=new eVe(i.locale),{emptyListPlaceholder:o,label:a}=e;return s.emptyListPlaceholder=o||r("No links available"),s.title=a,this.listenTo(s,"cancel",()=>{i.editing.view.focus(),this._removeLinksProviderView(),this.formView.focus()}),s}_createPropertiesView(){const e=this.editor,i=this.editor.commands.get("link"),r=new(Nd(tVe))(e.locale);return this.listenTo(r,"back",()=>{e.editing.view.focus(),this._removePropertiesView()}),r.listChildren.bindTo(i.manualDecorators).using(s=>{const o=new Md(e.locale);return o.set({label:s.label,withText:!0}),o.bind("isOn").toMany([s,i],"value",(a,l)=>l===void 0&&a===void 0?!!s.defaultValue:!!a),o.on("execute",()=>{s.set("value",!o.isOn),e.execute("link",i.value,this._getDecoratorSwitchesState())}),o}),r}_getDecoratorSwitchesState(){const e=this.editor.commands.get("link");return Array.from(e.manualDecorators).reduce((i,r)=>{const s=e.value===void 0&&r.value===void 0?r.defaultValue:r.value;return{...i,[r.id]:!!s}},{})}_registerEditingOpeners(){this.editor.plugins.get(lm)._registerLinkOpener(i=>{const r=this._getLinkProviderLinkByHref(i);if(!r)return!1;const{item:s,provider:o}=r;return o.navigate?o.navigate(s):!1})}_registerComponents(){const e=this.editor;e.ui.componentFactory.add("link",()=>{const i=this._createButton(wt);return i.set({tooltip:!0}),i}),e.ui.componentFactory.add("menuBar:link",()=>{const i=this._createButton(Ti);return i.set({role:"menuitemcheckbox"}),i}),e.ui.componentFactory.add("linkPreview",i=>{const r=new JRe(i),s=e.config.get("link.allowedProtocols"),o=e.commands.get("link"),a=i.t;r.bind("isEnabled").to(o,"value",c=>!!c),r.bind("href").to(o,"value",c=>c&&fH(c,s));const l=c=>{if(!c){r.label=void 0,r.icon=void 0,r.tooltip=a("Open link in new tab");return}const u=this._getLinkProviderLinkByHref(c);if(u){const{label:d,tooltip:f,icon:h}=u.item;r.label=d,r.tooltip=f||!1,r.icon=h}else r.label=c,r.icon=void 0,r.tooltip=a("Open link in new tab")};return l(o.value),this.listenTo(o,"change:value",(c,u,d)=>{l(d)}),this.listenTo(r,"navigate",(c,u,d)=>{const f=this._getLinkProviderLinkByHref(u);if(!f)return;const{provider:h,item:g}=f,{navigate:v}=h;v&&v(g)&&(c.stop(),d())}),r}),e.ui.componentFactory.add("unlink",i=>{const r=e.commands.get("unlink"),s=new wt(i),o=i.t;return s.set({label:o("Unlink"),icon:WTe,tooltip:!0}),s.bind("isEnabled").to(r),this.listenTo(s,"execute",()=>{e.execute("unlink"),this._hideUI()}),s}),e.ui.componentFactory.add("editLink",i=>{const r=e.commands.get("link"),s=new wt(i),o=i.t;return s.set({label:o("Edit link"),icon:N8,tooltip:!0}),s.bind("isEnabled").to(r),this.listenTo(s,"execute",()=>{this._addFormView()}),s}),e.ui.componentFactory.add("linkProperties",i=>{const r=e.commands.get("link"),s=new wt(i),o=i.t;return s.set({label:o("Link properties"),icon:RTe,tooltip:!0}),s.bind("isEnabled").to(r,"isEnabled",r,"value",r,"manualDecorators",(a,l,c)=>a&&!!l&&c.length>0),this.listenTo(s,"execute",()=>{this._addPropertiesView()}),s})}_createLinksListProviderButton(e){const i=this.editor.locale,r=new nVe(i);return r.set({label:e.label}),this.listenTo(r,"execute",()=>{this._showLinksProviderView(e)}),r}_createButton(e){const i=this.editor,r=i.locale,s=i.commands.get("link"),o=new e(i.locale),a=r.t;return o.set({label:a("Link"),icon:x8,keystroke:Mg,isToggleable:!0}),o.bind("isEnabled").to(s,"isEnabled"),o.bind("isOn").to(s,"value",l=>!!l),this.listenTo(o,"execute",()=>{i.editing.view.scrollToTheSelection(),this._showUI(!0),this._getSelectedLinkElement()&&this._addFormView()}),o}_enableBalloonActivators(){const e=this.editor,i=e.editing.view.document;this.listenTo(i,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),e.keystrokes.set(Mg,(r,s)=>{s(),e.commands.get("link").isEnabled&&(e.editing.view.scrollToTheSelection(),this._showUI(!0))})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(e,i)=>{this._isToolbarVisible&&!this.toolbarView.focusTracker.isFocused&&(this.toolbarView.focus(),i())},{priority:"high"}),this.editor.keystrokes.set("Esc",(e,i)=>{this._isUIVisible&&(this._hideUI(),i())}),pc({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>{this._hideUI(!1)}})}_addToolbarView(){this.toolbarView||this._createViews(),!this._isToolbarInPanel&&this._balloon.add({view:this.toolbarView,position:this._getBalloonPositionData(),balloonClassName:"ck-toolbar-container"})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const e=this.editor.commands.get("link");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this.formView.backButtonView.isVisible=e.isEnabled&&!!e.value,this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.selectedLinkableText=this._getSelectedLinkableText(),this.formView.displayedTextInputView.fieldView.value=this.selectedLinkableText||"",this.formView.urlInputView.fieldView.value=e.value||"",this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions()}_addPropertiesView(){this.propertiesView||this._createViews(),!this._arePropertiesInPanel&&(this.propertiesView.disableCssTransitions(),this._balloon.add({view:this.propertiesView,position:this._getBalloonPositionData()}),this.propertiesView.enableCssTransitions(),this.propertiesView.focus())}_showLinksProviderView(e){this.linkProviderItemsView&&this._removeLinksProviderView(),this.linkProviderItemsView=this._createLinkProviderItemsView(e),this._addLinkProviderItemsView(e)}_addLinkProviderItemsView(e){this.linkProviderItemsView.listChildren.clear(),this.linkProviderItemsView.listChildren.addMany(this._createLinkProviderListView(e)),this._balloon.add({view:this.linkProviderItemsView,position:this._getBalloonPositionData()}),this.linkProviderItemsView.focus()}_closeFormView(){const e=this.editor.commands.get("link");this.selectedLinkableText=void 0,e.value!==void 0?this._removeFormView():this._hideUI()}_removePropertiesView(){this._arePropertiesInPanel&&this._balloon.remove(this.propertiesView)}_removeLinksProviderView(){this._isLinksListInPanel&&this._balloon.remove(this.linkProviderItemsView)}_removeFormView(e=!0){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this.formView.displayedTextInputView.fieldView.reset(),this.formView.urlInputView.fieldView.reset(),this._balloon.remove(this.formView),e&&this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(e=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._isToolbarVisible?this._addFormView():this._addToolbarView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addToolbarView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(e=!0){const i=this.editor;this._isUIInPanel&&(this.stopListening(i.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e&&i.editing.view.focus(),this._removeLinksProviderView(),this._removePropertiesView(),this._removeFormView(e),this._isToolbarInPanel&&this._balloon.remove(this.toolbarView),this._hideFakeVisualSelection())}_startUpdatingUI(){const e=this.editor,i=e.editing.view.document;let r=this._getSelectedLinkElement(),s=a();const o=()=>{const l=this._getSelectedLinkElement(),c=a();r&&!l||!r&&c!==s?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),r=l,s=c};function a(){return i.selection.focus.getAncestors().reverse().find(l=>l.is("element"))}this.listenTo(e.ui,"update",o),this.listenTo(this._balloon,"change:visibleView",o)}get _arePropertiesInPanel(){return!!this.propertiesView&&this._balloon.hasView(this.propertiesView)}get _isLinksListInPanel(){return!!this.linkProviderItemsView&&this._balloon.hasView(this.linkProviderItemsView)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _isToolbarInPanel(){return!!this.toolbarView&&this._balloon.hasView(this.toolbarView)}get _isPropertiesVisible(){return!!this.propertiesView&&this._balloon.visibleView===this.propertiesView}get _isFormVisible(){return!!this.formView&&this._balloon.visibleView==this.formView}get _isToolbarVisible(){return!!this.toolbarView&&this._balloon.visibleView===this.toolbarView}get _isUIInPanel(){return this._arePropertiesInPanel||this._isLinksListInPanel||this._isFormInPanel||this._isToolbarInPanel}get _isUIVisible(){return this._isPropertiesVisible||this._isLinksListInPanel||this._isFormVisible||this._isToolbarVisible}_getBalloonPositionData(){const e=this.editor.editing.view,i=e.document;if(this.editor.model.markers.has(Ma)){const s=this.editor.editing.mapper.markerNameToElements(Ma);if(s){const o=Array.from(s),a=e.createRange(e.createPositionBefore(o[0]),e.createPositionAfter(o[o.length-1]));return{target:e.domConverter.viewRangeToDom(a)}}}return{target:()=>{const s=this._getSelectedLinkElement();return s?e.domConverter.mapViewToDom(s):e.domConverter.viewRangeToDom(i.selection.getFirstRange())}}}_getSelectedLinkElement(){const e=this.editor.editing.view,i=e.document.selection,r=i.getSelectedElement();if(i.isCollapsed||r&&Mi(r))return wE(i.getFirstPosition());{const s=i.getFirstRange().getTrimmed(),o=wE(s.start),a=wE(s.end);return!o||o!=a?null:e.createRangeIn(o).getTrimmed().isEqual(s)?o:null}}_getSelectedLinkableText(){const e=this.editor.model,i=this.editor.editing,r=this._getSelectedLinkElement();if(!r)return JT(e.document.selection.getFirstRange());const s=i.view.createRangeOn(r),o=i.mapper.toModelRange(s);return JT(o)}_getLinkProviderLinkByHref(e){if(!e)return null;for(const i of this._linksProviders){const r=i.getItem?i.getItem(e):i.getListItems().find(s=>s.href===e);if(r)return{provider:i,item:r}}return null}_showFakeVisualSelection(){const e=this.editor.model;e.change(i=>{const r=e.document.selection.getFirstRange();if(e.markers.has(Ma))i.updateMarker(Ma,{range:r});else if(r.start.isAtEnd){const s=r.start.getLastMatchingPosition(({item:o})=>!e.schema.isContent(o),{boundaries:r});i.addMarker(Ma,{usingOperation:!1,affectsData:!1,range:i.createRange(s,r.end)})}else i.addMarker(Ma,{usingOperation:!1,affectsData:!1,range:r})})}_hideFakeVisualSelection(){const e=this.editor.model;e.markers.has(Ma)&&e.change(i=>{i.removeMarker(Ma)})}}function wE(n){return n.getAncestors().find(t=>LRe(t))||null}function iVe(n){const t=n.t,e=n.config.get("link.allowCreatingEmptyLinks");return[i=>{if(!e&&!i.url.length)return t("Link URL must not be empty.")}]}const rVe=4,gH=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63}))|localhost)(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),sVe=2;class pH extends Ne{static get requires(){return[hl,lm]}static get pluginName(){return"AutoLink"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.model.document.selection;e.on("change:range",()=>{this.isEnabled=!e.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling(),this._enablePasteLinking()}_expandLinkRange(t,e){return e.textNode&&e.textNode.hasAttribute("linkHref")?Rv(e,"linkHref",e.textNode.getAttribute("linkHref"),t):null}_selectEntireLinks(t,e){const r=this.editor.model,s=r.document.selection,o=s.getFirstPosition(),a=s.getLastPosition();let l=e.getJoined(this._expandLinkRange(r,o)||e);l&&(l=l.getJoined(this._expandLinkRange(r,a)||e)),l&&(l.start.isBefore(o)||l.end.isAfter(a))&&t.setSelection(l)}_enablePasteLinking(){const t=this.editor,e=t.model,i=e.document.selection,r=t.plugins.get("ClipboardPipeline"),s=t.commands.get("link");r.on("inputTransformation",(o,a)=>{if(!this.isEnabled||!s.isEnabled||i.isCollapsed||a.method!=="paste"||i.rangeCount>1)return;const l=i.getFirstRange(),c=a.dataTransfer.getData("text/plain");if(!c)return;const u=c.match(gH);u&&u[2]===c&&(e.change(d=>{this._selectEntireLinks(d,l),s.execute(c)}),o.stop())},{priority:"high"})}_enableTypingHandling(){const t=this.editor,e=new C7(t.model,i=>{let r=i;if(!oVe(r))return;r=r.slice(0,-1),"!.:,;?".includes(r[r.length-1])&&(r=r.slice(0,-1));const s=ZL(r);if(s)return{url:s,removedTrailingCharacters:i.length-r.length}});e.on("matched:data",(i,r)=>{const{batch:s,range:o,url:a,removedTrailingCharacters:l}=r;if(!s.isTyping)return;const c=o.end.getShiftedBy(-l),u=c.getShiftedBy(-a.length),d=t.model.createRange(u,c);this._applyAutoLink(a,d)}),e.bind("isEnabled").to(this)}_enableEnterHandling(){const t=this.editor,e=t.model,i=t.commands.get("enter");i&&i.on("execute",()=>{var o;const r=e.document.selection.getFirstPosition();let s;(o=r.parent.previousSibling)!=null&&o.is("element")?s=e.createRangeIn(r.parent.previousSibling):s=e.createRange(e.createPositionAt(r.parent,0),r),this._checkAndApplyAutoLinkOnRange(s)})}_enableShiftEnterHandling(){const t=this.editor,e=t.model,i=t.commands.get("shiftEnter");i&&i.on("execute",()=>{const r=e.document.selection.getFirstPosition(),s=e.createRange(e.createPositionAt(r.parent,0),r.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(s)})}_checkAndApplyAutoLinkOnRange(t){const e=this.editor.model,{text:i,range:r}=E7(t,e),s=ZL(i);if(s){const o=e.createRange(r.end.getShiftedBy(-s.length),r.end);this._applyAutoLink(s,o)}}_applyAutoLink(t,e){const i=this.editor.model,r=this.editor.config.get("link.defaultProtocol"),s=LP(t,r);!this.isEnabled||!aVe(e,i)||!hH(s)||lVe(e)||this._persistAutoLink(s,e)}_persistAutoLink(t,e){const i=this.editor.model,r=this.editor.plugins.get("Delete");i.enqueueChange(s=>{s.setAttribute("linkHref",t,e),i.enqueueChange(()=>{r.requestUndoOnBackspace()})})}}function oVe(n){return n.length>rVe&&n[n.length-1]===" "&&n[n.length-2]!==" "}function ZL(n){const t=gH.exec(n);return t?t[sVe]:null}function aVe(n,t){return t.schema.checkAttributeInSelection(t.createSelection(n),"linkHref")}function lVe(n){const t=n.start.nodeAfter;return!!t&&t.hasAttribute("linkHref")}class cVe extends Ne{static get requires(){return[lm,mH,pH]}static get pluginName(){return"Link"}static get isOfficialPlugin(){return!0}}class uVe extends Ne{static get requires(){return["ImageEditing","ImageUtils",lm]}static get pluginName(){return"LinkImageEditing"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=t.model.schema;t.plugins.has("ImageBlockEditing")&&e.extend("imageBlock",{allowAttributes:["linkHref"]}),t.conversion.for("upcast").add(dVe(t)),t.conversion.for("downcast").add(fVe(t)),this._enableAutomaticDecorators(),this._enableManualDecorators()}_enableAutomaticDecorators(){const t=this.editor,i=t.commands.get("link").automaticDecorators;i.length&&t.conversion.for("downcast").add(i.getDispatcherForLinkedImage())}_enableManualDecorators(){const t=this.editor,e=t.commands.get("link");for(const i of e.manualDecorators)t.plugins.has("ImageBlockEditing")&&t.model.schema.extend("imageBlock",{allowAttributes:i.id}),t.plugins.has("ImageInlineEditing")&&t.model.schema.extend("imageInline",{allowAttributes:i.id}),t.conversion.for("downcast").add(hVe(i)),t.conversion.for("upcast").add(mVe(t,i))}}function dVe(n){const t=n.plugins.has("ImageInlineEditing"),e=n.plugins.get("ImageUtils");return i=>{i.on("element:a",(r,s,o)=>{const a=s.viewItem,l=e.findViewImgElement(a);if(!l)return;const c=l.findAncestor(h=>e.isBlockImageView(h));if(t&&!c)return;const u={attributes:["href"]};if(!o.consumable.consume(a,u))return;const d=a.getAttribute("href");if(!d)return;let f=s.modelCursor.parent;if(!f.is("element","imageBlock")){const h=o.convertItem(l,s.modelCursor);s.modelRange=h.modelRange,s.modelCursor=h.modelCursor,f=s.modelCursor.nodeBefore}f&&f.is("element","imageBlock")&&o.writer.setAttribute("linkHref",d,f)},{priority:"high"})}}function fVe(n){const t=n.plugins.get("ImageUtils");return e=>{e.on("attribute:linkHref:imageBlock",(i,r,s)=>{if(!s.consumable.consume(r.item,i.name))return;const o=s.mapper.toViewElement(r.item),a=s.writer,l=Array.from(o.getChildren()).find(d=>d.is("element","a")),c=t.findViewImgElement(o),u=c.parent.is("element","picture")?c.parent:c;if(l)r.attributeNewValue?a.setAttribute("href",r.attributeNewValue,l):(a.move(a.createRangeOn(u),a.createPositionAt(o,0)),a.remove(l));else{const d=a.createContainerElement("a",{href:r.attributeNewValue});a.insert(a.createPositionAt(o,0),d),a.move(a.createRangeOn(u),a.createPositionAt(d,0))}},{priority:"high"})}}function hVe(n){return t=>{t.on(`attribute:${n.id}:imageBlock`,(e,i,r)=>{const s=r.mapper.toViewElement(i.item),o=Array.from(s.getChildren()).find(a=>a.is("element","a"));if(o){if(n.value===void 0){for(const a in n.attributes)r.writer.removeAttribute(a,o);n.classes&&r.writer.removeClass(n.classes,o);for(const a in n.styles)r.writer.removeStyle(a,o);return}for(const[a,l]of fl(n.attributes))r.writer.setAttribute(a,l,o);n.classes&&r.writer.addClass(n.classes,o);for(const a in n.styles)r.writer.setStyle(a,n.styles[a],o)}})}}function mVe(n,t){const e=n.plugins.has("ImageInlineEditing"),i=n.plugins.get("ImageUtils");return r=>{r.on("element:a",(s,o,a)=>{const l=o.viewItem,c=i.findViewImgElement(l);if(!c)return;const u=c.findAncestor(g=>i.isBlockImageView(g));if(e&&!u)return;const f=new Vs(t._createPattern()).match(l);if(!f||!a.consumable.consume(l,f.match))return;const h=o.modelCursor.nodeBefore||o.modelCursor.parent;a.writer.setAttribute(t.id,!0,h)},{priority:"high"})}}class gVe extends Ne{static get requires(){return[lm,mH,"ImageBlockEditing"]}static get pluginName(){return"LinkImageUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view.document;this.listenTo(e,"click",(i,r)=>{this._isSelectedLinkedImage(t.model.document.selection)&&(r.preventDefault(),i.stop())},{priority:"high"}),this._createToolbarLinkImageButton()}_createToolbarLinkImageButton(){const t=this.editor,e=t.t;t.ui.componentFactory.add("linkImage",i=>{const r=new wt(i),s=t.plugins.get("LinkUI"),o=t.commands.get("link");return r.set({isEnabled:!0,label:e("Link image"),icon:x8,keystroke:Mg,tooltip:!0,isToggleable:!0}),r.bind("isEnabled").to(o,"isEnabled"),r.bind("isOn").to(o,"value",a=>!!a),this.listenTo(r,"execute",()=>{this._isSelectedLinkedImage(t.model.document.selection)?s._addToolbarView():s._showUI(!0)}),r})}_isSelectedLinkedImage(t){const e=t.getSelectedElement();return this.editor.plugins.get("ImageUtils").isImage(e)&&e.hasAttribute("linkHref")}}class pVe extends Ne{static get requires(){return[uVe,gVe]}static get pluginName(){return"LinkImage"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class zo{constructor(t,e){y(this,"_startElement");y(this,"_referenceIndent");y(this,"_isForward");y(this,"_includeSelf");y(this,"_sameAttributes");y(this,"_sameIndent");y(this,"_lowerIndent");y(this,"_higherIndent");this._startElement=t,this._referenceIndent=t.getAttribute("listIndent"),this._isForward=e.direction=="forward",this._includeSelf=!!e.includeSelf,this._sameAttributes=jn(e.sameAttributes||[]),this._sameIndent=!!e.sameIndent,this._lowerIndent=!!e.lowerIndent,this._higherIndent=!!e.higherIndent}static first(t,e){const r=new this(t,e)[Symbol.iterator]();return gi(r)}*[Symbol.iterator](){const t=[];for(const{node:e}of new Dv(this._getStartNode(),this._isForward?"forward":"backward")){const i=e.getAttribute("listIndent");if(i<this._referenceIndent){if(!this._lowerIndent)break;this._referenceIndent=i}else if(i>this._referenceIndent){if(!this._higherIndent)continue;if(!this._isForward){t.push(e);continue}}else{if(!this._sameIndent){if(this._higherIndent){t.length&&(yield*t,t.length=0);break}continue}if(this._sameAttributes.some(r=>e.getAttribute(r)!==this._startElement.getAttribute(r)))break}t.length&&(yield*t,t.length=0),yield e}}_getStartNode(){return this._includeSelf?this._startElement:this._isForward?this._startElement.nextSibling:this._startElement.previousSibling}}class Dv{constructor(t,e="forward"){y(this,"_node");y(this,"_isForward");y(this,"_previousNodesByIndent",[]);y(this,"_previous",null);y(this,"_previousNodeIndent",null);this._node=t,this._isForward=e==="forward"}[Symbol.iterator](){return this}next(){if(!fi(this._node))return{done:!0,value:void 0};const t=this._node.getAttribute("listIndent");let e=null;if(this._previous){const r=this._previousNodeIndent;t>r?this._previousNodesByIndent[r]=this._previous:t<r?(e=this._previousNodesByIndent[t]||null,this._previousNodesByIndent.length=t):e=this._previous}const i={node:this._node,previous:this._previous,previousNodeInList:e};return this._previous=this._node,this._previousNodeIndent=t,this._node=this._isForward?this._node.nextSibling:this._node.previousSibling,{value:i,done:!1}}}class vVe{constructor(t){y(this,"_listHead");this._listHead=t}[Symbol.iterator](){return new Dv(this._listHead)}}class cm{static next(){return cs()}}function fi(n){return!!n&&n.is("element")&&n.hasAttribute("listItemId")}function um(n,t={}){return[...wu(n,{...t,direction:"backward"}),...wu(n,{...t,direction:"forward"})]}function wu(n,t={}){const e=t.direction=="forward",i=Array.from(new zo(n,{...t,includeSelf:e,sameIndent:!0,sameAttributes:"listItemId"}));return e?i:i.reverse()}function bVe(n){return Array.from(new zo(n,{direction:"forward",higherIndent:!0}))}function vH(n,t){const e=new zo(n,{sameIndent:!0,sameAttributes:"listType",...t}),i=new zo(n,{sameIndent:!0,sameAttributes:"listType",includeSelf:!0,direction:"forward",...t});return[...Array.from(e).reverse(),...i]}function ac(n){return!zo.first(n,{sameIndent:!0,sameAttributes:"listItemId"})}function JL(n){return!zo.first(n,{direction:"forward",sameIndent:!0,sameAttributes:"listItemId"})}function Nv(n,t={}){n=jn(n);const e=t.withNested!==!1,i=new Set;for(const r of n)for(const s of um(r,{higherIndent:e}))i.add(s);return nf(i)}function H0(n){n=jn(n);const t=new Set;for(const e of n)for(const i of vH(e))t.add(i);return nf(t)}function MP(n,t){const e=wu(n,{direction:"forward"}),i=cm.next();for(const r of e)t.setAttribute("listItemId",i,r);return e}function XT(n,t,e){const i={};for(const[s,o]of t.getAttributes())s.startsWith("list")&&(i[s]=o);const r=wu(n,{direction:"forward"});for(const s of r)e.setAttributes(i,s);return r}function eS(n,t,{expand:e,indentBy:i=1}={}){n=jn(n);const r=e?Nv(n):n;for(const s of r){const o=s.getAttribute("listIndent")+i;o<0?W0(s,t):t.setAttribute("listIndent",o,s)}return r}function wVe(n,t){n=jn(n);const e=Nv(n),i=new Set,r=Math.min(...e.map(o=>o.getAttribute("listIndent"))),s=new Map;for(const o of e)s.set(o,zo.first(o,{lowerIndent:!0}));for(const o of e){if(i.has(o))continue;i.add(o);const a=o.getAttribute("listIndent")-1;if(a<0){W0(o,t);continue}if(o.getAttribute("listIndent")==r){const l=_Ve(o,s.get(o),t);for(const c of l)i.add(c);if(l.length)continue}t.setAttribute("listIndent",a,o)}return nf(i)}function W0(n,t){n=jn(n);for(const e of n)e.is("element","listItem")&&t.rename(e,"paragraph");for(const e of n)for(const i of e.getAttributeKeys())i.startsWith("list")&&t.removeAttribute(i,e);return n}function ov(n){if(!n.length)return!1;const t=n[0].getAttribute("listItemId");return t?!n.some(e=>e.getAttribute("listItemId")!=t):!1}function yVe(n,t){const e=[];let i=Number.POSITIVE_INFINITY;for(const{node:r}of new Dv(n.nextSibling)){const s=r.getAttribute("listIndent");if(s==0)break;s<i&&(i=s);const o=s-i;t.setAttribute("listIndent",o,r),e.push(r)}return e}function nf(n){return Array.from(n).filter(t=>t.root.rootName!=="$graveyard").sort((t,e)=>t.index-e.index)}function av(n){const t=n.document.selection.getSelectedElement();return t&&n.schema.isObject(t)&&n.schema.isBlock(t)?t:null}function yE(n,t){return t.checkChild(n.parent,"listItem")&&t.checkChild(n,"$text")&&!t.isObject(n)}function t_(n){return n=="numbered"||n=="customNumbered"}function _Ve(n,t,e){return wu(t,{direction:"forward"}).pop().index>n.index?XT(n,t,e):[]}class XL extends Nt{constructor(e,i){super(e);y(this,"_direction");this._direction=i}refresh(){this.isEnabled=this._checkEnabled()}execute(){const e=this.editor.model,i=eM(e.document.selection);e.change(r=>{const s=[];ov(i)&&!ac(i[0])?(this._direction=="forward"&&s.push(...eS(i,r)),s.push(...MP(i[0],r))):this._direction=="forward"?s.push(...eS(i,r,{expand:!0})):s.push(...wVe(i,r));for(const o of s){if(!o.hasAttribute("listType"))continue;const a=zo.first(o,{sameIndent:!0});a&&r.setAttribute("listType",a.getAttribute("listType"),o)}this._fireAfterExecute(s)})}_fireAfterExecute(e){this.fire("afterExecute",nf(new Set(e)))}_checkEnabled(){let e=eM(this.editor.model.document.selection),i=e[0];if(!i)return!1;if(this._direction=="backward"||ov(e)&&!ac(e[0]))return!0;e=Nv(e),i=e[0];const r=zo.first(i,{sameIndent:!0});return r?r.getAttribute("listType")==i.getAttribute("listType"):!1}}function eM(n){const t=Array.from(n.getSelectedBlocks()),e=t.findIndex(i=>!fi(i));return e!=-1&&(t.length=e),t}class $g extends Nt{constructor(e,i,r={}){super(e);y(this,"type");y(this,"_listWalkerOptions");this.type=i,this._listWalkerOptions=r.multiLevel?{higherIndent:!0,lowerIndent:!0,sameAttributes:[]}:void 0}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const i=this.editor.model,r=i.document,s=av(i),o=Array.from(r.selection.getSelectedBlocks()).filter(l=>i.schema.checkAttribute(l,"listType")||yE(l,i.schema)),a=e.forceValue!==void 0?!e.forceValue:this.value;i.change(l=>{if(a){const c=o[o.length-1],u=wu(c,{direction:"forward"}),d=[];u.length>1&&d.push(...MP(u[1],l)),d.push(...W0(o,l)),d.push(...yVe(c,l)),this._fireAfterExecute(d)}else if((s||r.selection.isCollapsed)&&fi(o[0])){const c=vH(s||o[0],this._listWalkerOptions);for(const u of c)l.setAttributes({...e.additionalAttributes,listType:this.type},u);this._fireAfterExecute(c)}else{const c=[];for(const u of o)if(!u.hasAttribute("listType"))!u.is("element","listItem")&&yE(u,i.schema)&&l.rename(u,"listItem"),l.setAttributes({...e.additionalAttributes,listIndent:0,listItemId:cm.next(),listType:this.type},u),c.push(u);else for(const d of Nv(u,{withNested:!1}))d.getAttribute("listType")!=this.type&&(l.setAttributes({...e.additionalAttributes,listType:this.type},d),c.push(d));this._fireAfterExecute(c)}})}_fireAfterExecute(e){this.fire("afterExecute",nf(new Set(e)))}_getValue(){const e=this.editor.model.document.selection,i=Array.from(e.getSelectedBlocks());if(!i.length)return!1;for(const r of i)if(r.getAttribute("listType")!=this.type)return!1;return!0}_checkEnabled(){const e=this.editor.model,i=e.schema,r=e.document.selection,s=Array.from(r.getSelectedBlocks());if(!s.length)return!1;if(this.value)return!0;for(const o of s)if(i.checkAttribute(o,"listType")||yE(o,i))return!0;return!1}}class tM extends Nt{constructor(e,i){super(e);y(this,"_direction");this._direction=i}refresh(){this.isEnabled=this._checkEnabled()}execute({shouldMergeOnBlocksContentLevel:e=!1}={}){const i=this.editor.model,r=i.document.selection,s=[];i.change(o=>{const{firstElement:a,lastElement:l}=this._getMergeSubjectElements(r,e),c=a.getAttribute("listIndent")||0,u=l.getAttribute("listIndent"),d=l.getAttribute("listItemId");if(c!=u){const f=bVe(l);s.push(...eS([l,...f],o,{indentBy:c-u,expand:c<u}))}if(e){let f=r;r.isCollapsed&&(f=o.createSelection(o.createRange(o.createPositionAt(a,"end"),o.createPositionAt(l,0)))),i.deleteContent(f,{doNotResetEntireContent:r.isCollapsed});const h=f.getLastPosition().parent,g=h.nextSibling;s.push(h),g&&g!==l&&g.getAttribute("listItemId")==d&&s.push(...XT(g,h,o))}else s.push(...XT(l,a,o));this._fireAfterExecute(s)})}_fireAfterExecute(e){this.fire("afterExecute",nf(new Set(e)))}_checkEnabled(){const e=this.editor.model,i=e.document.selection,r=av(e);if(i.isCollapsed||r){const s=r||i.getFirstPosition().parent;if(!fi(s))return!1;const o=this._direction=="backward"?s.previousSibling:s.nextSibling;if(!o||ov([s,o]))return!1}else{const s=i.getLastPosition(),o=i.getFirstPosition();if(s.parent===o.parent||!fi(s.parent))return!1}return!0}_getMergeSubjectElements(e,i){const r=this.editor.model,s=av(r);let o,a;if(e.isCollapsed||s){const l=s||e.getFirstPosition().parent,c=ac(l);this._direction=="backward"?(a=l,c&&!i?o=zo.first(l,{sameIndent:!0,lowerIndent:!0}):o=l.previousSibling):(o=l,a=l.nextSibling)}else o=e.getFirstPosition().parent,a=e.getLastPosition().parent;return{firstElement:o,lastElement:a}}}class nM extends Nt{constructor(e,i){super(e);y(this,"_direction");this._direction=i}refresh(){this.isEnabled=this._checkEnabled()}execute(){this.editor.model.change(i=>{const r=MP(this._getStartBlock(),i);this._fireAfterExecute(r)})}_fireAfterExecute(e){this.fire("afterExecute",nf(new Set(e)))}_checkEnabled(){const e=this.editor.model.document.selection,i=this._getStartBlock();return e.isCollapsed&&fi(i)&&!ac(i)}_getStartBlock(){const i=this.editor.model.document.selection.getFirstPosition().parent;return this._direction=="before"?i:i.nextSibling}}class kVe extends Ne{static get pluginName(){return"ListUtils"}static get isOfficialPlugin(){return!0}expandListBlocksToCompleteList(t){return H0(t)}isFirstBlockOfListItem(t){return ac(t)}isListItemBlock(t){return fi(t)}expandListBlocksToCompleteItems(t,e={}){return Nv(t,e)}isNumberedListType(t){return t_(t)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function EVe(n){return n.is("element","ol")||n.is("element","ul")}function tS(n){return n.is("element","li")}function CVe(n){let t=0,e=n.parent;for(;e;){if(tS(e))t++;else{const i=e.previousSibling;i&&tS(i)&&t++}e=e.parent}return t}function TVe(n,t,e,i=wH(e,t)){return n.createAttributeElement(bH(e),null,{priority:2*t/100-100,id:i})}function SVe(n,t,e){return n.createAttributeElement("li",null,{priority:(2*t+1)/100-100,id:e})}function bH(n){return n=="numbered"||n=="customNumbered"?"ol":"ul"}function wH(n,t){return`list-${n}-${t}`}function sa(n,t,e){const i=n.nodeBefore;if(fi(i)){let r=i;for(const{node:s}of new Dv(r,"backward"))if(r=s,e.has(r)||(e.add(r),t.has(i)))return;t.add(r)}else{const r=n.nodeAfter;fi(r)&&t.add(r)}}function AVe(n,t){let e=0,i=-1,r=null,s=!1;for(const{node:o}of n){const a=o.getAttribute("listIndent");if(a>e){let l;r===null?(r=a-e,l=e):(r>a&&(r=a),l=a-r),l>i+1&&(l=i+1),t.setAttribute("listIndent",l,o),s=!0,i=l}else r=null,e=a+1,i=a}return s}function IVe(n,t,e){const i=new Set;let r=!1;for(const{node:s}of n){if(i.has(s))continue;let o=s.getAttribute("listType"),a=s.getAttribute("listItemId");if(t.has(a)&&(a=cm.next()),t.add(a),s.is("element","listItem")){s.getAttribute("listItemId")!=a&&(e.setAttribute("listItemId",a,s),r=!0);continue}for(const l of wu(s,{direction:"forward"}))i.add(l),l.getAttribute("listType")!=o&&(a=cm.next(),o=l.getAttribute("listType")),l.getAttribute("listItemId")!=a&&(e.setAttribute("listItemId",a,l),r=!0)}return r}function PVe(){return(n,t,e)=>{const{writer:i,schema:r}=e;if(!t.modelRange)return;const s=Array.from(t.modelRange.getItems({shallow:!0})).filter(d=>r.checkAttribute(d,"listItemId"));if(!s.length)return;const o=cm.next(),a=CVe(t.viewItem);let l=t.viewItem.parent&&t.viewItem.parent.is("element","ol")?"numbered":"bulleted";const c=s[0].getAttribute("listType");c&&(l=c);const u={listItemId:o,listIndent:a,listType:l};for(const d of s)d.hasAttribute("listItemId")||i.setAttributes(u,d);s.length>1&&s[1].getAttribute("listItemId")!=u.listItemId&&e.keepEmptyElement(s[0])}}function xVe(n,t,e,i){return()=>{const a=n.document.differ.getChanges(),l=[],c=new Set,u=new Set,d=new Set;for(const f of a)if(f.type=="insert"&&f.name!="$text")sa(f.position,c,d),f.attributes.has("listItemId")?u.add(f.position.nodeAfter):sa(f.position.getShiftedBy(f.length),c,d);else if(f.type=="remove"&&f.attributes.has("listItemId"))sa(f.position,c,d);else if(f.type=="attribute"){const h=f.range.start.nodeAfter;e.includes(f.attributeKey)?(sa(f.range.start,c,d),f.attributeNewValue===null?(sa(f.range.start.getShiftedBy(1),c,d),s(h)&&l.push(h)):u.add(h)):fi(h)&&s(h)&&l.push(h)}for(const f of c.values())l.push(...r(f,u));for(const f of new Set(l))t.reconvertItem(f)};function r(a,l){const c=[],u=new Set,d=[];for(const{node:f,previous:h}of new Dv(a)){if(u.has(f))continue;const g=f.getAttribute("listIndent");h&&g<h.getAttribute("listIndent")&&(d.length=g+1),d[g]=Object.fromEntries(Array.from(f.getAttributes()).filter(([_])=>e.includes(_)));const v=wu(f,{direction:"forward"});for(const _ of v)u.add(_),(s(_,v)||o(_,d,l))&&c.push(_)}return c}function s(a,l){const c=t.mapper.toViewElement(a);if(!c)return!1;if(i.fire("checkElement",{modelElement:a,viewElement:c}))return!0;if(!a.is("element","paragraph")&&!a.is("element","listItem"))return!1;const d=_H(a,e,l);return d&&c.is("element","p")?!0:!!(!d&&c.is("element","span"))}function o(a,l,c){if(c.has(a))return!1;const u=t.mapper.toViewElement(a);let d=l.length-1;for(let f=u.parent;!f.is("editableElement");f=f.parent){const h=tS(f),g=EVe(f);if(!g&&!h)continue;const v=`checkAttributes:${h?"item":"list"}`;if(i.fire(v,{viewElement:f,modelAttributes:l[d]}))break;if(g&&(d--,d<0))return!1}return!0}}function iM(n,t,e,{dataPipeline:i}={}){const r=MVe(n);return(s,o,a)=>{const{writer:l,mapper:c,consumable:u}=a,d=o.item;if(!n.includes(o.attributeKey)||!r(d,u))return;const f=RVe(d,c,e);yH(f,l,c),NVe(f,l);const h=DVe(d,f,t,l,{dataPipeline:i});LVe(d,h,t,l)}}function OVe(n){return(t,e,i)=>{const{writer:r,mapper:s}=i,o=t.name.split(":")[1];if(!n.checkAttribute(o,"listItemId"))return;const a=s.toViewPosition(e.position),l=e.position.getShiftedBy(e.length),c=s.toViewPosition(l,{isPhantom:!0}),d=r.createRange(a,c).getTrimmed().end.nodeBefore;/* istanbul ignore next -- @preserve */d&&yH(d,r,s)}}function rM(n,{dataPipeline:t}={}){return(e,{writer:i})=>{if(!_H(e,n))return null;if(!t)return i.createContainerElement("span",{class:"ck-list-bogus-paragraph"});const r=i.createContainerElement("p");return i.setCustomProperty("dataPipeline:transparentRendering",!0,r),r}}function RVe(n,t,e){const i=e.createRangeOn(n);return t.toViewRange(i).getTrimmed().end.nodeBefore}function VVe(n,t){return(e,i)=>{if(i.modelPosition.offset>0)return;const r=i.modelPosition.parent;if(!fi(r)||!n.some(c=>c.scope=="itemMarker"&&c.canInjectMarkerIntoElement&&c.canInjectMarkerIntoElement(r)))return;const s=i.mapper.toViewElement(r),o=t.createRangeIn(s),a=o.getWalker();let l=o.start;for(const{item:c}of a){if(c.is("element")&&i.mapper.toModelElement(c)||c.is("$textProxy"))break;c.is("element")&&c.getCustomProperty("listItemMarker")&&(l=t.createPositionAfter(c),a.skip(({previousPosition:u})=>!u.isEqual(l)))}i.viewPosition=l}}function yH(n,t,e){for(;n.parent.is("attributeElement")&&n.parent.getCustomProperty("listItemWrapper");)t.unwrap(t.createRangeOn(n),n.parent);const i=[];r(t.createPositionBefore(n).getWalker({direction:"backward"})),r(t.createRangeIn(n).getWalker());for(const s of i)t.remove(s);function r(s){for(const{item:o}of s){if(o.is("element")&&e.toModelElement(o))break;o.is("element")&&o.getCustomProperty("listItemMarker")&&i.push(o)}}}function DVe(n,t,e,i,{dataPipeline:r}){let s=i.createRangeOn(t);if(!ac(n))return s;for(const o of e){if(o.scope!="itemMarker")continue;const a=o.createElement(i,n,{dataPipeline:r});if(!a||(i.setCustomProperty("listItemMarker",!0,a),o.canInjectMarkerIntoElement&&o.canInjectMarkerIntoElement(n)?i.insert(i.createPositionAt(t,0),a):(i.insert(s.start,a),s=i.createRange(i.createPositionBefore(a),i.createPositionAfter(t))),!o.createWrapperElement||!o.canWrapElement))continue;const l=o.createWrapperElement(i,n,{dataPipeline:r});i.setCustomProperty("listItemWrapper",!0,l),o.canWrapElement(n)?s=i.wrap(s,l):(s=i.wrap(i.createRangeOn(a),l),s=i.createRange(s.start,i.createPositionAfter(t)))}return s}function NVe(n,t){let e=n.parent;for(;e.is("attributeElement")&&["ul","ol","li"].includes(e.name);){const i=e.parent;t.unwrap(t.createRangeOn(n),e),e=i}}function LVe(n,t,e,i){if(!n.hasAttribute("listIndent"))return;const r=n.getAttribute("listIndent");let s=n;for(let o=r;o>=0;o--){const a=SVe(i,o,s.getAttribute("listItemId")),l=TVe(i,o,s.getAttribute("listType"));for(const c of e)(c.scope=="list"||c.scope=="item")&&s.hasAttribute(c.attributeName)&&c.setAttributeOnDowncast(i,s.getAttribute(c.attributeName),c.scope=="list"?l:a);if(t=i.wrap(t,a),t=i.wrap(t,l),o==0||(s=zo.first(s,{lowerIndent:!0}),!s))break}}function MVe(n){return(t,e)=>{const i=[];for(const r of n)t.hasAttribute(r)&&i.push(`attribute:${r}`);return i.every(r=>e.test(t,r)!==!1)?(i.forEach(r=>e.consume(t,r)),!0):!1}}function _H(n,t,e=um(n)){if(!fi(n))return!1;for(const i of n.getAttributeKeys())if(!(i.startsWith("selection:")||i=="htmlEmptyBlock")&&!t.includes(i))return!1;return e.length<2}const xw=["listType","listIndent","listItemId"];class lv extends Ne{constructor(e){super(e);y(this,"_downcastStrategies",[]);e.config.define("list.multiBlock",!0)}static get pluginName(){return"ListEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Vv,hl,kVe,Qs]}init(){const e=this.editor,i=e.model,r=e.config.get("list.multiBlock");if(e.plugins.has("LegacyListEditing"))throw new we("list-feature-conflict",this,{conflictPlugin:"LegacyListEditing"});i.schema.register("$listItem",{allowAttributes:xw}),r?(i.schema.extend("$container",{allowAttributesOf:"$listItem"}),i.schema.extend("$block",{allowAttributesOf:"$listItem"}),i.schema.extend("$blockObject",{allowAttributesOf:"$listItem"})):i.schema.register("listItem",{inheritAllFrom:"$block",allowAttributesOf:"$listItem"});for(const s of xw)i.schema.setAttributeProperties(s,{copyOnReplace:!0});e.commands.add("numberedList",new $g(e,"numbered")),e.commands.add("bulletedList",new $g(e,"bulleted")),e.commands.add("customNumberedList",new $g(e,"customNumbered",{multiLevel:!0})),e.commands.add("customBulletedList",new $g(e,"customBulleted",{multiLevel:!0})),e.commands.add("indentList",new XL(e,"forward")),e.commands.add("outdentList",new XL(e,"backward")),e.commands.add("splitListItemBefore",new nM(e,"before")),e.commands.add("splitListItemAfter",new nM(e,"after")),r&&(e.commands.add("mergeListItemBackward",new tM(e,"backward")),e.commands.add("mergeListItemForward",new tM(e,"forward"))),this._setupDeleteIntegration(),this._setupEnterIntegration(),this._setupTabIntegration(),this._setupClipboardIntegration(),this._setupAccessibilityIntegration()}afterInit(){const i=this.editor.commands,r=i.get("indent"),s=i.get("outdent");r&&r.registerChildCommand(i.get("indentList"),{priority:"high"}),s&&s.registerChildCommand(i.get("outdentList"),{priority:"lowest"}),this._setupModelPostFixing(),this._setupConversion()}registerDowncastStrategy(e){this._downcastStrategies.push(e)}getListAttributeNames(){return[...xw,...this._downcastStrategies.map(e=>e.attributeName)]}_setupDeleteIntegration(){const e=this.editor,i=e.commands.get("mergeListItemBackward"),r=e.commands.get("mergeListItemForward");this.listenTo(e.editing.view.document,"delete",(s,o)=>{const a=e.model.document.selection;av(e.model)||e.model.change(()=>{const l=a.getFirstPosition();if(a.isCollapsed&&o.direction=="backward"){if(!l.isAtStart)return;const c=l.parent;if(!fi(c))return;if(!zo.first(c,{sameAttributes:"listType",sameIndent:!0})&&c.getAttribute("listIndent")===0)JL(c)||e.execute("splitListItemAfter"),e.execute("outdentList");else{if(!i||!i.isEnabled)return;i.execute({shouldMergeOnBlocksContentLevel:sM(e.model,"backward")})}o.preventDefault(),s.stop()}else{if(a.isCollapsed&&!a.getLastPosition().isAtEnd||!r||!r.isEnabled)return;r.execute({shouldMergeOnBlocksContentLevel:sM(e.model,"forward")}),o.preventDefault(),s.stop()}})},{context:"li"})}_setupEnterIntegration(){const e=this.editor,i=e.model,r=e.commands,s=r.get("enter");this.listenTo(e.editing.view.document,"enter",(o,a)=>{const l=i.document,c=l.selection.getFirstPosition().parent;if(l.selection.isCollapsed&&fi(c)&&c.isEmpty&&!a.isSoft){const u=ac(c),d=JL(c);u&&d?(e.execute("outdentList"),a.preventDefault(),o.stop()):u&&!d?(e.execute("splitListItemAfter"),a.preventDefault(),o.stop()):d&&(e.execute("splitListItemBefore"),a.preventDefault(),o.stop())}},{context:"li"}),this.listenTo(s,"afterExecute",()=>{const o=r.get("splitListItemBefore");if(o.refresh(),!o.isEnabled)return;const l=e.model.document.selection.getLastPosition().parent;um(l).length===2&&o.execute()})}_setupTabIntegration(){const e=this.editor;this.listenTo(e.editing.view.document,"tab",(i,r)=>{const s=r.shiftKey?"outdentList":"indentList";this.editor.commands.get(s).isEnabled&&(e.execute(s),r.stopPropagation(),r.preventDefault(),i.stop())},{context:"li"})}_setupConversion(){const e=this.editor,i=e.model,r=this.getListAttributeNames(),s=e.config.get("list.multiBlock"),o=s?"paragraph":"listItem";e.conversion.for("upcast").elementToElement({view:"li",model:(l,{writer:c})=>c.createElement(o,{listType:""})}).elementToElement({view:"p",model:(l,{writer:c})=>l.parent&&l.parent.is("element","li")?c.createElement(o,{listType:""}):null,converterPriority:"high"}).add(l=>{l.on("element:li",PVe())}),s||e.conversion.for("downcast").elementToElement({model:"listItem",view:"p"}),e.conversion.for("editingDowncast").elementToElement({model:o,view:rM(r),converterPriority:"high"}).add(l=>{l.on("attribute",iM(r,this._downcastStrategies,i)),l.on("remove",OVe(i.schema))}),e.conversion.for("dataDowncast").elementToElement({model:o,view:rM(r,{dataPipeline:!0}),converterPriority:"high"}).add(l=>{l.on("attribute",iM(r,this._downcastStrategies,i,{dataPipeline:!0}))});const a=VVe(this._downcastStrategies,e.editing.view);e.editing.mapper.on("modelToViewPosition",a),e.data.mapper.on("modelToViewPosition",a),this.listenTo(i.document,"change:data",xVe(i,e.editing,r,this),{priority:"high"}),this.on("checkAttributes:item",(l,{viewElement:c,modelAttributes:u})=>{c.id!=u.listItemId&&(l.return=!0,l.stop())}),this.on("checkAttributes:list",(l,{viewElement:c,modelAttributes:u})=>{(c.name!=bH(u.listType)||c.id!=wH(u.listType,u.listIndent))&&(l.return=!0,l.stop())})}_setupModelPostFixing(){const e=this.editor.model,i=this.getListAttributeNames();e.document.registerPostFixer(r=>$Ve(e,r,i,this)),this.on("postFixer",(r,{listNodes:s,writer:o})=>{r.return=AVe(s,o)||r.return},{priority:"high"}),this.on("postFixer",(r,{listNodes:s,writer:o,seenIds:a})=>{r.return=IVe(s,a,o)||r.return},{priority:"high"})}_setupClipboardIntegration(){const e=this.editor.model,i=this.editor.plugins.get("ClipboardPipeline");this.listenTo(e,"insertContent",BVe(e),{priority:"high"}),this.listenTo(i,"outputTransformation",(r,s)=>{e.change(o=>{const a=Array.from(s.content.getChildren()),l=a[a.length-1];if(a.length>1&&l.is("element")&&l.isEmpty&&a.slice(0,-1).every(fi)&&o.remove(l),s.method=="copy"||s.method=="cut"){const c=Array.from(s.content.getChildren());ov(c)&&W0(c,o)}})})}_setupAccessibilityIntegration(){const e=this.editor,i=e.t;e.accessibility.addKeystrokeInfoGroup({id:"list",label:i("Keystrokes that can be used in a list"),keystrokes:[{label:i("Increase list item indent"),keystroke:"Tab"},{label:i("Decrease list item indent"),keystroke:"Shift+Tab"}]})}}function $Ve(n,t,e,i){const r=n.document.differ.getChanges(),s=new Set,o=new Set,a=i.editor.config.get("list.multiBlock");let l=!1;for(const u of r){if(u.type=="insert"&&u.name!="$text"){const d=u.position.nodeAfter;if(!n.schema.checkAttribute(d,"listItemId"))for(const f of Array.from(d.getAttributeKeys()))e.includes(f)&&(t.removeAttribute(f,d),l=!0);sa(u.position,o,s),u.attributes.has("listItemId")||sa(u.position.getShiftedBy(u.length),o,s);for(const{item:f,previousPosition:h}of n.createRangeIn(d))fi(f)&&sa(h,o,s)}else u.type=="remove"?sa(u.position,o,s):u.type=="attribute"&&e.includes(u.attributeKey)&&(sa(u.range.start,o,s),u.attributeNewValue===null&&sa(u.range.start.getShiftedBy(1),o,s));if(!a&&u.type=="attribute"&&xw.includes(u.attributeKey)){const d=u.range.start.nodeAfter;u.attributeNewValue===null&&d&&d.is("element","listItem")?(t.rename(d,"paragraph"),l=!0):u.attributeOldValue===null&&d&&d.is("element")&&d.name!="listItem"&&(t.rename(d,"listItem"),l=!0)}}const c=new Set;for(const u of o.values())l=i.fire("postFixer",{listNodes:new vVe(u),listHead:u,writer:t,seenIds:c})||l;return l}function BVe(n){return(t,[e,i])=>{const r=e.is("documentFragment")?Array.from(e.getChildren()):[e];if(!r.length)return;const o=(i?n.createSelection(i):n.document.selection).getFirstPosition();let a;if(fi(o.parent))a=o.parent;else if(fi(o.nodeBefore)&&fi(o.nodeAfter))a=o.nodeBefore;else return;n.change(l=>{const c=a.getAttribute("listType"),u=a.getAttribute("listIndent"),d=r[0].getAttribute("listIndent")||0,f=Math.max(u-d,0);for(const h of r){const g=fi(h);a.is("element","listItem")&&h.is("element","paragraph")&&l.rename(h,"listItem"),l.setAttributes({listIndent:(g?h.getAttribute("listIndent"):0)+f,listItemId:g?h.getAttribute("listItemId"):cm.next(),listType:c},h)}})}}function sM(n,t){const e=n.document.selection;if(!e.isCollapsed)return!av(n);if(t==="forward")return!0;const r=e.getFirstPosition().parent,s=r.previousSibling;return n.schema.isObject(s)?!1:s.isEmpty?!0:ov([r,s])}function nS(n,t,e,i){n.ui.componentFactory.add(t,()=>{const r=oM(wt,n,t,e,i);return r.set({tooltip:!0,isToggleable:!0}),r}),n.ui.componentFactory.add(`menuBar:${t}`,()=>{const r=oM(Ti,n,t,e,i);return r.set({role:"menuitemcheckbox",isToggleable:!0}),r})}function oM(n,t,e,i,r){const s=t.commands.get(e),o=new n(t.locale);return o.set({label:i,icon:r}),o.bind("isOn","isEnabled").to(s,"value","isEnabled"),o.on("execute",()=>{t.execute(e),t.editing.view.focus()}),o}class FVe extends Ne{static get pluginName(){return"ListUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.t;this.editor.ui.componentFactory.has("numberedList")||nS(this.editor,"numberedList",t("Numbered List"),cP),this.editor.ui.componentFactory.has("bulletedList")||nS(this.editor,"bulletedList",t("Bulleted List"),lP)}}class UVe extends Ne{static get requires(){return[lv,FVe]}static get pluginName(){return"List"}static get isOfficialPlugin(){return!0}}class zVe extends Nt{refresh(){const t=this._getValue();this.value=t,this.isEnabled=t!=null}execute({startIndex:t=1}={}){const e=this.editor.model,i=e.document;let r=Array.from(i.selection.getSelectedBlocks()).filter(s=>fi(s)&&t_(s.getAttribute("listType")));r=H0(r),e.change(s=>{for(const o of r)s.setAttribute("listStart",t>=0?t:1,o)})}_getValue(){const e=this.editor.model.document,i=gi(e.selection.getSelectedBlocks());return i&&fi(i)&&t_(i.getAttribute("listType"))?i.getAttribute("listStart"):null}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const kH={},EH={},CH={},TH=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:n,typeAttribute:t,listType:e}of TH)kH[n]=e,EH[n]=t,t&&(CH[t]=n);function SH(){return TH.map(n=>n.listStyle)}function $P(n){return kH[n]||null}function AH(n){return CH[n]||null}function iS(n){return EH[n]||null}function HVe(n){switch(n){case"lower-alpha":return"lower-latin";case"upper-alpha":return"upper-latin";default:return n}}class WVe extends Nt{constructor(e,i,r){super(e);y(this,"defaultType");y(this,"_supportedTypes");this.defaultType=i,this._supportedTypes=r}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const i=this.editor.model,r=i.document;i.change(s=>{this._tryToConvertItemsToList(e);let o=Array.from(r.selection.getSelectedBlocks()).filter(a=>a.hasAttribute("listType"));if(o.length){o=H0(o);for(const a of o)s.setAttribute("listStyle",e.type||this.defaultType,a)}})}isStyleTypeSupported(e){return this._supportedTypes?this._supportedTypes.includes(e):!0}_getValue(){const e=gi(this.editor.model.document.selection.getSelectedBlocks());return fi(e)?e.getAttribute("listStyle"):null}_checkEnabled(){const e=this.editor,i=e.commands.get("numberedList"),r=e.commands.get("bulletedList");return i.isEnabled||r.isEnabled}_tryToConvertItemsToList(e){if(!e.type)return;const i=$P(e.type);if(!i)return;const r=this.editor,s=`${i}List`;r.commands.get(s).value||r.execute(s)}}class jVe extends Nt{refresh(){const t=this._getValue();this.value=t,this.isEnabled=t!=null}execute(t={}){const e=this.editor.model,i=e.document;let r=Array.from(i.selection.getSelectedBlocks()).filter(s=>fi(s)&&s.getAttribute("listType")=="numbered");r=H0(r),e.change(s=>{for(const o of r)s.setAttribute("listReversed",!!t.reversed,o)})}_getValue(){const e=this.editor.model.document,i=gi(e.selection.getSelectedBlocks());return fi(i)&&i.getAttribute("listType")=="numbered"?i.getAttribute("listReversed"):null}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function aM(n){return(t,e,i)=>{const{writer:r,schema:s,consumable:o}=i;if(o.test(e.viewItem,n.viewConsumables)===!1)return;e.modelRange||Object.assign(e,i.convertChildren(e.viewItem,e.modelCursor));let a=!1;for(const l of e.modelRange.getItems({shallow:!0}))s.checkAttribute(l,n.attributeName)&&n.appliesToListItem(l)&&(l.hasAttribute(n.attributeName)||(r.setAttribute(n.attributeName,n.getAttributeOnUpcast(e.viewItem),l),a=!0));a&&o.consume(e.viewItem,n.viewConsumables)}}class qVe extends Ne{static get pluginName(){return"ListPropertiesUtils"}static get isOfficialPlugin(){return!0}getAllSupportedStyleTypes(){return SH()}getListTypeFromListStyleType(t){return $P(t)}getListStyleTypeFromTypeAttribute(t){return AH(t)}getTypeAttributeFromListStyleType(t){return iS(t)}}function IH(n){const{startIndex:t,reversed:e,styles:i}=n;return{styles:GVe(i),startIndex:t||!1,reversed:e||!1}}function GVe(n){const t={listTypes:["bulleted","numbered"],useAttribute:!1};return n===!0||(n?Array.isArray(n)||typeof n=="string"?t.listTypes=jn(n):(t.listTypes=n.listTypes?jn(n.listTypes):t.listTypes,t.useAttribute=!!n.useAttribute,n.listStyleTypes&&(t.listStyleTypes=n.listStyleTypes)):t.listTypes=[]),t}const _g="default";class KVe extends Ne{static get requires(){return[lv,qVe]}static get pluginName(){return"ListPropertiesEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("list.properties",{styles:!0,startIndex:!1,reversed:!1})}init(){const t=this.editor,e=t.model,i=t.plugins.get(lv),r=t.config.get("list.properties"),s=YVe(r);for(const o of s)o.addCommand(t),e.schema.extend("$listItem",{allowAttributes:o.attributeName}),i.registerDowncastStrategy({scope:"list",attributeName:o.attributeName,setAttributeOnDowncast(a,l,c){o.setAttributeOnDowncast(a,l,c)}});t.conversion.for("upcast").add(o=>{for(const a of s)o.on("element:ol",aM(a)),o.on("element:ul",aM(a))}),i.on("checkAttributes:list",(o,{viewElement:a,modelAttributes:l})=>{for(const c of s)c.getAttributeOnUpcast(a)!=l[c.attributeName]&&(o.return=!0,o.stop())}),this.listenTo(t.commands.get("indentList"),"afterExecute",(o,a)=>{e.change(l=>{for(const c of a)for(const u of s)u.appliesToListItem(c)&&l.setAttribute(u.attributeName,u.defaultValue,c)})}),i.on("postFixer",(o,{listNodes:a,writer:l})=>{for(const{node:c}of a)for(const u of s)u.hasValidAttribute(c)||(u.appliesToListItem(c)?l.setAttribute(u.attributeName,u.defaultValue,c):l.removeAttribute(u.attributeName,c),o.return=!0)}),i.on("postFixer",(o,{listNodes:a,writer:l})=>{for(const{node:c,previousNodeInList:u}of a)if(u&&u.getAttribute("listType")==c.getAttribute("listType"))for(const d of s){const{attributeName:f}=d;if(!d.appliesToListItem(c))continue;const h=u.getAttribute(f);c.getAttribute(f)!=h&&(l.setAttribute(f,h,c),o.return=!0)}})}}function YVe(n){const t=[],e=IH(n);if(n.styles){const i=e.styles.useAttribute;t.push({attributeName:"listStyle",defaultValue:_g,viewConsumables:{styles:"list-style-type"},addCommand(r){let s=SH();i&&(s=s.filter(o=>!!iS(o))),r.commands.add("listStyle",new WVe(r,_g,s))},appliesToListItem(r){return r.getAttribute("listType")=="numbered"||r.getAttribute("listType")=="bulleted"},hasValidAttribute(r){if(!this.appliesToListItem(r))return!r.hasAttribute("listStyle");if(!r.hasAttribute("listStyle"))return!1;const s=r.getAttribute("listStyle");return s==_g?!0:$P(s)==r.getAttribute("listType")},setAttributeOnDowncast(r,s,o){if(s&&s!==_g)if(i){const a=iS(s);if(a){r.setAttribute("type",a,o);return}}else{r.setStyle("list-style-type",s,o);return}r.removeStyle("list-style-type",o),r.removeAttribute("type",o)},getAttributeOnUpcast(r){const s=r.getStyle("list-style-type");if(s)return HVe(s);const o=r.getAttribute("type");return o?AH(o):_g}})}return n.reversed&&t.push({attributeName:"listReversed",defaultValue:!1,viewConsumables:{attributes:"reversed"},addCommand(i){i.commands.add("listReversed",new jVe(i))},appliesToListItem(i){return i.getAttribute("listType")=="numbered"},hasValidAttribute(i){return this.appliesToListItem(i)==i.hasAttribute("listReversed")},setAttributeOnDowncast(i,r,s){r?i.setAttribute("reversed","reversed",s):i.removeAttribute("reversed",s)},getAttributeOnUpcast(i){return i.hasAttribute("reversed")}}),n.startIndex&&t.push({attributeName:"listStart",defaultValue:1,viewConsumables:{attributes:"start"},addCommand(i){i.commands.add("listStart",new zVe(i))},appliesToListItem(i){return t_(i.getAttribute("listType"))},hasValidAttribute(i){return this.appliesToListItem(i)==i.hasAttribute("listStart")},setAttributeOnDowncast(i,r,s){r==0||r>1?i.setAttribute("start",r,s):i.removeAttribute("start",s)},getAttributeOnUpcast(i){const r=i.getAttribute("start");return r>=0?r:1}}),t}class PH extends dt{constructor(e,{enabledProperties:i,styleButtonViews:r,styleGridAriaLabel:s}){super(e);y(this,"children");y(this,"stylesView",null);y(this,"additionalPropertiesCollapsibleView",null);y(this,"startIndexFieldView",null);y(this,"reversedSwitchButtonView",null);y(this,"focusTracker",new Mn);y(this,"keystrokes",new oi);y(this,"focusables",new tr);y(this,"focusCycler");const o=["ck","ck-list-properties"];this.children=this.createCollection(),this.focusCycler=new ur({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),r&&r.length?(this.stylesView=this._createStylesView(r,s),this.children.add(this.stylesView)):o.push("ck-list-properties_without-styles"),(i.startIndex||i.reversed)&&(this._addNumberedListPropertyViews(i),o.push("ck-list-properties_with-numbered-properties")),this.setTemplate({tag:"div",attributes:{class:o},children:this.children})}render(){if(super.render(),this.stylesView){this.focusables.add(this.stylesView),this.focusTracker.add(this.stylesView.element),(this.startIndexFieldView||this.reversedSwitchButtonView)&&(this.focusables.add(this.children.last.buttonView),this.focusTracker.add(this.children.last.buttonView.element));for(const e of this.stylesView.children)this.stylesView.focusTracker.add(e.element);xv({keystrokeHandler:this.stylesView.keystrokes,focusTracker:this.stylesView.focusTracker,gridItems:this.stylesView.children,numberOfColumns:()=>at.window.getComputedStyle(this.stylesView.element).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}if(this.startIndexFieldView){this.focusables.add(this.startIndexFieldView),this.focusTracker.add(this.startIndexFieldView.element);const e=i=>i.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}this.reversedSwitchButtonView&&(this.focusables.add(this.reversedSwitchButtonView),this.focusTracker.add(this.reversedSwitchButtonView.element)),this.keystrokes.listenTo(this.element)}focus(){this.focusCycler.focusFirst()}focusLast(){this.focusCycler.focusLast()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createStylesView(e,i){const r=new dt(this.locale);return r.children=r.createCollection(),r.children.addMany(e),r.setTemplate({tag:"div",attributes:{"aria-label":i,class:["ck","ck-list-styles-list"]},children:r.children}),r.children.delegate("execute").to(this),r.focus=function(){for(const s of this.children)if(s instanceof wt&&s.isOn){s.focus();return}this.children.first.focus()},r.focusTracker=new Mn,r.keystrokes=new oi,r.render(),r.keystrokes.listenTo(r.element),r}_addNumberedListPropertyViews(e){const i=this.locale.t,r=[];e.startIndex&&(this.startIndexFieldView=this._createStartIndexField(),r.push(this.startIndexFieldView)),e.reversed&&(this.reversedSwitchButtonView=this._createReversedSwitchButton(),r.push(this.reversedSwitchButtonView)),this.stylesView?(this.additionalPropertiesCollapsibleView=new gP(this.locale,r),this.additionalPropertiesCollapsibleView.set({label:i("List properties"),isCollapsed:!0}),this.additionalPropertiesCollapsibleView.buttonView.bind("isEnabled").toMany(r,"isEnabled",(...s)=>s.some(o=>o)),this.additionalPropertiesCollapsibleView.buttonView.on("change:isEnabled",(s,o,a)=>{a||(this.additionalPropertiesCollapsibleView.isCollapsed=!0)}),this.children.add(this.additionalPropertiesCollapsibleView)):this.children.addMany(r)}_createStartIndexField(){const e=this.locale.t,i=new Ri(this.locale,o7);return i.set({label:e("Start at"),class:"ck-numbered-list-properties__start-index"}),i.fieldView.set({min:0,step:1,value:1,inputMode:"numeric"}),i.fieldView.on("input",()=>{const r=i.fieldView.element,s=r.valueAsNumber;if(Number.isNaN(s)){i.errorText=e("Invalid start index value.");return}r.checkValidity()?this.fire("listStart",{startIndex:s}):i.errorText=e("Start index must be greater than 0.")}),i}_createReversedSwitchButton(){const e=this.locale.t,i=new Md(this.locale);return i.set({withText:!0,label:e("Reversed order"),class:"ck-numbered-list-properties__reversed-order"}),i.delegate("execute").to(this,"listReversed"),i}}class QVe extends Ne{static get pluginName(){return"ListPropertiesUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,i=t.config.get("list.properties"),r=IH(i),s=r.styles.listTypes;if(s.includes("bulleted")){const o=[{label:e("Toggle the disc list style"),tooltip:e("Disc"),type:"disc",icon:uTe},{label:e("Toggle the circle list style"),tooltip:e("Circle"),type:"circle",icon:aTe},{label:e("Toggle the square list style"),tooltip:e("Square"),type:"square",icon:hTe}],a=e("Bulleted List"),l=e("Bulleted list styles toolbar"),c="bulletedList";t.ui.componentFactory.add(c,lM({editor:t,normalizedConfig:r,parentCommandName:c,buttonLabel:a,buttonIcon:lP,styleGridAriaLabel:l,styleDefinitions:o})),t.ui.componentFactory.add(`menuBar:${c}`,cM({editor:t,normalizedConfig:r,parentCommandName:c,buttonLabel:a,styleGridAriaLabel:l,styleDefinitions:o}))}if(s.includes("numbered")||i.startIndex||i.reversed){const o=[{label:e("Toggle the decimal list style"),tooltip:e("Decimal"),type:"decimal",icon:cTe},{label:e("Toggle the decimal with leading zero list style"),tooltip:e("Decimal with leading zero"),type:"decimal-leading-zero",icon:lTe},{label:e("Toggle the lower–roman list style"),tooltip:e("Lower–roman"),type:"lower-roman",icon:fTe},{label:e("Toggle the upper–roman list style"),tooltip:e("Upper-roman"),type:"upper-roman",icon:gTe},{label:e("Toggle the lower–latin list style"),tooltip:e("Lower-latin"),type:"lower-latin",icon:dTe},{label:e("Toggle the upper–latin list style"),tooltip:e("Upper-latin"),type:"upper-latin",icon:mTe}],a=e("Numbered List"),l=e("Numbered list styles toolbar"),c="numberedList";t.ui.componentFactory.add(c,lM({editor:t,normalizedConfig:r,parentCommandName:c,buttonLabel:a,buttonIcon:cP,styleGridAriaLabel:l,styleDefinitions:o})),s.includes("numbered")&&t.ui.componentFactory.add(`menuBar:${c}`,cM({editor:t,normalizedConfig:r,parentCommandName:c,buttonLabel:a,styleGridAriaLabel:l,styleDefinitions:o}))}}}function lM({editor:n,normalizedConfig:t,parentCommandName:e,buttonLabel:i,buttonIcon:r,styleGridAriaLabel:s,styleDefinitions:o}){const a=n.commands.get(e);return l=>{const c=as(l,Lm),u=c.buttonView;return c.bind("isEnabled").to(a),c.class="ck-list-styles-dropdown",u.on("execute",()=>{n.execute(e),n.editing.view.focus()}),u.set({label:i,icon:r,tooltip:!0,isToggleable:!0}),u.bind("isOn").to(a,"value",d=>!!d),c.once("change:isOpen",()=>{const d=ZVe({editor:n,normalizedConfig:t,dropdownView:c,parentCommandName:e,styleGridAriaLabel:s,styleDefinitions:o});c.panelView.children.add(d)}),c.on("execute",()=>{n.editing.view.focus()}),c}}function xH({editor:n,listStyleCommand:t,parentCommandName:e}){const i=n.locale,r=n.commands.get(e);return({label:s,type:o,icon:a,tooltip:l})=>{const c=new wt(i);return c.set({label:s,icon:a,tooltip:l}),c.bind("isOn").to(t,"value",u=>u===o),c.on("execute",()=>{r.value?t.value===o?n.execute(e):t.value!==o&&n.execute("listStyle",{type:o}):n.model.change(()=>{n.execute("listStyle",{type:o})})}),c}}function ZVe({editor:n,normalizedConfig:t,dropdownView:e,parentCommandName:i,styleDefinitions:r,styleGridAriaLabel:s}){const o=n.locale,a={...t,...i!="numberedList"?{startIndex:!1,reversed:!1}:null},l=i.replace("List","");let c=null;if(t.styles.listTypes.includes(l)){const d=n.commands.get("listStyle"),f=xH({editor:n,parentCommandName:i,listStyleCommand:d}),h=t.styles.listStyleTypes;let g=r;if(h){const _=h[l];_&&(g=r.filter(w=>_.includes(w.type)))}const v=OH(d);c=g.filter(v).map(f)}const u=new PH(o,{styleGridAriaLabel:s,enabledProperties:a,styleButtonViews:c});if(t.styles.listTypes.includes(l)&&vP(e,()=>u.stylesView.children.find(d=>d.isOn)),a.startIndex){const d=n.commands.get("listStart");u.startIndexFieldView.bind("isEnabled").to(d),u.startIndexFieldView.fieldView.bind("value").to(d),u.on("listStart",(f,h)=>n.execute("listStart",h))}if(a.reversed){const d=n.commands.get("listReversed");u.reversedSwitchButtonView.bind("isEnabled").to(d),u.reversedSwitchButtonView.bind("isOn").to(d,"value",f=>!!f),u.on("listReversed",()=>{const f=d.value;n.execute("listReversed",{reversed:!f})})}return u.delegate("execute").to(e),u}function cM({editor:n,normalizedConfig:t,parentCommandName:e,buttonLabel:i,styleGridAriaLabel:r,styleDefinitions:s}){return o=>{const a=new ma(o),l=n.commands.get(e),c=n.commands.get("listStyle"),u=OH(c),d=xH({editor:n,parentCommandName:e,listStyleCommand:c}),f=t.styles.listStyleTypes;let h=s;if(f){const _=l.type,w=f[_];w&&(h=s.filter(C=>w.includes(C.type)))}const g=h.filter(u).map(d),v=new PH(o,{styleGridAriaLabel:r,enabledProperties:{...t,startIndex:!1,reversed:!1},styleButtonViews:g});return v.delegate("execute").to(a),a.buttonView.set({label:i,icon:e==="bulletedList"?lP:cP}),a.panelView.children.add(v),a.bind("isEnabled").to(l,"isEnabled"),a.on("execute",()=>{n.editing.view.focus()}),a}}function OH(n){return typeof n.isStyleTypeSupported=="function"?t=>n.isStyleTypeSupported(t.type):()=>!0}class JVe extends Ne{static get requires(){return[KVe,QVe]}static get pluginName(){return"ListProperties"}static get isOfficialPlugin(){return!0}}class XVe extends Nt{constructor(t){super(t),this.on("execute",()=>{this.refresh()},{priority:"highest"})}refresh(){const t=this._getSelectedItems();this.value=this._getValue(t),this.isEnabled=!!t.length}execute(t={}){this.editor.model.change(e=>{const i=this._getSelectedItems(),r=t.forceValue===void 0?!this._getValue(i):t.forceValue;for(const s of i)r?e.setAttribute("todoListChecked",!0,s):e.removeAttribute("todoListChecked",s)})}_getValue(t){return t.every(e=>e.getAttribute("todoListChecked"))}_getSelectedItems(){const t=this.editor.model,e=t.schema,i=t.document.selection.getFirstRange(),r=i.start.parent,s=[];e.checkAttribute(r,"todoListChecked")&&s.push(...um(r));for(const o of i.getItems({shallow:!0}))e.checkAttribute(o,"todoListChecked")&&!s.includes(o)&&s.push(...um(o));return s}}class eDe extends vl{constructor(){super(...arguments);y(this,"domEventType",["change"])}onDomEvent(e){if(e.target){const i=this.view.domConverter.mapDomToView(e.target);i&&i.is("element","input")&&i.getAttribute("type")=="checkbox"&&i.findAncestor({classes:"todo-list__label"})&&this.fire("todoCheckboxChange",e)}}}const tDe=I0("Ctrl+Enter");class nDe extends Ne{static get pluginName(){return"TodoListEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[lv]}init(){const t=this.editor,e=t.model,i=t.editing,r=t.plugins.get(lv),o=t.config.get("list.multiBlock")?"paragraph":"listItem";t.commands.add("todoList",new $g(t,"todo")),t.commands.add("checkTodoList",new XVe(t)),i.view.addObserver(eDe),e.schema.extend("$listItem",{allowAttributes:"todoListChecked"}),e.schema.addAttributeCheck(a=>{const l=a.last;if(!l.getAttribute("listItemId")||l.getAttribute("listType")!="todo")return!1},"todoListChecked"),t.conversion.for("upcast").add(a=>{a.on("element:input",rDe()),a.on("element:li",iDe(),{priority:"low"}),a.on("element:label",_E({name:"label",classes:"todo-list__label"})),a.on("element:label",_E({name:"label",classes:["todo-list__label","todo-list__label_without-description"]})),a.on("element:span",_E({name:"span",classes:"todo-list__label__description"})),a.on("element:ul",sDe({name:"ul",classes:"todo-list"}))}),t.conversion.for("downcast").elementToElement({model:o,view:(a,{writer:l})=>{if(zb(a,r.getListAttributeNames()))return l.createContainerElement("span",{class:"todo-list__label__description"})},converterPriority:"highest"}),r.registerDowncastStrategy({scope:"list",attributeName:"listType",setAttributeOnDowncast(a,l,c){l=="todo"?a.addClass("todo-list",c):a.removeClass("todo-list",c)}}),r.registerDowncastStrategy({scope:"itemMarker",attributeName:"todoListChecked",createElement(a,l,{dataPipeline:c}){if(l.getAttribute("listType")!="todo")return null;const u=a.createUIElement("input",{type:"checkbox",...l.getAttribute("todoListChecked")?{checked:"checked"}:null,...c?{disabled:"disabled"}:{tabindex:"-1"}});if(c)return u;const d=a.createContainerElement("span",{contenteditable:"false"},u);return d.getFillerOffset=()=>null,d},canWrapElement(a){return zb(a,r.getListAttributeNames())},createWrapperElement(a,l,{dataPipeline:c}){const u=["todo-list__label"];return zb(l,r.getListAttributeNames())||u.push("todo-list__label_without-description"),a.createAttributeElement(c?"label":"span",{class:u.join(" ")})}}),r.on("checkElement",(a,{modelElement:l,viewElement:c})=>{const u=zb(l,r.getListAttributeNames());c.hasClass("todo-list__label__description")!=u&&(a.return=!0,a.stop())}),r.on("checkElement",(a,{modelElement:l,viewElement:c})=>{const u=l.getAttribute("listType")=="todo"&&ac(l);let d=!1;const f=t.editing.view.createPositionBefore(c).getWalker({direction:"backward"});for(const{item:h}of f){if(h.is("element")&&t.editing.mapper.toModelElement(h))break;h.is("element","input")&&h.getAttribute("type")=="checkbox"&&(d=!0)}d!=u&&(a.return=!0,a.stop())}),r.on("postFixer",(a,{listNodes:l,writer:c})=>{for(const{node:u,previousNodeInList:d}of l){if(!d||d.getAttribute("listItemId")!=u.getAttribute("listItemId"))continue;const f=d.hasAttribute("todoListChecked"),h=u.hasAttribute("todoListChecked");h&&!f?(c.removeAttribute("todoListChecked",u),a.return=!0):!h&&f&&(c.setAttribute("todoListChecked",!0,u),a.return=!0)}}),e.document.registerPostFixer(a=>{const l=e.document.differ.getChanges();let c=!1;for(const u of l)if(u.type=="attribute"&&u.attributeKey=="listType"){const d=u.range.start.nodeAfter;u.attributeOldValue=="todo"&&d.hasAttribute("todoListChecked")&&(a.removeAttribute("todoListChecked",d),c=!0)}else if(u.type=="insert"&&u.name!="$text")for(const{item:d}of a.createRangeOn(u.position.nodeAfter))d.is("element")&&d.getAttribute("listType")!="todo"&&d.hasAttribute("todoListChecked")&&(a.removeAttribute("todoListChecked",d),c=!0);return c}),this.listenTo(i.view.document,"keydown",(a,l)=>{Vd(l)===tDe&&(t.execute("checkTodoList"),a.stop())},{priority:"high"}),this.listenTo(i.view.document,"todoCheckboxChange",(a,l)=>{const c=l.target;if(!c||!c.is("element","input"))return;const u=i.view.createPositionAfter(c),f=i.mapper.toModelPosition(u).parent;f&&fi(f)&&f.getAttribute("listType")=="todo"&&this._handleCheckmarkChange(f)}),this.listenTo(i.view.document,"arrowKey",aDe(e,t.locale),{context:"$text"}),this.listenTo(i.mapper,"viewToModelPosition",(a,l)=>{const c=l.viewPosition.parent,u=c.is("attributeElement","li")&&l.viewPosition.offset==0,d=uM(c)&&l.viewPosition.offset<=1,f=c.is("element","span")&&c.getAttribute("contenteditable")=="false"&&uM(c.parent);if(!u&&!d&&!f)return;const h=l.modelPosition.nodeAfter;h&&h.getAttribute("listType")=="todo"&&(l.modelPosition=e.createPositionAt(h,0))},{priority:"low"}),this._initAriaAnnouncements()}_handleCheckmarkChange(t){const e=this.editor,i=e.model,r=Array.from(i.document.selection.getRanges());i.change(s=>{s.setSelection(t,"end"),e.execute("checkTodoList"),s.setSelection(r)})}_initAriaAnnouncements(){const{model:t,ui:e,t:i}=this.editor;let r=null;e&&t.document.selection.on("change:range",()=>{const s=t.document.selection.focus.parent,o=dM(r),a=dM(s);o&&!a?e.ariaLiveAnnouncer.announce(i("Leaving a to-do list")):!o&&a&&e.ariaLiveAnnouncer.announce(i("Entering a to-do list")),r=s})}}function iDe(){return(n,t,e)=>{const{writer:i,schema:r}=e;if(!t.modelRange)return;const s=Array.from(t.modelRange.getItems({shallow:!0})).filter(o=>o.getAttribute("listType")==="todo"&&r.checkAttribute(o,"listItemId")).reduce((o,a)=>{const l=a.getAttribute("listItemId");return o.has(l)||o.set(l,um(a)),o},new Map);for(const[,o]of s.entries())if(o.some(a=>a.getAttribute("todoListChecked")))for(const a of o)i.setAttribute("todoListChecked",!0,a)}}function rDe(){return(n,t,e)=>{const i=t.modelCursor,r=i.parent,s=t.viewItem;if(!e.consumable.test(s,{name:!0})||s.getAttribute("type")!="checkbox"||!i.isAtStart||!r.hasAttribute("listType"))return;e.consumable.consume(s,{name:!0});const o=e.writer;o.setAttribute("listType","todo",r),t.viewItem.hasAttribute("checked")&&o.setAttribute("todoListChecked",!0,r),t.modelRange=o.createRange(i)}}function _E(n){const t=new Vs(n);return(e,i,r)=>{const s=t.match(i.viewItem);s&&r.consumable.consume(i.viewItem,s.match)&&Object.assign(i,r.convertChildren(i.viewItem,i.modelCursor))}}function sDe(n){const t=new Vs(n);return(e,i,r)=>{const s=t.match(i.viewItem);if(!s)return;const o=s.match;o.name=!1,r.consumable.consume(i.viewItem,o)}}function zb(n,t){return(n.is("element","paragraph")||n.is("element","listItem"))&&n.getAttribute("listType")=="todo"&&ac(n)&&oDe(n,t)}function oDe(n,t){for(const e of n.getAttributeKeys())if(!e.startsWith("selection:")&&!t.includes(e))return!1;return!0}function aDe(n,t){return(e,i)=>{const r=P0(i.keyCode,t.contentLanguageDirection),s=n.schema,o=n.document.selection;if(!o.isCollapsed)return;const a=o.getFirstPosition(),l=a.parent;if(r=="right"&&a.isAtEnd){const c=s.getNearestSelectionRange(n.createPositionAfter(l),"forward");if(!c)return;const u=c.start.parent;u&&fi(u)&&u.getAttribute("listType")=="todo"&&(n.change(d=>d.setSelection(c)),i.preventDefault(),i.stopPropagation(),e.stop())}else if(r=="left"&&a.isAtStart&&fi(l)&&l.getAttribute("listType")=="todo"){const c=s.getNearestSelectionRange(n.createPositionBefore(l),"backward");if(!c)return;n.change(u=>u.setSelection(c)),i.preventDefault(),i.stopPropagation(),e.stop()}}}function uM(n){return!!n&&n.is("attributeElement")&&n.hasClass("todo-list__label")}function dM(n){return!n||!n.is("element","paragraph")&&!n.is("element","listItem")?!1:n.getAttribute("listType")=="todo"}class lDe extends Ne{static get pluginName(){return"TodoListUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.t;nS(this.editor,"todoList",t("To-do List"),HTe)}}class cDe extends Ne{static get requires(){return[nDe,lDe]}static get pluginName(){return"TodoList"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function fM(n,t){const e=(i,r,s)=>{if(!s.consumable.consume(r.item,i.name))return;const o=r.attributeNewValue,a=s.writer,l=s.mapper.toViewElement(r.item),c=[...l.getChildren()].find(d=>d.getCustomProperty("media-content"));a.remove(c);const u=n.getMediaViewElement(a,o,t);a.insert(a.createPositionAt(l,0),u)};return i=>{i.on("attribute:url:media",e)}}function uDe(n,t,e){return t.setCustomProperty("media",!0,n),tf(n,t,{label:e})}function hM(n,t,e,i){return n.createContainerElement("figure",{class:"media"},[t.getMediaViewElement(n,e,i),n.createSlot()])}function mM(n){const t=n.getSelectedElement();return t&&t.is("element","media")?t:null}function RH(n,t,e,i){n.change(r=>{const s=r.createElement("media",{url:t});n.insertObject(s,e,null,{setSelection:"on",findOptimalPosition:i?"auto":void 0})})}class dDe extends Nt{refresh(){const t=this.editor.model,e=t.document.selection,i=mM(e);this.value=i?i.getAttribute("url"):void 0,this.isEnabled=hDe(e)||fDe(e,t)}execute(t){const e=this.editor.model,i=e.document.selection,r=mM(i);r?e.change(s=>{s.setAttribute("url",t,r)}):RH(e,t,i,!0)}}function fDe(n,t){let i=CP(n,t).start.parent;return i.isEmpty&&!t.schema.isLimit(i)&&(i=i.parent),t.schema.checkChild(i,"media")}function hDe(n){const t=n.getSelectedElement();return!!t&&t.name==="media"}const mDe="0 0 64 42";class gDe{constructor(t,e){y(this,"locale");y(this,"providerDefinitions");const i=e.providers,r=e.extraProviders||[],s=new Set(e.removeProviders),o=i.concat(r).filter(a=>{const l=a.name;return l?!s.has(l):(mn("media-embed-no-provider-name",{provider:a}),!1)});this.locale=t,this.providerDefinitions=o}hasMedia(t){return!!this._getMedia(t)}getMediaViewElement(t,e,i){return this._getMedia(e).getViewElement(t,i)}_getMedia(t){if(!t)return new gM(this.locale);t=t.trim();for(const e of this.providerDefinitions){const i=e.html,r=jn(e.url);for(const s of r){const o=this._getUrlMatches(t,s);if(o)return new gM(this.locale,t,o,i)}}return null}_getUrlMatches(t,e){let i=t.match(e);if(i)return i;let r=t.replace(/^https?:\/\//,"");return i=r.match(e),i||(r=r.replace(/^www\./,""),i=r.match(e),i)?i:null}}class gM{constructor(t,e,i,r){y(this,"url");y(this,"_locale");y(this,"_match");y(this,"_previewRenderer");this.url=this._getValidUrl(e),this._locale=t,this._match=i,this._previewRenderer=r}getViewElement(t,e){const i={};let r;if(e.renderForEditingView||e.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(i["data-oembed-url"]=this.url),e.renderForEditingView&&(i.class="ck-media__wrapper");const s=this._getPreviewHtml(e);r=t.createRawElement("div",i,(o,a)=>{a.setContentOf(o,s)})}else this.url&&(i.url=this.url),r=t.createEmptyElement(e.elementName,i);return t.setCustomProperty("media-content",!0,r),r}_getPreviewHtml(t){return this._previewRenderer?this._previewRenderer(this._match):this.url&&t.renderForEditingView?this._getPlaceholderHtml():""}_getPlaceholderHtml(){const t=new Uo,e=this._locale.t;return t.content=pTe,t.viewBox=mDe,new Ks({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[t]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url,"data-cke-tooltip-text":e("Open media in new tab")},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]}]}]}).render().outerHTML}_getValidUrl(t){return t?t.match(/^https?/)?t:"https://"+t:null}}class n_ extends Ne{constructor(e){super(e);y(this,"registry");e.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:[/^dailymotion\.com\/video\/(\w+)/,/^dai.ly\/(\w+)/],html:i=>`<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/${i[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>`},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:i=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/${i[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>`},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)(?:&t=(\d+))?/,/^(?:m\.)?youtube\.com\/shorts\/([\w-]+)(?:\?t=(\d+))?/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)(?:\?t=(\d+))?/,/^youtube\.com\/embed\/([\w-]+)(?:\?start=(\d+))?/,/^youtu\.be\/([\w-]+)(?:\?t=(\d+))?/],html:i=>{const r=i[1],s=i[2];return`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/${r}${s?`?start=${s}`:""}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:i=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/${i[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`},{name:"instagram",url:[/^instagram\.com\/p\/(\w+)/,/^instagram\.com\/reel\/(\w+)/]},{name:"twitter",url:[/^twitter\.com/,/^x\.com/]},{name:"googleMaps",url:[/^google\.com\/maps/,/^goo\.gl\/maps/,/^maps\.google\.com/,/^maps\.app\.goo\.gl/]},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),this.registry=new gDe(e.locale,e.config.get("mediaEmbed"))}static get pluginName(){return"MediaEmbedEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=e.model.schema,r=e.t,s=e.conversion,o=e.config.get("mediaEmbed.previewsInData"),a=e.config.get("mediaEmbed.elementName"),l=this.registry;e.commands.add("mediaEmbed",new dDe(e)),i.register("media",{inheritAllFrom:"$blockObject",allowAttributes:["url"]}),s.for("dataDowncast").elementToStructure({model:"media",view:(c,{writer:u})=>{const d=c.getAttribute("url");return hM(u,l,d,{elementName:a,renderMediaPreview:!!d&&o})}}),s.for("dataDowncast").add(fM(l,{elementName:a,renderMediaPreview:o})),s.for("editingDowncast").elementToStructure({model:"media",view:(c,{writer:u})=>{const d=c.getAttribute("url"),f=hM(u,l,d,{elementName:a,renderForEditingView:!0});return uDe(f,u,r("media widget"))}}),s.for("editingDowncast").add(fM(l,{elementName:a,renderForEditingView:!0})),s.for("upcast").elementToElement({view:c=>["oembed",a].includes(c.name)&&c.getAttribute("url")?{name:!0}:null,model:(c,{writer:u})=>{const d=c.getAttribute("url");return l.hasMedia(d)?u.createElement("media",{url:d}):null}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:(c,{writer:u})=>{const d=c.getAttribute("data-oembed-url");return l.hasMedia(d)?u.createElement("media",{url:d}):null}}).add(c=>{const u=(d,f,h)=>{if(!h.consumable.consume(f.viewItem,{name:!0,classes:"media"}))return;const{modelRange:g,modelCursor:v}=h.convertChildren(f.viewItem,f.modelCursor);f.modelRange=g,f.modelCursor=v,gi(g.getItems())||h.consumable.revert(f.viewItem,{name:!0,classes:"media"})};c.on("element:figure",u)})}}const pDe=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/;class vDe extends Ne{constructor(e){super(e);y(this,"_timeoutId");y(this,"_positionToInsert");this._timeoutId=null,this._positionToInsert=null}static get requires(){return[SP,hl,PP]}static get pluginName(){return"AutoMediaEmbed"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=e.model.document,r=e.plugins.get("ClipboardPipeline");this.listenTo(r,"inputTransformation",()=>{const o=i.selection.getFirstRange(),a=Ii.fromPosition(o.start);a.stickiness="toPrevious";const l=Ii.fromPosition(o.end);l.stickiness="toNext",i.once("change:data",()=>{this._embedMediaBetweenPositions(a,l),a.detach(),l.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&(at.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedMediaBetweenPositions(e,i){const r=this.editor,s=r.plugins.get(n_).registry,o=new Ts(e,i),a=o.getWalker({ignoreElementEnd:!0});let l="";for(const u of a)u.item.is("$textProxy")&&(l+=u.item.data);if(l=l.trim(),!l.match(pDe)){o.detach();return}if(!s.hasMedia(l)){o.detach();return}if(!r.commands.get("mediaEmbed").isEnabled){o.detach();return}this._positionToInsert=Ii.fromPosition(e),this._timeoutId=at.window.setTimeout(()=>{r.model.change(u=>{this._timeoutId=null,u.remove(o),o.detach();let d=null;this._positionToInsert.root.rootName!=="$graveyard"&&(d=this._positionToInsert),RH(r.model,l,d,!1),this._positionToInsert.detach(),this._positionToInsert=null}),r.plugins.get(hl).requestUndoOnBackspace()},100)}}class bDe extends dt{constructor(e,i){super(i);y(this,"focusTracker");y(this,"keystrokes");y(this,"urlInputView");y(this,"_validators");y(this,"_urlInputViewInfoDefault");y(this,"_urlInputViewInfoTip");this.focusTracker=new Mn,this.keystrokes=new oi,this.set("mediaURLInputValue",""),this.urlInputView=this._createUrlInput(),this._validators=e,this.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[this.urlInputView]})}render(){super.render(),bl({view:this}),this.focusTracker.add(this.urlInputView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.urlInputView.focus()}get url(){return this.urlInputView.fieldView.element.value.trim()}set url(e){this.urlInputView.fieldView.value=e.trim()}isValid(){this.resetFormStatus();for(const e of this._validators){const i=e(this);if(i)return this.urlInputView.errorText=i,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}_createUrlInput(){const e=this.locale.t,i=new Ri(this.locale,Ss),r=i.fieldView;return this._urlInputViewInfoDefault=e("Paste the media URL in the input."),this._urlInputViewInfoTip=e("Tip: Paste the URL into the content to embed faster."),i.label=e("Media URL"),i.infoText=this._urlInputViewInfoDefault,r.inputMode="url",r.on("input",()=>{i.infoText=r.element.value?this._urlInputViewInfoTip:this._urlInputViewInfoDefault,this.mediaURLInputValue=r.element.value.trim()}),i}}class wDe extends Ne{constructor(){super(...arguments);y(this,"_formView")}static get requires(){return[n_,Ld]}static get pluginName(){return"MediaEmbedUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.ui.componentFactory.add("mediaEmbed",()=>{const i=this.editor.locale.t,r=this._createDialogButton(wt);return r.tooltip=!0,r.label=i("Insert media"),r}),e.ui.componentFactory.add("menuBar:mediaEmbed",()=>{const i=this.editor.locale.t,r=this._createDialogButton(Ti);return r.label=i("Media"),r})}_createDialogButton(e){const i=this.editor,r=new e(i.locale),s=i.commands.get("mediaEmbed"),o=this.editor.plugins.get("Dialog");return r.icon=vTe,r.bind("isEnabled").to(s,"isEnabled"),r.on("execute",()=>{o.id==="mediaEmbed"?o.hide():this._showDialog()}),r}_showDialog(){const e=this.editor,i=e.plugins.get("Dialog"),r=e.commands.get("mediaEmbed"),s=e.locale.t,o=r.value!==void 0;if(!this._formView){const a=e.plugins.get(n_).registry;this._formView=new(Nd(bDe))(yDe(e.t,a),e.locale),this._formView.on("submit",()=>this._handleSubmitForm())}i.show({id:"mediaEmbed",title:s("Media embed"),content:this._formView,isModal:!0,onShow:()=>{this._formView.url=r.value||"",this._formView.resetFormStatus(),this._formView.urlInputView.fieldView.select()},actionButtons:[{label:s("Cancel"),withText:!0,onExecute:()=>i.hide()},{label:s(o?"Save":"Insert"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSubmitForm()}]})}_handleSubmitForm(){const e=this.editor,i=e.plugins.get("Dialog");this._formView.isValid()&&(e.execute("mediaEmbed",this._formView.url),i.hide(),e.editing.view.focus())}}function yDe(n,t){return[e=>{if(!e.url.length)return n("The URL must not be empty.")},e=>{if(!t.hasMedia(e.url))return n("This media URL is not supported.")}]}class _De extends Ne{static get requires(){return[n_,wDe,vDe,Ru]}static get pluginName(){return"MediaEmbed"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */fn.arrowup,fn.arrowdown,fn.esc;fn.enter,fn.tab;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function kDe(n,t){const e=[];for(const i of t.createRangeIn(n)){const r=i.item;r.is("element","a")&&!r.hasAttribute("href")&&(r.hasAttribute("id")||r.hasAttribute("name"))&&e.push(r)}for(const i of e){const r=i.parent.getChildIndex(i)+1,s=i.getChildren();t.insertChild(r,s,i.parent)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function VH(n){const t=parseFloat(n);return n.endsWith("pt")?Yf(t*96/72):n.endsWith("pc")?Yf(t*12*96/72):n.endsWith("in")?Yf(t*96):n.endsWith("cm")?Yf(t*96/2.54):n.endsWith("mm")?Yf(t/10*96/2.54):n}function pM(n){return n!==void 0&&n.endsWith("px")}function Yf(n){return Math.round(n)+"px"}function EDe(n,t,e){if(!n.childCount)return;const i=new Eo(n.document),r=TDe(n,i);if(!r.length)return;const s={},o=[];for(const a of r)if(a.indent!==void 0){SDe(a)||(o.length=0);const l=`${a.id}:${a.indent}`,c=Math.min(a.indent-1,o.length);if(c<o.length&&o[c].id!==a.id&&(o.length=c),c<o.length-1)o.length=c+1;else{const d=ADe(a,t);if(c>o.length-1||o[c].listElement.name!=d.type){c==0&&d.type=="ol"&&a.id!==void 0&&s[l]&&(d.startIndex=s[l]);const f=ODe(d,i,e);if(pM(a.marginLeft)&&(c==0||pM(o[c-1].marginLeft))){let h=a.marginLeft;c>0&&(h=Yf(parseFloat(h)-parseFloat(o[c-1].marginLeft))),i.setStyle("padding-left",h,f)}if(o.length==0){const h=a.element.parent,g=h.getChildIndex(a.element)+1;i.insertChild(g,f,h)}else{const h=o[c-1].listItemElements;i.appendChild(f,h[h.length-1])}o[c]={...a,listElement:f,listItemElements:[]},c==0&&a.id!==void 0&&(s[l]=d.startIndex||1)}}const u=a.element.name=="li"?a.element:i.createElement("li");i.appendChild(u,o[c].listElement),o[c].listItemElements.push(u),c==0&&a.id!==void 0&&s[l]++,a.element!=u&&i.appendChild(a.element,u),VDe(a.element,i),i.removeStyle("text-indent",a.element),i.removeStyle("margin-left",a.element)}else{const l=o.find(c=>c.marginLeft==a.marginLeft);if(l){const c=l.listItemElements;i.appendChild(a.element,c[c.length-1]),i.removeStyle("margin-left",a.element)}else o.length=0}}function CDe(n,t){for(const e of t.createRangeIn(n)){const i=e.item;if(i.is("element","li")){const r=i.getChild(0);r&&r.is("element","p")&&t.unwrapElement(r)}}}function TDe(n,t){const e=t.createRangeIn(n),i=[],r=new Set;for(const s of e.getItems()){if(!s.is("element")||!s.name.match(/^(p|h\d+|li|div)$/))continue;let o=DDe(s);if(o!==void 0&&parseFloat(o)==0&&!Array.from(s.getClassNames()).find(a=>a.startsWith("MsoList"))&&(o=void 0),s.hasStyle("mso-list")||o!==void 0&&r.has(o)){const a=RDe(s);i.push({element:s,id:a.id,order:a.order,indent:a.indent,marginLeft:o}),o!==void 0&&r.add(o)}else r.clear()}return i}function SDe(n){const t=n.element.previousSibling;return vM(t||n.element.parent)}function vM(n){return n.is("element","ol")||n.is("element","ul")}function ADe(n,t){const e=new RegExp(`@list l${n.id}:level${n.indent}\\s*({[^}]*)`,"gi"),i=/mso-level-number-format:([^;]{0,100});/gi,r=/mso-level-start-at:\s{0,100}([0-9]{0,10})\s{0,100};/gi,s=new RegExp(`@list\\s+l${n.id}:level\\d\\s*{[^{]*mso-level-text:"%\\d\\\\.`,"gi"),o=new RegExp(`@list l${n.id}:level\\d\\s*{[^{]*mso-level-number-format:`,"gi"),a=s.exec(t),l=o.exec(t),c=a&&!l,u=e.exec(t);let d="decimal",f="ol",h=null;if(u&&u[1]){const g=i.exec(u[1]);if(g&&g[1]&&(d=g[1].trim(),f=d!=="bullet"&&d!=="image"?"ol":"ul"),d==="bullet"){const v=IDe(n.element);v&&(d=v)}else{const v=r.exec(u[1]);v&&v[1]&&(h=parseInt(v[1]))}c&&(f="ol")}return{type:f,startIndex:h,style:xDe(d),isLegalStyleList:c}}function IDe(n){if(n.name=="li"&&n.parent.name=="ul"&&n.parent.hasAttribute("type"))return n.parent.getAttribute("type");const t=PDe(n);if(!t)return null;const e=t._data;return e==="o"?"circle":e==="·"?"disc":e==="§"?"square":null}function PDe(n){if(n.getChild(0).is("$text"))return null;for(const t of n.getChildren()){if(!t.is("element","span"))continue;const e=t.getChild(0);if(e)return e.is("$text")?e:e.getChild(0)}/* istanbul ignore next -- @preserve */return null}function xDe(n){if(n.startsWith("arabic-leading-zero"))return"decimal-leading-zero";switch(n){case"alpha-upper":return"upper-alpha";case"alpha-lower":return"lower-alpha";case"roman-upper":return"upper-roman";case"roman-lower":return"lower-roman";case"circle":case"disc":case"square":return n;default:return null}}function ODe(n,t,e){const i=t.createElement(n.type);return n.style&&t.setStyle("list-style-type",n.style,i),n.startIndex&&n.startIndex>1&&t.setAttribute("start",n.startIndex,i),n.isLegalStyleList&&e&&t.addClass("legal-list",i),i}function RDe(n){const t=n.getStyle("mso-list");if(t===void 0)return{};const e=t.match(/(^|\s{1,100})l(\d+)/i),i=t.match(/\s{0,100}lfo(\d+)/i),r=t.match(/\s{0,100}level(\d+)/i);return e&&i&&r?{id:e[2],order:i[1],indent:parseInt(r[1])}:{indent:1}}function VDe(n,t){const e=new Vs({name:"span",styles:{"mso-list":"Ignore"}}),i=t.createRangeIn(n);for(const r of i)r.type==="elementStart"&&e.match(r.item)&&t.remove(r.item)}function DDe(n){const t=n.getStyle("margin-left");return t===void 0||t.endsWith("px")?t:VH(t)}function NDe(n,t){if(!n.childCount)return;const e=new Eo(n.document),i=MDe(n,e);$De(i,n,e),FDe(i,n,e),BDe(n,e);const r=UDe(n,e);r.length&&HDe(r,zDe(t),e)}function LDe(n){return btoa(n.match(/\w{2}/g).map(t=>String.fromCharCode(parseInt(t,16))).join(""))}function MDe(n,t){const e=t.createRangeIn(n),i=new Vs({name:/v:(.+)/}),r=[];for(const s of e){if(s.type!="elementStart")continue;const o=s.item,a=o.previousSibling,l=a&&a.is("element")?a.name:null,c=["Chart"],u=i.match(o),d=o.getAttribute("o:gfxdata"),f=l==="v:shapetype",h=d&&c.some(g=>o.getAttribute("id").includes(g));u&&d&&!f&&!h&&r.push(s.item.getAttribute("id"))}return r}function $De(n,t,e){const i=e.createRangeIn(t),r=new Vs({name:"img"}),s=[];for(const o of i)if(o.item.is("element")&&r.match(o.item)){const a=o.item,l=a.getAttribute("v:shapes")?a.getAttribute("v:shapes").split(" "):[];l.length&&l.every(c=>n.indexOf(c)>-1)?s.push(a):a.getAttribute("src")||s.push(a)}for(const o of s)e.remove(o)}function BDe(n,t){const e=t.createRangeIn(n),i=new Vs({name:/v:(.+)/}),r=[];for(const s of e)s.type=="elementStart"&&i.match(s.item)&&r.push(s.item);for(const s of r)t.remove(s)}function FDe(n,t,e){const i=e.createRangeIn(t),r=[];for(const a of i)if(a.type=="elementStart"&&a.item.is("element","v:shape")){const l=a.item.getAttribute("id");if(n.includes(l))continue;s(a.item.parent.getChildren(),l)||r.push(a.item)}for(const a of r){const l={src:o(a)};a.hasAttribute("alt")&&(l.alt=a.getAttribute("alt"));const c=e.createElement("img",l);e.insertChild(a.index+1,c,a.parent)}function s(a,l){for(const c of a){/* istanbul ignore else -- @preserve */if(c.is("element")&&(c.name=="img"&&c.getAttribute("v:shapes")==l||s(c.getChildren(),l)))return!0}return!1}function o(a){for(const l of a.getChildren()){/* istanbul ignore else -- @preserve */if(l.is("element")&&l.getAttribute("src"))return l.getAttribute("src")}}}function UDe(n,t){const e=t.createRangeIn(n),i=new Vs({name:"img"}),r=[];let s=0;for(const o of e)o.item.is("element")&&i.match(o.item)&&(o.item.getAttribute("src").startsWith("file://")&&r.push({element:o.item,imageIndex:s}),s++);return r}function zDe(n){if(!n)return[];const t=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,e=new RegExp("(?:("+t.source+"))([\\da-fA-F\\s]+)\\}","g"),i=n.match(e),r=[];if(i)for(const s of i){let o=!1;s.includes("\\pngblip")?o="image/png":s.includes("\\jpegblip")&&(o="image/jpeg"),o&&r.push({hex:s.replace(t,"").replace(/[^\da-fA-F]/g,""),type:o})}return r}function HDe(n,t,e){for(let i=0;i<n.length;i++){const{element:r,imageIndex:s}=n[i],o=t[s];if(o){const a=`data:${o.type};base64,${LDe(o.hex)}`;e.setAttribute("src",a,r)}}}function WDe(n){const t=[],e=new Eo(n.document);for(const{item:i}of e.createRangeIn(n))if(i.is("element")){for(const r of i.getClassNames())/\bmso/gi.exec(r)&&e.removeClass(r,i);for(const r of i.getStyleNames())/\bmso/gi.exec(r)&&e.removeStyle(r,i);(i.is("element","w:sdt")||i.is("element","w:sdtpr")&&i.isEmpty||i.is("element","o:p")&&i.isEmpty)&&t.push(i)}for(const i of t){const r=i.parent,s=r.getChildIndex(i);e.insertChild(s,i.getChildren(),r),e.remove(i)}}function jDe(n,t){for(const e of t.createRangeIn(n).getItems()){if(!e.is("element","table")&&!e.is("element","td")&&!e.is("element","th"))continue;const i=["left","top","right","bottom"];if(i.every(s=>!e.hasStyle(`border-${s}-style`)))t.setStyle("border-style","none",e);else for(const s of i)e.hasStyle(`border-${s}-style`)||t.setStyle(`border-${s}-style`,"none",e);const r=["width","height",...i.map(s=>`border-${s}-width`),...i.map(s=>`padding-${s}`)];for(const s of r)e.hasStyle(s)&&t.setStyle(s,VH(e.getStyle(s)),e)}}const qDe=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,GDe=/xmlns:o="urn:schemas-microsoft-com/i;class KDe{constructor(t,e=!1){y(this,"document");y(this,"hasMultiLevelListPlugin");this.document=t,this.hasMultiLevelListPlugin=e}isActive(t){return qDe.test(t)||GDe.test(t)}execute(t){const e=new Eo(this.document),{body:i,stylesString:r}=t._parsedData;kDe(i,e),EDe(i,r,this.hasMultiLevelListPlugin),NDe(i,t.dataTransfer.getData("text/rtf")),jDe(i,e),WDe(i),t.content=i}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function YDe(n,t){for(const e of n.getChildren())if(e.is("element","b")&&e.getStyle("font-weight")==="normal"){const i=n.getChildIndex(e);t.remove(e),t.insertChild(i,e.getChildren(),n)}}function QDe(n,t){const e=new O0(t.document.stylesProcessor),i=new V0(e,{renderingMode:"data"}),r=i.blockElements,s=i.inlineObjectElements,o=[];for(const a of t.createRangeIn(n)){const l=a.item;if(l.is("element","br")){const c=bM(l,"forward",t,{blockElements:r,inlineObjectElements:s}),u=bM(l,"backward",t,{blockElements:r,inlineObjectElements:s}),d=wM(c,r);(wM(u,r)||d)&&o.push(l)}}for(const a of o)a.hasClass("Apple-interchange-newline")?t.remove(a):t.replace(a,t.createElement("p"))}function bM(n,t,e,{blockElements:i,inlineObjectElements:r}){let s=e.createPositionAt(n,t=="forward"?"after":"before");return s=s.getLastMatchingPosition(({item:o})=>o.is("element")&&!i.includes(o.name)&&!r.includes(o.name),{direction:t}),t=="forward"?s.nodeAfter:s.nodeBefore}function wM(n,t){return!!n&&n.is("element")&&t.includes(n.name)}const ZDe=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;class JDe{constructor(t){y(this,"document");this.document=t}isActive(t){return ZDe.test(t)}execute(t){const e=new Eo(this.document),{body:i}=t._parsedData;YDe(i,e),CDe(i,e),QDe(i,e),t.content=i}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function XDe(n,t){for(const e of n.getChildren())e.is("element","table")&&e.hasAttribute("xmlns")&&t.removeAttribute("xmlns",e)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function eNe(n,t){for(const e of n.getChildren())if(e.is("element","google-sheets-html-origin")){const i=n.getChildIndex(e);t.remove(e),t.insertChild(i,e.getChildren(),n)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function tNe(n,t){for(const e of n.getChildren())e.is("element","table")&&e.getStyle("width")==="0px"&&t.removeStyle("width",e)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function nNe(n,t){for(const e of Array.from(n.getChildren()))e.is("element","style")&&t.remove(e)}const iNe=/<google-sheets-html-origin/i;class rNe{constructor(t){y(this,"document");this.document=t}isActive(t){return iNe.test(t)}execute(t){const e=new Eo(this.document),{body:i}=t._parsedData;eNe(i,e),XDe(i,e),tNe(i,e),nNe(i,e),t.content=i}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function sNe(n){return yM(yM(n)).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[^\S\r\n]*?)[\r\n]+([^\S\r\n]*<\/span>)/g,"$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/(<span\s+style=['"]letter-spacing:[^'"]+?['"]>)[\r\n]+(<\/span>)/g,"$1 $2").replace(/ <\//g," </").replace(/ <o:p><\/o:p>/g," <o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>([^\S\r\n]*[\r\n]\s*)</g,"><")}function oNe(n){n.querySelectorAll("span[style*=spacerun]").forEach(t=>{const e=t,i=e.innerText.length||0;e.innerText=Array(i+1).join("  ").substr(0,i)})}function yM(n){return n.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(t,e)=>e.length===1?" ":Array(e.length+1).join("  ").substr(0,e.length))}function aNe(n,t){const e=new DOMParser;n=n.replace(/<!--\[if gte vml 1]>/g,""),n=n.replace(/<o:SmartTagType(?:\s+[^\s>=]+(?:="[^"]*")?)*\s*\/?>/gi,"");const i=sNe(uNe(n)),r=e.parseFromString(i,"text/html");oNe(r);const s=r.body.innerHTML,o=lNe(r,t),a=cNe(r);return{body:o,bodyString:s,styles:a.styles,stylesString:a.stylesString}}function lNe(n,t){const e=new O0(t),i=new V0(e,{renderingMode:"data"}),r=n.createDocumentFragment(),s=n.body.childNodes;for(;s.length>0;)r.appendChild(s[0]);return i.domToView(r,{skipComments:!0})}function cNe(n){const t=[],e=[],i=Array.from(n.getElementsByTagName("style"));for(const r of i)r.sheet&&r.sheet.cssRules&&r.sheet.cssRules.length&&(t.push(r.sheet),e.push(r.innerHTML));return{styles:t,stylesString:e.join(" ")}}function uNe(n){const t="</body>",e="</html>",i=n.indexOf(t);if(i<0)return n;const r=n.indexOf(e,i+t.length);return n.substring(0,i+t.length)+(r>=0?n.substring(r):"")}class dNe extends Ne{static get pluginName(){return"PasteFromOffice"}static get isOfficialPlugin(){return!0}static get requires(){return[Qs]}init(){const t=this.editor,e=t.plugins.get("ClipboardPipeline"),i=t.editing.view.document,r=[],s=this.editor.plugins.has("MultiLevelList");r.push(new KDe(i,s)),r.push(new JDe(i)),r.push(new rNe(i)),e.on("inputTransformation",(o,a)=>{if(a._isTransformedWithPasteFromOffice||t.model.document.selection.getFirstPosition().parent.is("element","codeBlock"))return;const c=a.dataTransfer.getData("text/html"),u=r.find(d=>d.isActive(c));u&&(a._parsedData||(a._parsedData=aNe(c,i.stylesProcessor)),u.execute(a),a._isTransformedWithPasteFromOffice=!0)},{priority:"high"})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class fNe extends Nt{constructor(t){super(t),this.affectsData=!1,this.value=!1}execute(){const t="ck-show-blocks",e=this.editor.editing.view;e.change(i=>{for(const r of e.document.roots)r.hasClass(t)?(i.removeClass(t,r),this.value=!1):(i.addClass(t,r),this.value=!0)})}}class hNe extends Ne{static get pluginName(){return"ShowBlocksEditing"}static get isOfficialPlugin(){return!0}init(){const{editor:t}=this;t.commands.add("showBlocks",new fNe(t))}}class mNe extends Ne{static get pluginName(){return"ShowBlocksUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("showBlocks",()=>{const e=this._createButton(wt);return e.set({tooltip:!0,icon:VTe}),e}),t.ui.componentFactory.add("menuBar:showBlocks",()=>this._createButton(Ti))}_createButton(t){const e=this.editor,i=e.locale,r=e.commands.get("showBlocks"),s=new t(i),o=i.t;return s.set({label:o("Show blocks"),isToggleable:!0,role:"menuitemcheckbox"}),s.bind("isEnabled").to(r),s.bind("isOn").to(r,"value",r,"isEnabled",(a,l)=>a&&l),this.listenTo(s,"execute",()=>{e.execute("showBlocks"),e.editing.view.focus()}),s}}class gNe extends Ne{static get pluginName(){return"ShowBlocks"}static get isOfficialPlugin(){return!0}static get requires(){return[hNe,mNe]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Hb="SourceEditingMode";class pNe extends Ne{constructor(e){super(e);y(this,"_elementReplacer");y(this,"_replacedRoots");y(this,"_dataFromRoots");this.set("isSourceEditingMode",!1),this._elementReplacer=new dz,this._replacedRoots=new Map,this._dataFromRoots=new Map,e.config.define("sourceEditing.allowCollaborationFeatures",!1)}static get pluginName(){return"SourceEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[nm]}init(){this._checkCompatibility();const e=this.editor,i=e.locale.t;e.ui.componentFactory.add("sourceEditing",()=>{const r=this._createButton(wt);return r.set({label:i("Source"),icon:DTe,tooltip:!0,class:"ck-source-editing-button"}),r}),e.ui.componentFactory.add("menuBar:sourceEditing",()=>{const r=this._createButton(Ti);return r.set({label:i("Show source"),role:"menuitemcheckbox"}),r}),this._isAllowedToHandleSourceEditingMode()&&(this.on("change:isSourceEditingMode",(r,s,o)=>{o?(this._hideVisibleDialog(),this._showSourceEditing(),this._disableCommands()):(this._hideSourceEditing(),this._enableCommands())}),this.on("change:isEnabled",(r,s,o)=>this._handleReadOnlyMode(!o)),this.listenTo(e,"change:isReadOnly",(r,s,o)=>this._handleReadOnlyMode(o))),e.data.on("get",()=>{this.isSourceEditingMode&&this.updateEditorData()},{priority:"high"})}updateEditorData(){const e=this.editor,i={};for(const[r,s]of this._replacedRoots){const o=this._dataFromRoots.get(r),a=s.dataset.value;o!==a&&(i[r]=a,this._dataFromRoots.set(r,a))}Object.keys(i).length&&e.data.set(i,{batchType:{isUndoable:!0},suppressErrorInCollaboration:!0})}_checkCompatibility(){const e=this.editor,i=e.config.get("sourceEditing.allowCollaborationFeatures");if(!i&&e.plugins.has("RealTimeCollaborativeEditing"))throw new we("source-editing-incompatible-with-real-time-collaboration",null);!i&&["CommentsEditing","TrackChangesEditing","RevisionHistory"].some(s=>e.plugins.has(s))&&console.warn("You initialized the editor with the source editing feature and at least one of the collaboration features. Please be advised that the source editing feature may not work, and be careful when editing document source that contains markers created by the collaboration features."),e.plugins.has("RestrictedEditingModeEditing")&&console.warn("You initialized the editor with the source editing feature and restricted editing feature. Please be advised that the source editing feature may not work, and be careful when editing document source that contains markers created by the restricted editing feature.")}_showSourceEditing(){const e=this.editor,i=e.editing.view,r=e.model;r.change(s=>{s.setSelection(null),s.removeSelectionAttribute(r.document.selection.getAttributeKeys())});for(const[s,o]of i.domRoots){const a=vNe(e.data.get({rootName:s})),l=or(o.ownerDocument,"textarea",{rows:"1","aria-label":"Source code editing area"}),c=or(o.ownerDocument,"div",{class:"ck-source-editing-area","data-value":a},[l]);l.value=a,l.setSelectionRange(0,0),l.addEventListener("input",()=>{c.dataset.value=l.value,e.ui.update()}),i.change(u=>{const d=i.document.getRoot(s);u.addClass("ck-hidden",d)}),e.ui.setEditableElement("sourceEditing:"+s,l),this._replacedRoots.set(s,c),this._elementReplacer.replace(o,c),this._dataFromRoots.set(s,a)}this._hideDocumentOutline(),this._refreshAnnotationsVisibility(),this._focusSourceEditing()}_hideSourceEditing(){const i=this.editor.editing.view;this.updateEditorData(),i.change(r=>{for(const[s]of this._replacedRoots)r.removeClass("ck-hidden",i.document.getRoot(s))}),this._elementReplacer.restore(),this._replacedRoots.clear(),this._dataFromRoots.clear(),this._showDocumentOutline(),this._refreshAnnotationsVisibility(),i.focus()}_hideDocumentOutline(){this.editor.plugins.has("DocumentOutlineUI")&&(this.editor.plugins.get("DocumentOutlineUI").view.element.style.display="none")}_showDocumentOutline(){this.editor.plugins.has("DocumentOutlineUI")&&(this.editor.plugins.get("DocumentOutlineUI").view.element.style.display="")}_refreshAnnotationsVisibility(){this.editor.plugins.has("Annotations")&&this.editor.plugins.get("Annotations").refreshVisibility()}_focusSourceEditing(){const e=this.editor,[i]=this._replacedRoots.values(),r=i.querySelector("textarea");e.editing.view.document.isFocused=!1,r.focus()}_disableCommands(){const e=this.editor;for(const i of e.commands.commands())i.forceDisabled(Hb);e.plugins.has("CommentsArchiveUI")&&e.plugins.get("CommentsArchiveUI").forceDisabled(Hb)}_enableCommands(){const e=this.editor;for(const i of e.commands.commands())i.clearForceDisabled(Hb);e.plugins.has("CommentsArchiveUI")&&e.plugins.get("CommentsArchiveUI").clearForceDisabled(Hb)}_handleReadOnlyMode(e){if(this.isSourceEditingMode)for(const[,i]of this._replacedRoots)i.querySelector("textarea").readOnly=e}_isAllowedToHandleSourceEditingMode(){const i=this.editor.ui.view.editable;return i&&!i.hasExternalElement}_hideVisibleDialog(){if(this.editor.plugins.has("Dialog")){const e=this.editor.plugins.get("Dialog");e.isOpen&&e.hide()}}_createButton(e){const i=this.editor,r=new e(i.locale);return r.set({withText:!0,isToggleable:!0}),r.bind("isOn").to(this,"isSourceEditingMode"),r.bind("isEnabled").to(this,"isEnabled",i,"isReadOnly",i.plugins.get(nm),"hasAny",(s,o,a)=>!(!s||o||a)),this.listenTo(r,"execute",()=>{this.isSourceEditingMode=!this.isSourceEditingMode}),r}}function vNe(n){return bNe(n)?l0e(n):n}function bNe(n){return n.startsWith("<")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class wNe extends dt{constructor(e){super(e);y(this,"tiles");y(this,"focusTracker");y(this,"keystrokes");this.tiles=this.createCollection(),this.setTemplate({tag:"div",children:[{tag:"div",attributes:{class:["ck","ck-character-grid__tiles"]},children:this.tiles}],attributes:{class:["ck","ck-character-grid"]}}),this.focusTracker=new Mn,this.keystrokes=new oi,xv({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.tiles,numberOfColumns:()=>at.window.getComputedStyle(this.element.firstChild).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}createTile(e,i){const r=new wt(this.locale);return r.set({label:e,withText:!0,class:"ck-character-grid__tile"}),r.extendTemplate({attributes:{title:i},on:{mouseover:r.bindTemplate.to("mouseover"),focus:r.bindTemplate.to("focus")}}),r.on("mouseover",()=>{this.fire("tileHover",{name:i,character:e})}),r.on("focus",()=>{this.fire("tileFocus",{name:i,character:e})}),r.on("execute",()=>{this.fire("execute",{name:i,character:e})}),r}render(){super.render();for(const e of this.tiles)this.focusTracker.add(e.element);this.tiles.on("change",(e,{added:i,removed:r})=>{if(i.length>0)for(const s of i)this.focusTracker.add(s.element);if(r.length>0)for(const s of r)this.focusTracker.remove(s.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}focus(){this.tiles.first.focus()}}class yNe extends dt{constructor(t){super(t);const e=this.bindTemplate;this.set("character",null),this.set("name",null),this.bind("code").to(this,"character",_Ne),this.setTemplate({tag:"div",children:[{tag:"span",attributes:{class:["ck-character-info__name"]},children:[{text:e.to("name",i=>i||"​")}]},{tag:"span",attributes:{class:["ck-character-info__code"]},children:[{text:e.to("code")}]}],attributes:{class:["ck","ck-character-info"]}})}}function _Ne(n){return n===null?"":"U+"+("0000"+n.codePointAt(0).toString(16)).slice(-4)}class kNe extends dt{constructor(e,i,r,s){super(e);y(this,"items");y(this,"focusTracker");y(this,"keystrokes");y(this,"_focusCycler");y(this,"categoriesView");y(this,"gridView");y(this,"infoView");this.categoriesView=i,this.gridView=r,this.infoView=s,this.items=this.createCollection(),this.focusTracker=new Mn,this.keystrokes=new oi,this._focusCycler=new ur({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",children:[this.categoriesView,this.gridView,this.infoView],attributes:{tabindex:"-1"}}),this.items.add(this.categoriesView),this.items.add(this.gridView)}render(){super.render(),this.focusTracker.add(this.categoriesView.element),this.focusTracker.add(this.gridView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}class ENe extends dt{constructor(e,i){super(e);y(this,"_groupNames");y(this,"_dropdownView");this.set("currentGroupName",Array.from(i.entries())[0][0]),this._groupNames=i,this._dropdownView=new Ri(e,bP),this.setTemplate({tag:"div",attributes:{class:["ck","ck-character-categories"]},children:[this._dropdownView]})}render(){super.render(),this._setupDropdown()}focus(){this._dropdownView.focus()}_setupDropdown(){const e=new cr;for(const[s,o]of this._groupNames){const a={type:"button",model:new $d({name:s,label:o,role:"menuitemradio",withText:!0})};a.model.bind("isOn").to(this,"currentGroupName",l=>l===s),e.add(a)}const i=this.locale.t,r=i("Category");this._dropdownView.set({label:r,isEmpty:!1}),this._dropdownView.fieldView.panelPosition=this.locale.uiLanguageDirection==="rtl"?"se":"sw",this._dropdownView.fieldView.buttonView.set({withText:!0,tooltip:r,ariaLabel:r,ariaLabelledBy:void 0,isOn:!1}),this._dropdownView.fieldView.buttonView.bind("label").to(this,"currentGroupName",s=>this._groupNames.get(s)),this._dropdownView.fieldView.on("execute",({source:s})=>{this.currentGroupName=s.name}),ef(this._dropdownView.fieldView,e,{ariaLabel:r,role:"menu"})}}const kE="All";class CNe extends Ne{constructor(e){super(e);y(this,"_characters");y(this,"_groups");y(this,"_allSpecialCharactersGroupLabel");const i=e.t;this._characters=new Map,this._groups=new Map,this._allSpecialCharactersGroupLabel=i("All")}static get requires(){return[k7,Ld]}static get pluginName(){return"SpecialCharacters"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.ui.componentFactory.add("specialCharacters",()=>{const i=this._createDialogButton(wt);return i.set({tooltip:!0}),i}),e.ui.componentFactory.add("menuBar:specialCharacters",()=>this._createDialogButton(Ti))}addItems(e,i,r={label:e}){if(e===kE)throw new we("special-character-invalid-group-name",null);const s=this._getGroup(e,r.label);for(const o of i)s.items.add(o.title),this._characters.set(o.title,o.character)}getGroups(){const e=Array.from(this._groups.keys()),i=this.editor.config.get("specialCharacters.order")||[],r=i.find(s=>!e.includes(s));if(r)throw new we("special-character-invalid-order-group-name",null,{invalidGroup:r});return new Set([...i,...e])}getCharactersForGroup(e){if(e===kE)return new Set(this._characters.keys());const i=this._groups.get(e);if(i)return i.items}getCharacter(e){return this._characters.get(e)}_getGroup(e,i){return this._groups.has(e)||this._groups.set(e,{items:new Set,label:i}),this._groups.get(e)}_updateGrid(e,i){i.tiles.clear();const r=this.getCharactersForGroup(e);for(const s of r){const o=this.getCharacter(s);i.tiles.add(i.createTile(o,s))}}_createDropdownPanelContent(e){const i=Array.from(this.getGroups()).map(l=>[l,this._groups.get(l).label]),r=new Map([[kE,this._allSpecialCharactersGroupLabel],...i]),s=new ENe(e,r),o=new wNe(e),a=new yNe(e);return o.on("tileHover",(l,c)=>{a.set(c)}),o.on("tileFocus",(l,c)=>{a.set(c)}),s.on("change:currentGroupName",(l,c,u)=>{this._updateGrid(u,o)}),this._updateGrid(s.currentGroupName,o),{categoriesView:s,gridView:o,infoView:a}}_createDialogButton(e){const i=this.editor,r=i.locale,s=new e(i.locale),o=i.commands.get("insertText"),a=r.t,l=this.editor.plugins.get("Dialog");return s.set({label:a("Special characters"),icon:NTe,isToggleable:!0}),s.bind("isOn").to(l,"id",c=>c==="specialCharacters"),s.bind("isEnabled").to(o,"isEnabled"),s.on("execute",()=>{if(l.id==="specialCharacters"){l.hide();return}this._showDialog()}),s}_showDialog(){const e=this.editor,i=e.plugins.get("Dialog"),r=e.locale,s=r.t,{categoriesView:o,gridView:a,infoView:l}=this._createDropdownPanelContent(r),c=new kNe(r,o,a,l);a.on("execute",(u,d)=>{e.execute("insertText",{text:d.character})}),i.show({id:"specialCharacters",title:s("Special characters"),className:"ck-special-characters",content:c,position:vs.EDITOR_TOP_SIDE})}}class DH extends Ne{static get pluginName(){return"SpecialCharactersArrows"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t;t.plugins.get("SpecialCharacters").addItems("Arrows",[{title:e("leftwards simple arrow"),character:"←"},{title:e("rightwards simple arrow"),character:"→"},{title:e("upwards simple arrow"),character:"↑"},{title:e("downwards simple arrow"),character:"↓"},{title:e("leftwards double arrow"),character:"⇐"},{title:e("rightwards double arrow"),character:"⇒"},{title:e("upwards double arrow"),character:"⇑"},{title:e("downwards double arrow"),character:"⇓"},{title:e("leftwards dashed arrow"),character:"⇠"},{title:e("rightwards dashed arrow"),character:"⇢"},{title:e("upwards dashed arrow"),character:"⇡"},{title:e("downwards dashed arrow"),character:"⇣"},{title:e("leftwards arrow to bar"),character:"⇤"},{title:e("rightwards arrow to bar"),character:"⇥"},{title:e("upwards arrow to bar"),character:"⤒"},{title:e("downwards arrow to bar"),character:"⤓"},{title:e("up down arrow with base"),character:"↨"},{title:e("back with leftwards arrow above"),character:"🔙"},{title:e("end with leftwards arrow above"),character:"🔚"},{title:e("on with exclamation mark with left right arrow above"),character:"🔛"},{title:e("soon with rightwards arrow above"),character:"🔜"},{title:e("top with upwards arrow above"),character:"🔝"}],{label:e("Arrows")})}}class NH extends Ne{static get pluginName(){return"SpecialCharactersText"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t;t.plugins.get("SpecialCharacters").addItems("Text",[{character:"‹",title:e("Single left-pointing angle quotation mark")},{character:"›",title:e("Single right-pointing angle quotation mark")},{character:"«",title:e("Left-pointing double angle quotation mark")},{character:"»",title:e("Right-pointing double angle quotation mark")},{character:"‘",title:e("Left single quotation mark")},{character:"’",title:e("Right single quotation mark")},{character:"“",title:e("Left double quotation mark")},{character:"”",title:e("Right double quotation mark")},{character:"‚",title:e("Single low-9 quotation mark")},{character:"„",title:e("Double low-9 quotation mark")},{character:"¡",title:e("Inverted exclamation mark")},{character:"¿",title:e("Inverted question mark")},{character:"‥",title:e("Two dot leader")},{character:"…",title:e("Horizontal ellipsis")},{character:"‡",title:e("Double dagger")},{character:"‰",title:e("Per mille sign")},{character:"‱",title:e("Per ten thousand sign")},{character:"‼",title:e("Double exclamation mark")},{character:"⁈",title:e("Question exclamation mark")},{character:"⁉",title:e("Exclamation question mark")},{character:"⁇",title:e("Double question mark")},{character:"©",title:e("Copyright sign")},{character:"®",title:e("Registered sign")},{character:"™",title:e("Trade mark sign")},{character:"§",title:e("Section sign")},{character:"¶",title:e("Paragraph sign")},{character:"⁋",title:e("Reversed paragraph sign")}],{label:e("Text")})}}class LH extends Ne{static get pluginName(){return"SpecialCharactersMathematical"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t;t.plugins.get("SpecialCharacters").addItems("Mathematical",[{character:"<",title:e("Less-than sign")},{character:">",title:e("Greater-than sign")},{character:"≤",title:e("Less-than or equal to")},{character:"≥",title:e("Greater-than or equal to")},{character:"–",title:e("En dash")},{character:"—",title:e("Em dash")},{character:"¯",title:e("Macron")},{character:"‾",title:e("Overline")},{character:"°",title:e("Degree sign")},{character:"−",title:e("Minus sign")},{character:"±",title:e("Plus-minus sign")},{character:"÷",title:e("Division sign")},{character:"⁄",title:e("Fraction slash")},{character:"×",title:e("Multiplication sign")},{character:"ƒ",title:e("Latin small letter f with hook")},{character:"∫",title:e("Integral")},{character:"∑",title:e("N-ary summation")},{character:"∞",title:e("Infinity")},{character:"√",title:e("Square root")},{character:"∼",title:e("Tilde operator")},{character:"≅",title:e("Approximately equal to")},{character:"≈",title:e("Almost equal to")},{character:"≠",title:e("Not equal to")},{character:"≡",title:e("Identical to")},{character:"∈",title:e("Element of")},{character:"∉",title:e("Not an element of")},{character:"∋",title:e("Contains as member")},{character:"∏",title:e("N-ary product")},{character:"∧",title:e("Logical and")},{character:"∨",title:e("Logical or")},{character:"¬",title:e("Not sign")},{character:"∩",title:e("Intersection")},{character:"∪",title:e("Union")},{character:"∂",title:e("Partial differential")},{character:"∀",title:e("For all")},{character:"∃",title:e("There exists")},{character:"∅",title:e("Empty set")},{character:"∇",title:e("Nabla")},{character:"∗",title:e("Asterisk operator")},{character:"∝",title:e("Proportional to")},{character:"∠",title:e("Angle")},{character:"¼",title:e("Vulgar fraction one quarter")},{character:"½",title:e("Vulgar fraction one half")},{character:"¾",title:e("Vulgar fraction three quarters")}],{label:e("Mathematical")})}}class MH extends Ne{static get pluginName(){return"SpecialCharactersLatin"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t;t.plugins.get("SpecialCharacters").addItems("Latin",[{character:"Ā",title:e("Latin capital letter a with macron")},{character:"ā",title:e("Latin small letter a with macron")},{character:"Ă",title:e("Latin capital letter a with breve")},{character:"ă",title:e("Latin small letter a with breve")},{character:"Ą",title:e("Latin capital letter a with ogonek")},{character:"ą",title:e("Latin small letter a with ogonek")},{character:"Ć",title:e("Latin capital letter c with acute")},{character:"ć",title:e("Latin small letter c with acute")},{character:"Ĉ",title:e("Latin capital letter c with circumflex")},{character:"ĉ",title:e("Latin small letter c with circumflex")},{character:"Ċ",title:e("Latin capital letter c with dot above")},{character:"ċ",title:e("Latin small letter c with dot above")},{character:"Č",title:e("Latin capital letter c with caron")},{character:"č",title:e("Latin small letter c with caron")},{character:"Ď",title:e("Latin capital letter d with caron")},{character:"ď",title:e("Latin small letter d with caron")},{character:"Đ",title:e("Latin capital letter d with stroke")},{character:"đ",title:e("Latin small letter d with stroke")},{character:"Ē",title:e("Latin capital letter e with macron")},{character:"ē",title:e("Latin small letter e with macron")},{character:"Ĕ",title:e("Latin capital letter e with breve")},{character:"ĕ",title:e("Latin small letter e with breve")},{character:"Ė",title:e("Latin capital letter e with dot above")},{character:"ė",title:e("Latin small letter e with dot above")},{character:"Ę",title:e("Latin capital letter e with ogonek")},{character:"ę",title:e("Latin small letter e with ogonek")},{character:"Ě",title:e("Latin capital letter e with caron")},{character:"ě",title:e("Latin small letter e with caron")},{character:"Ĝ",title:e("Latin capital letter g with circumflex")},{character:"ĝ",title:e("Latin small letter g with circumflex")},{character:"Ğ",title:e("Latin capital letter g with breve")},{character:"ğ",title:e("Latin small letter g with breve")},{character:"Ġ",title:e("Latin capital letter g with dot above")},{character:"ġ",title:e("Latin small letter g with dot above")},{character:"Ģ",title:e("Latin capital letter g with cedilla")},{character:"ģ",title:e("Latin small letter g with cedilla")},{character:"Ĥ",title:e("Latin capital letter h with circumflex")},{character:"ĥ",title:e("Latin small letter h with circumflex")},{character:"Ħ",title:e("Latin capital letter h with stroke")},{character:"ħ",title:e("Latin small letter h with stroke")},{character:"Ĩ",title:e("Latin capital letter i with tilde")},{character:"ĩ",title:e("Latin small letter i with tilde")},{character:"Ī",title:e("Latin capital letter i with macron")},{character:"ī",title:e("Latin small letter i with macron")},{character:"Ĭ",title:e("Latin capital letter i with breve")},{character:"ĭ",title:e("Latin small letter i with breve")},{character:"Į",title:e("Latin capital letter i with ogonek")},{character:"į",title:e("Latin small letter i with ogonek")},{character:"İ",title:e("Latin capital letter i with dot above")},{character:"ı",title:e("Latin small letter dotless i")},{character:"Ĳ",title:e("Latin capital ligature ij")},{character:"ĳ",title:e("Latin small ligature ij")},{character:"Ĵ",title:e("Latin capital letter j with circumflex")},{character:"ĵ",title:e("Latin small letter j with circumflex")},{character:"Ķ",title:e("Latin capital letter k with cedilla")},{character:"ķ",title:e("Latin small letter k with cedilla")},{character:"ĸ",title:e("Latin small letter kra")},{character:"Ĺ",title:e("Latin capital letter l with acute")},{character:"ĺ",title:e("Latin small letter l with acute")},{character:"Ļ",title:e("Latin capital letter l with cedilla")},{character:"ļ",title:e("Latin small letter l with cedilla")},{character:"Ľ",title:e("Latin capital letter l with caron")},{character:"ľ",title:e("Latin small letter l with caron")},{character:"Ŀ",title:e("Latin capital letter l with middle dot")},{character:"ŀ",title:e("Latin small letter l with middle dot")},{character:"Ł",title:e("Latin capital letter l with stroke")},{character:"ł",title:e("Latin small letter l with stroke")},{character:"Ń",title:e("Latin capital letter n with acute")},{character:"ń",title:e("Latin small letter n with acute")},{character:"Ņ",title:e("Latin capital letter n with cedilla")},{character:"ņ",title:e("Latin small letter n with cedilla")},{character:"Ň",title:e("Latin capital letter n with caron")},{character:"ň",title:e("Latin small letter n with caron")},{character:"ŉ",title:e("Latin small letter n preceded by apostrophe")},{character:"Ŋ",title:e("Latin capital letter eng")},{character:"ŋ",title:e("Latin small letter eng")},{character:"Ō",title:e("Latin capital letter o with macron")},{character:"ō",title:e("Latin small letter o with macron")},{character:"Ŏ",title:e("Latin capital letter o with breve")},{character:"ŏ",title:e("Latin small letter o with breve")},{character:"Ő",title:e("Latin capital letter o with double acute")},{character:"ő",title:e("Latin small letter o with double acute")},{character:"Œ",title:e("Latin capital ligature oe")},{character:"œ",title:e("Latin small ligature oe")},{character:"Ŕ",title:e("Latin capital letter r with acute")},{character:"ŕ",title:e("Latin small letter r with acute")},{character:"Ŗ",title:e("Latin capital letter r with cedilla")},{character:"ŗ",title:e("Latin small letter r with cedilla")},{character:"Ř",title:e("Latin capital letter r with caron")},{character:"ř",title:e("Latin small letter r with caron")},{character:"Ś",title:e("Latin capital letter s with acute")},{character:"ś",title:e("Latin small letter s with acute")},{character:"Ŝ",title:e("Latin capital letter s with circumflex")},{character:"ŝ",title:e("Latin small letter s with circumflex")},{character:"Ş",title:e("Latin capital letter s with cedilla")},{character:"ş",title:e("Latin small letter s with cedilla")},{character:"Š",title:e("Latin capital letter s with caron")},{character:"š",title:e("Latin small letter s with caron")},{character:"Ţ",title:e("Latin capital letter t with cedilla")},{character:"ţ",title:e("Latin small letter t with cedilla")},{character:"Ť",title:e("Latin capital letter t with caron")},{character:"ť",title:e("Latin small letter t with caron")},{character:"Ŧ",title:e("Latin capital letter t with stroke")},{character:"ŧ",title:e("Latin small letter t with stroke")},{character:"Ũ",title:e("Latin capital letter u with tilde")},{character:"ũ",title:e("Latin small letter u with tilde")},{character:"Ū",title:e("Latin capital letter u with macron")},{character:"ū",title:e("Latin small letter u with macron")},{character:"Ŭ",title:e("Latin capital letter u with breve")},{character:"ŭ",title:e("Latin small letter u with breve")},{character:"Ů",title:e("Latin capital letter u with ring above")},{character:"ů",title:e("Latin small letter u with ring above")},{character:"Ű",title:e("Latin capital letter u with double acute")},{character:"ű",title:e("Latin small letter u with double acute")},{character:"Ų",title:e("Latin capital letter u with ogonek")},{character:"ų",title:e("Latin small letter u with ogonek")},{character:"Ŵ",title:e("Latin capital letter w with circumflex")},{character:"ŵ",title:e("Latin small letter w with circumflex")},{character:"Ŷ",title:e("Latin capital letter y with circumflex")},{character:"ŷ",title:e("Latin small letter y with circumflex")},{character:"Ÿ",title:e("Latin capital letter y with diaeresis")},{character:"Ź",title:e("Latin capital letter z with acute")},{character:"ź",title:e("Latin small letter z with acute")},{character:"Ż",title:e("Latin capital letter z with dot above")},{character:"ż",title:e("Latin small letter z with dot above")},{character:"Ž",title:e("Latin capital letter z with caron")},{character:"ž",title:e("Latin small letter z with caron")},{character:"ſ",title:e("Latin small letter long s")}],{label:e("Latin")})}}class $H extends Ne{static get pluginName(){return"SpecialCharactersCurrency"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t;t.plugins.get("SpecialCharacters").addItems("Currency",[{character:"$",title:e("Dollar sign")},{character:"€",title:e("Euro sign")},{character:"¥",title:e("Yen sign")},{character:"£",title:e("Pound sign")},{character:"¢",title:e("Cent sign")},{character:"₠",title:e("Euro-currency sign")},{character:"₡",title:e("Colon sign")},{character:"₢",title:e("Cruzeiro sign")},{character:"₣",title:e("French franc sign")},{character:"₤",title:e("Lira sign")},{character:"¤",title:e("Currency sign")},{character:"₿",title:e("Bitcoin sign")},{character:"₥",title:e("Mill sign")},{character:"₦",title:e("Naira sign")},{character:"₧",title:e("Peseta sign")},{character:"₨",title:e("Rupee sign")},{character:"₩",title:e("Won sign")},{character:"₪",title:e("New sheqel sign")},{character:"₫",title:e("Dong sign")},{character:"₭",title:e("Kip sign")},{character:"₮",title:e("Tugrik sign")},{character:"₯",title:e("Drachma sign")},{character:"₰",title:e("German penny sign")},{character:"₱",title:e("Peso sign")},{character:"₲",title:e("Guarani sign")},{character:"₳",title:e("Austral sign")},{character:"₴",title:e("Hryvnia sign")},{character:"₵",title:e("Cedi sign")},{character:"₶",title:e("Livre tournois sign")},{character:"₷",title:e("Spesmilo sign")},{character:"₸",title:e("Tenge sign")},{character:"₹",title:e("Indian rupee sign")},{character:"₺",title:e("Turkish lira sign")},{character:"₻",title:e("Nordic mark sign")},{character:"₼",title:e("Manat sign")},{character:"₽",title:e("Ruble sign")}],{label:e("Currency")})}}class TNe extends Ne{static get pluginName(){return"SpecialCharactersEssentials"}static get isOfficialPlugin(){return!0}static get requires(){return[$H,NH,LH,DH,MH]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class SNe extends wt{constructor(e,i){super(e);y(this,"styleDefinition");y(this,"previewView");this.styleDefinition=i,this.previewView=this._createPreview(),this.set({label:i.name,class:"ck-style-grid__button",withText:!0}),this.extendTemplate({attributes:{role:"option"}}),this.children.add(this.previewView,0)}_createPreview(){const e=new dt(this.locale);return e.setTemplate({tag:"div",attributes:{class:["ck","ck-reset_all-excluded","ck-style-grid__button__preview","ck-content"],"aria-hidden":"true"},children:[this.styleDefinition.previewTemplate]}),e}}class ANe extends dt{constructor(e,i){super(e);y(this,"focusTracker");y(this,"keystrokes");y(this,"children");this.focusTracker=new Mn,this.keystrokes=new oi,this.set("activeStyles",[]),this.set("enabledStyles",[]),this.children=this.createCollection(),this.children.delegate("execute").to(this);for(const r of i){const s=new SNe(e,r);this.children.add(s)}this.on("change:activeStyles",()=>{for(const r of this.children)r.isOn=this.activeStyles.includes(r.styleDefinition.name)}),this.on("change:enabledStyles",()=>{for(const r of this.children)r.isEnabled=this.enabledStyles.includes(r.styleDefinition.name)}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-style-grid"],role:"listbox"},children:this.children})}render(){super.render();for(const e of this.children)this.focusTracker.add(e.element);xv({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.children,numberOfColumns:3,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection}),this.keystrokes.listenTo(this.element)}focus(){this.children.first.focus()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}class _M extends dt{constructor(e,i,r){super(e);y(this,"gridView");y(this,"labelView");this.labelView=new js(e),this.labelView.text=i,this.gridView=new ANe(e,r),this.setTemplate({tag:"div",attributes:{class:["ck","ck-style-panel__style-group"],role:"group","aria-labelledby":this.labelView.id},children:[this.labelView,this.gridView]})}}class INe extends dt{constructor(e,i){super(e);y(this,"focusTracker");y(this,"keystrokes");y(this,"children");y(this,"blockStylesGroupView");y(this,"inlineStylesGroupView");y(this,"_focusables");y(this,"_focusCycler");const r=e.t;this.focusTracker=new Mn,this.keystrokes=new oi,this.children=this.createCollection(),this.blockStylesGroupView=new _M(e,r("Block styles"),i.block),this.inlineStylesGroupView=new _M(e,r("Text styles"),i.inline),this.set("activeStyles",[]),this.set("enabledStyles",[]),this._focusables=new tr,this._focusCycler=new ur({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:["shift + tab"],focusNext:["tab"]}}),i.block.length&&this.children.add(this.blockStylesGroupView),i.inline.length&&this.children.add(this.inlineStylesGroupView),this.blockStylesGroupView.gridView.delegate("execute").to(this),this.inlineStylesGroupView.gridView.delegate("execute").to(this),this.blockStylesGroupView.gridView.bind("activeStyles","enabledStyles").to(this,"activeStyles","enabledStyles"),this.inlineStylesGroupView.gridView.bind("activeStyles","enabledStyles").to(this,"activeStyles","enabledStyles"),this.setTemplate({tag:"div",attributes:{class:["ck","ck-style-panel"]},children:this.children})}render(){super.render(),this._focusables.add(this.blockStylesGroupView.gridView),this._focusables.add(this.inlineStylesGroupView.gridView),this.focusTracker.add(this.blockStylesGroupView.gridView.element),this.focusTracker.add(this.inlineStylesGroupView.gridView.element),this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}const PNe=["caption","colgroup","dd","dt","figcaption","legend","li","optgroup","option","rp","rt","summary","tbody","td","tfoot","th","thead","tr"];class lc extends Ne{constructor(e){super(e);y(this,"_htmlSupport");this.decorate("isStyleEnabledForBlock"),this.decorate("isStyleActiveForBlock"),this.decorate("getAffectedBlocks"),this.decorate("isStyleEnabledForInlineSelection"),this.decorate("isStyleActiveForInlineSelection"),this.decorate("getAffectedInlineSelectable"),this.decorate("getStylePreview"),this.decorate("configureGHSDataFilter")}static get pluginName(){return"StyleUtils"}static get isOfficialPlugin(){return!0}init(){this._htmlSupport=this.editor.plugins.get("GeneralHtmlSupport")}normalizeConfig(e,i=[]){const r={block:[],inline:[]};for(const s of i){const o=[],a=[];for(const c of e.getDefinitionsForView(s.element)){const u="appliesToBlock"in c?c.appliesToBlock:!1;if(c.isBlock||u){if(typeof u=="string")o.push(u);else if(c.isBlock){const d=c;o.push(c.model),d.paragraphLikeModel&&o.push(d.paragraphLikeModel)}}else a.push(c.model)}const l=this.getStylePreview(s,[{text:"AaBbCcDdEeFfGgHhIiJj"}]);o.length?r.block.push({...s,previewTemplate:l,modelElements:o,isBlock:!0}):r.inline.push({...s,previewTemplate:l,ghsAttributes:a})}return r}isStyleEnabledForBlock(e,i){const r=this.editor.model,s=this._htmlSupport.getGhsAttributeNameForElement(e.element);return r.schema.checkAttribute(i,s)?e.modelElements.includes(i.name):!1}isStyleActiveForBlock(e,i){const r=this._htmlSupport.getGhsAttributeNameForElement(e.element),s=i.getAttribute(r);return this.hasAllClasses(s,e.classes)}getAffectedBlocks(e,i){return e.modelElements.includes(i.name)?[i]:null}isStyleEnabledForInlineSelection(e,i){const r=this.editor.model;for(const s of e.ghsAttributes)if(r.schema.checkAttributeInSelection(i,s))return!0;return!1}isStyleActiveForInlineSelection(e,i){for(const r of e.ghsAttributes){const s=this._getValueFromFirstAllowedNode(i,r);if(this.hasAllClasses(s,e.classes))return!0}return!1}getAffectedInlineSelectable(e,i){return i}getStylePreview(e,i){const{element:r,classes:s}=e;return{tag:ONe(r)?r:"div",attributes:{class:s},children:i}}hasAllClasses(e,i){return mo(e)&&xNe(e)&&i.every(r=>e.classes.includes(r))}configureGHSDataFilter({block:e,inline:i}){const r=this.editor.plugins.get("DataFilter");r.loadAllowedConfig(e.map(kM)),r.loadAllowedConfig(i.map(kM))}_getValueFromFirstAllowedNode(e,i){const s=this.editor.model.schema;if(e.isCollapsed)return e.getAttribute(i);for(const o of e.getRanges())for(const a of o.getItems())if(s.checkAttribute(a,i))return a.getAttribute(i);return null}}function xNe(n){return!!n.classes&&Array.isArray(n.classes)}function ONe(n){return!PNe.includes(n)}function kM({element:n,classes:t}){return{name:n,classes:t}}class RNe extends Ne{static get pluginName(){return"StyleUI"}static get isOfficialPlugin(){return!0}static get requires(){return[lc]}init(){const t=this.editor,e=t.plugins.get("DataSchema"),i=t.plugins.get("StyleUtils"),r=t.config.get("style.definitions"),s=i.normalizeConfig(e,r);t.ui.componentFactory.add("style",o=>{const a=o.t,l=as(o),c=t.commands.get("style");return l.once("change:isOpen",()=>{const u=new INe(o,s);l.panelView.children.add(u),u.delegate("execute").to(l),u.bind("activeStyles").to(c,"value"),u.bind("enabledStyles").to(c,"enabledStyles")}),l.bind("isEnabled").to(c),l.buttonView.withText=!0,l.buttonView.bind("label").to(c,"value",u=>u.length>1?a("Multiple styles"):u.length===1?u[0]:a("Styles")),l.bind("class").to(c,"value",u=>{const d=["ck-style-dropdown"];return u.length>1&&d.push("ck-style-dropdown_multiple-active"),d.join(" ")}),l.on("execute",u=>{t.execute("style",{styleName:u.source.styleDefinition.name}),t.editing.view.focus()}),l})}}class VNe extends Nt{constructor(e,i){super(e);y(this,"_styleDefinitions");y(this,"_styleUtils");this.set("value",[]),this.set("enabledStyles",[]),this._styleDefinitions=i,this._styleUtils=this.editor.plugins.get(lc)}refresh(){const e=this.editor.model,i=e.document.selection,r=new Set,s=new Set;for(const a of this._styleDefinitions.inline)this._styleUtils.isStyleEnabledForInlineSelection(a,i)&&s.add(a.name),this._styleUtils.isStyleActiveForInlineSelection(a,i)&&r.add(a.name);const o=gi(i.getSelectedBlocks())||i.getFirstPosition().parent;if(o){const a=o.getAncestors({includeSelf:!0,parentFirst:!0});for(const l of a){if(l.is("rootElement"))break;for(const c of this._styleDefinitions.block)this._styleUtils.isStyleEnabledForBlock(c,l)&&(s.add(c.name),this._styleUtils.isStyleActiveForBlock(c,l)&&r.add(c.name));if(e.schema.isObject(l))break}}this.enabledStyles=Array.from(s).sort(),this.isEnabled=this.enabledStyles.length>0,this.value=this.isEnabled?Array.from(r).sort():[]}execute({styleName:e,forceValue:i}){if(!this.enabledStyles.includes(e)){mn("style-command-executed-with-incorrect-style-name");return}const r=this.editor.model,s=r.document.selection,o=this.editor.plugins.get("GeneralHtmlSupport"),a=[...this._styleDefinitions.inline,...this._styleDefinitions.block],l=a.filter(({name:d})=>this.value.includes(d)),c=a.find(({name:d})=>d==e),u=i===void 0?!this.value.includes(c.name):i;r.change(()=>{let d;NNe(c)?d=this._findAffectedBlocks(LNe(s),c):d=[this._styleUtils.getAffectedInlineSelectable(c,s)];for(const f of d)u?o.addModelHtmlClass(c.element,c.classes,f):o.removeModelHtmlClass(c.element,DNe(l,c),f)})}_findAffectedBlocks(e,i){const r=new Set;for(const s of e){const o=s.getAncestors({includeSelf:!0,parentFirst:!0});for(const a of o){if(a.is("rootElement"))break;const l=this._styleUtils.getAffectedBlocks(i,a);if(l){for(const c of l)r.add(c);break}}}return r}}function DNe(n,t){return n.reduce((e,i)=>i.name===t.name?e:e.filter(r=>!i.classes.includes(r)),t.classes)}function NNe(n){return"isBlock"in n}function LNe(n){const t=Array.from(n.getSelectedBlocks());return t.length?t:[n.getFirstPosition().parent]}class MNe extends Ne{constructor(){super(...arguments);y(this,"_listUtils");y(this,"_styleUtils");y(this,"_htmlSupport")}static get pluginName(){return"ListStyleSupport"}static get isOfficialPlugin(){return!0}static get requires(){return[lc,"GeneralHtmlSupport"]}init(){const e=this.editor;e.plugins.has("ListEditing")&&(this._styleUtils=e.plugins.get(lc),this._listUtils=this.editor.plugins.get("ListUtils"),this._htmlSupport=this.editor.plugins.get("GeneralHtmlSupport"),this.listenTo(this._styleUtils,"isStyleEnabledForBlock",(i,[r,s])=>{this._isStyleEnabledForBlock(r,s)&&(i.return=!0,i.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"isStyleActiveForBlock",(i,[r,s])=>{this._isStyleActiveForBlock(r,s)&&(i.return=!0,i.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"getAffectedBlocks",(i,[r,s])=>{const o=this._getAffectedBlocks(r,s);o&&(i.return=o,i.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"getStylePreview",(i,[r,s])=>{const o=this._getStylePreview(r,s);o&&(i.return=o,i.stop())},{priority:"high"}))}_isStyleEnabledForBlock(e,i){const r=this.editor.model;if(!["ol","ul","li"].includes(e.element)||!this._listUtils.isListItemBlock(i))return!1;const s=this._htmlSupport.getGhsAttributeNameForElement(e.element);if(e.element=="ol"||e.element=="ul"){if(!r.schema.checkAttribute(i,s))return!1;const a=this._listUtils.isNumberedListType(i.getAttribute("listType"))?"ol":"ul";return e.element==a}else return r.schema.checkAttribute(i,s)}_isStyleActiveForBlock(e,i){const r=this._htmlSupport.getGhsAttributeNameForElement(e.element),s=i.getAttribute(r);return this._styleUtils.hasAllClasses(s,e.classes)}_getAffectedBlocks(e,i){return this._isStyleEnabledForBlock(e,i)?e.element=="li"?this._listUtils.expandListBlocksToCompleteItems(i,{withNested:!1}):this._listUtils.expandListBlocksToCompleteList(i):null}_getStylePreview(e,i){const{element:r,classes:s}=e;return r=="ol"||r=="ul"?{tag:r,attributes:{class:s},children:[{tag:"li",children:i}]}:r=="li"?{tag:"ol",children:[{tag:r,attributes:{class:s},children:i}]}:null}}class $Ne extends Ne{constructor(){super(...arguments);y(this,"_tableUtils");y(this,"_styleUtils")}static get pluginName(){return"TableStyleSupport"}static get isOfficialPlugin(){return!0}static get requires(){return[lc]}init(){const e=this.editor;e.plugins.has("TableEditing")&&(this._styleUtils=e.plugins.get(lc),this._tableUtils=this.editor.plugins.get("TableUtils"),this.listenTo(this._styleUtils,"isStyleEnabledForBlock",(i,[r,s])=>{this._isApplicable(r,s)&&(i.return=this._isStyleEnabledForBlock(r,s),i.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"getAffectedBlocks",(i,[r,s])=>{this._isApplicable(r,s)&&(i.return=this._getAffectedBlocks(r,s),i.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"configureGHSDataFilter",(i,[{block:r}])=>{this.editor.plugins.get("DataFilter").loadAllowedConfig(r.filter(o=>o.element=="figcaption").map(o=>({name:"caption",classes:o.classes})))}))}_isApplicable(e,i){return["td","th"].includes(e.element)?i.name=="tableCell":["thead","tbody"].includes(e.element)?i.name=="table":!1}_isStyleEnabledForBlock(e,i){if(["td","th"].includes(e.element)){const r=this._tableUtils.getCellLocation(i),o=i.parent.parent,a=o.getAttribute("headingRows")||0,l=o.getAttribute("headingColumns")||0,c=r.row<a||r.column<l;return e.element=="th"?c:!c}if(["thead","tbody"].includes(e.element)){const r=i.getAttribute("headingRows")||0;return e.element=="thead"?r>0:r<this._tableUtils.getRows(i)}/* istanbul ignore next -- @preserve */return!1}_getAffectedBlocks(e,i){return this._isStyleEnabledForBlock(e,i)?[i]:null}}class BNe extends Ne{constructor(){super(...arguments);y(this,"_styleUtils");y(this,"_htmlSupport")}static get pluginName(){return"LinkStyleSupport"}static get isOfficialPlugin(){return!0}static get requires(){return[lc,"GeneralHtmlSupport"]}init(){const e=this.editor;e.plugins.has("LinkEditing")&&(this._styleUtils=e.plugins.get(lc),this._htmlSupport=this.editor.plugins.get("GeneralHtmlSupport"),this.listenTo(this._styleUtils,"isStyleEnabledForInlineSelection",(i,[r,s])=>{r.element=="a"&&(i.return=this._isStyleEnabled(r,s),i.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"isStyleActiveForInlineSelection",(i,[r,s])=>{r.element=="a"&&(i.return=this._isStyleActive(r,s),i.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"getAffectedInlineSelectable",(i,[r,s])=>{if(r.element!="a")return;const o=this._getAffectedSelectable(r,s);o&&(i.return=o,i.stop())},{priority:"high"}))}_isStyleEnabled(e,i){const r=this.editor.model;if(i.isCollapsed)return i.hasAttribute("linkHref");for(const s of i.getRanges())for(const o of s.getItems())if((o.is("$textProxy")||r.schema.isInline(o))&&o.hasAttribute("linkHref"))return!0;return!1}_isStyleActive(e,i){const r=this.editor.model,s=this._htmlSupport.getGhsAttributeNameForElement(e.element);if(i.isCollapsed){if(i.hasAttribute("linkHref")){const o=i.getAttribute(s);if(this._styleUtils.hasAllClasses(o,e.classes))return!0}return!1}for(const o of i.getRanges())for(const a of o.getItems())if((a.is("$textProxy")||r.schema.isInline(a))&&a.hasAttribute("linkHref")){const l=a.getAttribute(s);return this._styleUtils.hasAllClasses(l,e.classes)}return!1}_getAffectedSelectable(e,i){const r=this.editor.model;if(i.isCollapsed){const o=i.getAttribute("linkHref");return Rv(i.getFirstPosition(),"linkHref",o,r)}const s=[];for(const o of i.getRanges()){const a=r.createRange(EM(o.start,"linkHref",!0,r),EM(o.end,"linkHref",!1,r));for(const l of a.getItems())(l.is("$textProxy")||r.schema.isInline(l))&&l.hasAttribute("linkHref")&&s.push(this.editor.model.createRangeOn(l))}return FNe(s)}}function EM(n,t,e,i){const r=n.textNode||(e?n.nodeAfter:n.nodeBefore);if(!r||!r.hasAttribute(t))return n;const s=r.getAttribute(t);return WT(n,t,s,e,i)}function FNe(n){for(let t=1;t<n.length;t++){const e=n[t-1].getJoined(n[t]);e&&n.splice(--t,2,e)}return n}class UNe extends Ne{static get pluginName(){return"StyleEditing"}static get isOfficialPlugin(){return!0}static get requires(){return["GeneralHtmlSupport",lc,MNe,$Ne,BNe]}init(){const t=this.editor,e=t.plugins.get("DataSchema"),i=t.plugins.get("StyleUtils"),r=t.config.get("style.definitions"),s=i.normalizeConfig(e,r);t.commands.add("style",new VNe(t,s)),i.configureGHSDataFilter(s)}}class zNe extends Ne{static get pluginName(){return"Style"}static get isOfficialPlugin(){return!0}static get requires(){return[UNe,RNe]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function BP(n,t){const{modelAttribute:e,styleName:i,viewElement:r,defaultValue:s,reduceBoxSides:o=!1,shouldUpcast:a=()=>!0}=t;n.for("upcast").attributeToAttribute({view:{name:r,styles:{[i]:/[\s\S]+/}},model:{key:e,value:(l,c,u)=>{if(!a(l))return;const d=Jc(s,"",u),f=l.getNormalizedStyle(i),h=o?Rw(f):f;if(d!==h)return h}}})}function rS(n,t,e,i){n.for("upcast").add(r=>r.on("element:"+t,(s,o,a)=>{if(!o.modelRange)return;const l=["border-top-width","border-top-color","border-top-style","border-bottom-width","border-bottom-color","border-bottom-style","border-right-width","border-right-color","border-right-style","border-left-width","border-left-color","border-left-style"].filter(v=>o.viewItem.hasStyle(v));if(!l.length)return;const c={styles:l};if(!a.consumable.test(o.viewItem,c))return;const u=[...o.modelRange.getItems({shallow:!0})].pop(),d=u.findAncestor("table",{includeSelf:!0});let f=i;d&&d.getAttribute("tableType")=="layout"&&(f={style:"none",color:"",width:""}),a.consumable.consume(o.viewItem,c);const h={style:o.viewItem.getNormalizedStyle("border-style"),color:o.viewItem.getNormalizedStyle("border-color"),width:o.viewItem.getNormalizedStyle("border-width")},g={style:Rw(h.style),color:Rw(h.color),width:Rw(h.width)};g.style!==f.style&&a.writer.setAttribute(e.style,g.style,u),g.color!==f.color&&a.writer.setAttribute(e.color,g.color,u),g.width!==f.width&&a.writer.setAttribute(e.width,g.width,u)}))}function pp(n,t){const{modelElement:e,modelAttribute:i,styleName:r}=t;n.for("downcast").attributeToAttribute({model:{name:e,key:i},view:s=>({key:"style",value:{[r]:s}})})}function Ow(n,t){const{modelAttribute:e,styleName:i}=t;n.for("downcast").add(r=>r.on(`attribute:${e}:table`,(s,o,a)=>{const{item:l,attributeNewValue:c}=o,{mapper:u,writer:d}=a;if(!a.consumable.consume(o.item,s.name))return;const f=[...u.toViewElement(l).getChildren()].find(h=>h.is("element","table"));c?d.setStyle(i,c,f):d.removeStyle(i,f)}))}function Jc(n,t,e){const i=e.modelRange&&gi(e.modelRange.getItems({shallow:!0})),r=i&&i.is("element")&&i.findAncestor("table",{includeSelf:!0});return r&&r.getAttribute("tableType")==="layout"?t:n}function Rw(n){if(!n)return;const t=["top","right","bottom","left"];if(!t.every(s=>n[s]))return n;const i=n.top;return t.every(s=>n[s]===i)?i:n}function Wi(n,t,e,i,r=1){t!=null&&r!==void 0&&r!==null&&t>r?i.setAttribute(n,t,e):i.removeAttribute(n,e)}function rf(n,t,e={}){const i=n.createElement("tableCell",e);return n.insertElement("paragraph",i),n.insert(i,t),i}function sS(n,t){const e=t.parent.parent,i=parseInt(e.getAttribute("headingColumns")||"0"),{column:r}=n.getCellLocation(t);return!!i&&r<i}function Vw(n,t,e){const{modelAttribute:i}=e;n.extend("tableCell",{allowAttributes:[i]}),BP(t,{viewElement:/^(td|th)$/,...e}),pp(t,{modelElement:"tableCell",...e})}function Xc(n){const t=n.getSelectedElement();return t&&t.is("element","table")?t:n.getFirstPosition().findAncestor("table")}function HNe(){return n=>{n.on("element:figure",(t,e,i)=>{if(!i.consumable.test(e.viewItem,{name:!0,classes:"table"}))return;const r=qNe(e.viewItem);if(!r||!i.consumable.test(r,{name:!0}))return;i.consumable.consume(e.viewItem,{name:!0,classes:"table"});const s=i.convertItem(r,e.modelCursor),o=gi(s.modelRange.getItems());if(!o){i.consumable.revert(e.viewItem,{name:!0,classes:"table"});return}i.convertChildren(e.viewItem,i.writer.createPositionAt(o,"end")),i.updateConversionResult(o,e)})}}function WNe(){return n=>{n.on("element:table",(t,e,i)=>{const r=e.viewItem;if(!i.consumable.test(r,{name:!0}))return;const{rows:s,headingRows:o,headingColumns:a}=GNe(r),l={};a&&(l.headingColumns=a),o&&(l.headingRows=o);const c=i.writer.createElement("table",l);if(i.safeInsert(c,e.modelCursor)){if(i.consumable.consume(r,{name:!0}),s.forEach(u=>i.convertItem(u,i.writer.createPositionAt(c,"end"))),i.convertChildren(r,i.writer.createPositionAt(c,"end")),c.isEmpty){const u=i.writer.createElement("tableRow");i.writer.insert(u,i.writer.createPositionAt(c,"end")),rf(i.writer,i.writer.createPositionAt(u,"end"))}i.updateConversionResult(c,e)}})}}function jNe(){return n=>{n.on("element:tr",(t,e)=>{e.viewItem.isEmpty&&e.modelCursor.index==0&&t.stop()},{priority:"high"})}}function CM(n){return t=>{t.on(`element:${n}`,(e,i,{writer:r})=>{if(!i.modelRange)return;const s=i.modelRange.start.nodeAfter,o=r.createPositionAt(s,0);if(i.viewItem.isEmpty){r.insertElement("paragraph",o);return}const a=Array.from(s.getChildren());if(a.every(l=>l.is("element","$marker"))){const l=r.createElement("paragraph");r.insert(l,r.createPositionAt(s,0));for(const c of a)r.move(r.createRangeOn(c),r.createPositionAt(l,"end"))}},{priority:"low"})}}function qNe(n){for(const t of n.getChildren())if(t.is("element","table"))return t}function GNe(n){let t=0,e;const i=[],r=[];let s;for(const o of Array.from(n.getChildren())){if(o.name!=="tbody"&&o.name!=="thead"&&o.name!=="tfoot")continue;o.name==="thead"&&!s&&(s=o);const a=Array.from(o.getChildren()).filter(c=>c.is("element","tr"));let l=null;for(const c of a){const u=Array.from(c.getChildren()).filter(d=>d.is("element","td")||d.is("element","th"));if(s&&o===s||o.name==="tbody"&&u.length>0&&(l===null||u.length===l)&&u.every(d=>d.is("element","th")))t++,i.push(c);else{r.push(c);const d=KNe(c);(!e||d<e)&&(e=d)}l=Math.max(l||0,u.length)}}return{headingRows:t,headingColumns:e||0,rows:[...i,...r]}}function KNe(n){let t=0,e=0;const i=Array.from(n.getChildren()).filter(r=>r.name==="th"||r.name==="td");for(;e<i.length&&i[e].name==="th";){const r=i[e],s=parseInt(r.getAttribute("colspan")||"1");t=t+s,e++}return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ni{constructor(t,e={}){y(this,"_table");y(this,"_startRow");y(this,"_endRow");y(this,"_startColumn");y(this,"_endColumn");y(this,"_includeAllSlots");y(this,"_skipRows");y(this,"_row");y(this,"_rowIndex");y(this,"_column");y(this,"_cellIndex");y(this,"_spannedCells");y(this,"_nextCellAtColumn");y(this,"_jumpedToStartRow",!1);this._table=t,this._startRow=e.row!==void 0?e.row:e.startRow||0,this._endRow=e.row!==void 0?e.row:e.endRow,this._startColumn=e.column!==void 0?e.column:e.startColumn||0,this._endColumn=e.column!==void 0?e.column:e.endColumn,this._includeAllSlots=!!e.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){this._canJumpToStartRow()&&this._jumpToNonSpannedRowClosestToStartRow();const t=this._table.getChild(this._rowIndex);if(!t||this._isOverEndRow())return{done:!0,value:void 0};if(!t.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let e=null;const i=this._getSpanned();if(i)this._includeAllSlots&&!this._shouldSkipSlot()&&(e=this._formatOutValue(i.cell,i.row,i.column));else{const r=t.getChild(this._cellIndex);if(!r)return this._advanceToNextRow();const s=parseInt(r.getAttribute("colspan")||"1"),o=parseInt(r.getAttribute("rowspan")||"1");(s>1||o>1)&&this._recordSpans(r,o,s),this._shouldSkipSlot()||(e=this._formatOutValue(r)),this._nextCellAtColumn=this._column+s}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,e||this.next()}skipRow(t){this._skipRows.add(t)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return this._endRow!==void 0&&this._row>this._endRow}_isOverEndColumn(){return this._endColumn!==void 0&&this._column>this._endColumn}_formatOutValue(t,e=this._row,i=this._column){return{done:!1,value:new YNe(this,t,e,i)}}_shouldSkipSlot(){const t=this._skipRows.has(this._row),e=this._row<this._startRow,i=this._column<this._startColumn,r=this._endColumn!==void 0&&this._column>this._endColumn;return t||e||i||r}_getSpanned(){const t=this._spannedCells.get(this._row);return t&&t.get(this._column)||null}_recordSpans(t,e,i){const r={cell:t,row:this._row,column:this._column};for(let s=this._row;s<this._row+e;s++)for(let o=this._column;o<this._column+i;o++)(s!=this._row||o!=this._column)&&this._markSpannedCell(s,o,r)}_markSpannedCell(t,e,i){this._spannedCells.has(t)||this._spannedCells.set(t,new Map),this._spannedCells.get(t).set(e,i)}_canJumpToStartRow(){return!!this._startRow&&this._startRow>0&&!this._jumpedToStartRow}_jumpToNonSpannedRowClosestToStartRow(){const t=this._getRowLength(0);for(let e=this._startRow;!this._jumpedToStartRow;e--)t===this._getRowLength(e)&&(this._row=e,this._rowIndex=e,this._jumpedToStartRow=!0)}_getRowLength(t){return[...this._table.getChild(t).getChildren()].reduce((i,r)=>i+parseInt(r.getAttribute("colspan")||"1"),0)}}class YNe{constructor(t,e,i,r){y(this,"cell");y(this,"row");y(this,"column");y(this,"cellAnchorRow");y(this,"cellAnchorColumn");y(this,"_cellIndex");y(this,"_rowIndex");y(this,"_table");this.cell=e,this.row=t._row,this.column=t._column,this.cellAnchorRow=i,this.cellAnchorColumn=r,this._cellIndex=t._cellIndex,this._rowIndex=t._rowIndex,this._table=t._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||"1")}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||"1")}get rowIndex(){return this._rowIndex}getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}function TM(n,t){return(e,{writer:i})=>{const r=e.getAttribute("headingRows")||0,s=i.createContainerElement("table",null,[]),o=i.createContainerElement("figure",{class:"table"},s);r>0&&i.insert(i.createPositionAt(s,"end"),i.createContainerElement("thead",null,i.createSlot(a=>a.is("element","tableRow")&&a.index<r))),r<n.getRows(e)&&i.insert(i.createPositionAt(s,"end"),i.createContainerElement("tbody",null,i.createSlot(a=>a.is("element","tableRow")&&a.index>=r)));for(const{positionOffset:a,filter:l}of t.additionalSlots)i.insert(i.createPositionAt(s,a),i.createSlot(l));return i.insert(i.createPositionAt(s,"after"),i.createSlot(a=>a.is("element","tableRow")?!1:!t.additionalSlots.some(({filter:l})=>l(a)))),t.asWidget?ZNe(o,i):o}}function QNe(){return(n,{writer:t})=>n.isEmpty?t.createEmptyElement("tr"):t.createContainerElement("tr")}function SM(n={}){return(t,{writer:e})=>{const i=t.parent,r=i.parent,s=r.getChildIndex(i),o=new ni(r,{row:s}),a=r.getAttribute("headingRows")||0,l=r.getAttribute("headingColumns")||0;let c=null;for(const u of o)if(u.cell==t){const f=u.row<a||u.column<l?"th":"td";c=n.asWidget?EP(e.createEditableElement(f),e,{withAriaRole:!1}):e.createContainerElement(f);break}return c}}function AM(n={}){return(t,{writer:e})=>{if(!t.parent.is("element","tableCell")||!BH(t))return null;if(n.asWidget)return e.createContainerElement("span",{class:"ck-table-bogus-paragraph"});{const i=e.createContainerElement("p");return e.setCustomProperty("dataPipeline:transparentRendering",!0,i),i}}}function BH(n){return n.parent.childCount==1&&!JNe(n)}function ZNe(n,t){return t.setCustomProperty("table",!0,n),tf(n,t,{hasSelectionHandle:!0})}function JNe(n){for(const t of n.getAttributeKeys())if(!(t.startsWith("selection:")||t=="htmlEmptyBlock"))return!0;return!1}class XNe extends Nt{refresh(){const t=this.editor.model,e=t.document.selection,i=t.schema;this.isEnabled=eLe(e,i)}execute(t={}){const e=this.editor,i=e.model,r=e.plugins.get("TableUtils"),s=e.config.get("table.defaultHeadings.rows"),o=e.config.get("table.defaultHeadings.columns");t.headingRows===void 0&&s&&(t.headingRows=s),t.headingColumns===void 0&&o&&(t.headingColumns=o),i.change(a=>{const l=r.createTable(a,t);i.insertObject(l,null,null,{findOptimalPosition:"auto"}),a.setSelection(a.createPositionAt(l.getNodeByPath([0,0,0]),0))})}}function eLe(n,t){const e=n.getFirstPosition().parent,i=e===e.root?e:e.parent;return t.checkChild(i,"table")}class IM extends Nt{constructor(e,i={}){super(e);y(this,"order");this.order=i.order||"below"}refresh(){const e=this.editor.model.document.selection,r=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=r}execute(){const e=this.editor,i=e.model.document.selection,r=e.plugins.get("TableUtils"),s=this.order==="above",o=r.getSelectionAffectedTableCells(i),a=r.getRowIndexes(o),l=s?a.first:a.last,c=o[0].findAncestor("table");r.insertRows(c,{at:s?l:l+1,copyStructureFromAbove:!s})}}class PM extends Nt{constructor(e,i={}){super(e);y(this,"order");this.order=i.order||"right"}refresh(){const e=this.editor.model.document.selection,r=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=r}execute(){const e=this.editor,i=e.model.document.selection,r=e.plugins.get("TableUtils"),s=this.order==="left",o=r.getSelectionAffectedTableCells(i),a=r.getColumnIndexes(o),l=s?a.first:a.last,c=o[0].findAncestor("table");r.insertColumns(c,{columns:1,at:s?l:l+1})}}class xM extends Nt{constructor(e,i={}){super(e);y(this,"direction");this.direction=i.direction||"horizontally"}refresh(){const i=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=i.length===1}execute(){const e=this.editor.plugins.get("TableUtils"),i=e.getSelectionAffectedTableCells(this.editor.model.document.selection)[0];this.direction==="horizontally"?e.splitCellHorizontally(i,2):e.splitCellVertically(i,2)}}function FH(n,t,e){const{startRow:i,startColumn:r,endRow:s,endColumn:o}=t,a=e.createElement("table"),l=n.getAttribute("tableType");l&&e.setAttribute("tableType",l,a);const c=s-i+1;for(let d=0;d<c;d++)e.insertElement("tableRow",a,"end");const u=[...new ni(n,{startRow:i,endRow:s,startColumn:r,endColumn:o,includeAllSlots:!0})];for(const{row:d,column:f,cell:h,isAnchor:g,cellAnchorRow:v,cellAnchorColumn:_}of u){const w=d-i,C=a.getChild(w);if(!g)(v<i||_<r)&&rf(e,e.createPositionAt(C,"end"));else{const k=e.cloneElement(h);e.append(k,C),jH(k,d,f,s,o,e)}}return tLe(a,n,i,r,e),a}function UH(n,t,e=0){const i=[],r=new ni(n,{startRow:e,endRow:t-1});for(const s of r){const{row:o,cellHeight:a}=s,l=o+a-1;o<t&&t<=l&&i.push(s)}return i}function zH(n,t,e){const i=n.parent,r=i.parent,s=i.index,o=parseInt(n.getAttribute("rowspan")),a=t-s,l={},c=o-a;c>1&&(l.rowspan=c);const u=parseInt(n.getAttribute("colspan")||"1");u>1&&(l.colspan=u);const d=s,f=d+a,h=[...new ni(r,{startRow:d,endRow:f,includeAllSlots:!0})];let g=null,v;for(const _ of h){const{row:w,column:C,cell:k}=_;k===n&&v===void 0&&(v=C),v!==void 0&&v===C&&w===f&&(g=rf(e,_.getPositionBefore(),l))}return Wi("rowspan",a,n,e),g}function HH(n,t){const e=[],i=new ni(n);for(const r of i){const{column:s,cellWidth:o}=r,a=s+o-1;s<t&&t<=a&&e.push(r)}return e}function WH(n,t,e,i){const r=parseInt(n.getAttribute("colspan")),s=e-t,o={},a=r-s;a>1&&(o.colspan=a);const l=parseInt(n.getAttribute("rowspan")||"1");l>1&&(o.rowspan=l);const c=rf(i,i.createPositionAfter(n),o);return Wi("colspan",s,n,i),c}function jH(n,t,e,i,r,s){const o=parseInt(n.getAttribute("colspan")||"1"),a=parseInt(n.getAttribute("rowspan")||"1");if(e+o-1>r){const u=r-e+1;Wi("colspan",u,n,s,1)}if(t+a-1>i){const u=i-t+1;Wi("rowspan",u,n,s,1)}}function tLe(n,t,e,i,r){const s=parseInt(t.getAttribute("headingRows")||"0");if(s>0){const a=s-e;Wi("headingRows",a,n,r,0)}const o=parseInt(t.getAttribute("headingColumns")||"0");if(o>0){const a=o-i;Wi("headingColumns",a,n,r,0)}}function oS(n,t){const e=t.getColumns(n),i=new Array(e).fill(0);for(const{column:s}of new ni(n))i[s]++;const r=i.reduce((s,o,a)=>o?s:[...s,a],[]);if(r.length>0){const s=r[r.length-1];return t.removeColumns(n,{at:s}),!0}return!1}function aS(n,t){const e=[],i=t.getRows(n);for(let r=0;r<i;r++)n.getChild(r).isEmpty&&e.push(r);if(e.length>0){const r=e[e.length-1];return t.removeRows(n,{at:r}),!0}return!1}function FP(n,t){oS(n,t)||aS(n,t)}function qH(n,t){const e=Array.from(new ni(n,{startColumn:t.firstColumn,endColumn:t.lastColumn,row:t.lastRow}));if(e.every(({cellHeight:s})=>s===1))return t.lastRow;const r=e[0].cellHeight-1;return t.lastRow+r}function GH(n,t){const e=Array.from(new ni(n,{startRow:t.firstRow,endRow:t.lastRow,column:t.lastColumn}));if(e.every(({cellWidth:s})=>s===1))return t.lastColumn;const r=e[0].cellWidth-1;return t.lastColumn+r}class Wb extends Nt{constructor(e,i){super(e);y(this,"direction");y(this,"isHorizontal");this.direction=i.direction,this.isHorizontal=this.direction=="right"||this.direction=="left"}refresh(){const e=this._getMergeableCell();this.value=e,this.isEnabled=!!e}execute(){const e=this.editor.model,i=e.document,s=this.editor.plugins.get("TableUtils").getTableCellsContainingSelection(i.selection)[0],o=this.value,a=this.direction;e.change(l=>{const c=a=="right"||a=="down",u=c?s:o,d=c?o:s,f=d.parent;rLe(d,u,l);const h=this.isHorizontal?"colspan":"rowspan",g=parseInt(s.getAttribute(h)||"1"),v=parseInt(o.getAttribute(h)||"1");l.setAttribute(h,g+v,u),l.setSelection(l.createRangeIn(u));const _=this.editor.plugins.get("TableUtils"),w=f.findAncestor("table");FP(w,_)})}_getMergeableCell(){const i=this.editor.model.document,r=this.editor.plugins.get("TableUtils"),s=r.getTableCellsContainingSelection(i.selection)[0];if(!s)return;const o=this.isHorizontal?nLe(s,this.direction,r):iLe(s,this.direction,r);if(!o)return;const a=this.isHorizontal?"rowspan":"colspan",l=parseInt(s.getAttribute(a)||"1");if(parseInt(o.getAttribute(a)||"1")===l)return o}}function nLe(n,t,e){const r=n.parent.parent,s=t=="right"?n.nextSibling:n.previousSibling,o=(r.getAttribute("headingColumns")||0)>0;if(!s)return;const a=t=="right"?n:s,l=t=="right"?s:n,{column:c}=e.getCellLocation(a),{column:u}=e.getCellLocation(l),d=parseInt(a.getAttribute("colspan")||"1"),f=sS(e,a),h=sS(e,l);return o&&f!=h?void 0:c+d===u?s:void 0}function iLe(n,t,e){const i=n.parent,r=i.parent,s=r.getChildIndex(i);if(t=="down"&&s===e.getRows(r)-1||t=="up"&&s===0)return null;const o=parseInt(n.getAttribute("rowspan")||"1"),a=r.getAttribute("headingRows")||0,l=t=="down"&&s+o===a,c=t=="up"&&s===a;if(a&&(l||c))return null;const u=parseInt(n.getAttribute("rowspan")||"1"),d=t=="down"?s+u:s,f=[...new ni(r,{endRow:d})],g=f.find(_=>_.cell===n).column,v=f.find(({row:_,cellHeight:w,column:C})=>C!==g?!1:t=="down"?_===d:d===_+w);return v&&v.cell?v.cell:null}function rLe(n,t,e){OM(n)||(OM(t)&&e.remove(e.createRangeIn(t)),e.move(e.createRangeIn(n),e.createPositionAt(t,"end"))),e.remove(n)}function OM(n){const t=n.getChild(0);return n.childCount==1&&t.is("element","paragraph")&&t.isEmpty}class sLe extends Nt{refresh(){const t=this.editor.plugins.get("TableUtils"),e=t.getSelectionAffectedTableCells(this.editor.model.document.selection),i=e[0];if(i){const r=i.findAncestor("table"),o=t.getRows(r)-1,a=t.getRowIndexes(e),l=a.first===0&&a.last===o;this.isEnabled=!l}else this.isEnabled=!1}execute(){const t=this.editor.model,e=this.editor.plugins.get("TableUtils"),i=e.getSelectionAffectedTableCells(t.document.selection),r=e.getRowIndexes(i),s=i[0],o=s.findAncestor("table"),a=e.getCellLocation(s).column;t.change(l=>{const c=r.last-r.first+1;e.removeRows(o,{at:r.first,rows:c});const u=oLe(o,r.first,a,e.getRows(o));l.setSelection(l.createPositionAt(u,0))})}}function oLe(n,t,e,i){const r=n.getChild(Math.min(t,i-1));let s=r.getChild(0),o=0;for(const a of r.getChildren()){if(o>e)return s;s=a,o+=parseInt(a.getAttribute("colspan")||"1")}return s}class aLe extends Nt{refresh(){const t=this.editor.plugins.get("TableUtils"),e=t.getSelectionAffectedTableCells(this.editor.model.document.selection),i=e[0];if(i){const r=i.findAncestor("table"),s=t.getColumns(r),{first:o,last:a}=t.getColumnIndexes(e);this.isEnabled=a-o<s-1}else this.isEnabled=!1}execute(){const t=this.editor.plugins.get("TableUtils"),[e,i]=cLe(this.editor.model.document.selection,t),r=e.parent.parent,s=[...new ni(r)],o={first:s.find(l=>l.cell===e).column,last:s.find(l=>l.cell===i).column},a=lLe(s,e,i,o);this.editor.model.change(l=>{const c=o.last-o.first+1;t.removeColumns(r,{at:o.first,columns:c}),l.setSelection(l.createPositionAt(a,0))})}}function lLe(n,t,e,i){return parseInt(e.getAttribute("colspan")||"1")>1?e:t.previousSibling||e.nextSibling?e.nextSibling||t.previousSibling:i.first?n.reverse().find(({column:s})=>s<i.first).cell:n.reverse().find(({column:s})=>s>i.last).cell}function cLe(n,t){const e=t.getSelectionAffectedTableCells(n),i=e[0],r=e.pop(),s=[i,r];return i.isBefore(r)?s:s.reverse()}class uLe extends Nt{refresh(){const t=this.editor.plugins.get("TableUtils"),e=this.editor.model,i=t.getSelectionAffectedTableCells(e.document.selection);if(i.length===0){this.isEnabled=!1,this.value=!1;return}const r=i[0].findAncestor("table");this.isEnabled=e.schema.checkAttribute(r,"headingRows"),this.value=i.every(s=>this._isInHeading(s,s.parent.parent))}execute(t={}){if(t.forceValue===this.value)return;const e=this.editor.plugins.get("TableUtils"),i=this.editor.model,r=e.getSelectionAffectedTableCells(i.document.selection),s=r[0].findAncestor("table"),{first:o,last:a}=e.getRowIndexes(r),l=this.value?o:a+1,c=s.getAttribute("headingRows")||0;i.change(u=>{if(l){const d=l>c?c:0,f=UH(s,l,d);for(const{cell:h}of f)zH(h,l,u)}Wi("headingRows",l,s,u,0)})}_isInHeading(t,e){const i=parseInt(e.getAttribute("headingRows")||"0");return!!i&&t.parent.index<i}}class dLe extends Nt{refresh(){const t=this.editor.plugins.get("TableUtils"),e=this.editor.model,i=t.getSelectionAffectedTableCells(e.document.selection);if(i.length===0){this.isEnabled=!1,this.value=!1;return}const r=i[0].findAncestor("table");this.isEnabled=e.schema.checkAttribute(r,"headingColumns"),this.value=i.every(s=>sS(t,s))}execute(t={}){if(t.forceValue===this.value)return;const e=this.editor.plugins.get("TableUtils"),i=this.editor.model,r=e.getSelectionAffectedTableCells(i.document.selection),s=r[0].findAncestor("table"),{first:o,last:a}=e.getColumnIndexes(r),l=this.value?o:a+1;i.change(c=>{if(l){const u=HH(s,l);for(const{cell:d,column:f}of u)WH(d,f,l,c)}Wi("headingColumns",l,s,c,0)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const fLe=5,lS=40,hLe=2,mLe=3;function gLe(n){const t=new Set;for(const e of n.document.differ.getChanges()){let i=null;switch(e.type){case"insert":i=["table","tableRow","tableCell"].includes(e.name)?e.position:null;break;case"remove":i=["tableRow","tableCell"].includes(e.name)?e.position:null;break;case"attribute":e.range.start.nodeAfter&&(i=["table","tableRow","tableCell"].includes(e.range.start.nodeAfter.name)?e.range.start:null);break}if(!i)continue;const r=i.nodeAfter&&i.nodeAfter.is("element","table")?i.nodeAfter:i.findAncestor("table");for(const s of n.createRangeOn(r).getItems())s.is("element","table")&&Lv(s)&&t.add(s)}return t}function pLe(n,t){return lS*100/KH(n,t)}function KH(n,t){const e=RM(n,"tbody",t)||RM(n,"thead",t),i=t.editing.view.domConverter.mapViewToDom(e);return cS(i)}function RM(n,t,e){return[...[...e.editing.mapper.toViewElement(n).getChildren()].find(s=>s.is("element","table")).getChildren()].find(s=>s.is("element",t))}function cS(n){const t=at.window.getComputedStyle(n);return t.boxSizing==="border-box"?parseFloat(t.width)-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)-parseFloat(t.borderLeftWidth)-parseFloat(t.borderRightWidth):parseFloat(t.width)}function vLe(n,t){const e=t.getCellLocation(n).column,i=n.getAttribute("colspan")||1;return{leftEdge:e,rightEdge:e+i-1}}function Fs(n){const t=Math.pow(10,hLe),e=typeof n=="number"?n:parseFloat(n);return Math.round(e*t)/t}function bLe(n,t,e){return n<=t?Fs(t):n>=e?Fs(e):Fs(n)}function wLe(n,t){return Array(n).fill(t)}function cv(n){return n.map(t=>typeof t=="number"?t:parseFloat(t)).filter(t=>!Number.isNaN(t)).reduce((t,e)=>t+e,0)}function UP(n){const t=n.map(r=>r==="auto"?r:parseFloat(r.replace("%","")));let e=yLe(t);const i=cv(e);return i!==100&&(e=e.map(r=>Fs(r*100/i)).map((r,s,o)=>{if(!(s===o.length-1))return r;const l=cv(o);return Fs(r+100-l)})),e.map(r=>r+"%")}function yLe(n){const t=n.filter(r=>r==="auto").length;if(t===0)return n.map(r=>Fs(r));const e=cv(n),i=Math.max((100-e)/t,fLe);return n.map(r=>r==="auto"?i:r).map(r=>Fs(r))}function _Le(n){const t=at.window.getComputedStyle(n);return t.boxSizing==="border-box"?parseInt(t.width):parseFloat(t.width)+parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)+parseFloat(t.borderWidth)}function YH(n,t,e,i){for(let r=0;r<Math.max(e.length,n.length);r++){const s=n[r],o=e[r];o?s?i.setAttribute("columnWidth",o,s):i.appendElement("tableColumn",{columnWidth:o},t):i.remove(s)}}function Lv(n){if(n.is("element","tableColumnGroup"))return n;const t=n.getChildren();return Array.from(t).find(e=>e.is("element","tableColumnGroup"))}function Mv(n){const t=Lv(n);return t?Array.from(t.getChildren()):[]}function kLe(n){return Mv(n).map(t=>t.getAttribute("columnWidth"))}function ELe(n,t){return Mv(n).reduce((i,r)=>{const s=r.getAttribute("columnWidth"),o=r.getAttribute("colSpan");if(!o)return i.push(s),i;for(let a=0;a<o;a++)i.push(s);return t.removeAttribute("colSpan",r),i},[])}class Ar extends Ne{static get pluginName(){return"TableUtils"}static get isOfficialPlugin(){return!0}init(){this.decorate("insertColumns"),this.decorate("insertRows")}getCellLocation(t){const e=t.parent,i=e.parent,r=i.getChildIndex(e),s=new ni(i,{row:r});for(const{cell:o,row:a,column:l}of s)if(o===t)return{row:a,column:l};/* istanbul ignore next -- @preserve */}createTable(t,e){const i=t.createElement("table"),r=e.rows||2,s=e.columns||2;return EE(t,i,0,r,s),e.headingRows&&Wi("headingRows",Math.min(e.headingRows,r),i,t,0),e.headingColumns&&Wi("headingColumns",Math.min(e.headingColumns,s),i,t,0),i}insertRows(t,e={}){const i=this.editor.model,r=e.at||0,s=e.rows||1,o=e.copyStructureFromAbove!==void 0,a=e.copyStructureFromAbove?r-1:r,l=this.getRows(t),c=this.getColumns(t);if(r>l)throw new we("tableutils-insertrows-insert-out-of-range",this,{options:e});i.change(u=>{const d=t.getAttribute("headingRows")||0;if(d>r&&Wi("headingRows",d+s,t,u,0),!o&&(r===0||r===l)){EE(u,t,r,s,c);return}const f=o?Math.max(r,a):r,h=new ni(t,{endRow:f}),g=new Array(c).fill(1);for(const{row:v,column:_,cellHeight:w,cellWidth:C,cell:k}of h){const E=v+w-1,A=v<r&&r<=E,x=v<=a&&a<=E;A?(u.setAttribute("rowspan",w+s,k),g[_]=-C):o&&x&&(g[_]=C)}for(let v=0;v<s;v++){const _=u.createElement("tableRow");u.insert(_,t,r);for(let w=0;w<g.length;w++){const C=g[w],k=u.createPositionAt(_,"end");C>0&&rf(u,k,C>1?{colspan:C}:void 0),w+=Math.abs(C)-1}}})}insertColumns(t,e={}){const i=this.editor.model,r=e.at||0,s=e.columns||1;i.change(o=>{const a=t.getAttribute("headingColumns");r<a&&o.setAttribute("headingColumns",a+s,t);const l=this.getColumns(t);if(r===0||l===r){for(const u of t.getChildren())u.is("element","tableRow")&&Qf(s,o,o.createPositionAt(u,r?"end":0));return}const c=new ni(t,{column:r,includeAllSlots:!0});for(const u of c){const{row:d,cell:f,cellAnchorColumn:h,cellAnchorRow:g,cellWidth:v,cellHeight:_}=u;if(h<r){o.setAttribute("colspan",v+s,f);const w=g+_-1;for(let C=d;C<=w;C++)c.skipRow(C)}else Qf(s,o,u.getPositionBefore())}})}removeRows(t,e){const i=this.editor.model,r=e.rows||1,s=this.getRows(t),o=e.at,a=o+r-1;if(a>s-1)throw new we("tableutils-removerows-row-index-out-of-range",this,{table:t,options:e});i.change(l=>{const c={first:o,last:a},{cellsToMove:u,cellsToTrim:d}=SLe(t,c);if(u.size){const f=a+1;ALe(t,f,u,l)}for(let f=a;f>=o;f--)l.remove(t.getChild(f));for(const{rowspan:f,cell:h}of d)Wi("rowspan",f,h,l);TLe(t,c,l),oS(t,this)||aS(t,this)})}removeColumns(t,e){const i=this.editor.model,r=e.at,s=e.columns||1,o=e.at+s-1;i.change(a=>{CLe(t,{first:r,last:o},a);const l=Mv(t);for(let c=o;c>=r;c--){for(const{cell:u,column:d,cellWidth:f}of[...new ni(t)])d<=c&&f>1&&d+f>c?Wi("colspan",f-1,u,a):d===c&&a.remove(u);if(l[c]){const u=c===0?l[1]:l[c-1],d=parseFloat(l[c].getAttribute("columnWidth")),f=parseFloat(u.getAttribute("columnWidth"));a.remove(l[c]),a.setAttribute("columnWidth",d+f+"%",u)}}aS(t,this)||oS(t,this)})}splitCellVertically(t,e=2){const i=this.editor.model,s=t.parent.parent,o=parseInt(t.getAttribute("rowspan")||"1"),a=parseInt(t.getAttribute("colspan")||"1");i.change(l=>{if(a>1){const{newCellsSpan:c,updatedSpan:u}=VM(a,e);Wi("colspan",u,t,l);const d={};c>1&&(d.colspan=c),o>1&&(d.rowspan=o);const f=a>e?e-1:a-1;Qf(f,l,l.createPositionAfter(t),d)}if(a<e){const c=e-a,u=[...new ni(s)],{column:d}=u.find(({cell:v})=>v===t),f=u.filter(({cell:v,cellWidth:_,column:w})=>{const C=v!==t&&w===d,k=w<d&&w+_>d;return C||k});for(const{cell:v,cellWidth:_}of f)l.setAttribute("colspan",_+c,v);const h={};o>1&&(h.rowspan=o),Qf(c,l,l.createPositionAfter(t),h);const g=s.getAttribute("headingColumns")||0;g>d&&Wi("headingColumns",g+c,s,l)}})}splitCellHorizontally(t,e=2){const i=this.editor.model,r=t.parent,s=r.parent,o=s.getChildIndex(r),a=parseInt(t.getAttribute("rowspan")||"1"),l=parseInt(t.getAttribute("colspan")||"1");i.change(c=>{if(a>1){const u=[...new ni(s,{startRow:o,endRow:o+a-1,includeAllSlots:!0})],{newCellsSpan:d,updatedSpan:f}=VM(a,e);Wi("rowspan",f,t,c);const{column:h}=u.find(({cell:_})=>_===t),g={};d>1&&(g.rowspan=d),l>1&&(g.colspan=l);let v=0;for(const _ of u){const{column:w,row:C}=_,k=C>=o+f,E=w===h;v>=d&&E&&(v=0),k&&E&&(v||Qf(1,c,_.getPositionBefore(),g),v++)}}if(a<e){const u=e-a,d=[...new ni(s,{startRow:0,endRow:o})];for(const{cell:g,cellHeight:v,row:_}of d)if(g!==t&&_+v>o){const w=v+u;c.setAttribute("rowspan",w,g)}const f={};l>1&&(f.colspan=l),EE(c,s,o+1,u,1,f);const h=s.getAttribute("headingRows")||0;h>o&&Wi("headingRows",h+u,s,c)}})}getColumns(t){return[...t.getChild(0).getChildren()].filter(i=>i.is("element","tableCell")).reduce((i,r)=>{const s=parseInt(r.getAttribute("colspan")||"1");return i+s},0)}getRows(t){return Array.from(t.getChildren()).reduce((e,i)=>i.is("element","tableRow")?e+1:e,0)}createTableWalker(t,e={}){return new ni(t,e)}getSelectedTableCells(t){const e=[];for(const i of this.sortRanges(t.getRanges())){const r=i.getContainedElement();r&&r.is("element","tableCell")&&e.push(r)}return e}getTableCellsContainingSelection(t){const e=[];for(const i of t.getRanges()){const r=i.start.findAncestor("tableCell");r&&e.push(r)}return e}getSelectionAffectedTableCells(t){const e=this.getSelectedTableCells(t);return e.length?e:this.getTableCellsContainingSelection(t)}getRowIndexes(t){const e=t.map(i=>i.parent.index);return this._getFirstLastIndexesObject(e)}getColumnIndexes(t){const e=t[0].findAncestor("table"),r=[...new ni(e)].filter(s=>t.includes(s.cell)).map(s=>s.column);return this._getFirstLastIndexesObject(r)}isSelectionRectangular(t){if(t.length<2||!this._areCellInTheSameTableSection(t))return!1;const e=new Set,i=new Set;let r=0;for(const o of t){const{row:a,column:l}=this.getCellLocation(o),c=parseInt(o.getAttribute("rowspan"))||1,u=parseInt(o.getAttribute("colspan"))||1;e.add(a),i.add(l),c>1&&e.add(a+c-1),u>1&&i.add(l+u-1),r+=c*u}return PLe(e,i)==r}sortRanges(t){return Array.from(t).sort(ILe)}_getFirstLastIndexesObject(t){const e=t.sort((s,o)=>s-o),i=e[0],r=e[e.length-1];return{first:i,last:r}}_areCellInTheSameTableSection(t){const e=t[0].findAncestor("table"),i=this.getRowIndexes(t),r=parseInt(e.getAttribute("headingRows"))||0;if(!this._areIndexesInSameSection(i,r))return!1;const s=this.getColumnIndexes(t),o=parseInt(e.getAttribute("headingColumns"))||0;return this._areIndexesInSameSection(s,o)}_areIndexesInSameSection({first:t,last:e},i){const r=t<i,s=e<i;return r===s}}function EE(n,t,e,i,r,s={}){for(let o=0;o<i;o++){const a=n.createElement("tableRow");n.insert(a,t,e),Qf(r,n,n.createPositionAt(a,"end"),s)}}function Qf(n,t,e,i={}){for(let r=0;r<n;r++)rf(t,e,i)}function VM(n,t){if(n<t)return{newCellsSpan:1,updatedSpan:1};const e=Math.floor(n/t),i=n-e*t+e;return{newCellsSpan:e,updatedSpan:i}}function CLe(n,t,e){const i=n.getAttribute("headingColumns")||0;if(i&&t.first<i){const r=Math.min(i-1,t.last)-t.first+1;e.setAttribute("headingColumns",i-r,n)}}function TLe(n,{first:t,last:e},i){const r=n.getAttribute("headingRows")||0;if(t<r){const s=e<r?r-(e-t+1):t;Wi("headingRows",s,n,i,0)}}function SLe(n,{first:t,last:e}){const i=new Map,r=[];for(const{row:s,column:o,cellHeight:a,cell:l}of new ni(n,{endRow:e})){const c=s+a-1;if(s>=t&&s<=e&&c>e){const f=e-s+1,h=a-f;i.set(o,{cell:l,rowspan:h})}if(s<t&&c>=t){let f;c>=e?f=e-t+1:f=c-t+1,r.push({cell:l,rowspan:a-f})}}return{cellsToMove:i,cellsToTrim:r}}function ALe(n,t,e,i){const s=[...new ni(n,{includeAllSlots:!0,row:t})],o=n.getChild(t);let a;for(const{column:l,cell:c,isAnchor:u}of s)if(e.has(l)){const{cell:d,rowspan:f}=e.get(l),h=a?i.createPositionAfter(a):i.createPositionAt(o,0);i.move(i.createRangeOn(d),h),Wi("rowspan",f,d,i),a=d}else u&&(a=c)}function ILe(n,t){const e=n.start,i=t.start;return e.isBefore(i)?-1:1}function PLe(n,t){const e=Array.from(n.values()),i=Array.from(t.values()),r=Math.max(...e),s=Math.min(...e),o=Math.max(...i),a=Math.min(...i);return(r-s+1)*(o-a+1)}class xLe extends Nt{refresh(){const t=this.editor.plugins.get(Ar),e=t.getSelectedTableCells(this.editor.model.document.selection);this.isEnabled=t.isSelectionRectangular(e)}execute(){const t=this.editor.model,e=this.editor.plugins.get(Ar);t.change(i=>{const r=e.getSelectedTableCells(t.document.selection),s=r.shift(),{mergeWidth:o,mergeHeight:a}=RLe(s,r,e);Wi("colspan",o,s,i),Wi("rowspan",a,s,i);for(const c of r)OLe(c,s,i);const l=s.findAncestor("table");FP(l,e),i.setSelection(s,"in")})}}function OLe(n,t,e){DM(n)||(DM(t)&&e.remove(e.createRangeIn(t)),e.move(e.createRangeIn(n),e.createPositionAt(t,"end"))),e.remove(n)}function DM(n){const t=n.getChild(0);return n.childCount==1&&t.is("element","paragraph")&&t.isEmpty}function RLe(n,t,e){let i=0,r=0;for(const c of t){const{row:u,column:d}=e.getCellLocation(c);i=NM(c,d,i,"colspan"),r=NM(c,u,r,"rowspan")}const{row:s,column:o}=e.getCellLocation(n),a=i-o,l=r-s;return{mergeWidth:a,mergeHeight:l}}function NM(n,t,e,i){const r=parseInt(n.getAttribute(i)||"1");return Math.max(e,t+r)}class VLe extends Nt{constructor(t){super(t),this.affectsData=!1}refresh(){const e=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=e.length>0}execute(){const t=this.editor.model,e=this.editor.plugins.get("TableUtils"),i=e.getSelectionAffectedTableCells(t.document.selection),r=e.getRowIndexes(i),s=i[0].findAncestor("table"),o=[];for(let a=r.first;a<=r.last;a++)for(const l of s.getChild(a).getChildren())o.push(t.createRangeOn(l));t.change(a=>{a.setSelection(o)})}}class DLe extends Nt{constructor(t){super(t),this.affectsData=!1}refresh(){const e=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=e.length>0}execute(){const t=this.editor.plugins.get("TableUtils"),e=this.editor.model,i=t.getSelectionAffectedTableCells(e.document.selection),r=i[0],s=i.pop(),o=r.findAncestor("table"),a=t.getCellLocation(r),l=t.getCellLocation(s),c=Math.min(a.column,l.column),u=Math.max(a.column,l.column),d=[];for(const f of new ni(o,{startColumn:c,endColumn:u}))d.push(e.createRangeOn(f.cell));e.change(f=>{f.setSelection(d)})}}function NLe(n){n.document.registerPostFixer(t=>LLe(t,n))}function LLe(n,t){const e=t.document.differ.getChanges();let i=!1;const r=new Set;for(const s of e){let o=null;s.type=="insert"&&s.name=="table"&&(o=s.position.nodeAfter),(s.type=="insert"||s.type=="remove")&&(s.name=="tableRow"||s.name=="tableCell")&&(o=s.position.findAncestor("table")),ULe(s)&&(o=s.range.start.findAncestor("table")),o&&!r.has(o)&&(i=MLe(o,n)||i,i=$Le(o,n)||i,r.add(o))}return i}function MLe(n,t){let e=!1;const i=BLe(n);if(i.length){e=!0;for(const r of i)Wi("rowspan",r.rowspan,r.cell,t,1)}return e}function $Le(n,t){let e=!1;const i=FLe(n),r=[];for(const[l,c]of i.entries())!c&&n.getChild(l).is("element","tableRow")&&r.push(l);if(r.length){e=!0;for(const l of r.reverse())t.remove(n.getChild(l)),i.splice(l,1)}const s=i.filter((l,c)=>n.getChild(c).is("element","tableRow")),o=s[0];if(!s.every(l=>l===o)){const l=s.reduce((c,u)=>u>c?u:c,0);for(const[c,u]of s.entries()){const d=l-u;if(d){for(let f=0;f<d;f++)rf(t,t.createPositionAt(n.getChild(c),"end"));e=!0}}}return e}function BLe(n){const t=parseInt(n.getAttribute("headingRows")||"0"),e=Array.from(n.getChildren()).reduce((r,s)=>s.is("element","tableRow")?r+1:r,0),i=[];for(const{row:r,cell:s,cellHeight:o}of new ni(n)){if(o<2)continue;const l=r<t?t:e;if(r+o>l){const c=l-r;i.push({cell:s,rowspan:c})}}return i}function FLe(n){const t=new Array(n.childCount).fill(0);for(const{rowIndex:e}of new ni(n,{includeAllSlots:!0}))t[e]++;return t}function ULe(n){if(n.type!=="attribute")return!1;const t=n.attributeKey;return t==="headingRows"||t==="colspan"||t==="rowspan"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function zLe(n){n.document.registerPostFixer(t=>HLe(t,n))}function HLe(n,t){const e=t.document.differ.getChanges();let i=!1;for(const r of e)r.type=="insert"&&r.name=="table"&&(i=WLe(r.position.nodeAfter,n)||i),r.type=="insert"&&r.name=="tableRow"&&(i=QH(r.position.nodeAfter,n)||i),r.type=="insert"&&r.name=="tableCell"&&(i=uS(r.position.nodeAfter,n)||i),(r.type=="remove"||r.type=="insert")&&jLe(r)&&(i=uS(r.position.parent,n)||i);return i}function WLe(n,t){let e=!1;for(const i of n.getChildren())i.is("element","tableRow")&&(e=QH(i,t)||e);return e}function QH(n,t){let e=!1;for(const i of n.getChildren())e=uS(i,t)||e;return e}function uS(n,t){if(n.childCount==0)return t.insertElement("paragraph",n),!0;const e=Array.from(n.getChildren()).filter(i=>i.is("$text"));for(const i of e)t.wrap(t.createRangeOn(i),"paragraph");return!!e.length}function jLe(n){return n.position.parent.is("element","tableCell")?n.type=="insert"&&n.name=="$text"||n.type=="remove":!1}function qLe(n,t){const e=n.document.differ;for(const i of e.getChanges()){let r,s=!1;if(i.type=="attribute"){const c=i.range.start.nodeAfter;if(!c||!c.is("element","table")||i.attributeKey!="headingRows"&&i.attributeKey!="headingColumns")continue;r=c,s=i.attributeKey=="headingRows"}else(i.name=="tableRow"||i.name=="tableCell")&&(r=i.position.findAncestor("table"),s=i.name=="tableRow");if(!r)continue;const o=r.getAttribute("headingRows")||0,a=r.getAttribute("headingColumns")||0,l=new ni(r);for(const c of l){const d=c.row<o||c.column<a?"th":"td",f=t.mapper.toViewElement(c.cell);f&&f.is("element")&&f.name!=d&&t.reconvertItem(s?c.cell.parent:c.cell)}}}function GLe(n,t){const e=n.document.differ,i=new Set;for(const r of e.getChanges()){const s=r.type=="attribute"?r.range.start.parent:r.position.parent;s.is("element","tableCell")&&i.add(s)}for(const r of i.values()){const s=Array.from(r.getChildren()).filter(o=>KLe(o,t.mapper));for(const o of s)t.reconvertItem(o)}}function KLe(n,t){if(!n.is("element","paragraph"))return!1;const e=t.toViewElement(n);return e?BH(n)!==e.is("element","span"):!1}class $v extends Ne{constructor(e){super(e);y(this,"_additionalSlots");this._additionalSlots=[]}static get pluginName(){return"TableEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Ar]}init(){const e=this.editor,i=e.model,r=i.schema,s=e.conversion,o=e.plugins.get(Ar);r.register("table",{inheritAllFrom:"$blockObject",allowAttributes:["headingRows","headingColumns"]}),r.register("tableRow",{allowIn:"table",isLimit:!0}),r.register("tableCell",{allowContentOf:"$container",allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),s.for("upcast").add(HNe()),s.for("upcast").add(WNe()),s.for("editingDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:TM(o,{asWidget:!0,additionalSlots:this._additionalSlots})}),s.for("dataDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:TM(o,{additionalSlots:this._additionalSlots})}),s.for("upcast").elementToElement({model:"tableRow",view:"tr"}),s.for("upcast").add(jNe()),s.for("downcast").elementToElement({model:"tableRow",view:QNe()}),s.for("upcast").elementToElement({model:"tableCell",view:"td"}),s.for("upcast").elementToElement({model:"tableCell",view:"th"}),s.for("upcast").add(CM("td")),s.for("upcast").add(CM("th")),s.for("editingDowncast").elementToElement({model:"tableCell",view:SM({asWidget:!0})}),s.for("dataDowncast").elementToElement({model:"tableCell",view:SM()}),s.for("editingDowncast").elementToElement({model:"paragraph",view:AM({asWidget:!0}),converterPriority:"high"}),s.for("dataDowncast").elementToElement({model:"paragraph",view:AM(),converterPriority:"high"}),s.for("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),s.for("upcast").attributeToAttribute({model:{key:"colspan",value:LM("colspan")},view:"colspan"}),s.for("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),s.for("upcast").attributeToAttribute({model:{key:"rowspan",value:LM("rowspan")},view:"rowspan"}),e.config.define("table.defaultHeadings.rows",0),e.config.define("table.defaultHeadings.columns",0),e.commands.add("insertTable",new XNe(e)),e.commands.add("insertTableRowAbove",new IM(e,{order:"above"})),e.commands.add("insertTableRowBelow",new IM(e,{order:"below"})),e.commands.add("insertTableColumnLeft",new PM(e,{order:"left"})),e.commands.add("insertTableColumnRight",new PM(e,{order:"right"})),e.commands.add("removeTableRow",new sLe(e)),e.commands.add("removeTableColumn",new aLe(e)),e.commands.add("splitTableCellVertically",new xM(e,{direction:"vertically"})),e.commands.add("splitTableCellHorizontally",new xM(e,{direction:"horizontally"})),e.commands.add("mergeTableCells",new xLe(e)),e.commands.add("mergeTableCellRight",new Wb(e,{direction:"right"})),e.commands.add("mergeTableCellLeft",new Wb(e,{direction:"left"})),e.commands.add("mergeTableCellDown",new Wb(e,{direction:"down"})),e.commands.add("mergeTableCellUp",new Wb(e,{direction:"up"})),e.commands.add("setTableColumnHeader",new dLe(e)),e.commands.add("setTableRowHeader",new uLe(e)),e.commands.add("selectTableRow",new VLe(e)),e.commands.add("selectTableColumn",new DLe(e)),NLe(i),zLe(i),this.listenTo(i.document,"change:data",()=>{qLe(i,e.editing),GLe(i,e.editing)})}registerAdditionalSlot(e){this._additionalSlots.push(e)}}function LM(n){return t=>{const e=parseInt(t.getAttribute(n));return Number.isNaN(e)||e<=0?null:e}}class MM extends dt{constructor(e){super(e);y(this,"items");y(this,"keystrokes");y(this,"focusTracker");const i=this.bindTemplate;this.items=this._createGridCollection(),this.keystrokes=new oi,this.focusTracker=new Mn,this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",(r,s)=>`${s} × ${r}`),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":i.to("boxover")},children:this.items},{tag:"div",attributes:{class:["ck","ck-insert-table-dropdown__label"],"aria-hidden":!0},children:[{text:i.to("label")}]}],on:{mousedown:i.to(r=>{r.preventDefault()}),click:i.to(()=>{this.fire("execute")})}}),this.on("boxover",(r,s)=>{const{row:o,column:a}=s.target.dataset;this.items.get((parseInt(o,10)-1)*10+(parseInt(a,10)-1)).focus()}),this.focusTracker.on("change:focusedElement",(r,s,o)=>{if(!o)return;const{row:a,column:l}=o.dataset;this.set({rows:parseInt(a),columns:parseInt(l)})}),this.on("change:columns",()=>this._highlightGridBoxes()),this.on("change:rows",()=>this._highlightGridBoxes())}render(){super.render(),xv({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:10,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection});for(const e of this.items)this.focusTracker.add(e.element);this.keystrokes.listenTo(this.element)}reset(){this.set({rows:1,columns:1})}focus(){this.items.get(0).focus()}focusLast(){this.items.get(0).focus()}_highlightGridBoxes(){const e=this.rows,i=this.columns;this.items.map((r,s)=>{const o=Math.floor(s/10),a=s%10,l=o<e&&a<i;r.set("isOn",l)})}_createGridButton(e,i,r,s){const o=new wt(e);return o.set({label:s,class:"ck-insert-table-dropdown-grid-box"}),o.extendTemplate({attributes:{"data-row":i,"data-column":r}}),o}_createGridCollection(){const e=[];for(let i=0;i<100;i++){const r=Math.floor(i/10),s=i%10,o=`${r+1} × ${s+1}`;e.push(this._createGridButton(this.locale,r+1,s+1,o))}return this.createCollection(e)}}class YLe extends Ne{static get pluginName(){return"TableUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t,r=t.locale.contentLanguageDirection==="ltr";t.ui.componentFactory.add("insertTable",s=>{const o=t.commands.get("insertTable"),a=as(s);a.bind("isEnabled").to(o),a.buttonView.set({icon:pN,label:e("Insert table"),tooltip:!0});let l;return a.on("change:isOpen",()=>{l||(l=new MM(s),a.panelView.children.add(l),l.delegate("execute").to(a),a.on("execute",()=>{t.execute("insertTable",{rows:l.rows,columns:l.columns}),t.editing.view.focus()}))}),a}),t.ui.componentFactory.add("menuBar:insertTable",s=>{const o=t.commands.get("insertTable"),a=new ma(s),l=new MM(s);return l.delegate("execute").to(a),a.on("change:isOpen",(c,u,d)=>{d||l.reset()}),l.on("execute",()=>{t.execute("insertTable",{rows:l.rows,columns:l.columns}),t.editing.view.focus()}),a.buttonView.set({label:e("Table"),icon:pN}),a.panelView.children.add(l),a.bind("isEnabled").to(o),a}),t.ui.componentFactory.add("tableColumn",s=>{const o=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:e("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:r?"insertTableColumnLeft":"insertTableColumnRight",label:e("Insert column left")}},{type:"button",model:{commandName:r?"insertTableColumnRight":"insertTableColumnLeft",label:e("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:e("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:e("Select column")}}];return this._prepareDropdown(e("Column"),MTe,o,s)}),t.ui.componentFactory.add("tableRow",s=>{const o=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:e("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:e("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:e("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:e("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:e("Select row")}}];return this._prepareDropdown(e("Row"),FTe,o,s)}),t.ui.componentFactory.add("mergeTableCells",s=>{const o=[{type:"button",model:{commandName:"mergeTableCellUp",label:e("Merge cell up")}},{type:"button",model:{commandName:r?"mergeTableCellRight":"mergeTableCellLeft",label:e("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:e("Merge cell down")}},{type:"button",model:{commandName:r?"mergeTableCellLeft":"mergeTableCellRight",label:e("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:e("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:e("Split cell horizontally")}}];return this._prepareMergeSplitButtonDropdown(e("Merge cells"),$Te,o,s)})}_prepareDropdown(t,e,i,r){const s=this.editor,o=as(r),a=this._fillDropdownWithListOptions(o,i);return o.buttonView.set({label:t,icon:e,tooltip:!0}),o.bind("isEnabled").toMany(a,"isEnabled",(...l)=>l.some(c=>c)),this.listenTo(o,"execute",l=>{s.execute(l.source.commandName),l.source instanceof Md||s.editing.view.focus()}),o}_prepareMergeSplitButtonDropdown(t,e,i,r){const s=this.editor,o=as(r,Lm),a="mergeTableCells",l=s.commands.get(a),c=this._fillDropdownWithListOptions(o,i);return o.buttonView.set({label:t,icon:e,tooltip:!0,isEnabled:!0}),o.bind("isEnabled").toMany([l,...c],"isEnabled",(...u)=>u.some(d=>d)),this.listenTo(o.buttonView,"execute",()=>{s.execute(a),s.editing.view.focus()}),this.listenTo(o,"execute",u=>{s.execute(u.source.commandName),s.editing.view.focus()}),o}_fillDropdownWithListOptions(t,e){const i=this.editor,r=[],s=new cr;for(const o of e)QLe(o,i,r,s);return ef(t,s),r}}function QLe(n,t,e,i){if(n.type==="button"||n.type==="switchbutton"){const r=n.model=new $d(n.model),{commandName:s,bindIsOn:o}=n.model,a=t.commands.get(s);e.push(a),r.set({commandName:s}),r.bind("isEnabled").to(a),o&&r.bind("isOn").to(a,"value"),r.set({withText:!0})}i.add(n)}class eu extends Ne{static get pluginName(){return"TableSelection"}static get isOfficialPlugin(){return!0}static get requires(){return[Ar,Ar]}init(){const t=this.editor,e=t.model,i=t.editing.view;this.listenTo(e,"deleteContent",(r,s)=>this._handleDeleteContent(r,s),{priority:"high"}),this.listenTo(i.document,"insertText",(r,s)=>this._handleInsertTextEvent(r,s),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}getSelectedTableCells(){const t=this.editor.plugins.get(Ar),e=this.editor.model.document.selection,i=t.getSelectedTableCells(e);return i.length==0?null:i}getSelectionAsFragment(){const t=this.editor.plugins.get(Ar),e=this.getSelectedTableCells();return e?this.editor.model.change(i=>{const r=i.createDocumentFragment(),{first:s,last:o}=t.getColumnIndexes(e),{first:a,last:l}=t.getRowIndexes(e),c=e[0].findAncestor("table");let u=l,d=o;if(t.isSelectionRectangular(e)){const g={firstColumn:s,lastColumn:o,firstRow:a,lastRow:l};u=qH(c,g),d=GH(c,g)}const h=FH(c,{startRow:a,startColumn:s,endRow:u,endColumn:d},i);return i.insert(h,r,0),r}):null}setCellSelection(t,e){const i=this._getCellsToSelect(t,e);this.editor.model.change(r=>{r.setSelection(i.cells.map(s=>r.createRangeOn(s)),{backward:i.backward})})}getFocusCell(){const i=[...this.editor.model.document.selection.getRanges()].pop().getContainedElement();return i&&i.is("element","tableCell")?i:null}getAnchorCell(){const t=this.editor.model.document.selection,i=gi(t.getRanges()).getContainedElement();return i&&i.is("element","tableCell")?i:null}_defineSelectionConverter(){const t=this.editor,e=new Set;t.conversion.for("editingDowncast").add(r=>r.on("selection",(s,o,a)=>{const l=a.writer;i(l);const c=this.getSelectedTableCells();if(!c)return;for(const d of c){const f=a.mapper.toViewElement(d);l.addClass("ck-editor__editable_selected",f),e.add(f)}const u=a.mapper.toViewElement(c[c.length-1]);l.setSelection(u,0)},{priority:"lowest"}));function i(r){for(const s of e)r.removeClass("ck-editor__editable_selected",s);e.clear()}}_enablePluginDisabling(){const t=this.editor;this.on("change:isEnabled",()=>{if(!this.isEnabled){const e=this.getSelectedTableCells();if(!e)return;t.model.change(i=>{const r=i.createPositionAt(e[0],0),s=t.model.schema.getNearestSelectionRange(r);i.setSelection(s)})}})}_handleDeleteContent(t,e){const i=this.editor.plugins.get(Ar),r=e[0],s=e[1],o=this.editor.model,a=!s||s.direction=="backward",l=i.getSelectedTableCells(r);l.length&&(t.stop(),o.change(c=>{const u=l[a?l.length-1:0];o.change(f=>{for(const h of l)o.deleteContent(f.createSelection(h,"in"))});const d=o.schema.getNearestSelectionRange(c.createPositionAt(u,0));r.is("documentSelection")?c.setSelection(d):r.setTo(d)}))}_handleInsertTextEvent(t,e){const i=this.editor,r=this.getSelectedTableCells();if(!r)return;const s=i.editing.view,o=i.editing.mapper,a=r.map(l=>s.createRangeOn(o.toViewElement(l)));e.selection=s.createSelection(a),e.preventDefault()}_getCellsToSelect(t,e){const i=this.editor.plugins.get("TableUtils"),r=i.getCellLocation(t),s=i.getCellLocation(e),o=Math.min(r.row,s.row),a=Math.max(r.row,s.row),l=Math.min(r.column,s.column),c=parseInt(e.getAttribute("colspan")||"1")-1,u=Math.max(r.column,s.column+c),d=new Array(a-o+1).fill(null).map(()=>[]),f={startRow:o,endRow:a,startColumn:l,endColumn:u};for(const{row:v,cell:_}of new ni(t.findAncestor("table"),f))d[v-o].push(_);const h=s.row<r.row,g=s.column<r.column;return h&&d.reverse(),g&&d.forEach(v=>v.reverse()),{cells:d.flat(),backward:h||g}}}class ZLe extends Ne{static get pluginName(){return"TableClipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[gp,Qs,eu,Ar]}init(){const e=this.editor.editing.view.document;this.listenTo(e,"copy",(i,r)=>this._onCopyCut(i,r)),this.listenTo(e,"cut",(i,r)=>this._onCopyCut(i,r)),this._listenToContentInsertion(),this.decorate("_replaceTableSlotCell")}_listenToContentInsertion(){const{editor:t}=this,e=t.plugins.get(Qs),i=t.plugins.get(eu);let r=!1;e.on("contentInsertion",(s,o)=>{r=o.method==="paste"}),this.listenTo(t.model,"insertContent",(s,[o,a])=>{(r||i.getSelectedTableCells()!==null)&&this._onInsertContent(s,o,a)},{priority:"high"}),e.on("contentInsertion",()=>{r=!1},{priority:"lowest"})}_onCopyCut(t,e){const i=this.editor.editing.view,r=this.editor.plugins.get(eu),s=this.editor.plugins.get(gp);r.getSelectedTableCells()&&(t.name=="cut"&&!this.editor.model.canEditAt(this.editor.model.document.selection)||(e.preventDefault(),t.stop(),this.editor.model.enqueueChange({isUndoable:t.name==="cut"},()=>{const o=s._copySelectedFragmentWithMarkers(t.name,this.editor.model.document.selection,()=>r.getSelectionAsFragment());i.document.fire("clipboardOutput",{dataTransfer:e.dataTransfer,content:this.editor.data.toView(o),method:t.name})})))}_onInsertContent(t,e,i){if(i&&!i.is("documentSelection"))return;const r=this.editor.model,s=this.editor.plugins.get(Ar),o=this.editor.plugins.get(gp),a=this.getTableIfOnlyTableInContent(e,r);if(!a)return;const l=s.getSelectionAffectedTableCells(r.document.selection);if(!l.length){FP(a,s);return}t.stop(),e.is("documentFragment")?o._pasteMarkersIntoTransformedElement(e.markers,c=>this._replaceSelectedCells(a,l,c)):this.editor.model.change(c=>{this._replaceSelectedCells(a,l,c)})}_replaceSelectedCells(t,e,i){const r=this.editor.plugins.get(Ar),s={width:r.getColumns(t),height:r.getRows(t)},o=JLe(e,s,i,r),a=o.lastRow-o.firstRow+1,l=o.lastColumn-o.firstColumn+1,c={startRow:0,startColumn:0,endRow:Math.min(a,s.height)-1,endColumn:Math.min(l,s.width)-1};t=FH(t,c,i);const u=e[0].findAncestor("table"),d=this._replaceSelectedCellsWithPasted(t,s,u,o,i);if(this.editor.plugins.get("TableSelection").isEnabled){const f=r.sortRanges(d.map(h=>i.createRangeOn(h)));i.setSelection(f)}else i.setSelection(d[0],0);return u}_replaceSelectedCellsWithPasted(t,e,i,r,s){const{width:o,height:a}=e,l=eMe(t,o,a),c=[...new ni(i,{startRow:r.firstRow,endRow:r.lastRow,startColumn:r.firstColumn,endColumn:r.lastColumn,includeAllSlots:!0})],u=[];let d;for(const _ of c){const{row:w,column:C}=_;C===r.firstColumn&&(d=_.getPositionBefore());const k=w-r.firstRow,E=C-r.firstColumn,A=l[k%a][E%o],x=A?s.cloneElement(A):null,p=this._replaceTableSlotCell(_,x,d,s);p&&(jH(p,w,C,r.lastRow,r.lastColumn,s),u.push(p),d=s.createPositionAfter(p))}const f=parseInt(i.getAttribute("headingRows")||"0"),h=parseInt(i.getAttribute("headingColumns")||"0"),g=r.firstRow<f&&f<=r.lastRow,v=r.firstColumn<h&&h<=r.lastColumn;if(g){const _={first:r.firstColumn,last:r.lastColumn},w=dS(i,f,_,s,r.firstRow);u.push(...w)}if(v){const _={first:r.firstRow,last:r.lastRow},w=fS(i,h,_,s);u.push(...w)}return u}_replaceTableSlotCell(t,e,i,r){const{cell:s,isAnchor:o}=t;return o&&r.remove(s),e?(r.insert(e,i),e):null}getTableIfOnlyTableInContent(t,e){if(!t.is("documentFragment")&&!t.is("element"))return null;if(t.is("element","table"))return t;if(t.childCount==1&&t.getChild(0).is("element","table"))return t.getChild(0);const i=e.createRangeIn(t);for(const r of i.getItems())if(r.is("element","table")){const s=e.createRange(i.start,e.createPositionBefore(r));if(e.hasContent(s,{ignoreWhitespaces:!0}))return null;const o=e.createRange(e.createPositionAfter(r),i.end);return e.hasContent(o,{ignoreWhitespaces:!0})?null:r}return null}}function JLe(n,t,e,i){const r=n[0].findAncestor("table"),s=i.getColumnIndexes(n),o=i.getRowIndexes(n),a={firstColumn:s.first,lastColumn:s.last,firstRow:o.first,lastRow:o.last},l=n.length===1;return l&&(a.lastRow+=t.height-1,a.lastColumn+=t.width-1,XLe(r,a.lastRow+1,a.lastColumn+1,i)),l||!i.isSelectionRectangular(n)?tMe(r,a,e):(a.lastRow=qH(r,a),a.lastColumn=GH(r,a)),a}function XLe(n,t,e,i){const r=i.getColumns(n),s=i.getRows(n);e>r&&i.insertColumns(n,{at:r,columns:e-r}),t>s&&i.insertRows(n,{at:s,rows:t-s})}function eMe(n,t,e){const i=new Array(e).fill(null).map(()=>new Array(t).fill(null));for(const{column:r,row:s,cell:o}of new ni(n))i[s][r]=o;return i}function tMe(n,t,e){const{firstRow:i,lastRow:r,firstColumn:s,lastColumn:o}=t,a={first:i,last:r},l={first:s,last:o};fS(n,s,a,e),fS(n,o+1,a,e),dS(n,i,l,e),dS(n,r+1,l,e,i)}function dS(n,t,e,i,r=0){return t<1?void 0:UH(n,t,r).filter(({column:a,cellWidth:l})=>ZH(a,l,e)).map(({cell:a})=>zH(a,t,i))}function fS(n,t,e,i){return t<1?void 0:HH(n,t).filter(({row:o,cellHeight:a})=>ZH(o,a,e)).map(({cell:o,column:a})=>WH(o,a,t,i))}function ZH(n,t,e){const i=n+t-1,{first:r,last:s}=e,o=n>=r&&n<=s,a=n<r&&i>=r;return o||a}class nMe extends Ne{static get pluginName(){return"TableKeyboard"}static get isOfficialPlugin(){return!0}static get requires(){return[eu,Ar]}init(){const t=this.editor,i=t.editing.view.document,r=t.t;this.listenTo(i,"arrowKey",(...s)=>this._onArrowKey(...s),{context:"table"}),this.listenTo(i,"tab",(...s)=>this._handleTabOnSelectedTable(...s),{context:"figure"}),this.listenTo(i,"tab",(...s)=>this._handleTab(...s),{context:["th","td"]}),t.accessibility.addKeystrokeInfoGroup({id:"table",label:r("Keystrokes that can be used in a table cell"),keystrokes:[{label:r("Move the selection to the next cell"),keystroke:"Tab"},{label:r("Move the selection to the previous cell"),keystroke:"Shift+Tab"},{label:r("Insert a new table row (when in the last cell of a table)"),keystroke:"Tab"},{label:r("Navigate through the table"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]}]})}_handleTabOnSelectedTable(t,e){const i=this.editor,s=i.model.document.selection.getSelectedElement();!s||!s.is("element","table")||(e.preventDefault(),e.stopPropagation(),t.stop(),i.model.change(o=>{o.setSelection(o.createRangeIn(s.getChild(0).getChild(0)))}))}_handleTab(t,e){const i=this.editor,r=this.editor.plugins.get(Ar),s=this.editor.plugins.get("TableSelection"),o=i.model.document.selection,a=!e.shiftKey;let l=r.getTableCellsContainingSelection(o)[0];if(l||(l=s.getFocusCell()),!l)return;e.preventDefault(),e.stopPropagation(),t.stop();const c=l.parent,u=c.parent,d=u.getChildIndex(c),f=c.getChildIndex(l),h=f===0;if(!a&&h&&d===0){i.model.change(w=>{w.setSelection(w.createRangeOn(u))});return}const g=f===c.childCount-1,v=d===r.getRows(u)-1;if(a&&v&&g&&(i.execute("insertTableRowBelow"),d===r.getRows(u)-1)){i.model.change(w=>{w.setSelection(w.createRangeOn(u))});return}let _;if(a&&g)_=u.getChild(d+1).getChild(0);else if(!a&&h){const w=u.getChild(d-1);_=w.getChild(w.childCount-1)}else _=c.getChild(f+(a?1:-1));i.model.change(w=>{w.setSelection(w.createRangeIn(_))})}_onArrowKey(t,e){const i=this.editor,r=e.keyCode,s=P0(r,i.locale.contentLanguageDirection);this._handleArrowKeys(s,e.shiftKey)&&(e.preventDefault(),e.stopPropagation(),t.stop())}_handleArrowKeys(t,e){const i=this.editor.plugins.get(Ar),r=this.editor.plugins.get("TableSelection"),s=this.editor.model,o=s.document.selection,a=["right","down"].includes(t),l=i.getSelectedTableCells(o);if(l.length){let u;return e?u=r.getFocusCell():u=a?l[l.length-1]:l[0],this._navigateFromCellInDirection(u,t,e),!0}const c=o.focus.findAncestor("tableCell");/* istanbul ignore if: paranoid check -- @preserve */if(!c)return!1;if(!o.isCollapsed)if(e){if(o.isBackward==a&&!o.containsEntireContent(c))return!1}else{const u=o.getSelectedElement();if(!u||!s.schema.isObject(u))return!1}return this._isSelectionAtCellEdge(o,c,a)?(this._navigateFromCellInDirection(c,t,e),!0):!1}_isSelectionAtCellEdge(t,e,i){const r=this.editor.model,s=this.editor.model.schema,o=i?t.getLastPosition():t.getFirstPosition();if(!s.getLimitElement(o).is("element","tableCell"))return r.createPositionAt(e,i?"end":0).isTouching(o);const a=r.createSelection(o);return r.modifySelection(a,{direction:i?"forward":"backward"}),o.isEqual(a.focus)}_navigateFromCellInDirection(t,e,i=!1){const r=this.editor.model,s=t.findAncestor("table"),o=[...new ni(s,{includeAllSlots:!0})],{row:a,column:l}=o[o.length-1],c=o.find(({cell:C})=>C==t);let{row:u,column:d}=c;switch(e){case"left":d--;break;case"up":u--;break;case"right":d+=c.cellWidth;break;case"down":u+=c.cellHeight;break}const f=u<0||u>a,h=d<0&&u<=0,g=d>l&&u>=a;if(f||h||g){r.change(C=>{C.setSelection(C.createRangeOn(s))});return}d<0?(d=i?0:l,u--):d>l&&(d=i?l:0,u++);const v=o.find(C=>C.row==u&&C.column==d).cell,_=["right","down"].includes(e),w=this.editor.plugins.get("TableSelection");if(i&&w.isEnabled){const C=w.getAnchorCell()||t;w.setCellSelection(C,v)}else{const C=r.createPositionAt(v,_?0:"end");r.change(k=>{k.setSelection(C)})}}}class JH extends vl{constructor(){super(...arguments);y(this,"domEventType",["mousemove","mouseleave"])}onDomEvent(e){this.fire(e.type,e)}}class iMe extends Ne{static get pluginName(){return"TableMouse"}static get isOfficialPlugin(){return!0}static get requires(){return[eu,Ar]}init(){this.editor.editing.view.addObserver(JH),this._enableShiftClickSelection(),this._enableMouseDragSelection()}_enableShiftClickSelection(){const t=this.editor,e=t.plugins.get(Ar);let i=!1;const r=t.plugins.get(eu);this.listenTo(t.editing.view.document,"mousedown",(s,o)=>{const a=t.model.document.selection;if(!this.isEnabled||!r.isEnabled||!o.domEvent.shiftKey)return;const l=r.getAnchorCell()||e.getTableCellsContainingSelection(a)[0];if(!l)return;const c=this._getModelTableCellFromDomEvent(o);c&&$M(l,c)&&(i=!0,r.setCellSelection(l,c),o.preventDefault())}),this.listenTo(t.editing.view.document,"mouseup",()=>{i=!1}),this.listenTo(t.editing.view.document,"selectionChange",s=>{i&&s.stop()},{priority:"highest"})}_enableMouseDragSelection(){const t=this.editor;let e,i,r=!1,s=!1;const o=t.plugins.get(eu);this.listenTo(t.editing.view.document,"mousedown",(a,l)=>{!this.isEnabled||!o.isEnabled||l.domEvent.shiftKey||l.domEvent.ctrlKey||l.domEvent.altKey||(e=this._getModelTableCellFromDomEvent(l))}),this.listenTo(t.editing.view.document,"mousemove",(a,l)=>{if(!l.domEvent.buttons||!e)return;const c=this._getModelTableCellFromDomEvent(l);c&&$M(e,c)&&(i=c,!r&&i!=e&&(r=!0)),r&&(s=!0,o.setCellSelection(e,i),l.preventDefault())}),this.listenTo(t.editing.view.document,"mouseup",()=>{r=!1,s=!1,e=null,i=null}),this.listenTo(t.editing.view.document,"selectionChange",a=>{s&&a.stop()},{priority:"highest"})}_getModelTableCellFromDomEvent(t){const e=t.target,i=this.editor.editing.view.createPositionAt(e,0);return this.editor.editing.mapper.toModelPosition(i).parent.findAncestor("tableCell",{includeSelf:!0})}}function $M(n,t){return n.parent.parent==t.parent.parent}class rMe extends Ne{static get requires(){return[$v,YLe,eu,iMe,nMe,ZLe,Ru]}static get pluginName(){return"Table"}static get isOfficialPlugin(){return!0}}function i_(n){const t=XH(n);return t||j0(n)}function XH(n){const t=n.getSelectedElement();return t&&e9(t)?t:null}function j0(n){const t=n.getFirstPosition();if(!t)return null;let e=t.parent;for(;e;){if(e.is("element")&&e9(e))return e;e=e.parent}return null}function e9(n){return!!n.getCustomProperty("table")&&Mi(n)}class sMe extends Ne{static get requires(){return[sm]}static get pluginName(){return"TableToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=t.t,i=t.plugins.get(sm),r=t.config.get("table.contentToolbar"),s=t.config.get("table.tableToolbar");r&&i.register("tableContent",{ariaLabel:e("Table toolbar"),items:r,getRelatedElement:j0}),s&&i.register("table",{ariaLabel:e("Table toolbar"),items:s,getRelatedElement:XH})}}class oMe extends dt{constructor(e,i){super(e);y(this,"options");y(this,"focusTracker");y(this,"focusCycler");y(this,"_focusables");y(this,"dropdownView");y(this,"inputView");y(this,"keystrokes");y(this,"_stillTyping");this.set("value",""),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isEmpty",!0),this.options=i,this.focusTracker=new Mn,this._focusables=new tr,this.dropdownView=this._createDropdownView(),this.inputView=this._createInputTextView(),this.keystrokes=new oi,this._stillTyping=!1,this.focusCycler=new ur({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-input-color"]},children:[this.dropdownView,this.inputView]}),this.on("change:value",(r,s,o)=>this._setInputValue(o))}render(){super.render(),[this.inputView,this.dropdownView.buttonView].forEach(e=>{this.focusTracker.add(e.element),this._focusables.add(e)}),this.keystrokes.listenTo(this.element)}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createDropdownView(){const e=this.locale,i=e.t,r=this.bindTemplate,s=this._createColorSelector(e),o=as(e),a=new dt;return a.setTemplate({tag:"span",attributes:{class:["ck","ck-input-color__button__preview"],style:{backgroundColor:r.to("value")}},children:[{tag:"span",attributes:{class:["ck","ck-input-color__button__preview__no-color-indicator",r.if("value","ck-hidden",l=>l!="")]}}]}),o.buttonView.extendTemplate({attributes:{class:"ck-input-color__button"}}),o.buttonView.children.add(a),o.buttonView.label=i("Color picker"),o.buttonView.tooltip=!0,o.panelPosition=e.uiLanguageDirection==="rtl"?"se":"sw",o.panelView.children.add(s),o.bind("isEnabled").to(this,"isReadOnly",l=>!l),o.on("change:isOpen",(l,c,u)=>{u&&(s.updateSelectedColors(),s.showColorGridsFragment())}),o}_createInputTextView(){const e=this.locale,i=new t7(e);return i.extendTemplate({on:{blur:i.bindTemplate.to("blur")}}),i.value=this.value,i.bind("isReadOnly","hasError").to(this),this.bind("isFocused","isEmpty").to(i),i.on("input",()=>{const r=i.element.value,s=this.options.colorDefinitions.find(o=>r===o.label);this._stillTyping=!0,this.value=s&&s.color||r}),i.on("blur",()=>{this._stillTyping=!1,this._setInputValue(i.element.value)}),i.delegate("input").to(this),i}_createColorSelector(e){const i=e.t,r=this.options.defaultColorValue||"",s=i(r?"Restore default":"Remove color"),o=new pAe(e,{colors:this.options.colorDefinitions,columns:this.options.columns,removeButtonLabel:s,colorPickerLabel:i("Color picker"),colorPickerViewConfig:this.options.colorPickerConfig===!1?!1:{...this.options.colorPickerConfig,hideInput:!0}});o.appendUI(),o.on("execute",(l,c)=>{if(c.source==="colorPickerSaveButton"){this.dropdownView.isOpen=!1;return}this.value=c.value||r,this.fire("input"),c.source!=="colorPicker"&&(this.dropdownView.isOpen=!1)});let a=this.value;return o.on("colorPicker:cancel",()=>{this.value=a,this.fire("input"),this.dropdownView.isOpen=!1}),o.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{a=this.value}),o.bind("selectedColor").to(this,"value"),o}_setInputValue(e){if(!this._stillTyping){const i=BM(e),r=this.options.colorDefinitions.find(s=>i===BM(s.color));r?this.inputView.value=r.label:this.inputView.value=e||""}}}function BM(n){return n.replace(/([(,])\s+/g,"$1").replace(/^\s+|\s+(?=[),\s]|$)/g,"").replace(/,|\s/g," ")}const zP=n=>n==="";function HP(n){return{none:n("None"),solid:n("Solid"),dotted:n("Dotted"),dashed:n("Dashed"),double:n("Double"),groove:n("Groove"),ridge:n("Ridge"),inset:n("Inset"),outset:n("Outset")}}function t9(n){return n('The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".')}function n9(n){return n('The value is invalid. Try "10px" or "2em" or simply "2".')}function r_(n){return n=n.trim().toLowerCase(),zP(n)||p8(n)}function vp(n){return n=n.trim(),zP(n)||s9(n)||sP(n)||iCe(n)}function i9(n){return n=n.trim(),zP(n)||s9(n)||sP(n)}function r9(n,t){const e=new cr,i=HP(n.t);for(const r in i){const s={type:"button",model:new $d({_borderStyleValue:r,label:i[r],role:"menuitemradio",withText:!0})};r==="none"?s.model.bind("isOn").to(n,"borderStyle",o=>t==="none"?!o:o===r):s.model.bind("isOn").to(n,"borderStyle",o=>o===r),e.add(s)}return e}function hS(n){const{view:t,icons:e,toolbar:i,labels:r,propertyName:s,nameToValue:o,defaultValue:a}=n;for(const l in r){const c=new wt(t.locale);c.set({role:"radio",isToggleable:!0,label:r[l],icon:e[l],tooltip:r[l]});const u=o?o(l):l;c.bind("isOn").to(t,s,d=>{let f=d;return d===""&&a&&(f=a),u===f}),c.on("execute",()=>{!a&&u&&t[s]===u?t[s]=void 0:t[s]=u}),i.items.add(c)}}const s_=[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}];function o_(n){return(t,e,i)=>{const r=new oMe(t.locale,{colorDefinitions:aMe(n.colorConfig),columns:n.columns,defaultColorValue:n.defaultColorValue,colorPickerConfig:n.colorPickerConfig});return r.inputView.set({id:e,ariaDescribedById:i}),r.bind("isReadOnly").to(t,"isEnabled",s=>!s),r.bind("hasError").to(t,"errorText",s=>!!s),r.on("input",()=>{t.errorText=null}),t.bind("isEmpty","isFocused").to(r),r}}function s9(n){const t=parseFloat(n);return!Number.isNaN(t)&&n===String(t)}function aMe(n){return n.map(t=>({color:t.model,label:t.label,options:{hasBorder:t.hasBorder}}))}class lMe extends dt{constructor(e,i){super(e);y(this,"options");y(this,"focusTracker");y(this,"keystrokes");y(this,"children");y(this,"borderStyleDropdown");y(this,"borderWidthInput");y(this,"borderColorInput");y(this,"backgroundInput");y(this,"paddingInput");y(this,"widthInput");y(this,"heightInput");y(this,"horizontalAlignmentToolbar");y(this,"verticalAlignmentToolbar");y(this,"saveButtonView");y(this,"cancelButtonView");y(this,"_focusables");y(this,"_focusCycler");this.set({borderStyle:"",borderWidth:"",borderColor:"",padding:"",backgroundColor:"",width:"",height:"",horizontalAlignment:"",verticalAlignment:""}),this.options=i;const{borderStyleDropdown:r,borderWidthInput:s,borderColorInput:o,borderRowLabel:a}=this._createBorderFields(),{backgroundRowLabel:l,backgroundInput:c}=this._createBackgroundFields(),{widthInput:u,operatorLabel:d,heightInput:f,dimensionsLabel:h}=this._createDimensionFields(),{horizontalAlignmentToolbar:g,verticalAlignmentToolbar:v,alignmentLabel:_}=this._createAlignmentFields();this.focusTracker=new Mn,this.keystrokes=new oi,this.children=this.createCollection(),this.borderStyleDropdown=r,this.borderWidthInput=s,this.borderColorInput=o,this.backgroundInput=c,this.paddingInput=this._createPaddingField(),this.widthInput=u,this.heightInput=f,this.horizontalAlignmentToolbar=g,this.verticalAlignmentToolbar=v;const{saveButtonView:w,cancelButtonView:C}=this._createActionButtons();this.saveButtonView=w,this.cancelButtonView=C,this._focusables=new tr,this._focusCycler=new ur({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new wl(e,{label:this.t("Cell properties")})),this.children.add(new Cr(e,{labelView:a,children:[a,r,o,s],class:"ck-table-form__border-row"})),this.children.add(new Cr(e,{labelView:l,children:[l,c],class:"ck-table-form__background-row"})),this.children.add(new Cr(e,{children:[new Cr(e,{labelView:h,children:[h,u,d,f],class:"ck-table-form__dimensions-row"}),new Cr(e,{children:[this.paddingInput],class:"ck-table-cell-properties-form__padding-row"})]})),this.children.add(new Cr(e,{labelView:_,children:[_,g,v],class:"ck-table-cell-properties-form__alignment-row"})),this.children.add(new Cr(e,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-cell-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),bl({view:this}),[this.borderColorInput,this.backgroundInput].forEach(e=>{this._focusCycler.chain(e.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.paddingInput,this.horizontalAlignmentToolbar,this.verticalAlignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const e=this.options.defaultTableCellProperties,i={style:e.borderStyle,width:e.borderWidth,color:e.borderColor},r=o_({colorConfig:this.options.borderColors,columns:5,defaultColorValue:i.color,colorPickerConfig:this.options.colorPickerConfig}),s=this.locale,o=this.t,a=o("Style"),l=new js(s);l.text=o("Border");const c=HP(o),u=new Ri(s,bP);u.set({label:a,class:"ck-table-form__border-style"}),u.fieldView.buttonView.set({ariaLabel:a,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:a}),u.fieldView.buttonView.bind("label").to(this,"borderStyle",h=>c[h||"none"]),u.fieldView.on("execute",h=>{this.borderStyle=h.source._borderStyleValue}),u.bind("isEmpty").to(this,"borderStyle",h=>!h),ef(u.fieldView,r9(this,i.style),{role:"menu",ariaLabel:a});const d=new Ri(s,Ss);d.set({label:o("Width"),class:"ck-table-form__border-width"}),d.fieldView.bind("value").to(this,"borderWidth"),d.bind("isEnabled").to(this,"borderStyle",jb),d.fieldView.on("input",()=>{this.borderWidth=d.fieldView.element.value});const f=new Ri(s,r);return f.set({label:o("Color"),class:"ck-table-form__border-color"}),f.fieldView.bind("value").to(this,"borderColor"),f.bind("isEnabled").to(this,"borderStyle",jb),f.fieldView.on("input",()=>{this.borderColor=f.fieldView.value}),this.on("change:borderStyle",(h,g,v,_)=>{jb(v)||(this.borderColor="",this.borderWidth=""),jb(_)||(this.borderColor=i.color,this.borderWidth=i.width)}),{borderRowLabel:l,borderStyleDropdown:u,borderColorInput:f,borderWidthInput:d}}_createBackgroundFields(){const e=this.locale,i=this.t,r=new js(e);r.text=i("Background");const s=o_({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableCellProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),o=new Ri(e,s);return o.set({label:i("Color"),class:"ck-table-cell-properties-form__background"}),o.fieldView.bind("value").to(this,"backgroundColor"),o.fieldView.on("input",()=>{this.backgroundColor=o.fieldView.value}),{backgroundRowLabel:r,backgroundInput:o}}_createDimensionFields(){const e=this.locale,i=this.t,r=new js(e);r.text=i("Dimensions");const s=new Ri(e,Ss);s.set({label:i("Width"),class:"ck-table-form__dimensions-row__width"}),s.fieldView.bind("value").to(this,"width"),s.fieldView.on("input",()=>{this.width=s.fieldView.element.value});const o=new dt(e);o.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"×"}]});const a=new Ri(e,Ss);return a.set({label:i("Height"),class:"ck-table-form__dimensions-row__height"}),a.fieldView.bind("value").to(this,"height"),a.fieldView.on("input",()=>{this.height=a.fieldView.element.value}),{dimensionsLabel:r,widthInput:s,operatorLabel:o,heightInput:a}}_createPaddingField(){const e=this.locale,i=this.t,r=new Ri(e,Ss);return r.set({label:i("Padding"),class:"ck-table-cell-properties-form__padding"}),r.fieldView.bind("value").to(this,"padding"),r.fieldView.on("input",()=>{this.padding=r.fieldView.element.value}),r}_createAlignmentFields(){const e=this.locale,i=this.t,r=new js(e),s={left:aP,center:T8,right:A8,justify:S8,top:zCe,middle:UCe,bottom:FCe};r.text=i("Table cell text alignment");const o=new oc(e),a=e.contentLanguageDirection==="rtl";o.set({isCompact:!0,role:"radiogroup",ariaLabel:i("Horizontal text alignment toolbar")}),hS({view:this,icons:s,toolbar:o,labels:this._horizontalAlignmentLabels,propertyName:"horizontalAlignment",nameToValue:c=>{if(a){if(c==="left")return"right";if(c==="right")return"left"}return c},defaultValue:this.options.defaultTableCellProperties.horizontalAlignment});const l=new oc(e);return l.set({isCompact:!0,role:"radiogroup",ariaLabel:i("Vertical text alignment toolbar")}),hS({view:this,icons:s,toolbar:l,labels:this._verticalAlignmentLabels,propertyName:"verticalAlignment",defaultValue:this.options.defaultTableCellProperties.verticalAlignment}),{horizontalAlignmentToolbar:o,verticalAlignmentToolbar:l,alignmentLabel:r}}_createActionButtons(){const e=this.locale,i=this.t,r=new wt(e),s=new wt(e),o=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.paddingInput];return r.set({label:i("Save"),icon:M0,class:"ck-button-save",type:"submit",withText:!0}),r.bind("isEnabled").toMany(o,"errorText",(...a)=>a.every(l=>!l)),s.set({label:i("Cancel"),icon:L0,class:"ck-button-cancel",withText:!0}),s.delegate("execute").to(this,"cancel"),{saveButtonView:r,cancelButtonView:s}}get _horizontalAlignmentLabels(){const e=this.locale,i=this.t,r=i("Align cell text to the left"),s=i("Align cell text to the center"),o=i("Align cell text to the right"),a=i("Justify cell text");return e.uiLanguageDirection==="rtl"?{right:o,center:s,left:r,justify:a}:{left:r,center:s,right:o,justify:a}}get _verticalAlignmentLabels(){const e=this.t;return{top:e("Align cell text to the top"),middle:e("Align cell text to the middle"),bottom:e("Align cell text to the bottom")}}}function jb(n){return n!=="none"}const mS=[ar.defaultPositions.northArrowSouth,ar.defaultPositions.northArrowSouthWest,ar.defaultPositions.northArrowSouthEast,ar.defaultPositions.southArrowNorth,ar.defaultPositions.southArrowNorthWest,ar.defaultPositions.southArrowNorthEast,ar.defaultPositions.viewportStickyNorth];function o9(n,t){const e=n.plugins.get("ContextualBalloon"),i=n.editing.view.document.selection;let r;t==="cell"?j0(i)&&(r=l9(n)):i_(i)&&(r=a9(n)),r&&e.updatePosition(r)}function a9(n){const t=n.model.document.selection,e=Xc(t),i=n.editing.mapper.toViewElement(e);return{target:n.editing.view.domConverter.mapViewToDom(i),positions:mS}}function l9(n){const t=n.editing.mapper,e=n.editing.view.domConverter,i=n.model.document.selection;if(i.rangeCount>1)return{target:()=>cMe(i.getRanges(),n),positions:mS};const r=c9(i.getFirstPosition()),s=t.toViewElement(r);return{target:e.mapViewToDom(s),positions:mS}}function c9(n){return n.nodeAfter&&n.nodeAfter.is("element","tableCell")?n.nodeAfter:n.findAncestor("tableCell")}function cMe(n,t){const e=t.editing.mapper,i=t.editing.view.domConverter,r=Array.from(n).map(s=>{const o=c9(s.start),a=e.toViewElement(o);return new It(i.mapViewToDom(a))});return It.getBoundingRect(r)}function sf(n){if(!n||!mo(n))return n;const{top:t,right:e,bottom:i,left:r}=n;if(t==e&&e==i&&i==r)return t}function of(n,t){const e=parseFloat(n);return Number.isNaN(e)||String(e)!==String(n)?n:`${e}${t}`}function q0(n,t={}){const e={borderStyle:"none",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",...n};return t.includeAlignmentProperty&&!e.alignment&&(e.alignment="center"),t.includePaddingProperty&&!e.padding&&(e.padding=""),t.includeVerticalAlignmentProperty&&!e.verticalAlignment&&(e.verticalAlignment="middle"),t.includeHorizontalAlignmentProperty&&!e.horizontalAlignment&&(e.horizontalAlignment=t.isRightToLeftContent?"right":"left"),e}function u9(n,t){return q0({borderStyle:"double",borderColor:"hsl(0, 0%, 70%)",borderWidth:"1px",...n},t)}function WP(n,t){return q0({borderStyle:"solid",borderColor:"hsl(0, 0%, 75%)",borderWidth:"1px",...n},t)}const uMe=500,FM={borderStyle:"tableCellBorderStyle",borderColor:"tableCellBorderColor",borderWidth:"tableCellBorderWidth",height:"tableCellHeight",width:"tableCellWidth",padding:"tableCellPadding",backgroundColor:"tableCellBackgroundColor",horizontalAlignment:"tableCellHorizontalAlignment",verticalAlignment:"tableCellVerticalAlignment"};class dMe extends Ne{constructor(e){super(e);y(this,"_defaultContentTableCellProperties");y(this,"_defaultLayoutTableCellProperties");y(this,"_balloon");y(this,"view");y(this,"_viewWithContentTableDefaults");y(this,"_viewWithLayoutTableDefaults");y(this,"_undoStepBatch");y(this,"_isReady");e.config.define("table.tableCellProperties",{borderColors:s_,backgroundColors:s_})}static get requires(){return[bo]}static get pluginName(){return"TableCellPropertiesUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=e.t;this._defaultContentTableCellProperties=WP(e.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:e.locale.contentLanguageDirection==="rtl"}),this._defaultLayoutTableCellProperties=q0(void 0,{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,isRightToLeftContent:e.locale.contentLanguageDirection==="rtl"}),this._balloon=e.plugins.get(bo),this.view=null,this._isReady=!1,e.ui.componentFactory.add("tableCellProperties",r=>{const s=new wt(r);s.set({label:i("Cell properties"),icon:LTe,tooltip:!0}),this.listenTo(s,"execute",()=>this._showView());const o=Object.values(FM).map(a=>e.commands.get(a));return s.bind("isEnabled").toMany(o,"isEnabled",(...a)=>a.some(l=>l)),s})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(e){const i=this.editor,r=i.config.get("table.tableCellProperties"),s=jy(r.borderColors),o=Wy(i.locale,s),a=jy(r.backgroundColors),l=Wy(i.locale,a),c=r.colorPicker!==!1,u=new lMe(i.locale,{borderColors:o,backgroundColors:l,defaultTableCellProperties:e,colorPickerConfig:c?r.colorPicker||{}:!1}),d=i.t;u.render(),this.listenTo(u,"submit",()=>{this._hideView()}),this.listenTo(u,"cancel",()=>{this._undoStepBatch.operations.length&&i.execute("undo",this._undoStepBatch),this._hideView()}),u.keystrokes.set("Esc",(g,v)=>{this._hideView(),v()}),pc({emitter:u,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const f=t9(d),h=n9(d);return u.on("change:borderStyle",this._getPropertyChangeCallback("tableCellBorderStyle")),u.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:u.borderColorInput,commandName:"tableCellBorderColor",errorText:f,validator:r_})),u.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:u.borderWidthInput,commandName:"tableCellBorderWidth",errorText:h,validator:i9})),u.on("change:padding",this._getValidatedPropertyChangeCallback({viewField:u.paddingInput,commandName:"tableCellPadding",errorText:h,validator:vp})),u.on("change:width",this._getValidatedPropertyChangeCallback({viewField:u.widthInput,commandName:"tableCellWidth",errorText:h,validator:vp})),u.on("change:height",this._getValidatedPropertyChangeCallback({viewField:u.heightInput,commandName:"tableCellHeight",errorText:h,validator:vp})),u.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:u.backgroundInput,commandName:"tableCellBackgroundColor",errorText:f,validator:r_})),u.on("change:horizontalAlignment",this._getPropertyChangeCallback("tableCellHorizontalAlignment")),u.on("change:verticalAlignment",this._getPropertyChangeCallback("tableCellVerticalAlignment")),u}_fillViewFormFromCommandValues(){const e=this.editor.commands,i=e.get("tableCellBorderStyle");Object.entries(FM).map(([r,s])=>{const o=r,a=this.view===this._viewWithContentTableDefaults?this._defaultContentTableCellProperties[o]||"":this._defaultLayoutTableCellProperties[o]||"";return[r,e.get(s).value||a]}).forEach(([r,s])=>{(r==="borderColor"||r==="borderWidth")&&i.value==="none"||this.view.set(r,s)}),this._isReady=!0}_showView(){const e=this.editor,i=i_(e.editing.view.document.selection),r=i&&e.editing.mapper.toModelElement(i),s=!r||r.getAttribute("tableType")!=="layout";s&&!this._viewWithContentTableDefaults?this._viewWithContentTableDefaults=this._createPropertiesView(this._defaultContentTableCellProperties):!s&&!this._viewWithLayoutTableDefaults&&(this._viewWithLayoutTableDefaults=this._createPropertiesView(this._defaultLayoutTableCellProperties)),this.view=s?this._viewWithContentTableDefaults:this._viewWithLayoutTableDefaults,this.listenTo(e.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:l9(e)}),this._undoStepBatch=e.model.createBatch(),this.view.focus()}_hideView(){const e=this.editor;this.stopListening(e.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const e=this.editor,i=e.editing.view.document;j0(i.selection)?this._isViewVisible&&o9(e,"cell"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(e){return(i,r,s)=>{this._isReady&&this.editor.execute(e,{value:s,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(e){const{commandName:i,viewField:r,validator:s,errorText:o}=e,a=go(()=>{r.errorText=o},uMe);return(l,c,u)=>{a.cancel(),this._isReady&&(s(u)?(this.editor.execute(i,{value:u,batch:this._undoStepBatch}),r.errorText=null):a())}}}class vc extends Nt{constructor(e,i,r){super(e);y(this,"attributeName");y(this,"_defaultValue");y(this,"_defaultContentTableValue");y(this,"_defaultLayoutTableValue");switch(this.attributeName=i,this._defaultContentTableValue=r,i){case"tableCellBorderStyle":this._defaultLayoutTableValue="none";break;case"tableCellHorizontalAlignment":this._defaultLayoutTableValue="left";break;case"tableCellVerticalAlignment":this._defaultLayoutTableValue="middle";break;default:this._defaultLayoutTableValue=void 0}}refresh(){const i=this.editor.model.document.selection,s=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(i),o=Xc(i);this._defaultValue=!o||o.getAttribute("tableType")!=="layout"?this._defaultContentTableValue:this._defaultLayoutTableValue,this.isEnabled=!!s.length,this.value=this._getSingleValue(s)}execute(e={}){const{value:i,batch:r}=e,s=this.editor.model,a=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(s.document.selection),l=this._getValueToSet(i);s.enqueueChange(r,c=>{l?a.forEach(u=>c.setAttribute(this.attributeName,l,u)):a.forEach(u=>c.removeAttribute(this.attributeName,u))})}_getAttribute(e){if(!e)return;const i=e.getAttribute(this.attributeName);if(i!==this._defaultValue)return i}_getValueToSet(e){if(e!==this._defaultValue)return e}_getSingleValue(e){const i=this._getAttribute(e[0]);return e.every(s=>this._getAttribute(s)===i)?i:void 0}}class fMe extends vc{constructor(t,e){super(t,"tableCellWidth",e)}_getValueToSet(t){if(t=of(t,"px"),t!==this._defaultValue)return t}}class d9 extends Ne{static get pluginName(){return"TableCellWidthEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[$v]}init(){const t=this.editor,e=WP(t.config.get("table.tableCellProperties.defaultProperties"));Vw(t.model.schema,t.conversion,{modelAttribute:"tableCellWidth",styleName:"width",defaultValue:e.width}),t.commands.add("tableCellWidth",new fMe(t,e.width))}}class hMe extends vc{constructor(t,e){super(t,"tableCellPadding",e)}_getAttribute(t){if(!t)return;const e=sf(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}_getValueToSet(t){const e=of(t,"px");if(e!==this._defaultValue)return e}}class mMe extends vc{constructor(t,e){super(t,"tableCellHeight",e)}_getValueToSet(t){const e=of(t,"px");if(e!==this._defaultValue)return e}}class gMe extends vc{constructor(t,e){super(t,"tableCellBackgroundColor",e)}}class pMe extends vc{constructor(t,e){super(t,"tableCellVerticalAlignment",e)}}class vMe extends vc{constructor(t,e){super(t,"tableCellHorizontalAlignment",e)}}class bMe extends vc{constructor(t,e){super(t,"tableCellBorderStyle",e)}_getAttribute(t){if(!t)return;const e=sf(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}}class wMe extends vc{constructor(t,e){super(t,"tableCellBorderColor",e)}_getAttribute(t){if(!t)return;const e=sf(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}}class yMe extends vc{constructor(t,e){super(t,"tableCellBorderWidth",e)}_getAttribute(t){if(!t)return;const e=sf(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}_getValueToSet(t){const e=of(t,"px");if(e!==this._defaultValue)return e}}const UM=/^(top|middle|bottom)$/,zM=/^(left|center|right|justify)$/;class _Me extends Ne{static get pluginName(){return"TableCellPropertiesEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[$v,d9]}init(){const t=this.editor,e=t.model.schema,i=t.conversion;t.config.define("table.tableCellProperties.defaultProperties",{});const r=WP(t.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:t.locale.contentLanguageDirection==="rtl"});t.data.addStyleProcessorRules(w8),kMe(e,i,{color:r.borderColor,style:r.borderStyle,width:r.borderWidth}),t.commands.add("tableCellBorderStyle",new bMe(t,r.borderStyle)),t.commands.add("tableCellBorderColor",new wMe(t,r.borderColor)),t.commands.add("tableCellBorderWidth",new yMe(t,r.borderWidth)),Vw(e,i,{modelAttribute:"tableCellHeight",styleName:"height",defaultValue:r.height}),t.commands.add("tableCellHeight",new mMe(t,r.height)),t.data.addStyleProcessorRules(yCe),Vw(e,i,{modelAttribute:"tableCellPadding",styleName:"padding",reduceBoxSides:!0,defaultValue:r.padding}),t.commands.add("tableCellPadding",new hMe(t,r.padding)),t.data.addStyleProcessorRules(b8),Vw(e,i,{modelAttribute:"tableCellBackgroundColor",styleName:"background-color",defaultValue:r.backgroundColor}),t.commands.add("tableCellBackgroundColor",new gMe(t,r.backgroundColor)),EMe(e,i,r.horizontalAlignment),t.commands.add("tableCellHorizontalAlignment",new vMe(t,r.horizontalAlignment)),CMe(e,i,r.verticalAlignment),t.commands.add("tableCellVerticalAlignment",new pMe(t,r.verticalAlignment))}}function kMe(n,t,e){const i={width:"tableCellBorderWidth",color:"tableCellBorderColor",style:"tableCellBorderStyle"};n.extend("tableCell",{allowAttributes:Object.values(i)}),rS(t,"td",i,e),rS(t,"th",i,e),pp(t,{modelElement:"tableCell",modelAttribute:i.style,styleName:"border-style"}),pp(t,{modelElement:"tableCell",modelAttribute:i.color,styleName:"border-color"}),pp(t,{modelElement:"tableCell",modelAttribute:i.width,styleName:"border-width"})}function EMe(n,t,e){n.extend("tableCell",{allowAttributes:["tableCellHorizontalAlignment"]}),t.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellHorizontalAlignment"},view:i=>({key:"style",value:{"text-align":i}})}),t.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"text-align":zM}},model:{key:"tableCellHorizontalAlignment",value:(i,r,s)=>{const o=Jc(e,"left",s),a=i.getStyle("text-align");return a===o?null:a}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{align:zM}},model:{key:"tableCellHorizontalAlignment",value:(i,r,s)=>{const o=Jc(e,"left",s),a=i.getAttribute("align");return a===o?null:a}}})}function CMe(n,t,e){n.extend("tableCell",{allowAttributes:["tableCellVerticalAlignment"]}),t.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellVerticalAlignment"},view:i=>({key:"style",value:{"vertical-align":i}})}),t.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"vertical-align":UM}},model:{key:"tableCellVerticalAlignment",value:(i,r,s)=>{const o=Jc(e,"middle",s),a=i.getStyle("vertical-align");return a===o?null:a}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{valign:UM}},model:{key:"tableCellVerticalAlignment",value:(i,r,s)=>{const o=Jc(e,"middle",s),a=i.getAttribute("valign");return a===o?null:a}}})}class TMe extends Ne{static get pluginName(){return"TableCellProperties"}static get isOfficialPlugin(){return!0}static get requires(){return[_Me,dMe]}}class SMe extends Nt{refresh(){this.isEnabled=!0}execute(t={}){const{model:e,plugins:i}=this.editor;let{table:r=e.document.selection.getSelectedElement(),columnWidths:s,tableWidth:o}=t;s&&(s=Array.isArray(s)?s:s.split(",")),e.change(a=>{o?a.setAttribute("tableWidth",o,r):a.removeAttribute("tableWidth",r);const l=i.get("TableColumnResizeEditing").getColumnGroupElement(r);if(!s&&!l)return;if(!s)return a.remove(l);const c=UP(s);if(l)Array.from(l.getChildren()).forEach((u,d)=>a.setAttribute("columnWidth",c[d],u));else{const u=a.createElement("tableColumnGroup");c.forEach(d=>a.appendElement("tableColumn",{columnWidth:d},u)),a.append(u,r)}})}}function AMe(n){return t=>t.on("element:colgroup",(e,i,r)=>{const s=i.modelCursor.findAncestor("table"),o=Lv(s);if(!o)return;const a=Mv(o),l=n.getColumns(s);let c=ELe(o,r.writer);c=Array.from({length:l},(u,d)=>c[d]||"auto"),(c.length!=a.length||c.includes("auto"))&&YH(a,o,UP(c),r.writer)},{priority:"low"})}function IMe(){return n=>n.on("insert:table",(t,e,i)=>{const r=i.writer,s=e.item,o=i.mapper.toViewElement(s),a=o.is("element","table")?o:Array.from(o.getChildren()).find(c=>c.is("element","table"));Lv(s)?r.addClass("ck-table-resized",a):r.removeClass("ck-table-resized",a)},{priority:"low"})}const HM=gc("px");class PMe extends Ne{constructor(e){super(e);y(this,"_isResizingActive");y(this,"_resizingData");y(this,"_domEmitter");y(this,"_tableUtilsPlugin");y(this,"_initialMouseEventData",null);this._isResizingActive=!1,this.set("_isResizingAllowed",!0),this._resizingData=null,this._domEmitter=new(ds()),this._tableUtilsPlugin=e.plugins.get("TableUtils"),this.on("change:_isResizingAllowed",(i,r,s)=>{const o=s?"removeClass":"addClass";e.editing.view.change(a=>{for(const l of e.editing.view.document.roots)a[o]("ck-column-resize_disabled",e.editing.view.document.getRoot(l.rootName))})})}static get requires(){return[$v,Ar]}static get pluginName(){return"TableColumnResizeEditing"}static get isOfficialPlugin(){return!0}init(){this._extendSchema(),this._registerPostFixer(),this._registerConverters(),this._registerResizingListeners(),this._registerResizerInserter();const e=this.editor,i=e.plugins.get("TableColumnResize");e.plugins.get("TableEditing").registerAdditionalSlot({filter:o=>o.is("element","tableColumnGroup"),positionOffset:0});const s=new SMe(e);e.commands.add("resizeTableWidth",s),e.commands.add("resizeColumnWidths",s),this.bind("_isResizingAllowed").to(e,"isReadOnly",i,"isEnabled",s,"isEnabled",(o,a,l)=>!o&&a&&l)}destroy(){this._domEmitter.stopListening(),super.destroy()}getColumnGroupElement(e){return Lv(e)}getTableColumnElements(e){return Mv(e)}getTableColumnsWidths(e){return kLe(e)}_extendSchema(){this.editor.model.schema.extend("table",{allowAttributes:["tableWidth"]}),this.editor.model.schema.register("tableColumnGroup",{allowIn:"table",isLimit:!0}),this.editor.model.schema.register("tableColumn",{allowIn:"tableColumnGroup",allowAttributes:["columnWidth","colSpan"],isLimit:!0})}_registerPostFixer(){const i=this.editor.model;i.document.registerPostFixer(o=>{let a=!1;for(const l of gLe(i)){const c=this.getColumnGroupElement(l),u=this.getTableColumnElements(c),d=this.getTableColumnsWidths(c);let f=UP(d);f=r(f,l,this),!em(d,f)&&(YH(u,c,f,o),a=!0)}return a});function r(o,a,l){const c=l._tableUtilsPlugin.getColumns(a);if(c-o.length===0)return o;const d=o.map(h=>Number(h.replace("%",""))),f=s(l.editor.model.document.differ,a);for(const h of f){const g=c-d.length;if(g===0)continue;const v=g>0,_=l._tableUtilsPlugin.getCellLocation(h).column;if(v){const w=pLe(a,l.editor),C=wLe(g,w);d.splice(_,0,...C)}else{const w=d.splice(_,Math.abs(g));d[_]+=cv(w)}}return d.map(h=>h+"%")}function s(o,a){const l=new Set;for(const c of o.getChanges())if(c.type=="insert"&&c.position.nodeAfter&&c.position.nodeAfter.name=="tableCell"&&c.position.nodeAfter.getAncestors().includes(a))l.add(c.position.nodeAfter);else if(c.type=="remove"){const u=c.position.nodeBefore||c.position.nodeAfter;u.name=="tableCell"&&u.getAncestors().includes(a)&&l.add(u)}return l}}_registerConverters(){const i=this.editor.conversion;i.for("upcast").attributeToAttribute({view:{name:/^(figure|table)$/,styles:{width:/[\s\S]+/}},model:{name:"table",key:"tableWidth",value:r=>{if(!r.parent.is("element","figure"))return r.getStyle("width")}}}),i.for("downcast").attributeToAttribute({model:{name:"table",key:"tableWidth"},view:r=>({name:"figure",key:"style",value:{width:r}})}),i.elementToElement({model:"tableColumnGroup",view:"colgroup"}),i.elementToElement({model:"tableColumn",view:"col"}),i.for("downcast").add(IMe()),i.for("upcast").add(AMe(this._tableUtilsPlugin)),i.for("upcast").attributeToAttribute({view:{name:"col",styles:{width:/.*/}},model:{key:"columnWidth",value:r=>{const s=r.getStyle("width");return!s||!s.endsWith("%")&&!s.endsWith("pt")?"auto":s}}}),i.for("upcast").attributeToAttribute({view:{name:"col",key:"span"},model:"colSpan"}),i.for("downcast").attributeToAttribute({model:{name:"tableColumn",key:"columnWidth"},view:r=>({key:"style",value:{width:r}})})}_registerResizingListeners(){const e=this.editor.editing.view;e.addObserver(JH),e.document.on("mouseover",this._onMouseOverHandler.bind(this),{priority:"high"}),e.document.on("mousedown",this._onMouseDownHandler.bind(this),{priority:"high"}),e.document.on("mouseout",this._onMouseOutHandler.bind(this),{priority:"high"}),this._domEmitter.listenTo(at.window.document,"mousemove",tm(this._onMouseMoveHandler.bind(this),50)),this._domEmitter.listenTo(at.window.document,"mouseup",this._onMouseUpHandler.bind(this))}_recalculateResizerElement(e){const i=this.editor,r=i.editing.view.domConverter,s=r.mapViewToDom(e.findAncestor("table")),o=r.mapViewToDom(e.findAncestor(d=>["td","th"].includes(d.name))),a=new It(s),l=new It(o),c=HM(Number((a.top-l.top).toFixed(4))),u=HM(Number((l.bottom-a.bottom).toFixed(4)));i.editing.view.change(d=>{d.setStyle("top",c,e),d.setStyle("bottom",u,e)})}_resetResizerStyles(e){this.editor.editing.view.change(i=>{i.removeStyle("top",e),i.removeStyle("bottom",e)})}_onMouseOverHandler(e,i){const r=i.target;r.hasClass("ck-table-column-resizer")&&this._isResizingAllowed&&this._recalculateResizerElement(r)}_onMouseOutHandler(e,i){const r=i.target;r.hasClass("ck-table-column-resizer")&&this._isResizingAllowed&&(this._isResizingActive||this._resetResizerStyles(r))}_onMouseDownHandler(e,i){const r=i.target;if(!r.hasClass("ck-table-column-resizer")||!this._isResizingAllowed)return;const s=this.editor,o=s.editing.mapper.toModelElement(r.findAncestor("figure"));s.model.canEditAt(o)&&(i.preventDefault(),e.stop(),this._initialMouseEventData=i)}_startResizingAfterThreshold(){const e=this._initialMouseEventData,{target:i}=e,r=this.editor.editing.mapper.toModelElement(i.findAncestor("figure")),s=i.findAncestor("table"),o=a(r,this._tableUtilsPlugin,this.editor);Array.from(s.getChildren()).find(u=>u.is("element","colgroup"))||this.editor.editing.view.change(u=>{l(u,o,s)}),this._isResizingActive=!0,this._resizingData=this._getResizingData(e,o),this.editor.editing.view.change(u=>c(u,s,this._resizingData));function a(u,d,f){const h=Array(d.getColumns(u)),g=new ni(u);for(const v of g){const _=f.editing.mapper.toViewElement(v.cell),w=f.editing.view.domConverter.mapViewToDom(_),C=_Le(w);(!h[v.column]||C<h[v.column])&&(h[v.column]=Fs(C))}return h}function l(u,d,f){const h=u.createContainerElement("colgroup");for(let g=0;g<d.length;g++){const v=u.createEmptyElement("col"),_=`${Fs(d[g]/cv(d)*100)}%`;u.setStyle("width",_,v),u.insert(u.createPositionAt(h,"end"),v)}u.insert(u.createPositionAt(f,0),h)}function c(u,d,f){const h=f.widths.viewFigureWidth/f.widths.viewFigureParentWidth;u.addClass("ck-table-resized",d),u.addClass("ck-table-column-resizer__active",f.elements.viewResizer),u.setStyle("width",`${Fs(h*100)}%`,d.findAncestor("figure"))}}_onMouseMoveHandler(e,i){if(this._initialMouseEventData){const E=this._initialMouseEventData.domEvent;if(Math.abs(i.clientX-E.clientX)>=mLe)this._startResizingAfterThreshold(),this._initialMouseEventData=null;else return}if(!this._isResizingActive)return;if(!this._isResizingAllowed){this._onMouseUpHandler();return}const{columnPosition:r,flags:{isRightEdge:s,isTableCentered:o,isLtrContent:a},elements:{viewFigure:l,viewLeftColumn:c,viewRightColumn:u,viewResizer:d},widths:{viewFigureParentWidth:f,tableWidth:h,leftColumnWidth:g,rightColumnWidth:v}}=this._resizingData,_=-g+lS,w=s?f-h:v-lS,C=(a?1:-1)*(s&&o?2:1),k=bLe((i.clientX-r)*C,Math.min(_,0),Math.max(w,0));k!==0&&(this.editor.editing.view.change(E=>{const A=Fs((g+k)*100/h);if(E.setStyle("width",`${A}%`,c),s){const x=Fs((h+k)*100/f);E.setStyle("width",`${x}%`,l)}else{const x=Fs((v-k)*100/h);E.setStyle("width",`${x}%`,u)}}),this._recalculateResizerElement(d))}_onMouseUpHandler(){if(this._initialMouseEventData=null,!this._isResizingActive)return;const{viewResizer:e,modelTable:i,viewFigure:r,viewColgroup:s}=this._resizingData.elements,o=this.editor,a=o.editing.view,l=this.getColumnGroupElement(i),c=Array.from(s.getChildren()).filter(w=>w.is("view:element")),u=l?this.getTableColumnsWidths(l):null,d=c.map(w=>w.getStyle("width")),f=!em(u,d),h=i.getAttribute("tableWidth"),g=r.getStyle("width"),v=h!==g;(f||v)&&(this._isResizingAllowed?o.execute("resizeTableWidth",{table:i,tableWidth:`${Fs(g)}%`,columnWidths:d}):a.change(w=>{if(u)for(const C of c)w.setStyle("width",u.shift(),C);else w.remove(s);v&&(h?w.setStyle("width",h,r):w.removeStyle("width",r)),!u&&!h&&w.removeClass("ck-table-resized",[...r.getChildren()].find(C=>C.name==="table"))})),a.change(w=>{w.removeClass("ck-table-column-resizer__active",e)}),a.domConverter.mapViewToDom(e).matches(":hover")||this._resetResizerStyles(e),this._isResizingActive=!1,this._resizingData=null}_getResizingData(e,i){const r=this.editor,s=e.domEvent.clientX,o=e.target,a=o.findAncestor("td")||o.findAncestor("th"),l=r.editing.mapper.toModelElement(a),c=l.findAncestor("table"),u=vLe(l,this._tableUtilsPlugin).rightEdge,d=this._tableUtilsPlugin.getColumns(c)-1,f=u===d,h=!c.hasAttribute("tableAlignment"),g=r.locale.contentLanguageDirection!=="rtl",v=a.findAncestor("table"),_=v.findAncestor("figure"),w=[...v.getChildren()].find(R=>R.is("element","colgroup")),C=w.getChild(u),k=f?void 0:w.getChild(u+1),E=cS(r.editing.view.domConverter.mapViewToDom(_.parent)),A=cS(r.editing.view.domConverter.mapViewToDom(_)),x=KH(c,r),p=i[u],D=f?void 0:i[u+1];return{columnPosition:s,flags:{isRightEdge:f,isTableCentered:h,isLtrContent:g},elements:{viewResizer:o,modelTable:c,viewFigure:_,viewColgroup:w,viewLeftColumn:C,viewRightColumn:k},widths:{viewFigureParentWidth:E,viewFigureWidth:A,tableWidth:x,leftColumnWidth:p,rightColumnWidth:D}}}_registerResizerInserter(){this.editor.conversion.for("editingDowncast").add(e=>{e.on("insert:tableCell",(i,r,s)=>{const o=r.item,a=s.mapper.toViewElement(o),l=s.writer;l.insert(l.createPositionAt(a,"end"),l.createUIElement("div",{class:"ck-table-column-resizer"}))},{priority:"lowest"})})}}class xMe extends Ne{static get requires(){return[PMe,d9]}static get pluginName(){return"TableColumnResize"}static get isOfficialPlugin(){return!0}}class af extends Nt{constructor(e,i,r){super(e);y(this,"attributeName");y(this,"_defaultValue");y(this,"_defaultContentTableValue");y(this,"_defaultLayoutTableValue");this.attributeName=i,this._defaultContentTableValue=r,this._defaultLayoutTableValue=i==="tableBorderStyle"?"none":void 0}refresh(){const i=this.editor.model.document.selection,r=Xc(i);this._defaultValue=!r||r.getAttribute("tableType")!=="layout"?this._defaultContentTableValue:this._defaultLayoutTableValue,this.isEnabled=!!r,this.value=this._getValue(r)}execute(e={}){const i=this.editor.model,r=i.document.selection,{value:s,batch:o}=e,a=Xc(r),l=this._getValueToSet(s);i.enqueueChange(o,c=>{l?c.setAttribute(this.attributeName,l,a):c.removeAttribute(this.attributeName,a)})}_getValue(e){if(!e)return;const i=e.getAttribute(this.attributeName);if(i!==this._defaultValue)return i}_getValueToSet(e){if(e!==this._defaultValue)return e}}class OMe extends af{constructor(t,e){super(t,"tableBackgroundColor",e)}}class RMe extends af{constructor(t,e){super(t,"tableBorderColor",e)}_getValue(t){if(!t)return;const e=sf(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}}class VMe extends af{constructor(t,e){super(t,"tableBorderStyle",e)}_getValue(t){if(!t)return;const e=sf(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}}class DMe extends af{constructor(t,e){super(t,"tableBorderWidth",e)}_getValue(t){if(!t)return;const e=sf(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}_getValueToSet(t){const e=of(t,"px");if(e!==this._defaultValue)return e}}class NMe extends af{constructor(t,e){super(t,"tableWidth",e)}_getValueToSet(t){if(t=of(t,"px"),t!==this._defaultValue)return t}}class LMe extends af{constructor(t,e){super(t,"tableHeight",e)}_getValueToSet(t){if(t=of(t,"px"),t!==this._defaultValue)return t}}class MMe extends af{constructor(t,e){super(t,"tableAlignment",e)}}const $Me=/^(left|center|right)$/,BMe=/^(left|none|right)$/;class FMe extends Ne{static get pluginName(){return"TablePropertiesEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[$v]}init(){const t=this.editor,e=t.model.schema,i=t.conversion;t.config.define("table.tableProperties.defaultProperties",{});const r=u9(t.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0});t.data.addStyleProcessorRules(w8),UMe(e,i,{color:r.borderColor,style:r.borderStyle,width:r.borderWidth}),t.commands.add("tableBorderColor",new RMe(t,r.borderColor)),t.commands.add("tableBorderStyle",new VMe(t,r.borderStyle)),t.commands.add("tableBorderWidth",new DMe(t,r.borderWidth)),zMe(e,i,r.alignment),t.commands.add("tableAlignment",new MMe(t,r.alignment)),WM(e,i,{modelAttribute:"tableWidth",styleName:"width",defaultValue:r.width}),t.commands.add("tableWidth",new NMe(t,r.width)),WM(e,i,{modelAttribute:"tableHeight",styleName:"height",defaultValue:r.height}),t.commands.add("tableHeight",new LMe(t,r.height)),t.data.addStyleProcessorRules(b8),HMe(e,i,{modelAttribute:"tableBackgroundColor",styleName:"background-color",defaultValue:r.backgroundColor}),t.commands.add("tableBackgroundColor",new OMe(t,r.backgroundColor))}}function UMe(n,t,e){const i={width:"tableBorderWidth",color:"tableBorderColor",style:"tableBorderStyle"};n.extend("table",{allowAttributes:Object.values(i)}),rS(t,"table",i,e),Ow(t,{modelAttribute:i.color,styleName:"border-color"}),Ow(t,{modelAttribute:i.style,styleName:"border-style"}),Ow(t,{modelAttribute:i.width,styleName:"border-width"})}function zMe(n,t,e){n.extend("table",{allowAttributes:["tableAlignment"]}),t.for("downcast").attributeToAttribute({model:{name:"table",key:"tableAlignment",values:["left","center","right"]},view:{left:{key:"style",value:{float:"left"}},right:{key:"style",value:{float:"right"}},center:(i,r,s)=>({key:"style",value:s.item.getAttribute("tableType")!=="layout"?{float:"none"}:{"margin-left":"auto","margin-right":"auto"}})},converterPriority:"high"}),t.for("upcast").attributeToAttribute({view:{name:/^(table|figure)$/,styles:{float:BMe}},model:{key:"tableAlignment",value:(i,r,s)=>{const o=Jc(e,"",s);let a=i.getStyle("float");return a==="none"&&(a="center"),a===o?null:a}}}).attributeToAttribute({view:{name:/^(table|figure)$/,styles:{"margin-left":"auto","margin-right":"auto"}},model:{key:"tableAlignment",value:(i,r,s)=>{const o=Jc(e,"",s),a="center";return a===o?null:a}}}).attributeToAttribute({view:{attributes:{align:$Me}},model:{name:"table",key:"tableAlignment",value:(i,r,s)=>{const o=Jc(e,"",s),a=i.getAttribute("align");return a===o?null:a}}})}function HMe(n,t,e){const{modelAttribute:i}=e;n.extend("table",{allowAttributes:[i]}),BP(t,{viewElement:"table",...e}),Ow(t,e)}function WM(n,t,e){const{modelAttribute:i}=e;n.extend("table",{allowAttributes:[i]}),BP(t,{viewElement:/^(table|figure)$/,shouldUpcast:r=>!(r.name=="table"&&r.parent.name=="figure"),...e}),pp(t,{modelElement:"table",...e})}class WMe extends dt{constructor(e,i){super(e);y(this,"options");y(this,"focusTracker");y(this,"keystrokes");y(this,"children");y(this,"borderStyleDropdown");y(this,"borderWidthInput");y(this,"borderColorInput");y(this,"backgroundInput");y(this,"widthInput");y(this,"heightInput");y(this,"alignmentToolbar");y(this,"saveButtonView");y(this,"cancelButtonView");y(this,"_focusables");y(this,"_focusCycler");this.set({borderStyle:"",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",alignment:""}),this.options=i;const{borderStyleDropdown:r,borderWidthInput:s,borderColorInput:o,borderRowLabel:a}=this._createBorderFields(),{backgroundRowLabel:l,backgroundInput:c}=this._createBackgroundFields(),{widthInput:u,operatorLabel:d,heightInput:f,dimensionsLabel:h}=this._createDimensionFields(),{alignmentToolbar:g,alignmentLabel:v}=this._createAlignmentFields();this.focusTracker=new Mn,this.keystrokes=new oi,this.children=this.createCollection(),this.borderStyleDropdown=r,this.borderWidthInput=s,this.borderColorInput=o,this.backgroundInput=c,this.widthInput=u,this.heightInput=f,this.alignmentToolbar=g;const{saveButtonView:_,cancelButtonView:w}=this._createActionButtons();this.saveButtonView=_,this.cancelButtonView=w,this._focusables=new tr,this._focusCycler=new ur({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new wl(e,{label:this.t("Table properties")})),this.children.add(new Cr(e,{labelView:a,children:[a,r,o,s],class:"ck-table-form__border-row"})),this.children.add(new Cr(e,{labelView:l,children:[l,c],class:"ck-table-form__background-row"})),this.children.add(new Cr(e,{children:[new Cr(e,{labelView:h,children:[h,u,d,f],class:"ck-table-form__dimensions-row"}),new Cr(e,{labelView:v,children:[v,g],class:"ck-table-properties-form__alignment-row"})]})),this.children.add(new Cr(e,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),bl({view:this}),[this.borderColorInput,this.backgroundInput].forEach(e=>{this._focusCycler.chain(e.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.alignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const e=this.options.defaultTableProperties,i={style:e.borderStyle,width:e.borderWidth,color:e.borderColor},r=o_({colorConfig:this.options.borderColors,columns:5,defaultColorValue:i.color,colorPickerConfig:this.options.colorPickerConfig}),s=this.locale,o=this.t,a=o("Style"),l=new js(s);l.text=o("Border");const c=HP(o),u=new Ri(s,bP);u.set({label:a,class:"ck-table-form__border-style"}),u.fieldView.buttonView.set({ariaLabel:a,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:a}),u.fieldView.buttonView.bind("label").to(this,"borderStyle",h=>c[h||"none"]),u.fieldView.on("execute",h=>{this.borderStyle=h.source._borderStyleValue}),u.bind("isEmpty").to(this,"borderStyle",h=>!h),ef(u.fieldView,r9(this,i.style),{role:"menu",ariaLabel:a});const d=new Ri(s,Ss);d.set({label:o("Width"),class:"ck-table-form__border-width"}),d.fieldView.bind("value").to(this,"borderWidth"),d.bind("isEnabled").to(this,"borderStyle",qb),d.fieldView.on("input",()=>{this.borderWidth=d.fieldView.element.value});const f=new Ri(s,r);return f.set({label:o("Color"),class:"ck-table-form__border-color"}),f.fieldView.bind("value").to(this,"borderColor"),f.bind("isEnabled").to(this,"borderStyle",qb),f.fieldView.on("input",()=>{this.borderColor=f.fieldView.value}),this.on("change:borderStyle",(h,g,v,_)=>{qb(v)||(this.borderColor="",this.borderWidth=""),qb(_)||(this.borderColor=i.color,this.borderWidth=i.width)}),{borderRowLabel:l,borderStyleDropdown:u,borderColorInput:f,borderWidthInput:d}}_createBackgroundFields(){const e=this.locale,i=this.t,r=new js(e);r.text=i("Background");const s=o_({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),o=new Ri(e,s);return o.set({label:i("Color"),class:"ck-table-properties-form__background"}),o.fieldView.bind("value").to(this,"backgroundColor"),o.fieldView.on("input",()=>{this.backgroundColor=o.fieldView.value}),{backgroundRowLabel:r,backgroundInput:o}}_createDimensionFields(){const e=this.locale,i=this.t,r=new js(e);r.text=i("Dimensions");const s=new Ri(e,Ss);s.set({label:i("Width"),class:"ck-table-form__dimensions-row__width"}),s.fieldView.bind("value").to(this,"width"),s.fieldView.on("input",()=>{this.width=s.fieldView.element.value});const o=new dt(e);o.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"×"}]});const a=new Ri(e,Ss);return a.set({label:i("Height"),class:"ck-table-form__dimensions-row__height"}),a.fieldView.bind("value").to(this,"height"),a.fieldView.on("input",()=>{this.height=a.fieldView.element.value}),{dimensionsLabel:r,widthInput:s,operatorLabel:o,heightInput:a}}_createAlignmentFields(){const e=this.locale,i=this.t,r=new js(e);r.text=i("Alignment");const s=new oc(e);return s.set({role:"radiogroup",isCompact:!0,ariaLabel:i("Table alignment toolbar")}),hS({view:this,icons:{left:uP,center:By,right:Fy},toolbar:s,labels:this._alignmentLabels,propertyName:"alignment",defaultValue:this.options.defaultTableProperties.alignment}),{alignmentLabel:r,alignmentToolbar:s}}_createActionButtons(){const e=this.locale,i=this.t,r=new wt(e),s=new wt(e),o=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.widthInput,this.heightInput];return r.set({label:i("Save"),icon:M0,class:"ck-button-save",type:"submit",withText:!0}),r.bind("isEnabled").toMany(o,"errorText",(...a)=>a.every(l=>!l)),s.set({label:i("Cancel"),icon:L0,class:"ck-button-cancel",withText:!0}),s.delegate("execute").to(this,"cancel"),{saveButtonView:r,cancelButtonView:s}}get _alignmentLabels(){const e=this.locale,i=this.t,r=i("Align table to the left"),s=i("Center table"),o=i("Align table to the right");return e.uiLanguageDirection==="rtl"?{right:o,center:s,left:r}:{left:r,center:s,right:o}}}function qb(n){return n!=="none"}const jMe=500,jM={borderStyle:"tableBorderStyle",borderColor:"tableBorderColor",borderWidth:"tableBorderWidth",backgroundColor:"tableBackgroundColor",width:"tableWidth",height:"tableHeight",alignment:"tableAlignment"};class qMe extends Ne{constructor(e){super(e);y(this,"_defaultContentTableProperties");y(this,"_defaultLayoutTableProperties");y(this,"_balloon");y(this,"view",null);y(this,"_viewWithContentTableDefaults",null);y(this,"_viewWithLayoutTableDefaults",null);y(this,"_undoStepBatch");y(this,"_isReady");e.config.define("table.tableProperties",{borderColors:s_,backgroundColors:s_})}static get requires(){return[bo]}static get pluginName(){return"TablePropertiesUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;this._defaultContentTableProperties=u9(e.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0}),this._defaultLayoutTableProperties=q0(),this._balloon=e.plugins.get(bo),e.ui.componentFactory.add("tableProperties",()=>this._createTablePropertiesButton())}_createTablePropertiesButton(){const e=this.editor,i=e.t,r=new wt(e.locale);r.set({label:i("Table properties"),icon:BTe,tooltip:!0}),this.listenTo(r,"execute",()=>this._showView());const s=Object.values(jM).map(o=>e.commands.get(o));return r.bind("isEnabled").toMany(s,"isEnabled",(...o)=>o.some(a=>a)),r}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(e){const i=this.editor,r=i.config.get("table.tableProperties"),s=jy(r.borderColors),o=Wy(i.locale,s),a=jy(r.backgroundColors),l=Wy(i.locale,a),c=r.colorPicker!==!1,u=new WMe(i.locale,{borderColors:o,backgroundColors:l,defaultTableProperties:e,colorPickerConfig:c?r.colorPicker||{}:!1}),d=i.t;u.render(),this.listenTo(u,"submit",()=>{this._hideView()}),this.listenTo(u,"cancel",()=>{this._undoStepBatch.operations.length&&i.execute("undo",this._undoStepBatch),this._hideView()}),u.keystrokes.set("Esc",(g,v)=>{this._hideView(),v()}),pc({emitter:u,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const f=t9(d),h=n9(d);return u.on("change:borderStyle",this._getPropertyChangeCallback("tableBorderStyle")),u.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:u.borderColorInput,commandName:"tableBorderColor",errorText:f,validator:r_})),u.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:u.borderWidthInput,commandName:"tableBorderWidth",errorText:h,validator:i9})),u.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:u.backgroundInput,commandName:"tableBackgroundColor",errorText:f,validator:r_})),u.on("change:width",this._getValidatedPropertyChangeCallback({viewField:u.widthInput,commandName:"tableWidth",errorText:h,validator:vp})),u.on("change:height",this._getValidatedPropertyChangeCallback({viewField:u.heightInput,commandName:"tableHeight",errorText:h,validator:vp})),u.on("change:alignment",this._getPropertyChangeCallback("tableAlignment")),u}_fillViewFormFromCommandValues(){const e=this.editor.commands,i=e.get("tableBorderStyle");Object.entries(jM).map(([r,s])=>{const o=r,a=this.view===this._viewWithContentTableDefaults?this._defaultContentTableProperties[o]||"":this._defaultLayoutTableProperties[o]||"";return[o,e.get(s).value||a]}).forEach(([r,s])=>{(r==="borderColor"||r==="borderWidth")&&i.value==="none"||this.view.set(r,s)}),this._isReady=!0}_showView(){const e=this.editor,i=i_(e.editing.view.document.selection),r=i&&e.editing.mapper.toModelElement(i),s=!r||r.getAttribute("tableType")!=="layout";s&&!this._viewWithContentTableDefaults?this._viewWithContentTableDefaults=this._createPropertiesView(this._defaultContentTableProperties):!s&&!this._viewWithLayoutTableDefaults&&(this._viewWithLayoutTableDefaults=this._createPropertiesView(this._defaultLayoutTableProperties)),this.view=s?this._viewWithContentTableDefaults:this._viewWithLayoutTableDefaults,this.listenTo(e.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:a9(e)}),this._undoStepBatch=e.model.createBatch(),this.view.focus()}_hideView(){const e=this.editor;this.stopListening(e.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const e=this.editor,i=e.editing.view.document;i_(i.selection)?this._isViewVisible&&o9(e,"table"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(e){return(i,r,s)=>{this._isReady&&this.editor.execute(e,{value:s,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(e){const{commandName:i,viewField:r,validator:s,errorText:o}=e,a=go(()=>{r.errorText=o},jMe);return(l,c,u)=>{a.cancel(),this._isReady&&(s(u)?(this.editor.execute(i,{value:u,batch:this._undoStepBatch}),r.errorText=null):a())}}}class GMe extends Ne{static get pluginName(){return"TableProperties"}static get isOfficialPlugin(){return!0}static get requires(){return[FMe,qMe]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function KMe(n){n.document.registerPostFixer(t=>YMe(t,n))}function YMe(n,t){const e=t.document.differ.getChanges();let i=!1;for(const r of e){if(r.type!="insert")continue;const s=r.position.parent;if(s.is("element","table")||r.name=="table"){const o=r.name=="table"?r.position.nodeAfter:s,a=Array.from(o.getChildren()).filter(c=>c.is("element","caption")),l=a.shift();if(!l)continue;for(const c of a)n.move(n.createRangeIn(c),l,"end"),n.remove(c);l.nextSibling&&(n.move(n.createRangeOn(l),o,"end"),i=!0),i=!!a.length||i}}return i}function qM(n){return!!n&&n.is("element","table")}function gS(n){for(const t of n.getChildren())if(t.is("element","caption"))return t;return null}function QMe(n){const t=Xc(n);return t?gS(t):null}function ZMe(n){const t=n.parent;return n.name=="figcaption"&&t&&t.is("element","figure")&&t.hasClass("table")?{name:!0}:n.name=="caption"&&t&&t.is("element","table")?{name:!0}:null}class JMe extends Nt{refresh(){const t=this.editor,e=Xc(t.model.document.selection);this.isEnabled=!!e&&t.model.schema.checkChild(e,"caption"),this.isEnabled?this.value=!!gS(e):this.value=!1}execute({focusCaptionOnShow:t=!1}={}){this.editor.model.change(e=>{this.value?this._hideTableCaption(e):this._showTableCaption(e,t)})}_showTableCaption(t,e){const i=this.editor.model,r=Xc(i.document.selection),a=this.editor.plugins.get("TableCaptionEditing")._getSavedCaption(r)||t.createElement("caption");i.insertContent(a,r,"end"),e&&t.setSelection(a,"in")}_hideTableCaption(t){const e=this.editor.model,i=Xc(e.document.selection),r=this.editor.plugins.get("TableCaptionEditing"),s=gS(i);r._saveCaption(i,s),e.deleteContent(t.createSelection(s,"on"))}}class XMe extends Ne{constructor(e){super(e);y(this,"_savedCaptionsMap");this._savedCaptionsMap=new WeakMap}static get pluginName(){return"TableCaptionEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=e.model.schema,r=e.editing.view,s=e.t;i.isRegistered("caption")?i.extend("caption",{allowIn:"table"}):i.register("caption",{allowIn:"table",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleTableCaption",new JMe(this.editor)),e.conversion.for("upcast").elementToElement({view:ZMe,model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(o,{writer:a})=>qM(o.parent)?a.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(o,{writer:a})=>{if(!qM(o.parent))return null;const l=a.createEditableElement("figcaption");return a.setCustomProperty("tableCaption",!0,l),l.placeholder=s("Enter table caption"),KI({view:r,element:l,keepOnFocus:!0}),EP(l,a)}}),KMe(e.model)}_getSavedCaption(e){const i=this._savedCaptionsMap.get(e);return i?xi.fromJSON(i):null}_saveCaption(e,i){this._savedCaptionsMap.set(e,i.toJSON())}}class e$e extends Ne{static get pluginName(){return"TableCaptionUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view,i=t.t;t.ui.componentFactory.add("toggleTableCaption",r=>{const s=t.commands.get("toggleTableCaption"),o=new wt(r);return o.set({icon:P8,tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(s,"value","isEnabled"),o.bind("label").to(s,"value",a=>i(a?"Toggle caption off":"Toggle caption on")),this.listenTo(o,"execute",()=>{if(t.execute("toggleTableCaption",{focusCaptionOnShow:!0}),s.value){const a=QMe(t.model.document.selection),l=t.editing.mapper.toViewElement(a);if(!l)return;e.scrollToTheSelection(),e.change(c=>{c.addClass("table__caption_highlighted",l)})}t.editing.view.focus()}),o})}}class t$e extends Ne{static get pluginName(){return"TableCaption"}static get isOfficialPlugin(){return!0}static get requires(){return[XMe,e$e]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const n$e={de:{dictionary:{"Words: %0":"Wörter: %0 ","Characters: %0":"Zeichen: %0 ","Widget toolbar":"Widget Werkzeugleiste","Insert paragraph before block":"Absatz vor Block einfügen","Insert paragraph after block":"Absatz nach Block einfügen","Press Enter to type after or press Shift + Enter to type before the widget":"Drücken Sie die Eingabetaste, um nach dem Widget zu tippen oder Shift + Eingabetaste, um vor dem Widget zu tippen.","Keystrokes that can be used when a widget is selected (for example: image, table, etc.)":"Tastatureingaben, die verwendet werden können, wenn ein Widget ausgewählt wurde (zum Beispiel: Bilder, Tabellen etc.)","Insert a new paragraph directly after a widget":"Einen neuen Abschnitt direkt nach einem Widget einfügen","Insert a new paragraph directly before a widget":"Einen neuen Abschnitt direkt vor einem Widget einfügen","Move the caret to allow typing directly before a widget":"Verschieben Sie den Textcursor, um die Eingabe direkt nach dem Widget zu erlauben","Move the caret to allow typing directly after a widget":"Verschieben Sie den Textcursor, um die direkte Eingabe nach dem Widget zu erlauben","Move focus from an editable area back to the parent widget":"Bewegen Sie den Fokus von einem bearbeitbaren Bereich zurück zum übergeordneten Widget","Upload in progress":"Upload läuft",Undo:"Rückgängig",Redo:"Wiederherstellen","Rich Text Editor":"Rich Text Editor","Edit block":"Absatz bearbeiten","Click to edit block":"Zum Bearbeiten des Blocks klicken","Drag to move":"Zum Verschieben ziehen",Next:"Nächste",Previous:"vorherige","Editor toolbar":"Editor Werkzeugleiste","Dropdown toolbar":"Dropdown-Liste Werkzeugleiste","Dropdown menu":"Dropdown-Menü",Black:"Schwarz","Dim grey":"Dunkelgrau",Grey:"Grau","Light grey":"Hellgrau",White:"Weiß",Red:"Rot",Orange:"Orange",Yellow:"Gelb","Light green":"Hellgrün",Green:"Grün",Aquamarine:"Aquamarinblau",Turquoise:"Türkis","Light blue":"Hellblau",Blue:"Blau",Purple:"Violett","Editor block content toolbar":"Editor Blockinhalt-Toolbar","Editor contextual toolbar":"Editor kontextuelle Toolbar",HEX:"HEX","No results found":"Keine Ergebnisse gefunden","No searchable items":"Keine durchsuchbaren Elemente","Editor dialog":"Editor-Dialog",Close:"Schließen","Help Contents. To close this dialog press ESC.":"Hilfe zum Inhalt. Drücken Sie die Esc-Taste, um dieses Dialogfenster zu schließen.","Below, you can find a list of keyboard shortcuts that can be used in the editor.":"Unten finden Sie eine Liste mit Tastenkombinationen, die im Editor benutzt werden können.","(may require <kbd>Fn</kbd>)":"(erfordert gegebenenfalls <kbd>Fn</kbd>)",Accessibility:"Bedienungshilfen","Accessibility help":"Hilfe zur Eingabe","Press %0 for help.":"Drücken Sie %0 für Hilfe.","Move focus in and out of an active dialog window":"Fokus auf ein aktives Dialogfenster richten oder aufheben",MENU_BAR_MENU_FILE:"Datei",MENU_BAR_MENU_EDIT:"Bearbeiten",MENU_BAR_MENU_VIEW:"Anzeigen",MENU_BAR_MENU_INSERT:"Einfügen",MENU_BAR_MENU_FORMAT:"Format",MENU_BAR_MENU_TOOLS:"Werkzeuge",MENU_BAR_MENU_HELP:"Hilfe",MENU_BAR_MENU_TEXT:"Text",MENU_BAR_MENU_FONT:"Schriftart","Editor menu bar":"Menüleiste des Editors",'Please enter a valid color (e.g. "ff0000").':"Bitte geben Sie eine gültige Farbe ein (z. B. „ff0000“).","Insert table":"Tabelle einfügen","Header column":"Kopfspalte","Insert column left":"Spalte links einfügen","Insert column right":"Spalte rechts einfügen","Delete column":"Spalte löschen","Select column":"Spalte auswählen",Column:"Spalte","Header row":"Kopfzeile","Insert row below":"Zeile unten einfügen","Insert row above":"Zeile oben einfügen","Delete row":"Zeile löschen","Select row":"Zeile auswählen",Row:"Zeile","Merge cell up":"Zelle verbinden","Merge cell right":"Zelle rechts verbinden","Merge cell down":"Zelle unten verbinden","Merge cell left":"Zelle links verbinden","Split cell vertically":"Zelle vertikal teilen","Split cell horizontally":"Zelle horizontal teilen","Merge cells":"Zellen verbinden","Table toolbar":"Tabelle Werkzeugleiste","Table properties":"Tabelleneigenschaften","Cell properties":"Zelleneigenschaften",Border:"Rahmen",Style:"Rahmenart",Width:"Breite",Height:"Höhe",Color:"Farbe",Background:"Hintergrund",Padding:"Innenabstand",Dimensions:"Größe","Table cell text alignment":"Ausrichtung des Zellentextes",Alignment:"Ausrichtung","Horizontal text alignment toolbar":"Werkzeugleiste für die horizontale Zellentext-Ausrichtung","Vertical text alignment toolbar":"Werkzeugleiste für die vertikale Zellentext-Ausrichtung","Table alignment toolbar":"Werkzeugleiste für die Tabellen-Ausrichtung",None:"Kein Rahmen",Solid:"Durchgezogen",Dotted:"Gepunktet",Dashed:"Gestrichelt",Double:"Doppelt",Groove:"Eingeritzt",Ridge:"Hervorgehoben",Inset:"Eingelassen",Outset:"Geprägt","Align cell text to the left":"Zellentext linksbündig ausrichten","Align cell text to the center":"Zellentext zentriert ausrichten","Align cell text to the right":"Zellentext rechtsbündig ausrichten","Justify cell text":"Zellentext als Blocksatz ausrichten","Align cell text to the top":"Zellentext oben ausrichten","Align cell text to the middle":"Zellentext mittig ausrichten","Align cell text to the bottom":"Zellentext unten ausrichten","Align table to the left":"Tabelle links ausrichten","Center table":"Tabelle zentrieren","Align table to the right":"Tabelle rechts ausrichten",'The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".':"Die Farbe ist ungültig. Probieren Sie „#FF0000“ oder „rgb(255,0,0)“ oder „red“.",'The value is invalid. Try "10px" or "2em" or simply "2".':"Der Wert ist ungültig. Probieren Sie „10px“ oder „2em“ oder „2“.","Enter table caption":"Tabellenüberschrift eingeben","Keystrokes that can be used in a table cell":"Tastatureingaben, die in einer Tabelle benutz werden können.","Move the selection to the next cell":"Auswahl in die nächste Zelle verschieben","Move the selection to the previous cell":"Auswahl in die vorherige Zelle verschieben","Insert a new table row (when in the last cell of a table)":"Eine neue Tabellenspalte einfügen (wenn in der letzten Tabellenzelle)","Navigate through the table":"Tabellennavigation",Table:"Tabelle","Insert table layout":"Tabellenlayout einfügen","Table layout":"Tabellenlayout","Layout table":"Layouttabelle","Content table":"Inhaltstabelle","Choose table type":"Tabellentyp auswählen","Table type":"Tabellentyp","Table type options":"Tabellentyp-Optionen",Styles:"Stile","Multiple styles":"Mehrere Stile","Block styles":"Block-Stile","Text styles":"Text-Stile","Special characters":"Sonderzeichen",Category:"Kategorie",All:"Alle",Arrows:"Pfeile",Currency:"Währung",Latin:"Lateinisch",Mathematical:"Mathematisch",Text:"Text","leftwards simple arrow":"einfacher Linkspfeil","rightwards simple arrow":"einfacher Rechtspfeil","upwards simple arrow":"einfacher Aufwärtspfeil","downwards simple arrow":"einfacher Abwärtspfeil","leftwards double arrow":"Doppelpfeil nach links","rightwards double arrow":"Doppelpfeil nach rechts","upwards double arrow":"Doppelpfeil nach oben","downwards double arrow":"Doppelpfeil nach unten","leftwards dashed arrow":"Gestrichelter Pfeil nach links","rightwards dashed arrow":"Gestrichelter Pfeil nach rechts","upwards dashed arrow":"Gestrichelter Pfeil nach oben","downwards dashed arrow":"Gestrichelter Pfeil nach unten","leftwards arrow to bar":"Pfeil nach links zum Querstrich","rightwards arrow to bar":"Pfeil nach rechts zum Querstrich","upwards arrow to bar":"Pfeil nach oben zum Querstrich","downwards arrow to bar":"Pfeil nach unten zum Querstrich","up down arrow with base":"Unterstrichener Pfeil nach oben und unten","back with leftwards arrow above":"„Back“ darüber Pfeil nach links","end with leftwards arrow above":"„End“ darüber Pfeil nach links","on with exclamation mark with left right arrow above":"„On“ mit Ausrufezeichen darüber Pfeil nach links und rechts","soon with rightwards arrow above":"„Soon“ darüber Pfeil nach rechts","top with upwards arrow above":"„Top“ darüber Pfeil nach oben","Dollar sign":"Dollar-Zeichen","Euro sign":"Euro-Zeichen","Yen sign":"Yen-Zeichen","Pound sign":"Pfund-Zeichen","Cent sign":"Cent-Zeichen","Euro-currency sign":"Euro-Währungszeichen","Colon sign":"Colón-Zeichen","Cruzeiro sign":"Cruzeiro-Zeichen","French franc sign":"Französischer Franc-Zeichen","Lira sign":"Lira-Zeichen","Currency sign":"Währungssymbol","Bitcoin sign":"Bitcoin-Zeichen","Mill sign":"Mill-Zeichen","Naira sign":"Naira-Zeichen","Peseta sign":"Peseta-Zeichen","Rupee sign":"Rupie-Zeichen","Won sign":"Won-Zeichen","New sheqel sign":"Schekel-Zeichen","Dong sign":"Đồng-Zeichen","Kip sign":"Kip-Zeichen","Tugrik sign":"Tugrik-Zeichen","Drachma sign":"Drachme-Zeichen","German penny sign":"Pfennig-Zeichen","Peso sign":"Philippinischer Peso-Zeichen","Guarani sign":"Guaraní-Zeichen","Austral sign":"Austral-Zeichen","Hryvnia sign":"Hrywnja-Zeichen","Cedi sign":"Cedi-Zeichen","Livre tournois sign":"Livre tournois-Zeichen","Spesmilo sign":"Spesmilo-Zeichen","Tenge sign":"Tenge-Zeichen","Indian rupee sign":"Indische Rupie-Zeichen","Turkish lira sign":"Türkische Lira-Zeichen","Nordic mark sign":"Nordische Mark-Zeichen","Manat sign":"Manat-Zeichen","Ruble sign":"Rubel-Zeichen","Latin capital letter a with macron":"Lateinischer Großbuchstabe a mit Makron","Latin small letter a with macron":"Lateinischer Kleinbuchstabe a mit Makron","Latin capital letter a with breve":"Lateinischer Großbuchstabe a mit Breve","Latin small letter a with breve":"Lateinischer Kleinbuchstabe a mit Breve","Latin capital letter a with ogonek":"Lateinischer Großbuchstabe a mit Ogonek","Latin small letter a with ogonek":"Lateinischer Kleinbuchstabe a mit Ogonek","Latin capital letter c with acute":"Lateinischer Großbuchstabe c mit Akut","Latin small letter c with acute":"Lateinischer Kleinbuchstabe c mit Akut","Latin capital letter c with circumflex":"Lateinischer Großbuchstabe c mit Zirkumflex","Latin small letter c with circumflex":"Lateinischer Kleinbuchstabe c mit Zirkumflex","Latin capital letter c with dot above":"Lateinischer Großbuchstabe c mit Punkt darüber","Latin small letter c with dot above":"Lateinischer Kleinbuchstabe c mit Punkt darüber","Latin capital letter c with caron":"Lateinischer Großbuchstabe c mit Hatschek","Latin small letter c with caron":"Lateinischer Kleinbuchstabe c mit Hatschek","Latin capital letter d with caron":"Lateinischer Großbuchstabe d mit Hatschek","Latin small letter d with caron":"Lateinischer Kleinbuchstabe d mit Hatschek","Latin capital letter d with stroke":"Lateinischer Großbuchstabe d mit Querstrich","Latin small letter d with stroke":"Lateinischer Kleinbuchstabe d mit Querstrich","Latin capital letter e with macron":"Lateinischer Großbuchstabe e mit Makron","Latin small letter e with macron":"Lateinischer Kleinbuchstabe e mit Makron","Latin capital letter e with breve":"Lateinischer Großbuchstabe e mit Breve","Latin small letter e with breve":"Lateinischer Kleinbuchstabe e mit Breve","Latin capital letter e with dot above":"Lateinischer Großbuchstabe e mit Punkt darüber","Latin small letter e with dot above":"Lateinischer Kleinbuchstabe e mit Punkt darüber","Latin capital letter e with ogonek":"Lateinischer Großbuchstabe e mit Ogonek","Latin small letter e with ogonek":"Lateinischer Kleinbuchstabe e mit Ogonek","Latin capital letter e with caron":"Lateinischer Großbuchstabe e mit Hatschek","Latin small letter e with caron":"Lateinischer Kleinbuchstabe e mit Hatschek","Latin capital letter g with circumflex":"Lateinischer Großbuchstabe g mit Zirkumflex","Latin small letter g with circumflex":"Lateinischer Kleinbuchstabe g mit Zirkumflex","Latin capital letter g with breve":"Lateinischer Großbuchstabe g mit Breve","Latin small letter g with breve":"Lateinischer Kleinbuchstabe g mit Breve","Latin capital letter g with dot above":"Lateinischer Großbuchstabe g mit Punkt darüber","Latin small letter g with dot above":"Lateinischer Kleinbuchstabe g mit Punkt darüber","Latin capital letter g with cedilla":"Lateinischer Großbuchstabe g mit Cedille","Latin small letter g with cedilla":"Lateinischer Kleinbuchstabe g mit Cedille","Latin capital letter h with circumflex":"Lateinischer Großbuchstabe h mit Zirkumflex","Latin small letter h with circumflex":"Lateinischer Kleinbuchstabe h mit Zirkumflex","Latin capital letter h with stroke":"Lateinischer Großbuchstabe h mit Querstrich","Latin small letter h with stroke":"Lateinischer Kleinbuchstabe h mit Querstrich","Latin capital letter i with tilde":"Lateinischer Großbuchstabe i mit Tilde","Latin small letter i with tilde":"Lateinischer Kleinbuchstabe i mit Tilde","Latin capital letter i with macron":"Lateinischer Großbuchstabe i mit Makron","Latin small letter i with macron":"Lateinischer Kleinbuchstabe i mit Makron","Latin capital letter i with breve":"Lateinischer Großbuchstabe i mit Breve","Latin small letter i with breve":"Lateinischer Kleinbuchstabe i mit Breve","Latin capital letter i with ogonek":"Lateinischer Großbuchstabe i mit Ogonek","Latin small letter i with ogonek":"Lateinischer Kleinbuchstabe i mit Ogonek","Latin capital letter i with dot above":"Lateinischer Großbuchstabe i mit Punkt darüber","Latin small letter dotless i":"Lateinischer Kleinbuchstabe i ohne Punkt","Latin capital ligature ij":"Große lateinische Ligatur ij","Latin small ligature ij":"Kleine lateinische Ligatur ij","Latin capital letter j with circumflex":"Lateinischer Großbuchstabe j mit Zirkumflex","Latin small letter j with circumflex":"Lateinischer Kleinbuchstabe j mit Zirkumflex","Latin capital letter k with cedilla":"Lateinischer Großbuchstabe k mit Cedille","Latin small letter k with cedilla":"Lateinischer Kleinbuchstabe k mit Cedille","Latin small letter kra":"Lateinischer Kleinbuchstabe Kra","Latin capital letter l with acute":"Lateinischer Großbuchstabe l mit Akut","Latin small letter l with acute":"Lateinischer Kleinbuchstabe l mit Akut","Latin capital letter l with cedilla":"Lateinischer Großbuchstabe l mit Cedille","Latin small letter l with cedilla":"Lateinischer Kleinbuchstabe l mit Cedille","Latin capital letter l with caron":"Lateinischer Großbuchstabe l mit Hatschek","Latin small letter l with caron":"Lateinischer Kleinbuchstabe l mit Hatschek","Latin capital letter l with middle dot":"Lateinischer Großbuchstabe l mit Mittelpunkt","Latin small letter l with middle dot":"Lateinischer Kleinbuchstabe l mit Mittelpunkt","Latin capital letter l with stroke":"Lateinischer Großbuchstabe l mit Querstrich","Latin small letter l with stroke":"Lateinischer Kleinbuchstabe l mit Querstrich","Latin capital letter n with acute":"Lateinischer Großbuchstabe n mit Akut","Latin small letter n with acute":"Lateinischer Kleinbuchstabe n mit Akut","Latin capital letter n with cedilla":"Lateinischer Großbuchstabe n mit Cedille","Latin small letter n with cedilla":"Lateinischer Kleinbuchstabe n mit Cedille","Latin capital letter n with caron":"Lateinischer Großbuchstabe n mit Hatschek","Latin small letter n with caron":"Lateinischer Kleinbuchstabe n mit Hatschek","Latin small letter n preceded by apostrophe":"Lateinischer Kleinbuchstabe n mit vorangestelltem Apostroph","Latin capital letter eng":"Lateinischer Großbuchstabe Eng","Latin small letter eng":"Lateinischer Kleinbuchstabe Eng","Latin capital letter o with macron":"Lateinischer Großbuchstabe o mit Makron","Latin small letter o with macron":"Lateinischer Kleinbuchstabe o mit Makron","Latin capital letter o with breve":"Lateinischer Großbuchstabe o mit Breve","Latin small letter o with breve":"Lateinischer Kleinbuchstabe o mit Breve","Latin capital letter o with double acute":"Lateinischer Großbuchstabe o mit doppeltem Akut","Latin small letter o with double acute":"Lateinischer Kleinbuchstabe o mit doppeltem Akut","Latin capital ligature oe":"Große lateinische Ligatur oe","Latin small ligature oe":"Kleine lateinische Ligatur oe","Latin capital letter r with acute":"Lateinischer Großbuchstabe r mit Akut","Latin small letter r with acute":"Lateinischer Kleinbuchstabe r mit Akut","Latin capital letter r with cedilla":"Lateinischer Großbuchstabe r mit Cedille","Latin small letter r with cedilla":"Lateinischer Kleinbuchstabe r mit Cedille","Latin capital letter r with caron":"Lateinischer Großbuchstabe r mit Hatschek","Latin small letter r with caron":"Lateinischer Kleinbuchstabe r mit Hatschek","Latin capital letter s with acute":"Lateinischer Großbuchstabe s mit Akut","Latin small letter s with acute":"Lateinischer Kleinbuchstabe s mit Akut","Latin capital letter s with circumflex":"Lateinischer Großbuchstabe s mit Zirkumflex","Latin small letter s with circumflex":"Lateinischer Kleinbuchstabe s mit Zirkumflex","Latin capital letter s with cedilla":"Lateinischer Großbuchstabe s mit Cedille","Latin small letter s with cedilla":"Lateinischer Kleinbuchstabe s mit Cedille","Latin capital letter s with caron":"Lateinischer Großbuchstabe s mit Hatschek","Latin small letter s with caron":"Lateinischer Kleinbuchstabe s mit Hatschek","Latin capital letter t with cedilla":"Lateinischer Großbuchstabe t mit Cedille","Latin small letter t with cedilla":"Lateinischer Kleinbuchstabe t mit Cedille","Latin capital letter t with caron":"Lateinischer Großbuchstabe t mit Hatschek","Latin small letter t with caron":"Lateinischer Kleinbuchstabe t mit Hatschek","Latin capital letter t with stroke":"Lateinischer Großbuchstabe t mit Querstrich","Latin small letter t with stroke":"Lateinischer Kleinbuchstabe t mit Querstrich","Latin capital letter u with tilde":"Lateinischer Großbuchstabe u mit Tilde","Latin small letter u with tilde":"Lateinischer Kleinbuchstabe u mit Tilde","Latin capital letter u with macron":"Lateinischer Großbuchstabe u mit Makron","Latin small letter u with macron":"Lateinischer Kleinbuchstabe u mit Makron","Latin capital letter u with breve":"Lateinischer Großbuchstabe u mit Breve","Latin small letter u with breve":"Lateinischer Kleinbuchstabe u mit Breve","Latin capital letter u with ring above":"Lateinischer Großbuchstabe u mit Kroužek darüber","Latin small letter u with ring above":"Lateinischer Kleinbuchstabe u mit Kroužek darüber","Latin capital letter u with double acute":"Lateinischer Großbuchstabe u mit doppeltem Akut","Latin small letter u with double acute":"Lateinischer Kleinbuchstabe u mit doppeltem Akut","Latin capital letter u with ogonek":"Lateinischer Großbuchstabe u mit Ogonek","Latin small letter u with ogonek":"Lateinischer Kleinbuchstabe u mit Ogonek","Latin capital letter w with circumflex":"Lateinischer Großbuchstabe w mit Zirkumflex","Latin small letter w with circumflex":"Lateinischer Kleinbuchstabe w mit Zirkumflex","Latin capital letter y with circumflex":"Lateinischer Großbuchstabe y mit Zirkumflex","Latin small letter y with circumflex":"Lateinischer Kleinbuchstabe y mit Zirkumflex","Latin capital letter y with diaeresis":"Lateinischer Großbuchstabe y mit Trema","Latin capital letter z with acute":"Lateinischer Großbuchstabe z mit Akut","Latin small letter z with acute":"Lateinischer Kleinbuchstabe z mit Akut","Latin capital letter z with dot above":"Lateinischer Großbuchstabe z mit Punkt darüber","Latin small letter z with dot above":"Lateinischer Kleinbuchstabe z mit Punkt darüber","Latin capital letter z with caron":"Lateinischer Großbuchstabe z mit Hatschek","Latin small letter z with caron":"Lateinischer Kleinbuchstabe z mit Hatschek","Latin small letter long s":"Lateinischer Kleinbuchstabe langes s","Less-than sign":"Kleiner-als-Zeichen","Greater-than sign":"Größer-als-Zeichen","Less-than or equal to":"Kleiner als oder gleich","Greater-than or equal to":"Größer als oder gleich","En dash":"Halbgeviertstrich","Em dash":"Geviertstrich",Macron:"Makron",Overline:"Überstrich","Degree sign":"Grad-Zeichen","Minus sign":"Minus-Zeichen","Plus-minus sign":"Plus-Minus-Zeichen","Division sign":"Geteilt-Zeichen","Fraction slash":"Schrägstrich","Multiplication sign":"Mal-Zeichen","Latin small letter f with hook":"Lateinischer Kleinbuchstabe f mit Haken",Integral:"Integral-Zeichen","N-ary summation":"Summen-Zeichen",Infinity:"Unendlich-Zeichen","Square root":"Wurzel-Zeichen","Tilde operator":"Tilde-Operator","Approximately equal to":"Ungefähr gleich","Almost equal to":"Gerundet","Not equal to":"Ungleich","Identical to":"Identisch mit","Element of":"Element von","Not an element of":"Kein Element von","Contains as member":"Enthält als Element","N-ary product":"Produkt-Zeichen","Logical and":"Logisches und","Logical or":"Logisches oder","Not sign":"Negations-Zeichen",Intersection:"Schnitt",Union:"Vereinigung","Partial differential":"Partielle Ableitung","For all":"Allquantor","There exists":"Existenzquantor","Empty set":"Leere Menge",Nabla:"Nabla","Asterisk operator":"Hodge-Stern-Operator","Proportional to":"Proportional zu",Angle:"Winkel-Zeichen","Vulgar fraction one quarter":"Gemeiner Bruch ein Viertel","Vulgar fraction one half":"Gemeiner Bruch ein Halb","Vulgar fraction three quarters":"Gemeiner Bruch drei Viertel","Single left-pointing angle quotation mark":"Einfache Guillemets nach links","Single right-pointing angle quotation mark":"Einfache Guillemets nach rechts","Left-pointing double angle quotation mark":"Doppelte Guillemets nach links","Right-pointing double angle quotation mark":"Doppelte Guillemets nach rechts","Left single quotation mark":"Einfache Anführungszeichen links","Right single quotation mark":"Einfache Anführungszeichen rechts","Left double quotation mark":"Doppelte Anführungszeichen links","Right double quotation mark":"Doppelte Anführungszeichen rechts","Single low-9 quotation mark":"Einfache Anführungszeichen links unten","Double low-9 quotation mark":"Doppelte Anführungszeichen links unten","Inverted exclamation mark":"Umgekehrtes Ausrufezeichen","Inverted question mark":"Umgekehrtes Fragezeichen","Two dot leader":"Doppel-Punktlinie","Horizontal ellipsis":"Auslassungspunkte","Double dagger":"Zweibalkenkreuz","Per mille sign":"Promille-Zeichen","Per ten thousand sign":"Pro-Zehntausend-Zeichen","Double exclamation mark":"Doppeltes Ausrufezeichen","Question exclamation mark":"Frage-Ruf-Zeichen","Exclamation question mark":"Ruf-Frage-Zeichen","Double question mark":"Doppeltes Fragezeichen","Copyright sign":"Copyright-Zeichen","Registered sign":"Registered-Trade-Mark-Zeichen","Trade mark sign":"Unregistered-Trade-Mark-Zeichen","Section sign":"Paragraphen-Zeichen","Paragraph sign":"Absatz-Zeichen","Reversed paragraph sign":"Umgedrehtes Absatz-Zeichen","Show source":"Quelle anzeigen","Show blocks":"Blöcke anzeigen","Select all":"Alles auswählen","Disable editing":"Bearbeitung deaktivieren","Enable editing":"Bearbeitung zulassen","Previous editable region":"Vorheriger bearbeitbarer Bereich","Next editable region":"Nächster bearbeitbarer Bereich","Navigate editable regions":"Durch bearbeitbare Bereiche navigieren","Remove Format":"Formatierung entfernen","Page break":"Seitenumbruch","media widget":"Medien-Widget","Media URL":"Medien-URL","Paste the media URL in the input.":"Medien-URL in das Eingabefeld einfügen.","Tip: Paste the URL into the content to embed faster.":"Tipp: Zum schnelleren Einbetten können Sie die Medien-URL in den Inhalt einfügen.","The URL must not be empty.":"Die URL darf nicht leer sein.","This media URL is not supported.":"Diese Medien-URL wird nicht unterstützt.","Insert media":"Medium einfügen",Media:"Medien","Media toolbar":"Medien Werkzeugleiste","Open media in new tab":"Medien in neuem Tab öffnen","Media embed":"Medieneinbettung","Numbered List":"Nummerierte Liste","Bulleted List":"Aufzählungsliste","To-do List":"Aufgabenliste","Bulleted list styles toolbar":"Darstellung der ungeordneten Liste","Numbered list styles toolbar":"Darstellung der geordneten Liste","Toggle the disc list style":"Gefüllten Kreis einstellen","Toggle the circle list style":"Leeren Kreis einstellen","Toggle the square list style":"Quadrat einstellen","Toggle the decimal list style":"Dezimalzahlen einstellen","Toggle the decimal with leading zero list style":"Dezimalzahlen mit vorangestellten Nullen einstellen","Toggle the lower–roman list style":"Kleingeschriebene römische Zahlen einstellen","Toggle the upper–roman list style":"Großgeschriebene römische Zahlen einstellen","Toggle the lower–latin list style":"Kleingeschriebene lateinische Buchstaben einstellen","Toggle the upper–latin list style":"Großgeschriebene lateinische Buchstaben einstellen",Disc:"Gefüllter Kreis",Circle:"Leerer Kreis",Square:"Quadrat",Decimal:"Dezimalzahlen","Decimal with leading zero":"Dezimalzahlen mit vorangestellten Nullen","Lower–roman":"Kleingeschriebene römische Zahlen","Upper-roman":"Großgeschriebene römische Zahlen","Lower-latin":"Kleingeschriebene lateinische Buchstaben","Upper-latin":"Großgeschriebene lateinische Buchstaben","List properties":"Listeneigenschaften","Start at":"Beginnen mit","Invalid start index value.":"Ungültiger Anfangsindexwert.","Start index must be greater than 0.":"Der Startwert muss größer als 0 sein.","Reversed order":"Umgekehrte Reihenfolge","Keystrokes that can be used in a list":"Tastatureingaben, die in einer Liste verwendet werden können.","Increase list item indent":"Listeneinzug vergrößern","Decrease list item indent":"Listeneinzug verkleinern","Entering a to-do list":"Eingabe einer Aufgabenliste","Leaving a to-do list":"Verlassen einer Aufgabenliste",Unlink:"Link entfernen",Link:"Link","Link URL":"Linkadresse","Link URL must not be empty.":"Die Link-URL darf nicht leer sein.","Link image":"Bild verlinken","Edit link":"Link bearbeiten","Open link in new tab":"Link im neuen Tab öffnen","Open in a new tab":"In neuem Tab öffnen",Downloadable:"Herunterladbar","Create link":"Link erstellen","Move out of a link":"Linkauswahl aufheben","Link properties":"Linkeigenschaften","Displayed text":"Angezeigter Text","No links available":"Keine Links verfügbar",Language:"Sprache","Choose language":"Sprache auswählen","Remove language":"Sprache entfernen","Increase indent":"Einzug vergrößern","Decrease indent":"Einzug verkleinern","image widget":"Bild-Steuerelement","Wrap text":"Text umfließt Bild","Break text":"Bild teilt Text","In line":"Text in Zeile","Side image":"Seitenbild","Full size image":"Bild in voller Größe","Left aligned image":"Linksbündiges Bild","Centered image":"Zentriertes Bild","Right aligned image":"Rechtsbündiges Bild","Change image text alternative":"Alternativtext ändern","Text alternative":"Alternativtext","Enter image caption":"Bildunterschrift eingeben","Insert image":"Bild einfügen","Replace image":"Bild ersetzen","Upload from computer":"Vom Computer hochladen","Replace from computer":"Vom Computer ersetzen","Upload image from computer":"Bild vom Computer hochladen","Image from computer":"Bild vom Computer","From computer":"Vom Computer","Replace image from computer":"Bild vom Computer ersetzen","Upload failed":"Hochladen fehlgeschlagen","You have no image upload permissions.":"Sie haben keine Berechtigung zum Hochladen von Bildern.","Image toolbar":"Bild Werkzeugleiste","Resize image":"Bildgröße ändern","Resize image to %0":"Bildgröße ändern in %0","Resize image to the original size":"Bild in Originalgröße ändern","Resize image (in %0)":"Bildgröße ändern (in %0)",Original:"Original","Custom image size":"Benutzerdefinierte Bildgröße",Custom:"Benutzerdefiniert","Image resize list":"Bildgrößen-Liste","Insert image via URL":"Bild von URL einfügen","Insert via URL":"Per URL einfügen","Image via URL":"Bild per URL","Via URL":"Per URL","Update image URL":"Bild-URL aktualisieren","Caption for the image":"Bildunterschrift","Caption for image: %0":"Bildunterschrift: %0","The value must not be empty.":"Der Wert darf nicht leer sein.","The value should be a plain number.":"Der Wert sollte eine einfache Zahl sein.","Uploading image":"Bild hochladen","Image upload complete":"Bild erfolgreich hochgeladen","Error during image upload":"Fehler beim Hochladen des Bildes",Image:"Bild","Image Resize":"Bildgrößenänderung","Text Alternative":"Textalternative","HTML object":"HTML-Objekt","Insert HTML":"HTML einfügen","HTML snippet":"HTML-Snippet","Paste raw HTML here...":"Rohes HTML hier einfügen …","Edit source":"Quelle bearbeiten","Save changes":"Änderungen speichern","No preview available":"Keine Vorschau verfügbar","Empty snippet content":"Leerer Snippet-Inhalt","Horizontal line":"Horizontale Linie","Yellow marker":"Gelber Marker","Green marker":"Grüner Marker","Pink marker":"Pinker Marker","Blue marker":"Blauer Marker","Red pen":"Rote Schriftfarbe","Green pen":"Grüne Schriftfarbe","Remove highlight":"Texthervorhebung entfernen",Highlight:"Texthervorhebung","Text highlight toolbar":"Text hervorheben Werkzeugleiste",Heading:"Überschrift","Choose heading":"Überschrift auswählen","Heading 1":"Überschrift 1","Heading 2":"Überschrift 2","Heading 3":"Überschrift 3","Heading 4":"Überschrift 4","Heading 5":"Überschrift 5","Heading 6":"Überschrift 6","Type your title":"Titel eingeben","Type or paste your content here.":"Hier Inhalt einfügen.","Enter fullscreen mode":"Vollbildmodus aktivieren","Leave fullscreen mode":"Vollbildmodus deaktivieren","Fullscreen mode":"Vollbildmodus","Toggle fullscreen mode":"Vollbildmodus umschalten","Document outline":"Dokumentgliederung","Connected users":"Verbundene Nutzer","Font Size":"Schriftgröße",Tiny:"Sehr klein",Small:"Klein",Big:"Groß",Huge:"Sehr groß","Font Family":"Schriftart",Default:"Standard","Font Color":"Schriftfarbe","Font Background Color":"Hintergrundfarbe","Document colors":"Dokumentfarben","Find and replace":"Suchen und ersetzen","Find in text…":"In Text suchen…",Find:"Suchen","Previous result":"Vorheriges Ergebnis","Next result":"Nächstes Ergebnis",Replace:"Ersetzen","Replace all":"Alle ersetzen","Match case":"Groß-/Kleinschreibung beachten","Whole words only":"Nur ganze Wörter","Replace with…":"Ersetzen durch…","Text to find must not be empty.":"Der Suchtext darf nicht leer sein.","Tip: Find some text first in order to replace it.":"Tipp: Zuerst nach Text suchen um diesen zu ersetzen.","Advanced options":"Erweiterte Optionen","Find in the document":"Dokument durchsuchen","Insert a soft break (a <code>&lt;br&gt;</code> element)":"Einen weichen Zeilenumbruch einfügen (ein <code>&lt;br&gt;</code>-Element)","Insert a hard break (a new paragraph)":"Zeilenumbruch einfügen (einen neuen Abschnitt)",Emoji:"Emojis","Show all emoji...":"Alle Emojis anzeigen ...","Find an emoji (min. 2 characters)":"Emoji finden (min. 2 Zeichen)",'No emojis were found matching "%0".':"Es wurden keine Emojis gefunden, die zu „%0“ passen.","Keep on typing to see the emoji.":"Weiteren Text eingeben, damit Emojis angezeigt werden.","The query must contain at least two characters.":"Die Anfrage muss aus mindestens zwei Zeichen bestehen.","Smileys & Expressions":"Smileys und Emotionen","Gestures & People":"Gesten und Personen","Animals & Nature":"Tiere und Natur","Food & Drinks":"Speisen und Getränke","Travel & Places":"Reisen und Orte",Activities:"Aktivitäten",Objects:"Objekte",Symbols:"Symbole",Flags:"Flaggen","Select skin tone":"Hautfarbe wählen","Default skin tone":"Standardhautfarbe","Light skin tone":"Helle Hautfarbe","Medium Light skin tone":"Mittelhelle Hautfarbe","Medium skin tone":"Mittlere Hautfarbe","Medium Dark skin tone":"Mitteldunkle Hautfarbe","Dark skin tone":"Dunkle Hautfarbe","Emoji picker":"Emoji-Auswahl",Cancel:"Abbrechen",Clear:"Löschen","Remove color":"Farbe entfernen","Restore default":"Standard wiederherstellen",Save:"Speichern","Show more items":"Mehr anzeigen","%0 of %1":"%0 von %1","Cannot upload file:":"Die Datei kann nicht hochgeladen werden:","Rich Text Editor. Editing area: %0":"Rich Text Editor. Bearbeitungsbereich: %0","Insert with file manager":"Mit Dateimanager einfügen","Replace with file manager":"Mittels Dateimanager ersetzen","Insert image with file manager":"Bild mit dem Dateimanager einfügen","Replace image with file manager":"Bild mittels Dateimanager ersetzen",File:"Datei","With file manager":"Mit dem Dateimanager","Toggle caption off":"Tabellenüberschrift deaktivieren","Toggle caption on":"Tabellenüberschrift aktivieren","Content editing keystrokes":"Tastatureingaben zur Inhaltsverarbeitung","These keyboard shortcuts allow for quick access to content editing features.":"Diese Tastenkombinationen ermöglichen einen schnellen Zugang zu den Inhaltsverarbeitungsfunktionen.","User interface and content navigation keystrokes":"Benutzeroberfläche und Inhaltsnavigationstasten","Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface.":"Verwenden Sie die folgenden Tastatureingaben für eine effizientere Navigation auf der CKEditor-5-Benutzeroberfläche.","Close contextual balloons, dropdowns, and dialogs":"Kontextsprechblasen, Dropdown-Menü und Dialoge schließen","Open the accessibility help dialog":"Den Dialog zur Eingabehilfe öffnen","Move focus between form fields (inputs, buttons, etc.)":"Fokus zwischen Formularfeldern verschieben (Eingaben, Tastenfelder etc.)","Move focus to the menu bar, navigate between menu bars":"Fokus auf die Menüleiste richten, zwischen Menüleisten navigieren","Move focus to the toolbar, navigate between toolbars":"Fokus auf die Symbolleiste verschieben, zwischen den Symbolleisten navigieren","Navigate through the toolbar or menu bar":"Durch die Werkzeugleiste oder Menüleiste navigieren","Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content.":"Ausführen der aktuell fokussierten Schaltfläche. Das Ausführen von Schaltflächen, die mit dem Inhalt des Editors interagieren, richtet den Fokus zurück auf den Inhalt.",Accept:"Akzeptieren",Paragraph:"Absatz","Color picker":"Farbwähler","Please try a different phrase or check the spelling.":"Bitte versuchen Sie einen anderen Ausdruck oder überprüfen Sie die Schreibweise.",Source:"Quelle",Insert:"Einfügen",Update:"Aktualisieren",Back:"Zurück","Insert code block":"Code-Block einfügen","Plain text":"Nur Text","Leaving %0 code snippet":"%0 Code-Ausschnitt verlassen","Entering %0 code snippet":"%0 Code-Ausschnitt eingeben","Entering code snippet":"Code-Ausschnit eingeben","Leaving code snippet":"Code-Ausschnit verlassen","Code block":"Codeblock","Copy selected content":"Markierten Inhalt kopieren","Paste content":"Inhalt einfügen","Paste content as plain text":"Inhalt als Klartext einfügen","Insert image or file":"Bild oder Datei einfügen","Could not obtain resized image URL.":"Die URL des angepassten Bildes konnte nicht abgerufen werden.","Selecting resized image failed":"Das angepasste Bild konnte nicht ausgewählt werden.","Could not insert image at the current position.":"Das Bild konnte an der aktuellen Position nicht eingefügt werden.","Inserting image failed":"Einfügen des Bildes fehlgeschlagen",Bookmark:"Lesezeichen","Edit bookmark":"Lesezeichen bearbeiten","Remove bookmark":"Lesezeichen entfernen","Bookmark name":"Name des Lesezeichens","Enter the bookmark name without spaces.":"Geben Sie den Namen des Lesezeichens ohne Leerzeichen ein.","Bookmark must not be empty.":"Das Lesezeichen darf nicht leer sein.","Bookmark name cannot contain space characters.":"Der Name des Lesezeichens darf keine Leerzeichen enthalten.","Bookmark name already exists.":"Der Lesezeichenname existiert bereits.","bookmark widget":"Lesezeichen-Widget","Bookmark toolbar":"Lesezeichen-Werkzeugleiste",Bookmarks:"Lesezeichen","No bookmarks available.":"Keine Lesezeichen verfügbar.","Scroll to bookmark":"Zu Lesezeichen scrollen","Open file manager":"Dateimanager öffnen","Cannot determine a category for the uploaded file.":"Die Kategorie für die hochgeladene Datei konnte nicht bestimmt werden.","Cannot access default workspace.":"Zugriff auf Standardarbeitsbereich nicht möglich.","You have no image editing permissions.":"Sie haben keine Berechtigung zum Bearbeiten von Bildern.","Edit image":"Bild bearbeiten","Processing the edited image.":"Das bearbeitete Bild wird verarbeitet.","Server failed to process the image.":"Der Server konnte das Bild nicht verarbeiten.","Failed to determine category of edited image.":"Es konnte für das bearbeitete Bild keine Kategorie ermittelt werden.","Block quote":"Blockzitat",Bold:"Fett",Italic:"Kursiv",Underline:"Unterstrichen",Code:"Code",Strikethrough:"Durchgestrichen",Subscript:"Tiefgestellt",Superscript:"Hochgestellt","Italic text":"Kursivschrift","Move out of an inline code style":"Inline Code Style verlassen","Bold text":"Fettschrift","Underline text":"Text hervorheben","Strikethrough text":"Durchgestrichener Text","Saving changes":"Änderungen werden gespeichert","Revert autoformatting action":"Automatischen Formatierungsvorgang rückgängig machen","Align left":"Linksbündig","Align right":"Rechtsbündig","Align center":"Zentriert",Justify:"Blocksatz","Text alignment":"Textausrichtung","Text alignment toolbar":"Text-Ausrichtung Toolbar"},getPluralForm(n){return n!=1}}},i$e={class:"static-content-manager"},r$e={class:"nav nav-tabs mb-4"},s$e={class:"nav-item"},o$e={class:"nav-item"},a$e={class:"nav-item"},l$e={key:0,class:"mb-4"},c$e={key:0,class:"text-center py-3"},u$e={key:1,class:"alert alert-info"},d$e={key:2,class:"row"},f$e={class:"col-md-8"},h$e={class:"list-group"},m$e={class:"d-flex justify-content-between align-items-center mb-2"},g$e={class:"mb-1"},p$e=["href"],v$e=["onClick"],b$e={class:"page-slug-manager mt-1 mb-2"},w$e={class:"input-group"},y$e=["id","value","onInput"],_$e=["disabled","onClick"],k$e=["onClick"],E$e={class:"text-muted"},C$e={class:"alert alert-info mt-3"},T$e={key:0,class:"mt-2"},S$e={key:1},A$e={key:0,class:"card mt-3 mb-2"},I$e={class:"card-body"},P$e={class:"form-check mb-2"},x$e={class:"form-check mb-3"},O$e={key:1,class:"alert alert-info mt-3"},R$e={key:3,class:"modal delete-slug-modal",tabindex:"-1",style:{display:"block"}},V$e={class:"modal-dialog"},D$e={class:"modal-content"},N$e={class:"modal-body"},L$e={key:1,class:"mb-4"},M$e={class:"d-flex justify-content-between align-items-center mb-3"},$$e={key:0},B$e={key:1},F$e={class:"input-group"},U$e=["value"],z$e=["disabled"],H$e={key:0,class:"text-center py-3"},W$e={key:1,class:"alert alert-info"},j$e={key:0},q$e={key:1},G$e={key:2},K$e={class:"table-responsive"},Y$e={class:"table table-striped table-hover"},Q$e={class:"btn-group"},Z$e=["disabled","onClick"],J$e=["disabled","onClick"],X$e={class:"btn-group"},e5e=["onClick"],t5e=["onClick"],n5e={key:2,class:"mt-4"},i5e={class:"d-flex justify-content-between align-items-center mb-3"},r5e={class:"row mb-3"},s5e={class:"col-md-6"},o5e=["disabled"],a5e={class:"col-md-6"},l5e=["disabled"],c5e={class:"row mb-3"},u5e={class:"col-md-6"},d5e={class:"col-md-3"},f5e={class:"col-md-3"},h5e={class:"mb-3"},m5e={class:"mb-3"},g5e={class:"d-flex justify-content-end gap-2 mb-2"},p5e={class:"position-relative editor-container"},v5e={class:"editor-container__editor"},b5e={key:3,class:"media-manager-modal"},w5e={class:"modal media-manager-dialog d-block",tabindex:"-1"},y5e={class:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable"},_5e={class:"modal-content"},k5e={class:"mb-3 form-check"},E5e={class:"d-flex mt-4"},C5e=["disabled"],T5e={key:0,class:"spinner-border spinner-border-sm me-1"},S5e=["disabled"],A5e={key:0,class:"spinner-border spinner-border-sm me-1"},I5e={class:"card mt-4"},P5e={class:"card-header"},x5e={class:"nav nav-tabs card-header-tabs"},O5e={class:"nav-item"},R5e={class:"nav-item"},V5e={class:"card-body"},D5e={key:0,class:"p-3 border rounded bg-light"},N5e={class:"debug-info mb-3 p-2 bg-dark text-white d-none"},L5e={key:0},M5e={key:1},$5e={key:0,class:"mb-0"},B5e={key:0},F5e={class:"row mb-3"},U5e={class:"border p-2 bg-white"},z5e={class:"mb-0"},H5e={key:1,class:"alert alert-warning"},W5e={key:0},j5e={class:"mb-3"},q5e={class:"mb-1"},G5e={class:"border p-2 bg-white"},K5e={class:"mb-0"},Y5e={key:1,class:"alert alert-warning"},Q5e={key:1,class:"p-3 border rounded bg-white"},Z5e={class:"debug-info mb-3 p-2 bg-dark text-white d-none"},J5e={key:0},X5e={key:1},eBe=["innerHTML"],tBe={key:0},nBe={class:"row"},iBe=["innerHTML"],rBe={key:1,class:"alert alert-warning"},sBe={key:0},oBe={id:"previewAccordion",class:"accordion"},aBe=["id"],lBe=["data-bs-target","aria-controls"],cBe=["id","aria-labelledby"],uBe=["innerHTML"],dBe={key:1,class:"alert alert-warning"},fBe="GPL",hBe={__name:"StaticContentManager",setup(n){w5("editorMenuBarElement");const t=Z(!1),e=Pxe,i=le(()=>t.value?{toolbar:{items:["sourceEditing","showBlocks","findAndReplace","fullscreen","|","heading","style","|","bold","italic","code","|","specialCharacters","horizontalLine","link","bookmark","insertImageViaUrl","mediaEmbed","insertTable","blockQuote","codeBlock","|","alignment","|","bulletedList","numberedList","todoList","outdent","indent"],shouldNotGroupWhenFull:!0},plugins:[hIe,VIe,v2e,pH,DIe,ZAe,XIe,eIe,MIe,qPe,dxe,UIe,Sxe,zxe,tOe,u2e,cOe,a2e,pOe,EOe,A2e,V2e,P2e,eRe,dRe,kRe,DP,ERe,Z2e,ARe,PRe,WIe,cVe,pVe,UVe,JVe,_De,Zy,dNe,gNe,pNe,CNe,DH,$H,TNe,MH,LH,NH,zNe,rMe,t$e,TMe,xMe,GMe,sMe,SIe,cDe],balloonToolbar:["bold","italic","|","link","|","bulletedList","numberedList"],blockToolbar:["bold","italic","|","link","insertTable","|","bulletedList","numberedList","outdent","indent"],fullscreen:{onEnterCallback:me=>me.classList.add("editor-container","editor-container_classic-editor","editor-container_include-style","editor-container_include-block-toolbar","editor-container_include-fullscreen","main-container")},heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h3",title:"Heading 3",class:"ck-heading_heading3"},{model:"heading4",view:"h4",title:"Heading 4",class:"ck-heading_heading4"},{model:"heading5",view:"h5",title:"Heading 5",class:"ck-heading_heading5"},{model:"heading6",view:"h6",title:"Heading 6",class:"ck-heading_heading6"}]},htmlSupport:{allow:[{name:/^.*$/,styles:!0,attributes:!0,classes:!0}]},image:{toolbar:["toggleImageCaption","imageTextAlternative","|","imageStyle:inline","imageStyle:wrapText","imageStyle:breakText","|","resizeImage"]},language:"de",licenseKey:fBe,link:{addTargetToExternalLinks:!0,defaultProtocol:"https://",decorators:{toggleDownloadable:{mode:"manual",label:"Downloadable",attributes:{download:"file"}}}},list:{properties:{styles:!0,startIndex:!0,reversed:!0}},menuBar:{isVisible:!0},placeholder:"Type or paste your content here!",style:{definitions:[{name:"Article category",element:"h3",classes:["category"]},{name:"Title",element:"h2",classes:["document-title"]},{name:"Subtitle",element:"h3",classes:["document-subtitle"]},{name:"Info box",element:"p",classes:["info-box"]},{name:"CTA Link Primary",element:"a",classes:["btn","btn-primary"]},{name:"CTA Link Secondary",element:"a",classes:["btn","btn-primary"]},{name:"Marker",element:"span",classes:["marker"]},{name:"Spoiler",element:"span",classes:["spoiler"]}]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells","tableProperties","tableCellProperties"]},translations:[n$e]}:null);Jt(async()=>{t.value=!0,await J()});const r=me=>{try{const ee=me.url,Te=me.filename||"Bild";if(s.value){const rt=s.value;rt.execute("insertImage",{source:{src:ee,alt:Te}}),I.value.content=rt.getData(),_.value=!1,ze.success("Bild erfolgreich eingefügt")}else{console.error("Keine CKEditor-Instanz gefunden"),ze.error("Editor konnte nicht gefunden werden");const rt=I.value.content||"",Rt=`<img src="${ee}" alt="${Te}" class="img-fluid" loading="lazy">`;I.value.content=rt+Rt,_.value=!1}}catch(ee){console.error("Fehler beim Einfügen des Bildes:",ee),ze.error("Fehler beim Einfügen des Bildes: "+ee.message)}},s=Z(null),o=me=>{try{if(s.value=me,I.value.content&&Ye.value==="standard")try{me.setData(I.value.content)}catch(ee){console.error("Error setting editor data:",ee)}me.model.document.on("change:data",()=>{try{me&&typeof me.getData=="function"&&(I.value.content=me.getData())}catch(ee){console.error("Error getting editor data:",ee)}})}catch(ee){console.error("Error in onEditorReady:",ee)}},a=Z([]),l=Z([]),c=Z(!1),u=Z(!1),d=Z(!1),f=Z(!1),h=Z(null),g=Z("pages"),v=Z(""),_=Z(!1),w=Z("preview"),C=Kt({});gt(()=>l.value,me=>{console.log("pageSlugs changed:",me),me&&me.length>0&&me.forEach(ee=>{ee&&ee.pageKey&&(console.log("Updating slug from watcher for",ee.pageKey,"to",ee.slug),C[ee.pageKey]=ee.slug||"")})});const k=Z(!1),E=Z(""),A=nn(),x=le(()=>A.getUseDirectStaticPaths),p=le(()=>A.getUseDbFooterNavigation),D=Z(x.value),R=Z(p.value);Jt(async()=>{await A.loadSystemSettings(),D.value=x.value,R.value=p.value}),gt(x,me=>{D.value=me}),gt(p,me=>{R.value=me});const S=async()=>{try{if(!A.isSuperOrganizer){ze.error("Super-Admin-Rechte erforderlich, um Systemeinstellungen zu ändern");return}await A.updateSystemSettings({useDirectStaticPaths:D.value,useDbFooterNavigation:R.value}),ze.success("Systemeinstellungen wurden aktualisiert")}catch(me){console.error("Fehler beim Aktualisieren der Systemeinstellungen:",me),ze.error("Fehler beim Aktualisieren der Systemeinstellungen: "+me.message)}},I=Z({pageKey:"",sectionKey:"",contentType:"standard",title:"",headerClass:"h2",content:"",ordering:0,isPublished:!0,columnCount:2,columnsContent:[],accordionItems:[]}),F=le(()=>{const me=new Set;return a.value.forEach(ee=>{me.add(ee.pageKey)}),Array.from(me)}),H=le(()=>v.value?a.value.filter(me=>me.pageKey===v.value).sort((me,ee)=>me.ordering-ee.ordering):a.value),q=me=>a.value.filter(ee=>ee.pageKey===me).length,N=async me=>{await te(),s.value=null,v.value=me,g.value="sections"},$=async()=>{await te(),Le(),Ye.value="standard",g.value="editor"},U=async()=>{await te(),Le(),I.value.pageKey=v.value,f.value=!1,Ye.value="standard"},{resolveClient:re}=pl(),K=mt`
  query GetAllStaticContents {
    staticContents {
      id
      pageKey
      sectionKey
      contentType
      title
      headerClass
      content
      ordering
      isPublished
      createdAt
      updatedAt
      columnCount
      columnsContent {
        content
      }
      accordionItems {
        title
        content
      }
    }
    # Verwende den importierten FETCH_PAGE_SLUGS für alle Slug-Anfragen
    # Diese gql-Datei enthält diese Abfrage weiterhin für abwärtskompatible Clients
    pageSlugs {
      id
      pageKey
      slug
      createdAt
      updatedAt
    }
  }
`,z=mt`
  mutation CreateStaticContent($input: CreateStaticContentInput!) {
    createStaticContent(input: $input) {
      id
      pageKey
      sectionKey
      contentType
      title
      headerClass
      content
      ordering
      isPublished
      columnCount
      columnsContent {
        content
      }
      accordionItems {
        title
        content
      }
    }
  }
`,ge=mt`
  mutation UpdateStaticContent($input: UpdateStaticContentInput!) {
    updateStaticContent(input: $input) {
      id
      pageKey
      sectionKey
      contentType
      title
      headerClass
      content
      ordering
      isPublished
      columnCount
      columnsContent {
        content
      }
      accordionItems {
        title
        content
      }
    }
  }
`,Q=mt`
  mutation ToggleStaticContentPublished($id: ID!, $isPublished: Boolean!) {
    toggleStaticContentPublished(id: $id, isPublished: $isPublished) {
      id
      isPublished
    }
  }
`,ue=()=>{if(!I.value.columnsContent||!I.value.columnsContent.length)return'<div class="row"><div class="col">Keine Spalten definiert</div></div>';const me=I.value.columnCount||2,ee=ce(me);let Te=`<div class="row">
`;return I.value.columnsContent.forEach((rt,Rt)=>{Te+=`  <div class="${ee}">
`,Te+=`    <div class="h-100">${rt.content||""}</div>
`,Te+=`  </div>
`}),Te+="</div>",Te},ve=()=>{if(!I.value.accordionItems||!I.value.accordionItems.length)return'<div class="accordion">Keine Accordion-Elemente definiert</div>';let me=`<div class="accordion" id="accordion">
`;return I.value.accordionItems.forEach((ee,Te)=>{me+=`  <div class="accordion-item">
`,me+=`    <h2 class="accordion-header" id="heading-${Te}">
`,me+=`      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-${Te}" aria-expanded="false" aria-controls="collapse-${Te}">
`,me+=`        ${ee.title||"Unbenanntes Element"}
`,me+=`      </button>
`,me+=`    </h2>
`,me+=`    <div id="collapse-${Te}" class="accordion-collapse collapse" aria-labelledby="heading-${Te}" data-bs-parent="#accordion">
`,me+=`      <div class="accordion-body">${ee.content||""}</div>
`,me+=`    </div>
`,me+=`  </div>
`}),me+="</div>",me},ce=me=>{switch(parseInt(me,10)){case 4:return"col-md-3";case 3:return"col-md-4";case 2:default:return"col-md-6"}},J=async()=>{c.value=!0;try{const ee=await re().query({query:K,fetchPolicy:"network-only"});a.value=[...ee.data.staticContents||[]].sort((Rt,Gn)=>Rt.pageKey!==Gn.pageKey?Rt.pageKey.localeCompare(Gn.pageKey):Rt.ordering-Gn.ordering),l.value=ee.data.pageSlugs||[],Object.keys(C).forEach(Rt=>{delete C[Rt]});const Te=a.value.map(Rt=>Rt.pageKey);[...new Set(Te)].forEach(Rt=>{C[Rt]=""}),l.value.forEach(Rt=>{Rt&&Rt.pageKey&&(C[Rt.pageKey]=Rt.slug||"")})}catch(me){console.error("Failed to load static contents:",me),ze.error("Fehler beim Laden der statischen Inhalte")}finally{c.value=!1}},ae=me=>{const ee=l.value.find(Te=>Te.pageKey===me);return ee?ee.slug:""},xe=me=>{const ee=C[me],Te=ae(me);return ee===void 0||ee===Te?!1:ee===""?!0:/^[a-z0-9-]+$/.test(ee)},he=async me=>{try{const ee=C[me],Te=ae(me);if(ee===Te){ze.info(`Keine Änderung am Slug für "${me}"`);return}c.value=!0;const rt=re();ee===""?(await rt.mutate({mutation:jR,variables:{pageKey:me}}),ze.success(`Slug für "${me}" wurde gelöscht.`)):(await rt.mutate({mutation:tse,variables:{pageKey:me,slug:ee}})).data.upsertPageSlug&&ze.success(`Slug für "${me}" wurde aktualisiert.`),await J()}catch(ee){console.error("Failed to save page slug:",ee),ee.message&&ee.message.includes("already in use")?ze.error("Dieser Slug wird bereits für eine andere Seite verwendet."):ze.error(`Fehler beim Speichern des Slugs: ${ee.message}`)}finally{c.value=!1}},Ae=me=>{E.value=me,k.value=!0},We=()=>{E.value="",k.value=!1},Ee=async()=>{try{c.value=!0;const me=E.value;await re().mutate({mutation:jR,variables:{pageKey:me}}),ze.success(`Slug für "${me}" wurde gelöscht.`),We(),await J()}catch(me){console.error("Failed to delete page slug:",me),ze.error(`Fehler beim Löschen des Slugs: ${me.message}`)}finally{c.value=!1}},G=me=>{const ee=C[me]?C[me]:me;return D.value?`/${ee}`:`/static-page/${ee}`},Y=async me=>{try{if(c.value=!0,I.value={pageKey:me.pageKey,sectionKey:me.sectionKey,contentType:me.contentType||"standard",title:me.title||"",headerClass:me.headerClass||"h2",content:me.content||"",ordering:me.ordering||0,isPublished:me.isPublished,columnCount:me.columnCount||2,columnsContent:me.columnsContent||[],accordionItems:me.accordionItems||[]},!me.content){const ee=re();try{const rt=(await ee.query({query:mt`
            query GetStaticContentById($id: ID!) {
              staticContent(id: $id) {
                id
                pageKey
                sectionKey
                title
                content
                ordering
                isPublished
              }
            }
          `,variables:{id:me.id},fetchPolicy:"network-only"})).data.staticContent;if(rt)I.value.content=rt.content;else{console.error("API returned null for content ID:",me.id),ze.error("Fehler: Der Server hat keine Daten für diesen Inhalt zurückgegeben. Prüfe deine Berechtigungen.");return}}catch(Te){console.error("GraphQL query failed:",Te),ze.error("GraphQL-Fehler: "+(Te.message||"Unbekannter Fehler"));return}}f.value=!0,h.value=me.id,Ye.value=I.value.contentType||"standard",g.value="editor",Ye.value==="standard"&&s.value&&I.value.content&&setTimeout(()=>{try{s.value&&typeof s.value.setData=="function"&&s.value.setData(I.value.content)}catch(ee){console.error("Error setting editor data:",ee)}},100)}catch(ee){console.error("Failed to load content for editing:",ee),ze.error("Fehler beim Laden des Inhalts zum Bearbeiten: "+ee.message)}finally{c.value=!1}},oe=Z(null),Ue=Z(null),Oe=async()=>{f.value=!1,h.value=null,await te(),Le(),Ye.value="standard",g.value="sections"},Le=()=>{I.value={pageKey:"",sectionKey:"",contentType:"standard",title:"",headerClass:"h2",content:"",ordering:0,isPublished:!0,columnCount:2,columnsContent:[],accordionItems:[]}},Ye=Z("standard"),te=async()=>{try{if(Ye.value==="standard"&&s.value)try{s.value&&typeof s.value.getData=="function"&&(I.value.content=s.value.getData());const me=s.value;s.value=null,await Zn(),me&&typeof me.destroy=="function"&&await me.destroy().catch(ee=>{console.error("Error destroying standard editor:",ee)})}catch(me){console.error("Exception when destroying standard editor:",me)}if(w.value==="preview"||w.value==="code"){await Zn();const me=w.value;w.value=me==="preview"?"preview-force-update":"code-force-update",setTimeout(()=>{w.value=me},50)}}catch(me){console.error("Error in safeDestroyEditor:",me)}},se=async me=>{me!==Ye.value&&(await te(),Ye.value=me,I.value.contentType=me,me==="multi-column"&&!I.value.columnsContent.length?(I.value.columnCount=2,I.value.columnsContent=[{content:""},{content:""}]):me==="accordion"&&!I.value.accordionItems.length&&(I.value.accordionItems=[{title:"",content:""}]),await Zn())},pe=()=>{Zn(()=>{if(w.value==="preview"||w.value==="code"){const me=w.value;w.value=me+"-forced",setTimeout(()=>{w.value=me},50)}})},Re=me=>{if(me&&me.columnCount&&(I.value.columnCount=me.columnCount),me&&me.columns&&Array.isArray(me.columns)){const ee=[];for(const Te of me.columns)ee.push({content:Te.content||""});I.value.columnsContent=ee,pe()}else console.error("Invalid multi-column data received:",me)},Me=me=>{me&&Array.isArray(me)?(I.value.accordionItems=me.map(ee=>({title:ee.title||"",content:ee.content||""})),I.value.accordionItems.forEach((ee,Te)=>{ee.title,ee.content&&ee.content.substring(0,30)+""})):console.warn("Received invalid accordion items:",me),pe()},Ie=()=>{if(f.value)return;const me=I.value.pageKey.trim(),ee=I.value.sectionKey.trim();if(!me||!ee)return;const Te=document.getElementById("sectionKey");if(!Te)return;a.value.find(Rt=>Rt.pageKey===me&&Rt.sectionKey===ee)?Te.classList.add("is-invalid"):Te.classList.remove("is-invalid")},Se=async me=>{try{const Te="https://digitalwahl.org/api/graphql",rt=localStorage.getItem("apollo-token");if(!rt)throw new Error("Nicht angemeldet. Bitte melden Sie sich erneut an.");const Rt=!!me.id;let Gn;Rt?Gn=`
        mutation UpdateStaticContent($input: UpdateStaticContentInput!) {
          updateStaticContent(input: $input) {
            id
            pageKey
            sectionKey
            title
            isPublished
          }
        }
      `:Gn=`
        mutation CreateStaticContent($input: CreateStaticContentInput!) {
          createStaticContent(input: $input) {
            id
            pageKey
            sectionKey
            title
            isPublished
          }
        }
      `;const Xt=await(await fetch(Te,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${rt}`},body:JSON.stringify({query:Gn,variables:{input:me}})})).json();if(Xt.errors){const yt={message:Xt.errors[0].message,path:Xt.errors[0].path,extensions:Xt.errors[0].extensions,fullError:JSON.stringify(Xt.errors)};throw console.error("GraphQL error details:",yt),new Error(`GraphQL Fehler: ${yt.message}`)}return Xt.data}catch(ee){throw console.error("Direct API Error:",ee),ee}},ye=async()=>{d.value=!0;try{return await _e(!0)}finally{d.value=!1}},ie=async()=>{u.value=!0;try{return await _e(!1)}finally{u.value=!1}},_e=async me=>{var Te,rt,Rt,Gn,Kn;let ee=!1;try{const Xt=I.value.pageKey.trim(),yt=I.value.sectionKey.trim(),Zr=I.value.title.trim(),ai=parseInt(I.value.ordering,10)||0;if(!Xt||!yt)return ze.error("Bitte füllen Sie mindestens Seitenschlüssel und Abschnittschlüssel aus."),!1;if(!f.value&&a.value.find(zi=>zi.pageKey===Xt&&zi.sectionKey===yt))return ze.error(`Diese Kombination aus Seitenschlüssel "${Xt}" und Abschnittschlüssel "${yt}" existiert bereits.`),setTimeout(()=>{const zi=document.getElementById("sectionKey");zi&&(zi.focus(),zi.classList.add("is-invalid"))},100),!1;const Fn=I.value.content;if(ze.info("Speichere Inhalt..."),f.value)try{const Dn={id:h.value,contentType:I.value.contentType||"standard",title:Zr,headerClass:I.value.headerClass||"h2",ordering:ai,content:Fn,isPublished:I.value.isPublished};if(I.value.contentType==="multi-column"&&(Dn.columnCount=I.value.columnCount||2,Dn.columnsContent=[],Array.isArray(I.value.columnsContent)))for(const Tn of I.value.columnsContent)Dn.columnsContent.push({content:Tn&&Tn.content?Tn.content:""});if(I.value.contentType==="accordion"&&(Dn.accordionItems=[],Array.isArray(I.value.accordionItems)))for(const Tn of I.value.accordionItems)Dn.accordionItems.push({title:Tn&&Tn.title?Tn.title:"",content:Tn&&Tn.content?Tn.content:""});const zi=re();try{const Tn=await zi.mutate({mutation:ge,variables:{input:Dn}});if((Te=Tn.data)!=null&&Te.updateStaticContent){me?(ze.success("Inhalt erfolgreich aktualisiert und bleibt im Bearbeitungsmodus"),await J(),h.value=Tn.data.updateStaticContent.id):(ze.success("Inhalt erfolgreich aktualisiert"),f.value=!1,h.value=null,v.value=Xt,g.value="sections",await J(),Le()),ee=!0;return}}catch(Tn){console.warn("Apollo-Client Update fehlgeschlagen, versuche direkten API-Zugriff:",Tn.message);try{const Or=await Se(Dn);if(Or!=null&&Or.updateStaticContent){me?(ze.success("Inhalt erfolgreich aktualisiert (direkter API-Zugriff) und bleibt im Bearbeitungsmodus"),await J(),h.value=Or.updateStaticContent.id):(ze.success("Inhalt erfolgreich aktualisiert (direkter API-Zugriff)"),f.value=!1,h.value=null,v.value=Xt,g.value="sections",await J(),Le());return}}catch(Or){console.error("Direkter API-Zugriff für Update fehlgeschlagen:",Or)}}try{const Tn=await zi.mutate({mutation:ge,variables:{input:{id:h.value,title:Zr,headerClass:I.value.headerClass||"h2",ordering:ai,isPublished:I.value.isPublished}}});if((rt=Tn.data)!=null&&rt.updateStaticContent){me?(ze.warning("Nur Metadaten wurden aktualisiert. Der Inhalt konnte nicht gespeichert werden. Sie bleiben im Bearbeitungsmodus."),await J(),h.value=Tn.data.updateStaticContent.id):(ze.warning("Nur Metadaten wurden aktualisiert. Der Inhalt konnte nicht gespeichert werden."),f.value=!1,h.value=null,v.value=Xt,g.value="sections",await J(),Le());return}}catch(Tn){throw console.error("Selbst einfaches Meta-Update fehlgeschlagen:",Tn),Tn}}catch(Dn){throw console.error("Alle Update-Versuche fehlgeschlagen:",Dn),Dn}else try{const Dn={pageKey:Xt,sectionKey:yt,contentType:I.value.contentType||"standard",title:Zr,headerClass:I.value.headerClass||"h2",content:Fn,ordering:ai,isPublished:I.value.isPublished};if(I.value.contentType==="multi-column"&&(Dn.columnCount=I.value.columnCount||2,Dn.columnsContent=[],Array.isArray(I.value.columnsContent)))for(const gn of I.value.columnsContent)Dn.columnsContent.push({content:gn&&gn.content?gn.content:""});if(I.value.contentType==="accordion"&&(Dn.accordionItems=[],Array.isArray(I.value.accordionItems)))for(const gn of I.value.accordionItems)Dn.accordionItems.push({title:gn&&gn.title?gn.title:"",content:gn&&gn.content?gn.content:""});const zi=re();try{const gn=await zi.mutate({mutation:z,variables:{input:Dn}});if((Rt=gn.data)!=null&&Rt.createStaticContent){me?(ze.success("Neuer Inhalt erfolgreich erstellt und bleibt im Bearbeitungsmodus"),await J(),h.value=gn.data.createStaticContent.id,f.value=!0):(ze.success("Neuer Inhalt erfolgreich erstellt"),v.value=Xt,g.value="sections",await J(),Le());return}}catch(gn){console.warn("Apollo-Client Create fehlgeschlagen, versuche direkten API-Zugriff:",gn.message);try{const ir=await Se(Dn);if(ir!=null&&ir.createStaticContent){me?(ze.success("Neuer Inhalt erfolgreich erstellt (direkter API-Zugriff) und bleibt im Bearbeitungsmodus"),await J(),h.value=ir.createStaticContent.id,f.value=!0):(ze.success("Neuer Inhalt erfolgreich erstellt (direkter API-Zugriff)"),v.value=Xt,g.value="sections",await J(),Le());return}}catch(ir){console.error("Direkter API-Zugriff für Create fehlgeschlagen:",ir)}}let Tn=Fn;const Or=1e3;if(Tn.length>Or){Tn=Tn.substring(0,Or)+"...";try{const gn=await zi.mutate({mutation:z,variables:{input:{...Dn,content:Tn}}});if((Gn=gn.data)!=null&&Gn.createStaticContent){me?(ze.warning("Inhalt wurde erstellt, aber gekürzt. Der vollständige Inhalt war zu groß für den Server. Sie bleiben im Bearbeitungsmodus."),await J(),h.value=gn.data.createStaticContent.id,f.value=!0):(ze.warning("Inhalt wurde erstellt, aber gekürzt. Der vollständige Inhalt war zu groß für den Server."),v.value=Xt,g.value="sections",await J(),Le());return}}catch(gn){console.error("Auch gekürzter Inhalt schlägt fehl:",gn)}}try{const gn=await zi.mutate({mutation:z,variables:{input:{pageKey:Xt,sectionKey:yt,contentType:I.value.contentType||"standard",content:"<p>...</p>",title:Zr,headerClass:I.value.headerClass||"h2",ordering:ai,isPublished:!1}}});if((Kn=gn.data)!=null&&Kn.createStaticContent){const ir=gn.data.createStaticContent.id;me?(ze.warning("Eintrag konnte nur als leerer Entwurf erstellt werden. Bitte fügen Sie jetzt Inhalt hinzu."),await J(),h.value=ir,f.value=!0):(ze.warning("Eintrag konnte nur als leerer Entwurf erstellt werden. Bitte bearbeiten Sie ihn später erneut."),v.value=Xt,g.value="sections",await J(),Le());return}}catch(gn){throw console.error("Selbst minimaler Inhalt schlägt fehl:",gn),gn}}catch(Dn){throw console.error("Alle Create-Versuche fehlgeschlagen:",Dn),Dn}}catch(Xt){console.error("Fehler beim Speichern:",Xt);const yt=Xt.message||"";if(yt.includes("Failed to insert static content")||yt.includes("ER_DUP_ENTRY")||yt.includes("Duplicate entry"))return console.error("Duplikat-Fehler erkannt:",Xt),ze.error(`Diese Kombination aus Seitenschlüssel "${pageKey}" und Abschnittschlüssel "${sectionKey}" existiert bereits. Bitte wählen Sie einen anderen Abschnittschlüssel.`),setTimeout(()=>{const ai=document.getElementById("sectionKey");ai&&(ai.focus(),ai.classList.add("is-invalid"))},100),!1;if(Xt.graphQLErrors){console.error("GraphQL-Fehler:",Xt.graphQLErrors);const ai=Xt.graphQLErrors.map(Fn=>{var Tn,Or,gn,ir,bc;let Dn="";(Tn=Fn.extensions)!=null&&Tn.code&&(Dn+=` (Code: ${Fn.extensions.code})`),(gn=(Or=Fn.extensions)==null?void 0:Or.exception)!=null&&gn.stacktrace&&console.error("Server stacktrace:",Fn.extensions.exception.stacktrace);const zi=Fn.message||"";return zi.includes("ER_DUP_ENTRY")||zi.includes("Duplicate entry")||(bc=(ir=Fn.extensions)==null?void 0:ir.exception)!=null&&bc.sqlMessage&&Fn.extensions.exception.sqlMessage.includes("Duplicate entry")?"Dieser Abschnitt existiert bereits. Bitte wählen Sie einen anderen Abschnittschlüssel.":Fn.message+Dn}).join(`
- `);ze.error(`GraphQL-Fehler:
- ${ai}`)}else Xt.networkError?(console.error("Netzwerkfehler:",Xt.networkError),Xt.networkError.statusCode?ze.error(`Netzwerkfehler (${Xt.networkError.statusCode}): Bitte prüfen Sie Ihre Verbindung zum Server.`):ze.error("Netzwerkfehler: Bitte prüfen Sie Ihre Verbindung zum Server.")):ze.error("Fehler beim Speichern: "+(yt||"Unbekannter Fehler"));return!f.value?ze.info("Bitte überprüfen Sie, ob die Kombination aus Seitenschlüssel und Abschnittschlüssel bereits existiert, und wählen Sie bei Bedarf einen anderen Schlüssel."):ze.info("Bitte prüfen Sie, ob Ihre Eingaben korrekt sind und versuchen Sie, den Inhalt zu vereinfachen oder in kleinere Abschnitte aufzuteilen."),!1}return ee},Je=async me=>{try{c.value=!0,(await re().mutate({mutation:Q,variables:{id:me.id,isPublished:!me.isPublished}})).data.toggleStaticContentPublished&&(ze.success(me.isPublished?"Inhalt wurde verborgen":"Inhalt wurde veröffentlicht"),await J())}catch(ee){console.error("Failed to toggle publish status:",ee),ze.error("Fehler beim Ändern des Veröffentlichungsstatus")}finally{c.value=!1}},ut=me=>{if(!v.value)return!1;const ee=a.value.filter(rt=>rt.pageKey===me.pageKey);return ee.sort((rt,Rt)=>rt.ordering-Rt.ordering),ee.findIndex(rt=>rt.id===me.id)>0},ft=me=>{if(!v.value)return!1;const ee=a.value.filter(rt=>rt.pageKey===me.pageKey);return ee.sort((rt,Rt)=>rt.ordering-Rt.ordering),ee.findIndex(rt=>rt.id===me.id)<ee.length-1},Ot=async me=>{if(ut(me))try{c.value=!0;const ee=a.value.filter(Kn=>Kn.pageKey===me.pageKey);ee.sort((Kn,Xt)=>Kn.ordering-Xt.ordering);const Te=ee.findIndex(Kn=>Kn.id===me.id),rt=ee[Te],Rt=ee[Te-1],Gn=re();await Gn.mutate({mutation:ge,variables:{input:{id:rt.id,ordering:Rt.ordering}}}),await Gn.mutate({mutation:ge,variables:{input:{id:Rt.id,ordering:rt.ordering}}}),await J(),ze.success("Reihenfolge wurde aktualisiert")}catch(ee){console.error("Failed to move item up:",ee),ze.error("Fehler beim Verschieben des Elements")}finally{c.value=!1}},Qt=async me=>{if(ft(me))try{c.value=!0;const ee=a.value.filter(Kn=>Kn.pageKey===me.pageKey);ee.sort((Kn,Xt)=>Kn.ordering-Xt.ordering);const Te=ee.findIndex(Kn=>Kn.id===me.id),rt=ee[Te],Rt=ee[Te+1],Gn=re();await Gn.mutate({mutation:ge,variables:{input:{id:rt.id,ordering:Rt.ordering}}}),await Gn.mutate({mutation:ge,variables:{input:{id:Rt.id,ordering:rt.ordering}}}),await J(),ze.success("Reihenfolge wurde aktualisiert")}catch(ee){console.error("Failed to move item down:",ee),ze.error("Fehler beim Verschieben des Elements")}finally{c.value=!1}};return(me,ee)=>(P(),V("div",i$e,[ee[82]||(ee[82]=m("h2",null,"Statische Inhalte verwalten",-1)),m("ul",r$e,[m("li",s$e,[m("a",{class:Ze(["nav-link",{active:g.value==="pages"}]),href:"#",onClick:ee[0]||(ee[0]=bt(Te=>g.value="pages",["prevent"]))},[...ee[21]||(ee[21]=[m("i",{class:"bi bi-file-earmark-text"},null,-1),fe(" Seiten ",-1)])],2)]),m("li",o$e,[m("a",{class:Ze(["nav-link",{active:g.value==="sections"}]),href:"#",onClick:ee[1]||(ee[1]=bt(Te=>g.value="sections",["prevent"]))},[...ee[22]||(ee[22]=[m("i",{class:"bi bi-list-ul"},null,-1),fe(" Abschnitte ",-1)])],2)]),m("li",a$e,[m("a",{class:Ze(["nav-link",{active:g.value==="editor"}]),href:"#",onClick:ee[2]||(ee[2]=bt(Te=>g.value="editor",["prevent"]))},[ee[23]||(ee[23]=m("i",{class:"bi bi-pencil-square"},null,-1)),fe(" "+B(f.value?"Bearbeiten":"Neu erstellen"),1)],2)])]),g.value==="pages"?(P(),V("div",l$e,[m("div",{class:"d-flex justify-content-between align-items-center mb-3"},[ee[25]||(ee[25]=m("h3",null,"Verfügbare Seiten",-1)),m("button",{class:"btn btn-success",onClick:$},[...ee[24]||(ee[24]=[m("i",{class:"bi bi-plus-circle"},null,-1),fe(" Neue Seite ",-1)])])]),c.value?(P(),V("div",c$e,[...ee[26]||(ee[26]=[m("div",{class:"spinner-border text-primary",role:"status"},[m("span",{class:"visually-hidden"},"Wird geladen...")],-1)])])):F.value.length===0?(P(),V("div",u$e," Noch keine statischen Seiten vorhanden. ")):(P(),V("div",d$e,[m("div",f$e,[m("div",h$e,[(P(!0),V(Fe,null,ct(F.value,Te=>(P(),V("div",{key:Te,class:"list-group-item"},[m("div",m$e,[m("div",null,[m("h5",g$e,B(Te),1),m("small",null,B(q(Te))+" Abschnitte",1)]),m("div",null,[m("a",{href:G(Te),target:"_blank",class:"btn btn-sm btn-outline-secondary me-2",onClick:ee[3]||(ee[3]=bt(()=>{},["stop"]))},[...ee[27]||(ee[27]=[m("i",{class:"bi bi-box-arrow-up-right"},null,-1),fe(" Ansehen ",-1)])],8,p$e),m("button",{class:"btn btn-sm btn-outline-primary",onClick:bt(rt=>N(Te),["stop"])},[...ee[28]||(ee[28]=[m("i",{class:"bi bi-gear"},null,-1),fe(" Verwalten ",-1)])],8,v$e)])]),m("div",b$e,[m("div",w$e,[ee[31]||(ee[31]=m("span",{class:"input-group-text"},"Seiten-URL",-1)),m("input",{id:`pageSlugInput-${Te}`,type:"text",class:"form-control",value:C[Te]||"",placeholder:"z.B. ueber-uns oder kontakt",onInput:rt=>C[Te]=rt.target.value},null,40,y$e),m("button",{class:"btn btn-outline-success",disabled:!xe(Te),onClick:rt=>he(Te)},[...ee[29]||(ee[29]=[m("i",{class:"bi bi-check"},null,-1),fe(" Speichern ",-1)])],8,_$e),ae(Te)?(P(),V("button",{key:0,class:"btn btn-outline-danger",onClick:rt=>Ae(Te)},[...ee[30]||(ee[30]=[m("i",{class:"bi bi-trash"},null,-1)])],8,k$e)):ne("",!0)]),m("small",E$e,[ee[32]||(ee[32]=m("i",{class:"bi bi-info-circle me-1"},null,-1)),fe(" Die URL wird dann: "+B(D.value?`/${C[Te]||Te}`:`/static-page/${C[Te]||Te}`),1)])])]))),128))]),m("div",C$e,[ee[35]||(ee[35]=m("i",{class:"bi bi-info-circle-fill me-2"},null,-1)),ee[36]||(ee[36]=fe(" Die URL für statische Seiten lautet: ",-1)),D.value?(P(),V("div",T$e,[...ee[33]||(ee[33]=[m("div",null,[m("code",null,"/[seiten-schlüssel]"),fe(" (Standard-Zugriff)")],-1),m("div",{class:"mt-1"},[m("code",null,"/[slug]"),fe(" (wenn ein benutzerdefinierter Slug eingetragen ist)")],-1)])])):(P(),V("div",S$e,[...ee[34]||(ee[34]=[m("code",null,"/static-page/[seiten-schlüssel]",-1)])]))]),M(A).isSuperOrganizer?(P(),V("div",A$e,[ee[41]||(ee[41]=m("div",{class:"card-header bg-primary text-white"},[m("h5",{class:"mb-0"},"Globale Systemeinstellungen")],-1)),m("div",I$e,[m("form",{onSubmit:bt(S,["prevent"])},[m("div",P$e,[vn(m("input",{id:"useDirectPaths","onUpdate:modelValue":ee[4]||(ee[4]=Te=>D.value=Te),type:"checkbox",class:"form-check-input"},null,512),[[gd,D.value]]),ee[37]||(ee[37]=m("label",{class:"form-check-label",for:"useDirectPaths"}," Direkte Pfade aktivieren (ohne /static-page/ Prefix) ",-1))]),m("div",x$e,[vn(m("input",{id:"useInFooterNavigation","onUpdate:modelValue":ee[5]||(ee[5]=Te=>R.value=Te),type:"checkbox",class:"form-check-input"},null,512),[[gd,R.value]]),ee[38]||(ee[38]=m("label",{class:"form-check-label",for:"useInFooterNavigation"}," Dynamische Seiten in der Footer-Navigation anzeigen ",-1))]),ee[39]||(ee[39]=m("div",{class:"d-grid"},[m("button",{type:"submit",class:"btn btn-primary"},[m("i",{class:"bi bi-save"}),fe(" Systemeinstellungen speichern ")])],-1)),ee[40]||(ee[40]=m("small",{class:"text-muted mt-2"}," Hinweis: Diese Einstellungen gelten für alle Benutzer im System. ",-1))],32)])])):(P(),V("div",O$e,[...ee[42]||(ee[42]=[m("i",{class:"bi bi-info-circle me-2"},null,-1),fe(" Die globalen URL-Einstellungen können nur von einem Super-Admin geändert werden. ",-1)])]))]),ee[43]||(ee[43]=XE('<div class="col-md-4" data-v-f987ccb3><div class="card" data-v-f987ccb3><div class="card-header bg-primary text-white" data-v-f987ccb3><h5 class="mb-0" data-v-f987ccb3>Schnellhilfe</h5></div><div class="card-body" data-v-f987ccb3><h6 data-v-f987ccb3>So erstellen Sie neue Seiten:</h6><ol data-v-f987ccb3><li data-v-f987ccb3>Klicken Sie auf &quot;Neue Seite&quot;</li><li data-v-f987ccb3>Geben Sie einen eindeutigen Seitenschlüssel ein</li><li data-v-f987ccb3>Optional: Geben Sie einen benutzerfreundlichen Slug ein</li><li data-v-f987ccb3>Erstellen Sie mindestens einen Abschnitt für die Seite</li><li data-v-f987ccb3>Die Seite ist dann unter /static-page/[schlüssel] und optional über /[slug] erreichbar</li></ol></div></div></div>',1))])),k.value?(P(),V("div",R$e,[ee[48]||(ee[48]=m("div",{class:"modal-backdrop show"},null,-1)),m("div",V$e,[m("div",D$e,[m("div",{class:"modal-header"},[ee[44]||(ee[44]=m("h5",{class:"modal-title"},"Seiten-URL löschen?",-1)),m("button",{type:"button",class:"btn-close",onClick:We})]),m("div",N$e,[m("p",null,[ee[45]||(ee[45]=fe("Sind Sie sicher, dass Sie die Seiten-URL für ",-1)),m("strong",null,B(E.value),1),ee[46]||(ee[46]=fe(" löschen möchten?",-1))]),ee[47]||(ee[47]=m("p",null,"Die Seite wird dann nur noch über ihren Schlüssel erreichbar sein.",-1))]),m("div",{class:"modal-footer"},[m("button",{type:"button",class:"btn btn-secondary",onClick:We},"Abbrechen"),m("button",{type:"button",class:"btn btn-danger",onClick:Ee},"Löschen")])])])])):ne("",!0)])):ne("",!0),g.value==="sections"?(P(),V("div",L$e,[m("div",M$e,[m("h3",null,[v.value?(P(),V("span",$$e,'Abschnitte für "'+B(v.value)+'"',1)):(P(),V("span",B$e,"Alle Abschnitte"))]),m("div",null,[m("div",F$e,[vn(m("select",{"onUpdate:modelValue":ee[6]||(ee[6]=Te=>v.value=Te),class:"form-select","aria-label":"Seite auswählen"},[ee[49]||(ee[49]=m("option",{value:""},"Alle Seiten",-1)),(P(!0),V(Fe,null,ct(F.value,Te=>(P(),V("option",{key:Te,value:Te},B(Te),9,U$e))),128))],512),[[ou,v.value]]),m("button",{class:"btn btn-success",disabled:!v.value,onClick:ee[7]||(ee[7]=Te=>{g.value="editor",U()})},[...ee[50]||(ee[50]=[m("i",{class:"bi bi-plus-circle"},null,-1),fe(" Abschnitt hinzufügen ",-1)])],8,z$e)])])]),c.value?(P(),V("div",H$e,[...ee[51]||(ee[51]=[m("div",{class:"spinner-border text-primary",role:"status"},[m("span",{class:"visually-hidden"},"Wird geladen...")],-1)])])):H.value.length===0?(P(),V("div",W$e,[v.value?(P(),V("span",j$e,[ee[52]||(ee[52]=fe(" Noch keine Abschnitte für diese Seite. ",-1)),m("a",{href:"#",onClick:ee[8]||(ee[8]=bt(Te=>{g.value="editor",U()},["prevent"]))},"Erstellen Sie den ersten Abschnitt"),ee[53]||(ee[53]=fe(". ",-1))])):(P(),V("span",q$e,"Keine Abschnitte gefunden."))])):(P(),V("div",G$e,[m("div",K$e,[m("table",Y$e,[ee[57]||(ee[57]=m("thead",{class:"table-primary"},[m("tr",null,[m("th",null,"Seite"),m("th",null,"Abschnitt"),m("th",null,"Titel"),m("th",null,"Reihenfolge"),m("th",null,"Status"),m("th",null,"Sortierung"),m("th",null,"Aktionen")])],-1)),m("tbody",null,[(P(!0),V(Fe,null,ct(H.value,Te=>(P(),V("tr",{key:Te.id,class:Ze({"table-light":!Te.isPublished})},[m("td",null,B(Te.pageKey),1),m("td",null,B(Te.sectionKey),1),m("td",null,B(Te.title||"-"),1),m("td",null,B(Te.ordering),1),m("td",null,[m("span",{class:Ze(["badge",Te.isPublished?"bg-success":"bg-warning"])},B(Te.isPublished?"Veröffentlicht":"Entwurf"),3)]),m("td",null,[m("div",Q$e,[m("button",{class:"btn btn-sm btn-outline-secondary",disabled:!ut(Te),title:"Nach oben verschieben",onClick:rt=>Ot(Te)},[...ee[54]||(ee[54]=[m("i",{class:"bi bi-arrow-up"},null,-1)])],8,Z$e),m("button",{class:"btn btn-sm btn-outline-secondary",disabled:!ft(Te),title:"Nach unten verschieben",onClick:rt=>Qt(Te)},[...ee[55]||(ee[55]=[m("i",{class:"bi bi-arrow-down"},null,-1)])],8,J$e)])]),m("td",null,[m("div",X$e,[m("button",{class:"btn btn-sm btn-outline-primary",onClick:rt=>Y(Te)},[...ee[56]||(ee[56]=[m("i",{class:"bi bi-pencil-square"},null,-1),fe(" Bearbeiten ",-1)])],8,e5e),m("button",{class:Ze(["btn btn-sm",Te.isPublished?"btn-outline-warning":"btn-outline-success"]),onClick:rt=>Je(Te)},[m("i",{class:Ze(["bi",Te.isPublished?"bi-eye-slash":"bi-eye"])},null,2)],10,t5e)])])],2))),128))])])])]))])):ne("",!0),g.value==="editor"?(P(),V("div",n5e,[m("div",i5e,[m("h3",null,B(f.value?"Inhalt bearbeiten":"Neuen Inhalt erstellen"),1),m("button",{class:"btn btn-outline-secondary",onClick:ee[9]||(ee[9]=Te=>g.value="sections")},[...ee[58]||(ee[58]=[m("i",{class:"bi bi-arrow-left"},null,-1),fe(" Zurück ",-1)])])]),m("form",{class:"border rounded p-4 bg-light",onSubmit:bt(ie,["prevent"])},[m("div",r5e,[m("div",s5e,[ee[59]||(ee[59]=m("label",{for:"pageKey",class:"form-label"},"Seitenschlüssel",-1)),vn(m("input",{id:"pageKey","onUpdate:modelValue":ee[10]||(ee[10]=Te=>I.value.pageKey=Te),type:"text",class:"form-control",placeholder:"z.B. about-us",disabled:f.value,required:"",onInput:Ie,onBlur:Ie},null,40,o5e),[[Bi,I.value.pageKey]]),ee[60]||(ee[60]=m("small",{class:"form-text text-muted"}," Der Seitenschlüssel wird in der URL verwendet: /static-page/[seitenschlüssel] ",-1))]),m("div",a5e,[ee[61]||(ee[61]=m("label",{for:"sectionKey",class:"form-label"},"Abschnittschlüssel",-1)),vn(m("input",{id:"sectionKey","onUpdate:modelValue":ee[11]||(ee[11]=Te=>I.value.sectionKey=Te),type:"text",class:"form-control",placeholder:"z.B. main-content",disabled:f.value,required:"",onInput:Ie,onBlur:Ie},null,40,l5e),[[Bi,I.value.sectionKey]]),ee[62]||(ee[62]=m("div",{class:"invalid-feedback"}," Dieser Abschnittschlüssel existiert bereits für diese Seite. Bitte wählen Sie einen anderen Schlüssel. ",-1)),ee[63]||(ee[63]=m("small",{class:"form-text text-muted"}," Mehrere Abschnitte auf einer Seite werden nach diesem Schlüssel sortiert ",-1))])]),m("div",c5e,[m("div",u5e,[ee[64]||(ee[64]=m("label",{for:"title",class:"form-label"},"Titel",-1)),vn(m("input",{id:"title","onUpdate:modelValue":ee[12]||(ee[12]=Te=>I.value.title=Te),type:"text",class:"form-control",placeholder:"Titel des Abschnitts"},null,512),[[Bi,I.value.title]])]),m("div",d5e,[ee[66]||(ee[66]=m("label",{for:"headerClass",class:"form-label"},"Titel-Stil",-1)),vn(m("select",{id:"headerClass","onUpdate:modelValue":ee[13]||(ee[13]=Te=>I.value.headerClass=Te),class:"form-select"},[...ee[65]||(ee[65]=[XE('<option value="h1" data-v-f987ccb3>H1 - Sehr groß</option><option value="h2" data-v-f987ccb3>H2 - Groß</option><option value="h3" data-v-f987ccb3>H3 - Mittel</option><option value="h4" data-v-f987ccb3>H4 - Klein</option><option value="h5" data-v-f987ccb3>H5 - Sehr klein</option><option value="d-none" data-v-f987ccb3>Versteckt</option>',6)])],512),[[ou,I.value.headerClass]])]),m("div",f5e,[ee[67]||(ee[67]=m("label",{for:"ordering",class:"form-label"},"Reihenfolge",-1)),vn(m("input",{id:"ordering","onUpdate:modelValue":ee[14]||(ee[14]=Te=>I.value.ordering=Te),type:"number",class:"form-control",placeholder:"1"},null,512),[[Bi,I.value.ordering]])])]),m("div",h5e,[Ce(Kbe,{modelValue:I.value.contentType,"onUpdate:modelValue":ee[15]||(ee[15]=Te=>I.value.contentType=Te),onChange:se},null,8,["modelValue"])]),m("div",m5e,[ee[70]||(ee[70]=m("label",{for:"content",class:"form-label"},"Inhalt",-1)),I.value.contentType==="standard"?(P(),V(Fe,{key:0},[m("div",g5e,[m("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:ee[16]||(ee[16]=Te=>_.value=!0)},[...ee[68]||(ee[68]=[m("i",{class:"bi bi-image"},null,-1),fe(" Medienverwaltung ",-1)])])]),m("div",p5e,[m("div",{ref_key:"editorContainerElement",ref:oe,class:"editor-container editor-container_classic-editor editor-container_include-style editor-container_include-block-toolbar editor-container_include-fullscreen"},[m("div",v5e,[m("div",{ref_key:"editorElement",ref:Ue},[M(e)&&i.value?(P(),Ge(M(VI),{key:0,"model-value":i.value.initialData,editor:M(e),config:i.value,onReady:o},null,8,["model-value","editor","config"])):ne("",!0)],512)])],512)])],64)):I.value.contentType==="multi-column"?(P(),Ge(Jwe,{key:1,value:I.value.columnsContent,"initial-column-count":I.value.columnCount,"editor-class":M(e),"editor-config":i.value,onChange:Re},null,8,["value","initial-column-count","editor-class","editor-config"])):I.value.contentType==="accordion"?(P(),Ge(Cye,{key:2,value:I.value.accordionItems,"editor-class":M(e),"editor-config":i.value,onChange:Me},null,8,["value","editor-class","editor-config"])):ne("",!0),_.value?(P(),V("div",b5e,[ee[69]||(ee[69]=m("div",{class:"modal-backdrop show"},null,-1)),m("div",w5e,[m("div",y5e,[m("div",_5e,[Ce(RI,{onSelect:r,onClose:ee[17]||(ee[17]=Te=>_.value=!1)})])])])])):ne("",!0)]),m("div",k5e,[vn(m("input",{id:"isPublished","onUpdate:modelValue":ee[18]||(ee[18]=Te=>I.value.isPublished=Te),type:"checkbox",class:"form-check-input"},null,512),[[gd,I.value.isPublished]]),ee[71]||(ee[71]=m("label",{class:"form-check-label",for:"isPublished"},"Veröffentlichen",-1))]),m("div",E5e,[m("button",{type:"submit",class:"btn btn-primary me-2",disabled:u.value},[u.value?(P(),V("span",T5e)):ne("",!0),fe(" "+B(f.value?"Aktualisieren":"Erstellen"),1)],8,C5e),m("button",{type:"button",class:"btn btn-success me-2",disabled:u.value,onClick:ye},[d.value?(P(),V("span",A5e)):ne("",!0),ee[72]||(ee[72]=fe(" Speichern und weiter bearbeiten ",-1))],8,S5e),f.value?(P(),V("button",{key:0,type:"button",class:"btn btn-outline-secondary",onClick:Oe}," Abbrechen ")):ne("",!0)])],32),m("div",I5e,[m("div",P5e,[m("ul",x5e,[m("li",O5e,[m("a",{class:Ze(["nav-link",{active:w.value==="code"}]),href:"#",onClick:ee[19]||(ee[19]=bt(Te=>w.value="code",["prevent"]))},[...ee[73]||(ee[73]=[m("i",{class:"bi bi-code-square"},null,-1),fe(" HTML-Code ",-1)])],2)]),m("li",R5e,[m("a",{class:Ze(["nav-link",{active:w.value==="preview"}]),href:"#",onClick:ee[20]||(ee[20]=bt(Te=>w.value="preview",["prevent"]))},[...ee[74]||(ee[74]=[m("i",{class:"bi bi-eye"},null,-1),fe(" Vorschau ",-1)])],2)])])]),m("div",V5e,[w.value==="code"||w.value==="code-forced"?(P(),V("div",D5e,[m("div",N5e,[ee[75]||(ee[75]=m("h6",{class:"mb-2"},"Debug Info:",-1)),m("div",null,"Content Type: "+B(I.value.contentType),1),I.value.contentType==="multi-column"?(P(),V("div",L5e,"Columns: "+B(I.value.columnsContent.length),1)):ne("",!0),I.value.contentType==="accordion"?(P(),V("div",M5e,"Items: "+B(I.value.accordionItems.length),1)):ne("",!0),m("div",null,"Preview Tab: "+B(w.value),1)]),I.value.contentType==="standard"?(P(),V("pre",$5e,[m("code",null,B(I.value.content),1)])):I.value.contentType==="multi-column"?(P(),V(Fe,{key:1},[ee[77]||(ee[77]=m("h6",{class:"mb-3"},"Multi-Column HTML:",-1)),I.value.columnsContent&&I.value.columnsContent.length>0?(P(),V("div",B5e,[m("div",F5e,[(P(!0),V(Fe,null,ct(I.value.columnsContent,(Te,rt)=>(P(),V("div",{key:rt,class:"col-12 mb-3"},[m("h6",null,"Spalte "+B(rt+1)+":",1),m("pre",U5e,[m("code",null,B(Te.content),1)])]))),128))]),ee[76]||(ee[76]=m("h6",{class:"mb-2"},"Zusammengeführter HTML-Code:",-1)),m("pre",z5e,[m("code",null,B(ue()),1)])])):(P(),V("div",H5e," Keine Spalten definiert oder Daten nicht geladen. "))],64)):I.value.contentType==="accordion"?(P(),V(Fe,{key:2},[ee[80]||(ee[80]=m("h6",{class:"mb-3"},"Accordion HTML:",-1)),I.value.accordionItems&&I.value.accordionItems.length>0?(P(),V("div",W5e,[m("div",j5e,[(P(!0),V(Fe,null,ct(I.value.accordionItems,(Te,rt)=>(P(),V("div",{key:rt,class:"mb-3"},[m("h6",null,"Element "+B(rt+1)+":",1),m("div",q5e,[ee[78]||(ee[78]=m("strong",null,"Titel:",-1)),fe(" "+B(Te.title),1)]),m("pre",G5e,[m("code",null,B(Te.content),1)])]))),128))]),ee[79]||(ee[79]=m("h6",{class:"mb-2"},"Zusammengeführter HTML-Code:",-1)),m("pre",K5e,[m("code",null,B(ve()),1)])])):(P(),V("div",Y5e," Keine Accordion-Elemente definiert oder Daten nicht geladen. "))],64)):ne("",!0)])):ne("",!0),w.value==="preview"||w.value==="preview-forced"?(P(),V("div",Q5e,[m("div",Z5e,[ee[81]||(ee[81]=m("h6",{class:"mb-2"},"Preview Debug Info:",-1)),m("div",null,"Content Type: "+B(I.value.contentType),1),I.value.contentType==="multi-column"?(P(),V("div",J5e," Columns: "+B(I.value.columnsContent?I.value.columnsContent.length:0),1)):ne("",!0),I.value.contentType==="accordion"?(P(),V("div",X5e," Items: "+B(I.value.accordionItems?I.value.accordionItems.length:0),1)):ne("",!0),m("div",null,"Preview Tab: "+B(w.value),1)]),I.value.contentType==="standard"?(P(),V("div",{key:0,innerHTML:I.value.content},null,8,eBe)):I.value.contentType==="multi-column"?(P(),V(Fe,{key:1},[I.value.columnsContent&&I.value.columnsContent.length>0?(P(),V("div",tBe,[m("div",nBe,[(P(!0),V(Fe,null,ct(I.value.columnsContent,(Te,rt)=>(P(),V("div",{key:rt,class:Ze(ce(I.value.columnCount))},[m("div",{class:"border rounded p-2 bg-white h-100",innerHTML:Te.content},null,8,iBe)],2))),128))])])):(P(),V("div",rBe," Keine Spalten definiert oder Daten nicht geladen. "))],64)):I.value.contentType==="accordion"?(P(),V(Fe,{key:2},[I.value.accordionItems&&I.value.accordionItems.length>0?(P(),V("div",sBe,[m("div",oBe,[(P(!0),V(Fe,null,ct(I.value.accordionItems,(Te,rt)=>(P(),V("div",{key:rt,class:"accordion-item"},[m("h2",{id:"preview-heading-"+rt,class:"accordion-header"},[m("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#preview-collapse-"+rt,"aria-expanded":"false","aria-controls":"preview-collapse-"+rt},B(Te.title||"Unbenanntes Element"),9,lBe)],8,aBe),m("div",{id:"preview-collapse-"+rt,class:"accordion-collapse collapse","aria-labelledby":"preview-heading-"+rt,"data-bs-parent":"#previewAccordion"},[m("div",{class:"accordion-body",innerHTML:Te.content},null,8,uBe)],8,cBe)]))),128))])])):(P(),V("div",dBe," Keine Accordion-Elemente definiert oder Daten nicht geladen. "))],64)):ne("",!0)])):ne("",!0)])])])):ne("",!0)]))}},mBe=Yt(hBe,[["__scopeId","data-v-f987ccb3"]]),gBe={class:"row"},pBe={class:"col-12"},vBe={class:"text-muted"},bBe={class:"alert alert-info"},wBe={class:"row mt-3"},yBe={class:"col-12"},_Be={__name:"StaticContentEditorView",setup(n){const t=jo([mi,pr,Ir,_o,ko,cl,dc,fc]);return(e,i)=>(P(),Ge(Ki,{"meta-title":e.$t("navigation.views.staticContentEditor")},{title:$e(()=>[fe(B(e.$t("navigation.views.staticContentEditor")),1)]),header:$e(()=>[Ce(qo,{routes:M(t)},null,8,["routes"])]),content:$e(()=>[m("div",gBe,[m("div",pBe,[m("p",vBe,B(e.$t("view.staticContentEditor.description","Verwalten Sie statische Inhalte für Ihre Webseite.")),1),m("div",bBe,[i[0]||(i[0]=m("i",{class:"bi bi-info-circle me-2"},null,-1)),fe(" "+B(e.$t("view.staticContentEditor.infoText","Hier können Sie Seiten und Abschnitte für statische Inhalte erstellen und bearbeiten.")),1)])])]),m("div",wBe,[m("div",yBe,[Ce(mBe)])])]),_:1},8,["meta-title"]))}},kBe=Yt(_Be,[["__scopeId","data-v-4a2ee0aa"]]);function EBe(n){return n.trim().replace(/[^a-zA-Z0-9\- ]/g,"").replace(/\s+/g,"-").replace(/--/g,"").toLowerCase()}const CBe=["for"],TBe={class:"input-group"},SBe=["id","name","autocomplete","type"],ABe={class:"input-group-text p-0"},IBe={key:1,class:"form-text text-muted"},PBe=["innerHTML"],xBe={__name:"SlugInput",props:{label:String,id:String,type:String,name:String,autocomplete:String,classes:{type:Array,default:[]},hasErrors:Boolean,errors:{type:Array,default:[]},value:String,baseValue:String,helpText:String},emits:["change"],setup(n,{emit:t}){const e=t,i=n,r=Z(i.value);function s(){e("change",{value:r.value})}function o(){r.value=EBe(i.baseValue),s()}return(a,l)=>(P(),V(Fe,null,[n.label?(P(),V("label",{key:0,for:n.id},B(n.label),9,CBe)):ne("",!0),m("div",TBe,[vn(m("input",{id:n.id,"onUpdate:modelValue":l[0]||(l[0]=c=>r.value=c),name:n.name,class:Ze(["form-control",n.hasErrors?"is-invalid":null,...n.classes]),autocomplete:n.autocomplete,type:n.type,onKeyup:s},null,42,SBe),[[$_,r.value]]),m("div",ABe,[m("button",{class:"btn btn-transparent",onClick:bt(o,["prevent"])},[...l[1]||(l[1]=[m("i",{class:"bi bi-arrow-clockwise"},null,-1)])])])]),n.helpText?(P(),V("div",IBe,[m("span",{innerHTML:n.helpText},null,8,PBe)])):ne("",!0),(P(!0),V(Fe,null,ct(n.errors,c=>(P(),V("span",{key:c.uid,class:"form-field-error text-danger"},[fe(B(a.$t("error.formValidation."+c.$validator)),1),l[2]||(l[2]=m("br",null,null,-1))]))),128))],64))}},OBe=["for"],RBe=["id","rows","cols","name","autocomplete"],VBe={key:1,class:"form-text text-muted"},DBe=["innerHTML"],jP={__name:"TextInput",props:{label:String,id:String,type:String,name:String,autocomplete:String,classes:{type:Array,default:[]},hasErrors:Boolean,errors:{type:Array,default:[]},value:String,rows:Number,cols:Number,helpText:String},emits:["change"],setup(n,{emit:t}){const e=t,r=Z(n.value);function s(){e("change",{value:r.value})}return(o,a)=>(P(),V(Fe,null,[n.label?(P(),V("label",{key:0,for:n.id},B(n.label),9,OBe)):ne("",!0),vn(m("textarea",{id:n.id,"onUpdate:modelValue":a[0]||(a[0]=l=>r.value=l),rows:n.rows,cols:n.cols,name:n.name,class:Ze(["form-control",n.hasErrors?"is-invalid":null,...n.classes]),autocomplete:n.autocomplete,onKeyup:s},null,42,RBe),[[Bi,r.value]]),n.helpText?(P(),V("div",VBe,[m("span",{innerHTML:n.helpText},null,8,DBe)])):ne("",!0),(P(!0),V(Fe,null,ct(n.errors,l=>(P(),V("span",{key:l.uid,class:"form-field-error text-danger"},[fe(B(o.$t("error.formValidation."+l.$validator)),1),a[1]||(a[1]=m("br",null,null,-1))]))),128))],64))}};function Ho(n){"@babel/helpers - typeof";return Ho=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ho(n)}function jt(n){if(n===null||n===!0||n===!1)return NaN;var t=Number(n);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function At(n,t){if(t.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+t.length+" present")}function Ft(n){At(1,arguments);var t=Object.prototype.toString.call(n);return n instanceof Date||Ho(n)==="object"&&t==="[object Date]"?new Date(n.getTime()):typeof n=="number"||t==="[object Number]"?new Date(n):((typeof n=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Fl(n,t){At(2,arguments);var e=Ft(n),i=jt(t);return isNaN(i)?new Date(NaN):(i&&e.setDate(e.getDate()+i),e)}function ga(n,t){At(2,arguments);var e=Ft(n),i=jt(t);if(isNaN(i))return new Date(NaN);if(!i)return e;var r=e.getDate(),s=new Date(e.getTime());s.setMonth(e.getMonth()+i+1,0);var o=s.getDate();return r>=o?s:(e.setFullYear(s.getFullYear(),s.getMonth(),r),e)}function f9(n,t){if(At(2,arguments),!t||Ho(t)!=="object")return new Date(NaN);var e=t.years?jt(t.years):0,i=t.months?jt(t.months):0,r=t.weeks?jt(t.weeks):0,s=t.days?jt(t.days):0,o=t.hours?jt(t.hours):0,a=t.minutes?jt(t.minutes):0,l=t.seconds?jt(t.seconds):0,c=Ft(n),u=i||e?ga(c,i+e*12):c,d=s||r?Fl(u,s+r*7):u,f=a+o*60,h=l+f*60,g=h*1e3,v=new Date(d.getTime()+g);return v}function NBe(n,t){At(2,arguments);var e=Ft(n).getTime(),i=jt(t);return new Date(e+i)}var LBe={};function yl(){return LBe}function Bd(n,t){var e,i,r,s,o,a,l,c;At(1,arguments);var u=yl(),d=jt((e=(i=(r=(s=t==null?void 0:t.weekStartsOn)!==null&&s!==void 0?s:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&r!==void 0?r:u.weekStartsOn)!==null&&i!==void 0?i:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&e!==void 0?e:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=Ft(n),h=f.getDay(),g=(h<d?7:0)+h-d;return f.setDate(f.getDate()-g),f.setHours(0,0,0,0),f}function a_(n){return At(1,arguments),Bd(n,{weekStartsOn:1})}function MBe(n){At(1,arguments);var t=Ft(n),e=t.getFullYear(),i=new Date(0);i.setFullYear(e+1,0,4),i.setHours(0,0,0,0);var r=a_(i),s=new Date(0);s.setFullYear(e,0,4),s.setHours(0,0,0,0);var o=a_(s);return t.getTime()>=r.getTime()?e+1:t.getTime()>=o.getTime()?e:e-1}function $Be(n){At(1,arguments);var t=MBe(n),e=new Date(0);e.setFullYear(t,0,4),e.setHours(0,0,0,0);var i=a_(e);return i}function l_(n){var t=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return t.setUTCFullYear(n.getFullYear()),n.getTime()-t.getTime()}function GM(n){At(1,arguments);var t=Ft(n);return t.setHours(0,0,0,0),t}var BBe=864e5;function FBe(n,t){At(2,arguments);var e=GM(n),i=GM(t),r=e.getTime()-l_(e),s=i.getTime()-l_(i);return Math.round((r-s)/BBe)}function UBe(n,t){At(2,arguments);var e=jt(t),i=e*3;return ga(n,i)}function qP(n,t){At(2,arguments);var e=jt(t);return ga(n,e*12)}var GP=6e4,KP=36e5,zBe=1e3;function h9(n){return At(1,arguments),n instanceof Date||Ho(n)==="object"&&Object.prototype.toString.call(n)==="[object Date]"}function bp(n){if(At(1,arguments),!h9(n)&&typeof n!="number")return!1;var t=Ft(n);return!isNaN(Number(t))}function KM(n){At(1,arguments);var t=Ft(n),e=Math.floor(t.getMonth()/3)+1;return e}function m9(n,t){var e;At(1,arguments);var i=n||{},r=Ft(i.start),s=Ft(i.end),o=s.getTime();if(!(r.getTime()<=o))throw new RangeError("Invalid interval");var a=[],l=r;l.setHours(0,0,0,0);var c=Number((e=void 0)!==null&&e!==void 0?e:1);if(c<1||isNaN(c))throw new RangeError("`options.step` must be a number greater than 1");for(;l.getTime()<=o;)a.push(Ft(l)),l.setDate(l.getDate()+c),l.setHours(0,0,0,0);return a}function uv(n){At(1,arguments);var t=Ft(n),e=t.getMonth(),i=e-e%3;return t.setMonth(i,1),t.setHours(0,0,0,0),t}function HBe(n){At(1,arguments);var t=n||{},e=Ft(t.start),i=Ft(t.end),r=i.getTime();if(!(e.getTime()<=r))throw new RangeError("Invalid interval");var s=uv(e),o=uv(i);r=o.getTime();for(var a=[],l=s;l.getTime()<=r;)a.push(Ft(l)),l=UBe(l,1);return a}function WBe(n){At(1,arguments);var t=Ft(n),e=t.getFullYear();return t.setFullYear(e+1,0,0),t.setHours(23,59,59,999),t}function jBe(n){At(1,arguments);var t=Ft(n),e=new Date(0);return e.setFullYear(t.getFullYear(),0,1),e.setHours(0,0,0,0),e}function qBe(n,t){var e,i,r,s,o,a,l,c;At(1,arguments);var u=yl(),d=jt((e=(i=(r=(s=t==null?void 0:t.weekStartsOn)!==null&&s!==void 0?s:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&r!==void 0?r:u.weekStartsOn)!==null&&i!==void 0?i:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&e!==void 0?e:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=Ft(n),h=f.getDay(),g=(h<d?-7:0)+6-(h-d);return f.setDate(f.getDate()+g),f.setHours(23,59,59,999),f}function YM(n){At(1,arguments);var t=Ft(n),e=t.getMonth(),i=e-e%3+3;return t.setMonth(i,0),t.setHours(23,59,59,999),t}function g9(n,t){At(2,arguments);var e=jt(t);return NBe(n,-e)}var GBe=864e5;function KBe(n){At(1,arguments);var t=Ft(n),e=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var i=t.getTime(),r=e-i;return Math.floor(r/GBe)+1}function dm(n){At(1,arguments);var t=1,e=Ft(n),i=e.getUTCDay(),r=(i<t?7:0)+i-t;return e.setUTCDate(e.getUTCDate()-r),e.setUTCHours(0,0,0,0),e}function p9(n){At(1,arguments);var t=Ft(n),e=t.getUTCFullYear(),i=new Date(0);i.setUTCFullYear(e+1,0,4),i.setUTCHours(0,0,0,0);var r=dm(i),s=new Date(0);s.setUTCFullYear(e,0,4),s.setUTCHours(0,0,0,0);var o=dm(s);return t.getTime()>=r.getTime()?e+1:t.getTime()>=o.getTime()?e:e-1}function YBe(n){At(1,arguments);var t=p9(n),e=new Date(0);e.setUTCFullYear(t,0,4),e.setUTCHours(0,0,0,0);var i=dm(e);return i}var QBe=6048e5;function v9(n){At(1,arguments);var t=Ft(n),e=dm(t).getTime()-YBe(t).getTime();return Math.round(e/QBe)+1}function Fd(n,t){var e,i,r,s,o,a,l,c;At(1,arguments);var u=yl(),d=jt((e=(i=(r=(s=t==null?void 0:t.weekStartsOn)!==null&&s!==void 0?s:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&r!==void 0?r:u.weekStartsOn)!==null&&i!==void 0?i:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&e!==void 0?e:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=Ft(n),h=f.getUTCDay(),g=(h<d?7:0)+h-d;return f.setUTCDate(f.getUTCDate()-g),f.setUTCHours(0,0,0,0),f}function YP(n,t){var e,i,r,s,o,a,l,c;At(1,arguments);var u=Ft(n),d=u.getUTCFullYear(),f=yl(),h=jt((e=(i=(r=(s=t==null?void 0:t.firstWeekContainsDate)!==null&&s!==void 0?s:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&r!==void 0?r:f.firstWeekContainsDate)!==null&&i!==void 0?i:(l=f.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&e!==void 0?e:1);if(!(h>=1&&h<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(d+1,0,h),g.setUTCHours(0,0,0,0);var v=Fd(g,t),_=new Date(0);_.setUTCFullYear(d,0,h),_.setUTCHours(0,0,0,0);var w=Fd(_,t);return u.getTime()>=v.getTime()?d+1:u.getTime()>=w.getTime()?d:d-1}function ZBe(n,t){var e,i,r,s,o,a,l,c;At(1,arguments);var u=yl(),d=jt((e=(i=(r=(s=t==null?void 0:t.firstWeekContainsDate)!==null&&s!==void 0?s:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&r!==void 0?r:u.firstWeekContainsDate)!==null&&i!==void 0?i:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&e!==void 0?e:1),f=YP(n,t),h=new Date(0);h.setUTCFullYear(f,0,d),h.setUTCHours(0,0,0,0);var g=Fd(h,t);return g}var JBe=6048e5;function b9(n,t){At(1,arguments);var e=Ft(n),i=Fd(e,t).getTime()-ZBe(e,t).getTime();return Math.round(i/JBe)+1}function ci(n,t){for(var e=n<0?"-":"",i=Math.abs(n).toString();i.length<t;)i="0"+i;return e+i}var Ic={y:function(t,e){var i=t.getUTCFullYear(),r=i>0?i:1-i;return ci(e==="yy"?r%100:r,e.length)},M:function(t,e){var i=t.getUTCMonth();return e==="M"?String(i+1):ci(i+1,2)},d:function(t,e){return ci(t.getUTCDate(),e.length)},a:function(t,e){var i=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];case"aaaa":default:return i==="am"?"a.m.":"p.m."}},h:function(t,e){return ci(t.getUTCHours()%12||12,e.length)},H:function(t,e){return ci(t.getUTCHours(),e.length)},m:function(t,e){return ci(t.getUTCMinutes(),e.length)},s:function(t,e){return ci(t.getUTCSeconds(),e.length)},S:function(t,e){var i=e.length,r=t.getUTCMilliseconds(),s=Math.floor(r*Math.pow(10,i-3));return ci(s,e.length)}},xf={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},XBe={G:function(t,e,i){var r=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return i.era(r,{width:"abbreviated"});case"GGGGG":return i.era(r,{width:"narrow"});case"GGGG":default:return i.era(r,{width:"wide"})}},y:function(t,e,i){if(e==="yo"){var r=t.getUTCFullYear(),s=r>0?r:1-r;return i.ordinalNumber(s,{unit:"year"})}return Ic.y(t,e)},Y:function(t,e,i,r){var s=YP(t,r),o=s>0?s:1-s;if(e==="YY"){var a=o%100;return ci(a,2)}return e==="Yo"?i.ordinalNumber(o,{unit:"year"}):ci(o,e.length)},R:function(t,e){var i=p9(t);return ci(i,e.length)},u:function(t,e){var i=t.getUTCFullYear();return ci(i,e.length)},Q:function(t,e,i){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return ci(r,2);case"Qo":return i.ordinalNumber(r,{unit:"quarter"});case"QQQ":return i.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,i){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return ci(r,2);case"qo":return i.ordinalNumber(r,{unit:"quarter"});case"qqq":return i.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,i){var r=t.getUTCMonth();switch(e){case"M":case"MM":return Ic.M(t,e);case"Mo":return i.ordinalNumber(r+1,{unit:"month"});case"MMM":return i.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,i){var r=t.getUTCMonth();switch(e){case"L":return String(r+1);case"LL":return ci(r+1,2);case"Lo":return i.ordinalNumber(r+1,{unit:"month"});case"LLL":return i.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,i,r){var s=b9(t,r);return e==="wo"?i.ordinalNumber(s,{unit:"week"}):ci(s,e.length)},I:function(t,e,i){var r=v9(t);return e==="Io"?i.ordinalNumber(r,{unit:"week"}):ci(r,e.length)},d:function(t,e,i){return e==="do"?i.ordinalNumber(t.getUTCDate(),{unit:"date"}):Ic.d(t,e)},D:function(t,e,i){var r=KBe(t);return e==="Do"?i.ordinalNumber(r,{unit:"dayOfYear"}):ci(r,e.length)},E:function(t,e,i){var r=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return i.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(r,{width:"short",context:"formatting"});case"EEEE":default:return i.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,i,r){var s=t.getUTCDay(),o=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return ci(o,2);case"eo":return i.ordinalNumber(o,{unit:"day"});case"eee":return i.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(s,{width:"short",context:"formatting"});case"eeee":default:return i.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,i,r){var s=t.getUTCDay(),o=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return ci(o,e.length);case"co":return i.ordinalNumber(o,{unit:"day"});case"ccc":return i.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(s,{width:"narrow",context:"standalone"});case"cccccc":return i.day(s,{width:"short",context:"standalone"});case"cccc":default:return i.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,i){var r=t.getUTCDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return ci(s,e.length);case"io":return i.ordinalNumber(s,{unit:"day"});case"iii":return i.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(r,{width:"short",context:"formatting"});case"iiii":default:return i.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,i){var r=t.getUTCHours(),s=r/12>=1?"pm":"am";switch(e){case"a":case"aa":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,i){var r=t.getUTCHours(),s;switch(r===12?s=xf.noon:r===0?s=xf.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,i){var r=t.getUTCHours(),s;switch(r>=17?s=xf.evening:r>=12?s=xf.afternoon:r>=4?s=xf.morning:s=xf.night,e){case"B":case"BB":case"BBB":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,i){if(e==="ho"){var r=t.getUTCHours()%12;return r===0&&(r=12),i.ordinalNumber(r,{unit:"hour"})}return Ic.h(t,e)},H:function(t,e,i){return e==="Ho"?i.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Ic.H(t,e)},K:function(t,e,i){var r=t.getUTCHours()%12;return e==="Ko"?i.ordinalNumber(r,{unit:"hour"}):ci(r,e.length)},k:function(t,e,i){var r=t.getUTCHours();return r===0&&(r=24),e==="ko"?i.ordinalNumber(r,{unit:"hour"}):ci(r,e.length)},m:function(t,e,i){return e==="mo"?i.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Ic.m(t,e)},s:function(t,e,i){return e==="so"?i.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Ic.s(t,e)},S:function(t,e){return Ic.S(t,e)},X:function(t,e,i,r){var s=r._originalDate||t,o=s.getTimezoneOffset();if(o===0)return"Z";switch(e){case"X":return ZM(o);case"XXXX":case"XX":return ed(o);case"XXXXX":case"XXX":default:return ed(o,":")}},x:function(t,e,i,r){var s=r._originalDate||t,o=s.getTimezoneOffset();switch(e){case"x":return ZM(o);case"xxxx":case"xx":return ed(o);case"xxxxx":case"xxx":default:return ed(o,":")}},O:function(t,e,i,r){var s=r._originalDate||t,o=s.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+QM(o,":");case"OOOO":default:return"GMT"+ed(o,":")}},z:function(t,e,i,r){var s=r._originalDate||t,o=s.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+QM(o,":");case"zzzz":default:return"GMT"+ed(o,":")}},t:function(t,e,i,r){var s=r._originalDate||t,o=Math.floor(s.getTime()/1e3);return ci(o,e.length)},T:function(t,e,i,r){var s=r._originalDate||t,o=s.getTime();return ci(o,e.length)}};function QM(n,t){var e=n>0?"-":"+",i=Math.abs(n),r=Math.floor(i/60),s=i%60;if(s===0)return e+String(r);var o=t;return e+String(r)+o+ci(s,2)}function ZM(n,t){if(n%60===0){var e=n>0?"-":"+";return e+ci(Math.abs(n)/60,2)}return ed(n,t)}function ed(n,t){var e=t||"",i=n>0?"-":"+",r=Math.abs(n),s=ci(Math.floor(r/60),2),o=ci(r%60,2);return i+s+e+o}var JM=function(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},w9=function(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},e3e=function(t,e){var i=t.match(/(P+)(p+)?/)||[],r=i[1],s=i[2];if(!s)return JM(t,e);var o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",JM(r,e)).replace("{{time}}",w9(s,e))},pS={p:w9,P:e3e},t3e=["D","DD"],n3e=["YY","YYYY"];function y9(n){return t3e.indexOf(n)!==-1}function _9(n){return n3e.indexOf(n)!==-1}function c_(n,t,e){if(n==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var i3e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},r3e=function(t,e,i){var r,s=i3e[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),i!=null&&i.addSuffix?i.comparison&&i.comparison>0?"in "+r:r+" ago":r};function CE(n){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.width?String(t.width):n.defaultWidth,i=n.formats[e]||n.formats[n.defaultWidth];return i}}var s3e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},o3e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},a3e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},l3e={date:CE({formats:s3e,defaultWidth:"full"}),time:CE({formats:o3e,defaultWidth:"full"}),dateTime:CE({formats:a3e,defaultWidth:"full"})},c3e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},u3e=function(t,e,i,r){return c3e[t]};function kg(n){return function(t,e){var i=e!=null&&e.context?String(e.context):"standalone",r;if(i==="formatting"&&n.formattingValues){var s=n.defaultFormattingWidth||n.defaultWidth,o=e!=null&&e.width?String(e.width):s;r=n.formattingValues[o]||n.formattingValues[s]}else{var a=n.defaultWidth,l=e!=null&&e.width?String(e.width):n.defaultWidth;r=n.values[l]||n.values[a]}var c=n.argumentCallback?n.argumentCallback(t):t;return r[c]}}var d3e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},f3e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},h3e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},m3e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},g3e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},p3e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},v3e=function(t,e){var i=Number(t),r=i%100;if(r>20||r<10)switch(r%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},b3e={ordinalNumber:v3e,era:kg({values:d3e,defaultWidth:"wide"}),quarter:kg({values:f3e,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:kg({values:h3e,defaultWidth:"wide"}),day:kg({values:m3e,defaultWidth:"wide"}),dayPeriod:kg({values:g3e,defaultWidth:"wide",formattingValues:p3e,defaultFormattingWidth:"wide"})};function Eg(n){return function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=e.width,r=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],s=t.match(r);if(!s)return null;var o=s[0],a=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(a)?y3e(a,function(d){return d.test(o)}):w3e(a,function(d){return d.test(o)}),c;c=n.valueCallback?n.valueCallback(l):l,c=e.valueCallback?e.valueCallback(c):c;var u=t.slice(o.length);return{value:c,rest:u}}}function w3e(n,t){for(var e in n)if(n.hasOwnProperty(e)&&t(n[e]))return e}function y3e(n,t){for(var e=0;e<n.length;e++)if(t(n[e]))return e}function _3e(n){return function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.match(n.matchPattern);if(!i)return null;var r=i[0],s=t.match(n.parsePattern);if(!s)return null;var o=n.valueCallback?n.valueCallback(s[0]):s[0];o=e.valueCallback?e.valueCallback(o):o;var a=t.slice(r.length);return{value:o,rest:a}}}var k3e=/^(\d+)(th|st|nd|rd)?/i,E3e=/\d+/i,C3e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},T3e={any:[/^b/i,/^(a|c)/i]},S3e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},A3e={any:[/1/i,/2/i,/3/i,/4/i]},I3e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},P3e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},x3e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},O3e={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},R3e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},V3e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},D3e={ordinalNumber:_3e({matchPattern:k3e,parsePattern:E3e,valueCallback:function(t){return parseInt(t,10)}}),era:Eg({matchPatterns:C3e,defaultMatchWidth:"wide",parsePatterns:T3e,defaultParseWidth:"any"}),quarter:Eg({matchPatterns:S3e,defaultMatchWidth:"wide",parsePatterns:A3e,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Eg({matchPatterns:I3e,defaultMatchWidth:"wide",parsePatterns:P3e,defaultParseWidth:"any"}),day:Eg({matchPatterns:x3e,defaultMatchWidth:"wide",parsePatterns:O3e,defaultParseWidth:"any"}),dayPeriod:Eg({matchPatterns:R3e,defaultMatchWidth:"any",parsePatterns:V3e,defaultParseWidth:"any"})},k9={code:"en-US",formatDistance:r3e,formatLong:l3e,formatRelative:u3e,localize:b3e,match:D3e,options:{weekStartsOn:0,firstWeekContainsDate:1}},N3e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,L3e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,M3e=/^'([^]*?)'?$/,$3e=/''/g,B3e=/[a-zA-Z]/;function tu(n,t,e){var i,r,s,o,a,l,c,u,d,f,h,g,v,_,w,C,k,E;At(2,arguments);var A=String(t),x=yl(),p=(i=(r=e==null?void 0:e.locale)!==null&&r!==void 0?r:x.locale)!==null&&i!==void 0?i:k9,D=jt((s=(o=(a=(l=e==null?void 0:e.firstWeekContainsDate)!==null&&l!==void 0?l:e==null||(c=e.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&a!==void 0?a:x.firstWeekContainsDate)!==null&&o!==void 0?o:(d=x.locale)===null||d===void 0||(f=d.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(D>=1&&D<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var R=jt((h=(g=(v=(_=e==null?void 0:e.weekStartsOn)!==null&&_!==void 0?_:e==null||(w=e.locale)===null||w===void 0||(C=w.options)===null||C===void 0?void 0:C.weekStartsOn)!==null&&v!==void 0?v:x.weekStartsOn)!==null&&g!==void 0?g:(k=x.locale)===null||k===void 0||(E=k.options)===null||E===void 0?void 0:E.weekStartsOn)!==null&&h!==void 0?h:0);if(!(R>=0&&R<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!p.localize)throw new RangeError("locale must contain localize property");if(!p.formatLong)throw new RangeError("locale must contain formatLong property");var S=Ft(n);if(!bp(S))throw new RangeError("Invalid time value");var I=l_(S),F=g9(S,I),H={firstWeekContainsDate:D,weekStartsOn:R,locale:p,_originalDate:S},q=A.match(L3e).map(function(N){var $=N[0];if($==="p"||$==="P"){var U=pS[$];return U(N,p.formatLong)}return N}).join("").match(N3e).map(function(N){if(N==="''")return"'";var $=N[0];if($==="'")return F3e(N);var U=XBe[$];if(U)return!(e!=null&&e.useAdditionalWeekYearTokens)&&_9(N)&&c_(N,t,String(n)),!(e!=null&&e.useAdditionalDayOfYearTokens)&&y9(N)&&c_(N,t,String(n)),U(F,N,p.localize,H);if($.match(B3e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+$+"`");return N}).join("");return q}function F3e(n){var t=n.match(M3e);return t?t[1].replace($3e,"'"):n}function U3e(n,t){if(n==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n}function z3e(n){At(1,arguments);var t=Ft(n),e=t.getDay();return e}function H3e(n){At(1,arguments);var t=Ft(n),e=t.getFullYear(),i=t.getMonth(),r=new Date(0);return r.setFullYear(e,i+1,0),r.setHours(0,0,0,0),r.getDate()}function pa(n){At(1,arguments);var t=Ft(n),e=t.getHours();return e}var W3e=6048e5;function j3e(n){At(1,arguments);var t=Ft(n),e=a_(t).getTime()-$Be(t).getTime();return Math.round(e/W3e)+1}function sl(n){At(1,arguments);var t=Ft(n),e=t.getMinutes();return e}function Ln(n){At(1,arguments);var t=Ft(n),e=t.getMonth();return e}function fm(n){At(1,arguments);var t=Ft(n),e=t.getSeconds();return e}function q3e(n,t){var e,i,r,s,o,a,l,c;At(1,arguments);var u=Ft(n),d=u.getFullYear(),f=yl(),h=jt((e=(i=(r=(s=t==null?void 0:t.firstWeekContainsDate)!==null&&s!==void 0?s:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&r!==void 0?r:f.firstWeekContainsDate)!==null&&i!==void 0?i:(l=f.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&e!==void 0?e:1);if(!(h>=1&&h<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setFullYear(d+1,0,h),g.setHours(0,0,0,0);var v=Bd(g,t),_=new Date(0);_.setFullYear(d,0,h),_.setHours(0,0,0,0);var w=Bd(_,t);return u.getTime()>=v.getTime()?d+1:u.getTime()>=w.getTime()?d:d-1}function G3e(n,t){var e,i,r,s,o,a,l,c;At(1,arguments);var u=yl(),d=jt((e=(i=(r=(s=t==null?void 0:t.firstWeekContainsDate)!==null&&s!==void 0?s:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&r!==void 0?r:u.firstWeekContainsDate)!==null&&i!==void 0?i:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&e!==void 0?e:1),f=q3e(n,t),h=new Date(0);h.setFullYear(f,0,d),h.setHours(0,0,0,0);var g=Bd(h,t);return g}var K3e=6048e5;function Y3e(n,t){At(1,arguments);var e=Ft(n),i=Bd(e,t).getTime()-G3e(e,t).getTime();return Math.round(i/K3e)+1}function pn(n){return At(1,arguments),Ft(n).getFullYear()}function dv(n,t){At(2,arguments);var e=Ft(n),i=Ft(t);return e.getTime()>i.getTime()}function fv(n,t){At(2,arguments);var e=Ft(n),i=Ft(t);return e.getTime()<i.getTime()}function fh(n,t){At(2,arguments);var e=Ft(n),i=Ft(t);return e.getTime()===i.getTime()}function XM(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,i=Array(t);e<t;e++)i[e]=n[e];return i}function Q3e(n,t){if(n){if(typeof n=="string")return XM(n,t);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?XM(n,t):void 0}}function e$(n,t){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=Q3e(n))||t){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){e=e.call(n)},n:function(){var c=e.next();return o=c.done,c},e:function(c){a=!0,s=c},f:function(){try{o||e.return==null||e.return()}finally{if(a)throw s}}}}function St(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function vS(n,t){return vS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},vS(n,t)}function $n(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&vS(n,t)}function u_(n){return u_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u_(n)}function E9(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E9=function(){return!!n})()}function Z3e(n,t){if(t&&(Ho(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return St(n)}function Bn(n){var t=E9();return function(){var e,i=u_(n);if(t){var r=u_(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return Z3e(this,e)}}function Pn(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function J3e(n,t){if(Ho(n)!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,t);if(Ho(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function C9(n){var t=J3e(n,"string");return Ho(t)=="symbol"?t:t+""}function X3e(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,C9(i.key),i)}}function xn(n,t,e){return t&&X3e(n.prototype,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Tt(n,t,e){return(t=C9(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var eFe=10,T9=function(){function n(){Pn(this,n),Tt(this,"priority",void 0),Tt(this,"subPriority",0)}return xn(n,[{key:"validate",value:function(e,i){return!0}}]),n}(),tFe=function(n){$n(e,n);var t=Bn(e);function e(i,r,s,o,a){var l;return Pn(this,e),l=t.call(this),l.value=i,l.validateValue=r,l.setValue=s,l.priority=o,a&&(l.subPriority=a),l}return xn(e,[{key:"validate",value:function(r,s){return this.validateValue(r,this.value,s)}},{key:"set",value:function(r,s,o){return this.setValue(r,s,this.value,o)}}]),e}(T9),nFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",eFe),Tt(St(i),"subPriority",-1),i}return xn(e,[{key:"set",value:function(r,s){if(s.timestampIsSet)return r;var o=new Date(0);return o.setFullYear(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()),o.setHours(r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds()),o}}]),e}(T9),Jn=function(){function n(){Pn(this,n),Tt(this,"incompatibleTokens",void 0),Tt(this,"priority",void 0),Tt(this,"subPriority",void 0)}return xn(n,[{key:"run",value:function(e,i,r,s){var o=this.parse(e,i,r,s);return o?{setter:new tFe(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}},{key:"validate",value:function(e,i,r){return!0}}]),n}(),iFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",140),Tt(St(i),"incompatibleTokens",["R","u","t","T"]),i}return xn(e,[{key:"parse",value:function(r,s,o){switch(s){case"G":case"GG":case"GGG":return o.era(r,{width:"abbreviated"})||o.era(r,{width:"narrow"});case"GGGGG":return o.era(r,{width:"narrow"});case"GGGG":default:return o.era(r,{width:"wide"})||o.era(r,{width:"abbreviated"})||o.era(r,{width:"narrow"})}}},{key:"set",value:function(r,s,o){return s.era=o,r.setUTCFullYear(o,0,1),r.setUTCHours(0,0,0,0),r}}]),e}(Jn),Xi={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Wa={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function er(n,t){return n&&{value:t(n.value),rest:n.rest}}function $i(n,t){var e=t.match(n);return e?{value:parseInt(e[0],10),rest:t.slice(e[0].length)}:null}function ja(n,t){var e=t.match(n);if(!e)return null;if(e[0]==="Z")return{value:0,rest:t.slice(1)};var i=e[1]==="+"?1:-1,r=e[2]?parseInt(e[2],10):0,s=e[3]?parseInt(e[3],10):0,o=e[5]?parseInt(e[5],10):0;return{value:i*(r*KP+s*GP+o*zBe),rest:t.slice(e[0].length)}}function S9(n){return $i(Xi.anyDigitsSigned,n)}function Gi(n,t){switch(n){case 1:return $i(Xi.singleDigit,t);case 2:return $i(Xi.twoDigits,t);case 3:return $i(Xi.threeDigits,t);case 4:return $i(Xi.fourDigits,t);default:return $i(new RegExp("^\\d{1,"+n+"}"),t)}}function d_(n,t){switch(n){case 1:return $i(Xi.singleDigitSigned,t);case 2:return $i(Xi.twoDigitsSigned,t);case 3:return $i(Xi.threeDigitsSigned,t);case 4:return $i(Xi.fourDigitsSigned,t);default:return $i(new RegExp("^-?\\d{1,"+n+"}"),t)}}function QP(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function A9(n,t){var e=t>0,i=e?t:1-t,r;if(i<=50)r=n||100;else{var s=i+50,o=Math.floor(s/100)*100,a=n>=s%100;r=n+o-(a?100:0)}return e?r:1-r}function I9(n){return n%400===0||n%4===0&&n%100!==0}var rFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",130),Tt(St(i),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),i}return xn(e,[{key:"parse",value:function(r,s,o){var a=function(c){return{year:c,isTwoDigitYear:s==="yy"}};switch(s){case"y":return er(Gi(4,r),a);case"yo":return er(o.ordinalNumber(r,{unit:"year"}),a);default:return er(Gi(s.length,r),a)}}},{key:"validate",value:function(r,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(r,s,o){var a=r.getUTCFullYear();if(o.isTwoDigitYear){var l=A9(o.year,a);return r.setUTCFullYear(l,0,1),r.setUTCHours(0,0,0,0),r}var c=!("era"in s)||s.era===1?o.year:1-o.year;return r.setUTCFullYear(c,0,1),r.setUTCHours(0,0,0,0),r}}]),e}(Jn),sFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",130),Tt(St(i),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),i}return xn(e,[{key:"parse",value:function(r,s,o){var a=function(c){return{year:c,isTwoDigitYear:s==="YY"}};switch(s){case"Y":return er(Gi(4,r),a);case"Yo":return er(o.ordinalNumber(r,{unit:"year"}),a);default:return er(Gi(s.length,r),a)}}},{key:"validate",value:function(r,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(r,s,o,a){var l=YP(r,a);if(o.isTwoDigitYear){var c=A9(o.year,l);return r.setUTCFullYear(c,0,a.firstWeekContainsDate),r.setUTCHours(0,0,0,0),Fd(r,a)}var u=!("era"in s)||s.era===1?o.year:1-o.year;return r.setUTCFullYear(u,0,a.firstWeekContainsDate),r.setUTCHours(0,0,0,0),Fd(r,a)}}]),e}(Jn),oFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",130),Tt(St(i),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),i}return xn(e,[{key:"parse",value:function(r,s){return d_(s==="R"?4:s.length,r)}},{key:"set",value:function(r,s,o){var a=new Date(0);return a.setUTCFullYear(o,0,4),a.setUTCHours(0,0,0,0),dm(a)}}]),e}(Jn),aFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",130),Tt(St(i),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),i}return xn(e,[{key:"parse",value:function(r,s){return d_(s==="u"?4:s.length,r)}},{key:"set",value:function(r,s,o){return r.setUTCFullYear(o,0,1),r.setUTCHours(0,0,0,0),r}}]),e}(Jn),lFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",120),Tt(St(i),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),i}return xn(e,[{key:"parse",value:function(r,s,o){switch(s){case"Q":case"QQ":return Gi(s.length,r);case"Qo":return o.ordinalNumber(r,{unit:"quarter"});case"QQQ":return o.quarter(r,{width:"abbreviated",context:"formatting"})||o.quarter(r,{width:"narrow",context:"formatting"});case"QQQQQ":return o.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(r,{width:"wide",context:"formatting"})||o.quarter(r,{width:"abbreviated",context:"formatting"})||o.quarter(r,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(r,s){return s>=1&&s<=4}},{key:"set",value:function(r,s,o){return r.setUTCMonth((o-1)*3,1),r.setUTCHours(0,0,0,0),r}}]),e}(Jn),cFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",120),Tt(St(i),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),i}return xn(e,[{key:"parse",value:function(r,s,o){switch(s){case"q":case"qq":return Gi(s.length,r);case"qo":return o.ordinalNumber(r,{unit:"quarter"});case"qqq":return o.quarter(r,{width:"abbreviated",context:"standalone"})||o.quarter(r,{width:"narrow",context:"standalone"});case"qqqqq":return o.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(r,{width:"wide",context:"standalone"})||o.quarter(r,{width:"abbreviated",context:"standalone"})||o.quarter(r,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(r,s){return s>=1&&s<=4}},{key:"set",value:function(r,s,o){return r.setUTCMonth((o-1)*3,1),r.setUTCHours(0,0,0,0),r}}]),e}(Jn),uFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),Tt(St(i),"priority",110),i}return xn(e,[{key:"parse",value:function(r,s,o){var a=function(c){return c-1};switch(s){case"M":return er($i(Xi.month,r),a);case"MM":return er(Gi(2,r),a);case"Mo":return er(o.ordinalNumber(r,{unit:"month"}),a);case"MMM":return o.month(r,{width:"abbreviated",context:"formatting"})||o.month(r,{width:"narrow",context:"formatting"});case"MMMMM":return o.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(r,{width:"wide",context:"formatting"})||o.month(r,{width:"abbreviated",context:"formatting"})||o.month(r,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(r,s){return s>=0&&s<=11}},{key:"set",value:function(r,s,o){return r.setUTCMonth(o,1),r.setUTCHours(0,0,0,0),r}}]),e}(Jn),dFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",110),Tt(St(i),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),i}return xn(e,[{key:"parse",value:function(r,s,o){var a=function(c){return c-1};switch(s){case"L":return er($i(Xi.month,r),a);case"LL":return er(Gi(2,r),a);case"Lo":return er(o.ordinalNumber(r,{unit:"month"}),a);case"LLL":return o.month(r,{width:"abbreviated",context:"standalone"})||o.month(r,{width:"narrow",context:"standalone"});case"LLLLL":return o.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(r,{width:"wide",context:"standalone"})||o.month(r,{width:"abbreviated",context:"standalone"})||o.month(r,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(r,s){return s>=0&&s<=11}},{key:"set",value:function(r,s,o){return r.setUTCMonth(o,1),r.setUTCHours(0,0,0,0),r}}]),e}(Jn);function fFe(n,t,e){At(2,arguments);var i=Ft(n),r=jt(t),s=b9(i,e)-r;return i.setUTCDate(i.getUTCDate()-s*7),i}var hFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",100),Tt(St(i),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),i}return xn(e,[{key:"parse",value:function(r,s,o){switch(s){case"w":return $i(Xi.week,r);case"wo":return o.ordinalNumber(r,{unit:"week"});default:return Gi(s.length,r)}}},{key:"validate",value:function(r,s){return s>=1&&s<=53}},{key:"set",value:function(r,s,o,a){return Fd(fFe(r,o,a),a)}}]),e}(Jn);function mFe(n,t){At(2,arguments);var e=Ft(n),i=jt(t),r=v9(e)-i;return e.setUTCDate(e.getUTCDate()-r*7),e}var gFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",100),Tt(St(i),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),i}return xn(e,[{key:"parse",value:function(r,s,o){switch(s){case"I":return $i(Xi.week,r);case"Io":return o.ordinalNumber(r,{unit:"week"});default:return Gi(s.length,r)}}},{key:"validate",value:function(r,s){return s>=1&&s<=53}},{key:"set",value:function(r,s,o){return dm(mFe(r,o))}}]),e}(Jn),pFe=[31,28,31,30,31,30,31,31,30,31,30,31],vFe=[31,29,31,30,31,30,31,31,30,31,30,31],bFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",90),Tt(St(i),"subPriority",1),Tt(St(i),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),i}return xn(e,[{key:"parse",value:function(r,s,o){switch(s){case"d":return $i(Xi.date,r);case"do":return o.ordinalNumber(r,{unit:"date"});default:return Gi(s.length,r)}}},{key:"validate",value:function(r,s){var o=r.getUTCFullYear(),a=I9(o),l=r.getUTCMonth();return a?s>=1&&s<=vFe[l]:s>=1&&s<=pFe[l]}},{key:"set",value:function(r,s,o){return r.setUTCDate(o),r.setUTCHours(0,0,0,0),r}}]),e}(Jn),wFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",90),Tt(St(i),"subpriority",1),Tt(St(i),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),i}return xn(e,[{key:"parse",value:function(r,s,o){switch(s){case"D":case"DD":return $i(Xi.dayOfYear,r);case"Do":return o.ordinalNumber(r,{unit:"date"});default:return Gi(s.length,r)}}},{key:"validate",value:function(r,s){var o=r.getUTCFullYear(),a=I9(o);return a?s>=1&&s<=366:s>=1&&s<=365}},{key:"set",value:function(r,s,o){return r.setUTCMonth(0,o),r.setUTCHours(0,0,0,0),r}}]),e}(Jn);function ZP(n,t,e){var i,r,s,o,a,l,c,u;At(2,arguments);var d=yl(),f=jt((i=(r=(s=(o=e==null?void 0:e.weekStartsOn)!==null&&o!==void 0?o:e==null||(a=e.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:d.weekStartsOn)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&i!==void 0?i:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=Ft(n),g=jt(t),v=h.getUTCDay(),_=g%7,w=(_+7)%7,C=(w<f?7:0)+g-v;return h.setUTCDate(h.getUTCDate()+C),h}var yFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",90),Tt(St(i),"incompatibleTokens",["D","i","e","c","t","T"]),i}return xn(e,[{key:"parse",value:function(r,s,o){switch(s){case"E":case"EE":case"EEE":return o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});case"EEEEE":return o.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});case"EEEE":default:return o.day(r,{width:"wide",context:"formatting"})||o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(r,s){return s>=0&&s<=6}},{key:"set",value:function(r,s,o,a){return r=ZP(r,o,a),r.setUTCHours(0,0,0,0),r}}]),e}(Jn),_Fe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",90),Tt(St(i),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),i}return xn(e,[{key:"parse",value:function(r,s,o,a){var l=function(u){var d=Math.floor((u-1)/7)*7;return(u+a.weekStartsOn+6)%7+d};switch(s){case"e":case"ee":return er(Gi(s.length,r),l);case"eo":return er(o.ordinalNumber(r,{unit:"day"}),l);case"eee":return o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});case"eeeee":return o.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});case"eeee":default:return o.day(r,{width:"wide",context:"formatting"})||o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(r,s){return s>=0&&s<=6}},{key:"set",value:function(r,s,o,a){return r=ZP(r,o,a),r.setUTCHours(0,0,0,0),r}}]),e}(Jn),kFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",90),Tt(St(i),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),i}return xn(e,[{key:"parse",value:function(r,s,o,a){var l=function(u){var d=Math.floor((u-1)/7)*7;return(u+a.weekStartsOn+6)%7+d};switch(s){case"c":case"cc":return er(Gi(s.length,r),l);case"co":return er(o.ordinalNumber(r,{unit:"day"}),l);case"ccc":return o.day(r,{width:"abbreviated",context:"standalone"})||o.day(r,{width:"short",context:"standalone"})||o.day(r,{width:"narrow",context:"standalone"});case"ccccc":return o.day(r,{width:"narrow",context:"standalone"});case"cccccc":return o.day(r,{width:"short",context:"standalone"})||o.day(r,{width:"narrow",context:"standalone"});case"cccc":default:return o.day(r,{width:"wide",context:"standalone"})||o.day(r,{width:"abbreviated",context:"standalone"})||o.day(r,{width:"short",context:"standalone"})||o.day(r,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(r,s){return s>=0&&s<=6}},{key:"set",value:function(r,s,o,a){return r=ZP(r,o,a),r.setUTCHours(0,0,0,0),r}}]),e}(Jn);function EFe(n,t){At(2,arguments);var e=jt(t);e%7===0&&(e=e-7);var i=1,r=Ft(n),s=r.getUTCDay(),o=e%7,a=(o+7)%7,l=(a<i?7:0)+e-s;return r.setUTCDate(r.getUTCDate()+l),r}var CFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",90),Tt(St(i),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),i}return xn(e,[{key:"parse",value:function(r,s,o){var a=function(c){return c===0?7:c};switch(s){case"i":case"ii":return Gi(s.length,r);case"io":return o.ordinalNumber(r,{unit:"day"});case"iii":return er(o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"}),a);case"iiiii":return er(o.day(r,{width:"narrow",context:"formatting"}),a);case"iiiiii":return er(o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"}),a);case"iiii":default:return er(o.day(r,{width:"wide",context:"formatting"})||o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"}),a)}}},{key:"validate",value:function(r,s){return s>=1&&s<=7}},{key:"set",value:function(r,s,o){return r=EFe(r,o),r.setUTCHours(0,0,0,0),r}}]),e}(Jn),TFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",80),Tt(St(i),"incompatibleTokens",["b","B","H","k","t","T"]),i}return xn(e,[{key:"parse",value:function(r,s,o){switch(s){case"a":case"aa":case"aaa":return o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaaa":return o.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(r,{width:"wide",context:"formatting"})||o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(r,s,o){return r.setUTCHours(QP(o),0,0,0),r}}]),e}(Jn),SFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",80),Tt(St(i),"incompatibleTokens",["a","B","H","k","t","T"]),i}return xn(e,[{key:"parse",value:function(r,s,o){switch(s){case"b":case"bb":case"bbb":return o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbbb":return o.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(r,{width:"wide",context:"formatting"})||o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(r,s,o){return r.setUTCHours(QP(o),0,0,0),r}}]),e}(Jn),AFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",80),Tt(St(i),"incompatibleTokens",["a","b","t","T"]),i}return xn(e,[{key:"parse",value:function(r,s,o){switch(s){case"B":case"BB":case"BBB":return o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBBB":return o.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(r,{width:"wide",context:"formatting"})||o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(r,s,o){return r.setUTCHours(QP(o),0,0,0),r}}]),e}(Jn),IFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",70),Tt(St(i),"incompatibleTokens",["H","K","k","t","T"]),i}return xn(e,[{key:"parse",value:function(r,s,o){switch(s){case"h":return $i(Xi.hour12h,r);case"ho":return o.ordinalNumber(r,{unit:"hour"});default:return Gi(s.length,r)}}},{key:"validate",value:function(r,s){return s>=1&&s<=12}},{key:"set",value:function(r,s,o){var a=r.getUTCHours()>=12;return a&&o<12?r.setUTCHours(o+12,0,0,0):!a&&o===12?r.setUTCHours(0,0,0,0):r.setUTCHours(o,0,0,0),r}}]),e}(Jn),PFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",70),Tt(St(i),"incompatibleTokens",["a","b","h","K","k","t","T"]),i}return xn(e,[{key:"parse",value:function(r,s,o){switch(s){case"H":return $i(Xi.hour23h,r);case"Ho":return o.ordinalNumber(r,{unit:"hour"});default:return Gi(s.length,r)}}},{key:"validate",value:function(r,s){return s>=0&&s<=23}},{key:"set",value:function(r,s,o){return r.setUTCHours(o,0,0,0),r}}]),e}(Jn),xFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",70),Tt(St(i),"incompatibleTokens",["h","H","k","t","T"]),i}return xn(e,[{key:"parse",value:function(r,s,o){switch(s){case"K":return $i(Xi.hour11h,r);case"Ko":return o.ordinalNumber(r,{unit:"hour"});default:return Gi(s.length,r)}}},{key:"validate",value:function(r,s){return s>=0&&s<=11}},{key:"set",value:function(r,s,o){var a=r.getUTCHours()>=12;return a&&o<12?r.setUTCHours(o+12,0,0,0):r.setUTCHours(o,0,0,0),r}}]),e}(Jn),OFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",70),Tt(St(i),"incompatibleTokens",["a","b","h","H","K","t","T"]),i}return xn(e,[{key:"parse",value:function(r,s,o){switch(s){case"k":return $i(Xi.hour24h,r);case"ko":return o.ordinalNumber(r,{unit:"hour"});default:return Gi(s.length,r)}}},{key:"validate",value:function(r,s){return s>=1&&s<=24}},{key:"set",value:function(r,s,o){var a=o<=24?o%24:o;return r.setUTCHours(a,0,0,0),r}}]),e}(Jn),RFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",60),Tt(St(i),"incompatibleTokens",["t","T"]),i}return xn(e,[{key:"parse",value:function(r,s,o){switch(s){case"m":return $i(Xi.minute,r);case"mo":return o.ordinalNumber(r,{unit:"minute"});default:return Gi(s.length,r)}}},{key:"validate",value:function(r,s){return s>=0&&s<=59}},{key:"set",value:function(r,s,o){return r.setUTCMinutes(o,0,0),r}}]),e}(Jn),VFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",50),Tt(St(i),"incompatibleTokens",["t","T"]),i}return xn(e,[{key:"parse",value:function(r,s,o){switch(s){case"s":return $i(Xi.second,r);case"so":return o.ordinalNumber(r,{unit:"second"});default:return Gi(s.length,r)}}},{key:"validate",value:function(r,s){return s>=0&&s<=59}},{key:"set",value:function(r,s,o){return r.setUTCSeconds(o,0),r}}]),e}(Jn),DFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",30),Tt(St(i),"incompatibleTokens",["t","T"]),i}return xn(e,[{key:"parse",value:function(r,s){var o=function(l){return Math.floor(l*Math.pow(10,-s.length+3))};return er(Gi(s.length,r),o)}},{key:"set",value:function(r,s,o){return r.setUTCMilliseconds(o),r}}]),e}(Jn),NFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",10),Tt(St(i),"incompatibleTokens",["t","T","x"]),i}return xn(e,[{key:"parse",value:function(r,s){switch(s){case"X":return ja(Wa.basicOptionalMinutes,r);case"XX":return ja(Wa.basic,r);case"XXXX":return ja(Wa.basicOptionalSeconds,r);case"XXXXX":return ja(Wa.extendedOptionalSeconds,r);case"XXX":default:return ja(Wa.extended,r)}}},{key:"set",value:function(r,s,o){return s.timestampIsSet?r:new Date(r.getTime()-o)}}]),e}(Jn),LFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",10),Tt(St(i),"incompatibleTokens",["t","T","X"]),i}return xn(e,[{key:"parse",value:function(r,s){switch(s){case"x":return ja(Wa.basicOptionalMinutes,r);case"xx":return ja(Wa.basic,r);case"xxxx":return ja(Wa.basicOptionalSeconds,r);case"xxxxx":return ja(Wa.extendedOptionalSeconds,r);case"xxx":default:return ja(Wa.extended,r)}}},{key:"set",value:function(r,s,o){return s.timestampIsSet?r:new Date(r.getTime()-o)}}]),e}(Jn),MFe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",40),Tt(St(i),"incompatibleTokens","*"),i}return xn(e,[{key:"parse",value:function(r){return S9(r)}},{key:"set",value:function(r,s,o){return[new Date(o*1e3),{timestampIsSet:!0}]}}]),e}(Jn),$Fe=function(n){$n(e,n);var t=Bn(e);function e(){var i;Pn(this,e);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s)),Tt(St(i),"priority",20),Tt(St(i),"incompatibleTokens","*"),i}return xn(e,[{key:"parse",value:function(r){return S9(r)}},{key:"set",value:function(r,s,o){return[new Date(o),{timestampIsSet:!0}]}}]),e}(Jn),BFe={G:new iFe,y:new rFe,Y:new sFe,R:new oFe,u:new aFe,Q:new lFe,q:new cFe,M:new uFe,L:new dFe,w:new hFe,I:new gFe,d:new bFe,D:new wFe,E:new yFe,e:new _Fe,c:new kFe,i:new CFe,a:new TFe,b:new SFe,B:new AFe,h:new IFe,H:new PFe,K:new xFe,k:new OFe,m:new RFe,s:new VFe,S:new DFe,X:new NFe,x:new LFe,t:new MFe,T:new $Fe},FFe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,UFe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,zFe=/^'([^]*?)'?$/,HFe=/''/g,WFe=/\S/,jFe=/[a-zA-Z]/;function bS(n,t,e,i){var r,s,o,a,l,c,u,d,f,h,g,v,_,w;At(3,arguments);var C=String(n),k=String(t),E=yl(),A=(r=(s=void 0)!==null&&s!==void 0?s:E.locale)!==null&&r!==void 0?r:k9;if(!A.match)throw new RangeError("locale must contain match property");var x=jt((o=(a=(l=(c=void 0)!==null&&c!==void 0?c:void 0)!==null&&l!==void 0?l:E.firstWeekContainsDate)!==null&&a!==void 0?a:(u=E.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&o!==void 0?o:1);if(!(x>=1&&x<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=jt((f=(h=(g=(v=void 0)!==null&&v!==void 0?v:void 0)!==null&&g!==void 0?g:E.weekStartsOn)!==null&&h!==void 0?h:(_=E.locale)===null||_===void 0||(w=_.options)===null||w===void 0?void 0:w.weekStartsOn)!==null&&f!==void 0?f:0);if(!(p>=0&&p<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(k==="")return C===""?Ft(e):new Date(NaN);var D={firstWeekContainsDate:x,weekStartsOn:p,locale:A},R=[new nFe],S=k.match(UFe).map(function(ve){var ce=ve[0];if(ce in pS){var J=pS[ce];return J(ve,A.formatLong)}return ve}).join("").match(FFe),I=[],F=e$(S),H;try{var q=function(){var ce=H.value;!(i!=null&&i.useAdditionalWeekYearTokens)&&_9(ce)&&c_(ce,k,n),!(i!=null&&i.useAdditionalDayOfYearTokens)&&y9(ce)&&c_(ce,k,n);var J=ce[0],ae=BFe[J];if(ae){var xe=ae.incompatibleTokens;if(Array.isArray(xe)){var he=I.find(function(We){return xe.includes(We.token)||We.token===J});if(he)throw new RangeError("The format string mustn't contain `".concat(he.fullToken,"` and `").concat(ce,"` at the same time"))}else if(ae.incompatibleTokens==="*"&&I.length>0)throw new RangeError("The format string mustn't contain `".concat(ce,"` and any other token at the same time"));I.push({token:J,fullToken:ce});var Ae=ae.run(C,ce,A.match,D);if(!Ae)return{v:new Date(NaN)};R.push(Ae.setter),C=Ae.rest}else{if(J.match(jFe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+J+"`");if(ce==="''"?ce="'":J==="'"&&(ce=qFe(ce)),C.indexOf(ce)===0)C=C.slice(ce.length);else return{v:new Date(NaN)}}};for(F.s();!(H=F.n()).done;){var N=q();if(Ho(N)==="object")return N.v}}catch(ve){F.e(ve)}finally{F.f()}if(C.length>0&&WFe.test(C))return new Date(NaN);var $=R.map(function(ve){return ve.priority}).sort(function(ve,ce){return ce-ve}).filter(function(ve,ce,J){return J.indexOf(ve)===ce}).map(function(ve){return R.filter(function(ce){return ce.priority===ve}).sort(function(ce,J){return J.subPriority-ce.subPriority})}).map(function(ve){return ve[0]}),U=Ft(e);if(isNaN(U.getTime()))return new Date(NaN);var re=g9(U,l_(U)),K={},z=e$($),ge;try{for(z.s();!(ge=z.n()).done;){var Q=ge.value;if(!Q.validate(re,D))return new Date(NaN);var ue=Q.set(re,K,D);Array.isArray(ue)?(re=ue[0],U3e(K,ue[1])):re=ue}}catch(ve){z.e(ve)}finally{z.f()}return re}function qFe(n){return n.match(zFe)[1].replace(HFe,"'")}function t$(n,t){At(2,arguments);var e=uv(n),i=uv(t);return e.getTime()===i.getTime()}function GFe(n,t){At(2,arguments);var e=jt(t);return Fl(n,-e)}function KFe(n,t){var e;At(1,arguments);var i=jt((e=void 0)!==null&&e!==void 0?e:2);if(i!==2&&i!==1&&i!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof n=="string"||Object.prototype.toString.call(n)==="[object String]"))return new Date(NaN);var r=JFe(n),s;if(r.date){var o=XFe(r.date,i);s=e4e(o.restDateString,o.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);var a=s.getTime(),l=0,c;if(r.time&&(l=t4e(r.time),isNaN(l)))return new Date(NaN);if(r.timezone){if(c=n4e(r.timezone),isNaN(c))return new Date(NaN)}else{var u=new Date(a+l),d=new Date(0);return d.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),d.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),d}return new Date(a+l+c)}var Gb={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},YFe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,QFe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,ZFe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function JFe(n){var t={},e=n.split(Gb.dateTimeDelimiter),i;if(e.length>2)return t;if(/:/.test(e[0])?i=e[0]:(t.date=e[0],i=e[1],Gb.timeZoneDelimiter.test(t.date)&&(t.date=n.split(Gb.timeZoneDelimiter)[0],i=n.substr(t.date.length,n.length))),i){var r=Gb.timezone.exec(i);r?(t.time=i.replace(r[1],""),t.timezone=r[1]):t.time=i}return t}function XFe(n,t){var e=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),i=n.match(e);if(!i)return{year:NaN,restDateString:""};var r=i[1]?parseInt(i[1]):null,s=i[2]?parseInt(i[2]):null;return{year:s===null?r:s*100,restDateString:n.slice((i[1]||i[2]).length)}}function e4e(n,t){if(t===null)return new Date(NaN);var e=n.match(YFe);if(!e)return new Date(NaN);var i=!!e[4],r=Cg(e[1]),s=Cg(e[2])-1,o=Cg(e[3]),a=Cg(e[4]),l=Cg(e[5])-1;if(i)return a4e(t,a,l)?i4e(t,a,l):new Date(NaN);var c=new Date(0);return!s4e(t,s,o)||!o4e(t,r)?new Date(NaN):(c.setUTCFullYear(t,s,Math.max(r,o)),c)}function Cg(n){return n?parseInt(n):1}function t4e(n){var t=n.match(QFe);if(!t)return NaN;var e=TE(t[1]),i=TE(t[2]),r=TE(t[3]);return l4e(e,i,r)?e*KP+i*GP+r*1e3:NaN}function TE(n){return n&&parseFloat(n.replace(",","."))||0}function n4e(n){if(n==="Z")return 0;var t=n.match(ZFe);if(!t)return 0;var e=t[1]==="+"?-1:1,i=parseInt(t[2]),r=t[3]&&parseInt(t[3])||0;return c4e(i,r)?e*(i*KP+r*GP):NaN}function i4e(n,t,e){var i=new Date(0);i.setUTCFullYear(n,0,4);var r=i.getUTCDay()||7,s=(t-1)*7+e+1-r;return i.setUTCDate(i.getUTCDate()+s),i}var r4e=[31,null,31,30,31,30,31,31,30,31,30,31];function P9(n){return n%400===0||n%4===0&&n%100!==0}function s4e(n,t,e){return t>=0&&t<=11&&e>=1&&e<=(r4e[t]||(P9(n)?29:28))}function o4e(n,t){return t>=1&&t<=(P9(n)?366:365)}function a4e(n,t,e){return t>=1&&t<=53&&e>=0&&e<=6}function l4e(n,t,e){return n===24?t===0&&e===0:e>=0&&e<60&&t>=0&&t<60&&n>=0&&n<25}function c4e(n,t){return t>=0&&t<=59}function x9(n,t){At(2,arguments);var e=Ft(n),i=jt(t),r=e.getFullYear(),s=e.getDate(),o=new Date(0);o.setFullYear(r,i,15),o.setHours(0,0,0,0);var a=H3e(o);return e.setMonth(i,Math.min(s,a)),e}function Ei(n,t){if(At(2,arguments),Ho(t)!=="object"||t===null)throw new RangeError("values parameter must be an object");var e=Ft(n);return isNaN(e.getTime())?new Date(NaN):(t.year!=null&&e.setFullYear(t.year),t.month!=null&&(e=x9(e,t.month)),t.date!=null&&e.setDate(jt(t.date)),t.hours!=null&&e.setHours(jt(t.hours)),t.minutes!=null&&e.setMinutes(jt(t.minutes)),t.seconds!=null&&e.setSeconds(jt(t.seconds)),t.milliseconds!=null&&e.setMilliseconds(jt(t.milliseconds)),e)}function O9(n,t){At(2,arguments);var e=Ft(n),i=jt(t);return e.setHours(i),e}function JP(n,t){At(2,arguments);var e=Ft(n),i=jt(t);return e.setMilliseconds(i),e}function R9(n,t){At(2,arguments);var e=Ft(n),i=jt(t);return e.setMinutes(i),e}function XP(n,t){At(2,arguments);var e=Ft(n),i=jt(t);return e.setSeconds(i),e}function Ka(n,t){At(2,arguments);var e=Ft(n),i=jt(t);return isNaN(e.getTime())?new Date(NaN):(e.setFullYear(i),e)}function hm(n,t){At(2,arguments);var e=jt(t);return ga(n,-e)}function u4e(n,t){if(At(2,arguments),!t||Ho(t)!=="object")return new Date(NaN);var e=t.years?jt(t.years):0,i=t.months?jt(t.months):0,r=t.weeks?jt(t.weeks):0,s=t.days?jt(t.days):0,o=t.hours?jt(t.hours):0,a=t.minutes?jt(t.minutes):0,l=t.seconds?jt(t.seconds):0,c=hm(n,i+e*12),u=GFe(c,s+r*7),d=a+o*60,f=l+d*60,h=f*1e3,g=new Date(u.getTime()-h);return g}function V9(n,t){At(2,arguments);var e=jt(t);return qP(n,-e)}function Bm(){return P(),V("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[m("path",{d:"M29.333 8c0-2.208-1.792-4-4-4h-18.667c-2.208 0-4 1.792-4 4v18.667c0 2.208 1.792 4 4 4h18.667c2.208 0 4-1.792 4-4v-18.667zM26.667 8v18.667c0 0.736-0.597 1.333-1.333 1.333 0 0-18.667 0-18.667 0-0.736 0-1.333-0.597-1.333-1.333 0 0 0-18.667 0-18.667 0-0.736 0.597-1.333 1.333-1.333 0 0 18.667 0 18.667 0 0.736 0 1.333 0.597 1.333 1.333z"}),m("path",{d:"M20 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"}),m("path",{d:"M9.333 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"}),m("path",{d:"M4 14.667h24c0.736 0 1.333-0.597 1.333-1.333s-0.597-1.333-1.333-1.333h-24c-0.736 0-1.333 0.597-1.333 1.333s0.597 1.333 1.333 1.333z"})])}Bm.compatConfig={MODE:3};function D9(){return P(),V("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[m("path",{d:"M23.057 7.057l-16 16c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l16-16c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0z"}),m("path",{d:"M7.057 8.943l16 16c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885l-16-16c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"})])}D9.compatConfig={MODE:3};function ex(){return P(),V("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[m("path",{d:"M20.943 23.057l-7.057-7.057c0 0 7.057-7.057 7.057-7.057 0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-8 8c-0.521 0.521-0.521 1.365 0 1.885l8 8c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"})])}ex.compatConfig={MODE:3};function tx(){return P(),V("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[m("path",{d:"M12.943 24.943l8-8c0.521-0.521 0.521-1.365 0-1.885l-8-8c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885l7.057 7.057c0 0-7.057 7.057-7.057 7.057-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0z"})])}tx.compatConfig={MODE:3};function nx(){return P(),V("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[m("path",{d:"M16 1.333c-8.095 0-14.667 6.572-14.667 14.667s6.572 14.667 14.667 14.667c8.095 0 14.667-6.572 14.667-14.667s-6.572-14.667-14.667-14.667zM16 4c6.623 0 12 5.377 12 12s-5.377 12-12 12c-6.623 0-12-5.377-12-12s5.377-12 12-12z"}),m("path",{d:"M14.667 8v8c0 0.505 0.285 0.967 0.737 1.193l5.333 2.667c0.658 0.329 1.46 0.062 1.789-0.596s0.062-1.46-0.596-1.789l-4.596-2.298c0 0 0-7.176 0-7.176 0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"})])}nx.compatConfig={MODE:3};function ix(){return P(),V("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[m("path",{d:"M24.943 19.057l-8-8c-0.521-0.521-1.365-0.521-1.885 0l-8 8c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l7.057-7.057c0 0 7.057 7.057 7.057 7.057 0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"})])}ix.compatConfig={MODE:3};function rx(){return P(),V("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon"},[m("path",{d:"M7.057 12.943l8 8c0.521 0.521 1.365 0.521 1.885 0l8-8c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-7.057 7.057c0 0-7.057-7.057-7.057-7.057-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"})])}rx.compatConfig={MODE:3};function sx(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var N9={exports:{}};(function(n){function t(e){return e&&e.__esModule?e:{default:e}}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(N9);var d4e=N9.exports,wS={exports:{}};(function(n,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=e;function e(i){if(i===null||i===!0||i===!1)return NaN;var r=Number(i);return isNaN(r)?r:r<0?Math.ceil(r):Math.floor(r)}n.exports=t.default})(wS,wS.exports);var f4e=wS.exports;const h4e=sx(f4e);var yS={exports:{}};(function(n,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=e;function e(i){var r=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()));return r.setUTCFullYear(i.getFullYear()),i.getTime()-r.getTime()}n.exports=t.default})(yS,yS.exports);var m4e=yS.exports;const n$=sx(m4e);function g4e(n,t){var e=w4e(t);return e.formatToParts?v4e(e,n):b4e(e,n)}var p4e={year:0,month:1,day:2,hour:3,minute:4,second:5};function v4e(n,t){try{for(var e=n.formatToParts(t),i=[],r=0;r<e.length;r++){var s=p4e[e[r].type];s>=0&&(i[s]=parseInt(e[r].value,10))}return i}catch(o){if(o instanceof RangeError)return[NaN];throw o}}function b4e(n,t){var e=n.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(e);return[i[3],i[1],i[2],i[4],i[5],i[6]]}var SE={};function w4e(n){if(!SE[n]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),e=t==="06/25/2014, 00:00:00"||t==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";SE[n]=e?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:n,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return SE[n]}function ox(n,t,e,i,r,s,o){var a=new Date(0);return a.setUTCFullYear(n,t,e),a.setUTCHours(i,r,s,o),a}var i$=36e5,y4e=6e4,AE={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function ax(n,t,e){var i,r;if(n===""||(i=AE.timezoneZ.exec(n),i))return 0;var s;if(i=AE.timezoneHH.exec(n),i)return s=parseInt(i[1],10),r$(s)?-(s*i$):NaN;if(i=AE.timezoneHHMM.exec(n),i){s=parseInt(i[1],10);var o=parseInt(i[2],10);return r$(s,o)?(r=Math.abs(s)*i$+o*y4e,s>0?-r:r):NaN}if(E4e(n)){t=new Date(t||Date.now());var a=e?t:_4e(t),l=_S(a,n),c=e?l:k4e(t,l,n);return-c}return NaN}function _4e(n){return ox(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())}function _S(n,t){var e=g4e(n,t),i=ox(e[0],e[1]-1,e[2],e[3]%24,e[4],e[5],0).getTime(),r=n.getTime(),s=r%1e3;return r-=s>=0?s:1e3+s,i-r}function k4e(n,t,e){var i=n.getTime(),r=i-t,s=_S(new Date(r),e);if(t===s)return t;r-=s-t;var o=_S(new Date(r),e);return s===o?s:Math.max(s,o)}function r$(n,t){return-23<=n&&n<=23&&(t==null||0<=t&&t<=59)}var s$={};function E4e(n){if(s$[n])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:n}),s$[n]=!0,!0}catch{return!1}}var L9=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,IE=36e5,o$=6e4,C4e=2,Cs={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:L9};function kS(n,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(n===null)return new Date(NaN);var e=t||{},i=e.additionalDigits==null?C4e:h4e(e.additionalDigits);if(i!==2&&i!==1&&i!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]")return new Date(n.getTime());if(typeof n=="number"||Object.prototype.toString.call(n)==="[object Number]")return new Date(n);if(!(typeof n=="string"||Object.prototype.toString.call(n)==="[object String]"))return new Date(NaN);var r=T4e(n),s=S4e(r.date,i),o=s.year,a=s.restDateString,l=A4e(a,o);if(isNaN(l))return new Date(NaN);if(l){var c=l.getTime(),u=0,d;if(r.time&&(u=I4e(r.time),isNaN(u)))return new Date(NaN);if(r.timeZone||e.timeZone){if(d=ax(r.timeZone||e.timeZone,new Date(c+u)),isNaN(d))return new Date(NaN)}else d=n$(new Date(c+u)),d=n$(new Date(c+u+d));return new Date(c+u+d)}else return new Date(NaN)}function T4e(n){var t={},e=Cs.dateTimePattern.exec(n),i;if(e?(t.date=e[1],i=e[3]):(e=Cs.datePattern.exec(n),e?(t.date=e[1],i=e[2]):(t.date=null,i=n)),i){var r=Cs.timeZone.exec(i);r?(t.time=i.replace(r[1],""),t.timeZone=r[1].trim()):t.time=i}return t}function S4e(n,t){var e=Cs.YYY[t],i=Cs.YYYYY[t],r;if(r=Cs.YYYY.exec(n)||i.exec(n),r){var s=r[1];return{year:parseInt(s,10),restDateString:n.slice(s.length)}}if(r=Cs.YY.exec(n)||e.exec(n),r){var o=r[1];return{year:parseInt(o,10)*100,restDateString:n.slice(o.length)}}return{year:null}}function A4e(n,t){if(t===null)return null;var e,i,r,s;if(n.length===0)return i=new Date(0),i.setUTCFullYear(t),i;if(e=Cs.MM.exec(n),e)return i=new Date(0),r=parseInt(e[1],10)-1,l$(t,r)?(i.setUTCFullYear(t,r),i):new Date(NaN);if(e=Cs.DDD.exec(n),e){i=new Date(0);var o=parseInt(e[1],10);return O4e(t,o)?(i.setUTCFullYear(t,0,o),i):new Date(NaN)}if(e=Cs.MMDD.exec(n),e){i=new Date(0),r=parseInt(e[1],10)-1;var a=parseInt(e[2],10);return l$(t,r,a)?(i.setUTCFullYear(t,r,a),i):new Date(NaN)}if(e=Cs.Www.exec(n),e)return s=parseInt(e[1],10)-1,c$(t,s)?a$(t,s):new Date(NaN);if(e=Cs.WwwD.exec(n),e){s=parseInt(e[1],10)-1;var l=parseInt(e[2],10)-1;return c$(t,s,l)?a$(t,s,l):new Date(NaN)}return null}function I4e(n){var t,e,i;if(t=Cs.HH.exec(n),t)return e=parseFloat(t[1].replace(",",".")),PE(e)?e%24*IE:NaN;if(t=Cs.HHMM.exec(n),t)return e=parseInt(t[1],10),i=parseFloat(t[2].replace(",",".")),PE(e,i)?e%24*IE+i*o$:NaN;if(t=Cs.HHMMSS.exec(n),t){e=parseInt(t[1],10),i=parseInt(t[2],10);var r=parseFloat(t[3].replace(",","."));return PE(e,i,r)?e%24*IE+i*o$+r*1e3:NaN}return null}function a$(n,t,e){t=t||0,e=e||0;var i=new Date(0);i.setUTCFullYear(n,0,4);var r=i.getUTCDay()||7,s=t*7+e+1-r;return i.setUTCDate(i.getUTCDate()+s),i}var P4e=[31,28,31,30,31,30,31,31,30,31,30,31],x4e=[31,29,31,30,31,30,31,31,30,31,30,31];function M9(n){return n%400===0||n%4===0&&n%100!==0}function l$(n,t,e){if(t<0||t>11)return!1;if(e!=null){if(e<1)return!1;var i=M9(n);if(i&&e>x4e[t]||!i&&e>P4e[t])return!1}return!0}function O4e(n,t){if(t<1)return!1;var e=M9(n);return!(e&&t>366||!e&&t>365)}function c$(n,t,e){return!(t<0||t>52||e!=null&&(e<0||e>6))}function PE(n,t,e){return!(n!=null&&(n<0||n>=25)||t!=null&&(t<0||t>=60)||e!=null&&(e<0||e>=60))}var ES={exports:{}},CS={exports:{}};(function(n,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=e;function e(i,r){if(i==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s]);return i}n.exports=t.default})(CS,CS.exports);var R4e=CS.exports;(function(n,t){var e=d4e.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=e(R4e);function r(s){return(0,i.default)({},s)}n.exports=t.default})(ES,ES.exports);var V4e=ES.exports;const D4e=sx(V4e);function N4e(n,t,e){var i=kS(n,e),r=ax(t,i,!0),s=new Date(i.getTime()-r),o=new Date(0);return o.setFullYear(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()),o.setHours(s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()),o}function L4e(n,t,e){if(typeof n=="string"&&!n.match(L9)){var i=D4e(e);return i.timeZone=t,kS(n,i)}var r=kS(n,e),s=ox(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()).getTime(),o=ax(t,new Date(s));return new Date(s+o)}function u$(n){return t=>new Intl.DateTimeFormat(n,{weekday:"short",timeZone:"UTC"}).format(new Date(`2017-01-0${t}T00:00:00+00:00`)).slice(0,2)}function M4e(n){return t=>tu(new Date(`2017-01-0${t}T00:00:00+00:00`),"EEEEEE",{locale:n})}const $4e=(n,t,e)=>{const i=[1,2,3,4,5,6,7];let r;if(n!==null)try{r=i.map(M4e(n))}catch{r=i.map(u$(t))}else r=i.map(u$(t));const s=r.slice(0,e),o=r.slice(e+1,r.length);return[r[e]].concat(...o).concat(...s)},lx=(n,t)=>{const e=[];for(let i=+n[0];i<=+n[1];i++)e.push({value:+i,text:`${i}`});return t?e.reverse():e},$9=(n,t,e)=>{const i=[1,2,3,4,5,6,7,8,9,10,11,12].map(s=>{const o=s<10?`0${s}`:s;return new Date(`2017-${o}-01T00:00:00+00:00`)});if(n!==null)try{const s=e==="long"?"MMMM":"MMM";return i.map((o,a)=>{const l=tu(o,s,{locale:n});return{text:l.charAt(0).toUpperCase()+l.substring(1),value:a}})}catch{}const r=new Intl.DateTimeFormat(t,{month:e,timeZone:"UTC"});return i.map((s,o)=>{const a=r.format(s);return{text:a.charAt(0).toUpperCase()+a.substring(1),value:o}})},B4e=n=>[12,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11][n],mr=n=>{const t=M(n);return t!=null&&t.$el?t==null?void 0:t.$el:t},F4e=n=>Object.assign({type:"dot"},n),B9=n=>Array.isArray(n)?!!n[0]&&!!n[1]:!1,f_={prop:n=>`"${n}" prop must be enabled!`,dateArr:n=>`You need to use array as "model-value" binding in order to support "${n}"`},yr=n=>n,d$=n=>n===0?n:!n||isNaN(+n)?null:+n,f$=n=>n===null,U4e=n=>{if(n)return[...n.querySelectorAll("input, button, select, textarea, a[href]")][0]},z4e=n=>{const t=[],e=i=>i.filter(r=>r);for(let i=0;i<n.length;i+=3){const r=[n[i],n[i+1],n[i+2]];t.push(e(r))}return t},hv=(n,t,e)=>{const i=e!=null,r=t!=null;if(!i&&!r)return!1;const s=+e,o=+t;return i&&r?+n>s||+n<o:i?+n>s:r?+n<o:!1},mm=(n,t)=>z4e(n).map(e=>e.map(i=>{const{active:r,disabled:s,isBetween:o,highlighted:a}=t(i);return{...i,active:r,disabled:s,className:{dp__overlay_cell_active:r,dp__overlay_cell:!r,dp__overlay_cell_disabled:s,dp__overlay_cell_pad:!0,dp__overlay_cell_active_disabled:s&&r,dp__cell_in_between:o,"dp--highlighted":a}}})),nu=(n,t,e=!1)=>{n&&t.allowStopPropagation&&(e&&n.stopImmediatePropagation(),n.stopPropagation())},H4e=()=>["a[href]","area[href]","input:not([disabled]):not([type='hidden'])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","[tabindex]:not([tabindex='-1'])","[data-datepicker-instance]"].join(", ");function W4e(n,t){let e=[...document.querySelectorAll(H4e())];e=e.filter(r=>!n.contains(r)||r.hasAttribute("data-datepicker-instance"));const i=e.indexOf(n);if(i>=0&&(t?i-1>=0:i+1<=e.length))return e[i+(t?-1:1)]}const j4e=(n,t)=>{let e;return function(...i){clearTimeout(e),e=setTimeout(()=>{n(...i)},t)}},h$=(n,t,e,i,r)=>{const s=bS(n,t.slice(0,n.length),new Date);return bp(s)&&h9(s)?i||r?s:Ei(s,{hours:+e.hours,minutes:+(e==null?void 0:e.minutes),seconds:+(e==null?void 0:e.seconds),milliseconds:0}):null},q4e=(n,t,e,i,r)=>{const s=Array.isArray(e)?e[0]:e;if(typeof t=="string")return h$(n,t,s,i,r);if(Array.isArray(t)){let o=null;for(const a of t)if(o=h$(n,a,s,i,r),o)break;return o}return typeof t=="function"?t(n):null},ot=n=>n?new Date(n):new Date,G4e=(n,t,e)=>{if(t){const r=(n.getMonth()+1).toString().padStart(2,"0"),s=n.getDate().toString().padStart(2,"0"),o=n.getHours().toString().padStart(2,"0"),a=n.getMinutes().toString().padStart(2,"0"),l=e?n.getSeconds().toString().padStart(2,"0"):"00";return`${n.getFullYear()}-${r}-${s}T${o}:${a}:${l}.000Z`}const i=Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds());return new Date(i).toISOString()},ls=n=>{let t=ot(JSON.parse(JSON.stringify(n)));return t=O9(t,0),t=R9(t,0),t=XP(t,0),t=JP(t,0),t},iu=(n,t,e,i)=>{let r=n?ot(n):ot();return(t||t===0)&&(r=O9(r,+t)),(e||e===0)&&(r=R9(r,+e)),(i||i===0)&&(r=XP(r,+i)),JP(r,0)},Br=(n,t)=>!n||!t?!1:fv(ls(n),ls(t)),Qn=(n,t)=>!n||!t?!1:fh(ls(n),ls(t)),os=(n,t)=>!n||!t?!1:dv(ls(n),ls(t)),G0=(n,t,e)=>n!=null&&n[0]&&n!=null&&n[1]?os(e,n[0])&&Br(e,n[1]):n!=null&&n[0]&&t?os(e,n[0])&&Br(e,t)||Br(e,n[0])&&os(e,t):!1,la=n=>{const t=Ei(new Date(n),{date:1});return ls(t)},xE=(n,t,e)=>t&&(e||e===0)?Object.fromEntries(["hours","minutes","seconds"].map(i=>i===t?[i,e]:[i,isNaN(+n[i])?void 0:+n[i]])):{hours:isNaN(+n.hours)?void 0:+n.hours,minutes:isNaN(+n.minutes)?void 0:+n.minutes,seconds:isNaN(+n.seconds)?void 0:+n.seconds},_d=n=>({hours:pa(n),minutes:sl(n),seconds:fm(n)}),F9=(n,t)=>{if(t){const e=pn(ot(t));if(e>n)return 12;if(e===n)return Ln(ot(t))}},U9=(n,t)=>{if(t){const e=pn(ot(t));return e<n?-1:e===n?Ln(ot(t)):void 0}},gm=n=>{if(n)return pn(ot(n))},va=(n,t)=>t?N4e(n,t):n,z9=(n,t)=>t?L4e(n,t):n,K4e=n=>n instanceof Date?n:KFe(n),H9=(n,t)=>{const e=os(n,t)?t:n,i=os(t,n)?t:n;return m9({start:e,end:i})},Y4e=n=>{const t=ga(n,1);return{month:Ln(t),year:pn(t)}},Dw=(n,t,e)=>{const i=Bd(va(n,t),{weekStartsOn:+e}),r=qBe(va(n,t),{weekStartsOn:+e});return[i,r]},W9=(n,t)=>{const e={hours:pa(ot()),minutes:sl(ot()),seconds:t?fm(ot()):0};return Object.assign(e,n)},qc=(n,t,e)=>[Ei(ot(n),{date:1}),Ei(ot(),{month:t,year:e,date:1})],Hl=(n,t,e)=>{let i=n?ot(n):ot();return(t||t===0)&&(i=x9(i,t)),e&&(i=Ka(i,e)),i},j9=(n,t,e,i,r)=>{if(!i||r&&!t||!r&&!e)return!1;const s=r?ga(n,1):hm(n,1),o=[Ln(s),pn(s)];return r?!Z4e(...o,t):!Q4e(...o,e)},Q4e=(n,t,e)=>Br(...qc(e,n,t))||Qn(...qc(e,n,t)),Z4e=(n,t,e)=>os(...qc(e,n,t))||Qn(...qc(e,n,t)),q9=(n,t,e,i,r,s,o)=>{if(typeof t=="function"&&!o)return t(n);const a=e?{locale:e}:void 0;return Array.isArray(n)?`${tu(n[0],s,a)}${r&&!n[1]?"":i}${n[1]?tu(n[1],s,a):""}`:tu(n,s,a)},Of=n=>{if(n)return null;throw new Error(f_.prop("partial-range"))},Kb=(n,t)=>{if(t)return n();throw new Error(f_.prop("range"))},TS=n=>Array.isArray(n)?bp(n[0])&&(n[1]?bp(n[1]):!0):n?bp(n):!1,J4e=(n,t)=>Ei(t??ot(),{hours:+n.hours||0,minutes:+n.minutes||0,seconds:+n.seconds||0}),OE=(n,t,e,i)=>{if(!n)return!0;if(i){const r=e==="max"?fv(n,t):dv(n,t),s={seconds:0,milliseconds:0};return r||fh(Ei(n,s),Ei(t,s))}return e==="max"?n.getTime()<=t.getTime():n.getTime()>=t.getTime()},RE=(n,t,e)=>n?J4e(n,t):ot(e??t),m$=(n,t,e,i,r)=>{if(Array.isArray(i)){const o=RE(n,i[0],t),a=RE(n,i[1],t);return OE(i[0],o,e,!!t)&&OE(i[1],a,e,!!t)&&r}const s=RE(n,i,t);return OE(i,s,e,!!t)&&r},VE=n=>Ei(ot(),_d(n)),X4e=(n,t)=>Array.isArray(n)?n.map(e=>ot(e)).filter(e=>pn(ot(e))===t).map(e=>Ln(e)):[],G9=(n,t,e)=>typeof n=="function"?n({month:t,year:e}):!!n.months.find(i=>i.month===t&&i.year===e),cx=(n,t)=>typeof n=="function"?n(t):n.years.includes(t),Tg=Kt({menuFocused:!1,shiftKeyInMenu:!1}),K9=()=>{const n=e=>{Tg.menuFocused=e},t=e=>{Tg.shiftKeyInMenu!==e&&(Tg.shiftKeyInMenu=e)};return{control:le(()=>({shiftKeyInMenu:Tg.shiftKeyInMenu,menuFocused:Tg.menuFocused})),setMenuFocused:n,setShiftKey:t}},ki=Kt({monthYear:[],calendar:[],time:[],actionRow:[],selectionGrid:[],timePicker:{0:[],1:[]},monthPicker:[]}),DE=Z(null),Yb=Z(!1),NE=Z(!1),LE=Z(!1),ME=Z(!1),hs=Z(0),Dr=Z(0),Vu=()=>{const n=le(()=>Yb.value?[...ki.selectionGrid,ki.actionRow].filter(d=>d.length):NE.value?[...ki.timePicker[0],...ki.timePicker[1],ME.value?[]:[DE.value],ki.actionRow].filter(d=>d.length):LE.value?[...ki.monthPicker,ki.actionRow]:[ki.monthYear,...ki.calendar,ki.time,ki.actionRow].filter(d=>d.length)),t=d=>{hs.value=d?hs.value+1:hs.value-1;let f=null;n.value[Dr.value]&&(f=n.value[Dr.value][hs.value]),f||(hs.value=d?hs.value-1:hs.value+1)},e=d=>{Dr.value===0&&!d||Dr.value===n.value.length&&d||(Dr.value=d?Dr.value+1:Dr.value-1,n.value[Dr.value]?n.value[Dr.value]&&!n.value[Dr.value][hs.value]&&hs.value!==0&&(hs.value=n.value[Dr.value].length-1):Dr.value=d?Dr.value-1:Dr.value+1)},i=d=>{let f=null;n.value[Dr.value]&&(f=n.value[Dr.value][hs.value]),f?f.focus({preventScroll:!Yb.value}):hs.value=d?hs.value-1:hs.value+1},r=()=>{t(!0),i(!0)},s=()=>{t(!1),i(!1)},o=()=>{e(!1),i(!0)},a=()=>{e(!0),i(!0)},l=(d,f)=>{ki[f]=d},c=(d,f)=>{ki[f]=d},u=()=>{hs.value=0,Dr.value=0};return{buildMatrix:l,buildMultiLevelMatrix:c,setTimePickerBackRef:d=>{DE.value=d},setSelectionGrid:d=>{Yb.value=d,u(),d||(ki.selectionGrid=[])},setTimePicker:(d,f=!1)=>{NE.value=d,ME.value=f,u(),d||(ki.timePicker[0]=[],ki.timePicker[1]=[])},setTimePickerElements:(d,f=0)=>{ki.timePicker[f]=d},arrowRight:r,arrowLeft:s,arrowUp:o,arrowDown:a,clearArrowNav:()=>{ki.monthYear=[],ki.calendar=[],ki.time=[],ki.actionRow=[],ki.selectionGrid=[],ki.timePicker[0]=[],ki.timePicker[1]=[],Yb.value=!1,NE.value=!1,ME.value=!1,LE.value=!1,u(),DE.value=null},setMonthPicker:d=>{LE.value=d,u()},refSets:ki}},g$=n=>({menuAppearTop:"dp-menu-appear-top",menuAppearBottom:"dp-menu-appear-bottom",open:"dp-slide-down",close:"dp-slide-up",next:"calendar-next",previous:"calendar-prev",vNext:"dp-slide-up",vPrevious:"dp-slide-down",...n??{}}),eUe=n=>({toggleOverlay:"Toggle overlay",menu:"Datepicker menu",input:"Datepicker input",calendarWrap:"Calendar wrapper",calendarDays:"Calendar days",openTimePicker:"Open time picker",closeTimePicker:"Close time Picker",incrementValue:t=>`Increment ${t}`,decrementValue:t=>`Decrement ${t}`,openTpOverlay:t=>`Open ${t} overlay`,amPmButton:"Switch AM/PM mode",openYearsOverlay:"Open years overlay",openMonthsOverlay:"Open months overlay",nextMonth:"Next month",prevMonth:"Previous month",nextYear:"Next year",prevYear:"Previous year",day:()=>"",...n??{}}),p$=n=>n?typeof n=="boolean"?n?2:0:+n>=2?+n:2:0,tUe=n=>{const t=typeof n=="object"&&n,e={static:!0,solo:!1};if(!n)return{...e,count:p$(!1)};const i=t?n:{},r=t?i.count??!0:n,s=p$(r);return Object.assign(e,i,{count:s})},nUe=(n,t,e)=>n||(typeof e=="string"?e:t),iUe=n=>typeof n=="boolean"?n?g$({}):!1:g$(n),rUe=n=>{const t={enterSubmit:!0,tabSubmit:!0,openMenu:!0,selectOnFocus:!1,rangeSeparator:" - "};return typeof n=="object"?{...t,...n??{},enabled:!0}:{...t,enabled:n}},sUe=n=>({months:[],years:[],times:{hours:[],minutes:[],seconds:[]},...n??{}}),oUe=n=>({showSelect:!0,showCancel:!0,showNow:!1,showPreview:!0,...n??{}}),aUe=n=>{const t={input:!1};return typeof n=="object"?{...t,...n??{},enabled:!0}:{enabled:n,...t}},lUe=n=>({allowStopPropagation:!0,closeOnScroll:!1,modeHeight:255,allowPreventDefault:!1,closeOnClearValue:!0,closeOnAutoApply:!0,noSwipe:!1,keepActionRow:!1,onClickOutside:void 0,tabOutClosesMenu:!0,...n??{}}),cUe=(n,t,e)=>{const i={dates:Array.isArray(n)?n.map(r=>ot(r)):[],years:[],months:[],quarters:[],weeks:[],weekdays:t,options:{highlightDisabled:e}};return typeof n=="function"?n:{...i,...n??{}}},uUe=n=>typeof n=="object"?{type:n.type,hideOnOffsetDates:n.hideOnOffsetDates??!1}:{type:n,hideOnOffsetDates:!1},nr=n=>{const t=()=>{const w=n.enableSeconds?":ss":"";return n.is24?`HH:mm${w}`:`hh:mm${w} aa`},e=()=>n.format?n.format:n.monthPicker?"MM/yyyy":n.timePicker?t():n.weekPicker?"MM/dd/yyyy":n.yearPicker?"yyyy":n.quarterPicker?"QQQ/yyyy":n.enableTimePicker?`MM/dd/yyyy, ${t()}`:"MM/dd/yyyy",i=w=>W9(w,n.enableSeconds),r=()=>n.range?n.startTime&&Array.isArray(n.startTime)?[i(n.startTime[0]),i(n.startTime[1])]:null:n.startTime&&!Array.isArray(n.startTime)?i(n.startTime):null,s=le(()=>tUe(n.multiCalendars)),o=le(()=>r()),a=le(()=>eUe(n.ariaLabels)),l=le(()=>sUe(n.filters)),c=le(()=>iUe(n.transitions)),u=le(()=>oUe(n.actionRow)),d=le(()=>nUe(n.previewFormat,n.format,e())),f=le(()=>rUe(n.textInput)),h=le(()=>aUe(n.inline)),g=le(()=>lUe(n.config)),v=le(()=>cUe(n.highlight,n.highlightWeekDays,n.highlightDisabledDays)),_=le(()=>uUe(n.weekNumbers));return{defaultedTransitions:c,defaultedMultiCalendars:s,defaultedStartTime:o,defaultedAriaLabels:a,defaultedFilters:l,defaultedActionRow:u,defaultedPreviewFormat:d,defaultedTextInput:f,defaultedInline:h,defaultedConfig:g,defaultedHighlight:v,defaultedWeekNumbers:_,getDefaultPattern:e,getDefaultStartTime:r}},dUe=(n,t,e)=>{const i=Z(),{defaultedTextInput:r,getDefaultPattern:s}=nr(t),o=Z(""),a=Oh(t,"format");gt(i,()=>{n("internal-model-change",i.value)}),gt(a,()=>{q()});const l=z=>z9(z,t.timezone),c=z=>va(z,t.timezone),u=(z,ge,Q=!1)=>q9(z,t.format,t.formatLocale,r.value.rangeSeparator,t.modelAuto,ge??s(),Q),d=z=>z?t.modelType?$(z):{hours:pa(z),minutes:sl(z),seconds:t.enableSeconds?fm(z):0}:null,f=z=>t.modelType?$(z):{month:Ln(z),year:pn(z)},h=z=>Array.isArray(z)?t.multiDates?z.map(ge=>g(ge,Ka(ot(),ge))):Kb(()=>[Ka(ot(),z[0]),z[1]?Ka(ot(),z[1]):Of(t.partialRange)],t.range):Ka(ot(),+z),g=(z,ge)=>(typeof z=="string"||typeof z=="number")&&t.modelType?N(z):ge,v=z=>Array.isArray(z)?[g(z[0],iu(null,+z[0].hours,+z[0].minutes,z[0].seconds)),g(z[1],iu(null,+z[1].hours,+z[1].minutes,z[1].seconds))]:g(z,iu(null,z.hours,z.minutes,z.seconds)),_=z=>Array.isArray(z)?t.multiDates?z.map(ge=>g(ge,Hl(null,+ge.month,+ge.year))):Kb(()=>[g(z[0],Hl(null,+z[0].month,+z[0].year)),g(z[1],z[1]?Hl(null,+z[1].month,+z[1].year):Of(t.partialRange))],t.range):g(z,Hl(null,+z.month,+z.year)),w=z=>{if(Array.isArray(z))return z.map(ge=>N(ge));throw new Error(f_.dateArr("multi-dates"))},C=z=>{if(Array.isArray(z))return[ot(z[0]),ot(z[1])];throw new Error(f_.dateArr("week-picker"))},k=z=>t.modelAuto?Array.isArray(z)?[N(z[0]),N(z[1])]:t.autoApply?[N(z)]:[N(z),null]:Array.isArray(z)?Kb(()=>[N(z[0]),z[1]?N(z[1]):Of(t.partialRange)],t.range):N(z),E=()=>{Array.isArray(i.value)&&t.range&&i.value.length===1&&i.value.push(Of(t.partialRange))},A=()=>{const z=i.value;return[$(z[0]),z[1]?$(z[1]):Of(t.partialRange)]},x=()=>i.value[1]?A():$(yr(i.value[0])),p=()=>(i.value||[]).map(z=>$(z)),D=()=>(E(),t.modelAuto?x():t.multiDates?p():Array.isArray(i.value)?Kb(()=>A(),t.range):$(yr(i.value))),R=z=>!z||Array.isArray(z)&&!z.length?null:t.timePicker?v(yr(z)):t.monthPicker?_(yr(z)):t.yearPicker?h(yr(z)):t.multiDates?w(yr(z)):t.weekPicker?C(yr(z)):k(yr(z)),S=z=>{const ge=R(z);TS(yr(ge))?(i.value=yr(ge),q()):(i.value=null,o.value="")},I=()=>{const z=ge=>tu(ge,r.value.format);return`${z(i.value[0])} ${r.value.rangeSeparator} ${i.value[1]?z(i.value[1]):""}`},F=()=>e.value&&i.value?Array.isArray(i.value)?I():tu(i.value,r.value.format):u(i.value),H=()=>i.value?t.multiDates?i.value.map(z=>u(z)).join("; "):r.value.enabled&&typeof r.value.format=="string"?F():u(i.value):"",q=()=>{!t.format||typeof t.format=="string"||r.value.enabled&&typeof r.value.format=="string"?o.value=H():o.value=t.format(i.value)},N=z=>{if(t.utc){const ge=new Date(z);return t.utc==="preserve"?new Date(ge.getTime()+ge.getTimezoneOffset()*6e4):ge}return t.modelType?t.modelType==="date"||t.modelType==="timestamp"?c(new Date(z)):t.modelType==="format"&&(typeof t.format=="string"||!t.format)?bS(z,s(),new Date):c(bS(z,t.modelType,new Date)):c(new Date(z))},$=z=>z?t.utc?G4e(z,t.utc==="preserve",t.enableSeconds):t.modelType?t.modelType==="timestamp"?+l(z):t.modelType==="format"&&(typeof t.format=="string"||!t.format)?u(l(z)):u(l(z),t.modelType,!0):l(z):"",U=(z,ge=!1)=>{if(n("update:model-value",z),t.emitTimezone&&ge){const Q=Array.isArray(z)?z.map(ue=>va(yr(ue)),t.emitTimezone):va(yr(z),t.emitTimezone);n("update:model-timezone-value",Q)}},re=z=>Array.isArray(i.value)?t.multiDates?i.value.map(ge=>z(ge)):[z(i.value[0]),i.value[1]?z(i.value[1]):Of(t.partialRange)]:z(yr(i.value)),K=z=>U(yr(re(z)));return{inputValue:o,internalModelValue:i,checkBeforeEmit:()=>i.value?t.range?t.partialRange?i.value.length>=1:i.value.length===2:!!i.value:!1,parseExternalModelValue:S,formatInputValue:q,emitModelValue:()=>(q(),t.monthPicker?K(f):t.timePicker?K(d):t.yearPicker?K(pn):t.weekPicker?U(i.value.map(z=>$(z)),!0):U(D(),!0))}},fUe=(n,t)=>{const{defaultedFilters:e}=nr(n),{validateMonthYearInRange:i}=lf(n),r=(c,u)=>{let d=c;return e.value.months.includes(Ln(d))?(d=u?ga(c,1):hm(c,1),r(d,u)):d},s=(c,u)=>{let d=c;return e.value.years.includes(pn(d))?(d=u?qP(c,1):V9(c,1),s(d,u)):d},o=(c,u=!1)=>{const d=Ei(new Date,{month:n.month,year:n.year});let f=c?ga(d,1):hm(d,1);n.disableYearSelect&&(f=Ka(f,n.year));let h=Ln(f),g=pn(f);e.value.months.includes(h)&&(f=r(f,c),h=Ln(f),g=pn(f)),e.value.years.includes(g)&&(f=s(f,c),g=pn(f)),i(h,g,c,n.preventMinMaxNavigation)&&a(h,g,u)},a=(c,u,d)=>{t("update-month-year",{month:c,year:u,fromNav:d})},l=le(()=>c=>j9(Ei(new Date,{month:n.month,year:n.year}),n.maxDate,n.minDate,n.preventMinMaxNavigation,c));return{handleMonthYearChange:o,isDisabled:l,updateMonthYear:a}};var Zf=(n=>(n.center="center",n.left="left",n.right="right",n))(Zf||{}),ea=(n=>(n.month="month",n.year="year",n))(ea||{}),td=(n=>(n.top="top",n.bottom="bottom",n))(td||{}),kd=(n=>(n.header="header",n.calendar="calendar",n.timePicker="timePicker",n))(kd||{}),za=(n=>(n.month="month",n.year="year",n.calendar="calendar",n.time="time",n.minutes="minutes",n.hours="hours",n.seconds="seconds",n))(za||{});const hUe=({menuRef:n,menuRefInner:t,inputRef:e,pickerWrapperRef:i,inline:r,emit:s,props:o,slots:a})=>{const l=Z({}),c=Z(!1),u=Z({top:"0",left:"0"}),d=Z(!1),f=Oh(o,"teleportCenter");gt(f,()=>{u.value=JSON.parse(JSON.stringify({})),E()});const h=N=>{if(o.teleport){const $=N.getBoundingClientRect();return{left:$.left+window.scrollX,top:$.top+window.scrollY}}return{top:0,left:0}},g=(N,$)=>{u.value.left=`${N+$-l.value.width}px`},v=N=>{u.value.left=`${N}px`},_=(N,$)=>{o.position===Zf.left&&v(N),o.position===Zf.right&&g(N,$),o.position===Zf.center&&(u.value.left=`${N+$/2-l.value.width/2}px`)},w=N=>{const{width:$,height:U}=N.getBoundingClientRect(),{top:re,left:K}=o.altPosition?o.altPosition(N):h(N);return{top:+re,left:+K,width:$,height:U}},C=()=>{u.value.left="50%",u.value.top="50%",u.value.transform="translate(-50%, -50%)",u.value.position="fixed",delete u.value.opacity},k=()=>{const N=mr(e),{top:$,left:U,transform:re}=o.altPosition(N);u.value={top:`${$}px`,left:`${U}px`,transform:re??""}},E=(N=!0)=>{var $;if(!r.value.enabled){if(f.value)return C();if(o.altPosition!==null)return k();if(N){const U=o.teleport?($=t.value)==null?void 0:$.$el:n.value;U&&(l.value=U.getBoundingClientRect()),s("recalculate-position")}return I()}},A=({inputEl:N,left:$,width:U})=>{window.screen.width>768&&!c.value&&_($,U),D(N)},x=N=>{const{top:$,left:U,height:re,width:K}=w(N);u.value.top=`${re+$+ +o.offset}px`,d.value=!1,c.value||(u.value.left=`${U+K/2-l.value.width/2}px`),A({inputEl:N,left:U,width:K})},p=N=>{const{top:$,left:U,width:re}=w(N);u.value.top=`${$-+o.offset-l.value.height}px`,d.value=!0,A({inputEl:N,left:U,width:re})},D=N=>{if(o.autoPosition){const{left:$,width:U}=w(N),{left:re,right:K}=l.value;if(!c.value){if(Math.abs(re)!==Math.abs(K)){if(re<=0)return c.value=!0,v($);if(K>=document.documentElement.clientWidth)return c.value=!0,g($,U)}return _($,U)}}},R=()=>{const N=mr(e);if(N){const{height:$}=l.value,{top:U,height:re}=N.getBoundingClientRect(),K=window.innerHeight-U-re,z=U;return $<=K?td.bottom:$>K&&$<=z?td.top:K>=z?td.bottom:td.top}return td.bottom},S=N=>R()===td.bottom?x(N):p(N),I=()=>{const N=mr(e);if(N)return o.autoPosition?S(N):x(N)},F=function(N){if(N){const $=N.scrollHeight>N.clientHeight,U=window.getComputedStyle(N).overflowY.indexOf("hidden")!==-1;return $&&!U}return!0},H=function(N){return!N||N===document.body||N.nodeType===Node.DOCUMENT_FRAGMENT_NODE?window:F(N)?N:H(N.parentNode)},q=N=>{if(N)switch(o.position){case Zf.left:return{left:0,transform:"translateX(0)"};case Zf.right:return{left:`${N.width}px`,transform:"translateX(-100%)"};default:return{left:`${N.width/2}px`,transform:"translateX(-50%)"}}return{}};return{openOnTop:d,menuStyle:u,xCorrect:c,setMenuPosition:E,getScrollableParent:H,shadowRender:(N,$)=>{var U,re,K;const z=document.createElement("div"),ge=(U=mr(e))==null?void 0:U.getBoundingClientRect();z.setAttribute("id","dp--temp-container");const Q=(re=i.value)!=null&&re.clientWidth?i.value:document.body;Q.append(z);const ue=q(ge),ve=ca(N,{...$,shadow:!0,style:{opacity:0,position:"absolute",...ue}},Object.fromEntries(Object.keys(a).filter(ce=>["right-sidebar","left-sidebar"].includes(ce)).map(ce=>[ce,a[ce]])));Jw(ve,z),l.value=(K=ve.el)==null?void 0:K.getBoundingClientRect(),Jw(null,z),Q.removeChild(z)}}},Pc=[{name:"clock-icon",use:["time","calendar","shared"]},{name:"arrow-left",use:["month-year","calendar","shared","year-mode"]},{name:"arrow-right",use:["month-year","calendar","shared","year-mode"]},{name:"arrow-up",use:["time","calendar","month-year","shared"]},{name:"arrow-down",use:["time","calendar","month-year","shared"]},{name:"calendar-icon",use:["month-year","time","calendar","shared","year-mode"]},{name:"day",use:["calendar","shared"]},{name:"month-overlay-value",use:["calendar","month-year","shared"]},{name:"year-overlay-value",use:["calendar","month-year","shared","year-mode"]},{name:"year-overlay",use:["month-year","shared"]},{name:"month-overlay",use:["month-year","shared"]},{name:"month-overlay-header",use:["month-year","shared"]},{name:"year-overlay-header",use:["month-year","shared"]},{name:"hours-overlay-value",use:["calendar","time","shared"]},{name:"minutes-overlay-value",use:["calendar","time","shared"]},{name:"seconds-overlay-value",use:["calendar","time","shared"]},{name:"hours",use:["calendar","time","shared"]},{name:"minutes",use:["calendar","time","shared"]},{name:"month",use:["calendar","month-year","shared"]},{name:"year",use:["calendar","month-year","shared","year-mode"]},{name:"action-buttons",use:["action"]},{name:"action-preview",use:["action"]},{name:"calendar-header",use:["calendar","shared"]},{name:"marker-tooltip",use:["calendar","shared"]},{name:"action-extra",use:["menu"]},{name:"time-picker-overlay",use:["calendar","time","shared"]},{name:"am-pm-button",use:["calendar","time","shared"]},{name:"left-sidebar",use:["menu"]},{name:"right-sidebar",use:["menu"]},{name:"month-year",use:["month-year","shared"]},{name:"time-picker",use:["menu","shared"]},{name:"action-row",use:["action"]},{name:"marker",use:["calendar","shared"]},{name:"quarter",use:["shared"]}],mUe=[{name:"trigger"},{name:"input-icon"},{name:"clear-icon"},{name:"dp-input"}],gUe={all:()=>Pc,monthYear:()=>Pc.filter(n=>n.use.includes("month-year")),input:()=>mUe,timePicker:()=>Pc.filter(n=>n.use.includes("time")),action:()=>Pc.filter(n=>n.use.includes("action")),calendar:()=>Pc.filter(n=>n.use.includes("calendar")),menu:()=>Pc.filter(n=>n.use.includes("menu")),shared:()=>Pc.filter(n=>n.use.includes("shared")),yearMode:()=>Pc.filter(n=>n.use.includes("year-mode"))},oo=(n,t,e)=>{const i=[];return gUe[t]().forEach(r=>{n[r.name]&&i.push(r.name)}),e!=null&&e.length&&e.forEach(r=>{r.slot&&i.push(r.slot)}),i},Bv=n=>{const t=le(()=>i=>n.value?i?n.value.open:n.value.close:""),e=le(()=>i=>n.value?i?n.value.menuAppearTop:n.value.menuAppearBottom:"");return{transitionName:t,showTransition:!!n.value,menuTransition:e}},Fv=(n,t)=>{const e=ot(va(new Date,n.timezone)),i=Z([{month:Ln(e),year:pn(e)}]),r=Kt({hours:n.range?[pa(e),pa(e)]:pa(e),minutes:n.range?[sl(e),sl(e)]:sl(e),seconds:n.range?[0,0]:0}),s=le({get:()=>n.internalModelValue,set:l=>{!n.readonly&&!n.disabled&&t("update:internal-model-value",l)}}),o=le(()=>l=>i.value[l]?i.value[l].month:0),a=le(()=>l=>i.value[l]?i.value[l].year:0);return{calendars:i,time:r,modelValue:s,month:o,year:a}},pUe=(n,t)=>{const{defaultedMultiCalendars:e,defaultedHighlight:i}=nr(t),{isDisabled:r,matchDate:s}=lf(t),o=Z(null),a=Z(ot(va(new Date,t.timezone))),l=K=>{!K.current&&t.hideOffsetDates||(o.value=K.value)},c=()=>{o.value=null},u=K=>Array.isArray(n.value)&&t.range&&n.value[0]&&o.value?K?os(o.value,n.value[0]):Br(o.value,n.value[0]):!0,d=(K,z)=>{const ge=()=>n.value?z?n.value[0]||null:n.value[1]:null,Q=n.value&&Array.isArray(n.value)?ge():null;return Qn(ot(K.value),Q)},f=K=>{const z=Array.isArray(n.value)?n.value[0]:null;return K?!Br(o.value??null,z):!0},h=(K,z=!0)=>(t.range||t.weekPicker)&&Array.isArray(n.value)&&n.value.length===2?t.hideOffsetDates&&!K.current?!1:Qn(ot(K.value),n.value[z?0:1]):t.range?d(K,z)&&f(z)||Qn(K.value,Array.isArray(n.value)?n.value[0]:null)&&u(z):!1,g=(K,z,ge)=>Array.isArray(n.value)&&n.value[0]&&n.value.length===1?K?!1:ge?os(n.value[0],z.value):Br(n.value[0],z.value):!1,v=K=>!n.value||t.hideOffsetDates&&!K.current?!1:t.range?t.modelAuto&&Array.isArray(n.value)?Qn(K.value,n.value[0]?n.value[0]:a.value):!1:t.multiDates&&Array.isArray(n.value)?n.value.some(z=>Qn(z,K.value)):Qn(K.value,n.value?n.value:a.value),_=K=>{if(t.autoRange||t.weekPicker){if(o.value){if(t.hideOffsetDates&&!K.current)return!1;const z=Fl(o.value,+t.autoRange),ge=Dw(ot(o.value),t.timezone,t.weekStart);return t.weekPicker?Qn(ge[1],ot(K.value)):Qn(z,ot(K.value))}return!1}return!1},w=K=>{if(t.autoRange||t.weekPicker){if(o.value){const z=Fl(o.value,+t.autoRange);if(t.hideOffsetDates&&!K.current)return!1;const ge=Dw(ot(o.value),t.timezone,t.weekStart);return t.weekPicker?os(K.value,ge[0])&&Br(K.value,ge[1]):os(K.value,o.value)&&Br(K.value,z)}return!1}return!1},C=K=>{if(t.autoRange||t.weekPicker){if(o.value){if(t.hideOffsetDates&&!K.current)return!1;const z=Dw(ot(o.value),t.timezone,t.weekStart);return t.weekPicker?Qn(z[0],K.value):Qn(o.value,K.value)}return!1}return!1},k=K=>G0(n.value,o.value,K.value),E=()=>t.modelAuto&&Array.isArray(t.internalModelValue)?!!t.internalModelValue[0]:!1,A=()=>t.modelAuto?B9(t.internalModelValue):!0,x=K=>{if(Array.isArray(n.value)&&n.value.length||t.weekPicker)return!1;const z=t.range?!h(K)&&!h(K,!1):!0;return!r(K.value)&&!v(K)&&!(!K.current&&t.hideOffsetDates)&&z},p=K=>t.range?t.modelAuto?E()&&v(K):!1:v(K),D=K=>{var z;return i.value?typeof i.value=="function"?i.value(K.value):s(K.value,(z=t.arrMapValues)!=null&&z.highlightedDates?t.arrMapValues.highlightedDates:i.value.dates):!1},R=K=>{const z=r(K.value);return z&&(typeof i.value=="function"?!i.value(K.value,z):!i.value.options.highlightDisabled)},S=K=>{var z;return typeof i.value=="function"?i.value(K.value):(z=i.value.weekdays)==null?void 0:z.includes(K.value.getDay())},I=K=>(t.range||t.weekPicker)&&(!(e.value.count>0)||K.current)&&A()&&!(!K.current&&t.hideOffsetDates)&&!v(K)?k(K):!1,F=K=>{const{isRangeStart:z,isRangeEnd:ge}=N(K),Q=t.range?z||ge:!1;return{dp__cell_offset:!K.current,dp__pointer:!t.disabled&&!(!K.current&&t.hideOffsetDates)&&!r(K.value),dp__cell_disabled:r(K.value),dp__cell_highlight:!R(K)&&(D(K)||S(K))&&!p(K)&&!Q&&!C(K)&&!(I(K)&&t.weekPicker)&&!ge,dp__cell_highlight_active:!R(K)&&(D(K)||S(K))&&p(K),dp__today:!t.noToday&&Qn(K.value,a.value)&&K.current}},H=K=>({dp__active_date:p(K),dp__date_hover:x(K)}),q=K=>({...$(K),...U(K),dp__range_between_week:I(K)&&t.weekPicker}),N=K=>{const z=e.value.count>0?K.current&&h(K)&&A():h(K)&&A(),ge=e.value.count>0?K.current&&h(K,!1)&&A():h(K,!1)&&A();return{isRangeStart:z,isRangeEnd:ge}},$=K=>{const{isRangeStart:z,isRangeEnd:ge}=N(K);return{dp__range_start:z,dp__range_end:ge,dp__range_between:I(K)&&!t.weekPicker,dp__date_hover_start:g(x(K),K,!0),dp__date_hover_end:g(x(K),K,!1)}},U=K=>({...$(K),dp__cell_auto_range:w(K),dp__cell_auto_range_start:C(K),dp__cell_auto_range_end:_(K)}),re=K=>t.range?t.autoRange?U(K):t.modelAuto?{...H(K),...$(K)}:$(K):t.weekPicker?q(K):H(K);return{setHoverDate:l,clearHoverDate:c,getDayClassData:K=>t.hideOffsetDates&&!K.current?{}:{...F(K),...re(K),[t.dayClass?t.dayClass(K.value):""]:!0,[t.calendarCellClassName]:!!t.calendarCellClassName}}},lf=n=>{const{defaultedFilters:t,defaultedHighlight:e}=nr(n),i=()=>{if(n.timezone)return n.timezone;if(n.utc)return"UTC"},r=S=>{const I=ls(s(ot(S))).toISOString(),[F]=I.split("T");return F},s=S=>n.utc==="preserve"?z9(S,i()):va(S,i()),o=S=>{var I;const F=n.maxDate?os(S,s(ot(n.maxDate))):!1,H=n.minDate?Br(S,s(ot(n.minDate))):!1,q=u(s(S),(I=n.arrMapValues)!=null&&I.disabledDates?n.arrMapValues.disabledDates:n.disabledDates),N=t.value.months.map(z=>+z).includes(Ln(S)),$=n.disabledWeekDays.length?n.disabledWeekDays.some(z=>+z===z3e(S)):!1,U=f(S),re=pn(S),K=re<+n.yearRange[0]||re>+n.yearRange[1];return!(F||H||q||N||K||$||U)},a=(S,I)=>Br(...qc(n.minDate,S,I))||Qn(...qc(n.minDate,S,I)),l=(S,I)=>os(...qc(n.maxDate,S,I))||Qn(...qc(n.maxDate,S,I)),c=(S,I,F)=>{let H=!1;return n.maxDate&&F&&l(S,I)&&(H=!0),n.minDate&&!F&&a(S,I)&&(H=!0),H},u=(S,I)=>S?I instanceof Map?!!I.get(r(S)):Array.isArray(I)?I.some(F=>Qn(s(ot(F)),S)):I?I(ot(JSON.parse(JSON.stringify(S)))):!1:!0,d=(S,I,F,H)=>{let q=!1;return H?n.minDate&&n.maxDate?q=c(S,I,F):(n.minDate&&a(S,I)||n.maxDate&&l(S,I))&&(q=!0):q=!0,q},f=S=>{var I,F,H,q,N;return Array.isArray(n.allowedDates)&&!((I=n.allowedDates)!=null&&I.length)?!0:(F=n.arrMapValues)!=null&&F.allowedDates?!u(S,(H=n.arrMapValues)==null?void 0:H.allowedDates):(q=n.allowedDates)!=null&&q.length?!((N=n.allowedDates)!=null&&N.some($=>Qn(ls($),s(ls(S))))):!1},h=S=>!o(S),g=S=>n.noDisabledRange?!m9({start:S[0],end:S[1]}).some(I=>h(I)):!0,v=(S,I,F=0)=>{if(Array.isArray(I)&&I[F]){const H=FBe(S,I[F]),q=H9(I[F],S),N=q.length===1?0:q.filter(U=>h(U)).length,$=Math.abs(H)-N;if(n.minRange&&n.maxRange)return $>=+n.minRange&&$<=+n.maxRange;if(n.minRange)return $>=+n.minRange;if(n.maxRange)return $<=+n.maxRange}return!0},_=S=>new Map(S.map(I=>[r(I),!0])),w=S=>Array.isArray(S)&&S.length>0,C=()=>{const S={disabledDates:null,allowedDates:null,highlightedDates:null};return w(n.allowedDates)&&(S.allowedDates=_(n.allowedDates)),typeof e.value!="function"&&w(e.value.dates)&&(S.highlightedDates=_(e.value.dates)),w(n.disabledDates)&&(S.disabledDates=_(n.disabledDates)),S},k=()=>!n.enableTimePicker||n.monthPicker||n.yearPicker||n.ignoreTimeValidation,E=S=>Array.isArray(S)?[S[0]?VE(S[0]):null,S[1]?VE(S[1]):null]:VE(S),A=(S,I,F)=>S.find(H=>+H.hours===pa(I)&&H.minutes==="*"?!0:+H.minutes===sl(I)&&+H.hours===pa(I))&&F,x=(S,I,F)=>{const[H,q]=S,[N,$]=I;return!A(H,N,F)&&!A(q,$,F)&&F},p=(S,I)=>{const F=Array.isArray(I)?I:[I];return Array.isArray(n.disabledTimes)?Array.isArray(n.disabledTimes[0])?x(n.disabledTimes,F,S):!F.some(H=>A(n.disabledTimes,H,S)):S},D=(S,I)=>{const F=Array.isArray(I)?[_d(I[0]),I[1]?_d(I[1]):void 0]:_d(I),H=!n.disabledTimes(F);return S&&H},R=(S,I)=>n.disabledTimes?Array.isArray(n.disabledTimes)?p(I,S):D(I,S):I;return{isDisabled:h,validateDate:o,validateMonthYearInRange:d,isDateRangeAllowed:g,checkMinMaxRange:v,matchDate:u,mapDatesArrToMap:C,isValidTime:S=>{let I=!0;if(!S||k())return!0;const F=!n.minDate&&!n.maxDate?E(S):S;return(n.maxTime||n.maxDate)&&(I=m$(n.maxTime,n.maxDate,"max",yr(F),I)),(n.minTime||n.minDate)&&(I=m$(n.minTime,n.minDate,"min",yr(F),I)),R(S,I)}}},K0=()=>{const n=le(()=>(i,r)=>i==null?void 0:i.includes(r)),t=le(()=>(i,r)=>i.count?i.solo?!0:r===0:!0),e=le(()=>(i,r)=>i.count?i.solo?!0:r===i.count-1:!0);return{hideNavigationButtons:n,showLeftIcon:t,showRightIcon:e}},vUe=(n,t,e)=>{const i=Z(0),r=Kt({[kd.timePicker]:!n.enableTimePicker||n.timePicker||n.monthPicker,[kd.calendar]:!1,[kd.header]:!1}),s=le(()=>n.monthPicker),o=d=>{var f;if((f=n.flow)!=null&&f.length){if(!d&&s.value)return u();r[d]=!0,Object.keys(r).filter(h=>!r[h]).length||u()}},a=()=>{var d;(d=n.flow)!=null&&d.length&&i.value!==-1&&(i.value+=1,t("flow-step",i.value),u())},l=()=>{i.value=-1},c=(d,f,...h)=>{n.flow[i.value]===d&&e.value&&e.value[f](...h)},u=()=>{c(za.month,"toggleMonthPicker",!0),c(za.year,"toggleYearPicker",!0),c(za.calendar,"toggleTimePicker",!1,!0),c(za.time,"toggleTimePicker",!0,!0);const d=n.flow[i.value];(d===za.hours||d===za.minutes||d===za.seconds)&&c(d,"toggleTimePicker",!0,!0,d)};return{childMount:o,updateFlowStep:a,resetFlow:l,flowStep:i}},Y0={multiCalendars:{type:[Boolean,Number,String,Object],default:void 0},modelValue:{type:[String,Date,Array,Object,Number],default:null},modelType:{type:String,default:null},position:{type:String,default:"center"},dark:{type:Boolean,default:!1},format:{type:[String,Function],default:()=>null},autoPosition:{type:Boolean,default:!0},altPosition:{type:Function,default:null},transitions:{type:[Boolean,Object],default:!0},formatLocale:{type:Object,default:null},utc:{type:[Boolean,String],default:!1},ariaLabels:{type:Object,default:()=>({})},offset:{type:[Number,String],default:10},hideNavigation:{type:Array,default:()=>[]},timezone:{type:String,default:null},emitTimezone:{type:String,default:null},vertical:{type:Boolean,default:!1},disableMonthYearSelect:{type:Boolean,default:!1},disableYearSelect:{type:Boolean,default:!1},menuClassName:{type:String,default:null},dayClass:{type:Function,default:null},yearRange:{type:Array,default:()=>[1900,2100]},calendarCellClassName:{type:String,default:null},enableTimePicker:{type:Boolean,default:!0},autoApply:{type:Boolean,default:!1},disabledDates:{type:[Array,Function],default:()=>[]},monthNameFormat:{type:String,default:"short"},startDate:{type:[Date,String],default:null},startTime:{type:[Object,Array],default:null},hideOffsetDates:{type:Boolean,default:!1},autoRange:{type:[Number,String],default:null},noToday:{type:Boolean,default:!1},disabledWeekDays:{type:Array,default:()=>[]},allowedDates:{type:Array,default:null},nowButtonLabel:{type:String,default:"Now"},markers:{type:Array,default:()=>[]},escClose:{type:Boolean,default:!0},spaceConfirm:{type:Boolean,default:!0},monthChangeOnArrows:{type:Boolean,default:!0},presetDates:{type:Array,default:()=>[]},flow:{type:Array,default:()=>[]},partialFlow:{type:Boolean,default:!1},preventMinMaxNavigation:{type:Boolean,default:!1},minRange:{type:[Number,String],default:null},maxRange:{type:[Number,String],default:null},multiDatesLimit:{type:[Number,String],default:null},reverseYears:{type:Boolean,default:!1},weekPicker:{type:Boolean,default:!1},filters:{type:Object,default:()=>({})},arrowNavigation:{type:Boolean,default:!1},disableTimeRangeValidation:{type:Boolean,default:!1},highlight:{type:[Array,Function,Object],default:null},highlightWeekDays:{type:Array,default:null},highlightDisabledDays:{type:Boolean,default:!1},teleport:{type:[String,Boolean,Object],default:null},teleportCenter:{type:Boolean,default:!1},locale:{type:String,default:"en-Us"},weekNumName:{type:String,default:"W"},weekStart:{type:[Number,String],default:1},weekNumbers:{type:[String,Function,Object],default:null},calendarClassName:{type:String,default:null},monthChangeOnScroll:{type:[Boolean,String],default:!0},dayNames:{type:[Function,Array],default:null},monthPicker:{type:Boolean,default:!1},customProps:{type:Object,default:null},yearPicker:{type:Boolean,default:!1},modelAuto:{type:Boolean,default:!1},selectText:{type:String,default:"Select"},cancelText:{type:String,default:"Cancel"},previewFormat:{type:[String,Function],default:()=>""},multiDates:{type:Boolean,default:!1},partialRange:{type:Boolean,default:!0},ignoreTimeValidation:{type:Boolean,default:!1},minDate:{type:[Date,String],default:null},maxDate:{type:[Date,String],default:null},minTime:{type:Object,default:null},maxTime:{type:Object,default:null},name:{type:String,default:null},placeholder:{type:String,default:""},hideInputIcon:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},state:{type:Boolean,default:null},required:{type:Boolean,default:!1},autocomplete:{type:String,default:"off"},inputClassName:{type:String,default:null},fixedStart:{type:Boolean,default:!1},fixedEnd:{type:Boolean,default:!1},timePicker:{type:Boolean,default:!1},enableSeconds:{type:Boolean,default:!1},is24:{type:Boolean,default:!0},noHoursOverlay:{type:Boolean,default:!1},noMinutesOverlay:{type:Boolean,default:!1},noSecondsOverlay:{type:Boolean,default:!1},hoursGridIncrement:{type:[String,Number],default:1},minutesGridIncrement:{type:[String,Number],default:5},secondsGridIncrement:{type:[String,Number],default:5},hoursIncrement:{type:[Number,String],default:1},minutesIncrement:{type:[Number,String],default:1},secondsIncrement:{type:[Number,String],default:1},range:{type:Boolean,default:!1},uid:{type:String,default:null},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},inline:{type:[Boolean,Object],default:!1},textInput:{type:[Boolean,Object],default:!1},noDisabledRange:{type:Boolean,default:!1},sixWeeks:{type:[Boolean,String],default:!1},actionRow:{type:Object,default:()=>({})},focusStartDate:{type:Boolean,default:!1},disabledTimes:{type:[Function,Array],default:void 0},showLastInRange:{type:Boolean,default:!0},timePickerInline:{type:Boolean,default:!1},calendar:{type:Function,default:null},config:{type:Object,default:void 0},quarterPicker:{type:Boolean,default:!1},yearFirst:{type:Boolean,default:!1}},Ia={...Y0,shadow:{type:Boolean,default:!1},flowStep:{type:Number,default:0},internalModelValue:{type:[Date,Array],default:null},arrMapValues:{type:Object,default:()=>({})},noOverlayFocus:{type:Boolean,default:!1}},bUe={key:1,class:"dp__input_wrap"},wUe=["id","name","inputmode","placeholder","disabled","readonly","required","value","autocomplete","aria-label","aria-disabled","aria-invalid"],yUe={key:2,class:"dp__clear_icon"},_Ue=Cn({compatConfig:{MODE:3},__name:"DatepickerInput",props:{isMenuOpen:{type:Boolean,default:!1},inputValue:{type:String,default:""},...Y0},emits:["clear","open","update:input-value","set-input-date","close","select-date","set-empty-date","toggle","focus-prev","focus","blur","real-blur"],setup(n,{expose:t,emit:e}){const i=e,r=n,{defaultedTextInput:s,defaultedAriaLabels:o,defaultedInline:a,defaultedConfig:l,getDefaultPattern:c,getDefaultStartTime:u}=nr(r),{checkMinMaxRange:d}=lf(r),f=Z(),h=Z(null),g=Z(!1),v=Z(!1),_=le(()=>({dp__pointer:!r.disabled&&!r.readonly&&!s.value.enabled,dp__disabled:r.disabled,dp__input_readonly:!s.value.enabled,dp__input:!0,dp__input_icon_pad:!r.hideInputIcon,dp__input_valid:!!r.state,dp__input_invalid:r.state===!1,dp__input_focus:g.value||r.isMenuOpen,dp__input_reg:!s.value.enabled,[r.inputClassName]:!!r.inputClassName})),w=()=>{i("set-input-date",null),r.autoApply&&(i("set-empty-date"),f.value=null)},C=q=>{const N=u();return q4e(q,s.value.format??c(),N??W9({},r.enableSeconds),r.inputValue,v.value)},k=q=>{const{rangeSeparator:N}=s.value,[$,U]=q.split(`${N}`);if($){const re=C($.trim()),K=U?C(U.trim()):null,z=re&&K?[re,K]:[re];d(K,z,0)&&(f.value=re?z:null)}},E=()=>{v.value=!0},A=q=>{if(r.range)k(q);else if(r.multiDates){const N=q.split(";");f.value=N.map($=>C($.trim())).filter($=>$)}else f.value=C(q)},x=q=>{var N;const $=typeof q=="string"?q:(N=q.target)==null?void 0:N.value;$!==""?(s.value.openMenu&&!r.isMenuOpen&&i("open"),A($),i("set-input-date",f.value)):w(),v.value=!1,i("update:input-value",$)},p=q=>{s.value.enabled?(A(q.target.value),s.value.enterSubmit&&TS(f.value)&&r.inputValue!==""?(i("set-input-date",f.value,!0),f.value=null):s.value.enterSubmit&&r.inputValue===""&&(f.value=null,i("clear"))):S(q)},D=q=>{s.value.enabled&&s.value.tabSubmit&&A(q.target.value),s.value.tabSubmit&&TS(f.value)&&r.inputValue!==""?(i("set-input-date",f.value,!0,!0),f.value=null):s.value.tabSubmit&&r.inputValue===""&&(f.value=null,i("clear",!0))},R=()=>{var q;g.value=!0,i("focus"),s.value.enabled&&s.value.selectOnFocus&&((q=h.value)==null||q.select())},S=q=>{q.preventDefault(),nu(q,l.value,!0),s.value.enabled&&s.value.openMenu&&!a.value.input&&!r.isMenuOpen?i("open"):s.value.enabled||i("toggle")},I=()=>{i("real-blur"),g.value=!1,(!r.isMenuOpen||a.value.enabled&&a.value.input)&&i("blur"),r.autoApply&&s.value.enabled&&f.value&&!r.isMenuOpen&&(i("set-input-date",f.value),i("select-date"),f.value=null)},F=q=>{nu(q,l.value,!0),i("clear")},H=q=>{if(!s.value.enabled){if(q.code==="Tab")return;q.preventDefault()}};return t({focusInput:()=>{var q;(q=h.value)==null||q.focus({preventScroll:!0})},setParsedDate:q=>{f.value=q}}),(q,N)=>{var $;return P(),V("div",{onClick:S},[q.$slots.trigger&&!q.$slots["dp-input"]&&!M(a).enabled?ht(q.$slots,"trigger",{key:0}):ne("",!0),!q.$slots.trigger&&(!M(a).enabled||M(a).input)?(P(),V("div",bUe,[q.$slots["dp-input"]&&!q.$slots.trigger&&!M(a).enabled?ht(q.$slots,"dp-input",{key:0,value:n.inputValue,isMenuOpen:n.isMenuOpen,onInput:x,onEnter:p,onTab:D,onClear:F,onBlur:I,onKeypress:H,onPaste:E,openMenu:()=>q.$emit("open"),closeMenu:()=>q.$emit("close"),toggleMenu:()=>q.$emit("toggle")}):ne("",!0),q.$slots["dp-input"]?ne("",!0):(P(),V("input",{key:1,id:q.uid?`dp-input-${q.uid}`:void 0,ref_key:"inputRef",ref:h,name:q.name,class:Ze(_.value),inputmode:M(s).enabled?"text":"none",placeholder:q.placeholder,disabled:q.disabled,readonly:q.readonly,required:q.required,value:n.inputValue,autocomplete:q.autocomplete,"aria-label":($=M(o))==null?void 0:$.input,"aria-disabled":q.disabled||void 0,"aria-invalid":q.state===!1?!0:void 0,onInput:x,onKeydown:[on(p,["enter"]),on(D,["tab"]),H],onBlur:I,onFocus:R,onKeypress:H,onPaste:E},null,42,wUe)),m("div",{onClick:N[2]||(N[2]=U=>i("toggle"))},[q.$slots["input-icon"]&&!q.hideInputIcon?(P(),V("span",{key:0,class:"dp__input_icon",onClick:N[0]||(N[0]=U=>i("toggle"))},[ht(q.$slots,"input-icon")])):ne("",!0),!q.$slots["input-icon"]&&!q.hideInputIcon&&!q.$slots["dp-input"]?(P(),Ge(M(Bm),{key:1,class:"dp__input_icon dp__input_icons",onClick:N[1]||(N[1]=U=>i("toggle"))})):ne("",!0)]),q.$slots["clear-icon"]&&n.inputValue&&q.clearable&&!q.disabled&&!q.readonly?(P(),V("span",yUe,[ht(q.$slots,"clear-icon",{clear:F})])):ne("",!0),q.clearable&&!q.$slots["clear-icon"]&&n.inputValue&&!q.disabled&&!q.readonly?(P(),Ge(M(D9),{key:3,class:"dp__clear_icon dp__input_icons",onClick:N[3]||(N[3]=bt(U=>F(U),["prevent"]))})):ne("",!0)])):ne("",!0)])}}}),kUe=["title"],EUe={class:"dp__action_buttons"},CUe=["disabled"],TUe=Cn({compatConfig:{MODE:3},__name:"ActionRow",props:{menuMount:{type:Boolean,default:!1},calendarWidth:{type:Number,default:0},...Ia},emits:["close-picker","select-date","select-now","invalid-select"],setup(n,{emit:t}){const e=t,i=n,{defaultedActionRow:r,defaultedPreviewFormat:s,defaultedMultiCalendars:o,defaultedTextInput:a,defaultedInline:l,getDefaultPattern:c}=nr(i),{isValidTime:u}=lf(i),{buildMatrix:d}=Vu(),f=Z(null),h=Z(null);Jt(()=>{i.arrowNavigation&&d([mr(f),mr(h)],"actionRow")});const g=le(()=>i.range&&!i.partialRange&&i.internalModelValue?i.internalModelValue.length===2:!0),v=le(()=>!_.value||!w.value||!g.value),_=le(()=>!i.enableTimePicker||i.ignoreTimeValidation?!0:u(i.internalModelValue)),w=le(()=>i.monthPicker?i.range&&Array.isArray(i.internalModelValue)?!i.internalModelValue.filter(S=>!D(S)).length:D(i.internalModelValue):!0),C=()=>{const S=s.value;return i.timePicker||i.monthPicker,S(yr(i.internalModelValue))},k=()=>{const S=i.internalModelValue;return o.value.count>0?`${E(S[0])} - ${E(S[1])}`:[E(S[0]),E(S[1])]},E=S=>q9(S,s.value,i.formatLocale,a.value.rangeSeparator,i.modelAuto,c()),A=le(()=>!i.internalModelValue||!i.menuMount?"":typeof s.value=="string"?Array.isArray(i.internalModelValue)?i.internalModelValue.length===2&&i.internalModelValue[1]?k():i.multiDates?i.internalModelValue.map(S=>`${E(S)}`):i.modelAuto?`${E(i.internalModelValue[0])}`:`${E(i.internalModelValue[0])} -`:E(i.internalModelValue):C()),x=()=>i.multiDates?"; ":" - ",p=le(()=>Array.isArray(A.value)?A.value.join(x()):A.value),D=S=>{if(!i.monthPicker)return!0;let I=!0;const F=ot(la(S));if(i.minDate&&i.maxDate){const H=ot(la(i.minDate)),q=ot(la(i.maxDate));return os(F,H)&&Br(F,q)||Qn(F,H)||Qn(F,q)}if(i.minDate){const H=ot(la(i.minDate));I=os(F,H)||Qn(F,H)}if(i.maxDate){const H=ot(la(i.maxDate));I=Br(F,H)||Qn(F,H)}return I},R=()=>{_.value&&w.value&&g.value?e("select-date"):e("invalid-select")};return(S,I)=>(P(),V("div",{class:"dp__action_row",style:Di(n.calendarWidth?{width:`${n.calendarWidth}px`}:{})},[S.$slots["action-row"]?ht(S.$slots,"action-row",zn(An({key:0},{internalModelValue:S.internalModelValue,disabled:v.value,selectDate:()=>S.$emit("select-date"),closePicker:()=>S.$emit("close-picker")}))):(P(),V(Fe,{key:1},[M(r).showPreview?(P(),V("div",{key:0,class:"dp__selection_preview",title:p.value},[S.$slots["action-preview"]?ht(S.$slots,"action-preview",{key:0,value:S.internalModelValue}):ne("",!0),S.$slots["action-preview"]?ne("",!0):(P(),V(Fe,{key:1},[fe(B(p.value),1)],64))],8,kUe)):ne("",!0),m("div",EUe,[S.$slots["action-buttons"]?ht(S.$slots,"action-buttons",{key:0,value:S.internalModelValue}):ne("",!0),S.$slots["action-buttons"]?ne("",!0):(P(),V(Fe,{key:1},[!M(l).enabled&&M(r).showCancel?(P(),V("button",{key:0,ref_key:"cancelButtonRef",ref:f,type:"button",class:"dp__action_button dp__action_cancel",onClick:I[0]||(I[0]=F=>S.$emit("close-picker")),onKeydown:[I[1]||(I[1]=on(F=>S.$emit("close-picker"),["enter"])),I[2]||(I[2]=on(F=>S.$emit("close-picker"),["space"]))]},B(S.cancelText),545)):ne("",!0),M(r).showNow?(P(),V("button",{key:1,ref_key:"cancelButtonRef",ref:f,type:"button",class:"dp__action_button dp__action_cancel",onClick:I[3]||(I[3]=F=>S.$emit("select-now")),onKeydown:[I[4]||(I[4]=on(F=>S.$emit("select-now"),["enter"])),I[5]||(I[5]=on(F=>S.$emit("select-now"),["space"]))]},B(S.nowButtonLabel),545)):ne("",!0),M(r).showSelect?(P(),V("button",{key:2,ref_key:"selectButtonRef",ref:h,type:"button",class:"dp__action_button dp__action_select",disabled:v.value,onKeydown:[on(R,["enter"]),on(R,["space"])],onClick:R},B(S.selectText),41,CUe)):ne("",!0)],64))])],64))],4))}}),SUe=["onKeydown"],AUe={class:"dp__selection_grid_header"},IUe=["aria-selected","aria-disabled","onClick","onKeydown","onMouseover"],PUe=["aria-label"],Uv=Cn({__name:"SelectionOverlay",props:{items:{},type:{},isLast:{type:Boolean},arrowNavigation:{type:Boolean},skipButtonRef:{type:Boolean},headerRefs:{},hideNavigation:{},escClose:{type:Boolean},useRelative:{type:Boolean},height:{},textInput:{type:[Boolean,Object]},config:{},noOverlayFocus:{type:Boolean},focusValue:{}},emits:["selected","toggle","reset-flow","hover-value"],setup(n,{expose:t,emit:e}){const{setSelectionGrid:i,buildMultiLevelMatrix:r,setMonthPicker:s}=Vu(),o=e,a=n,{defaultedAriaLabels:l,defaultedTextInput:c,defaultedConfig:u}=nr(a),{hideNavigationButtons:d}=K0(),f=Z(!1),h=Z(null),g=Z(null),v=Z([]),_=Z(),w=Z(null),C=Z(0),k=Z(null);R_(()=>{h.value=null}),Jt(()=>{Zn().then(()=>I()),a.noOverlayFocus||A(),E(!0)}),wo(()=>E(!1));const E=K=>{var z;a.arrowNavigation&&((z=a.headerRefs)!=null&&z.length?s(K):i(K))},A=()=>{var K;const z=mr(g);z&&(c.value.enabled||(h.value?(K=h.value)==null||K.focus({preventScroll:!0}):z.focus({preventScroll:!0})),f.value=z.clientHeight<z.scrollHeight)},x=le(()=>({dp__overlay:!0,"dp--overlay-absolute":!a.useRelative,"dp--overlay-relative":a.useRelative})),p=le(()=>a.useRelative?{height:`${a.height}px`,width:"260px"}:void 0),D=le(()=>({dp__overlay_col:!0})),R=le(()=>({dp__btn:!0,dp__button:!0,dp__overlay_action:!0,dp__over_action_scroll:f.value,dp__button_bottom:a.isLast})),S=le(()=>{var K,z;return{dp__overlay_container:!0,dp__container_flex:((K=a.items)==null?void 0:K.length)<=6,dp__container_block:((z=a.items)==null?void 0:z.length)>6}});gt(()=>a.items,()=>I(),{deep:!0});const I=()=>{Zn().then(()=>{const K=mr(h),z=mr(g),ge=mr(w),Q=mr(k),ue=ge?ge.getBoundingClientRect().height:0;z&&(z.getBoundingClientRect().height?C.value=z.getBoundingClientRect().height-ue:C.value=u.value.modeHeight-ue),K&&Q&&(Q.scrollTop=K.offsetTop-Q.offsetTop-(C.value/2-K.getBoundingClientRect().height)-ue)})},F=K=>{K.disabled||o("selected",K.value)},H=()=>{o("toggle"),o("reset-flow")},q=()=>{a.escClose&&H()},N=(K,z,ge,Q)=>{K&&((z.active||z.value===a.focusValue)&&(h.value=K),a.arrowNavigation&&(Array.isArray(v.value[ge])?v.value[ge][Q]=K:v.value[ge]=[K],$()))},$=()=>{var K,z;const ge=(K=a.headerRefs)!=null&&K.length?[a.headerRefs].concat(v.value):v.value.concat([a.skipButtonRef?[]:[w.value]]);r(yr(ge),(z=a.headerRefs)!=null&&z.length?"monthPicker":"selectionGrid")},U=K=>{a.arrowNavigation||nu(K,u.value,!0)},re=K=>{_.value=K,o("hover-value",K)};return t({focusGrid:A}),(K,z)=>{var ge;return P(),V("div",{ref_key:"gridWrapRef",ref:g,class:Ze(x.value),style:Di(p.value),role:"dialog",tabindex:"0",onKeydown:[on(bt(q,["prevent"]),["esc"]),z[0]||(z[0]=on(bt(Q=>U(Q),["prevent"]),["left"])),z[1]||(z[1]=on(bt(Q=>U(Q),["prevent"]),["up"])),z[2]||(z[2]=on(bt(Q=>U(Q),["prevent"]),["down"])),z[3]||(z[3]=on(bt(Q=>U(Q),["prevent"]),["right"]))]},[m("div",{ref_key:"containerRef",ref:k,class:Ze(S.value),role:"grid",style:Di({height:`${C.value}px`})},[m("div",AUe,[ht(K.$slots,"header")]),K.$slots.overlay?ht(K.$slots,"overlay",{key:0}):(P(!0),V(Fe,{key:1},ct(K.items,(Q,ue)=>(P(),V("div",{key:ue,class:Ze(["dp__overlay_row",{dp__flex_row:K.items.length>=3}]),role:"row"},[(P(!0),V(Fe,null,ct(Q,(ve,ce)=>(P(),V("div",{key:ve.value,ref_for:!0,ref:J=>N(J,ve,ue,ce),role:"gridcell",class:Ze(D.value),"aria-selected":ve.active,"aria-disabled":ve.disabled||void 0,tabindex:"0",onClick:J=>F(ve),onKeydown:[on(bt(J=>F(ve),["prevent"]),["enter"]),on(bt(J=>F(ve),["prevent"]),["space"])],onMouseover:J=>re(ve.value)},[m("div",{class:Ze(ve.className)},[K.$slots.item?ht(K.$slots,"item",{key:0,item:ve}):ne("",!0),K.$slots.item?ne("",!0):(P(),V(Fe,{key:1},[fe(B(ve.text),1)],64))],2)],42,IUe))),128))],2))),128))],6),K.$slots["button-icon"]?vn((P(),V("button",{key:0,ref_key:"toggleButton",ref:w,type:"button","aria-label":(ge=M(l))==null?void 0:ge.toggleOverlay,class:Ze(R.value),tabindex:"0",onClick:H,onKeydown:[on(H,["enter"]),on(H,["tab"])]},[ht(K.$slots,"button-icon")],42,PUe)),[[md,!M(d)(K.hideNavigation,K.type)]]):ne("",!0)],46,SUe)}}}),Q0=Cn({__name:"InstanceWrap",props:{multiCalendars:{},stretch:{type:Boolean}},setup(n){const t=n,e=le(()=>t.multiCalendars>0?[...Array(t.multiCalendars).keys()]:[0]),i=le(()=>({dp__instance_calendar:t.multiCalendars>0}));return(r,s)=>(P(),V("div",{class:Ze({dp__menu_inner:!r.stretch,"dp--menu--inner-stretched":r.stretch,dp__flex_display:r.multiCalendars>0})},[(P(!0),V(Fe,null,ct(e.value,(o,a)=>(P(),V("div",{key:o,class:Ze(i.value)},[ht(r.$slots,"default",{instance:o,index:a})],2))),128))],2))}}),xUe=["aria-label","aria-disabled"],wp=Cn({compatConfig:{MODE:3},__name:"ArrowBtn",props:{ariaLabel:{},disabled:{type:Boolean}},emits:["activate","set-ref"],setup(n,{emit:t}){const e=t,i=Z(null);return Jt(()=>e("set-ref",i)),(r,s)=>(P(),V("button",{ref_key:"elRef",ref:i,type:"button",class:"dp__btn dp--arrow-btn-nav",tabindex:"0","aria-label":r.ariaLabel,"aria-disabled":r.disabled||void 0,onClick:s[0]||(s[0]=o=>r.$emit("activate")),onKeydown:[s[1]||(s[1]=on(bt(o=>r.$emit("activate"),["prevent"]),["enter"])),s[2]||(s[2]=on(bt(o=>r.$emit("activate"),["prevent"]),["space"]))]},[m("span",{class:Ze(["dp__inner_nav",{dp__inner_nav_disabled:r.disabled}])},[ht(r.$slots,"default")],2)],40,xUe))}}),OUe={class:"dp--year-mode-picker"},RUe=["aria-label"],Y9=Cn({__name:"YearModePicker",props:{...Ia,showYearPicker:{type:Boolean,default:!1},items:{type:Array,default:()=>[]},instance:{type:Number,default:0},year:{type:Number,default:0},isDisabled:{type:Function,default:()=>!1}},emits:["toggle-year-picker","year-select","handle-year"],setup(n,{emit:t}){const e=t,i=n,{showRightIcon:r,showLeftIcon:s}=K0(),{defaultedConfig:o,defaultedMultiCalendars:a,defaultedAriaLabels:l,defaultedTransitions:c}=nr(i),{showTransition:u,transitionName:d}=Bv(c),f=(v=!1,_)=>{e("toggle-year-picker",{flow:v,show:_})},h=v=>{e("year-select",v)},g=(v=!1)=>{e("handle-year",v)};return(v,_)=>{var w,C,k;return P(),V("div",OUe,[M(s)(M(a),n.instance)?(P(),Ge(wp,{key:0,ref:"mpPrevIconRef","aria-label":(w=M(l))==null?void 0:w.prevYear,disabled:n.isDisabled(!1),onActivate:_[0]||(_[0]=E=>g(!1))},{default:$e(()=>[v.$slots["arrow-left"]?ht(v.$slots,"arrow-left",{key:0}):ne("",!0),v.$slots["arrow-left"]?ne("",!0):(P(),Ge(M(ex),{key:1}))]),_:3},8,["aria-label","disabled"])):ne("",!0),m("button",{ref:"mpYearButtonRef",class:"dp__btn dp--year-select",type:"button","aria-label":(C=M(l))==null?void 0:C.openYearsOverlay,onClick:_[1]||(_[1]=()=>f(!1)),onKeydown:_[2]||(_[2]=on(()=>f(!1),["enter"]))},[v.$slots.year?ht(v.$slots,"year",{key:0,year:n.year}):ne("",!0),v.$slots.year?ne("",!0):(P(),V(Fe,{key:1},[fe(B(n.year),1)],64))],40,RUe),M(r)(M(a),n.instance)?(P(),Ge(wp,{key:1,ref:"mpNextIconRef","aria-label":(k=M(l))==null?void 0:k.nextYear,disabled:n.isDisabled(!0),onActivate:_[3]||(_[3]=E=>g(!0))},{default:$e(()=>[v.$slots["arrow-right"]?ht(v.$slots,"arrow-right",{key:0}):ne("",!0),v.$slots["arrow-right"]?ne("",!0):(P(),Ge(M(tx),{key:1}))]),_:3},8,["aria-label","disabled"])):ne("",!0),Ce(jd,{name:M(d)(n.showYearPicker),css:M(u)},{default:$e(()=>[n.showYearPicker?(P(),Ge(Uv,{key:0,items:n.items,"text-input":v.textInput,"esc-close":v.escClose,config:v.config,"is-last":v.autoApply&&!M(o).keepActionRow,"hide-navigation":v.hideNavigation,type:"year",onToggle:f,onSelected:_[4]||(_[4]=E=>h(E))},Wr({"button-icon":$e(()=>[v.$slots["calendar-icon"]?ht(v.$slots,"calendar-icon",{key:0}):ne("",!0),v.$slots["calendar-icon"]?ne("",!0):(P(),Ge(M(Bm),{key:1}))]),_:2},[v.$slots["year-overlay-value"]?{name:"item",fn:$e(({item:E})=>[ht(v.$slots,"year-overlay-value",{text:E.text,value:E.value})]),key:"0"}:void 0]),1032,["items","text-input","esc-close","config","is-last","hide-navigation"])):ne("",!0)]),_:3},8,["name","css"])])}}}),ux=(n,t,e)=>{if(t.value&&Array.isArray(t.value))if(t.value.some(i=>Qn(n,i))){const i=t.value.filter(r=>!Qn(r,n));t.value=i.length?i:null}else(e&&+e>t.value.length||!e)&&t.value.push(n);else t.value=[n]},dx=(n,t,e)=>{let i=n.value?n.value.slice():[];return i.length===2&&i[1]!==null&&(i=[]),i.length?Br(t,i[0])?(i.unshift(t),e("range-start",i[0]),e("range-start",i[1])):(i[1]=t,e("range-end",t)):(i=[t],e("range-start",t)),n.value=i,i},Z0=(n,t,e,i)=>{n[0]&&n[1]&&e&&t("auto-apply"),n[0]&&!n[1]&&i&&e&&t("auto-apply")},Q9=n=>{Array.isArray(n.value)&&n.value.length<=2&&n.range?n.modelValue.value=n.value.map(t=>va(ot(t),n.timezone)):Array.isArray(n.value)||(n.modelValue.value=va(ot(n.value),n.timezone))},Z9=({multiCalendars:n,highlight:t,calendars:e,modelValue:i,props:r,year:s,month:o,emit:a})=>{const l=le(()=>lx(r.yearRange,r.reverseYears)),c=Z([!1]),u=le(()=>(E,A)=>{const x=Ei(la(new Date),{month:o.value(E),year:s.value(E)});return j9(x,r.maxDate,r.minDate,r.preventMinMaxNavigation,A)}),d=()=>{for(let E=0;E<n.value.count;E++)if(E===0)e.value[E]=e.value[0];else{const A=Ei(ot(),e.value[E-1]);e.value[E]={month:Ln(A),year:pn(qP(A,1))}}},f=E=>{if(!E)return d();const A=Ei(ot(),e.value[E]);return e.value[0].year=pn(V9(A,n.value.count-1)),d()},h=E=>r.focusStartDate?E[0]:E[1]?E[1]:E[0],g=()=>{if(i.value){const E=Array.isArray(i.value)?h(i.value):i.value;e.value[0]={month:Ln(E),year:pn(E)}}};Jt(()=>{g(),n.value.count&&d()});const v=(E,A)=>{e.value[A].year=E,n.value.count&&!n.value.solo&&f(A)},_=le(()=>E=>mm(l.value,A=>{const x=s.value(E)===A.value,p=hv(A.value,gm(r.minDate),gm(r.maxDate)),D=cx(t.value,A.value);return{active:x,disabled:p,highlighted:D}})),w=(E,A)=>{v(E,A),k(A)},C=(E,A=!1)=>{if(!u.value(E,A)){const x=A?s.value(E)+1:s.value(E)-1;v(x,E)}},k=(E,A=!1,x)=>{A||a("reset-flow"),x!==void 0?c.value[E]=x:c.value[E]=!c.value[E],c.value||a("overlay-closed")};return{isDisabled:u,groupedYears:_,showYearPicker:c,selectYear:v,toggleYearPicker:k,handleYearSelect:w,handleYear:C}},VUe=(n,t)=>{const{defaultedMultiCalendars:e,defaultedAriaLabels:i,defaultedTransitions:r,defaultedConfig:s,defaultedHighlight:o}=nr(n),{modelValue:a,year:l,month:c,calendars:u}=Fv(n,t),d=le(()=>$9(n.formatLocale,n.locale,n.monthNameFormat)),f=Z(null),{selectYear:h,groupedYears:g,showYearPicker:v,toggleYearPicker:_,handleYearSelect:w,handleYear:C,isDisabled:k}=Z9({modelValue:a,multiCalendars:e,highlight:o,calendars:u,year:l,month:c,props:n,emit:t});Jt(()=>{n.startDate&&(a.value&&n.focusStartDate||!a.value)&&h(pn(ot(n.startDate)),0)});const E=U=>U?{month:Ln(U),year:pn(U)}:{month:null,year:null},A=()=>a.value?Array.isArray(a.value)?a.value.map(U=>E(U)):E(a.value):E(),x=(U,re)=>{const K=u.value[U],z=A();return Array.isArray(z)?z.some(ge=>ge.year===(K==null?void 0:K.year)&&ge.month===re):(K==null?void 0:K.year)===z.year&&re===z.month},p=(U,re,K)=>{var z,ge;const Q=A();return Array.isArray(Q)?l.value(re)===((z=Q[K])==null?void 0:z.year)&&U===((ge=Q[K])==null?void 0:ge.month):!1},D=(U,re)=>{if(n.range){const K=A();if(Array.isArray(a.value)&&Array.isArray(K)){const z=p(U,re,0)||p(U,re,1),ge=Hl(la(ot()),U,l.value(re));return G0(a.value,f.value,ge)&&!z}return!1}return!1},R=le(()=>U=>mm(d.value,re=>{const K=x(U,re.value),z=hv(re.value,F9(l.value(U),n.minDate),U9(l.value(U),n.maxDate))||X4e(n.disabledDates,l.value(U)).includes(re.value),ge=D(re.value,U),Q=G9(o.value,re.value,l.value(U));return{active:K,disabled:z,isBetween:ge,highlighted:Q}})),S=(U,re)=>Hl(la(ot()),U,l.value(re)),I=(U,re)=>{const K=a.value?a.value:la(new Date);a.value=Hl(K,U,l.value(re)),t("auto-apply")},F=(U,re)=>{const K=dx(a,S(U,re),t);Z0(K,t,n.autoApply,n.modelAuto)},H=(U,re)=>{ux(S(U,re),a,n.multiDatesLimit),t("auto-apply",!0)},q=(U,re)=>(u.value[re].month=U,$(re,u.value[re].year,U),n.multiDates?H(U,re):n.range?F(U,re):I(U,re)),N=(U,re)=>{h(U,re),$(re,U,null)},$=(U,re,K)=>{let z=K;if(!z&&z!==0){const ge=A();z=Array.isArray(ge)?ge[U].month:ge.month}t("update-month-year",{instance:U,year:re,month:z})};return{groupedMonths:R,groupedYears:g,year:l,isDisabled:k,defaultedMultiCalendars:e,defaultedAriaLabels:i,defaultedTransitions:r,defaultedConfig:s,showYearPicker:v,modelValue:a,presetDate:(U,re)=>{Q9({value:U,modelValue:a,range:n.range,timezone:re?void 0:n.timezone}),t("auto-apply")},setHoverDate:(U,re)=>{f.value=S(U,re)},selectMonth:q,selectYear:N,toggleYearPicker:_,handleYearSelect:w,handleYear:C,getModelMonthYear:A}},DUe=Cn({compatConfig:{MODE:3},__name:"MonthPicker",props:{...Ia},emits:["update:internal-model-value","overlay-closed","reset-flow","range-start","range-end","auto-apply","update-month-year","mount"],setup(n,{expose:t,emit:e}){const i=e,r=ml(),s=oo(r,"yearMode"),o=n;Jt(()=>{o.shadow||i("mount",null)});const{groupedMonths:a,groupedYears:l,year:c,isDisabled:u,defaultedMultiCalendars:d,defaultedConfig:f,showYearPicker:h,modelValue:g,presetDate:v,setHoverDate:_,selectMonth:w,selectYear:C,toggleYearPicker:k,handleYearSelect:E,handleYear:A,getModelMonthYear:x}=VUe(o,i);return t({getSidebarProps:()=>({modelValue:g,year:c,getModelMonthYear:x,selectMonth:w,selectYear:C,handleYear:A}),presetDate:v,toggleYearPicker:p=>k(0,p)}),(p,D)=>(P(),Ge(Q0,{"multi-calendars":M(d).count,stretch:""},{default:$e(({instance:R})=>[p.$slots["month-year"]?ht(p.$slots,"month-year",zn(An({key:0},{year:M(c),months:M(a)(R),years:M(l)(R),selectMonth:M(w),selectYear:M(C),instance:R}))):(P(),Ge(Uv,{key:1,items:M(a)(R),"arrow-navigation":p.arrowNavigation,"is-last":p.autoApply&&!M(f).keepActionRow,"esc-close":p.escClose,height:M(f).modeHeight,config:p.config,"no-overlay-focus":!!(p.noOverlayFocus||p.textInput),"use-relative":"",type:"month",onSelected:S=>M(w)(S,R),onHoverValue:S=>M(_)(S,R)},{header:$e(()=>[Ce(Y9,An(p.$props,{items:M(l)(R),instance:R,"show-year-picker":M(h)[R],year:M(c)(R),"is-disabled":S=>M(u)(R,S),onHandleYear:S=>M(A)(R,S),onYearSelect:S=>M(E)(S,R),onToggleYearPicker:S=>M(k)(R,S==null?void 0:S.flow,S==null?void 0:S.show)}),Wr({_:2},[ct(M(s),(S,I)=>({name:S,fn:$e(F=>[ht(p.$slots,S,zn(lr(F)))])}))]),1040,["items","instance","show-year-picker","year","is-disabled","onHandleYear","onYearSelect","onToggleYearPicker"])]),_:2},1032,["items","arrow-navigation","is-last","esc-close","height","config","no-overlay-focus","onSelected","onHoverValue"]))]),_:3},8,["multi-calendars"]))}}),NUe=(n,t)=>{const{modelValue:e}=Fv(n,t),i=Z(null),{defaultedHighlight:r,defaultedFilters:s}=nr(n),o=Z();Jt(()=>{n.startDate&&(e.value&&n.focusStartDate||!e.value)&&(o.value=pn(ot(n.startDate)))});const a=d=>Array.isArray(e.value)?e.value.some(f=>pn(f)===d):e.value?pn(e.value)===d:!1,l=d=>n.range&&Array.isArray(e.value)?G0(e.value,i.value,u(d)):!1,c=le(()=>mm(lx(n.yearRange,n.reverseYears),d=>{const f=a(d.value),h=hv(d.value,gm(n.minDate),gm(n.maxDate))||s.value.years.includes(d.value),g=l(d.value)&&!f,v=cx(r.value,d.value);return{active:f,disabled:h,isBetween:g,highlighted:v}})),u=d=>Ka(la(new Date),d);return{groupedYears:c,modelValue:e,focusYear:o,setHoverValue:d=>{i.value=Ka(la(new Date),d)},selectYear:d=>{var f;if(n.multiDates)return e.value?Array.isArray(e.value)&&(((f=e.value)==null?void 0:f.map(h=>pn(h))).includes(d)?e.value=e.value.filter(h=>pn(h)!==d):e.value.push(Ka(ls(ot()),d))):e.value=[Ka(ls(ot()),d)],t("auto-apply",!0);if(n.range){const h=dx(e,u(d),t);return Z0(h,t,n.autoApply,n.modelAuto)}e.value=u(d),t("auto-apply")}}},LUe=Cn({compatConfig:{MODE:3},__name:"YearPicker",props:{...Ia},emits:["update:internal-model-value","reset-flow","range-start","range-end","auto-apply"],setup(n,{expose:t,emit:e}){const i=e,r=n,{groupedYears:s,modelValue:o,focusYear:a,selectYear:l,setHoverValue:c}=NUe(r,i),{defaultedConfig:u}=nr(r);return t({getSidebarProps:()=>({modelValue:o,selectYear:l})}),(d,f)=>(P(),V("div",null,[d.$slots["month-year"]?ht(d.$slots,"month-year",zn(An({key:0},{years:M(s),selectYear:M(l)}))):(P(),Ge(Uv,{key:1,items:M(s),"is-last":d.autoApply&&!M(u).keepActionRow,height:M(u).modeHeight,config:d.config,"no-overlay-focus":!!(d.noOverlayFocus||d.textInput),"focus-value":M(a),type:"year","use-relative":"",onSelected:M(l),onHoverValue:M(c)},Wr({_:2},[d.$slots["year-overlay-value"]?{name:"item",fn:$e(({item:h})=>[ht(d.$slots,"year-overlay-value",{text:h.text,value:h.value})]),key:"0"}:void 0]),1032,["items","is-last","height","config","no-overlay-focus","focus-value","onSelected","onHoverValue"]))]))}}),MUe={key:0,class:"dp__time_input"},$Ue=["aria-label","onKeydown","onClick"],BUe=m("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_l"},null,-1),FUe=m("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_r"},null,-1),UUe=["aria-label","disabled","onKeydown","onClick"],zUe=["aria-label","onKeydown","onClick"],HUe=m("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_l"},null,-1),WUe=m("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_r"},null,-1),jUe={key:0},qUe=["aria-label","onKeydown"],GUe=Cn({compatConfig:{MODE:3},__name:"TimeInput",props:{hours:{type:Number,default:0},minutes:{type:Number,default:0},seconds:{type:Number,default:0},closeTimePickerBtn:{type:Object,default:null},order:{type:Number,default:0},disabledTimesConfig:{type:Function,default:null},validateTime:{type:Function,default:()=>!1},...Ia},emits:["set-hours","set-minutes","update:hours","update:minutes","update:seconds","reset-flow","mounted","overlay-closed","am-pm-change"],setup(n,{expose:t,emit:e}){const i=e,r=n,{setTimePickerElements:s,setTimePickerBackRef:o}=Vu(),{defaultedAriaLabels:a,defaultedTransitions:l,defaultedFilters:c,defaultedConfig:u}=nr(r),{transitionName:d,showTransition:f}=Bv(l),h=Kt({hours:!1,minutes:!1,seconds:!1}),g=Z("AM"),v=Z(null),_=Z([]);Jt(()=>{i("mounted")});const w=J=>Ei(new Date,{hours:J.hours,minutes:J.minutes,seconds:r.enableSeconds?J.seconds:0,milliseconds:0}),C=le(()=>J=>q(J,r[J])||E(J,r[J])),k=le(()=>({hours:r.hours,minutes:r.minutes,seconds:r.seconds})),E=(J,ae)=>r.range&&!r.disableTimeRangeValidation?!r.validateTime(J,ae):!1,A=(J,ae)=>{if(r.range&&!r.disableTimeRangeValidation){const xe=ae?+r[`${J}Increment`]:-+r[`${J}Increment`],he=r[J]+xe;return!r.validateTime(J,he)}return!1},x=le(()=>J=>!$(+r[J]+ +r[`${J}Increment`],J)||A(J,!0)),p=le(()=>J=>!$(+r[J]-+r[`${J}Increment`],J)||A(J,!1)),D=(J,ae)=>f9(Ei(ot(),J),ae),R=(J,ae)=>u4e(Ei(ot(),J),ae),S=le(()=>({dp__time_col:!0,dp__time_col_block:!r.timePickerInline,dp__time_col_reg_block:!r.enableSeconds&&r.is24&&!r.timePickerInline,dp__time_col_reg_inline:!r.enableSeconds&&r.is24&&r.timePickerInline,dp__time_col_reg_with_button:!r.enableSeconds&&!r.is24,dp__time_col_sec:r.enableSeconds&&r.is24,dp__time_col_sec_with_button:r.enableSeconds&&!r.is24})),I=le(()=>{const J=[{type:"hours"},{type:"",separator:!0},{type:"minutes"}];return r.enableSeconds?J.concat([{type:"",separator:!0},{type:"seconds"}]):J}),F=le(()=>I.value.filter(J=>!J.separator)),H=le(()=>J=>{if(J==="hours"){const ae=ge(+r.hours);return{text:ae<10?`0${ae}`:`${ae}`,value:ae}}return{text:r[J]<10?`0${r[J]}`:`${r[J]}`,value:r[J]}}),q=(J,ae)=>{var xe;if(!r.disabledTimesConfig)return!1;const he=r.disabledTimesConfig(r.order,J==="hours"?ae:void 0);return he[J]?!!((xe=he[J])!=null&&xe.includes(ae)):!0},N=J=>{const ae=r.is24?24:12,xe=J==="hours"?ae:60,he=+r[`${J}GridIncrement`],Ae=J==="hours"&&!r.is24?he:0,We=[];for(let Ee=Ae;Ee<xe;Ee+=he)We.push({value:Ee,text:Ee<10?`0${Ee}`:`${Ee}`});return J==="hours"&&!r.is24&&We.push({value:0,text:"12"}),mm(We,Ee=>({active:!1,disabled:c.value.times[J].includes(Ee.value)||!$(Ee.value,J)||q(J,Ee.value)||E(J,Ee.value)}))},$=(J,ae)=>{const xe=r.minTime?w(xE(r.minTime)):null,he=r.maxTime?w(xE(r.maxTime)):null,Ae=w(xE(k.value,ae,J));return xe&&he?(fv(Ae,he)||fh(Ae,he))&&(dv(Ae,xe)||fh(Ae,xe)):xe?dv(Ae,xe)||fh(Ae,xe):he?fv(Ae,he)||fh(Ae,he):!0},U=J=>r[`no${J[0].toUpperCase()+J.slice(1)}Overlay`],re=J=>{U(J)||(h[J]=!h[J],h[J]||i("overlay-closed"))},K=J=>J==="hours"?pa:J==="minutes"?sl:fm,z=(J,ae=!0)=>{const xe=ae?D:R,he=ae?+r[`${J}Increment`]:-+r[`${J}Increment`];$(+r[J]+he,J)&&i(`update:${J}`,K(J)(xe({[J]:+r[J]},{[J]:+r[`${J}Increment`]})))},ge=J=>r.is24?J:(J>=12?g.value="PM":g.value="AM",B4e(J)),Q=()=>{g.value==="PM"?(g.value="AM",i("update:hours",r.hours-12)):(g.value="PM",i("update:hours",r.hours+12)),i("am-pm-change",g.value)},ue=J=>{h[J]=!0},ve=(J,ae,xe)=>{if(J&&r.arrowNavigation){Array.isArray(_.value[ae])?_.value[ae][xe]=J:_.value[ae]=[J];const he=_.value.reduce((Ae,We)=>We.map((Ee,G)=>[...Ae[G]||[],We[G]]),[]);o(r.closeTimePickerBtn),v.value&&(he[1]=he[1].concat(v.value)),s(he,r.order)}},ce=(J,ae)=>(re(J),J==="hours"&&!r.is24?i(`update:${J}`,g.value==="PM"?ae+12:ae):i(`update:${J}`,ae));return t({openChildCmp:ue}),(J,ae)=>{var xe;return J.disabled?ne("",!0):(P(),V("div",MUe,[(P(!0),V(Fe,null,ct(I.value,(he,Ae)=>{var We,Ee,G;return P(),V("div",{key:Ae,class:Ze(S.value)},[he.separator?(P(),V(Fe,{key:0},[fe(" : ")],64)):(P(),V(Fe,{key:1},[m("button",{ref_for:!0,ref:Y=>ve(Y,Ae,0),type:"button",class:Ze({dp__btn:!0,dp__inc_dec_button:!J.timePickerInline,dp__inc_dec_button_inline:J.timePickerInline,dp__tp_inline_btn_top:J.timePickerInline,dp__inc_dec_button_disabled:x.value(he.type)}),"aria-label":(We=M(a))==null?void 0:We.incrementValue(he.type),tabindex:"0",onKeydown:[on(bt(Y=>z(he.type),["prevent"]),["enter"]),on(bt(Y=>z(he.type),["prevent"]),["space"])],onClick:Y=>z(he.type)},[r.timePickerInline?(P(),V(Fe,{key:1},[BUe,FUe],64)):(P(),V(Fe,{key:0},[J.$slots["arrow-up"]?ht(J.$slots,"arrow-up",{key:0}):ne("",!0),J.$slots["arrow-up"]?ne("",!0):(P(),Ge(M(ix),{key:1}))],64))],42,$Ue),m("button",{ref_for:!0,ref:Y=>ve(Y,Ae,1),type:"button","aria-label":(Ee=M(a))==null?void 0:Ee.openTpOverlay(he.type),class:Ze({dp__time_display:!0,dp__time_display_block:!J.timePickerInline,dp__time_display_inline:J.timePickerInline,"dp--time-invalid":C.value(he.type),"dp--time-overlay-btn":!C.value(he.type)}),disabled:U(he.type),tabindex:"0",onKeydown:[on(bt(Y=>re(he.type),["prevent"]),["enter"]),on(bt(Y=>re(he.type),["prevent"]),["space"])],onClick:Y=>re(he.type)},[J.$slots[he.type]?ht(J.$slots,he.type,{key:0,text:H.value(he.type).text,value:H.value(he.type).value}):ne("",!0),J.$slots[he.type]?ne("",!0):(P(),V(Fe,{key:1},[fe(B(H.value(he.type).text),1)],64))],42,UUe),m("button",{ref_for:!0,ref:Y=>ve(Y,Ae,2),type:"button",class:Ze({dp__btn:!0,dp__inc_dec_button:!J.timePickerInline,dp__inc_dec_button_inline:J.timePickerInline,dp__tp_inline_btn_bottom:J.timePickerInline,dp__inc_dec_button_disabled:p.value(he.type)}),"aria-label":(G=M(a))==null?void 0:G.decrementValue(he.type),tabindex:"0",onKeydown:[on(bt(Y=>z(he.type,!1),["prevent"]),["enter"]),on(bt(Y=>z(he.type,!1),["prevent"]),["space"])],onClick:Y=>z(he.type,!1)},[r.timePickerInline?(P(),V(Fe,{key:1},[HUe,WUe],64)):(P(),V(Fe,{key:0},[J.$slots["arrow-down"]?ht(J.$slots,"arrow-down",{key:0}):ne("",!0),J.$slots["arrow-down"]?ne("",!0):(P(),Ge(M(rx),{key:1}))],64))],42,zUe)],64))],2)}),128)),J.is24?ne("",!0):(P(),V("div",jUe,[J.$slots["am-pm-button"]?ht(J.$slots,"am-pm-button",{key:0,toggle:Q,value:g.value}):ne("",!0),J.$slots["am-pm-button"]?ne("",!0):(P(),V("button",{key:1,ref_key:"amPmButton",ref:v,type:"button",class:"dp__pm_am_button",role:"button","aria-label":(xe=M(a))==null?void 0:xe.amPmButton,tabindex:"0",onClick:Q,onKeydown:[on(bt(Q,["prevent"]),["enter"]),on(bt(Q,["prevent"]),["space"])]},B(g.value),41,qUe))])),(P(!0),V(Fe,null,ct(F.value,(he,Ae)=>(P(),Ge(jd,{key:Ae,name:M(d)(h[he.type]),css:M(f)},{default:$e(()=>[h[he.type]?(P(),Ge(Uv,{key:0,items:N(he.type),"is-last":J.autoApply&&!M(u).keepActionRow,"esc-close":J.escClose,type:he.type,"text-input":J.textInput,config:J.config,"arrow-navigation":J.arrowNavigation,onSelected:We=>ce(he.type,We),onToggle:We=>re(he.type),onResetFlow:ae[0]||(ae[0]=We=>J.$emit("reset-flow"))},Wr({"button-icon":$e(()=>[J.$slots["clock-icon"]?ht(J.$slots,"clock-icon",{key:0}):ne("",!0),J.$slots["clock-icon"]?ne("",!0):(P(),Ge(Xl(J.timePickerInline?M(Bm):M(nx)),{key:1}))]),_:2},[J.$slots[`${he.type}-overlay-value`]?{name:"item",fn:$e(({item:We})=>[ht(J.$slots,`${he.type}-overlay-value`,{text:We.text,value:We.value})]),key:"0"}:void 0]),1032,["items","is-last","esc-close","type","text-input","config","arrow-navigation","onSelected","onToggle"])):ne("",!0)]),_:2},1032,["name","css"]))),128))]))}}}),KUe={class:"dp--tp-wrap"},YUe=["aria-label","tabindex"],QUe=["tabindex"],ZUe=["aria-label"],J9=Cn({compatConfig:{MODE:3},__name:"TimePicker",props:{hours:{type:[Number,Array],default:0},minutes:{type:[Number,Array],default:0},seconds:{type:[Number,Array],default:0},disabledTimesConfig:{type:Function,default:null},validateTime:{type:Function,default:()=>!1},...Ia},emits:["update:hours","update:minutes","update:seconds","mount","reset-flow","overlay-opened","overlay-closed","am-pm-change"],setup(n,{expose:t,emit:e}){const i=e,r=n,{buildMatrix:s,setTimePicker:o}=Vu(),a=ml(),{defaultedTransitions:l,defaultedAriaLabels:c,defaultedTextInput:u,defaultedConfig:d}=nr(r),{transitionName:f,showTransition:h}=Bv(l),{hideNavigationButtons:g}=K0(),v=Z(null),_=Z(null),w=Z([]),C=Z(null);Jt(()=>{i("mount"),!r.timePicker&&r.arrowNavigation?s([mr(v.value)],"time"):o(!0,r.timePicker)});const k=le(()=>r.range&&r.modelAuto?B9(r.internalModelValue):!0),E=Z(!1),A=N=>({hours:Array.isArray(r.hours)?r.hours[N]:r.hours,minutes:Array.isArray(r.minutes)?r.minutes[N]:r.minutes,seconds:Array.isArray(r.seconds)?r.seconds[N]:r.seconds}),x=le(()=>{const N=[];if(r.range)for(let $=0;$<2;$++)N.push(A($));else N.push(A(0));return N}),p=(N,$=!1,U="")=>{$||i("reset-flow"),E.value=N,i(N?"overlay-opened":"overlay-closed"),r.arrowNavigation&&o(N),Zn(()=>{U!==""&&w.value[0]&&w.value[0].openChildCmp(U)})},D=le(()=>({dp__btn:!0,dp__button:!0,dp__button_bottom:r.autoApply&&!d.value.keepActionRow})),R=oo(a,"timePicker"),S=(N,$,U)=>r.range?$===0?[N,x.value[1][U]]:[x.value[0][U],N]:N,I=N=>{i("update:hours",N)},F=N=>{i("update:minutes",N)},H=N=>{i("update:seconds",N)},q=()=>{if(C.value&&!u.value.enabled&&!r.noOverlayFocus){const N=U4e(C.value);N&&N.focus({preventScroll:!0})}};return t({toggleTimePicker:p}),(N,$)=>{var U;return P(),V("div",KUe,[!N.timePicker&&!N.timePickerInline?vn((P(),V("button",{key:0,ref_key:"openTimePickerBtn",ref:v,type:"button",class:Ze(D.value),"aria-label":(U=M(c))==null?void 0:U.openTimePicker,tabindex:N.noOverlayFocus?void 0:0,onKeydown:[$[0]||($[0]=on(re=>p(!0),["enter"])),$[1]||($[1]=on(re=>p(!0),["space"]))],onClick:$[2]||($[2]=re=>p(!0))},[N.$slots["clock-icon"]?ht(N.$slots,"clock-icon",{key:0}):ne("",!0),N.$slots["clock-icon"]?ne("",!0):(P(),Ge(M(nx),{key:1}))],42,YUe)),[[md,!M(g)(N.hideNavigation,"time")]]):ne("",!0),Ce(jd,{name:M(f)(E.value),css:M(h)&&!N.timePickerInline},{default:$e(()=>{var re;return[E.value||N.timePicker||N.timePickerInline?(P(),V("div",{key:0,ref_key:"overlayRef",ref:C,class:Ze({dp__overlay:!N.timePickerInline,"dp--overlay-absolute":!r.timePicker&&!N.timePickerInline,"dp--overlay-relative":r.timePicker}),style:Di(N.timePicker?{height:`${M(d).modeHeight}px`}:void 0),tabindex:N.timePickerInline?void 0:0},[m("div",{class:Ze(N.timePickerInline?"dp__time_picker_inline_container":"dp__overlay_container dp__container_flex dp__time_picker_overlay_container"),style:{display:"flex"}},[N.$slots["time-picker-overlay"]?ht(N.$slots,"time-picker-overlay",{key:0,hours:n.hours,minutes:n.minutes,seconds:n.seconds,setHours:I,setMinutes:F,setSeconds:H}):ne("",!0),N.$slots["time-picker-overlay"]?ne("",!0):(P(),V("div",{key:1,class:Ze(N.timePickerInline?"dp__flex":"dp__overlay_row dp__flex_row")},[(P(!0),V(Fe,null,ct(x.value,(K,z)=>vn((P(),Ge(GUe,An({key:z},{...N.$props,order:z,hours:K.hours,minutes:K.minutes,seconds:K.seconds,closeTimePickerBtn:_.value,disabledTimesConfig:n.disabledTimesConfig,disabled:z===0?N.fixedStart:N.fixedEnd},{ref_for:!0,ref_key:"timeInputRefs",ref:w,"validate-time":(ge,Q)=>n.validateTime(ge,S(Q,z,ge)),"onUpdate:hours":ge=>I(S(ge,z,"hours")),"onUpdate:minutes":ge=>F(S(ge,z,"minutes")),"onUpdate:seconds":ge=>H(S(ge,z,"seconds")),onMounted:q,onOverlayClosed:q,onAmPmChange:$[3]||($[3]=ge=>N.$emit("am-pm-change",ge))}),Wr({_:2},[ct(M(R),(ge,Q)=>({name:ge,fn:$e(ue=>[ht(N.$slots,ge,zn(lr(ue)))])}))]),1040,["validate-time","onUpdate:hours","onUpdate:minutes","onUpdate:seconds"])),[[md,z===0?!0:k.value]])),128))],2)),!N.timePicker&&!N.timePickerInline?vn((P(),V("button",{key:2,ref_key:"closeTimePickerBtn",ref:_,type:"button",class:Ze(D.value),"aria-label":(re=M(c))==null?void 0:re.closeTimePicker,tabindex:"0",onKeydown:[$[4]||($[4]=on(K=>p(!1),["enter"])),$[5]||($[5]=on(K=>p(!1),["space"]))],onClick:$[6]||($[6]=K=>p(!1))},[N.$slots["calendar-icon"]?ht(N.$slots,"calendar-icon",{key:0}):ne("",!0),N.$slots["calendar-icon"]?ne("",!0):(P(),Ge(M(Bm),{key:1}))],42,ZUe)),[[md,!M(g)(N.hideNavigation,"time")]]):ne("",!0)],2)],14,QUe)):ne("",!0)]}),_:3},8,["name","css"])])}}}),X9=(n,t,e,i)=>{const r=(w,C)=>Array.isArray(t[w])?t[w][C]:t[w],s=w=>n.enableSeconds?Array.isArray(t.seconds)?t.seconds[w]:t.seconds:0,o=(w,C)=>w?C!==void 0?iu(w,r("hours",C),r("minutes",C),s(C)):iu(w,t.hours,t.minutes,s()):XP(ot(),s(C)),a=(w,C)=>{t[w]=C},l=(w,C)=>{const k=Object.fromEntries(Object.keys(t).map(E=>E===w?[E,C]:[E,t[E]].slice()));if(n.range&&!n.disableTimeRangeValidation){const E=x=>e.value?iu(e.value[x],k.hours[x],k.minutes[x],k.seconds[x]):null,A=x=>JP(e.value[x],0);return!(Qn(E(0),E(1))&&(dv(E(0),A(1))||fv(E(1),A(0))))}return!0},c=(w,C)=>{l(w,C)&&(a(w,C),i&&i())},u=w=>{c("hours",w)},d=w=>{c("minutes",w)},f=w=>{c("seconds",w)},h=(w,C,k,E)=>{C&&u(w),!C&&!k&&d(w),k&&f(w),e.value&&E(e.value)},g=w=>{if(w){const C=Array.isArray(w),k=C?[+w[0].hours,+w[1].hours]:+w.hours,E=C?[+w[0].minutes,+w[1].minutes]:+w.minutes,A=C?[+w[0].seconds,+w[1].seconds]:+w.seconds;a("hours",k),a("minutes",E),n.enableSeconds&&a("seconds",A)}},v=(w,C)=>{const k={hours:Array.isArray(t.hours)?t.hours[w]:t.hours,disabledArr:[]};return(C||C===0)&&(k.hours=C),Array.isArray(n.disabledTimes)&&(k.disabledArr=n.range&&Array.isArray(n.disabledTimes[w])?n.disabledTimes[w]:n.disabledTimes),k},_=le(()=>(w,C)=>{var k;if(Array.isArray(n.disabledTimes)){const{disabledArr:E,hours:A}=v(w,C),x=E.filter(p=>+p.hours===A);return((k=x[0])==null?void 0:k.minutes)==="*"?{hours:[A],minutes:void 0,seconds:void 0}:{hours:[],minutes:(x==null?void 0:x.map(p=>+p.minutes))??[],seconds:(x==null?void 0:x.map(p=>p.seconds?+p.seconds:void 0))??[]}}return{hours:[],minutes:[],seconds:[]}});return{setTime:a,updateHours:u,updateMinutes:d,updateSeconds:f,getSetDateTime:o,updateTimeValues:h,getSecondsValue:s,assignStartTime:g,validateTime:l,disabledTimesConfig:_}},JUe=(n,t)=>{const{modelValue:e,time:i}=Fv(n,t),{defaultedStartTime:r}=nr(n),{updateTimeValues:s,getSetDateTime:o,setTime:a,assignStartTime:l,disabledTimesConfig:c,validateTime:u}=X9(n,i,e),d=C=>{const{hours:k,minutes:E,seconds:A}=C;return{hours:+k,minutes:+E,seconds:A?+A:0}},f=()=>{if(n.startTime){if(Array.isArray(n.startTime)){const k=d(n.startTime[0]),E=d(n.startTime[1]);return[Ei(ot(),k),Ei(ot(),E)]}const C=d(n.startTime);return Ei(ot(),C)}return n.range?[null,null]:null},h=()=>{if(n.range){const[C,k]=f();e.value=[o(C,0),o(k,1)]}else e.value=o(f())},g=C=>Array.isArray(C)?[_d(ot(C[0])),_d(ot(C[1]))]:[_d(C??ot())],v=(C,k,E)=>{a("hours",C),a("minutes",k),a("seconds",n.enableSeconds?E:0)},_=()=>{const[C,k]=g(e.value);return n.range?v([C.hours,k.hours],[C.minutes,k.minutes],[C.seconds,k.minutes]):v(C.hours,C.minutes,C.seconds)};Jt(()=>{if(!n.shadow)return l(r.value),e.value?_():h()});const w=()=>{Array.isArray(e.value)?e.value=e.value.map((C,k)=>C&&o(C,k)):e.value=o(e.value),t("time-update")};return{modelValue:e,time:i,disabledTimesConfig:c,updateTime:(C,k=!0,E=!1)=>{s(C,k,E,w)},validateTime:u}},XUe=Cn({compatConfig:{MODE:3},__name:"TimePickerSolo",props:{...Ia},emits:["update:internal-model-value","time-update","am-pm-change"],setup(n,{expose:t,emit:e}){const i=e,r=n,s=ml(),o=oo(s,"timePicker"),{time:a,modelValue:l,disabledTimesConfig:c,updateTime:u,validateTime:d}=JUe(r,i);return t({getSidebarProps:()=>({modelValue:l,time:a,updateTime:u})}),(f,h)=>(P(),Ge(Q0,{"multi-calendars":0,stretch:""},{default:$e(()=>[Ce(J9,An(f.$props,{hours:M(a).hours,minutes:M(a).minutes,seconds:M(a).seconds,"internal-model-value":f.internalModelValue,"disabled-times-config":M(c),"validate-time":M(d),"onUpdate:hours":h[0]||(h[0]=g=>M(u)(g)),"onUpdate:minutes":h[1]||(h[1]=g=>M(u)(g,!1)),"onUpdate:seconds":h[2]||(h[2]=g=>M(u)(g,!1,!0)),onAmPmChange:h[3]||(h[3]=g=>f.$emit("am-pm-change",g))}),Wr({_:2},[ct(M(o),(g,v)=>({name:g,fn:$e(_=>[ht(f.$slots,g,zn(lr(_)))])}))]),1040,["hours","minutes","seconds","internal-model-value","disabled-times-config","validate-time"])]),_:3}))}}),e6e={class:"dp__month_year_row"},t6e=["aria-label","onClick","onKeydown"],n6e=Cn({compatConfig:{MODE:3},__name:"DpHeader",props:{month:{type:Number,default:0},year:{type:Number,default:0},instance:{type:Number,default:0},years:{type:Array,default:()=>[]},months:{type:Array,default:()=>[]},...Ia},emits:["update-month-year","mount","reset-flow","overlay-closed"],setup(n,{expose:t,emit:e}){const i=e,r=n,{defaultedTransitions:s,defaultedAriaLabels:o,defaultedMultiCalendars:a,defaultedFilters:l,defaultedConfig:c,defaultedHighlight:u}=nr(r),{transitionName:d,showTransition:f}=Bv(s),{buildMatrix:h}=Vu(),{handleMonthYearChange:g,isDisabled:v,updateMonthYear:_}=fUe(r,i),{showLeftIcon:w,showRightIcon:C}=K0(),k=Z(!1),E=Z(!1),A=Z([null,null,null,null]);Jt(()=>{i("mount")});const x=z=>({get:()=>r[z],set:ge=>{const Q=z===ea.month?ea.year:ea.month;i("update-month-year",{[z]:ge,[Q]:r[Q]}),z===ea.month?q(!0):N(!0)}}),p=le(x(ea.month)),D=le(x(ea.year)),R=le(()=>z=>({month:r.month,year:r.year,items:z===ea.month?r.months:r.years,instance:r.instance,updateMonthYear:_,toggle:z===ea.month?q:N})),S=le(()=>r.months.find(ge=>ge.value===r.month)||{text:"",value:0}),I=le(()=>mm(r.months,z=>{const ge=r.month===z.value,Q=hv(z.value,F9(r.year,r.minDate),U9(r.year,r.maxDate))||l.value.months.includes(z.value),ue=G9(u.value,z.value,r.year);return{active:ge,disabled:Q,highlighted:ue}})),F=le(()=>mm(r.years,z=>{const ge=r.year===z.value,Q=hv(z.value,gm(r.minDate),gm(r.maxDate))||l.value.years.includes(z.value),ue=cx(u.value,z.value);return{active:ge,disabled:Q,highlighted:ue}})),H=(z,ge)=>{ge!==void 0?z.value=ge:z.value=!z.value,z.value||i("overlay-closed")},q=(z=!1,ge)=>{$(z),H(k,ge)},N=(z=!1,ge)=>{$(z),H(E,ge)},$=z=>{z||i("reset-flow")},U=(z,ge)=>{r.arrowNavigation&&(A.value[ge]=mr(z),h(A.value,"monthYear"))},re=le(()=>{var z,ge;return[{type:ea.month,index:1,toggle:q,modelValue:p.value,updateModelValue:Q=>p.value=Q,text:S.value.text,showSelectionGrid:k.value,items:I.value,ariaLabel:(z=o.value)==null?void 0:z.openMonthsOverlay},{type:ea.year,index:2,toggle:N,modelValue:D.value,updateModelValue:Q=>D.value=Q,text:r.year,showSelectionGrid:E.value,items:F.value,ariaLabel:(ge=o.value)==null?void 0:ge.openYearsOverlay}]}),K=le(()=>r.disableYearSelect?[re.value[0]]:r.yearFirst?[...re.value].reverse():re.value);return t({toggleMonthPicker:q,toggleYearPicker:N,handleMonthYearChange:g}),(z,ge)=>{var Q,ue,ve;return P(),V("div",e6e,[z.$slots["month-year"]?ht(z.$slots,"month-year",zn(An({key:0},{month:n.month,year:n.year,months:n.months,years:n.years,updateMonthYear:M(_),handleMonthYearChange:M(g),instance:n.instance}))):(P(),V(Fe,{key:1},[M(w)(M(a),n.instance)&&!z.vertical?(P(),Ge(wp,{key:0,"aria-label":(Q=M(o))==null?void 0:Q.prevMonth,disabled:M(v)(!1),onActivate:ge[0]||(ge[0]=ce=>M(g)(!1,!0)),onSetRef:ge[1]||(ge[1]=ce=>U(ce,0))},{default:$e(()=>[z.$slots["arrow-left"]?ht(z.$slots,"arrow-left",{key:0}):ne("",!0),z.$slots["arrow-left"]?ne("",!0):(P(),Ge(M(ex),{key:1}))]),_:3},8,["aria-label","disabled"])):ne("",!0),m("div",{class:Ze(["dp__month_year_wrap",{dp__year_disable_select:z.disableYearSelect}])},[(P(!0),V(Fe,null,ct(K.value,(ce,J)=>(P(),V(Fe,{key:ce.type},[m("button",{ref_for:!0,ref:ae=>U(ae,J+1),type:"button",class:"dp__btn dp__month_year_select",tabindex:"0","aria-label":ce.ariaLabel,onClick:ce.toggle,onKeydown:[on(bt(ce.toggle,["prevent"]),["enter"]),on(bt(ce.toggle,["prevent"]),["space"])]},[z.$slots[ce.type]?ht(z.$slots,ce.type,{key:0,text:ce.text,value:r[ce.type]}):ne("",!0),z.$slots[ce.type]?ne("",!0):(P(),V(Fe,{key:1},[fe(B(ce.text),1)],64))],40,t6e),Ce(jd,{name:M(d)(ce.showSelectionGrid),css:M(f)},{default:$e(()=>[ce.showSelectionGrid?(P(),Ge(Uv,{key:0,items:ce.items,"arrow-navigation":z.arrowNavigation,"hide-navigation":z.hideNavigation,"is-last":z.autoApply&&!M(c).keepActionRow,"skip-button-ref":!1,config:z.config,type:ce.type,"header-refs":[],"esc-close":z.escClose,"text-input":z.textInput,onSelected:ce.updateModelValue,onToggle:ce.toggle},Wr({"button-icon":$e(()=>[z.$slots["calendar-icon"]?ht(z.$slots,"calendar-icon",{key:0}):ne("",!0),z.$slots["calendar-icon"]?ne("",!0):(P(),Ge(M(Bm),{key:1}))]),_:2},[z.$slots[`${ce.type}-overlay-value`]?{name:"item",fn:$e(({item:ae})=>[ht(z.$slots,`${ce.type}-overlay-value`,{text:ae.text,value:ae.value})]),key:"0"}:void 0,z.$slots[`${ce.type}-overlay`]?{name:"overlay",fn:$e(()=>[ht(z.$slots,`${ce.type}-overlay`,zn(lr(R.value(ce.type))))]),key:"1"}:void 0,z.$slots[`${ce.type}-overlay-header`]?{name:"header",fn:$e(()=>[ht(z.$slots,`${ce.type}-overlay-header`,{toggle:ce.toggle})]),key:"2"}:void 0]),1032,["items","arrow-navigation","hide-navigation","is-last","config","type","esc-close","text-input","onSelected","onToggle"])):ne("",!0)]),_:2},1032,["name","css"])],64))),128))],2),M(w)(M(a),n.instance)&&z.vertical?(P(),Ge(wp,{key:1,"aria-label":(ue=M(o))==null?void 0:ue.prevMonth,disabled:M(v)(!1),onActivate:ge[2]||(ge[2]=ce=>M(g)(!1,!0))},{default:$e(()=>[z.$slots["arrow-up"]?ht(z.$slots,"arrow-up",{key:0}):ne("",!0),z.$slots["arrow-up"]?ne("",!0):(P(),Ge(M(ix),{key:1}))]),_:3},8,["aria-label","disabled"])):ne("",!0),M(C)(M(a),n.instance)?(P(),Ge(wp,{key:2,ref:"rightIcon",disabled:M(v)(!0),"aria-label":(ve=M(o))==null?void 0:ve.nextMonth,onActivate:ge[3]||(ge[3]=ce=>M(g)(!0,!0)),onSetRef:ge[4]||(ge[4]=ce=>U(ce,z.disableYearSelect?2:3))},{default:$e(()=>[z.$slots[z.vertical?"arrow-down":"arrow-right"]?ht(z.$slots,z.vertical?"arrow-down":"arrow-right",{key:0}):ne("",!0),z.$slots[z.vertical?"arrow-down":"arrow-right"]?ne("",!0):(P(),Ge(Xl(z.vertical?M(rx):M(tx)),{key:1}))]),_:3},8,["disabled","aria-label"])):ne("",!0)],64))])}}}),i6e=["aria-label"],r6e={class:"dp__calendar_header",role:"row"},s6e={key:0,class:"dp__calendar_header_item",role:"gridcell"},o6e=m("div",{class:"dp__calendar_header_separator"},null,-1),a6e=["aria-label"],l6e={key:0,role:"gridcell",class:"dp__calendar_item dp__week_num"},c6e={class:"dp__cell_inner"},u6e=["id","aria-selected","aria-disabled","aria-label","onClick","onKeydown","onMouseenter","onMouseleave"],d6e=Cn({compatConfig:{MODE:3},__name:"DpCalendar",props:{mappedDates:{type:Array,default:()=>[]},instance:{type:Number,default:0},month:{type:Number,default:0},year:{type:Number,default:0},...Ia},emits:["select-date","set-hover-date","handle-scroll","mount","handle-swipe","handle-space","tooltip-open","tooltip-close"],setup(n,{expose:t,emit:e}){const i=e,r=n,{buildMultiLevelMatrix:s}=Vu(),{defaultedTransitions:o,defaultedConfig:a,defaultedAriaLabels:l,defaultedMultiCalendars:c,defaultedWeekNumbers:u}=nr(r),d=Z(null),f=Z({bottom:"",left:"",transform:""}),h=Z([]),g=Z(null),v=Z(!0),_=Z(""),w=Z({startX:0,endX:0,startY:0,endY:0}),C=Z([]),k=Z({left:"50%"}),E=le(()=>r.calendar?r.calendar(r.mappedDates):r.mappedDates),A=le(()=>r.dayNames?Array.isArray(r.dayNames)?r.dayNames:r.dayNames(r.locale,+r.weekStart):$4e(r.formatLocale,r.locale,+r.weekStart));Jt(()=>{i("mount",{cmp:"calendar",refs:h}),a.value.noSwipe||g.value&&(g.value.addEventListener("touchstart",N,{passive:!1}),g.value.addEventListener("touchend",$,{passive:!1}),g.value.addEventListener("touchmove",U,{passive:!1})),r.monthChangeOnScroll&&g.value&&g.value.addEventListener("wheel",z,{passive:!1})});const x=ce=>ce?r.vertical?"vNext":"next":r.vertical?"vPrevious":"previous",p=(ce,J)=>{if(r.transitions){const ae=ls(Hl(ot(),r.month,r.year));_.value=os(ls(Hl(ot(),ce,J)),ae)?o.value[x(!0)]:o.value[x(!1)],v.value=!1,Zn(()=>{v.value=!0})}},D=le(()=>({[r.calendarClassName]:!!r.calendarClassName})),R=le(()=>ce=>{const J=F4e(ce);return{dp__marker_dot:J.type==="dot",dp__marker_line:J.type==="line"}}),S=le(()=>ce=>Qn(ce,d.value)),I=le(()=>({dp__calendar:!0,dp__calendar_next:c.value.count>0&&r.instance!==0})),F=le(()=>ce=>r.hideOffsetDates?ce.current:!0),H=async(ce,J,ae)=>{var xe,he;if(i("set-hover-date",ce),(he=(xe=ce.marker)==null?void 0:xe.tooltip)!=null&&he.length){const Ae=mr(h.value[J][ae]);if(Ae){const{width:We,height:Ee}=Ae.getBoundingClientRect();d.value=ce.value;let G={left:`${We/2}px`},Y=-50;if(await Zn(),C.value[0]){const{left:oe,width:Ue}=C.value[0].getBoundingClientRect();oe<0&&(G={left:"0"},Y=0,k.value.left=`${We/2}px`),window.innerWidth<oe+Ue&&(G={right:"0"},Y=0,k.value.left=`${Ue-We/2}px`)}f.value={bottom:`${Ee}px`,...G,transform:`translateX(${Y}%)`},i("tooltip-open",ce.marker)}}},q=ce=>{d.value&&(d.value=null,f.value=JSON.parse(JSON.stringify({bottom:"",left:"",transform:""})),i("tooltip-close",ce.marker))},N=ce=>{w.value.startX=ce.changedTouches[0].screenX,w.value.startY=ce.changedTouches[0].screenY},$=ce=>{w.value.endX=ce.changedTouches[0].screenX,w.value.endY=ce.changedTouches[0].screenY,re()},U=ce=>{r.vertical&&!r.inline&&ce.preventDefault()},re=()=>{const ce=r.vertical?"Y":"X";Math.abs(w.value[`start${ce}`]-w.value[`end${ce}`])>10&&i("handle-swipe",w.value[`start${ce}`]>w.value[`end${ce}`]?"right":"left")},K=(ce,J,ae)=>{ce&&(Array.isArray(h.value[J])?h.value[J][ae]=ce:h.value[J]=[ce]),r.arrowNavigation&&s(h.value,"calendar")},z=ce=>{r.monthChangeOnScroll&&(ce.preventDefault(),i("handle-scroll",ce))},ge=ce=>u.value.type==="local"?Y3e(ce.value,{weekStartsOn:+r.weekStart}):u.value.type==="iso"?j3e(ce.value):typeof u.value.type=="function"?u.value.type(ce.value):"",Q=ce=>{const J=ce[0];return u.value.hideOnOffsetDates?ce.some(ae=>ae.current)?ge(J):"":ge(J)},ue=(ce,J)=>{nu(ce,a.value),i("select-date",J)},ve=ce=>{nu(ce,a.value)};return t({triggerTransition:p}),(ce,J)=>{var ae;return P(),V("div",{class:Ze(I.value)},[m("div",{ref_key:"calendarWrapRef",ref:g,role:"grid",class:Ze(D.value),"aria-label":(ae=M(l))==null?void 0:ae.calendarWrap},[(P(),V(Fe,{key:0},[m("div",r6e,[ce.weekNumbers?(P(),V("div",s6e,B(ce.weekNumName),1)):ne("",!0),(P(!0),V(Fe,null,ct(A.value,(xe,he)=>(P(),V("div",{key:he,class:"dp__calendar_header_item",role:"gridcell"},[ce.$slots["calendar-header"]?ht(ce.$slots,"calendar-header",{key:0,day:xe,index:he}):ne("",!0),ce.$slots["calendar-header"]?ne("",!0):(P(),V(Fe,{key:1},[fe(B(xe),1)],64))]))),128))]),o6e,Ce(jd,{name:_.value,css:!!ce.transitions},{default:$e(()=>{var xe;return[v.value?(P(),V("div",{key:0,class:"dp__calendar",role:"rowgroup","aria-label":((xe=M(l))==null?void 0:xe.calendarDays)||void 0},[(P(!0),V(Fe,null,ct(E.value,(he,Ae)=>(P(),V("div",{key:Ae,class:"dp__calendar_row",role:"row"},[ce.weekNumbers?(P(),V("div",l6e,[m("div",c6e,B(Q(he.days)),1)])):ne("",!0),(P(!0),V(Fe,null,ct(he.days,(We,Ee)=>{var G,Y,oe;return P(),V("div",{id:We.value.toISOString().split("T")[0],ref_for:!0,ref:Ue=>K(Ue,Ae,Ee),key:Ee+Ae,role:"gridcell",class:"dp__calendar_item","aria-selected":We.classData.dp__active_date||We.classData.dp__range_start||We.classData.dp__range_start,"aria-disabled":We.classData.dp__cell_disabled||void 0,"aria-label":(Y=(G=M(l))==null?void 0:G.day)==null?void 0:Y.call(G,We),tabindex:"0",onClick:bt(Ue=>ue(Ue,We),["prevent"]),onKeydown:[on(Ue=>ce.$emit("select-date",We),["enter"]),on(Ue=>ce.$emit("handle-space",We),["space"])],onMouseenter:Ue=>H(We,Ae,Ee),onMouseleave:Ue=>q(We)},[m("div",{class:Ze(["dp__cell_inner",We.classData])},[ce.$slots.day&&F.value(We)?ht(ce.$slots,"day",{key:0,day:+We.text,date:We.value}):ne("",!0),ce.$slots.day?ne("",!0):(P(),V(Fe,{key:1},[fe(B(We.text),1)],64)),We.marker&&F.value(We)?(P(),V(Fe,{key:2},[ce.$slots.marker?ht(ce.$slots,"marker",{key:0,marker:We.marker,day:+We.text,date:We.value}):(P(),V("div",{key:1,class:Ze(R.value(We.marker)),style:Di(We.marker.color?{backgroundColor:We.marker.color}:{})},null,6))],64)):ne("",!0),S.value(We.value)?(P(),V("div",{key:3,ref_for:!0,ref_key:"activeTooltip",ref:C,class:"dp__marker_tooltip",style:Di(f.value)},[(oe=We.marker)!=null&&oe.tooltip?(P(),V("div",{key:0,class:"dp__tooltip_content",onClick:ve},[(P(!0),V(Fe,null,ct(We.marker.tooltip,(Ue,Oe)=>(P(),V("div",{key:Oe,class:"dp__tooltip_text"},[ce.$slots["marker-tooltip"]?ht(ce.$slots,"marker-tooltip",{key:0,tooltip:Ue,day:We.value}):ne("",!0),ce.$slots["marker-tooltip"]?ne("",!0):(P(),V(Fe,{key:1},[m("div",{class:"dp__tooltip_mark",style:Di(Ue.color?{backgroundColor:Ue.color}:{})},null,4),m("div",null,B(Ue.text),1)],64))]))),128)),m("div",{class:"dp__arrow_bottom_tp",style:Di(k.value)},null,4)])):ne("",!0)],4)):ne("",!0)],2)],40,u6e)}),128))]))),128))],8,a6e)):ne("",!0)]}),_:3},8,["name","css"])],64))],10,i6e)],2)}}}),v$=n=>Array.isArray(n),f6e=(n,t,e,i)=>{const r=Z([]),{modelValue:s,calendars:o,time:a}=Fv(n,t),{defaultedMultiCalendars:l,defaultedStartTime:c}=nr(n),{validateMonthYearInRange:u,isDisabled:d,isDateRangeAllowed:f,checkMinMaxRange:h}=lf(n),{updateTimeValues:g,getSetDateTime:v,setTime:_,assignStartTime:w,validateTime:C,disabledTimesConfig:k}=X9(n,a,s,i),E=le(()=>ie=>o.value[ie]?o.value[ie].month:0),A=le(()=>ie=>o.value[ie]?o.value[ie].year:0),x=(ie,_e,Je)=>{var ut,ft;o.value[ie]||(o.value[ie]={month:0,year:0}),o.value[ie].month=f$(_e)?(ut=o.value[ie])==null?void 0:ut.month:_e,o.value[ie].year=f$(Je)?(ft=o.value[ie])==null?void 0:ft.year:Je},p=()=>{n.autoApply&&t("select-date")};gt(s,(ie,_e)=>{JSON.stringify(ie)!==JSON.stringify(_e)&&S()}),Jt(()=>{n.shadow||(s.value||(z(),c.value&&w(c.value)),S(!0),n.focusStartDate&&n.startDate&&z())});const D=le(()=>{var ie;return(ie=n.flow)!=null&&ie.length&&!n.partialFlow?n.flowStep===n.flow.length:!0}),R=()=>{n.autoApply&&D.value&&t("auto-apply",n.partialFlow)},S=(ie=!1)=>{if(s.value)return Array.isArray(s.value)?(r.value=s.value,$(ie)):F(s.value,ie);if(l.value.count&&ie&&!n.startDate)return I(ot(),ie)},I=(ie,_e=!1)=>{if((!l.value.count||!l.value.static||_e)&&x(0,Ln(ie),pn(ie)),l.value.count&&(!l.value.solo||!s.value))for(let Je=1;Je<l.value.count;Je++){const ut=Ei(ot(),{month:E.value(Je-1),year:A.value(Je-1)}),ft=f9(ut,{months:1});o.value[Je]={month:Ln(ft),year:pn(ft)}}},F=(ie,_e)=>{I(ie),_("hours",pa(ie)),_("minutes",sl(ie)),_("seconds",fm(ie)),l.value.count&&_e&&K()},H=ie=>{if(l.value.count){if(l.value.solo)return 0;const _e=Ln(ie[0]),Je=Ln(ie[1]);return Math.abs(Je-_e)<l.value.count?0:1}return 1},q=(ie,_e)=>{ie[1]&&n.showLastInRange?I(ie[H(ie)],_e):I(ie[0],_e);const Je=(ut,ft)=>[ut(ie[0]),ie[1]?ut(ie[1]):a[ft][1]];_("hours",Je(pa,"hours")),_("minutes",Je(sl,"minutes")),_("seconds",Je(fm,"seconds"))},N=(ie,_e)=>{if((n.range||n.weekPicker)&&!n.multiDates)return q(ie,_e);if(n.multiDates&&_e){const Je=ie[ie.length-1];return F(Je,_e)}},$=ie=>{const _e=s.value;N(_e,ie),l.value.count&&l.value.solo&&K()},U=(ie,_e)=>{const Je=Ei(ot(),{month:E.value(_e),year:A.value(_e)}),ut=ie<0?ga(Je,1):hm(Je,1);u(Ln(ut),pn(ut),ie<0,n.preventMinMaxNavigation)&&(x(_e,Ln(ut),pn(ut)),t("update-month-year",{instance:_e,month:Ln(ut),year:pn(ut)}),l.value.count&&!l.value.solo&&re(_e),e())},re=ie=>{for(let _e=ie-1;_e>=0;_e--){const Je=hm(Ei(ot(),{month:E.value(_e+1),year:A.value(_e+1)}),1);x(_e,Ln(Je),pn(Je))}for(let _e=ie+1;_e<=l.value.count-1;_e++){const Je=ga(Ei(ot(),{month:E.value(_e-1),year:A.value(_e-1)}),1);x(_e,Ln(Je),pn(Je))}},K=()=>{if(Array.isArray(s.value)&&s.value.length===2){const ie=ot(ot(s.value[1]?s.value[1]:ga(s.value[0],1))),[_e,Je]=[Ln(s.value[0]),pn(s.value[0])],[ut,ft]=[Ln(s.value[1]),pn(s.value[1])];(_e!==ut||_e===ut&&Je!==ft)&&l.value.solo&&x(1,Ln(ie),pn(ie))}else s.value&&!Array.isArray(s.value)&&(x(0,Ln(s.value),pn(s.value)),I(ot()))},z=()=>{n.startDate&&(x(0,Ln(ot(n.startDate)),pn(ot(n.startDate))),l.value.count&&re(0))},ge=j4e((ie,_e)=>{n.monthChangeOnScroll&&U(n.monthChangeOnScroll!=="inverse"?-ie.deltaY:ie.deltaY,_e)},50),Q=(ie,_e,Je=!1)=>{n.monthChangeOnArrows&&n.vertical===Je&&ue(ie,_e)},ue=(ie,_e)=>{U(ie==="right"?-1:1,_e)},ve=ie=>n.markers.find(_e=>Qn(K4e(ie.value),va(ot(_e.date),n.timezone))),ce=(ie,_e)=>{switch(n.sixWeeks===!0?"append":n.sixWeeks){case"prepend":return[!0,!1];case"center":return[ie==0,!0];case"fair":return[ie==0||_e>ie,!0];case"append":return[!1,!1];default:return[!1,!1]}},J=(ie,_e,Je,ut)=>{if(n.sixWeeks&&ie.length<6){const ft=6-ie.length,Ot=(_e.getDay()+7-ut)%7,Qt=6-(Je.getDay()+7-ut)%7,[me,ee]=ce(Ot,Qt);for(let Te=1;Te<=ft;Te++)if(ee?!!(Te%2)==me:me){const rt=ie[0].days[0],Rt=ae(Fl(rt.value,-7),Ln(_e));ie.unshift({days:Rt})}else{const rt=ie[ie.length-1],Rt=rt.days[rt.days.length-1],Gn=ae(Fl(Rt.value,1),Ln(_e));ie.push({days:Gn})}}return ie},ae=(ie,_e)=>{const Je=ot(ie),ut=[];for(let ft=0;ft<7;ft++){const Ot=Fl(Je,ft),Qt=Ln(Ot)!==_e;ut.push({text:n.hideOffsetDates&&Qt?"":Ot.getDate(),value:Ot,current:!Qt,classData:{}})}return ut},xe=(ie,_e)=>{const Je=[],ut=new Date(_e,ie),ft=new Date(_e,ie+1,0),Ot=n.weekStart,Qt=Bd(ut,{weekStartsOn:Ot}),me=ee=>{const Te=ae(ee,ie);if(Je.push({days:Te}),!Je[Je.length-1].days.some(rt=>Qn(ls(rt.value),ls(ft)))){const rt=Fl(ee,7);me(rt)}};return me(Qt),J(Je,ut,ft,Ot)},he=ie=>(s.value=Dw(ot(ie.value),n.timezone,n.weekStart),t("date-update",ie.value),R()),Ae=ie=>{const _e=iu(ot(ie.value),a.hours,a.minutes,Le());t("date-update",_e),n.multiDates?ux(_e,s,n.multiDatesLimit):s.value=_e,i(),Zn().then(()=>{R()})},We=ie=>n.noDisabledRange?H9(r.value[0],ie).some(_e=>d(_e)):!1,Ee=()=>{r.value=s.value?s.value.slice():[],r.value.length===2&&!(n.fixedStart||n.fixedEnd)&&(r.value=[])},G=(ie,_e)=>{const Je=[ot(ie.value),Fl(ot(ie.value),+n.autoRange)];f(Je)?(_e&&Y(ie.value),r.value=Je):t("invalid-date",ie.value)},Y=ie=>{const _e=Ln(ot(ie)),Je=pn(ot(ie));if(x(0,_e,Je),l.value.count>0)for(let ut=1;ut<l.value.count;ut++){const ft=Y4e(Ei(ot(ie),{year:E.value(ut-1),month:A.value(ut-1)}));x(ut,ft.month,ft.year)}},oe=ie=>Array.isArray(s.value)&&s.value.length===2?n.fixedStart&&(os(ie,s.value[0])||Qn(ie,s.value[0]))?[s.value[0],ie]:n.fixedEnd&&(Br(ie,s.value[1])||Qn(ie,s.value[1]))?[ie,s.value[1]]:(t("invalid-fixed-range",ie),s.value):[],Ue=ie=>{if(We(ie.value)||!h(ie.value,s.value,n.fixedStart?0:1))return t("invalid-date",ie.value);r.value=oe(ot(ie.value))},Oe=(ie,_e)=>{if(Ee(),n.autoRange)return G(ie,_e);if(n.fixedStart||n.fixedEnd)return Ue(ie);r.value[0]?h(ot(ie.value),s.value)&&!We(ie.value)?Br(ot(ie.value),ot(r.value[0]))?(r.value.unshift(ot(ie.value)),t("range-end",r.value[0])):(r.value[1]=ot(ie.value),t("range-end",r.value[1])):(n.autoApply&&t("auto-apply-invalid",ie.value),t("invalid-date",ie.value)):(r.value[0]=ot(ie.value),t("range-start",r.value[0]))},Le=(ie=!0)=>n.enableSeconds?Array.isArray(a.seconds)?ie?a.seconds[0]:a.seconds[1]:a.seconds:0,Ye=ie=>{r.value[ie]=iu(r.value[ie],a.hours[ie],a.minutes[ie],Le(ie!==1))},te=()=>{var ie,_e;r.value[0]&&r.value[1]&&+((ie=r.value)==null?void 0:ie[0])>+((_e=r.value)==null?void 0:_e[1])&&(r.value.reverse(),t("range-start",r.value[0]),t("range-end",r.value[1]))},se=()=>{r.value.length&&(r.value[0]&&!r.value[1]?Ye(0):(Ye(0),Ye(1),i()),te(),s.value=r.value.slice(),Z0(r.value,t,n.autoApply,n.modelAuto))},pe=(ie,_e=!1)=>{if(d(ie.value)||!ie.current&&n.hideOffsetDates)return t("invalid-date",ie.value);if(n.weekPicker)return he(ie);if(!n.range)return Ae(ie);v$(a.hours)&&v$(a.minutes)&&!n.multiDates&&(Oe(ie,_e),se())},Re=(ie,_e)=>{var Je;x(ie,_e.month,_e.year),l.value.count&&!l.value.solo&&re(ie),t("update-month-year",{instance:ie,month:_e.month,year:_e.year}),e(l.value.solo?ie:void 0);const ut=(Je=n.flow)!=null&&Je.length?n.flow[n.flowStep]:void 0;!_e.fromNav&&(ut===za.month||ut===za.year)&&i()},Me=(ie,_e)=>{Q9({value:ie,modelValue:s,range:n.range,timezone:_e?void 0:n.timezone}),p(),n.multiCalendars&&Zn().then(()=>S(!0))},Ie=()=>{n.range?s.value&&Array.isArray(s.value)&&s.value[0]?s.value=Br(ot(),s.value[0])?[ot(),s.value[0]]:[s.value[0],ot()]:s.value=[ot()]:s.value=ot(),p()},Se=()=>{if(Array.isArray(s.value))if(n.multiDates){const ie=ye();s.value[s.value.length-1]=v(ie)}else s.value=s.value.map((ie,_e)=>ie&&v(ie,_e));else s.value=v(s.value);t("time-update")},ye=()=>Array.isArray(s.value)&&s.value.length?s.value[s.value.length-1]:null;return{calendars:o,modelValue:s,month:E,year:A,time:a,disabledTimesConfig:k,validateTime:C,getCalendarDays:xe,getMarker:ve,handleScroll:ge,handleSwipe:ue,handleArrow:Q,selectDate:pe,updateMonthYear:Re,presetDate:Me,selectCurrentDate:Ie,updateTime:(ie,_e=!0,Je=!1)=>{g(ie,_e,Je,Se)}}},h6e={key:0},m6e=Cn({__name:"DatePicker",props:{...Ia},emits:["tooltip-open","tooltip-close","mount","update:internal-model-value","update-flow-step","reset-flow","auto-apply","focus-menu","select-date","range-start","range-end","invalid-fixed-range","time-update","am-pm-change","time-picker-open","time-picker-close","recalculate-position","update-month-year","auto-apply-invalid","date-update","invalid-date"],setup(n,{expose:t,emit:e}){const i=e,r=n,{calendars:s,month:o,year:a,modelValue:l,time:c,disabledTimesConfig:u,validateTime:d,getCalendarDays:f,getMarker:h,handleArrow:g,handleScroll:v,handleSwipe:_,selectDate:w,updateMonthYear:C,presetDate:k,selectCurrentDate:E,updateTime:A}=f6e(r,i,K,z),x=ml(),{setHoverDate:p,getDayClassData:D,clearHoverDate:R}=pUe(l,r),{defaultedMultiCalendars:S}=nr(r),I=Z([]),F=Z([]),H=Z(null),q=oo(x,"calendar"),N=oo(x,"monthYear"),$=oo(x,"timePicker"),U=Q=>{r.shadow||i("mount",Q)};gt(s,()=>{r.shadow||setTimeout(()=>{i("recalculate-position")},0)},{deep:!0});const re=le(()=>Q=>f(o.value(Q),a.value(Q)).map(ue=>({...ue,days:ue.days.map(ve=>(ve.marker=h(ve),ve.classData=D(ve),ve))})));function K(Q){var ue;Q||Q===0?(ue=F.value[Q])==null||ue.triggerTransition(o.value(Q),a.value(Q)):F.value.forEach((ve,ce)=>ve.triggerTransition(o.value(ce),a.value(ce)))}function z(){i("update-flow-step")}const ge=(Q,ue=!1)=>{w(Q,ue),r.spaceConfirm&&i("select-date")};return t({clearHoverDate:R,presetDate:k,selectCurrentDate:E,toggleMonthPicker:(Q,ue,ve=0)=>{var ce;(ce=I.value[ve])==null||ce.toggleMonthPicker(Q,ue)},toggleYearPicker:(Q,ue,ve=0)=>{var ce;(ce=I.value[ve])==null||ce.toggleYearPicker(Q,ue)},toggleTimePicker:(Q,ue,ve)=>{var ce;(ce=H.value)==null||ce.toggleTimePicker(Q,ue,ve)},handleArrow:g,updateMonthYear:C,getSidebarProps:()=>({modelValue:l,month:o,year:a,time:c,updateTime:A,updateMonthYear:C,selectDate:w,presetDate:k})}),(Q,ue)=>(P(),V(Fe,null,[Ce(Q0,{"multi-calendars":M(S).count},{default:$e(({instance:ve,index:ce})=>[Q.disableMonthYearSelect?ne("",!0):(P(),Ge(n6e,An({key:0,ref:J=>{J&&(I.value[ce]=J)},months:M($9)(Q.formatLocale,Q.locale,Q.monthNameFormat),years:M(lx)(Q.yearRange,Q.reverseYears),month:M(o)(ve),year:M(a)(ve),instance:ve},Q.$props,{onMount:ue[0]||(ue[0]=J=>U(M(kd).header)),onResetFlow:ue[1]||(ue[1]=J=>Q.$emit("reset-flow")),onUpdateMonthYear:J=>M(C)(ve,J),onOverlayClosed:ue[2]||(ue[2]=J=>Q.$emit("focus-menu"))}),Wr({_:2},[ct(M(N),(J,ae)=>({name:J,fn:$e(xe=>[ht(Q.$slots,J,zn(lr(xe)))])}))]),1040,["months","years","month","year","instance","onUpdateMonthYear"])),Ce(d6e,An({ref:J=>{J&&(F.value[ce]=J)},"mapped-dates":re.value(ve),month:M(o)(ve),year:M(a)(ve),instance:ve},Q.$props,{onSelectDate:J=>M(w)(J,ve!==1),onHandleSpace:J=>ge(J,ve!==1),onSetHoverDate:ue[3]||(ue[3]=J=>M(p)(J)),onHandleScroll:J=>M(v)(J,ve),onHandleSwipe:J=>M(_)(J,ve),onMount:ue[4]||(ue[4]=J=>U(M(kd).calendar)),onResetFlow:ue[5]||(ue[5]=J=>Q.$emit("reset-flow")),onTooltipOpen:ue[6]||(ue[6]=J=>Q.$emit("tooltip-open",J)),onTooltipClose:ue[7]||(ue[7]=J=>Q.$emit("tooltip-close",J))}),Wr({_:2},[ct(M(q),(J,ae)=>({name:J,fn:$e(xe=>[ht(Q.$slots,J,zn(lr({...xe})))])}))]),1040,["mapped-dates","month","year","instance","onSelectDate","onHandleSpace","onHandleScroll","onHandleSwipe"])]),_:3},8,["multi-calendars"]),Q.enableTimePicker?(P(),V("div",h6e,[Q.$slots["time-picker"]?ht(Q.$slots,"time-picker",zn(An({key:0},{time:M(c),updateTime:M(A)}))):(P(),Ge(J9,An({key:1,ref_key:"timePickerRef",ref:H},Q.$props,{hours:M(c).hours,minutes:M(c).minutes,seconds:M(c).seconds,"internal-model-value":Q.internalModelValue,"disabled-times-config":M(u),"validate-time":M(d),onMount:ue[8]||(ue[8]=ve=>U(M(kd).timePicker)),"onUpdate:hours":ue[9]||(ue[9]=ve=>M(A)(ve)),"onUpdate:minutes":ue[10]||(ue[10]=ve=>M(A)(ve,!1)),"onUpdate:seconds":ue[11]||(ue[11]=ve=>M(A)(ve,!1,!0)),onResetFlow:ue[12]||(ue[12]=ve=>Q.$emit("reset-flow")),onOverlayClosed:ue[13]||(ue[13]=ve=>Q.$emit("time-picker-close")),onOverlayOpened:ue[14]||(ue[14]=ve=>Q.$emit("time-picker-open",ve)),onAmPmChange:ue[15]||(ue[15]=ve=>Q.$emit("am-pm-change",ve))}),Wr({_:2},[ct(M($),(ve,ce)=>({name:ve,fn:$e(J=>[ht(Q.$slots,ve,zn(lr(J)))])}))]),1040,["hours","minutes","seconds","internal-model-value","disabled-times-config","validate-time"]))])):ne("",!0)],64))}}),g6e=(n,t)=>{const e=Z(),{defaultedMultiCalendars:i,defaultedConfig:r,defaultedHighlight:s}=nr(n),{modelValue:o,year:a,month:l,calendars:c}=Fv(n,t),{isDisabled:u}=lf(n),{selectYear:d,groupedYears:f,showYearPicker:h,isDisabled:g,toggleYearPicker:v,handleYearSelect:_,handleYear:w}=Z9({modelValue:o,multiCalendars:i,highlight:s,calendars:c,month:l,year:a,props:n,emit:t}),C=(R,S)=>[R,S].map(I=>tu(I,"MMMM",{locale:n.formatLocale})).join("-"),k=le(()=>R=>o.value?Array.isArray(o.value)?o.value.some(S=>t$(R,S)):t$(o.value,R):!1),E=R=>{if(n.range){if(Array.isArray(o.value)){const S=Qn(R,o.value[0])||Qn(R,o.value[1]);return G0(o.value,e.value,R)&&!S}return!1}return!1},A=le(()=>R=>{const S=Ei(new Date,{year:a.value(R)});return HBe({start:jBe(S),end:WBe(S)}).map(I=>{const F=uv(I),H=YM(I),q=u(I),N=E(F),$=typeof s.value=="function"?s.value({quarter:KM(F),year:pn(F)}):!!s.value.quarters.find(U=>U.quarter===KM(F)&&U.year===pn(F));return{text:C(F,H),value:F,active:k.value(F),highlighted:$,disabled:q,isBetween:N}})}),x=R=>{ux(R,o,n.multiDatesLimit),t("auto-apply",!0)},p=R=>{const S=dx(o,R,t);Z0(S,t,n.autoApply,n.modelAuto)},D=R=>{o.value=R,t("auto-apply")};return{defaultedConfig:r,defaultedMultiCalendars:i,groupedYears:f,year:a,isDisabled:g,quarters:A,showYearPicker:h,modelValue:o,setHoverDate:R=>{e.value=R},selectYear:d,selectQuarter:(R,S,I)=>{if(!I)return c.value[S].month=Ln(YM(R)),n.multiDates?x(R):n.range?p(R):D(R)},toggleYearPicker:v,handleYearSelect:_,handleYear:w}},p6e={class:"dp--quarter-items"},v6e=["disabled","onClick","onMouseover"],b6e=Cn({compatConfig:{MODE:3},__name:"QuarterPicker",props:{...Ia},emits:["update:internal-model-value","reset-flow","overlay-closed","auto-apply","range-start","range-end"],setup(n,{expose:t,emit:e}){const i=e,r=n,s=ml(),o=oo(s,"yearMode"),{defaultedMultiCalendars:a,defaultedConfig:l,groupedYears:c,year:u,isDisabled:d,quarters:f,modelValue:h,showYearPicker:g,setHoverDate:v,selectQuarter:_,toggleYearPicker:w,handleYearSelect:C,handleYear:k}=g6e(r,i);return t({getSidebarProps:()=>({modelValue:h,year:u,selectQuarter:_,handleYearSelect:C,handleYear:k})}),(E,A)=>(P(),Ge(Q0,{"multi-calendars":M(a).count,stretch:""},{default:$e(({instance:x})=>[m("div",{class:"dp-quarter-picker-wrap",style:Di({minHeight:`${M(l).modeHeight}px`})},[m("div",null,[Ce(Y9,An(E.$props,{items:M(c)(x),instance:x,"show-year-picker":M(g)[x],year:M(u)(x),"is-disabled":p=>M(d)(x,p),onHandleYear:p=>M(k)(x,p),onYearSelect:p=>M(C)(p,x),onToggleYearPicker:p=>M(w)(x,p==null?void 0:p.flow,p==null?void 0:p.show)}),Wr({_:2},[ct(M(o),(p,D)=>({name:p,fn:$e(R=>[ht(E.$slots,p,zn(lr(R)))])}))]),1040,["items","instance","show-year-picker","year","is-disabled","onHandleYear","onYearSelect","onToggleYearPicker"])]),m("div",p6e,[(P(!0),V(Fe,null,ct(M(f)(x),(p,D)=>(P(),V("div",{key:D},[m("button",{type:"button",class:Ze(["dp--qr-btn",{"dp--qr-btn-active":p.active,"dp--qr-btn-between":p.isBetween,"dp--qr-btn-disabled":p.disabled,"dp--highlighted":p.highlighted}]),disabled:p.disabled,onClick:R=>M(_)(p.value,x,p.disabled),onMouseover:R=>M(v)(p.value)},[E.$slots.quarter?ht(E.$slots,"quarter",{key:0,value:p.value,text:p.text}):(P(),V(Fe,{key:1},[fe(B(p.text),1)],64))],42,v6e)]))),128))])],4)]),_:3},8,["multi-calendars"]))}}),w6e=["id"],y6e={key:0,class:"dp__sidebar_left"},_6e={key:1,class:"dp--preset-dates"},k6e=["onClick","onKeydown"],E6e={key:2,class:"dp__sidebar_right"},C6e={key:3,class:"dp__action_extra"},b$=Cn({compatConfig:{MODE:3},__name:"DatepickerMenu",props:{...Y0,shadow:{type:Boolean,default:!1},openOnTop:{type:Boolean,default:!1},internalModelValue:{type:[Date,Array],default:null},arrMapValues:{type:Object,default:()=>({})},noOverlayFocus:{type:Boolean,default:!1}},emits:["close-picker","select-date","auto-apply","time-update","flow-step","update-month-year","invalid-select","update:internal-model-value","recalculate-position","invalid-fixed-range","tooltip-open","tooltip-close","time-picker-open","time-picker-close","am-pm-change","range-start","range-end","auto-apply-invalid","date-update","invalid-date"],setup(n,{expose:t,emit:e}){const i=e,r=n,s=le(()=>{const{openOnTop:Ee,...G}=r;return{...G,flowStep:D.value,noOverlayFocus:r.noOverlayFocus}}),{setMenuFocused:o,setShiftKey:a,control:l}=K9(),c=ml(),{defaultedTextInput:u,defaultedInline:d,defaultedConfig:f}=nr(r),h=Z(null),g=Z(0),v=Z(null),_=Z(null),w=Z(!1),C=Z(null);Jt(()=>{if(!r.shadow){w.value=!0,k(),window.addEventListener("resize",k);const Ee=mr(v);if(Ee&&!u.value.enabled&&!d.value.enabled&&(o(!0),H()),Ee){const G=Y=>{f.value.allowPreventDefault&&Y.preventDefault(),nu(Y,f.value,!0)};Ee.addEventListener("pointerdown",G),Ee.addEventListener("mousedown",G)}}}),wo(()=>{window.removeEventListener("resize",k)});const k=()=>{const Ee=mr(_);Ee&&(g.value=Ee.getBoundingClientRect().width)},{arrowRight:E,arrowLeft:A,arrowDown:x,arrowUp:p}=Vu(),{flowStep:D,updateFlowStep:R,childMount:S,resetFlow:I}=vUe(r,i,C),F=le(()=>r.monthPicker?DUe:r.yearPicker?LUe:r.timePicker?XUe:r.quarterPicker?b6e:m6e),H=()=>{const Ee=mr(v);Ee&&Ee.focus({preventScroll:!0})},q=le(()=>{var Ee;return((Ee=C.value)==null?void 0:Ee.getSidebarProps())||{}}),N=()=>{r.openOnTop&&i("recalculate-position")},$=oo(c,"action"),U=le(()=>r.monthPicker||r.yearPicker?oo(c,"monthYear"):r.timePicker?oo(c,"timePicker"):oo(c,"shared")),re=le(()=>r.openOnTop?"dp__arrow_bottom":"dp__arrow_top"),K=le(()=>({dp__menu_disabled:r.disabled,dp__menu_readonly:r.readonly})),z=le(()=>({dp__menu:!0,dp__menu_index:!d.value.enabled,dp__relative:d.value.enabled,[r.menuClassName]:!!r.menuClassName})),ge=Ee=>{nu(Ee,f.value,!0)},Q=()=>{r.escClose&&i("close-picker")},ue=Ee=>{if(r.arrowNavigation){if(Ee==="up")return p();if(Ee==="down")return x();if(Ee==="left")return A();if(Ee==="right")return E()}else Ee==="left"||Ee==="up"?xe("handleArrow","left",0,Ee==="up"):xe("handleArrow","right",0,Ee==="down")},ve=Ee=>{a(Ee.shiftKey),!r.disableMonthYearSelect&&Ee.code==="Tab"&&Ee.target.classList.contains("dp__menu")&&l.value.shiftKeyInMenu&&(Ee.preventDefault(),nu(Ee,f.value,!0),i("close-picker"))},ce=()=>{H(),i("time-picker-close")},J=Ee=>{var G,Y,oe;(G=C.value)==null||G.toggleTimePicker(!1,!1),(Y=C.value)==null||Y.toggleMonthPicker(!1,!1,Ee),(oe=C.value)==null||oe.toggleYearPicker(!1,!1,Ee)},ae=(Ee,G=0)=>{var Y,oe,Ue;return Ee==="month"?(Y=C.value)==null?void 0:Y.toggleMonthPicker(!1,!0,G):Ee==="year"?(oe=C.value)==null?void 0:oe.toggleYearPicker(!1,!0,G):Ee==="time"?(Ue=C.value)==null?void 0:Ue.toggleTimePicker(!0,!1):J(G)},xe=(Ee,...G)=>{var Y,oe;(Y=C.value)!=null&&Y[Ee]&&((oe=C.value)==null||oe[Ee](...G))},he=()=>{xe("selectCurrentDate")},Ae=(Ee,G)=>{xe("presetDate",Ee,G)},We=()=>{xe("clearHoverDate")};return t({updateMonthYear:(Ee,G)=>{xe("updateMonthYear",Ee,G)},switchView:ae}),(Ee,G)=>{var Y;return P(),V("div",{id:Ee.uid?`dp-menu-${Ee.uid}`:void 0,ref_key:"dpMenuRef",ref:v,tabindex:"0",role:"dialog",class:Ze(z.value),onMouseleave:We,onClick:ge,onKeydown:[on(Q,["esc"]),G[18]||(G[18]=on(bt(oe=>ue("left"),["prevent"]),["left"])),G[19]||(G[19]=on(bt(oe=>ue("up"),["prevent"]),["up"])),G[20]||(G[20]=on(bt(oe=>ue("down"),["prevent"]),["down"])),G[21]||(G[21]=on(bt(oe=>ue("right"),["prevent"]),["right"])),ve]},[(Ee.disabled||Ee.readonly)&&M(d).enabled?(P(),V("div",{key:0,class:Ze(K.value)},null,2)):ne("",!0),!M(d).enabled&&!Ee.teleportCenter?(P(),V("div",{key:1,class:Ze(re.value)},null,2)):ne("",!0),m("div",{ref_key:"innerMenuRef",ref:_,class:Ze({dp__menu_content_wrapper:((Y=Ee.presetDates)==null?void 0:Y.length)||!!Ee.$slots["left-sidebar"]||!!Ee.$slots["right-sidebar"]}),style:Di({"--dp-menu-width":`${g.value}px`})},[Ee.$slots["left-sidebar"]?(P(),V("div",y6e,[ht(Ee.$slots,"left-sidebar",zn(lr(q.value)))])):ne("",!0),Ee.presetDates.length?(P(),V("div",_6e,[(P(!0),V(Fe,null,ct(Ee.presetDates,(oe,Ue)=>(P(),V(Fe,{key:Ue},[oe.slot?ht(Ee.$slots,oe.slot,{key:0,presetDate:Ae,label:oe.label,value:oe.value}):(P(),V("button",{key:1,type:"button",style:Di(oe.style||{}),class:"dp__btn dp--preset-range",onClick:bt(Oe=>Ae(oe.value,oe.noTz),["prevent"]),onKeydown:[on(bt(Oe=>Ae(oe.value,oe.noTz),["prevent"]),["enter"]),on(bt(Oe=>Ae(oe.value,oe.noTz),["prevent"]),["space"])]},B(oe.label),45,k6e))],64))),128))])):ne("",!0),m("div",{ref_key:"calendarWrapperRef",ref:h,class:"dp__instance_calendar",role:"document"},[(P(),Ge(Xl(F.value),An({ref_key:"dynCmpRef",ref:C},s.value,{"flow-step":M(D),onMount:M(S),onUpdateFlowStep:M(R),onResetFlow:M(I),onFocusMenu:H,onSelectDate:G[0]||(G[0]=oe=>Ee.$emit("select-date")),onDateUpdate:G[1]||(G[1]=oe=>Ee.$emit("date-update",oe)),onTooltipOpen:G[2]||(G[2]=oe=>Ee.$emit("tooltip-open",oe)),onTooltipClose:G[3]||(G[3]=oe=>Ee.$emit("tooltip-close",oe)),onAutoApply:G[4]||(G[4]=oe=>Ee.$emit("auto-apply",oe)),onRangeStart:G[5]||(G[5]=oe=>Ee.$emit("range-start",oe)),onRangeEnd:G[6]||(G[6]=oe=>Ee.$emit("range-end",oe)),onInvalidFixedRange:G[7]||(G[7]=oe=>Ee.$emit("invalid-fixed-range",oe)),onTimeUpdate:G[8]||(G[8]=oe=>Ee.$emit("time-update")),onAmPmChange:G[9]||(G[9]=oe=>Ee.$emit("am-pm-change",oe)),onTimePickerOpen:G[10]||(G[10]=oe=>Ee.$emit("time-picker-open",oe)),onTimePickerClose:ce,onRecalculatePosition:N,onUpdateMonthYear:G[11]||(G[11]=oe=>Ee.$emit("update-month-year",oe)),onAutoApplyInvalid:G[12]||(G[12]=oe=>Ee.$emit("auto-apply-invalid",oe)),onInvalidDate:G[13]||(G[13]=oe=>Ee.$emit("invalid-date",oe)),"onUpdate:internalModelValue":G[14]||(G[14]=oe=>Ee.$emit("update:internal-model-value",oe))}),Wr({_:2},[ct(U.value,(oe,Ue)=>({name:oe,fn:$e(Oe=>[ht(Ee.$slots,oe,zn(lr({...Oe})))])}))]),1040,["flow-step","onMount","onUpdateFlowStep","onResetFlow"]))],512),Ee.$slots["right-sidebar"]?(P(),V("div",E6e,[ht(Ee.$slots,"right-sidebar",zn(lr(q.value)))])):ne("",!0),Ee.$slots["action-extra"]?(P(),V("div",C6e,[Ee.$slots["action-extra"]?ht(Ee.$slots,"action-extra",{key:0,selectCurrentDate:he}):ne("",!0)])):ne("",!0)],6),!Ee.autoApply||M(f).keepActionRow?(P(),Ge(TUe,An({key:2,"menu-mount":w.value},s.value,{"calendar-width":g.value,onClosePicker:G[15]||(G[15]=oe=>Ee.$emit("close-picker")),onSelectDate:G[16]||(G[16]=oe=>Ee.$emit("select-date")),onInvalidSelect:G[17]||(G[17]=oe=>Ee.$emit("invalid-select")),onSelectNow:he}),Wr({_:2},[ct(M($),(oe,Ue)=>({name:oe,fn:$e(Oe=>[ht(Ee.$slots,oe,zn(lr({...Oe})))])}))]),1040,["menu-mount","calendar-width"])):ne("",!0)],42,w6e)}}}),T6e=typeof window<"u"?window:void 0,$E=()=>{},S6e=n=>yu()?(_u(n),!0):!1,A6e=(n,t,e,i)=>{if(!n)return $E;let r=$E;const s=gt(()=>M(n),a=>{r(),a&&(a.addEventListener(t,e,i),r=()=>{a.removeEventListener(t,e,i),r=$E})},{immediate:!0,flush:"post"}),o=()=>{s(),r()};return S6e(o),o},I6e=(n,t,e,i={})=>{const{window:r=T6e,event:s="pointerdown"}=i;return r?A6e(r,s,o=>{const a=mr(n),l=mr(t);!a||!l||a===o.target||o.composedPath().includes(a)||o.composedPath().includes(l)||e(o)},{passive:!0}):void 0},P6e=Cn({compatConfig:{MODE:3},__name:"VueDatePicker",props:{...Y0},emits:["update:model-value","update:model-timezone-value","text-submit","closed","cleared","open","focus","blur","internal-model-change","recalculate-position","flow-step","update-month-year","invalid-select","invalid-fixed-range","tooltip-open","tooltip-close","time-picker-open","time-picker-close","am-pm-change","range-start","range-end","date-update","invalid-date"],setup(n,{expose:t,emit:e}){const i=e,r=n,s=ml(),o=Z(!1),a=Oh(r,"modelValue"),l=Oh(r,"timezone"),c=Z(null),u=Z(null),d=Z(null),f=Z(!1),h=Z(null),g=Z(!1),v=Z(!1),{setMenuFocused:_,setShiftKey:w}=K9(),{clearArrowNav:C}=Vu(),{mapDatesArrToMap:k,validateDate:E,isValidTime:A}=lf(r),{defaultedTransitions:x,defaultedTextInput:p,defaultedInline:D,defaultedConfig:R}=nr(r),{menuTransition:S,showTransition:I}=Bv(x);Jt(()=>{ue(r.modelValue),Zn().then(()=>{if(!D.value.enabled){const me=K(h.value);me==null||me.addEventListener("scroll",Ee),window==null||window.addEventListener("resize",G)}}),D.value.enabled&&(o.value=!0),window==null||window.addEventListener("keyup",Y),window==null||window.addEventListener("keydown",oe)});const F=le(()=>k());wo(()=>{if(!D.value.enabled){const me=K(h.value);me==null||me.removeEventListener("scroll",Ee),window==null||window.removeEventListener("resize",G)}window==null||window.removeEventListener("keyup",Y),window==null||window.removeEventListener("keydown",oe)});const H=oo(s,"all",r.presetDates),q=oo(s,"input");gt([a,l],()=>{ue(a.value)},{deep:!0});const{openOnTop:N,menuStyle:$,xCorrect:U,setMenuPosition:re,getScrollableParent:K,shadowRender:z}=hUe({menuRef:c,menuRefInner:u,inputRef:d,pickerWrapperRef:h,inline:D,emit:i,props:r,slots:s}),{inputValue:ge,internalModelValue:Q,parseExternalModelValue:ue,emitModelValue:ve,formatInputValue:ce,checkBeforeEmit:J}=dUe(i,r,f),ae=le(()=>({dp__main:!0,dp__theme_dark:r.dark,dp__theme_light:!r.dark,dp__flex_display:D.value.enabled,dp__flex_display_with_input:D.value.input})),xe=le(()=>r.dark?"dp__theme_dark":"dp__theme_light"),he=le(()=>({to:typeof r.teleport=="boolean"?"body":r.teleport,disabled:!r.teleport||D.value.enabled})),Ae=le(()=>({class:"dp__outer_menu_wrap"})),We=le(()=>D.value.enabled&&(r.timePicker||r.monthPicker||r.yearPicker||r.quarterPicker)),Ee=()=>{o.value&&(R.value.closeOnScroll?Me():re())},G=()=>{o.value&&re()},Y=me=>{me.key==="Tab"&&!D.value.enabled&&!r.teleport&&R.value.tabOutClosesMenu&&(h.value.contains(document.activeElement)||Me()),v.value=me.shiftKey},oe=me=>{v.value=me.shiftKey},Ue=()=>{!r.disabled&&!r.readonly&&(z(b$,r),re(!1),o.value=!0,o.value&&i("open"),o.value||Re(),ue(r.modelValue))},Oe=()=>{var me;ge.value="",Re(),(me=d.value)==null||me.setParsedDate(null),i("update:model-value",null),i("update:model-timezone-value",null),i("cleared"),R.value.closeOnClearValue&&Me()},Le=()=>{const me=Q.value;return!me||!Array.isArray(me)&&E(me)?!0:Array.isArray(me)?r.multiDates||me.length===2&&E(me[0])&&E(me[1])?!0:r.partialRange&&!r.timePicker?E(me[0]):!1:!1},Ye=()=>{J()&&Le()?(ve(),Me()):i("invalid-select",Q.value)},te=me=>{se(),ve(),R.value.closeOnAutoApply&&!me&&Me()},se=()=>{d.value&&p.value.enabled&&d.value.setParsedDate(Q.value)},pe=(me=!1)=>{r.autoApply&&A(Q.value)&&Le()&&(r.range&&Array.isArray(Q.value)?(r.partialRange||Q.value.length===2)&&te(me):te(me))},Re=()=>{p.value.enabled||(Q.value=null)},Me=()=>{D.value.enabled||(o.value&&(o.value=!1,U.value=!1,_(!1),w(!1),C(),i("closed"),ge.value&&ue(a.value)),Re(),i("blur"))},Ie=(me,ee,Te=!1)=>{if(!me){Q.value=null;return}const rt=Array.isArray(me)?!me.some(Gn=>!E(Gn)):E(me),Rt=A(me);rt&&Rt&&(Q.value=me,ee&&(g.value=Te,Ye(),i("text-submit")))},Se=()=>{r.autoApply&&A(Q.value)&&ve(),se()},ye=()=>o.value?Me():Ue(),ie=me=>{Q.value=me},_e=()=>{p.value.enabled&&(f.value=!0,ce()),i("focus")},Je=()=>{if(p.value.enabled&&(f.value=!1,ue(r.modelValue),g.value)){const me=W4e(h.value,v.value);me==null||me.focus()}i("blur")},ut=me=>{u.value&&u.value.updateMonthYear(0,{month:d$(me.month),year:d$(me.year)})},ft=me=>{ue(me??r.modelValue)},Ot=(me,ee)=>{var Te;(Te=u.value)==null||Te.switchView(me,ee)},Qt=me=>R.value.onClickOutside?R.value.onClickOutside(me):Me();return I6e(c,d,()=>Qt(Le)),t({closeMenu:Me,selectDate:Ye,clearValue:Oe,openMenu:Ue,onScroll:Ee,formatInputValue:ce,updateInternalModelValue:ie,setMonthYear:ut,parseModel:ft,switchView:Ot,toggleMenu:ye}),(me,ee)=>(P(),V("div",{ref_key:"pickerWrapperRef",ref:h,class:Ze(ae.value),"data-datepicker-instance":""},[Ce(_Ue,An({ref_key:"inputRef",ref:d,"input-value":M(ge),"onUpdate:inputValue":ee[0]||(ee[0]=Te=>En(ge)?ge.value=Te:null),"is-menu-open":o.value},me.$props,{onClear:Oe,onOpen:Ue,onSetInputDate:Ie,onSetEmptyDate:M(ve),onSelectDate:Ye,onToggle:ye,onClose:Me,onFocus:_e,onBlur:Je,onRealBlur:ee[1]||(ee[1]=Te=>f.value=!1)}),Wr({_:2},[ct(M(q),(Te,rt)=>({name:Te,fn:$e(Rt=>[ht(me.$slots,Te,zn(lr(Rt)))])}))]),1040,["input-value","is-menu-open","onSetEmptyDate"]),Ce(h5,zn(lr(he.value)),{default:$e(()=>[Ce(jd,{name:M(S)(M(N)),css:M(I)&&!M(D).enabled},{default:$e(()=>[o.value?(P(),V("div",An({key:0,ref_key:"dpWrapMenuRef",ref:c},Ae.value,{class:{"dp--menu-wrapper":!M(D).enabled},style:M(D).enabled?void 0:M($)}),[Ce(b$,An({ref_key:"dpMenuRef",ref:u},me.$props,{"internal-model-value":M(Q),"onUpdate:internalModelValue":ee[2]||(ee[2]=Te=>En(Q)?Q.value=Te:null),class:{[xe.value]:!0,"dp--menu-wrapper":me.teleport},"open-on-top":M(N),"arr-map-values":F.value,"no-overlay-focus":We.value,onClosePicker:Me,onSelectDate:Ye,onAutoApply:pe,onTimeUpdate:Se,onFlowStep:ee[3]||(ee[3]=Te=>me.$emit("flow-step",Te)),onUpdateMonthYear:ee[4]||(ee[4]=Te=>me.$emit("update-month-year",Te)),onInvalidSelect:ee[5]||(ee[5]=Te=>me.$emit("invalid-select",M(Q))),onAutoApplyInvalid:ee[6]||(ee[6]=Te=>me.$emit("invalid-select",Te)),onInvalidFixedRange:ee[7]||(ee[7]=Te=>me.$emit("invalid-fixed-range",Te)),onRecalculatePosition:M(re),onTooltipOpen:ee[8]||(ee[8]=Te=>me.$emit("tooltip-open",Te)),onTooltipClose:ee[9]||(ee[9]=Te=>me.$emit("tooltip-close",Te)),onTimePickerOpen:ee[10]||(ee[10]=Te=>me.$emit("time-picker-open",Te)),onTimePickerClose:ee[11]||(ee[11]=Te=>me.$emit("time-picker-close",Te)),onAmPmChange:ee[12]||(ee[12]=Te=>me.$emit("am-pm-change",Te)),onRangeStart:ee[13]||(ee[13]=Te=>me.$emit("range-start",Te)),onRangeEnd:ee[14]||(ee[14]=Te=>me.$emit("range-end",Te)),onDateUpdate:ee[15]||(ee[15]=Te=>me.$emit("date-update",Te)),onInvalidDate:ee[16]||(ee[16]=Te=>me.$emit("invalid-date",Te))}),Wr({_:2},[ct(M(H),(Te,rt)=>({name:Te,fn:$e(Rt=>[ht(me.$slots,Te,zn(lr({...Rt})))])}))]),1040,["internal-model-value","class","open-on-top","arr-map-values","no-overlay-focus","onRecalculatePosition"])],16)):ne("",!0)]),_:3},8,["name","css"])]),_:3},16)],2))}}),J0=(()=>{const n=P6e;return n.install=t=>{t.component("Vue3DatePicker",n)},n})(),x6e=Object.freeze(Object.defineProperty({__proto__:null,default:J0},Symbol.toStringTag,{value:"Module"}));Object.entries(x6e).forEach(([n,t])=>{n!=="default"&&(J0[n]=t)});const O6e=["for"],R6e={key:1,class:"form-text text-muted"},V6e=["innerHTML"],w$={__name:"DateInput",props:{label:String,id:String,type:String,name:String,autocomplete:String,classes:{type:Array,default:[]},hasErrors:Boolean,errors:{type:Array,default:[]},value:Number,helpText:String},emits:["change"],setup(n,{emit:t}){const e=t,i=n,r=Z(i.value>0?new Date(i.value*1e3):null);function s(){e("change",{value:r.value?Math.floor(r.value.getTime()/1e3):null})}const o=a=>{const l=a.getDate(),c=a.getMonth()+1,u=a.getFullYear(),d=a.getHours(),f=a.getMinutes(),h=c.toString().padStart(2,"0"),g=l.toString().padStart(2,"0"),v=d.toString().padStart(2,"0"),_=f.toString().padStart(2,"0");return`${g}.${h}.${u} - ${v}:${_}`};return(a,l)=>(P(),V(Fe,null,[n.label?(P(),V("label",{key:0,for:n.id},B(n.label),9,O6e)):ne("",!0),Ce(M(J0),{id:n.id,modelValue:r.value,"onUpdate:modelValue":[l[0]||(l[0]=c=>r.value=c),s],name:n.name,format:o,locale:"de","cancel-text":"abbrechen","select-text":"auswählen"},null,8,["id","modelValue","name"]),n.helpText?(P(),V("div",R6e,[m("span",{innerHTML:n.helpText},null,8,V6e)])):ne("",!0),(P(!0),V(Fe,null,ct(n.errors,c=>(P(),V("span",{key:c.uid,class:"form-field-error text-danger"}))),128))],64))}},D6e={key:0},N6e={class:"mb-3"},L6e={class:"mb-3"},M6e={__name:"ZoomConfig",props:{recordId:{type:String,required:!0},config:{type:String,required:!0,default:"{}"}},emits:["change"],setup(n,{emit:t}){var l,c;const e=n,i=t,r=JSON.parse(e.config),s=Kt({meetingId:((l=r==null?void 0:r.credentials)==null?void 0:l.meetingId)??"",password:((c=r==null?void 0:r.credentials)==null?void 0:c.password)??""});function o(u){s.meetingId=u.value,i("change",{id:parseInt(e.recordId,10),type:1,credentials:{meetingId:s.meetingId,password:s.password}})}function a(u){s.password=u.value,i("change",{id:parseInt(e.recordId,10),type:1,credentials:{meetingId:s.meetingId,password:s.password}})}return(u,d)=>M(r)?(P(),V("div",D6e,[m("div",N6e,[Ce(yn,{label:u.$t("view.event.create.labels.videoConferenceConfig.zoom.meetingId"),value:s.meetingId,onChange:o},null,8,["label","value"])]),m("div",L6e,[Ce(yn,{label:u.$t("view.event.create.labels.videoConferenceConfig.zoom.password"),value:s.password,onChange:a},null,8,["label","value"])])])):ne("",!0)}},$6e={class:"input-group mb-3"},B6e=["for"],F6e=["id","name"],U6e=["value"],z6e={key:0,class:"form-text text-muted"},H6e={__name:"VideoConferenceSelect",props:{label:String,id:String,type:String,name:String,autocomplete:String,classes:{type:Array,default:[]},hasErrors:Boolean,errors:{type:Array,default:[]},value:String,helpText:String},emits:["change"],setup(n,{emit:t}){var c;const e=t,r=Z(n.value);function s(){const d=(l.value||[]).find(({id:f})=>r.value===f);e("change",{value:d})}const o=nn(),{organizer:a}=s4(o),l=Z(((c=o.getOrganizer)==null?void 0:c.zoomMeetings)??[]);return gt(a,u=>{u&&u.zoomMeetings?l.value=u.zoomMeetings:l.value=[]}),(u,d)=>(P(),V(Fe,null,[m("div",$6e,[n.label?(P(),V("label",{key:0,for:n.id,class:"input-group-text"},B(n.label),9,B6e)):ne("",!0),l.value?vn((P(),V("select",{key:1,id:n.id,"onUpdate:modelValue":d[0]||(d[0]=f=>r.value=f),name:n.name,class:Ze(["custom-select form-select",n.hasErrors?"is-invalid":null,...n.classes]),onChange:s},[d[1]||(d[1]=m("option",{value:"0",selected:"selected"},"---",-1)),(P(!0),V(Fe,null,ct(l.value,f=>(P(),V("option",{key:f.id,value:f.id},B(f.title),9,U6e))),128))],42,F6e)),[[ou,r.value]]):ne("",!0)]),n.helpText?(P(),V("div",z6e,B(n.helpText),1)):ne("",!0),(P(!0),V(Fe,null,ct(n.errors,f=>(P(),V("span",{key:f.uid,class:"form-field-error text-danger"},[fe(B(u.$t("error.formValidation."+f.$validator)),1),d[2]||(d[2]=m("br",null,null,-1))]))),128))],64))}},W6e=["id","name","value"],j6e=["for"],q6e={key:1,class:"form-text text-muted"},G6e=["innerHTML"],h_={__name:"RadioInput",props:{label:String,id:String,name:String,autocomplete:String,classes:{type:Array,default:[]},hasErrors:Boolean,errors:{type:Array,default:[]},value:[String,Number],helpText:String,items:{type:Array,default:()=>[]}},emits:["change"],setup(n,{emit:t}){const e=t,r=Z(n.value);function s(){e("change",{value:r.value})}return(o,a)=>(P(),V(Fe,null,[(P(!0),V(Fe,null,ct(n.items,l=>(P(),V("div",{key:l.value,class:"form-check"},[vn(m("input",{id:n.id+"-"+l.value,"onUpdate:modelValue":a[0]||(a[0]=c=>r.value=c),name:n.name,class:Ze(["form-check-input",n.hasErrors?"is-invalid":null,...n.classes]),type:"radio",value:l.value,onChange:s},null,42,W6e),[[M_,r.value]]),l.label?(P(),V("label",{key:0,class:"form-check-label",for:n.id+"-"+l.value},B(l.label),9,j6e)):ne("",!0),l.helpText?(P(),V("div",q6e,[m("span",{innerHTML:l.helpText},null,8,G6e)])):ne("",!0)]))),128)),(P(!0),V(Fe,null,ct(n.errors,l=>(P(),V("span",{key:l.uid,class:"form-field-error text-danger"},[fe(B(o.$t("error.formValidation."+l.$validator)),1),a[1]||(a[1]=m("br",null,null,-1))]))),128))],64))}},K6e={class:"bootstrap-styles-input"},Y6e={class:"form-label"},Q6e={class:"style-rows container"},Z6e={class:"col-6"},J6e={class:"input-group"},X6e={class:"input-group-merge flex-grow-1"},eze=["value","onChange"],tze=["label"],nze=["value"],ize=["value","onInput"],rze=["title","onClick"],sze={class:"col-4"},oze=["value","onInput"],aze={class:"col-2"},lze=["onClick"],cze={key:0,class:"invalid-feedback d-block"},uze={key:1,class:"form-text text-muted d-inline-block w-100"},dze={__name:"BootstrapStylesInput",props:{modelValue:{type:String,default:"{}"},label:{type:String,required:!0},helpText:{type:String,default:""},errors:{type:Array,default:()=>[]},hasErrors:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(n,{emit:t}){const e={Colors:[{name:"primary",label:"Primary Color"},{name:"secondary",label:"Secondary Color"},{name:"success",label:"Success Color"},{name:"info",label:"Info Color"},{name:"warning",label:"Warning Color"},{name:"danger",label:"Danger Color"},{name:"light",label:"Light Color"},{name:"dark",label:"Dark Color"}],Buttons:[{name:"btn-color",label:"Button Text Color"},{name:"btn-bg",label:"Button Background"},{name:"btn-border-color",label:"Button Border Color"},{name:"btn-hover-color",label:"Button Hover Text Color"},{name:"btn-hover-bg",label:"Button Hover Background"},{name:"btn-hover-border-color",label:"Button Hover Border Color"},{name:"btn-active-color",label:"Button Active Text Color"},{name:"btn-active-bg",label:"Button Active Background"}],Cards:[{name:"card-bg",label:"Card Background"},{name:"card-color",label:"Card Text Color"},{name:"card-border-color",label:"Card Border Color"},{name:"card-cap-bg",label:"Card Header Background"},{name:"card-cap-color",label:"Card Header Text Color"}],Forms:[{name:"input-bg",label:"Input Background"},{name:"input-color",label:"Input Text Color"},{name:"input-border-color",label:"Input Border Color"},{name:"input-focus-bg",label:"Input Focus Background"},{name:"input-focus-border-color",label:"Input Focus Border Color"}],Typography:[{name:"body-color",label:"Body Text Color"},{name:"body-bg",label:"Body Background"},{name:"heading-color",label:"Heading Color"},{name:"link-color",label:"Link Color"},{name:"link-hover-color",label:"Link Hover Color"}]},i=n,r=t,s=Z([]);Jt(()=>{try{const d=JSON.parse(i.modelValue||"{}");s.value=Object.entries(d).map(([f,h])=>{const g=f.replace("bs-",""),v=Object.values(e).some(_=>_.some(w=>w.name===g));return{variable:g,value:h,isCustom:!v}})}catch{s.value=[]}}),gt(s,()=>{const d=s.value.reduce((h,g)=>(g.variable&&g.value&&(h[`bs-${g.variable}`]=g.value),h),{}),f=JSON.stringify(d);r("update:modelValue",f),r("change",{value:f})},{deep:!0});function o(d){s.value[d].isCustom=!s.value[d].isCustom,s.value[d].isCustom||(s.value[d].variable="")}function a(){s.value.push({variable:"",value:"",isCustom:!1})}function l(d){s.value.splice(d,1)}function c(d,f){if(f==="custom"){s.value[d].isCustom=!0,s.value[d].variable="";return}s.value[d].variable=f}function u(d,f){s.value[d].value=f}return(d,f)=>(P(),V("div",K6e,[m("label",Y6e,B(n.label),1),m("div",Q6e,[(P(!0),V(Fe,null,ct(s.value,(h,g)=>(P(),V("div",{key:g,class:"row mb-2"},[m("div",Z6e,[m("div",J6e,[f[2]||(f[2]=m("span",{class:"input-group-text"},"--bs-",-1)),m("div",X6e,[h.isCustom?ne("",!0):(P(),V("select",{key:0,class:"form-select rounded-0 border-end-0",value:h.variable,onChange:v=>c(g,v.target.value)},[f[0]||(f[0]=m("option",{value:""},"Select variable",-1)),f[1]||(f[1]=m("option",{value:"custom"},"Custom variable...",-1)),(P(),V(Fe,null,ct(e,(v,_)=>m("optgroup",{key:_,label:_},[(P(!0),V(Fe,null,ct(v,w=>(P(),V("option",{key:w.name,value:w.name},B(w.label),9,nze))),128))],8,tze)),64))],40,eze)),h.isCustom?(P(),V("input",{key:1,type:"text",class:"form-control rounded-0 border-end-0",value:h.variable,placeholder:"variable-name",onInput:v=>c(g,v.target.value)},null,40,ize)):ne("",!0)]),m("button",{class:"btn btn-outline-secondary border border-start-0",type:"button",title:h.isCustom?"Switch to predefined variables":"Switch to custom input",onClick:v=>o(g)},[m("i",{class:Ze(h.isCustom?"bi-list":"bi-pencil")},null,2)],8,rze)])]),m("div",sze,[m("input",{type:"text",class:"form-control",value:h.value,placeholder:"value",onInput:v=>u(g,v.target.value)},null,40,oze)]),m("div",aze,[m("button",{type:"button",class:"btn btn-danger",onClick:v=>l(g)},[...f[3]||(f[3]=[m("i",{class:"bi bi-trash"},null,-1)])],8,lze)])]))),128))]),m("button",{type:"button",class:"btn btn-secondary mt-2",onClick:a},[f[4]||(f[4]=m("i",{class:"bi bi-plus-circle me-1"},null,-1)),fe(" "+B(d.$t("form.bootstrapStyles.addVariable")||"Add Variable"),1)]),n.hasErrors?(P(),V("div",cze,[(P(!0),V(Fe,null,ct(n.errors,h=>(P(),V("span",{key:h.$uid},B(h.$message),1))),128))])):ne("",!0),n.helpText?(P(),V("small",uze,B(n.helpText),1)):ne("",!0)]))}},fze=Yt(dze,[["__scopeId","data-v-de7e9b66"]]),hze={class:"logo-upload"},mze={key:0,class:"mb-3 d-flex"},gze=["src"],pze={class:"mb-3"},vze={for:"logoInput",class:"form-label"},bze={class:"form-text"},wze={key:0,class:"invalid-feedback"},yze={key:1,class:"spinner-border text-primary",role:"status"},_ze=400,kze=300,Eze=.6,Cze=500*1024,Tze={__name:"LogoUpload",props:{modelValue:{type:String,default:""},label:{type:String,default:"Logo auswählen"},hasErrors:{type:Boolean,default:!1},errors:{type:Array,default:()=>[]}},emits:["update:modelValue","change"],setup(n,{emit:t}){const e=t,i=Z(!1),r=a=>new Promise((l,c)=>{if(!["image/jpeg","image/png"].includes(a.type)){c(new Error("Nur JPEG und PNG Dateien sind erlaubt"));return}const u=new Image;u.src=URL.createObjectURL(a),u.onload=()=>{const d=document.createElement("canvas");let f=u.width,h=u.height;const g=Math.min(_ze/f,kze/h);g<1&&(f=Math.round(f*g),h=Math.round(h*g)),d.width=f,d.height=h,d.getContext("2d").drawImage(u,0,0,f,h),d.toBlob(_=>{if(_.size>Cze){c(new Error("Bild ist zu groß. Bitte verwenden Sie ein kleineres Bild."));return}l(_)},"image/jpeg",Eze),URL.revokeObjectURL(u.src)},u.onerror=d=>{URL.revokeObjectURL(u.src),c(new Error("Fehler beim Laden des Bildes"))}}),s=async a=>{const l=a.target.files[0];if(l){i.value=!0;try{const c=await r(l),u=await new Promise((d,f)=>{const h=new FileReader;h.onload=()=>d(h.result),h.onerror=f,h.readAsDataURL(c)});e("update:modelValue",u),e("change",{value:u}),ze("Logo wurde erfolgreich aktualisiert",{type:"success"}),a.target.value=""}catch(c){console.error("Upload error:",c),ze(c.message||"Fehler beim Hochladen des Logos",{type:"error"}),a.target.value=""}finally{i.value=!1}}},o=()=>{e("update:modelValue",""),e("change",{value:""}),ze("Logo wurde entfernt",{type:"success"})};return(a,l)=>(P(),V("div",hze,[n.modelValue?(P(),V("div",mze,[m("img",{src:n.modelValue,alt:"Current Logo",class:"preview-image"},null,8,gze),m("span",{class:"ms-3"},[m("button",{class:"btn btn-danger btn-sm mt-2",onClick:o},[...l[0]||(l[0]=[m("i",{class:"bi bi-trash"},null,-1)])])])])):ne("",!0),m("div",pze,[m("label",vze,B(n.label),1),m("input",{id:"logoInput",type:"file",class:Ze(["form-control",{"is-invalid":n.hasErrors}]),accept:"image/jpeg,image/png",onChange:s},null,34),m("div",bze,B(a.$t("view.event.create.labels.logoHelp")),1),n.hasErrors?(P(),V("div",wze,[(P(!0),V(Fe,null,ct(n.errors,c=>(P(),V(Fe,{key:c.$uid},[fe(B(c.$message),1)],64))),128))])):ne("",!0)]),i.value?(P(),V("div",yze,[...l[1]||(l[1]=[m("span",{class:"visually-hidden"},"Lädt...",-1)])])):ne("",!0)]))}},Sze=Yt(Tze,[["__scopeId","data-v-e0cb08ca"]]),Aze={class:"events-new"},Ize={class:"nav nav-tabs mb-4",role:"tablist"},Pze={class:"nav-item"},xze={id:"general-tab",class:"nav-link active","data-bs-toggle":"tab","data-bs-target":"#general",type:"button",role:"tab","aria-controls":"general","aria-selected":"true"},Oze={class:"nav-item"},Rze={id:"rules-tab",class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#rules",type:"button",role:"tab","aria-controls":"rules","aria-selected":"false"},Vze={class:"nav-item"},Dze={id:"styling-tab",class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#styling",type:"button",role:"tab","aria-controls":"styling","aria-selected":"false"},Nze={class:"tab-content"},Lze={id:"general",class:"tab-pane fade show active",role:"tabpanel","aria-labelledby":"general-tab"},Mze={class:"row"},$ze={class:"col-12 col-md-6"},Bze={class:"mb-3"},Fze={class:"col-12 col-md-6"},Uze={class:"mb-3"},zze={class:"mb-3"},Hze={class:"mb-3"},Wze={key:0,class:"mb-3"},jze={class:"mb-3"},qze={class:"mb-3"},Gze={class:"mb-3"},Kze={class:"mb-3 d-flex"},Yze={class:"ms-2"},Qze={class:"card"},Zze={class:"card-body"},Jze={class:"mb-3"},Xze={id:"rules",class:"tab-pane fade",role:"tabpanel","aria-labelledby":"rules-tab"},e8e={class:"text-muted"},t8e={class:"mb-3 d-flex mt-4"},n8e={class:"mb-3 d-flex mt-4"},i8e={id:"styling",class:"tab-pane fade",role:"tabpanel","aria-labelledby":"styling-tab"},r8e={class:"mb-3"},s8e={class:"mb-3"},o8e={class:"d-flex gap-2 mt-5 mb-3"},a8e={type:"submit",class:"btn btn-primary me-2"},l8e={class:"align-middle"},c8e={class:"align-middle"},u8e={__name:"EventForm",props:{prefillData:{type:Object,required:!1,default:null}},emits:["submit"],setup(n,{emit:t}){var v,_,w,C,k,E,A,x,p,D,R,S,I,F,H,q,N;const e=Z(null);Jt(()=>{if(e.value){const $=new k0(e.value,{title:Xe("view.event.create.labels.magicLink.popover.title"),content:Xe("view.event.create.labels.magicLink.popover.description"),trigger:"click focus",placement:"top",html:!0}),U=re=>{var z;const K=re.target;!e.value.contains(K)&&!((z=document.querySelector(".popover"))!=null&&z.contains(K))&&$.hide()};document.addEventListener("click",U),wo(()=>{document.removeEventListener("click",U),$.dispose()})}});const i=t,r=n,s=ha(null),o=nn(),a=[{label:Xe("view.event.create.labels.multivoteRadio1Label"),helpText:Xe("view.event.create.labels.multivoteRadio1Help"),value:"1"},{label:Xe("view.event.create.labels.multivoteRadio2Label"),helpText:Xe("view.event.create.labels.multivoteRadio2Help"),value:"2"}],l=Kt({title:((v=r.prefillData)==null?void 0:v.title)??"",slug:((_=r.prefillData)==null?void 0:_.slug)??"",description:((w=r.prefillData)==null?void 0:w.description)??"",styles:((C=r.prefillData)==null?void 0:C.styles)??"",logo:((k=r.prefillData)==null?void 0:k.logo)??"",scheduledDatetime:((E=r.prefillData)==null?void 0:E.scheduledDatetime)??Math.floor(Date.now()/1e3),lobbyOpen:((A=r.prefillData)==null?void 0:A.lobbyOpen)??!1,active:((x=r.prefillData)==null?void 0:x.active)??!1,orgnaizerId:((p=o.user)==null?void 0:p.id)??0,multivoteType:((D=r.prefillData)==null?void 0:D.multivoteType)??1,videoConferenceConfig:((R=r.prefillData)==null?void 0:R.videoConferenceConfig)??"{}",videoConference:((S=r.prefillData)==null?void 0:S.videoConference)??null,async:((I=r.prefillData)==null?void 0:I.async)??!1,allowMagicLink:((F=r.prefillData)==null?void 0:F.allowMagicLink)??!1,publicVoteVisible:((H=r.prefillData)==null?void 0:H.publicVoteVisible)??!0,endDatetime:((q=r.prefillData)==null?void 0:q.endDatetime)??Math.floor(Date.now()/1e3),publicnameReadonly:((N=r.prefillData)==null?void 0:N.publicnameReadonly)??!1}),c=le(()=>({title:{required:Bt},slug:{required:Bt},description:{required:Bt},styles:{},logo:{},scheduledDatetime:{required:Bt},endDatetime:{requiredIf:by(l.async)},lobbyOpen:{required:Bt},active:{required:Bt},async:{required:Bt},allowMagicLink:{required:Bt},publicVoteVisible:{required:Bt},orgnaizerId:{required:Bt},multivoteType:{required:Bt}})),u=us(c,l);function d(){var $;switch(($=l.videoConference)==null?void 0:$.__typename){case"ZoomMeeting":s.value=M6e;break;default:s.value=null}}function f({value:$}){var re;l.videoConference=$;let U;try{U=JSON.parse(l.videoConferenceConfig||"{}")}catch(K){console.warn("Failed to parse videoConferenceConfig in EventForm:",K),U={}}U&&(U.id=(re=l.videoConference)==null?void 0:re.id),l.videoConferenceConfig=JSON.stringify(U),d()}function h($){l.videoConferenceConfig=JSON.stringify($)}async function g($="save"){if(!await u.value.$validate()){Mt(new Pr);return}!l.async&&l.endDatetime&&delete l.endDatetime,i("submit",{formData:l,action:$})}return gt(l,$=>{$.videoConference||(l.videoConferenceConfig="{}")}),d(),($,U)=>{var re,K,z,ge,Q,ue,ve,ce,J,ae,xe,he,Ae,We,Ee,G,Y,oe,Ue,Oe,Le,Ye,te,se,pe,Re,Me,Ie,Se,ye,ie,_e,Je,ut,ft,Ot,Qt,me,ee,Te,rt,Rt,Gn,Kn,Xt;return P(),V("div",Aze,[m("form",{onSubmit:U[23]||(U[23]=bt(yt=>g("save"),["prevent"]))},[m("ul",Ize,[m("li",Pze,[m("button",xze,B($.$t("view.event.create.tabs.general")),1)]),m("li",Oze,[m("button",Rze,B($.$t("view.event.create.tabs.rules")),1)]),m("li",Vze,[m("button",Dze,B($.$t("view.event.create.tabs.styling")),1)])]),m("div",Nze,[m("div",Lze,[m("div",Mze,[m("div",$ze,[m("div",Bze,[Ce(yn,{label:$.$t("view.event.create.labels.title"),errors:(re=M(u).title)==null?void 0:re.$errors,"has-errors":((z=(K=M(u).title)==null?void 0:K.$errors)==null?void 0:z.length)>0,value:l.title,onChange:U[0]||(U[0]=({value:yt})=>{l.title=yt})},null,8,["label","errors","has-errors","value"])])]),m("div",Fze,[m("div",Uze,[Ce(xBe,{label:$.$t("view.event.create.labels.slug"),errors:(ge=M(u).slug)==null?void 0:ge.$errors,"has-errors":((ue=(Q=M(u).slug)==null?void 0:Q.$errors)==null?void 0:ue.length)>0,value:l.slug,"base-value":l.title,"help-text":$.$t("view.event.create.labels.slugHelp"),onChange:U[1]||(U[1]=({value:yt})=>{l.slug=yt})},null,8,["label","errors","has-errors","value","base-value","help-text"])])])]),m("div",zze,[Ce(jP,{rows:3,label:$.$t("view.event.create.labels.description"),errors:(ve=M(u).description)==null?void 0:ve.$errors,"has-errors":((J=(ce=M(u).description)==null?void 0:ce.$errors)==null?void 0:J.length)>0,value:l.description,"help-text":$.$t("view.event.create.labels.descriptionHelp"),onChange:U[2]||(U[2]=({value:yt})=>{l.description=yt})},null,8,["label","errors","has-errors","value","help-text"])]),m("div",Hze,[Ce(w$,{label:$.$t("view.event.create.labels.scheduledDatetime"),errors:(ae=M(u).scheduledDatetime)==null?void 0:ae.$errors,"has-errors":((he=(xe=M(u).scheduledDatetime)==null?void 0:xe.$errors)==null?void 0:he.length)>0,value:l.scheduledDatetime,onChange:U[3]||(U[3]=({value:yt})=>{l.scheduledDatetime=yt})},null,8,["label","errors","has-errors","value"])]),l.async?(P(),V("div",Wze,[Ce(w$,{label:$.$t("view.event.create.labels.endDatetime"),errors:(Ae=M(u).endDatetime)==null?void 0:Ae.$errors,"has-errors":((Ee=(We=M(u).endDatetime)==null?void 0:We.$errors)==null?void 0:Ee.length)>0,value:l.endDatetime,onChange:U[4]||(U[4]=({value:yt})=>l.endDatetime=yt)},null,8,["label","errors","has-errors","value"])])):ne("",!0),m("div",jze,[Ce(Sr,{checked:l.lobbyOpen,"onUpdate:checked":U[5]||(U[5]=yt=>l.lobbyOpen=yt),label:$.$t("view.event.create.labels.lobbyOpen"),errors:(G=M(u).lobbyOpen)==null?void 0:G.$errors,"has-errors":((oe=(Y=M(u).lobbyOpen)==null?void 0:Y.$errors)==null?void 0:oe.length)>0,onUpdate:U[6]||(U[6]=({value:yt})=>{l.lobbyOpen=yt})},null,8,["checked","label","errors","has-errors"])]),m("div",qze,[Ce(Sr,{checked:l.active,"onUpdate:checked":U[7]||(U[7]=yt=>l.active=yt),label:$.$t("view.event.create.labels.active"),errors:(Ue=M(u).active)==null?void 0:Ue.$errors,"has-errors":((Le=(Oe=M(u).lobbyOpen)==null?void 0:Oe.active)==null?void 0:Le.length)>0,onUpdate:U[8]||(U[8]=({value:yt})=>{l.active=yt})},null,8,["checked","label","errors","has-errors"])]),m("div",Gze,[Ce(Sr,{checked:l.async,"onUpdate:checked":U[9]||(U[9]=yt=>l.async=yt),label:$.$t("view.event.create.labels.async"),errors:(Ye=M(u).async)==null?void 0:Ye.$errors,"has-errors":((se=(te=M(u).async)==null?void 0:te.$errors)==null?void 0:se.length)>0,onUpdate:U[10]||(U[10]=({value:yt})=>{l.async=yt})},null,8,["checked","label","errors","has-errors"])]),m("div",Kze,[Ce(Sr,{checked:l.allowMagicLink,"onUpdate:checked":U[11]||(U[11]=yt=>l.allowMagicLink=yt),label:$.$t("view.event.create.labels.allowMagicLink"),errors:(pe=M(u).allowMagicLink)==null?void 0:pe.$errors,"has-errors":((Me=(Re=M(u).allowMagicLink)==null?void 0:Re.$errors)==null?void 0:Me.length)>0,onUpdate:U[12]||(U[12]=({value:yt})=>{l.allowMagicLink=yt})},null,8,["checked","label","errors","has-errors"]),m("div",Yze,[m("i",{ref_key:"popoverTrigger",ref:e,class:"bi bi-question-circle"},null,512)])]),m("div",Qze,[m("div",Zze,[m("div",Jze,[Ce(H6e,{label:$.$t("view.event.create.labels.videoConferenceSelect"),errors:(Ie=M(u).videoConference)==null?void 0:Ie.$errors,"has-errors":((ye=(Se=M(u).videoConference)==null?void 0:Se.$errors)==null?void 0:ye.length)>0,value:(ie=l.videoConference)==null?void 0:ie.id,onChange:f},null,8,["label","errors","has-errors","value"])]),s.value&&((_e=l.videoConference)!=null&&_e.id)?(P(),Ge(Xl(s.value),{key:0,"record-id":(Je=l.videoConference)==null?void 0:Je.id,config:l==null?void 0:l.videoConferenceConfig,onChange:h},null,40,["record-id","config"])):ne("",!0)])])]),m("div",Xze,[m("h3",null,B($.$t("view.event.create.labels.multivoteTypeTitle")),1),m("p",e8e,B($.$t("view.event.create.labels.multivoteTypeInfo")),1),Ce(h_,{items:a,value:l.multivoteType.toString(),onChange:U[13]||(U[13]=({value:yt})=>{l.multivoteType=parseInt(yt,10)})},null,8,["value"]),m("div",t8e,[Ce(Sr,{checked:l.publicVoteVisible,"onUpdate:checked":U[14]||(U[14]=yt=>l.publicVoteVisible=yt),label:$.$t("view.event.create.labels.publicVoteVisible"),errors:(ut=M(u).publicVoteVisible)==null?void 0:ut.$errors,"has-errors":((Ot=(ft=M(u).publicVoteVisible)==null?void 0:ft.$errors)==null?void 0:Ot.length)>0,onUpdate:U[15]||(U[15]=({value:yt})=>{l.publicVoteVisible=yt})},null,8,["checked","label","errors","has-errors"])]),m("div",n8e,[Ce(Sr,{checked:l.publicnameReadonly,"onUpdate:checked":U[16]||(U[16]=yt=>l.publicnameReadonly=yt),label:$.$t("view.event.create.labels.publicnameReadonly"),errors:(Qt=M(u).publicnameReadonly)==null?void 0:Qt.$errors,"has-errors":((ee=(me=M(u).publicnameReadonly)==null?void 0:me.$errors)==null?void 0:ee.length)>0,onUpdate:U[17]||(U[17]=({value:yt})=>{l.publicnameReadonly=yt})},null,8,["checked","label","errors","has-errors"])])]),m("div",i8e,[m("div",r8e,[Ce(Sze,{modelValue:l.logo,"onUpdate:modelValue":U[18]||(U[18]=yt=>l.logo=yt),label:$.$t("view.event.create.labels.logo"),errors:(Te=M(u).logo)==null?void 0:Te.$errors,"has-errors":((Rt=(rt=M(u).logo)==null?void 0:rt.$errors)==null?void 0:Rt.length)>0,onChange:U[19]||(U[19]=({value:yt})=>{l.logo=yt})},null,8,["modelValue","label","errors","has-errors"])]),m("div",s8e,[Ce(fze,{modelValue:l.styles,"onUpdate:modelValue":U[20]||(U[20]=yt=>l.styles=yt),label:$.$t("view.event.create.labels.styles"),errors:(Gn=M(u).styles)==null?void 0:Gn.$errors,"has-errors":((Xt=(Kn=M(u).styles)==null?void 0:Kn.$errors)==null?void 0:Xt.length)>0,"help-text":$.$t("view.event.create.labels.stylesHelp"),onChange:U[21]||(U[21]=({value:yt})=>{l.styles=yt})},null,8,["modelValue","label","errors","has-errors","help-text"])])])]),m("div",o8e,[m("button",a8e,[U[24]||(U[24]=m("i",{class:"bi-play bi--2xl align-middle"},null,-1)),m("span",l8e,B($.$t("view.event.create.labels.submit")),1)]),m("button",{type:"button",class:"btn btn-secondary",onClick:U[22]||(U[22]=yt=>g("save_and_continue"))},[U[25]||(U[25]=m("i",{class:"bi-pencil bi--2xl align-middle"},null,-1)),m("span",c8e,B($.$t("view.event.create.labels.submitAndContinue")),1)])])],32)])}}},eW=Yt(u8e,[["__scopeId","data-v-14aa79f6"]]),d8e=mt`
  mutation CreateEvent($input: CreateEventInput!) {
    createEvent(input: $input) {
      id
      createDatetime
      title
      slug
      description
      styles
      logo
      scheduledDatetime
      lobbyOpen
      active
      multivoteType
      videoConferenceConfig
      async
      allowMagicLink
      publicVoteVisible
      endDatetime
      publicnameReadonly
    }
  }
`,f8e={class:"align-middle"},h8e={__name:"EventNew",setup(n){const t=jo([mi,pr,Ir,_o,ko]),e=nn(),i=Li();async function r({formData:s,action:o}){var a,l,c;try{const{mutate:u}=In(d8e,{variables:{input:{organizerId:(a=e.getOrganizer)==null?void 0:a.id,title:s.title,slug:s.slug,description:s.description,styles:s.styles,logo:s.logo,scheduledDatetime:s.scheduledDatetime,lobbyOpen:s.lobbyOpen,active:s.active,multivoteType:s.multivoteType,videoConferenceConfig:s.videoConferenceConfig,async:s.async,allowMagicLink:s.allowMagicLink,publicVoteVisible:s.publicVoteVisible,endDatetime:s.endDatetime,publicnameReadonly:s.publicnameReadonly}}}),d=await u(),f=(c=(l=d==null?void 0:d.data)==null?void 0:l.createEvent)==null?void 0:c.id;e.queryOrganizer(),o==="save_and_continue"&&f?await i.push({name:aI,params:{id:f}}):await i.push({name:pr}),ze(Xe("success.organizer.events.createdSuccessfully"),{type:"success"})}catch(u){console.error("Error creating event:",u),ze(Xe("error.general"),{type:"error"})}}return(s,o)=>{const a=si("router-link");return P(),Ge(Ki,{"meta-title":s.$t("navigation.views.organizerEventsNew")},{title:$e(()=>[fe(B(s.$t("navigation.views.organizerEventsNew"))+" ",1),Ce(a,{to:{name:M(pr)},class:"btn btn-secondary mb-3 mt-2 float-end d-none d-md-inline-block"},{default:$e(()=>[o[0]||(o[0]=m("i",{class:"bi-arrow-left bi--1xl me-1"},null,-1)),m("span",f8e,B(s.$t("navigation.backToEvents")),1)]),_:1},8,["to"])]),header:$e(()=>[Ce(qo,{routes:M(t)},null,8,["routes"])]),content:$e(()=>[Ce(eW,{"prefill-data":null,onSubmit:r})]),_:1},8,["meta-title"])}}},m8e=Yt(h8e,[["__scopeId","data-v-df141362"]]),Yo=mt`
  query event($id: ID!, $organizerId: ID!) {
    event(id: $id, organizerId: $organizerId) {
      id
      createDatetime
      modifiedDatetime
      title
      slug
      description
      styles
      logo
      scheduledDatetime
      lobbyOpen
      active
      multivoteType
      videoConferenceConfig
      async
      allowMagicLink
      publicVoteVisible
      finished
      endDatetime
      publicnameReadonly
    }
  }
`,g8e=mt`
  mutation UpdateEvent($input: UpdateEventInput!) {
    updateEvent(input: $input) {
      id
      title
      slug
      description
      styles
      logo
      scheduledDatetime
      lobbyOpen
      active
      multivoteType
      videoConferenceConfig
      async
      allowMagicLink
      publicVoteVisible
      endDatetime
      publicnameReadonly
    }
  }
`,p8e={key:0},v8e={class:"align-middle"},b8e={__name:"EventEdit",setup(n){var d;const t=nn(),e=Li(),r=Ui().params.id,s=Z(!1),o=Z(null),a=jo([mi,pr,Ir,_o,ko]),l=Kt({title:"",slug:"",description:"",styles:"",logo:"",scheduledDatetime:Math.floor(Date.now()/1e3),lobbyOpen:!1,allowMagicLink:!1,publicVoteVisible:!1,active:!1,orgnaizerId:((d=t.user)==null?void 0:d.id)??0,multivoteType:1,videoConferenceConfig:"{}",videoConference:null,readOnlyUsername:!1}),c=ln(Yo,{id:r,organizerId:t.user.id},{fetchPolicy:"no-cache"});c.onResult(({data:f})=>{var v,_,w,C,k,E,A,x,p,D,R,S,I,F,H;if((f==null?void 0:f.event)===null){Mt(new cn),e.push({name:pr});return}o.value=(f==null?void 0:f.event)??null,l.title=((v=o.value)==null?void 0:v.title)??"",l.slug=((_=o.value)==null?void 0:_.slug)??"",l.description=((w=o.value)==null?void 0:w.description)??"",l.styles=((C=o.value)==null?void 0:C.styles)??"",l.logo=((k=o.value)==null?void 0:k.logo)??"",l.scheduledDatetime=((E=o.value)==null?void 0:E.scheduledDatetime)??0,l.lobbyOpen=((A=o.value)==null?void 0:A.lobbyOpen)??!1,l.active=((x=o.value)==null?void 0:x.active)??!1,l.multivoteType=((p=o.value)==null?void 0:p.multivoteType)??1,l.async=((D=o.value)==null?void 0:D.async)??!1,l.allowMagicLink=((R=o.value)==null?void 0:R.allowMagicLink)??!1,l.publicVoteVisible=((S=o.value)==null?void 0:S.publicVoteVisible)??!0,l.endDatetime=((I=o.value)==null?void 0:I.endDatetime)??0,l.publicnameReadonly=((F=o.value)==null?void 0:F.publicnameReadonly)??!1;let h;try{h=JSON.parse(((H=o.value)==null?void 0:H.videoConferenceConfig)||"{}")}catch(q){console.warn("Failed to parse videoConferenceConfig:",q),h={}}if(!h||!h.id){s.value=!0;return}ln(kU,{id:h.id},{fetchPolicy:"no-cache"}).onResult(({data:q})=>{var N;l.videoConference=q.zoomMeeting??null,l.videoConferenceConfig=((N=o.value)==null?void 0:N.videoConferenceConfig)??"{}",s.value=!0})});async function u({formData:f,action:h}){var v;const{mutate:g}=In(g8e,{variables:{input:{id:(v=o.value)==null?void 0:v.id,title:f.title,slug:f.slug,description:f.description,styles:f.styles,logo:f.logo,scheduledDatetime:f.scheduledDatetime,lobbyOpen:f.lobbyOpen,active:f.active,multivoteType:f.multivoteType,videoConferenceConfig:f.videoConferenceConfig,async:f.async,allowMagicLink:f.allowMagicLink,publicVoteVisible:f.publicVoteVisible,endDatetime:f.endDatetime,publicnameReadonly:f.publicnameReadonly}}});await g(),t.queryOrganizer(),h==="save_and_continue"?await c.refetch():await e.push({name:pr}),ze(Xe("success.organizer.events.updatedSuccessfully"),{type:"success"})}return(f,h)=>{const g=si("router-link");return P(),Ge(Ki,{"meta-title":f.$t("navigation.views.organizerEventsEdit")},{title:$e(()=>{var v,_;return[fe(B(f.$t("navigation.views.organizerEventsEdit"))+" - ",1),(v=o.value)!=null&&v.title?(P(),V("span",p8e,B((_=o.value)==null?void 0:_.title),1)):ne("",!0),Ce(g,{to:{name:M(pr)},class:"btn btn-secondary mb-3 mt-2 float-end d-none d-md-inline-block"},{default:$e(()=>[h[0]||(h[0]=m("i",{class:"bi-arrow-left bi--1xl me-1"},null,-1)),m("span",v8e,B(f.$t("navigation.backToEvents")),1)]),_:1},8,["to"])]}),header:$e(()=>[Ce(qo,{routes:M(a)},null,8,["routes"])]),content:$e(()=>[s.value?(P(),Ge(eW,{key:0,"prefill-data":l,onSubmit:u},null,8,["prefill-data"])):ne("",!0)]),_:1},8,["meta-title"])}}},w8e=Yt(b8e,[["__scopeId","data-v-df86e3b4"]]),Fm=mt`
  query eventUsers($eventId: ID) {
    eventUsers(eventId: $eventId) {
      id
      eventId
      publicName
      verified
      allowToVote
      online
      username
      voteAmount
      createDatetime
      pollHints
    }
  }
`,X0=mt`
  subscription NewEventUser($eventId: ID!) {
    newEventUser(eventId: $eventId) {
      eventId
      id
      publicName
      verified
      allowToVote
      online
      username
      voteAmount
      createDatetime
    }
  }
`,e1=mt`
  subscription ($eventId: ID) {
    eventUserLifeCycle(eventId: $eventId) {
      eventUserId
      online
      eventId
    }
  }
`,y8e={id:"mainNavigation",class:"navbar navbar-dark fixed-top bg-dark"},_8e={id:"navbarCollapse",class:"collapse navbar-collapse bg-dark"},k8e={class:"list-group"},E8e={class:"navigation-item list-group-item"},C8e={class:"nav-title"},T8e=["title"],S8e={class:"badge text-bg-success badge-pill"},A8e={class:"navigation-item list-group-item"},I8e={class:"nav-title"},P8e=["title"],x8e={class:"badge text-bg-warning badge-pill"},O8e={class:"navigation-item list-group-item"},R8e={class:"nav-title"},V8e=["title"],D8e={class:"navigation-item list-group-item"},N8e={class:"nav-title"},L8e=["title"],M8e={class:"list-group-item"},$8e={class:"nav-title"},B8e=["title"],F8e={__name:"EventNavigation",setup(n){const e=Ui().params.id,i=Ui().params,r=Z([]);ln(Fm,{eventId:e},{fetchPolicy:"cache-and-network"}).onResult(({data:u})=>{u!=null&&u.eventUsers&&(r.value=u==null?void 0:u.eventUsers)});const o=le(()=>{var d;return((d=(r.value||[]).filter(f=>f.verified))==null?void 0:d.length)??0}),a=le(()=>{var d;return((d=(r.value||[]).filter(f=>!f.verified))==null?void 0:d.length)??0});let l;try{if(e&&e!=="undefined"&&e!==null){const u=Ur(X0,{eventId:e},{enabled:!!e});u&&typeof u.onError=="function"&&typeof u.onResult=="function"&&(l=u,l.onError(d=>{}),l.onResult(({data:d})=>{var h;if(!(d!=null&&d.newEventUser)||parseInt((h=d==null?void 0:d.newEventUser)==null?void 0:h.eventId,10)!==parseInt(e,10))return;const f=JSON.parse(JSON.stringify(r.value||[]));f.push({...d==null?void 0:d.newEventUser}),r.value=f}))}}catch{}let c;try{if(e&&e!=="undefined"&&e!==null){const u=Ur(e1,{eventId:e},{enabled:!!e});u&&typeof u.onError=="function"&&typeof u.onResult=="function"&&(c=u,c.onError(d=>{}),c.onResult(({data:d})=>{var g;if(!d||!d.eventUserLifeCycle)return;const f=JSON.parse(JSON.stringify(r.value||[])),h=f.find(v=>{var _;return parseInt(v.id,10)===parseInt((_=d==null?void 0:d.eventUserLifeCycle)==null?void 0:_.eventUserId,10)});h&&(h.online=(g=d==null?void 0:d.eventUserLifeCycle)==null?void 0:g.online,r.value=f)}))}}catch{}return(u,d)=>{const f=si("router-link");return P(),V("nav",y8e,[d[0]||(d[0]=m("span",{class:"h5 my-3 d-block text-white"},"Digitalwahl",-1)),d[1]||(d[1]=m("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarCollapse","aria-controls":"navbarCollapse","aria-expanded":"false","aria-label":"Toggle navigation"},[m("span",{class:"navbar-toggler-icon"})],-1)),m("div",_8e,[m("ul",k8e,[m("li",E8e,[Ce(f,{to:{name:M(Ul),params:M(i)},class:"list-group-item-action btn btn-lg list-group-item-dark d-block w-100 rounded py-3 px-0 text-center"},{default:$e(()=>{var h,g;return[m("span",C8e,B(u.$t("navigation.views."+M(Ul))),1),m("span",{class:Ze(["nav-icon","bi","bi--2xl",(g=(h=M(gb)(M(Ul)))==null?void 0:h.meta)==null?void 0:g.bootstrapIcon]),title:u.$t("navigation.views."+M(Ul))},null,10,T8e),m("span",S8e,B(o.value),1)]}),_:1},8,["to"])]),m("li",A8e,[Ce(f,{to:{name:M(Og),params:M(i)},class:"list-group-item-action btn btn-lg list-group-item-dark d-block w-100 rounded py-3 px-0 text-center"},{default:$e(()=>{var h,g;return[m("span",I8e,B(u.$t("navigation.views."+M(Og))),1),m("span",{class:Ze(["nav-icon","bi","bi--2xl",(g=(h=M(gb)(M(Og)))==null?void 0:h.meta)==null?void 0:g.bootstrapIcon]),title:u.$t("navigation.views."+M(Og))},null,10,P8e),m("span",x8e,B(a.value),1)]}),_:1},8,["to"])]),m("li",O8e,[Ce(f,{to:{name:M(io),params:M(i)},class:"list-group-item-action btn btn-lg list-group-item-dark d-block w-100 rounded py-3 px-0 text-center"},{default:$e(()=>{var h,g;return[m("span",R8e,B(u.$t("navigation.views."+M(io))),1),m("span",{class:Ze(["nav-icon","bi","bi--2xl",(g=(h=M(gb)(M(io)))==null?void 0:h.meta)==null?void 0:g.bootstrapIcon]),title:u.$t("navigation.views."+M(io))},null,10,V8e)]}),_:1},8,["to"])]),m("li",D8e,[Ce(f,{to:{name:M(Rg),params:M(i)},class:"list-group-item-action btn btn-lg list-group-item-dark d-block w-100 rounded py-3 px-0 text-center"},{default:$e(()=>{var h,g;return[m("span",N8e,B(u.$t("navigation.views."+M(Rg))),1),m("span",{class:Ze(["nav-icon","bi","bi--2xl",(g=(h=M(gb)(M(Rg)))==null?void 0:h.meta)==null?void 0:g.bootstrapIcon]),title:u.$t("navigation.views."+M(Rg))},null,10,L8e)]}),_:1},8,["to"])]),m("li",M8e,[Ce(f,{to:{name:M(pr)},class:"btn btn-danger w-100 text-center"},{default:$e(()=>[m("span",$8e,B(u.$t("navigation.backToEvents")),1),m("span",{class:Ze(["nav-icon","bi","bi--2xl","bi-arrow-left"]),title:u.$t("navigation.backToEvents")},null,8,B8e)]),_:1},8,["to"])])])])])}}},_l=Yt(F8e,[["__scopeId","data-v-6cd59bb2"]]),U8e={class:"table table-sm"},z8e={class:"thead-light"},H8e={__name:"VerifiedEventUserLegend",props:{eventUsers:{type:Array,required:!0}},setup(n){const t=n,e=le(()=>t.eventUsers.filter(g=>g.verified).length),i=le(()=>t.eventUsers.filter(g=>g.verified&&g.online).length),r=le(()=>t.eventUsers.filter(g=>g.verified&&!g.online).length),s=le(()=>t.eventUsers.filter(g=>g.verified&&g.allowToVote).length),o=le(()=>t.eventUsers.filter(g=>g.verified&&g.online&&g.allowToVote).length),a=le(()=>t.eventUsers.filter(g=>g.verified&&!g.online&&g.allowToVote).length),l=le(()=>t.eventUsers.filter(g=>g.verified&&!g.allowToVote).length),c=le(()=>t.eventUsers.filter(g=>g.verified&&g.online&&!g.allowToVote).length),u=le(()=>t.eventUsers.filter(g=>g.verified&&!g.online&&!g.allowToVote).length),d=le(()=>{let g=0;return t.eventUsers.forEach(v=>{v.verified&&v.allowToVote&&(g+=v.voteAmount)}),g}),f=le(()=>{let g=0;return t.eventUsers.forEach(v=>{v.verified&&v.online&&v.allowToVote&&(g+=v.voteAmount)}),g}),h=le(()=>{let g=0;return t.eventUsers.forEach(v=>{v.verified&&!v.online&&v.allowToVote&&(g+=v.voteAmount)}),g});return(g,v)=>(P(),V("table",U8e,[m("thead",z8e,[m("tr",null,[m("th",null,B(g.$t("view.event.user.member"))+" / "+B(g.$t("view.event.user.online"))+" / "+B(g.$t("view.event.user.offline")),1),m("th",null,B(g.$t("view.event.user.visitor"))+" / "+B(g.$t("view.event.user.online"))+" / "+B(g.$t("view.event.user.offline")),1),m("th",null,B(g.$t("view.event.user.all"))+" / "+B(g.$t("view.event.user.online"))+" / "+B(g.$t("view.event.user.offline")),1),m("th",null,B(g.$t("view.event.user.allVoteAmount"))+" / "+B(g.$t("view.event.user.online"))+" / "+B(g.$t("view.event.user.offline")),1)])]),m("tbody",null,[m("tr",null,[m("td",null,B(s.value)+" / "+B(o.value)+" / "+B(a.value),1),m("td",null,B(l.value)+" / "+B(c.value)+" / "+B(u.value),1),m("td",null,B(e.value)+" / "+B(i.value)+" / "+B(r.value),1),m("td",null,B(d.value)+" / "+B(f.value)+" / "+B(h.value),1)])])]))}};function Bg(n,t){const e=Qr.ORGANIZER_EXPORT_RESULTS,i={method:"POST",body:JSON.stringify({eventId:n,exportType:t}),redirect:"follow",referrerPolicy:"no-referrer",cache:"no-cache",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json"}};return fetch(e,i).then(r=>{if((r==null?void 0:r.status)>=500)throw new cn(Xe("error.network.internalServerError"));if((r==null?void 0:r.status)>=400)throw new cn(Xe("error.network.consumerError"));if((r==null?void 0:r.status)===200)return r;throw new cn(Xe("error.network.undefinedError"))})}const W8e={key:0,class:"pending-event-users"},j8e={class:"mb-3"},q8e={for:"filterByUsername"},G8e={class:"input-group"},K8e=["placeholder"],Y8e={class:"input-group-text p-0"},Q8e={class:"d-flex justify-content-between align-items-center mb-3"},Z8e=["innerHTML"],J8e=["disabled"],X8e={key:0},e7e={key:1},t7e={key:0,class:"badge text-bg-success badge-pill status-indicator"},n7e={key:1,class:"badge text-bg-danger badge-pill status-indicator"},i7e={class:"btn-group float-end",role:"group"},r7e=["onClick"],s7e=["onClick"],o7e=["onClick"],a7e=["title","onClick"],l7e=["title","onClick"],c7e={__name:"VerifiedEventUserList",props:{eventUsers:{type:Array,required:!0},eventSlug:{type:String,required:!1,default:""},eventId:{type:Number,required:!0}},emits:["updateToGuest","updateToParticipant","unverfifyEventUser","transferVotes"],setup(n,{emit:t}){const e=t,i=n,r=[{text:Xe("eventUser.online"),value:"online",sortable:!0},{text:Xe("eventUser.createDatetime"),value:"createDatetime",sortable:!0},{text:Xe("eventUser.username"),value:"username",sortable:!0},{text:Xe("eventUser.publicName"),value:"publicName",sortable:!0},{text:Xe("eventUser.voteAmount"),value:"voteAmount",sortable:!0},{text:"",value:"id",sortable:!1}],s=Z(null),o=le(()=>s.value?s.value:JSON.parse(JSON.stringify(i.eventUsers))),a=Kt({search:""}),l=Z(!1);function c(k){return Ga(k)}function u(){const k=a.search.toLowerCase().trim();if(!k){s.value=JSON.parse(JSON.stringify(i.eventUsers));return}s.value=i.eventUsers.filter(E=>{var A,x;return((A=E.username)==null?void 0:A.toLowerCase().includes(k))||((x=E.publicName)==null?void 0:x.toLowerCase().includes(k))})}function d(){a.search="",s.value=JSON.parse(JSON.stringify(i.eventUsers))}function f(k){e("updateToParticipant",k)}function h(k){e("updateToGuest",k)}function g(k){e("unverfifyEventUser",k)}function v(k){e("transferVotes",k)}async function _(){try{l.value=!0;const E=await(await Bg(i.eventId,"eventUsersWithShortlinks")).blob(),A=window.URL.createObjectURL(E),x=document.createElement("a");x.style.display="none",x.href=A,x.download=`event-users-shortlinks-${i.eventId}.csv`,document.body.appendChild(x),x.click(),window.URL.revokeObjectURL(A),document.body.removeChild(x),ze("CSV-Export mit Login-Links erfolgreich heruntergeladen",{type:"success"})}catch(k){Mt(k),ze("Fehler beim Export der CSV-Datei",{type:"error"})}finally{l.value=!1}}function w(k){const E=`${window.location.origin}/event/${i.eventSlug}`,A=new URLSearchParams;k.publicName&&A.append("publicname",k.publicName),k.username&&A.append("username",k.username);const x=A.toString()?`${E}?${A.toString()}`:E;navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(x).then(()=>{console.log("Link kopiert (moderne API):",x),ze(`Link in Zwischenablage kopiert: ${x}`,{type:"success",autoClose:5e3})}).catch(p=>{console.warn("Moderne Clipboard API fehlgeschlagen:",p),C(x)}):C(x)}function C(k){try{const E=document.createElement("textarea");E.value=k,E.style.position="fixed",E.style.left="-999999px",E.style.top="-999999px",document.body.appendChild(E),E.focus(),E.select();const A=document.execCommand("copy");if(document.body.removeChild(E),A)console.log("Link kopiert (Fallback):",k),ze(`Link in Zwischenablage kopiert: ${k}`,{type:"success",autoClose:5e3});else throw new Error("execCommand copy failed")}catch(E){console.error("Alle Kopier-Methoden fehlgeschlagen:",E),ze(`Automatisches Kopieren fehlgeschlagen. Bitte manuell kopieren: ${k}`,{type:"error",autoClose:1e4})}}return(k,E)=>{var p;const A=si("router-link"),x=si("EasyDataTable");return((p=n.eventUsers)==null?void 0:p.length)>0?(P(),V("div",W8e,[m("div",j8e,[m("label",q8e,B(k.$t("eventUser.filter.byUsername")),1),m("div",G8e,[vn(m("input",{id:"event-user-filter-username","onUpdate:modelValue":E[0]||(E[0]=D=>a.search=D),class:"form-control",placeholder:k.$t("eventUser.filter.byUsername"),onInput:u},null,40,K8e),[[Bi,a.search]]),m("div",Y8e,[m("button",{class:"btn btn-transparent",onClick:bt(d,["prevent"])},B(k.$t("eventUser.filter.reset")),1)])])]),E[7]||(E[7]=m("hr",null,null,-1)),Ce(H8e,{"event-users":n.eventUsers},null,8,["event-users"]),E[8]||(E[8]=m("hr",null,null,-1)),m("div",Q8e,[m("small",{class:"d-inline-block text-muted",innerHTML:k.$t("view.event.user.info")},null,8,Z8e),m("button",{class:"btn btn-primary",disabled:l.value,onClick:_},[l.value?(P(),V("span",X8e,[...E[1]||(E[1]=[m("span",{class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},null,-1),fe(" Exportiere... ",-1)])])):(P(),V("span",e7e,[...E[2]||(E[2]=[m("i",{class:"bi-download me-2"},null,-1),fe(" CSV mit Login-Links exportieren ",-1)])]))],8,J8e)]),Ce(x,{"buttons-pagination":"",headers:r,items:o.value,"table-class-name":"data-table","theme-color":"#007bff"},{"item-createDatetime":$e(D=>[fe(B(c(D.createDatetime)),1)]),"item-online":$e(D=>[D.online?(P(),V("span",t7e,B(k.$t("eventUser.onlineState.online")),1)):(P(),V("span",n7e,B(k.$t("eventUser.onlineState.offline")),1))]),"item-id":$e(D=>[m("div",i7e,[n.eventSlug?(P(),V("button",{key:0,class:"btn btn-outline-primary",title:"Link kopieren",onClick:R=>w(D)},[...E[3]||(E[3]=[m("i",{class:"bi-link-45deg"},null,-1)])],8,r7e)):ne("",!0),D.allowToVote?D.allowToVote?(P(),V("button",{key:2,class:"btn btn-secondary",onClick:R=>h(D.id)},B(k.$t("view.event.user.setTo"))+" "+B(k.$t("view.event.user.visitor")),9,o7e)):ne("",!0):(P(),V("button",{key:1,class:"h-100 btn btn-success",onClick:R=>f(D.id)},B(k.$t("view.event.user.setTo"))+" "+B(k.$t("view.event.user.member")),9,s7e)),D.allowToVote&&D.voteAmount>0?(P(),V("button",{key:3,class:"btn btn-info",title:k.$t("voteTransfer.transferVotes"),onClick:R=>v(D)},[...E[4]||(E[4]=[m("i",{class:"bi-arrow-left-right align-middle"},null,-1)])],8,a7e)):ne("",!0),Ce(A,{to:{name:M(dU),params:{eventUserId:D.id}},title:k.$t("view.event.user.edit"),class:"btn btn-warning d-flex justify-content-center align-items-center"},{default:$e(()=>[...E[5]||(E[5]=[m("i",{class:"bi-pencil align-middle"},null,-1)])]),_:1},8,["to","title"]),m("button",{class:"btn btn-danger",title:k.$t("view.event.user.unverfify"),onClick:R=>g(D.id)},[...E[6]||(E[6]=[m("i",{class:"bi-person-x align-middle"},null,-1)])],8,l7e)])]),_:1},8,["items"])])):ne("",!0)}}},u7e=Yt(c7e,[["__scopeId","data-v-35978844"]]),d7e=["id"],f7e={class:"modal-dialog modal-lg"},h7e={class:"modal-content"},m7e={class:"modal-header"},g7e={class:"modal-title fs-5",id:"voteTransferModalLabel"},p7e={class:"modal-body"},v7e={key:0,class:"vote-transfer-form"},b7e={class:"alert alert-info"},w7e={class:"mb-3"},y7e={for:"targetUserSearch",class:"form-label"},_7e={class:"position-relative"},k7e=["placeholder","disabled"],E7e={key:0,class:"mt-2"},C7e={class:"text-success"},T7e={key:0,class:"mb-3"},S7e={for:"voteAmountInput",class:"form-label"},A7e={class:"row"},I7e={class:"col-md-6"},P7e=["max"],x7e={class:"col-md-6"},O7e={class:"btn-group w-100",role:"group"},R7e={class:"form-text"},V7e={key:1,class:"alert alert-warning"},D7e={class:"row"},N7e={class:"col-md-6"},L7e={key:0,class:"text-danger"},M7e={class:"col-md-6"},$7e={key:0,class:"text-success"},B7e={class:"modal-footer"},F7e={type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},U7e=["disabled"],z7e=["onMousedown"],H7e={class:"d-flex justify-content-between align-items-center"},W7e={class:"text-muted"},j7e={class:"badge bg-secondary"},q7e={class:"dropdown-item-text text-muted"},G7e={__name:"VoteTransferModal",props:{modalId:{type:String,default:"voteTransferModal"},sourceUser:{type:Object,default:null},availableUsers:{type:Array,default:()=>[]}},emits:["transfer","close"],setup(n,{expose:t,emit:e}){const i=e,r=n,s=Z(""),o=Z(1),a=Z(""),l=Z(!1),c=Z({}),u=le(()=>!r.availableUsers||!r.sourceUser?[]:r.availableUsers.filter(x=>x.id!==r.sourceUser.id&&x.verified)),d=le(()=>s.value?u.value.find(x=>x.id===s.value):null),f=le(()=>{if(!a.value)return u.value;const x=a.value.toLowerCase();return u.value.filter(p=>p.publicName.toLowerCase().includes(x)||p.username.toLowerCase().includes(x))}),h=le(()=>{var x;return s.value&&o.value>0&&o.value<=(((x=r.sourceUser)==null?void 0:x.voteAmount)||0)});gt(()=>r.sourceUser,x=>{x&&(o.value=x.voteAmount>1?1:x.voteAmount,s.value="",a.value="")}),gt(s,()=>{r.sourceUser&&(o.value=r.sourceUser.voteAmount>1?1:r.sourceUser.voteAmount)});function g(){if(!h.value)return;i("transfer",{sourceUserId:r.sourceUser.id,targetUserId:s.value,voteAmount:o.value}),s.value="",o.value=1;const x=Hn.getInstance(document.getElementById(r.modalId));x&&x.hide()}function v(){new Hn(document.getElementById(r.modalId)).show()}function _(){const x=Hn.getInstance(document.getElementById(r.modalId));x&&x.hide()}function w(x){s.value=x.id,a.value=x.publicName,l.value=!1}function C(){l.value=!0,A()}function k(){setTimeout(()=>{l.value=!1},200)}function E(){l.value&&A()}function A(){const x=document.getElementById("targetUserSearch");if(x){const p=x.getBoundingClientRect();c.value={top:`${p.bottom+window.scrollY}px`,left:`${p.left+window.scrollX}px`,width:`${p.width}px`,maxHeight:"200px",overflowY:"auto",zIndex:9999,boxShadow:"0 0.5rem 1rem rgba(0, 0, 0, 0.15)",border:"1px solid rgba(0, 0, 0, 0.15)",borderRadius:"0.375rem"}}}return t({openModal:v,closeModal:_}),(x,p)=>{var D,R,S;return P(),V("div",{class:"modal fade",id:n.modalId,tabindex:"-1","aria-labelledby":"voteTransferModalLabel","aria-hidden":"true"},[m("div",f7e,[m("div",h7e,[m("div",m7e,[m("h1",g7e,B(x.$t("voteTransfer.modal.title")),1),p[4]||(p[4]=m("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),m("div",p7e,[n.sourceUser?(P(),V("div",v7e,[m("div",b7e,[m("h6",null,B(x.$t("voteTransfer.sourceUser")),1),m("strong",null,B(n.sourceUser.publicName),1),fe(" ("+B(n.sourceUser.username)+") ",1),p[5]||(p[5]=m("br",null,null,-1)),fe(" "+B(x.$t("voteTransfer.currentVotes",{count:n.sourceUser.voteAmount})),1)]),m("div",w7e,[m("label",y7e,B(x.$t("voteTransfer.selectTargetUser")),1),m("div",_7e,[vn(m("input",{id:"targetUserSearch","onUpdate:modelValue":p[0]||(p[0]=I=>a.value=I),type:"text",class:"form-control",placeholder:x.$t("voteTransfer.searchUserPlaceholder"),disabled:!u.value||u.value.length===0,onFocus:C,onBlur:k,onInput:E,autocomplete:"off"},null,40,k7e),[[Bi,a.value]])]),d.value?(P(),V("div",E7e,[m("small",C7e,[p[6]||(p[6]=m("i",{class:"bi bi-check-circle me-1"},null,-1)),fe(" "+B(x.$t("voteTransfer.selectedUser"))+": ",1),m("strong",null,B(d.value.publicName),1),fe(" ("+B(d.value.username)+") ",1)])])):ne("",!0)]),s.value&&n.sourceUser.voteAmount>1?(P(),V("div",T7e,[m("label",S7e,B(x.$t("voteTransfer.selectVoteAmount")),1),m("div",A7e,[m("div",I7e,[vn(m("input",{id:"voteAmountInput","onUpdate:modelValue":p[1]||(p[1]=I=>o.value=I),type:"number",class:"form-control",min:1,max:n.sourceUser.voteAmount},null,8,P7e),[[Bi,o.value,void 0,{number:!0}]])]),m("div",x7e,[m("div",O7e,[m("button",{type:"button",class:"btn btn-outline-secondary",onClick:p[2]||(p[2]=I=>o.value=1)},B(x.$t("voteTransfer.transferOne")),1),m("button",{type:"button",class:"btn btn-outline-secondary",onClick:p[3]||(p[3]=I=>o.value=n.sourceUser.voteAmount)},B(x.$t("voteTransfer.transferAll")),1)])])]),m("div",R7e,B(x.$t("voteTransfer.remainingVotes",{count:n.sourceUser.voteAmount-o.value})),1)])):ne("",!0),s.value?(P(),V("div",V7e,[m("h6",null,B(x.$t("voteTransfer.resultPreview")),1),m("div",D7e,[m("div",N7e,[m("strong",null,B(n.sourceUser.publicName),1),p[7]||(p[7]=m("br",null,null,-1)),fe(" "+B(x.$t("voteTransfer.afterTransfer"))+": "+B(n.sourceUser.voteAmount-o.value)+" "+B(x.$t("voteTransfer.votes"))+" ",1),n.sourceUser.voteAmount-o.value===0?(P(),V("span",L7e," ("+B(x.$t("voteTransfer.willBecomeVisitor"))+") ",1)):ne("",!0)]),m("div",M7e,[m("strong",null,B((D=d.value)==null?void 0:D.publicName),1),p[8]||(p[8]=m("br",null,null,-1)),fe(" "+B(x.$t("voteTransfer.afterTransfer"))+": "+B((((R=d.value)==null?void 0:R.voteAmount)||0)+o.value)+" "+B(x.$t("voteTransfer.votes"))+" ",1),(S=d.value)!=null&&S.allowToVote?ne("",!0):(P(),V("span",$7e," ("+B(x.$t("voteTransfer.willBecomeParticipant"))+") ",1))])])])):ne("",!0)])):ne("",!0)]),m("div",B7e,[m("button",F7e,B(x.$t("general.cancel")),1),m("button",{type:"button",class:"btn btn-primary",disabled:!h.value,onClick:g},B(x.$t("voteTransfer.confirmTransfer")),9,U7e)])])]),l.value&&f.value.length>0?(P(),V("div",{key:0,class:"dropdown-menu show position-fixed",style:Di(c.value)},[(P(!0),V(Fe,null,ct(f.value,I=>(P(),V("button",{key:I.id,type:"button",class:"dropdown-item",onMousedown:bt(F=>w(I),["prevent"])},[m("div",H7e,[m("div",null,[m("strong",null,B(I.publicName),1),m("small",W7e,"("+B(I.username)+")",1)]),m("span",j7e,B(x.$t("voteTransfer.currentVotes",{count:I.voteAmount})),1)])],40,z7e))),128))],4)):l.value&&a.value&&f.value.length===0?(P(),V("div",{key:1,class:"dropdown-menu show position-fixed",style:Di(c.value)},[m("div",q7e,B(x.$t("voteTransfer.noUsersFound")),1)],4)):ne("",!0)],8,d7e)}}},K7e=Yt(G7e,[["__scopeId","data-v-4e5d62ec"]]),tW=mt`
  mutation UpdateUserToParticipant($eventUserId: ID!) {
    updateUserToParticipant(eventUserId: $eventUserId) {
      id
      publicName
    }
  }
`,nW=mt`
  mutation UpdateUserToGuest($eventUserId: ID!) {
    updateUserToGuest(eventUserId: $eventUserId) {
      id
      publicName
    }
  }
`,iW=mt`
  mutation updateEventUser($input: UpdateEventUserInput!) {
    updateEventUser(input: $input) {
      id
      publicName
      username
      allowToVote
      verified
      voteAmount
    }
  }
`,Y7e=mt`
  mutation TransferVotes($input: TransferVotesInput!) {
    transferVotes(input: $input) {
      sourceUser {
        id
        publicName
        username
        voteAmount
        allowToVote
        verified
      }
      targetUser {
        id
        publicName
        username
        voteAmount
        allowToVote
        verified
      }
      transferredVotes
      success
    }
  }
`,t1=mt`
  subscription ($eventUserId: ID) {
    updateEventUserAccessRights(eventUserId: $eventUserId) {
      eventId
      eventUserId
      verified
      allowToVote
      voteAmount
      pollHints
    }
  }
`,Q7e={class:"events-new-title"},Z7e={key:0},J7e={class:"align-middle"},X7e={class:"align-middle"},eHe={__name:"MemeberRoom",setup(n){const t=nn(),e=Li(),r=Ui().params.id,s=Z(!1),o=Z(null),a=Z([]),l=Z(null),c=Z(null),u=le(()=>(a.value||[]).filter(A=>A.verified));let d;ln(Yo,{id:r,organizerId:t.user.id},{fetchPolicy:"no-cache"}).onResult(({data:A})=>{var x;if((A==null?void 0:A.event)===null){Mt(new cn),e.push({name:mi});return}o.value=A==null?void 0:A.event,s.value=!0,d=ln(Fm,{eventId:(x=o.value)==null?void 0:x.id},{fetchPolicy:"cache-and-network"}),d.onResult(({data:p})=>{p!=null&&p.eventUsers&&(a.value=p==null?void 0:p.eventUsers)})}),Ur(X0,{eventId:r}).onResult(({data:A})=>{var p;if(parseInt((p=A==null?void 0:A.newEventUser)==null?void 0:p.eventId,10)!==parseInt(r,10))return;const x=JSON.parse(JSON.stringify(a.value||[]));x.push({...A==null?void 0:A.newEventUser}),a.value=x}),Ur(t1).onResult(({data:A})=>{const{eventUserId:x,eventId:p,verified:D,allowToVote:R,voteAmount:S}=A.updateEventUserAccessRights;if(parseInt(p,10)!==parseInt(r,10))return;const I=JSON.parse(JSON.stringify(a.value||[])),F=I.find(H=>H.id===x);F&&(F.verified=D,F.allowToVote=R,F.voteAmount=S,a.value=I)}),Ur(e1,{eventId:r}).onResult(({data:A})=>{var D;if(!A||!A.eventUserLifeCycle){console.warn("[ORGANIZER DEBUG] MemberRoom - No valid data in eventUserLifeCycle event");return}const x=JSON.parse(JSON.stringify(a.value||[])),p=x.find(R=>{var S;return parseInt(R.id,10)===parseInt((S=A==null?void 0:A.eventUserLifeCycle)==null?void 0:S.eventUserId,10)});if(!p){console.warn("[ORGANIZER DEBUG] MemberRoom - No matching user found for ID:",A.eventUserLifeCycle.eventUserId);return}p.online=(D=A==null?void 0:A.eventUserLifeCycle)==null?void 0:D.online,a.value=x});async function _(A){const{mutate:x}=In(tW,{variables:{eventUserId:A}});await x(),await d.refetch()}async function w(A){const{mutate:x}=In(nW,{variables:{eventUserId:A}});await x(),await d.refetch()}async function C(A){const x=(a.value||[]).find(D=>parseInt(D==null?void 0:D.id,10)===parseInt(A,10));if(!x)return;const p=qs(lo,{message:Xe("view.event.user.confirm.unverify")});p.onConfirm(async()=>{const{mutate:D}=In(iW,{variables:{input:{id:x==null?void 0:x.id,eventId:r,username:x==null?void 0:x.username,verified:!1,allowToVote:x==null?void 0:x.allowToVote}}});await D(),await d.refetch()}),p.reveal()}function k(A){l.value=A,c.value&&c.value.openModal()}async function E(A){var x,p;try{const{mutate:D}=In(Y7e,{variables:{input:{sourceUserId:A.sourceUserId,targetUserId:A.targetUserId,voteAmount:A.voteAmount}}}),R=await D();if((p=(x=R==null?void 0:R.data)==null?void 0:x.transferVotes)!=null&&p.success){await d.refetch();const S=R.data.transferVotes.sourceUser.publicName,I=R.data.transferVotes.targetUser.publicName,F=R.data.transferVotes.transferredVotes,H=Xe("voteTransfer.success",{votes:F,source:S,target:I});console.log(H)}}catch(D){console.error("Vote transfer failed:",D)}}return(A,x)=>{const p=si("router-link");return P(),Ge(Ki,{"meta-title":A.$t("navigation.views.organizerMemberRoom")},{title:$e(()=>{var D,R;return[m("div",Q7e,[fe(B(A.$t("navigation.views.organizerMemberRoom"))+" - ",1),(D=o.value)!=null&&D.title?(P(),V("span",Z7e,B((R=o.value)==null?void 0:R.title),1)):ne("",!0)])]}),header:$e(()=>[Ce(_l)]),content:$e(()=>{var D,R;return[Ce(p,{to:{name:M(uU)},class:"btn btn-success my-3 me-3"},{default:$e(()=>[x[0]||(x[0]=m("i",{class:"bi-plus bi--2xl align-middle"},null,-1)),m("span",J7e,B(A.$t("view.event.create.labels.eventUser.createNew")),1)]),_:1},8,["to"]),Ce(p,{to:{name:M(fU)},class:"btn btn-secondary my-3"},{default:$e(()=>[x[1]||(x[1]=m("i",{class:"bi-list bi--2xl align-middle"},null,-1)),m("span",X7e,B(A.$t("view.event.create.labels.eventMultipleUser.createNew")),1)]),_:1},8,["to"]),x[2]||(x[2]=m("hr",null,null,-1)),Ce(u7e,{"event-users":u.value,"event-slug":(D=o.value)==null?void 0:D.slug,"event-id":(R=o.value)==null?void 0:R.id,onUpdateToGuest:w,onUpdateToParticipant:_,onUnverfifyEventUser:C,onTransferVotes:k},null,8,["event-users","event-slug","event-id"]),Ce(K7e,{ref_key:"voteTransferModal",ref:c,"source-user":l.value,"available-users":u.value,onTransfer:E},null,8,["source-user","available-users"])]}),_:1},8,["meta-title"])}}},tHe={key:0,class:"pending-event-users"},nHe={class:"mb-3"},iHe={for:"filterByUsername"},rHe={class:"input-group"},sHe=["placeholder"],oHe={class:"input-group-text p-0"},aHe={key:0,class:"badge text-bg-success badge-pill status-indicator"},lHe={key:1,class:"badge text-bg-danger badge-pill status-indicator"},cHe={class:"btn-group float-end",role:"group"},uHe=["onClick"],dHe=["onClick"],fHe=["onClick"],hHe=["disabled","onClick"],mHe={__name:"PendingEventUserList",props:{eventUsers:{type:Array,required:!0},eventSlug:{type:String,required:!1,default:""}},emits:["delete","updateToGuest","updateToParticipant"],setup(n,{emit:t}){const e=t,i=n,r=[{text:Xe("eventUser.online"),value:"online",sortable:!0},{text:Xe("eventUser.createDatetime"),value:"createDatetime",sortable:!0},{text:Xe("eventUser.username"),value:"username",sortable:!0},{text:Xe("eventUser.publicName"),value:"publicName",sortable:!0},{text:"",value:"id",sortable:!1}],s=Z(null),o=le(()=>s.value?s.value:JSON.parse(JSON.stringify(i.eventUsers))),a=Kt({username:""});function l(_){return Ga(_)}function c(){s.value=i.eventUsers.filter(_=>!_.verified&&_.username.includes(a.username)||!_.verified&&_.publicName.includes(a.username))}function u(){a.username="",s.value=JSON.parse(JSON.stringify(i.eventUsers))}function d(_){e("updateToParticipant",_)}function f(_){e("updateToGuest",_)}function h(_){const w=qs(lo,{message:Xe("view.event.listing.confirm.deleteQuestion")});w.onConfirm(()=>{e("delete",_)}),w.reveal()}function g(_){const w=`${window.location.origin}/event/${i.eventSlug}`,C=new URLSearchParams;_.publicName&&C.append("publicname",_.publicName),_.username&&C.append("username",_.username);const k=C.toString()?`${w}?${C.toString()}`:w;navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(k).then(()=>{console.log("Link kopiert (moderne API):",k),ze(`Link in Zwischenablage kopiert: ${k}`,{type:"success",autoClose:5e3})}).catch(E=>{console.warn("Moderne Clipboard API fehlgeschlagen:",E),v(k)}):v(k)}function v(_){try{const w=document.createElement("textarea");w.value=_,w.style.position="fixed",w.style.left="-999999px",w.style.top="-999999px",document.body.appendChild(w),w.focus(),w.select();const C=document.execCommand("copy");if(document.body.removeChild(w),C)console.log("Link kopiert (Fallback):",_),ze(`Link in Zwischenablage kopiert: ${_}`,{type:"success",autoClose:5e3});else throw new Error("execCommand copy failed")}catch(w){console.error("Alle Kopier-Methoden fehlgeschlagen:",w),ze(`Automatisches Kopieren fehlgeschlagen. Bitte manuell kopieren: ${_}`,{type:"error",autoClose:1e4})}}return(_,w)=>{var k;const C=si("EasyDataTable");return((k=n.eventUsers)==null?void 0:k.length)>0?(P(),V("div",tHe,[m("div",nHe,[m("label",iHe,B(_.$t("eventUser.filter.byUsername")),1),m("div",rHe,[vn(m("input",{id:"event-user-filter-username","onUpdate:modelValue":w[0]||(w[0]=E=>a.username=E),class:"form-control",placeholder:_.$t("eventUser.filter.byUsername"),onInput:c},null,40,sHe),[[Bi,a.username]]),m("div",oHe,[m("button",{class:"btn btn-secondary",onClick:bt(u,["prevent"])},B(_.$t("eventUser.filter.reset")),1)])])]),w[2]||(w[2]=m("hr",null,null,-1)),Ce(C,{"buttons-pagination":"",headers:r,items:o.value,"table-class-name":"data-table","theme-color":"#007bff"},{"item-createDatetime":$e(E=>[fe(B(l(E.createDatetime)),1)]),"item-online":$e(E=>[E.online?(P(),V("span",aHe,B(_.$t("eventUser.onlineState.online")),1)):(P(),V("span",lHe,B(_.$t("eventUser.onlineState.offline")),1))]),"item-id":$e(E=>[m("div",cHe,[n.eventSlug?(P(),V("button",{key:0,class:"btn btn-outline-primary me-2",title:"Link kopieren",onClick:A=>g(E)},[...w[1]||(w[1]=[m("i",{class:"bi-link-45deg"},null,-1)])],8,uHe)):ne("",!0),m("button",{class:"btn btn-success me-2",onClick:A=>d(E.id)},B(_.$t("view.event.user.verifyAs"))+" "+B(_.$t("view.event.user.member")),9,dHe),m("button",{class:"btn btn-secondary me-2",onClick:A=>f(E.id)},B(_.$t("view.event.user.verifyAs"))+" "+B(_.$t("view.event.user.visitor")),9,fHe),m("button",{class:"btn btn-danger me-2",disabled:E.online,onClick:A=>h(E.id)},B(_.$t("view.event.user.block")),9,hHe)])]),_:1},8,["items"])])):ne("",!0)}}},gHe=Yt(mHe,[["__scopeId","data-v-f4e931d1"]]),pHe=mt`
  mutation deleteEventUser($eventUserId: ID!) {
    deleteEventUser(eventUserId: $eventUserId)
  }
`,vHe={class:"events-new-title"},bHe={key:0},wHe={__name:"LobbyRoom",setup(n){const t=nn(),e=Li(),r=Ui().params.id,s=Z(!1),o=Z(null),a=Z([]),l=le(()=>(a.value||[]).filter(w=>!w.verified));let c;ln(Yo,{id:r,organizerId:t.user.id},{fetchPolicy:"no-cache"}).onResult(({data:w})=>{var C;if((w==null?void 0:w.event)===null){Mt(new cn),e.push({name:mi});return}o.value=w==null?void 0:w.event,s.value=!0,c=ln(Fm,{eventId:(C=o.value)==null?void 0:C.id},{fetchPolicy:"cache-and-network"}),c.onResult(({data:k})=>{k!=null&&k.eventUsers&&(a.value=k==null?void 0:k.eventUsers)})}),Ur(X0,{eventId:r}).onResult(({data:w})=>{var k;if(parseInt((k=w==null?void 0:w.newEventUser)==null?void 0:k.eventId,10)!==parseInt(r,10))return;const C=JSON.parse(JSON.stringify(a.value||[]));C.push({...w==null?void 0:w.newEventUser}),a.value=C}),Ur(t1).onResult(({data:w})=>{const{eventUserId:C,eventId:k,verified:E,allowToVote:A,voteAmount:x}=w.updateEventUserAccessRights;if(parseInt(k,10)!==parseInt(r,10))return;const p=JSON.parse(JSON.stringify(a.value||[])),D=p.find(R=>R.id===C);D&&(D.verified=E,D.allowToVote=A,D.voteAmount=x,a.value=p)}),Ur(e1,{eventId:r}).onResult(({data:w})=>{var E;if(!w||!w.eventUserLifeCycle){console.warn("[ORGANIZER DEBUG] LobbyRoom - No valid data in eventUserLifeCycle event");return}const C=JSON.parse(JSON.stringify(a.value||[])),k=C.find(A=>{var x;return parseInt(A.id,10)===parseInt((x=w==null?void 0:w.eventUserLifeCycle)==null?void 0:x.eventUserId,10)});if(!k){console.warn("[ORGANIZER DEBUG] LobbyRoom - No matching user found for ID:",w.eventUserLifeCycle.eventUserId);return}k.online=(E=w==null?void 0:w.eventUserLifeCycle)==null?void 0:E.online,a.value=C});async function g(w){const{mutate:C}=In(tW,{variables:{eventUserId:w}});await C(),await c.refetch()}async function v(w){const{mutate:C}=In(nW,{variables:{eventUserId:w}});await C(),await c.refetch()}async function _(w){const{mutate:C}=In(pHe,{variables:{eventUserId:w}});await C(),await c.refetch()}return(w,C)=>(P(),Ge(Ki,{"meta-title":w.$t("navigation.views.organizerLobbyRoom")},{title:$e(()=>{var k,E;return[m("div",vHe,[fe(B(w.$t("navigation.views.organizerLobbyRoom"))+" - ",1),(k=o.value)!=null&&k.title?(P(),V("span",bHe,B((E=o.value)==null?void 0:E.title),1)):ne("",!0)])]}),header:$e(()=>[Ce(_l)]),content:$e(()=>{var k;return[Ce(gHe,{"event-users":l.value,"event-slug":(k=o.value)==null?void 0:k.slug,onDelete:_,onUpdateToGuest:v,onUpdateToParticipant:g},null,8,["event-users","event-slug"])]}),_:1},8,["meta-title"]))}},yHe=mt`
  mutation togglePollResultHidden($pollResultId: ID!) {
    togglePollResultHidden(pollResultId: $pollResultId)
  }
`,_He={class:"d-flex justify-content-between align-items-start"},kHe={class:"flex-grow-1"},EHe={class:"h4 mb-1"},CHe={key:0,class:"badge bg-secondary ms-2"},THe=["disabled","title"],SHe={class:"small text-muted"},AHe={class:"card-body"},IHe={key:0,class:"row mb-3"},PHe={class:"col-12"},xHe={class:"btn-group d-print-none",role:"group"},OHe={class:"row"},RHe={class:"col-12 col-md-6"},VHe={class:"result-list"},DHe={class:"list-group"},NHe={class:"result"},LHe={key:0,class:"badge badge-pill",style:{"background-color":"green",color:"white"}},MHe={key:1,class:"badge badge-pill",style:{"background-color":"red",color:"white"}},$He={key:2,class:"badge badge-pill",style:{"background-color":"grey",color:"white"}},BHe={key:3,class:"ms-2 small"},FHe={class:"percentage-info"},UHe={key:0,class:"text-success ms-1"},zHe=["title"],HHe=["title"],WHe={key:0,class:"mt-3"},jHe={class:"mb-1"},qHe={class:"small text-muted"},GHe={key:0},KHe={key:1},YHe={key:2},QHe={class:"col-12 col-md-6"},ZHe=["data-bs-target","aria-controls"],JHe=["id"],XHe={class:"card card-body"},e9e={class:"list-group"},t9e={key:0},n9e=["data-bs-target","aria-controls"],i9e=["id"],r9e={class:"card card-body"},s9e={class:"list-group"},o9e={class:"d-flex justify-content-between"},a9e={class:"d-flex gap-2 mt-1"},l9e={__name:"ResultItem",props:{eventRecord:{type:Object,required:!0,default:()=>({})},pollResult:{type:Object,required:!0,default:()=>({})},initialPercentageType:{type:String,default:"maxPerOption"},showHiddenControls:{type:Boolean,default:!1}},emits:["percentage-type-change","result-hidden"],setup(n,{emit:t}){var R;Jt(()=>{typeof bootstrap<"u"&&bootstrap.Tooltip&&[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).forEach(I=>{new bootstrap.Tooltip(I)})});const e=n,i=t,r=le(()=>{var S;return(S=e.pollResult)!=null&&S.pollAnswer?e.pollResult.pollAnswer.filter(I=>I.answerContent!=="Enthaltung").length:0}),s=le(()=>{var S;return(S=e.pollResult)!=null&&S.pollAnswer?e.pollResult.pollAnswer.filter(I=>I.answerContent==="Enthaltung").length:0}),o=le(()=>s.value>0),a=Z(e.initialPercentageType);gt(()=>o.value,S=>{S?a.value="maxPerOptionNoAbstention":a.value="maxPerOption"},{immediate:!0}),gt(()=>e.initialPercentageType,S=>{a.value=S});function l(S){a.value=S,i("percentage-type-change",S)}const c=le(()=>{var S,I;return((I=(S=e.pollResult)==null?void 0:S.poll)==null?void 0:I.maxSelect)||1});le(()=>{var S,I;return(((I=(S=e.pollResult)==null?void 0:S.pollUser)==null?void 0:I.length)||0)*c.value});const u=le(()=>{var F,H,q,N,$,U,re,K,z,ge,Q,ue,ve;if((H=(F=e.pollResult)==null?void 0:F.poll)!=null&&H.maxVotes)return(e.pollResult.maxVotes||0)/e.pollResult.poll.maxVotes;const S=(($=(N=(q=e.pollResult)==null?void 0:q.poll)==null?void 0:N.options)==null?void 0:$.length)||((K=(re=(U=e.pollResult)==null?void 0:U.poll)==null?void 0:re.possibleAnswers)==null?void 0:K.length)||10,I=Math.round((((z=e.pollResult)==null?void 0:z.maxVotes)||0)/(((Q=(ge=e.pollResult)==null?void 0:ge.pollUser)==null?void 0:Q.length)||1)/S);return(((ve=(ue=e.pollResult)==null?void 0:ue.pollUser)==null?void 0:ve.length)||0)*I}),d=le(()=>{const S=u.value;return o.value?Math.max(0,S-s.value):S}),f=le(()=>{var S,I,F;if(!((I=(S=e.pollResult)==null?void 0:S.poll)!=null&&I.pollAnswerType)){if(!((F=e.pollResult)!=null&&F.pollAnswer))return!1;const H=new Set(e.pollResult.pollAnswer.map(N=>N.answerContent)),q=new Set(["Ja","Nein","Enthaltung"]);return[...H].some(N=>!q.has(N))}return e.pollResult.poll.pollAnswerType==="custom"}),h=le(()=>{var F;if(!((F=e.pollResult)!=null&&F.pollAnswer))return{};const S=_(e.pollResult.pollAnswer,"answerContent"),I=Object.entries(S);return I.sort((H,q)=>q[1].length-H[1].length),I.reduce((H,[q,N])=>({...H,[q]:N}),{})}),g=le(()=>{var I;if(!((I=e.pollResult)!=null&&I.pollAnswer))return{};const S={};return e.pollResult.pollAnswer.forEach(F=>{S[F.pollUserId]||(S[F.pollUserId]={}),S[F.pollUserId][F.answerContent]=(S[F.pollUserId][F.answerContent]||0)+1}),S}),v=le(()=>{var S;return(S=e.pollResult)!=null&&S.createDatetime?Ga(e.pollResult.createDatetime):""});function _(S,I){const F={};return S.forEach(H=>{F[H[I]]||(F[H[I]]=[]),F[H[I]].push(H)}),F}function w(S){var F;if(!((F=e.pollResult)!=null&&F.pollUser))return"Unknown";const I=e.pollResult.pollUser.find(H=>H.id===S);return I?I.publicName:"Unknown"}function C(S){let I=1,F=0;switch(a.value){case"validVotes":I=r.value>0?r.value:1,F=S/I*100;break;case"maxPerOption":I=u.value>0?u.value:1,F=S/I*100;break;case"maxPerOptionNoAbstention":I=d.value>0?d.value:1,F=S/I*100;break;default:I=d.value>0?d.value:1,F=S/I*100;break}return F>100?"100.00% ("+F.toFixed(2)+"%)":F.toFixed(2)+"%"}function k(S){var F;if(!((F=e.pollResult)!=null&&F.pollAnswer))return!1;const I=Object.entries(h.value).filter(([H])=>H!=="Enthaltung").map(([H,q])=>q.length);return I.length===0?!1:(I.sort((H,q)=>q-H),S===I[0])}function E(S){return r.value===0?!1:a.value==="validVotes"?S/r.value>.5:a.value==="maxPerOption"?S/u.value>.5:(a.value==="maxPerOptionNoAbstention",S/d.value>.5)}const A=Z(!1),x=Z(!!((R=e.pollResult)!=null&&R.hidden)),{mutate:p}=In(yHe);gt(()=>{var S;return(S=e.pollResult)==null?void 0:S.hidden},S=>{x.value=!!S},{immediate:!0});async function D(){var I,F;if(!((I=e.pollResult)!=null&&I.id))return;const S=x.value;A.value=!0;try{const H=await p({pollResultId:e.pollResult.id});(F=H==null?void 0:H.data)!=null&&F.togglePollResultHidden?(x.value=!S,ze(S?"Abstimmung wird wieder angezeigt":"Abstimmung wurde ausgeblendet",{type:"success"})):ze("Fehler beim Ändern der Sichtbarkeit",{type:"error"})}catch(H){console.error("Error toggling poll result hidden status:",H),ze("Fehler beim Ändern der Sichtbarkeit",{type:"error"})}finally{A.value=!1}}return(S,I)=>{var F,H,q;return n.pollResult&&n.pollResult.poll?(P(),V("div",{key:0,class:Ze(["card mb-3",{"hidden-result":n.showHiddenControls&&x.value}])},[m("div",{class:Ze(["card-header",{"bg-light text-muted":n.showHiddenControls&&x.value}])},[m("div",_He,[m("div",kHe,[m("h5",EHe,[fe(B(n.pollResult.poll.title)+" ("+B(S.$t("view.results.type."+n.pollResult.type))+") - "+B(v.value)+" ",1),n.showHiddenControls&&x.value?(P(),V("span",CHe,[...I[3]||(I[3]=[m("i",{class:"bi bi-eye-slash me-1"},null,-1),fe(" Ausgeblendet ",-1)])])):ne("",!0)])]),n.showHiddenControls?(P(),V("button",{key:0,class:Ze(["btn btn-sm d-print-none ms-2",x.value?"btn-outline-success":"btn-outline-secondary"]),type:"button",onClick:D,disabled:A.value,title:x.value?S.$t("view.results.showResult"):S.$t("view.results.hideResult")},[m("i",{class:Ze(x.value?"bi bi-eye":"bi bi-eye-slash")},null,2)],10,THe)):ne("",!0)]),m("p",SHe,[fe(B(S.$t("view.event.user.member"))+": "+B(((F=n.pollResult.pollUser)==null?void 0:F.length)||0)+" | ",1),o.value?(P(),V(Fe,{key:0},[fe(B(S.$t("view.results.givenVotes"))+" "+B(r.value)+" "+B(S.$t("view.results.withoutAbstentions"))+" | "+B(S.$t("view.results.abstentions"))+" "+B(s.value)+" | "+B(S.$t("view.results.totalVotes"))+" "+B(((H=n.pollResult.pollAnswer)==null?void 0:H.length)||0)+" | ",1)],64)):(P(),V(Fe,{key:1},[fe(B(S.$t("view.results.givenVotes"))+" "+B(((q=n.pollResult.pollAnswer)==null?void 0:q.length)||0)+" | ",1)],64)),fe(" "+B(S.$t("view.results.voters"))+" "+B(n.pollResult.maxVotes||0)+" ",1),f.value?(P(),V(Fe,{key:2},[fe(" | "+B(S.$t("view.results.maxVotesPerOption"))+": "+B(u.value)+" ",1),o.value?(P(),V(Fe,{key:0},[fe(" | "+B(S.$t("view.results.maxVotesPerOptionNoAbstention"))+": "+B(d.value),1)],64)):ne("",!0)],64)):ne("",!0)])],2),m("div",AHe,[f.value?(P(),V("div",IHe,[m("div",PHe,[m("div",xHe,[o.value?(P(),V("button",{key:0,type:"button",class:Ze(["btn",a.value==="maxPerOptionNoAbstention"?"btn-primary":"btn-outline-primary"]),onClick:I[0]||(I[0]=N=>l("maxPerOptionNoAbstention"))},B(S.$t("view.results.percentageOfMaxPerOptionNoAbstention")),3)):ne("",!0),m("button",{type:"button",class:Ze(["btn",a.value==="maxPerOption"?"btn-primary":"btn-outline-primary"]),onClick:I[1]||(I[1]=N=>l("maxPerOption"))},B(S.$t("view.results.percentageOfMaxPerOption")),3),m("button",{type:"button",class:Ze(["btn",a.value==="validVotes"?"btn-primary":"btn-outline-primary"]),onClick:I[2]||(I[2]=N=>l("validVotes"))},B(S.$t("view.results.percentageOfValidVotes")),3)])])])):ne("",!0),m("div",OHe,[m("div",RHe,[m("p",null,B(S.$t("view.results.mainResult")),1),m("div",VHe,[m("ul",DHe,[(P(!0),V(Fe,null,ct(h.value,(N,$)=>(P(),V("li",{key:$,class:"list-group-item d-flex justify-content-between align-items-center"},[fe(B($)+" ",1),m("span",NHe,[$==="Ja"?(P(),V("span",LHe,B(N.length),1)):$==="Nein"?(P(),V("span",MHe,B(N.length),1)):(P(),V("span",$He,B(N.length),1)),$!=="Enthaltung"?(P(),V("span",BHe,[m("span",FHe," ("+B(C(N.length))+") ",1),k(N.length)?(P(),V("span",UHe,[E(N.length)?(P(),V("span",{key:0,class:"majority-indicator","data-bs-toggle":"tooltip","data-bs-placement":"top",title:S.$t("view.results.absoluteMajorityTooltip")},B(S.$t("view.results.absoluteMajority")),9,zHe)):(P(),V("span",{key:1,class:"majority-indicator","data-bs-toggle":"tooltip","data-bs-placement":"top",title:S.$t("view.results.relativeMajorityTooltip")},B(S.$t("view.results.relativeMajority")),9,HHe))])):ne("",!0)])):ne("",!0)])]))),128))])]),f.value?(P(),V("div",WHe,[m("p",jHe,[m("strong",null,B(S.$t("view.results.percentageExplanation")),1)]),m("ul",qHe,[a.value==="validVotes"?(P(),V("li",GHe,B(S.$t("view.results.validVotesExplanation")),1)):ne("",!0),a.value==="maxPerOption"?(P(),V("li",KHe,B(S.$t("view.results.maxPerOptionExplanation",{maxVotesPerOption:u.value})),1)):ne("",!0),a.value==="maxPerOptionNoAbstention"&&o.value?(P(),V("li",YHe,B(S.$t("view.results.maxPerOptionNoAbstentionExplanation",{maxVotesPerOption:u.value})),1)):ne("",!0)])])):ne("",!0)]),m("div",QHe,[m("p",null,B(S.$t("general.member")),1),m("button",{class:"btn btn-primary btn-result d-print-none",type:"button","data-bs-toggle":"collapse","data-bs-target":"#poll-"+n.pollResult.id+"-ResultVoters","aria-expanded":"false","aria-controls":"poll-"+n.pollResult.id+"-ResultVoters"},[I[4]||(I[4]=m("i",{class:"bi bi-caret-right-fill"},null,-1)),fe(" "+B(S.$t("view.results.showMemberList")),1)],8,ZHe),m("div",{id:"poll-"+n.pollResult.id+"-ResultVoters",class:"collapse"},[m("div",XHe,[m("ul",e9e,[(P(!0),V(Fe,null,ct(n.pollResult.pollUser||[],(N,$)=>(P(),V("li",{key:$,class:"list-group-item d-flex justify-content-between align-items-center"},B(N.publicName),1))),128))])])],8,JHe),I[6]||(I[6]=m("hr",{class:"divider mx-2"},null,-1)),n.pollResult.type==="PUBLIC"?(P(),V("p",t9e,B(S.$t("view.results.detailResult")),1)):ne("",!0),n.pollResult.type==="PUBLIC"?(P(),V("button",{key:1,class:"btn btn-primary btn-result d-print-none",type:"button","data-bs-toggle":"collapse","data-bs-target":"#poll-"+n.pollResult.id+"-ResultDetails","aria-expanded":"false","aria-controls":"poll-"+n.pollResult.id+"-ResultDetails"},[I[5]||(I[5]=m("i",{class:"bi bi-caret-right-fill"},null,-1)),fe(" "+B(S.$t("view.results.showDetailResult")),1)],8,n9e)):ne("",!0),n.pollResult.type==="PUBLIC"?(P(),V("div",{key:2,id:"poll-"+n.pollResult.id+"-ResultDetails",class:"collapse"},[m("div",r9e,[m("ul",s9e,[(P(!0),V(Fe,null,ct(g.value,(N,$)=>(P(),V("li",{key:$,class:"list-group-item"},[m("div",o9e,[m("span",null,B(w($)),1),m("div",a9e,[(P(!0),V(Fe,null,ct(N,(U,re)=>(P(),V("span",{key:re,class:"d-flex align-items-center"},[m("span",{class:Ze(["badge rounded-pill",{"bg-success":re==="Ja","bg-danger":re==="Nein","bg-secondary":re!=="Ja"&&re!=="Nein"}])},B(re)+" x"+B(U),3)]))),128))])])]))),128))])])],8,i9e)):ne("",!0)])])])],2)):ne("",!0)}}},rW=Yt(l9e,[["__scopeId","data-v-e2c3c1fa"]]),c9e={class:"results-listing"},u9e={key:0,class:"created-polls"},n1={__name:"ResultListing",props:{eventRecord:{type:Object,required:!0},pollResults:{type:Array,required:!0},showHiddenControls:{type:Boolean,default:!1}},setup(n){const t=n,e=Z([...t.pollResults]);gt(()=>t.pollResults,r=>{e.value=[...r]},{deep:!0});function i(r){e.value=e.value.filter(s=>s.id!==r)}return(r,s)=>{var o;return P(),V("div",c9e,[m("h2",null,B(r.$t("view.results.pastResults")),1),((o=e.value)==null?void 0:o.length)>0?(P(),V("div",u9e,[(P(!0),V(Fe,null,ct(e.value,(a,l)=>(P(),Ge(rW,{key:a.id,"event-record":n.eventRecord,"poll-result":a,"show-hidden-controls":n.showHiddenControls,onResultHidden:i},null,8,["event-record","poll-result","show-hidden-controls"]))),128))])):ne("",!0)])}}},xh=mt`
  query pollResults($eventId: ID, $page: Int, $pageSize: Int, $includeHidden: Boolean) {
    pollResult(eventId: $eventId, page: $page, pageSize: $pageSize, includeHidden: $includeHidden) {
      id
      type
      maxVotes
      maxVoteCycles
      createDatetime
      hidden
      poll {
        title
        pollAnswer
        minVotes
        maxVotes
      }
      pollAnswer {
        id
        answerContent
        pollResultId
        pollUserId
      }
      pollUser {
        id
        publicName
      }
    }
  }
`,d9e={class:"btn-group",role:"group"},f9e={class:"btn-group",role:"group"},h9e={id:"btnGroupDropdown",type:"button",class:"btn btn-secondary dropdown-toggle pe-3 ps-3","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},m9e={class:"me-2"},g9e={class:"dropdown-menu","aria-labelledby":"btnGroupDropdown"},p9e=["onClick"],v9e="bi-download",b9e={__name:"ButtonDropdown",props:{label:{type:String,required:!0},buttons:{type:Array,required:!0}},setup(n){return(t,e)=>(P(),V("div",d9e,[m("div",f9e,[m("button",h9e,[m("span",{class:Ze(["me-2","nav-icon","bi",v9e])},null,2),m("span",m9e,B(n.label),1)]),m("div",g9e,[(P(!0),V(Fe,null,ct(n.buttons,(i,r)=>(P(),V("a",{key:r,class:"dropdown-item",href:"#",onClick:bt(i==null?void 0:i.onClick,["prevent"])},B(i.label),9,p9e))),128))])])]))}},w9e={class:"events-new-title"},y9e={key:0},_9e={key:0,class:"d-flex justify-content-center my-5"},k9e={class:"spinner-border",role:"status"},E9e={class:"visually-hidden"},C9e={class:"ms-3"},T9e={key:1,class:"alert alert-danger",role:"alert"},S9e={key:2},A9e=["disabled"],I9e={key:1,class:"alert alert-light mx-auto my-5"},P9e={key:1,class:"alert alert-info mx-auto my-5"},x9e={__name:"PollResultListing",setup(n){const t=nn(),e=Li(),r=Ui().params.id,s=Z(null),o=Z([]),a=Z(null),l=Z(0),c=Z(10),u=Z(!0),d=Z(!0),f=Z(!0),h=Z(!1),g=le(()=>d.value||f.value),v=[{label:"Übersicht",onClick:E},{label:"Ergebnisse",onClick:A},{label:"Ergebnisse mit Details",onClick:x},{label:"Teilnehmer mit abgegebener Stimmenanzahl",onClick:p},{label:"Stimmen-Anpassungen Log",onClick:D}];let _;const w=ln(Yo,{id:r,organizerId:t.user.id},{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0});gt(()=>w.loading.value,S=>{d.value=S}),w.onError(S=>{a.value=S,Mt(S)}),w.onResult(({data:S})=>{if((S==null?void 0:S.event)===null){Mt(new cn),e.push({name:mi});return}s.value=S==null?void 0:S.event,C()});function C(){var S;_=ln(xh,{eventId:(S=s.value)==null?void 0:S.id,page:l.value,pageSize:c.value,includeHidden:!0},{fetchPolicy:"network-only"}),gt(()=>_.loading.value,I=>{f.value=I}),_.onResult(({data:I})=>{if(!(I!=null&&I.pollResult)){u.value=!1;return}o.value=I.pollResult,u.value=I.pollResult.length>=c.value}),_.onError(I=>{a.value=I,Mt(I)})}async function k(){var H;if(h.value)return;h.value=!0;const S=l.value+1,I=document.querySelector(".poll-results-container"),F=(I==null?void 0:I.getBoundingClientRect().bottom)+window.pageYOffset;try{await _.fetchMore({variables:{eventId:(H=s.value)==null?void 0:H.id,page:S,pageSize:c.value,includeHidden:!0},updateQuery:(q,{fetchMoreResult:N})=>{var U;if(!((U=N==null?void 0:N.pollResult)!=null&&U.length))return u.value=!1,ze(ss.global.tc("view.results.noMoreResults"),{type:"info"}),q;const $={pollResult:[...q.pollResult,...N.pollResult]};return o.value=$.pollResult,l.value=S,u.value=N.pollResult.length>=c.value,$}}),Zn(()=>{window.scrollTo({top:F,behavior:"auto"})})}catch(q){console.error("Error loading more results:",q),ze(ss.global.tc("common.error.loading"),{type:"error"})}finally{h.value=!1}}async function E(){const S=await Bg(r,"pollOverview");await R(await S.text(),"pollOverview.csv")}async function A(){const S=await Bg(r,"pollResults");await R(await S.text(),"pollResults.csv")}async function x(){const S=await Bg(r,"pollResultsDetail");await R(await S.text(),"pollResultsDetail.csv")}async function p(){const S=await Bg(r,"pollEventUsersVoted");await R(await S.text(),"pollEventUsersVoted.csv")}async function D(){try{const S=await fetch(`/api/event/${r}/export-vote-adjustments`,{method:"GET",headers:{Authorization:`Bearer ${t.authToken}`}});if(!S.ok){const N=await S.json();throw new Error(N.error||"Export fehlgeschlagen")}const I=S.headers.get("Content-Disposition");let F="vote-adjustments.csv";if(I){const N=I.match(/filename="?([^"]+)"?/);N&&N[1]&&(F=N[1])}const H=await S.blob(),q=document.createElement("a");q.href=window.URL.createObjectURL(H),q.download=F,document.body.appendChild(q),q.click(),document.body.removeChild(q),ze(ss.global.tc("common.success"),{type:"success"})}catch(S){console.error("Export error:",S),ze(S.message||ss.global.tc("common.error"),{type:"error"})}}async function R(S,I){const F=new Blob([S],{type:"text/csv"}),H=document.createElement("a");H.href=window.URL.createObjectURL(F),H.download=I,document.body.appendChild(H),H.click(),document.body.removeChild(H)}return(S,I)=>(P(),Ge(Ki,{"meta-title":S.$t("navigation.views.organizerPollResults")},{title:$e(()=>{var F,H;return[m("div",w9e,[fe(B(S.$t("navigation.views.organizerPollResults"))+" - ",1),(F=s.value)!=null&&F.title?(P(),V("span",y9e,B((H=s.value)==null?void 0:H.title),1)):ne("",!0)])]}),header:$e(()=>[Ce(_l)]),content:$e(()=>{var F;return[Ce(b9e,{buttons:v,label:"Export"}),I[1]||(I[1]=m("hr",null,null,-1)),g.value?(P(),V("div",_9e,[m("div",k9e,[m("span",E9e,B(S.$t("common.loading")),1)]),m("span",C9e,B(S.$t("common.loading")),1)])):a.value?(P(),V("div",T9e,B(S.$t("common.error.loading")),1)):(P(),V("div",S9e,[((F=o.value)==null?void 0:F.length)>0?(P(),V(Fe,{key:0},[(P(),Ge(n1,{key:"poll-results","poll-results":o.value,"event-record":s.value,"show-hidden-controls":!0,class:"poll-results-container"},null,8,["poll-results","event-record"])),u.value?(P(),V("button",{key:0,class:"my-5 mx-auto btn btn-secondary py-2 d-flex align-items-center d-print-none",disabled:h.value,onClick:k},[I[0]||(I[0]=m("i",{class:"me-3 bi bi-plus-square-fill bi--2xl"},null,-1)),fe(" "+B(h.value?S.$t("common.loading"):S.$t("view.results.showMore")),1)],8,A9e)):ne("",!0),u.value?ne("",!0):(P(),V("p",I9e,B(S.$t("view.results.noMoreResults")),1))],64)):(P(),V("p",P9e,B(S.$t("view.results.noResults")),1))]))]}),_:1},8,["meta-title"]))}},O9e={key:0,class:"container-active-poll"},R9e={class:"card active-poll mb-3"},V9e={class:"card-header"},D9e={class:"h4"},N9e={class:"card-body"},L9e=["innerHTML"],M9e=["innerHTML"],$9e={class:"card-footer"},B9e={class:"card active-poll-details mb-3"},F9e={class:"card-header d-flex justify-content-between align-items-center"},U9e={key:0,class:"h4 mb-0"},z9e=["disabled"],H9e={class:"card-body"},W9e={key:0,class:"row"},j9e={class:"col-12 col-md-auto"},q9e={class:"list-group"},G9e={class:"col-12 col-md-auto"},K9e={class:"list-group"},Y9e={__name:"ActivePoll",props:{activePoll:{type:Object,required:!0},activePollEventUser:{type:Object,required:!0},activePollAnswerCount:{type:Number,required:!0},activePollMaxAnswer:{type:Number,required:!0},pollUserCount:{type:Number,required:!0},pollUserVotedCount:{type:Number,required:!0}},emits:["close","refresh"],setup(n,{expose:t,emit:e}){const i=Z(!1),r=e,s=n,o=le(()=>parseInt(s.activePollAnswerCount,10)||0),a=le(()=>parseInt(s.activePollMaxAnswer,10)||1),l=le(()=>parseInt(s.pollUserCount,10)||1),c=le(()=>parseInt(s.pollUserVotedCount,10)||0);function u(h){var g,v;return(v=(g=s.activePollEventUser)==null?void 0:g.pollUserVoted)==null?void 0:v.find(_=>parseInt(_==null?void 0:_.eventUserId,10)===parseInt(h==null?void 0:h.eventUserId,10))}function d(){r("close")}function f(){i.value=!0,r("refresh")}return t({isRefreshing:i}),(h,g)=>n.activePoll.title?(P(),V("div",O9e,[m("div",R9e,[m("div",V9e,[m("h2",D9e,B(h.$t("view.polls.active.title")),1)]),m("div",N9e,[m("h3",null,B(n.activePoll.title),1),n.activePollMaxAnswer>0?(P(),V("p",{key:0,innerHTML:M(Xe)("view.polls.active.voteStatus",{votes:o.value,maxVotes:a.value,users:c.value,maxUsers:l.value})},null,8,L9e)):ne("",!0),n.activePollMaxAnswer===0?(P(),V("p",{key:1,innerHTML:M(Xe)("view.polls.active.voteStatus",{votes:parseInt(n.activePoll.answerCount,10)||0,maxVotes:parseInt(n.activePoll.maxVotes,10)||1,users:parseInt(n.activePoll.pollUserVotedCount,10)||0,maxUsers:parseInt(n.activePoll.pollUserCount,10)||1})},null,8,M9e)):ne("",!0)]),m("div",$9e,[m("button",{type:"button",class:"btn btn-danger pull-right",onClick:d},B(h.$t("view.polls.active.close")),1)])]),m("div",B9e,[m("div",F9e,[n.activePollEventUser?(P(),V("h2",U9e,B(M(Xe)("view.polls.active.details")),1)):ne("",!0),m("button",{type:"button",class:"btn btn-secondary btn-sm",onClick:f,disabled:i.value},B(h.$t("view.polls.active.refresh")||"Aktualisieren"),9,z9e)]),m("div",H9e,[n.activePollEventUser&&n.activePollEventUser.pollUser?(P(),V("div",W9e,[m("div",j9e,[m("h4",null,B(M(Xe)("navigation.views.organizerMemberRoom")),1),m("ul",q9e,[(P(!0),V(Fe,null,ct(n.activePollEventUser.pollUser,(v,_)=>(P(),V("li",{key:_,class:"list-group-item d-flex justify-content-between align-items-center align-content-center"},[fe(B(_+1)+" - "+B(v.publicName)+" ["+B(v.eventUserId)+"] ",1),m("i",{class:Ze(["bi h2 mb-0",{"bi-check text-success":u(v),"bi-x text-danger":!u(v)}])},null,2)]))),128))])]),m("div",G9e,[m("h4",null,B(M(Xe)("view.polls.active.alreadyVoted")),1),m("ul",K9e,[(P(!0),V(Fe,null,ct(n.activePollEventUser.pollUserVoted,(v,_)=>(P(),V("li",{key:_,class:"list-group-item d-flex justify-content-between align-items-center align-content-center"},B(_+1)+" - "+B(v.publicName)+" ["+B(v.eventUserId)+"] ",1))),128))])])])):ne("",!0)])])])):ne("",!0)}},Q9e=Yt(Y9e,[["__scopeId","data-v-79ffd41e"]]),Z9e={class:"polls-container mb-3"},J9e={key:0},X9e={key:1,class:"polls-listing-container"},eWe={key:0},tWe={class:"created-polls list-group"},nWe={class:"mb-1"},iWe=["disabled","title","onClick"],rWe=["title","disabled","onClick"],sWe=["title","disabled","onClick"],oWe=["title","disabled","onClick"],sW={__name:"InactivePollListing",props:{polls:{type:Array,required:!0},currentOnlineUserCount:{type:Number,default:null},showStartButton:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},startButtonDisabled:{type:Boolean,default:!1}},emits:["copy","edit","remove","start"],setup(n,{emit:t}){const e=t;function i(a){e("copy",a)}function r(a){e("edit",a)}function s(a){e("remove",a)}function o(a){e("start",a)}return(a,l)=>(P(),V(Fe,null,[l[4]||(l[4]=m("hr",null,null,-1)),m("div",Z9e,[n.currentOnlineUserCount&&n.currentOnlineUserCount===0?(P(),V("p",J9e,[m("u",null,B(a.$t("view.polls.noActiveUser")),1)])):ne("",!0),n.polls?(P(),V("div",X9e,[n.polls.length>0?(P(),V("h2",eWe,B(a.$t("view.polls.headlines.listingTitle")),1)):ne("",!0),m("ul",tWe,[(P(!0),V(Fe,null,ct(n.polls,c=>(P(),V("li",{key:c.id,class:"list-group-item"},[m("h5",nWe,B(c.title),1),n.showStartButton?(P(),V("button",{key:0,class:"btn btn-success my-2 me-2",disabled:n.disabled||n.currentOnlineUserCount===0||n.startButtonDisabled,title:a.$t("view.polls.listing.start"),onClick:u=>o(c.id)},[...l[0]||(l[0]=[m("i",{class:"bi bi-play-fill bi--2xl"},null,-1)])],8,iWe)):ne("",!0),m("button",{class:"btn btn-secondary my-2 me-2",title:a.$t("view.polls.listing.edit"),disabled:n.disabled,onClick:u=>r(c.id)},[...l[1]||(l[1]=[m("i",{class:"bi bi-pencil-square bi--2xl"},null,-1)])],8,rWe),m("button",{class:"btn btn-secondary my-2 me-2",title:a.$t("view.polls.listing.copy"),disabled:n.disabled,onClick:u=>i(c.id)},[...l[2]||(l[2]=[m("i",{class:"bi bi-files bi--2xl"},null,-1)])],8,sWe),m("button",{class:"btn btn-danger my-2 me-2",title:a.$t("view.polls.listing.delete"),disabled:n.disabled,onClick:u=>s(c.id)},[...l[3]||(l[3]=[m("i",{class:"bi bi-trash bi--2xl"},null,-1)])],8,oWe)]))),128))])])):ne("",!0)])],64))}},aWe=mt`
  query activePoll($eventId: ID) {
    activePoll(eventId: $eventId) {
      id
      title
      maxVotes
      answerCount
      pollUserCount
      pollUserVotedCount
    }
  }
`,oW=mt`
  query activePollEventUser($eventId: ID) {
    activePollEventUser(eventId: $eventId) {
      poll {
        id
        title
        pollAnswer
        type
        list
        possibleAnswers {
          id
          content
        }
        minVotes
        maxVotes
        allowAbstain
      }
      state
      pollUser {
        id
        eventUserId
        publicName
      }
      pollUserVoted {
        id
        eventUserId
        publicName
        pollResultId
      }
      pollAnswers {
        id
        pollResultId
        answerContent
        pollUserId
      }
    }
  }
`,lWe=mt`
  query pollsWithNoResults($eventId: ID) {
    pollsWithNoResults(eventId: $eventId) {
      id
      title
      pollAnswer
      type
      list
      possibleAnswers {
        id
        content
      }
      minVotes
      maxVotes
      allowAbstain
    }
  }
`,aW=mt`
  mutation removePoll($pollId: ID!) {
    removePoll(id: $pollId)
  }
`,cWe=mt`
  mutation startPoll($pollId: ID!) {
    startPoll(id: $pollId) {
      id
      eventId
      title
      type
      possibleAnswers {
        content
      }
    }
  }
`,uWe=mt`
  mutation stopPoll($id: ID!) {
    stopPoll(id: $id)
  }
`,lW=mt`
  subscription ($eventId: ID) {
    pollAnswerLifeCycle(eventId: $eventId) {
      pollResultId
      maxVotes
      pollAnswersCount
      pollUserCount
      pollUserVotedCount
      eventId
    }
  }
`,dWe=mt`
  subscription ($eventId: ID) {
    pollLifeCycle(eventId: $eventId) {
      eventId
      state
      poll {
        id
        title
        type
        possibleAnswers {
          id
          content
        }
        minVotes
        maxVotes
        allowAbstain
      }
      pollResultId
    }
  }
`,fWe={key:1,class:"container-no-active-poll text-center alert alert-warning d-flex justify-content-center align-items-center",role:"alert"},hWe={class:"mb-0"},mWe={class:"d-flex align-items-center mb-2"},gWe={class:"mb-0 me-2"},pWe=["disabled"],vWe={key:3},bWe={class:"align-middle"},wWe={__name:"SyncPollListing",props:{event:{type:Object,required:!0}},setup(n){const t=n,e=Li(),r=Ui().params.id,s=Z(null),o=Z(!1),a=Z([]),l=Z(null),c=Z(null),u=Z([]),d=Z([]),f=Z(0),h=Z(0),g=Z(0),v=Z(0),_=Z(0),w=Z(1),C=Z(!1),k=Z(!0);let E,A,x,p,D;E=ln(Fm,{eventId:t.event.id},{fetchPolicy:"cache-and-network"}),E.onResult(({data:Q})=>{Q!=null&&Q.eventUsers&&(a.value=Q==null?void 0:Q.eventUsers)}),A=ln(aWe,{eventId:t.event.id},{fetchPolicy:"no-cache"}),A.onResult(({data:Q})=>{if(Q!=null&&Q.activePoll){if(l.value=Q==null?void 0:Q.activePoll,Q.activePoll){const ue=parseInt(Q.activePoll.maxVotes,10)||0,ve=parseInt(Q.activePoll.answerCount,10)||0,ce=parseInt(Q.activePoll.pollUserCount,10)||0,J=parseInt(Q.activePoll.pollUserVotedCount,10)||0;h.value=ue,f.value=ve,g.value=ce,v.value=J}console.log("[ORGANIZER DEBUG] SyncPollListing - Current activePoll:",l.value)}}),x=ln(oW,{eventId:t.event.id},{fetchPolicy:"cache-and-network"}),x.onResult(({data:Q})=>{if(Q!=null&&Q.activePollEventUser&&(c.value=Q==null?void 0:Q.activePollEventUser,Q.activePollEventUser.pollUser&&Q.activePollEventUser.pollUserVoted)){const ue=Q.activePollEventUser.pollUser.length,ve=Q.activePollEventUser.pollUserVoted.length;g.value=ue,v.value=ve}}),p=ln(xh,{eventId:t.event.id,page:_,pageSize:w},{fetchPolicy:"cache-and-network"}),p.onResult(({data:Q})=>{var ue;Q!=null&&Q.pollResult&&((ue=Q==null?void 0:Q.pollResult)==null?void 0:ue.length)===10&&(C.value=!0),Q!=null&&Q.pollResult&&(u.value=Q==null?void 0:Q.pollResult)}),D=ln(lWe,{eventId:t.event.id},{fetchPolicy:"cache-and-network"}),D.onResult(({data:Q})=>{d.value=Q!=null&&Q.pollsWithNoResults?Q==null?void 0:Q.pollsWithNoResults:[]});const R=le(()=>!a.value||a.value.length===0?0:(a.value||[]).filter(Q=>(Q==null?void 0:Q.verified)&&(Q==null?void 0:Q.online)&&(Q==null?void 0:Q.allowToVote)).length);function S(){const Q=qs(lo,{message:Xe("view.polls.listing.stopConfirm")});Q.onConfirm(async()=>{await In(uWe,{variables:{id:l.value.id}}).mutate(),z(),ze(Xe("success.organizer.poll.stoppedSuccessfully"),{type:"success"})}),Q.reveal()}function I(Q){e.push({name:uI,params:{id:r,pollId:Q}})}function F(Q){e.push({name:cI,params:{id:r,pollId:Q}})}function H(Q){const ue=qs(lo,{message:Xe("view.polls.listing.deleteConfirm")});ue.onConfirm(async()=>{await In(aW,{variables:{pollId:Q}}).mutate(),await D.refetch(),ze(Xe("success.organizer.poll.deletedSuccessfully"),{type:"success"})}),ue.reveal()}function q(Q){k.value=!1;const ue=qs(lo,{message:Xe("view.polls.listing.startConfirm")});ue.onConfirm(async()=>{await In(cWe,{variables:{pollId:Q}}).mutate(),await A.refetch(),await x.refetch(),await D.refetch(),ze(Xe("success.organizer.poll.startedSuccessfully"),{type:"success"}),k.value=!0}),ue.onCancel(()=>{k.value=!0}),ue.reveal()}Ur(X0,{eventId:r}).onResult(({data:Q})=>{var ve;if(parseInt((ve=Q==null?void 0:Q.newEventUser)==null?void 0:ve.eventId,10)!==parseInt(r,10))return;const ue=JSON.parse(JSON.stringify(a.value||[]));ue.push({...Q==null?void 0:Q.newEventUser}),a.value=ue}),Ur(e1,{eventId:t.event.id}).onResult(({data:Q})=>{var ce;if(!Q||!Q.eventUserLifeCycle){console.warn("[ORGANIZER DEBUG] SyncPollListing - No valid data in eventUserLifeCycle event");return}const ue=JSON.parse(JSON.stringify(a.value||[])),ve=ue.find(J=>{var ae;return parseInt(J.id,10)===parseInt((ae=Q==null?void 0:Q.eventUserLifeCycle)==null?void 0:ae.eventUserId,10)});if(!ve){console.warn("[ORGANIZER DEBUG] SyncPollListing - No matching user found for ID:",Q.eventUserLifeCycle.eventUserId);return}ve.online=(ce=Q==null?void 0:Q.eventUserLifeCycle)==null?void 0:ce.online,a.value=ue}),Ur(lW,{eventId:t.event.id}).onResult(({data:Q})=>{var ae,xe,he,Ae;if(!(Q!=null&&Q.pollAnswerLifeCycle)){console.warn("[ORGANIZER DEBUG] SyncPollListing - No valid data in pollAnswerLifeCycle event");return}const ue=parseInt((ae=Q==null?void 0:Q.pollAnswerLifeCycle)==null?void 0:ae.pollAnswersCount,10)||0,ve=parseInt((xe=Q==null?void 0:Q.pollAnswerLifeCycle)==null?void 0:xe.maxVotes,10)||0,ce=parseInt((he=Q==null?void 0:Q.pollAnswerLifeCycle)==null?void 0:he.pollUserCount,10)||0,J=parseInt((Ae=Q==null?void 0:Q.pollAnswerLifeCycle)==null?void 0:Ae.pollUserVotedCount,10)||0;(ue>0||f.value===0)&&(f.value=ue),ve>0&&ve!==h.value&&(h.value=ve),ce>0&&(g.value=ce),J>0&&(v.value=J),f.value>0&&v.value===0&&(v.value=1)}),Ur(dWe,{eventId:t.event.id}).onResult(({data:Q})=>{var ue,ve,ce,J;console.log("[ORGANIZER] Received POLL_LIFE_CYCLE event:",Q==null?void 0:Q.pollLifeCycle),(ue=Q==null?void 0:Q.pollLifeCycle)!=null&&ue.poll&&((ve=Q==null?void 0:Q.pollLifeCycle)==null?void 0:ve.state)!=="closed"&&(console.log("[ORGANIZER] Setting active poll from subscription:",Q.pollLifeCycle.poll),((ce=Q==null?void 0:Q.pollLifeCycle)==null?void 0:ce.state)==="new"&&(console.log("[ORGANIZER] New poll detected, resetting vote counters only"),A.refetch().then(ae=>{var xe;if((xe=ae==null?void 0:ae.data)!=null&&xe.activePoll){const he=ae.data.activePoll;if(he.maxVotes!==void 0){const Ae=parseInt(he.maxVotes,10)||0;h.value=Ae}if(he.answerCount!==void 0){const Ae=parseInt(he.answerCount,10)||0;f.value=Ae}}})),l.value=Q.pollLifeCycle.poll,setTimeout(()=>{x.refetch()},200)),((J=Q==null?void 0:Q.pollLifeCycle)==null?void 0:J.state)==="closed"&&(console.log("[ORGANIZER] Poll closed notification received, resetting active poll"),z(),p.refetch(),D.refetch(),ze(Xe("success.organizer.poll.stoppedSuccessfully"),{type:"info"}))});function K(){Promise.all([A.refetch(),x.refetch()]).then(()=>{s.value&&(s.value.isRefreshing=!1)}).catch(Q=>{console.error("Error refreshing poll data:",Q),s.value&&(s.value.isRefreshing=!1)})}function z(){l.value=null,c.value=null,f.value=0,h.value=0,g.value=0,v.value=0,D.refetch(),p.refetch()}function ge(){o.value=!0,E.refetch().then(()=>{o.value=!1}).catch(Q=>{console.error("Error refreshing user count:",Q),o.value=!1})}return(Q,ue)=>{var ce,J,ae;const ve=si("router-link");return P(),V(Fe,null,[l.value&&c.value?(P(),Ge(Q9e,{key:0,"active-poll":l.value,"active-poll-event-user":c.value,"active-poll-answer-count":f.value,"active-poll-max-answer":h.value,"poll-user-count":g.value,"poll-user-voted-count":v.value,onClose:S,onRefresh:K,ref_key:"activePollComponent",ref:s},null,8,["active-poll","active-poll-event-user","active-poll-answer-count","active-poll-max-answer","poll-user-count","poll-user-voted-count"])):ne("",!0),l.value?ne("",!0):(P(),V("div",fWe,[m("p",hWe,B(Q.$t("view.user.verified.noActivePoll")),1)])),m("div",mWe,[m("p",gWe,[fe(B(Q.$t("view.polls.userCountText"))+" ",1),m("span",{class:Ze(["badge",R.value>0?"text-bg-success":"text-bg-danger"])},B(R.value),3)]),m("button",{type:"button",class:"btn btn-outline-secondary btn-sm mt-1",style:{"--bs-btn-padding-y":"0","--bs-btn-padding-x":".1rem","--bs-btn-font-size":".75em"},onClick:ge,disabled:o.value},[...ue[0]||(ue[0]=[m("i",{class:"bi bi-arrow-clockwise"},null,-1)])],8,pWe)]),R.value===0?(P(),Ge(qr,{key:2,type:"danger",message:Q.$t("view.polls.noActiveUser")},null,8,["message"])):ne("",!0),((ce=d.value)==null?void 0:ce.length)>0?(P(),V("hr",vWe)):ne("",!0),l.value?(P(),Ge(qr,{key:5,type:"info",message:Q.$t("view.polls.createNewDisabledInfo")},null,8,["message"])):(P(),Ge(ve,{key:4,to:{name:M(lI)},class:"btn btn-success my-3 me-3"},{default:$e(()=>[ue[1]||(ue[1]=m("i",{class:"bi-plus bi--2xl align-middle"},null,-1)),m("span",bWe,B(Q.$t("view.polls.headlines.createTitle")),1)]),_:1},8,["to"])),!l.value&&((J=d.value)==null?void 0:J.length)>0?(P(),Ge(sW,{key:6,polls:d.value,"current-online-user-count":R.value,"start-button-disabled":!k.value,onCopy:I,onEdit:F,onRemove:H,onStart:q},null,8,["polls","current-online-user-count","start-button-disabled"])):ne("",!0),!l.value&&((ae=u.value)==null?void 0:ae.length)>0?(P(),Ge(n1,{key:7,"poll-results":u.value,"event-record":n.event},null,8,["poll-results","event-record"])):ne("",!0)],64)}}},yWe=mt`
  query polls($eventId: ID) {
    polls(eventId: $eventId) {
      id
      title
      pollAnswer
      type
      list
      possibleAnswers {
        id
        content
      }
      minVotes
      maxVotes
      allowAbstain
    }
  }
`,_We={class:"align-middle"},kWe={__name:"AsyncPollListing",props:{event:{type:Object,required:!0}},setup(n){const t=n,i=Ui().params.id,r=Li(),s=Z([]),o=le(()=>{var d,f,h,g;return(((d=t.event)==null?void 0:d.active)===!0||((f=t.event)==null?void 0:f.active)===1)&&((h=t.event)==null?void 0:h.scheduledDatetime)>0&&((g=t.event)==null?void 0:g.scheduledDatetime)<=Y_()}),a=ln(yWe,{eventId:t.event.id},{fetchPolicy:"cache-and-network"});a.onResult(({data:d})=>{s.value=d!=null&&d.polls?d==null?void 0:d.polls:[]});function l(d){r.push({name:uI,params:{id:i,pollId:d}})}function c(d){r.push({name:cI,params:{id:i,pollId:d}})}function u(d){const f=qs(lo,{message:Xe("view.polls.listing.deleteConfirm")});f.onConfirm(async()=>{await In(aW,{variables:{pollId:d}}).mutate(),await a.refetch(),ze(Xe("success.organizer.poll.deletedSuccessfully"),{type:"success"})}),f.reveal()}return(d,f)=>{var g;const h=si("router-link");return P(),V(Fe,null,[o.value?(P(),Ge(qr,{key:1,type:"info",message:d.$t("view.polls.listing.async.eventActiveCantCreatePoll")},null,8,["message"])):(P(),Ge(h,{key:0,to:{name:M(lI)},class:"btn btn-success my-3 me-3"},{default:$e(()=>[f[0]||(f[0]=m("i",{class:"bi-plus bi--2xl align-middle"},null,-1)),m("span",_We,B(d.$t("view.polls.headlines.createTitle")),1)]),_:1},8,["to"])),((g=s.value)==null?void 0:g.length)>0?(P(),Ge(sW,{key:2,polls:s.value,"show-start-button":!1,disabled:o.value,onCopy:l,onEdit:c,onRemove:u},null,8,["polls","disabled"])):ne("",!0)],64)}}},EWe={class:"events-new-title"},CWe={key:0},TWe={__name:"PollListing",setup(n){const t=nn(),e=Li(),r=Ui().params.id,s=Z(!1),o=Z(null),a=le(()=>{var c,u;return((c=o.value)==null?void 0:c.async)===!0||((u=o.value)==null?void 0:u.async)===1});return ln(Yo,{id:r,organizerId:t.user.id},{fetchPolicy:"no-cache"}).onResult(({data:c})=>{if((c==null?void 0:c.event)===null){Mt(new cn),e.push({name:mi});return}o.value=c==null?void 0:c.event,s.value=!0}),(c,u)=>(P(),Ge(Ki,{"meta-title":c.$t("navigation.views.organizerPolls")},{title:$e(()=>{var d,f;return[m("div",EWe,[fe(B(c.$t("navigation.views.organizerPolls"))+" - ",1),(d=o.value)!=null&&d.title?(P(),V("span",CWe,B((f=o.value)==null?void 0:f.title),1)):ne("",!0)])]}),header:$e(()=>[Ce(_l)]),content:$e(()=>[s.value&&a.value?(P(),Ge(kWe,{key:0,event:o.value},null,8,["event"])):s.value?(P(),Ge(wWe,{key:1,event:o.value},null,8,["event"])):ne("",!0)]),_:1},8,["meta-title"]))}},SWe=["for"],AWe=["id","name","placeholder","autocomplete","min","max"],IWe={key:1,class:"form-text text-muted"},PWe=["innerHTML"],y$={__name:"NumberInput",props:{min:{type:Number,required:!1,default:Number.MIN_SAFE_INTEGER},max:{type:Number,required:!1,default:Number.MAX_SAFE_INTEGER},label:String,placeholder:String,id:String,type:String,name:String,autocomplete:String,classes:{type:Array,default:[]},hasErrors:Boolean,errors:{type:Array,default:[]},value:{type:Number,required:!0},helpText:String},emits:["change"],setup(n,{emit:t}){const e=t,r=Z(n.value);function s(){e("change",{value:r.value})}return(o,a)=>(P(),V(Fe,null,[n.label?(P(),V("label",{key:0,for:n.id},B(n.label),9,SWe)):ne("",!0),vn(m("input",{id:n.id,"onUpdate:modelValue":a[0]||(a[0]=l=>r.value=l),name:n.name,class:Ze(["form-control",n.hasErrors?"is-invalid":null,...n.classes]),placeholder:n.placeholder,autocomplete:n.autocomplete,type:"number",min:n.min,max:n.max,onKeyup:s,onChange:s},null,42,AWe),[[Bi,r.value]]),n.helpText?(P(),V("div",IWe,[m("span",{innerHTML:n.helpText},null,8,PWe)])):ne("",!0),(P(!0),V(Fe,null,ct(n.errors,l=>(P(),V("span",{key:l.uid,class:"form-field-error text-danger"},[fe(B(o.$t("error.formValidation."+l.$validator)),1),a[1]||(a[1]=m("br",null,null,-1))]))),128))],64))}},xWe={key:0,class:"mutate-poll"},OWe={key:0,class:"alert alert-warning mb-3",role:"alert"},RWe={class:"mb-3"},VWe={class:"mb-3 card card-body bg-light"},DWe={key:0,class:"card card-body"},NWe={class:"mb-3 card card-body bg-light"},LWe={class:"row"},MWe={class:"col-12 col-md-6 mb-3"},$We=["disabled"],BWe={class:"align-middle"},FWe={class:"col-12 col-md-6 mb-3"},UWe=["disabled"],zWe={class:"align-middle"},HWe={__name:"PollForm",props:{prefillData:{type:Object,required:!1,default:null},showSubmitAndStartButton:{type:Boolean,default:!0},isSubmitting:{type:Boolean,default:!1}},emits:["submit","submitAndStart"],setup(n,{emit:t}){var D,R,S,I,F,H,q,N;const e=t,i=n;Jt(()=>{x()});const r=nn(),o=Ui().params.id,a=Z(!1),l=Z([]),c=Z(null),u=le(()=>!l.value||l.value.length===0?0:(l.value||[]).filter($=>($==null?void 0:$.verified)&&($==null?void 0:$.online)&&($==null?void 0:$.allowToVote)).length),d=le(()=>{var $;return(($=c.value)==null?void 0:$.async)===!0&&(l.value||[]).length===0});ln(Yo,{id:o,organizerId:r.user.id},{fetchPolicy:"no-cache"}).onResult(({data:$})=>{$!=null&&$.event?(c.value=$.event,console.log("[PollForm] Event loaded:",$.event),ln(Fm,{eventId:o},{fetchPolicy:"cache-and-network"}).onResult(({data:re})=>{re!=null&&re.eventUsers&&(l.value=re.eventUsers,console.log("[PollForm] Event users loaded:",re.eventUsers.length)),a.value=!0})):a.value=!0});const h=Kt({title:((D=i.prefillData)==null?void 0:D.title)??"",type:((R=i.prefillData)==null?void 0:R.type)??"SECRET",pollAnswer:((S=i.prefillData)==null?void 0:S.pollAnswer)??"yesNoAbstain",list:((I=i.prefillData)==null?void 0:I.list)??"",minVotes:((F=i.prefillData)==null?void 0:F.minVotes)??0,maxVotes:((H=i.prefillData)==null?void 0:H.maxVotes)??1,allowAbstain:((q=i.prefillData)==null?void 0:q.allowAbstain)??!1,possibleAnswers:((N=i.prefillData)==null?void 0:N.possibleAnswers)??[]}),g=le(()=>({title:{required:Bt},type:{required:Bt},pollAnswer:{required:Bt},list:{requiredIf:by(h.pollAnswer==="custom")},minVotes:{required:Bt},maxVotes:{required:Bt},allowAbstain:by(h.maxVotes<=1),possibleAnswers:{required:Bt}})),v=us(g,h),_=[{label:Xe("view.polls.create.labels.yesNo"),value:"yesNo"},{label:Xe("view.polls.create.labels.yesNoAbstain"),value:"yesNoAbstain"},{label:Xe("view.polls.create.labels.custom"),value:"custom"}],w=[{label:Xe("view.polls.create.labels.openPoll"),value:"PUBLIC"},{label:Xe("view.polls.create.labels.secretPoll"),value:"SECRET"}];function C({value:$}){h.pollAnswer=$,x()}function k({value:$}){h.list=$,p()}async function E(){if(!await v.value.$validate()){Mt(new Pr);return}h.maxVotes>1&&(h.allowAbstain=!1),e("submit",h)}async function A(){if(!i.showSubmitAndStartButton)return;if(!await v.value.$validate()){Mt(new Pr);return}e("submitAndStart",h)}function x(){switch(h.pollAnswer){case"custom":p();return;case"yesNoAbstain":h.possibleAnswers=[{content:"Ja"},{content:"Nein"},{content:"Enthaltung"}],h.list="",h.allowAbstain=!1,h.maxVotes=1,h.minVotes=0;break;case"yesNo":h.possibleAnswers=[{content:"Ja"},{content:"Nein"}];break;default:throw new Error(`Invalid answer type '${h.pollAnswer}' given. Allowed are: 'yesNoAbstain', 'yesNo', 'custom'`)}h.list="",h.allowAbstain=!1,h.maxVotes=1,h.minVotes=0}function p(){h.possibleAnswers=[];const $=h.list.split(`
`);for(const U of $)U.trim().length>0&&h.possibleAnswers.push({content:U.trim()})}return($,U)=>{var re,K,z,ge,Q,ue,ve,ce,J,ae,xe,he,Ae,We,Ee;return a.value?(P(),V("form",xWe,[d.value?(P(),V("div",OWe,[...U[8]||(U[8]=[m("i",{class:"bi bi-exclamation-triangle-fill me-2"},null,-1),m("strong",null,"Hinweis:",-1),fe(" Für asynchrone Veranstaltungen (Briefwahl) muss mindestens ein Teilnehmer vorhanden sein, um Abstimmungen erstellen zu können. ",-1)])])):ne("",!0),m("div",RWe,[Ce(yn,{label:$.$t("view.polls.create.labels.title"),errors:(re=M(v).title)==null?void 0:re.$errors,"has-errors":((z=(K=M(v).title)==null?void 0:K.$errors)==null?void 0:z.length)>0,value:h.title,placeholder:$.$t("view.polls.create.labels.title"),onChange:U[0]||(U[0]=({value:G})=>{h.title=G})},null,8,["label","errors","has-errors","value","placeholder"])]),m("p",null,B($.$t("view.polls.headlines.answerOptionsTitle")),1),m("div",VWe,[Ce(h_,{id:"poll-answer-options",items:_,value:h==null?void 0:h.pollAnswer,onChange:C},null,8,["value"]),(h==null?void 0:h.pollAnswer)==="custom"?(P(),V("div",DWe,[Ce(jP,{rows:3,label:$.$t("view.polls.create.labels.listOfAnswerOptions"),errors:(ge=M(v).list)==null?void 0:ge.$errors,"has-errors":((ue=(Q=M(v).list)==null?void 0:Q.$errors)==null?void 0:ue.length)>0,value:h.list,"help-text":$.$t("view.polls.create.labels.listOfAnswerOptionsInfo"),onChange:k},null,8,["label","errors","has-errors","value","help-text"]),Ce(y$,{label:$.$t("view.polls.create.labels.maxVotes"),errors:(ve=M(v).maxVotes)==null?void 0:ve.$errors,"has-errors":((J=(ce=M(v).maxVotes)==null?void 0:ce.$errors)==null?void 0:J.length)>0,value:h.maxVotes,min:0,classes:["w-auto"],"help-text":$.$t("view.polls.create.labels.maxVotesInfo"),onChange:U[1]||(U[1]=({value:G})=>{h.maxVotes=G})},null,8,["label","errors","has-errors","value","help-text"]),Ce(y$,{label:$.$t("view.polls.create.labels.minVotes"),errors:(ae=M(v).minVotes)==null?void 0:ae.$errors,"has-errors":((he=(xe=M(v).minVotes)==null?void 0:xe.$errors)==null?void 0:he.length)>0,value:h.minVotes,min:0,classes:["w-auto"],"help-text":$.$t("view.polls.create.labels.minVotesInfo"),onChange:U[2]||(U[2]=({value:G})=>{h.minVotes=G})},null,8,["label","errors","has-errors","value","help-text"]),Ce(Sr,{id:"allowAbstain",checked:h.allowAbstain,"onUpdate:checked":U[3]||(U[3]=G=>h.allowAbstain=G),label:$.$t("view.polls.create.labels.abstention"),errors:(Ae=M(v).allowAbstain)==null?void 0:Ae.$errors,"has-errors":((Ee=(We=M(v).allowAbstain)==null?void 0:We.$errors)==null?void 0:Ee.length)>0,onUpdate:U[4]||(U[4]=({value:G})=>{h.allowAbstain=G})},null,8,["checked","label","errors","has-errors"])])):ne("",!0)]),m("div",NWe,[Ce(h_,{id:"poll-answer-options",items:w,value:h==null?void 0:h.type,onChange:U[5]||(U[5]=({value:G})=>{h.type=G})},null,8,["value"])]),m("div",LWe,[m("div",MWe,[m("button",{class:"btn btn-primary d-block w-100",type:"submit",disabled:n.isSubmitting,onClick:U[6]||(U[6]=bt(G=>E(),["prevent"]))},[U[9]||(U[9]=m("i",{class:"bi-plus bi--2xl align-middle"},null,-1)),m("span",BWe,B($.$t("view.polls.create.labels.saveOnly")),1)],8,$We)]),m("div",FWe,[n.showSubmitAndStartButton?(P(),V("button",{key:0,class:"btn btn-secondary d-block w-100",type:"submit",disabled:u.value===0||n.isSubmitting,onClick:U[7]||(U[7]=bt(G=>A(),["prevent"]))},[U[10]||(U[10]=m("i",{class:"bi-play bi--2xl align-middle"},null,-1)),m("span",zWe,B($.$t("view.polls.create.labels.saveAndStart")),1)],8,UWe)):ne("",!0)])])])):ne("",!0)}}},fx=Yt(HWe,[["__scopeId","data-v-bff820be"]]),cW=mt`
  mutation createPoll($input: CreateNewPollInput!, $instantStart: Boolean!) {
    createPoll(input: $input, instantStart: $instantStart) {
      id
      eventId
      title
      pollAnswer
      list
      type
      maxVotes
      minVotes
      allowAbstain
      possibleAnswers {
        content
      }
    }
  }
`,WWe={class:"events-new-title"},jWe={key:0},qWe={key:0,class:"alert alert-warning mb-3",role:"alert"},GWe={__name:"NewPoll",setup(n){const t=nn(),e=Li(),r=Ui().params.id,s=Z(!1),o=Z(null),a=Z([]),l=le(()=>{var _;return!((_=o.value)!=null&&_.async)}),c=Z(!0),u=le(()=>(a.value||[]).length),d=le(()=>{var _;return((_=o.value)==null?void 0:_.async)===!0&&u.value===0});ln(Yo,{id:r,organizerId:t.user.id},{fetchPolicy:"no-cache"}).onResult(({data:_})=>{var w;if((_==null?void 0:_.event)===null){Mt(new cn),e.push({name:mi});return}o.value=_==null?void 0:_.event,s.value=!0,((w=_==null?void 0:_.event)==null?void 0:w.async)===!0?(console.log("[NewPoll] Async event detected, loading users..."),ln(Fm,{eventId:_.event.id},{fetchPolicy:"cache-and-network"}).onResult(({data:k})=>{k!=null&&k.eventUsers?(a.value=k.eventUsers,console.log("[NewPoll] Event users loaded:",k.eventUsers.length)):(a.value=[],console.log("[NewPoll] No event users found"))})):console.log("[NewPoll] Not an async event, skipping user load")});async function h(_){if(d.value){ze("Abstimmungen können in asynchronen Veranstaltungen nur erstellt werden, wenn mindestens ein Teilnehmer vorhanden ist.",{type:"error"});return}c.value=!1,await v(_,!1),await e.push({name:io}),ze(Xe("success.organizer.poll.createdSuccessfully"),{type:"success"}),c.value=!0}async function g(_){if(d.value){ze("Abstimmungen können in asynchronen Veranstaltungen nur erstellt werden, wenn mindestens ein Teilnehmer vorhanden ist.",{type:"error"});return}c.value=!1;const w=qs(lo,{message:Xe("view.polls.listing.startConfirm")});w.onConfirm(async()=>{await v(_,!0),await e.push({name:io}),ze(Xe("success.organizer.poll.createdAndStartedSuccessfully"),{type:"success"}),c.value=!0}),w.onCancel(()=>{c.value=!0}),w.reveal()}function v(_,w){return In(cW,{variables:{input:{eventId:r,title:_.title,type:_.type,pollAnswer:_.pollAnswer,list:_.list,possibleAnswers:_.possibleAnswers,minVotes:_.minVotes,maxVotes:_.maxVotes,allowAbstain:_.allowAbstain},instantStart:w}}).mutate()}return(_,w)=>(P(),Ge(Ki,{"meta-title":_.$t("navigation.views.organizerPollsNew")},{title:$e(()=>{var C,k;return[m("div",WWe,[fe(B(_.$t("navigation.views.organizerPollsNew"))+" - ",1),(C=o.value)!=null&&C.title?(P(),V("span",jWe,B((k=o.value)==null?void 0:k.title),1)):ne("",!0)])]}),header:$e(()=>[Ce(_l)]),content:$e(()=>[d.value?(P(),V("div",qWe,[...w[0]||(w[0]=[m("i",{class:"bi bi-exclamation-triangle-fill me-2"},null,-1),m("strong",null,"Hinweis:",-1),fe(" Für asynchrone Veranstaltungen (Briefwahl) muss mindestens ein Teilnehmer vorhanden sein, um Abstimmungen erstellen zu können. ",-1)])])):ne("",!0),Ce(fx,{"show-submit-and-start-button":l.value,"is-submitting":!c.value||d.value,onSubmit:h,onSubmitAndStart:g},null,8,["show-submit-and-start-button","is-submitting"])]),_:1},8,["meta-title"]))}},uW=mt`
  query poll($id: ID) {
    poll(id: $id) {
      id
      title
      pollAnswer
      type
      list
      possibleAnswers {
        id
        content
      }
      minVotes
      maxVotes
      allowAbstain
    }
  }
`,KWe=mt`
  mutation updatePoll($input: UpdatePollInput!, $instantStart: Boolean!) {
    updatePoll(input: $input, instantStart: $instantStart) {
      id
      eventId
      title
      pollAnswer
      list
      type
      possibleAnswers {
        content
      }
    }
  }
`,YWe={class:"events-new-title"},QWe={key:0},ZWe={__name:"EditPoll",setup(n){const t=nn(),e=Li(),i=Ui(),r=i.params.id,s=i.params.pollId,o=Z(!0),a=Z(!1),l=Z(null),c=Z(null),u=Kt({title:"",type:"PUBLIC",pollAnswer:"yesNoAbstain",list:"",minVotes:0,maxVotes:1,allowAbstain:!1,possibleAnswers:[]}),d=le(()=>{var w;return!((w=l.value)!=null&&w.async)});let f;ln(Yo,{id:r,organizerId:t.user.id},{fetchPolicy:"no-cache"}).onResult(({data:w})=>{if((w==null?void 0:w.event)===null){Mt(new cn),e.push({name:mi});return}l.value=w==null?void 0:w.event,f=ln(uW,{id:s},{fetchPolicy:"no-cache"}),f.onResult(({data:C})=>{var k,E,A,x,p,D,R,S;if((C==null?void 0:C.poll)===null){Mt(new cn),e.push({name:io});return}c.value=C==null?void 0:C.poll,u.title=((k=C==null?void 0:C.poll)==null?void 0:k.title)??"",u.type=((E=C==null?void 0:C.poll)==null?void 0:E.type)??"PUBLIC",u.pollAnswer=((A=C==null?void 0:C.poll)==null?void 0:A.pollAnswer)??"yesNoAbstain",u.list=((x=C==null?void 0:C.poll)==null?void 0:x.list)??"",u.minVotes=((p=C==null?void 0:C.poll)==null?void 0:p.minVotes)??0,u.maxVotes=((D=C==null?void 0:C.poll)==null?void 0:D.maxVotes)??1,u.allowAbstain=((R=C==null?void 0:C.poll)==null?void 0:R.allowAbstain)??!1,u.possibleAnswers=((S=C==null?void 0:C.poll)==null?void 0:S.possibleAnswers)??[],a.value=!0})});async function g(w){o.value=!1,await _(w,!1),await e.push({name:io}),ze(Xe("success.organizer.poll.updatedSuccessfully"),{type:"success"}),o.value=!0}async function v(w){o.value=!1;const C=qs(lo,{message:Xe("view.polls.listing.startConfirm")});C.onConfirm(async()=>{await _(w,!0),await e.push({name:io}),ze(Xe("success.organizer.poll.updatedAndStartedSuccessfully"),{type:"success"}),o.value=!0}),C.onCancel(()=>{o.value=!0}),C.reveal()}function _(w,C){return In(KWe,{variables:{input:{id:s,eventId:r,title:w.title,type:w.type,pollAnswer:w.pollAnswer,list:w.list,possibleAnswers:w.possibleAnswers,minVotes:w.minVotes,maxVotes:w.maxVotes,allowAbstain:w.allowAbstain},instantStart:C}}).mutate()}return(w,C)=>(P(),Ge(Ki,{"meta-title":w.$t("navigation.views.organizerPollsEdit")},{title:$e(()=>{var k,E;return[m("div",YWe,[fe(B(w.$t("navigation.views.organizerPollsEdit"))+" - ",1),(k=l.value)!=null&&k.title?(P(),V("span",QWe,B((E=l.value)==null?void 0:E.title),1)):ne("",!0)])]}),header:$e(()=>[Ce(_l)]),content:$e(()=>[a.value?(P(),Ge(fx,{key:0,"prefill-data":u,"show-submit-and-start-button":d.value,"is-submitting":!o.value,onSubmit:g,onSubmitAndStart:v},null,8,["prefill-data","show-submit-and-start-button","is-submitting"])):ne("",!0)]),_:1},8,["meta-title"]))}},JWe={class:"events-new-title"},XWe={key:0},eje={__name:"CopyPoll",setup(n){const t=nn(),e=Li(),i=Ui(),r=i.params.id,s=i.params.pollId,o=Z(!0),a=Z(!1),l=Z(null),c=Z(null),u=Kt({title:"",type:"PUBLIC",pollAnswer:"yesNoAbstain",list:"",minVotes:0,maxVotes:1,allowAbstain:!1,possibleAnswers:[]});let d;ln(Yo,{id:r,organizerId:t.user.id},{fetchPolicy:"no-cache"}).onResult(({data:_})=>{if((_==null?void 0:_.event)===null){Mt(new cn),e.push({name:mi});return}l.value=_==null?void 0:_.event,d=ln(uW,{id:s},{fetchPolicy:"no-cache"}),d.onResult(({data:w})=>{var C,k,E,A,x,p,D,R;if((w==null?void 0:w.poll)===null){Mt(new cn),e.push({name:io});return}c.value=w==null?void 0:w.poll,u.title=((C=w==null?void 0:w.poll)==null?void 0:C.title)??"",u.type=((k=w==null?void 0:w.poll)==null?void 0:k.type)??"PUBLIC",u.pollAnswer=((E=w==null?void 0:w.poll)==null?void 0:E.pollAnswer)??"yesNoAbstain",u.list=((A=w==null?void 0:w.poll)==null?void 0:A.list)??"",u.minVotes=((x=w==null?void 0:w.poll)==null?void 0:x.minVotes)??0,u.maxVotes=((p=w==null?void 0:w.poll)==null?void 0:p.maxVotes)??1,u.allowAbstain=((D=w==null?void 0:w.poll)==null?void 0:D.allowAbstain)??!1,u.possibleAnswers=((R=w==null?void 0:w.poll)==null?void 0:R.possibleAnswers)??[],a.value=!0})});async function h(_){o.value=!1;try{await v(_,!1),await e.push({name:io}),ze(Xe("success.organizer.poll.createdSuccessfully"),{type:"success"})}catch(w){throw console.error("Error creating poll:",w),o.value=!0,w}}async function g(_){o.value=!1;try{await v(_,!0),await e.push({name:io}),ze(Xe("success.organizer.poll.createdAndStartedSuccessfully"),{type:"success"})}catch(w){throw console.error("Error creating and starting poll:",w),o.value=!0,w}}function v(_,w){return In(cW,{variables:{input:{eventId:r,title:_.title,type:_.type,pollAnswer:_.pollAnswer,list:_.list,possibleAnswers:_.possibleAnswers,minVotes:_.minVotes,maxVotes:_.maxVotes,allowAbstain:_.allowAbstain},instantStart:w}}).mutate()}return(_,w)=>(P(),Ge(Ki,{"meta-title":_.$t("navigation.views.organizerPollsCopy")},{title:$e(()=>{var C,k;return[m("div",JWe,[fe(B(_.$t("navigation.views.organizerPollsCopy"))+" - ",1),(C=l.value)!=null&&C.title?(P(),V("span",XWe,B((k=l.value)==null?void 0:k.title),1)):ne("",!0)])]}),header:$e(()=>[Ce(_l)]),content:$e(()=>[a.value?(P(),Ge(fx,{key:0,"prefill-data":u,"is-submitting":!o.value,onSubmit:h,onSubmitAndStart:g},null,8,["prefill-data","is-submitting"])):ne("",!0)]),_:1},8,["meta-title"]))}},tje={class:"mutate-event-user"},nje={class:"mb-3"},ije={class:"mb-3"},rje={class:"mb-3"},sje={class:"mb-3"},oje={key:0,class:"mb-3"},aje={class:"btn btn-primary mt-5 mb-3"},lje={class:"align-middle"},cje={__name:"EventUserForm",props:{prefillData:{type:Object,required:!1,default:null}},emits:["submit"],setup(n,{emit:t}){var l,c,u,d,f;const e=t,i=n,r=Kt({verified:((l=i.prefillData)==null?void 0:l.verified)??!1,allowToVote:((c=i.prefillData)==null?void 0:c.allowToVote)??!1,username:((u=i.prefillData)==null?void 0:u.username)??"",publicName:((d=i.prefillData)==null?void 0:d.publicName)??"",voteAmount:((f=i.prefillData)==null?void 0:f.voteAmount)??1}),s=le(()=>({username:{required:Bt},publicName:{required:Bt},voteAmount:{requiredIf:by(r.allowToVote)}})),o=us(s,r);async function a(){if(!await o.value.$validate()){Mt(new Pr);return}r.allowToVote||(r.voteAmount=0),e("submit",r)}return(h,g)=>{var v,_,w,C,k,E,A,x,p,D,R,S,I,F,H,q;return P(),V("div",tje,[m("form",{onSubmit:bt(a,["prevent"])},[m("div",nje,[Ce(Sr,{checked:r.verified,"onUpdate:checked":g[0]||(g[0]=N=>r.verified=N),label:h.$t("view.event.create.labels.eventUser.verified"),errors:(v=M(o).verified)==null?void 0:v.$errors,"has-errors":((w=(_=M(o).verified)==null?void 0:_.$errors)==null?void 0:w.length)>0,onUpdate:g[1]||(g[1]=({value:N})=>{r.verified=N})},null,8,["checked","label","errors","has-errors"])]),m("div",ije,[Ce(Sr,{checked:r.allowToVote,"onUpdate:checked":g[2]||(g[2]=N=>r.allowToVote=N),label:h.$t("view.event.create.labels.eventUser.allowToVote"),errors:(C=M(o).allowToVote)==null?void 0:C.$errors,"has-errors":((E=(k=M(o).allowToVote)==null?void 0:k.$errors)==null?void 0:E.length)>0,onUpdate:g[3]||(g[3]=({value:N})=>{r.allowToVote=N})},null,8,["checked","label","errors","has-errors"])]),m("div",rje,[Ce(yn,{label:h.$t("view.event.create.labels.eventUser.username"),errors:(A=M(o).username)==null?void 0:A.$errors,"has-errors":((p=(x=M(o).username)==null?void 0:x.$errors)==null?void 0:p.length)>0,value:r.username,onChange:g[4]||(g[4]=({value:N})=>{r.username=N})},null,8,["label","errors","has-errors","value"])]),m("div",sje,[Ce(yn,{label:h.$t("view.event.create.labels.eventUser.publicName"),errors:(D=M(o).publicName)==null?void 0:D.$errors,"has-errors":((S=(R=M(o).publicName)==null?void 0:R.$errors)==null?void 0:S.length)>0,value:r.publicName,onChange:g[5]||(g[5]=({value:N})=>{r.publicName=N})},null,8,["label","errors","has-errors","value"])]),r.allowToVote?(P(),V("div",oje,[Ce(yn,{label:h.$t("view.event.create.labels.eventUser.voteAmount"),errors:(I=M(o).voteAmount)==null?void 0:I.$errors,"has-errors":((H=(F=M(o).voteAmount)==null?void 0:F.$errors)==null?void 0:H.length)>0,value:(q=r.voteAmount)==null?void 0:q.toString(),type:"number",onChange:g[6]||(g[6]=({value:N})=>{r.voteAmount=N})},null,8,["label","errors","has-errors","value"])])):ne("",!0),m("button",aje,[g[7]||(g[7]=m("i",{class:"bi-play bi--2xl align-middle"},null,-1)),m("span",lje,B(h.$t("view.event.create.labels.eventUser.submit")),1)])],32)])}}},dW=Yt(cje,[["__scopeId","data-v-e3751c15"]]),fW=mt`
  mutation createEventUser($input: CreateEventUserInput!) {
    createEventUser(input: $input) {
      id
      publicName
      username
      allowToVote
      verified
      voteAmount
    }
  }
`,uje={class:"events-new-title"},dje={key:0},fje={__name:"NewEventUser",setup(n){const t=nn(),e=Li(),r=Ui().params.id,s=Z(!1),o=Z(null);ln(Yo,{id:r,organizerId:t.user.id},{fetchPolicy:"no-cache"}).onResult(({data:c})=>{if((c==null?void 0:c.event)===null){Mt(new cn),e.push({name:mi});return}o.value=c==null?void 0:c.event,s.value=!0});async function l({username:c,verified:u,allowToVote:d,publicName:f,voteAmount:h}){const{mutate:g}=In(fW,{variables:{input:{eventId:r,username:c,verified:u,allowToVote:d,publicName:f,voteAmount:h}}});await g(),await e.push({name:Ul}),ze(Xe("success.organizer.eventUser.createdSuccessfully"),{type:"success"})}return(c,u)=>(P(),Ge(Ki,{"meta-title":c.$t("navigation.views.organizerEventsNew")},{title:$e(()=>{var d,f;return[m("div",uje,[fe(B(c.$t("navigation.views.organizerEventUserNew"))+" - ",1),(d=o.value)!=null&&d.title?(P(),V("span",dje,B((f=o.value)==null?void 0:f.title),1)):ne("",!0)])]}),header:$e(()=>[Ce(_l,{routes:c.routes},null,8,["routes"])]),content:$e(()=>[Ce(dW,{onSubmit:l})]),_:1},8,["meta-title"]))}};function _$(n){return String(n).toLowerCase().match(/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/i)}const hje={class:"multiple-event-user-new"},mje={class:"mb-3"},gje={class:"mb-3"},pje={key:0,class:"preview-table mb-4"},vje={class:"table-responsive"},bje={class:"table table-bordered table-sm"},wje={class:"table-light"},yje={class:"text-center"},_je={key:0},kje={key:1},Eje={key:0,class:"badge bg-success"},Cje={key:1,class:"badge bg-secondary"},Tje={key:0,class:"badge bg-danger",title:"{{user.errors.join(', ')}}"},Sje={key:1,class:"badge bg-success"},Aje={class:"summary"},Ije={class:"text-muted"},Pje={key:1,class:"progress-feedback mt-3"},xje={class:"progress"},Oje=["aria-valuenow","aria-valuemax"],Rje={class:"text-muted"},Vje={key:0},Dje={key:2,class:"alert alert-danger mt-3"},Nje={class:"mb-0"},Lje=["disabled"],Mje={class:"align-middle"},$je={__name:"MultipleNewEventUserForm",props:{isProcessing:{type:Boolean,default:!1},progress:{type:Object,default:()=>({current:0,total:0})}},emits:["submit"],setup(n,{emit:t}){const e=t,i=Z(""),r=Z([]),s=Z([]),o=le(()=>s.value.length>0),a=Kt({tokenBasedLogin:!1,usernames:[],usersWithData:[]}),l=le(()=>({usernames:{required:Bt}})),c=us(l,a);function u(){var w;const _=(((w=i.value)==null?void 0:w.split(`
`))??[]).filter(C=>C.trim()!=="");a.usersWithData=[];try{return _.forEach((C,k)=>{const E=C.split(";").map(D=>D.trim()),A=E[0],x=E[1]||"",p=E[2]?parseInt(E[2],10):null;if(A==="")throw{index:k,message:`Leerer Benutzername/E-Mail in Zeile ${k+1}`};if(a.tokenBasedLogin&&!_$(A))throw{index:k,message:`Ungültige E-Mail-Adresse in Zeile ${k+1}: ${A}`};if(p!==null&&(isNaN(p)||p<0))throw{index:k,message:`Ungültige Stimmenzahl in Zeile ${k+1}: ${E[2]}`};a.usersWithData.push({identifier:A,publicName:x,voteAmount:p,allowToVote:p!==null&&p>0})}),a.usernames=a.usersWithData.map(C=>C.identifier),!0}catch(C){return Mt(new cn(C.message||`Die Benutzerliste enthält fehlerhafte Eintragungen in Zeile ${C.index+1}`)),r.value=[],!1}}function d({value:v}){i.value=v,f()}function f(){var v;try{const w=(((v=i.value)==null?void 0:v.split(`
`))??[]).filter(A=>A.trim()!==""),C=[],k=[],E=new Set;w.forEach((A,x)=>{const p=A.split(";").map(F=>F.trim()),D=p[0],R=p[1]||"",S=p[2]?parseInt(p[2],10):null,I=[];D===""?I.push("Leerer Benutzername/E-Mail"):a.tokenBasedLogin&&!_$(D)&&I.push("Ungültige E-Mail-Adresse"),D&&E.has(D)?I.push("Doppelter Benutzername/E-Mail"):D&&E.add(D),S!==null&&(isNaN(S)||S<0)&&I.push("Ungültige Stimmenzahl"),C.push({lineIndex:x+1,identifier:D,publicName:R,voteAmount:S,allowToVote:S!==null&&S>0,errors:I,hasErrors:I.length>0}),I.length>0&&k.push({line:x+1,messages:I})}),r.value=C,s.value=k}catch(_){console.error("Fehler bei der Vorschau-Generierung",_)}}function h(){return r.value.reduce((v,_)=>v+(_.voteAmount!==null?_.voteAmount:0),0)}async function g(){if(f(),o.value){Mt(new Pr("Die Benutzerliste enthält Fehler"));return}const v=u();if(!await c.value.$validate()||!v){Mt(new Pr);return}e("submit",{usernames:a.usernames,tokenBasedLogin:a.tokenBasedLogin,usersWithData:a.usersWithData})}return(v,_)=>{var w,C,k,E,A,x;return P(),V("div",hje,[m("form",{onSubmit:bt(g,["prevent"])},[m("div",mje,[Ce(Sr,{id:"tokenBasedLogin",checked:a.tokenBasedLogin,"onUpdate:checked":_[0]||(_[0]=p=>a.tokenBasedLogin=p),label:v.$t("view.event.create.labels.eventUser.tokenBasedLogin"),"help-text":v.$t("view.event.create.labels.eventUser.tokenBasedLoginHelp"),errors:(w=M(c).tokenBasedLogin)==null?void 0:w.$errors,"has-errors":((k=(C=M(c).tokenBasedLogin)==null?void 0:C.$errors)==null?void 0:k.length)>0,onUpdate:_[1]||(_[1]=({value:p})=>{a.tokenBasedLogin=p})},null,8,["checked","label","help-text","errors","has-errors"])]),m("div",gje,[Ce(jP,{id:"eventMultipleUser",label:v.$t("view.event.create.labels.eventMultipleUser.importFormat",{defaultValue:`${a.tokenBasedLogin?"E-Mail":"Benutzername"};Name;Stimmen`}),"help-text":`<strong>Format:</strong> ${a.tokenBasedLogin?"email":"username"}[;public_name][;vote_amount]<br><br><strong>Beispiele (eine Zeile pro Teilnehmer):</strong><br>user1@example.com;Max Mustermann;5<br>user2@example.com;Erika Musterfrau<br>user3@example.com;;3<br>user4@example.com<br><br>Ein Eintrag pro Zeile (leere Zeilen werden ignoriert). <strong>Teilnehmer mit Stimmenzahl > 0 erhalten automatisch Stimmrecht.</strong>`,errors:(E=M(c).usernames)==null?void 0:E.$errors,"has-errors":((x=(A=M(c).usernames)==null?void 0:A.$errors)==null?void 0:x.length)>0,rows:12,cols:5,onChange:d},null,8,["label","help-text","errors","has-errors"])]),r.value.length>0?(P(),V("div",pje,[_[7]||(_[7]=m("h5",null,"Vorschau der zu erstellenden Benutzer",-1)),m("div",vje,[m("table",bje,[m("thead",wje,[m("tr",null,[_[2]||(_[2]=m("th",{style:{width:"45px"}},"Zeile",-1)),m("th",null,B(a.tokenBasedLogin?"E-Mail":"Benutzername"),1),_[3]||(_[3]=m("th",null,"Anzeigename",-1)),_[4]||(_[4]=m("th",null,"Stimmen",-1)),_[5]||(_[5]=m("th",null,"Stimmrecht",-1)),_[6]||(_[6]=m("th",null,"Status",-1))])]),m("tbody",null,[(P(!0),V(Fe,null,ct(r.value,(p,D)=>(P(),V("tr",{key:D,class:Ze({"table-danger":p.hasErrors})},[m("td",yje,B(p.lineIndex),1),m("td",null,B(p.identifier),1),m("td",null,[p.publicName?(P(),V("span",kje,B(p.publicName),1)):(P(),V("em",_je,"Leer"))]),m("td",null,B(p.voteAmount!==null?p.voteAmount:0),1),m("td",null,[p.allowToVote?(P(),V("span",Eje,"Ja")):(P(),V("span",Cje,"Nein"))]),m("td",null,[p.hasErrors?(P(),V("span",Tje,"Fehler")):(P(),V("span",Sje,"OK"))])],2))),128))])])]),m("div",Aje,[m("small",Ije," Insgesamt: "+B(r.value.length)+" Benutzer, davon "+B(r.value.filter(p=>p.allowToVote).length)+" mit Stimmrecht. Gesamtstimmen: "+B(h()),1)])])):ne("",!0),n.isProcessing?(P(),V("div",Pje,[m("div",xje,[m("div",{class:"progress-bar",role:"progressbar",style:Di({width:`${n.progress.current/n.progress.total*100}%`}),"aria-valuenow":n.progress.current,"aria-valuemin":0,"aria-valuemax":n.progress.total},B(n.progress.current)+" / "+B(n.progress.total),13,Oje)]),m("small",Rje,[fe(B(v.$t("view.event.create.labels.eventUser.processing"))+" ",1),n.progress.current>0&&n.progress.total>0?(P(),V("span",Vje," ("+B(Math.round(n.progress.current/n.progress.total*100))+"%) ",1)):ne("",!0)])])):ne("",!0),o.value?(P(),V("div",Dje,[_[8]||(_[8]=m("h5",null,"Fehler in der Benutzerliste",-1)),m("ul",Nje,[(P(!0),V(Fe,null,ct(s.value,(p,D)=>(P(),V("li",{key:D}," Zeile "+B(p.line)+": "+B(p.messages.join(", ")),1))),128))])])):ne("",!0),m("button",{class:"btn btn-primary mt-5 mb-3",disabled:n.isProcessing||o.value},[m("i",{class:Ze([n.isProcessing?"bi-hourglass-split":"bi-play","bi--2xl align-middle"])},null,2),m("span",Mje,B(v.$t(n.isProcessing?"view.event.create.labels.eventUser.processing":"view.event.create.labels.eventUser.submit")),1)],8,Lje)],32)])}}},Bje=Yt($je,[["__scopeId","data-v-791f2377"]]),Fje=mt`
  mutation createEventUser($input: CreateEventUserAuthTokenInput!) {
    createEventUserAuthToken(input: $input)
  }
`,Uje={class:"events-new-title"},zje={key:0},Hje={key:0,class:"alert alert-warning mt-3"},Wje={key:0},k$=25,jje=200,qje={__name:"NewMultipleEventUser",setup(n){const t=nn(),e=Li(),r=Ui().params.id,s=Z(!1),o=Z(null),a=Z(!1),l=Kt({current:0,total:0,processing:!1}),c=Kt({show:!1,total:0,success:0,failed:0,errors:[]}),u=ln(Yo,{id:r,organizerId:t.user.id},{fetchPolicy:"no-cache"}),{mutate:d}=In(fW),{mutate:f}=In(Fje);u.onResult(({data:C})=>{if((C==null?void 0:C.event)===null){Mt(new cn),e.push({name:mi});return}o.value=C==null?void 0:C.event,s.value=!0});function h(C){var k,E,A;return(E=(k=C.graphQLErrors)==null?void 0:k[0])!=null&&E.message?C.graphQLErrors[0].message:(A=C.networkError)!=null&&A.message?C.networkError.message:typeof C=="string"?C:C.message||"Ein unbekannter Fehler ist aufgetreten"}async function g(C,k,E=3){var x,p,D;let A;for(let R=0;R<E;R++)try{return{success:!0,data:await(k?f:d)({input:C})}}catch(S){if(A=S,(D=(p=(x=S.graphQLErrors)==null?void 0:x[0])==null?void 0:p.message)!=null&&D.includes("already exists"))break;if(R<E-1){await new Promise(I=>setTimeout(I,Math.pow(2,R)*1e3));continue}}return{success:!1,error:h(A)}}async function v(C,k,E){for(const A of C)try{const x=await g(A,k);x.success?E.successful.push({username:A.username||A.email,result:x.data}):E.failed.push({username:A.username||A.email,error:x.error})}catch(x){E.failed.push({username:A.username||A.email,error:h(x)})}finally{l.current++}}async function _(C,k){const E={successful:[],failed:[]},A=[];for(let x=0;x<C.length;x+=k$)A.push(C.slice(x,x+k$));for(let x=0;x<A.length;x++){const p=A[x];try{await v(p,k,E)}catch(D){console.error(`Batch ${x+1} failed:`,D)}x<A.length-1&&await new Promise(D=>setTimeout(D,jje))}return E}async function w({usernames:C,tokenBasedLogin:k,usersWithData:E}){a.value=!0,l.current=0,l.total=C.length,c.show=!1,c.errors=[];try{const A=E?E.map(p=>({eventId:r,verified:!0,allowToVote:p.allowToVote,voteAmount:p.voteAmount!==null?p.voteAmount:0,publicName:p.publicName||"",[k?"email":"username"]:p.identifier})):C.map(p=>({eventId:r,verified:!0,allowToVote:!1,voteAmount:0,[k?"email":"username"]:p})),x=await _(A,k);c.total=C.length,c.success=x.successful.length,c.failed=x.failed.length,c.errors=x.failed.map(p=>({username:p.username,message:p.error})),c.show=x.failed.length>0,x.successful.length>0&&ze.success(Xe("success.organizer.eventUser.createdSuccessfully",{count:x.successful.length})),x.failed.length>0&&ze.warning(Xe("warning.organizer.eventUser.someUsersFailed",{failed:x.failed.length,total:C.length})),x.failed.length===0&&await e.push({name:Ul})}catch(A){Mt(A),ze.error(Xe("error.organizer.eventUser.processingFailed"))}finally{a.value=!1}}return(C,k)=>(P(),Ge(Ki,{"meta-title":C.$t("navigation.views.organizerEventUserMultipleNew")},{title:$e(()=>{var E,A;return[m("div",Uje,[fe(B(C.$t("navigation.views.organizerEventUserMultipleNew"))+" - ",1),(E=o.value)!=null&&E.title?(P(),V("span",zje,B((A=o.value)==null?void 0:A.title),1)):ne("",!0)])]}),header:$e(()=>[Ce(_l,{routes:C.routes},null,8,["routes"])]),content:$e(()=>[Ce(Bje,{"is-processing":a.value,progress:l,onSubmit:w},null,8,["is-processing","progress"]),c.show?(P(),V("div",Hje,[m("h5",null,B(C.$t("view.event.create.labels.eventUser.errorSummary.title")),1),m("p",null,B(C.$t("view.event.create.labels.eventUser.errorSummary.description",{total:c.total,success:c.success,failed:c.failed})),1),c.errors.length?(P(),V("ul",Wje,[(P(!0),V(Fe,null,ct(c.errors,(E,A)=>(P(),V("li",{key:A},B(E.username)+": "+B(E.message),1))),128))])):ne("",!0)])):ne("",!0)]),_:1},8,["meta-title"]))}},Gje=Yt(qje,[["__scopeId","data-v-7e54fb21"]]),Kje=mt`
  query eventUser($id: ID) {
    eventUser(id: $id) {
      id
      eventId
      publicName
      verified
      allowToVote
      online
      username
      voteAmount
      pollHints
    }
  }
`,Yje={class:"events-new-title"},Qje={key:0},Zje={__name:"EditEventUser",setup(n){const t=nn(),e=Li(),i=Ui(),r=i.params.id,s=i.params.eventUserId,o=Z(!1),a=Z(null),l=Z(null),c=Kt({verified:!1,allowToVote:!1,username:"",publicName:"",voteAmount:1});let u;ln(Yo,{id:r,organizerId:t.user.id},{fetchPolicy:"no-cache"}).onResult(({data:h})=>{if((h==null?void 0:h.event)===null){Mt(new cn),e.push({name:mi});return}a.value=h==null?void 0:h.event,u=ln(Kje,{id:s},{fetchPolicy:"no-cache"}),u.onResult(({data:g})=>{var v,_,w,C,k;if((g==null?void 0:g.eventUser)===null){Mt(new cn),e.push({name:mi});return}l.value=(g==null?void 0:g.eventUser)??null,c.verified=((v=l.value)==null?void 0:v.verified)??!1,c.allowToVote=((_=l.value)==null?void 0:_.allowToVote)??!1,c.username=((w=l.value)==null?void 0:w.username)??"",c.publicName=((C=l.value)==null?void 0:C.publicName)??"",c.voteAmount=((k=l.value)==null?void 0:k.voteAmount)??1,o.value=!0})});async function f({username:h,verified:g,allowToVote:v,publicName:_,voteAmount:w}){var k;const{mutate:C}=In(iW,{variables:{input:{id:(k=l.value)==null?void 0:k.id,eventId:r,username:h,verified:g,allowToVote:v,publicName:_,voteAmount:w}}});await C(),await e.push({name:Ul}),ze(Xe("success.organizer.eventUser.updatedSuccessfully"),{type:"success"})}return(h,g)=>(P(),Ge(Ki,{"meta-title":h.$t("navigation.views.organizerEventUserEdit")},{title:$e(()=>{var v,_;return[m("div",Yje,[fe(B(h.$t("navigation.views.organizerEventUserEdit"))+" - ",1),(v=a.value)!=null&&v.title?(P(),V("span",Qje,B((_=a.value)==null?void 0:_.title),1)):ne("",!0)])]}),header:$e(()=>[Ce(_l,{routes:h.routes},null,8,["routes"])]),content:$e(()=>[o.value?(P(),Ge(dW,{key:0,"prefill-data":c,onSubmit:f},null,8,["prefill-data"])):ne("",!0)]),_:1},8,["meta-title"]))}},Jje={class:"container mt-5"},Xje={class:"title d-block mb-5"},eqe={class:"text-center"},tqe={class:"h4 text-center"},nqe={class:"content d-block"},hW={__name:"PageLayout",props:{metaTitle:{type:String,default:"Einfach die Wahl haben"}},setup(n){return Ev({title:n.metaTitle??"Einfach die Wahl haben",titleTemplate:e=>{const r=JSON.parse(localStorage.getItem("systemSettings")||"{}").titleSuffix||"digitalwahl.org";return`${e} - ${r}`},htmlAttrs:{lang:"de"},meta:[{name:"description",content:"Einfach die Wahl haben."},{name:"viewport",content:"width=device-width, initial-scale=1"}]}),(e,i)=>(P(),V("main",Jje,[ht(e.$slots,"actions"),ht(e.$slots,"logo"),m("div",Xje,[m("h1",eqe,[ht(e.$slots,"title")]),m("h2",tqe,[ht(e.$slots,"subtitle")])]),m("div",nqe,[ht(e.$slots,"content")])]))}};function iqe(n){let t=0;for(let e=0;e<n.length;e++){const i=n.charCodeAt(e);t=(t<<5)-t+i,t=t&t}return Math.abs(t).toString(36)}const rqe={class:"container text-center"},sqe=["src"],oqe={key:0},aqe={class:"mb-3"},lqe={class:"mb-3"},cqe=["value"],uqe={class:"mb-3"},dqe={class:"btn btn-primary btn-block float-end"},fqe={__name:"EventUserLogin",props:{event:{type:Object,required:!0}},emits:["exit"],setup(n,{emit:t}){var h,g;const e=t,i=n,r=nn(),s=new URLSearchParams(window.location.search),o=s.get("username")!==null,a=s.get("publicname")||s.get("publicName")||"",l=(((h=i.event)==null?void 0:h.publicnameReadonly)===!0||((g=i.event)==null?void 0:g.publicnameReadonly)===1)&&a!=="",c=Kt({username:s.get("username")??"",password:o&&i.event.allowMagicLink?iqe(s.get("username")+i.event.createDatetime):"",publicName:a||""}),u=le(()=>({username:{required:Bt},password:{required:Bt},publicName:{required:Bt}})),d=us(u,c);async function f(){var k;if(!await d.value.$validate()){Mt(new Pr);return}const{username:_,password:w,publicName:C}=c;Ene(_,w,C,((k=i.event)==null?void 0:k.id)??0).then(({token:E})=>r.loginUser(E)).then(()=>ze(Xe("success.login.eventUser",{userName:C}),{type:"success"})).then(()=>e("exit")).catch(E=>{Mt(E,{autoClose:!1})})}return(v,_)=>(P(),Ge(hW,null,{logo:$e(()=>[m("div",rqe,[n.event.logo?(P(),V("img",{key:0,src:n.event.logo,alt:"Event Logo",class:"event-logo img img-fluid"},null,8,sqe)):ne("",!0)])]),title:$e(()=>[fe(B(n.event.title),1)]),subtitle:$e(()=>[fe(B(v.$t(n.event.active?"view.login.headline.userWelcomeTo":"view.login.headline.inactiveEvent")),1)]),content:$e(()=>{var w,C,k,E,A,x,p,D,R;return[n.event.active?(P(),V("div",oqe,[m("form",{class:"card card-body event-user-login-form m-auto",autocomplete:"off",onSubmit:bt(f,["prevent"])},[m("div",aqe,[Ce(yn,{label:v.$t("view.login.label.username"),errors:(w=M(d).username)==null?void 0:w.$errors,"has-errors":((k=(C=M(d).username)==null?void 0:C.$errors)==null?void 0:k.length)>0,value:c.username,"help-text":M(o)?"":v.$t("view.login.label.usernameHelp"),autocomplete:v.off,readonly:M(o),classes:[M(o)?"form-control-plaintext":""],onChange:_[0]||(_[0]=({value:S})=>{c.username=S})},null,8,["label","errors","has-errors","value","help-text","autocomplete","readonly","classes"])]),m("div",lqe,[n.event.allowMagicLink&&M(o)?(P(),V("input",{key:0,value:c.password,type:"hidden"},null,8,cqe)):ne("",!0),n.event.allowMagicLink&&M(o)?ne("",!0):(P(),Ge(yn,{key:1,label:v.$t("view.login.label.password"),errors:(E=M(d).password)==null?void 0:E.$errors,"has-errors":((x=(A=M(d).password)==null?void 0:A.$errors)==null?void 0:x.length)>0,value:c.password,type:"password",autocomplete:"one-time-code","help-text":v.$t("view.login.label.passwordHelp"),onChange:_[1]||(_[1]=({value:S})=>{c.password=S})},null,8,["label","errors","has-errors","value","help-text"]))]),m("div",uqe,[Ce(yn,{label:v.$t("view.login.label.publicName"),errors:(p=M(d).publicName)==null?void 0:p.$errors,"has-errors":((R=(D=M(d).publicName)==null?void 0:D.$errors)==null?void 0:R.length)>0,value:c.publicName,"help-text":v.$t("view.login.label.publicNameHelp"),autocomplete:v.off,readonly:M(l),classes:[M(l)?"form-control-plaintext":""],disabled:M(l),onChange:_[2]||(_[2]=({value:S})=>{c.publicName=S})},null,8,["label","errors","has-errors","value","help-text","autocomplete","readonly","classes","disabled"])]),m("button",dqe,B(v.$t("view.login.submitToEvent")),1)],32)])):(P(),Ge(qr,{key:1,type:"info",message:v.$t("view.login.inactiveEventText")},null,8,["message"]))]}),_:1}))}},E$=Yt(fqe,[["__scopeId","data-v-0ef77d3b"]]),hqe={class:"d-print-none text-center"},mW={__name:"NotVerifiedWidget",props:{eventUser:{type:Object,required:!0}},setup(n){return(t,e)=>(P(),V("div",hqe,[e[0]||(e[0]=m("div",{class:"spinner-border mb-5",style:{width:"3rem",height:"3rem"},role:"status"},[m("span",{class:"visually-hidden"},"Loading...")],-1)),m("h1",null,B(t.$t("view.user.pending.tankYou")),1),m("h2",null,B(t.$t("view.user.pending.loggedInAs"))+" "+B(n.eventUser.username),1),Ce(qr,{type:"info",message:t.$t("view.user.pending.bodyText")},null,8,["message"])]))}},mqe={id:"overlay",class:"h-100 w-100 position-fixed d-flex align-items-center align-content-center justify-content-center text-center"},gqe={class:"content alert alert-danger"},pqe={class:"d-flex justify-content-center gap-3"},vqe={__name:"ConnectionLostOverlay",setup(n){Li();const t=nn();function e(){location.reload()}async function i(){try{await Am(),localStorage.clear(),await t.logoutUser(),location.reload()}catch(r){console.error("Fehler beim Logout:",r),localStorage.clear(),location.reload()}}return(r,s)=>(P(),V("div",mqe,[m("span",gqe,[m("h1",null,B(r.$t("error.network.connectionLost")),1),m("div",pqe,[m("button",{class:"btn-lg btn btn-secondary py-2 d-print-none",onClick:e},[s[0]||(s[0]=m("i",{class:"me-3 bi bi-arrow-repeat bi--1xl"},null,-1)),fe(" "+B(r.$t("navigation.reload")),1)]),m("button",{class:"btn-lg btn btn-danger py-2 d-print-none",onClick:i},[s[1]||(s[1]=m("i",{class:"me-3 bi bi-x-square bi--1xl"},null,-1)),fe(" "+B(r.$t("navigation.logOut")),1)])])])]))}},gW=Yt(vqe,[["__scopeId","data-v-88f09f37"]]),bqe={class:"dashboard-stats"},wqe={key:0,class:"text-success small"},yqe={key:1,class:"text-info small"},_qe={key:2},kqe={class:"badge text-bg-info"},Eqe={key:3,class:"badge text-bg-success badge-pill status-indicator"},Cqe={key:4,class:"badge text-bg-danger badge-pill status-indicator"},Tqe={key:0,class:"d-print-none"},Sqe={__name:"DashboardStats",props:{event:{type:Object,required:!0},eventUser:{type:Object,required:!0},highlightStatusChange:{type:Boolean,required:!0}},setup(n){return(t,e)=>(P(),V(Fe,null,[m("div",bqe,[m("h1",null,B(n.event.title),1),m("h2",null,B(t.$t("view.user.verified.welcome"))+" "+B(n.eventUser.publicName),1),m("p",{class:Ze({pulse:n.highlightStatusChange})},[fe(B(n.eventUser.username)+" - ",1),n.eventUser.allowToVote?(P(),V("span",wqe,B(t.$t("view.event.user.member")),1)):(P(),V("span",yqe,B(t.$t("view.event.user.visitor")),1)),n.eventUser.allowToVote?(P(),V("span",_qe,[fe(" | "+B(t.$t("view.polls.modal.ballotCount"))+": ",1),m("span",kqe,B(n.eventUser.voteAmount),1)])):ne("",!0),e[0]||(e[0]=m("span",null," | Status: ",-1)),n.eventUser.online?(P(),V("span",Eqe,"online")):(P(),V("span",Cqe,"offline"))],2),e[1]||(e[1]=m("hr",{class:"d-print-none"},null,-1)),n.event.description?(P(),V("p",Tqe,B(n.event.description),1)):ne("",!0)]),e[2]||(e[2]=m("hr",null,null,-1))],64))}},pW=Yt(Sqe,[["__scopeId","data-v-1e194a69"]]);function Aqe(n=10){let t="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=e.length;let r=0;for(;r<n;)t+=e.charAt(Math.floor(Math.random()*i)),r+=1;return t}const Iqe={class:"check-group"},Pqe={key:0},xqe={class:"badge bg-primary"},Oqe={key:1},Rqe={__name:"CheckboxInputGroup",props:{classes:{type:Array,default:[]},hasErrors:Boolean,errors:{type:Array,default:[]},helpText:String,items:Array,maxCheckedItems:Number,minCheckedItems:Number},emits:["change"],setup(n,{emit:t}){const e=t,i=n,r=Aqe(),s=Kt(i.items.map(c=>(c.checked=!1,c.disabled=!1,c))),o=Z(0),a=le(()=>i.maxCheckedItems-o.value);function l(c){c.checked=!c.checked;const u=s.filter(h=>h.checked),d=s.filter(h=>!h.checked),f=s.filter(h=>h.disabled);o.value=u.length,i.maxCheckedItems&&o.value>=i.maxCheckedItems?d.forEach(h=>h.disabled=!0):f.length>0&&o.value<i.maxCheckedItems&&f.forEach(h=>h.disabled=!1),e("change",s.filter(h=>h.checked).map(h=>h.value))}return(c,u)=>(P(),V("div",Iqe,[n.maxCheckedItems&&a.value>0?(P(),V("p",Pqe,[u[0]||(u[0]=fe(" Sie können noch ",-1)),m("span",xqe,B(a.value),1),u[1]||(u[1]=fe(" Stimmen abgeben. ",-1))])):n.maxCheckedItems&&a.value===0?(P(),V("p",Oqe," Sie können keine Stimmen mehr abgeben ")):ne("",!0),(P(!0),V(Fe,null,ct(s,d=>(P(),Ge(Sr,{id:M(r)+d.value,key:d.value,label:d.label,disabled:d.disabled,value:d.value,"has-errors":n.hasErrors,onChange:f=>l(d)},null,8,["id","label","disabled","value","has-errors","onChange"]))),128))]))}};function hx(){let n={getItem:function(h){try{return window.localStorage.getItem(h)}catch(g){return console.error(`[Storage] Fehler beim Lesen von ${h}:`,g),null}},setItem:function(h,g){try{return window.localStorage.setItem(h,g),!0}catch(v){return console.error(`[Storage] Fehler beim Schreiben von ${h}:`,v),!1}},removeItem:function(h){try{return window.localStorage.removeItem(h),!0}catch(g){return console.error(`[Storage] Fehler beim Löschen von ${h}:`,g),!1}},key:function(h){try{return window.localStorage.key(h)}catch(g){return console.error(`[Storage] Fehler beim Zugriff auf Index ${h}:`,g),null}},get length(){try{return window.localStorage.length}catch(h){return console.error("[Storage] Fehler beim Zugriff auf length:",h),0}}},t=!0;try{window.localStorage.setItem("test-storage","test"),window.localStorage.removeItem("test-storage")}catch(h){console.warn("[Storage] localStorage nicht verfügbar, verwende Memory-Fallback:",h),t=!1}if(!t){const h={};n={getItem:function(g){return h[g]||null},setItem:function(g,v){return h[g]=v,!0},removeItem:function(g){return delete h[g],!0},key:function(g){return Object.keys(h)[g]||null},get length(){return Object.keys(h).length}}}function e(h){return`poll-persistence-${h}`}function i(h,g){return`vote-state-${g}-${h}`}function r(h,g,v){if(!h||!g||!v)return console.warn("[Storage] canVote: Ungültige Parameter",{pollId:h,eventUser:g,event:v}),!0;const _=v.id||(typeof v=="object"&&v.value?v.value.id:null);if(!_)return console.warn("[Storage] canVote: Keine Event-ID gefunden",{event:v}),!0;const w=i(h,_);let C={used:0};try{const x=n.getItem(w);x&&(C=JSON.parse(x)||{used:0})}catch(x){console.error(`[Storage] canVote: Fehler beim Parsen von ${w}:`,x)}const k=parseInt(g.voteAmount||1,10),E=parseInt(v.multivoteType||0,10),A=parseInt(C.used||0,10);return!(A>=k||A>0&&E===2)}function s(h,g,v=null,_=null,w=null){if(n.setItem(e(h),g),_){const C=i(h,_);let k={};try{const p=n.getItem(C);p&&(k=JSON.parse(p))}catch(p){console.error("[DEBUG:STORAGE] Fehler beim Lesen des vorherigen Zustands:",p)}let E;g===99999?E=v!==null?v:0:E=v!==null?v:g-1,k.voteAmount!==void 0&&E>k.voteAmount&&(console.warn(`[DEBUG:STORAGE] Begrenze gespeicherte Stimmen auf maximal erlaubte Anzahl: ${k.voteAmount}`),E=k.voteAmount);const A={counter:g,used:E,maxVotesToUse:w,updatedAt:Date.now(),voteAmount:k.voteAmount};n.setItem(C,JSON.stringify(A));const x=n.getItem(C);try{const p=JSON.parse(x)}catch(p){console.error("[DEBUG:STORAGE] Fehler beim Parsen des gespeicherten Werts:",p)}}}function o(h,g=null){if(!g){const w=[];for(let C=0;C<n.length;C++){const k=n.key(C);k&&k.includes("vote-state-")&&k.includes(`-${h}`)&&w.push(k)}if(w.length===1){const C=w[0].split("-");C.length>=3&&(g=C[2])}}if(g){const w=i(h,g),C=n.getItem(w),k=JSON.parse(C||'{"counter": 1}');return k.counter===99999?(k.used||0)+1:k.counter||1}const v=n.getItem(e(h))||1,_=parseInt(v,10);return _===99999?1:_}function a(h,g,v=null){if(!g||!h)return v;const _=i(h,g),w=JSON.parse(n.getItem(_)||"{}");return w.maxVotesToUse!==void 0?w.maxVotesToUse:v}function l(h,g,v){if(!g||!h)return;const _=i(h,g),C={...JSON.parse(n.getItem(_)||"{}"),maxVotesToUse:v,updatedAt:Date.now()};n.setItem(_,JSON.stringify(C))}function c(h,g){if(!g||!h){if(!h)return console.warn("[DEBUG:STORAGE] getUsedVotes: Keine Poll-ID vorhanden, kann keine Stimmen abrufen"),0;const k=[];for(let E=0;E<n.length;E++){const A=n.key(E);A&&A.includes("vote-state-")&&A.includes(`-${h}`)&&k.push(A)}if(k.length===1){const E=k[0].split("-");E.length>=3&&(g=E[2])}else{if(k.length===0)return console.warn("[DEBUG:STORAGE] getUsedVotes: Keine passenden Schlüssel gefunden"),0;{console.warn(`[DEBUG:STORAGE] getUsedVotes: Mehrere passende Schlüssel (${k.length}) gefunden, verwende den neuesten`);let E=null,A=0;for(const x of k)try{const p=JSON.parse(n.getItem(x)||"{}");p.updatedAt&&p.updatedAt>A&&(A=p.updatedAt,E=x)}catch(p){console.error(`[DEBUG:STORAGE] getUsedVotes: Fehler beim Parsen von ${x}:`,p)}if(E){const x=E.split("-");x.length>=3&&(g=x[2])}else return console.warn("[DEBUG:STORAGE] getUsedVotes: Kein neuester Schlüssel gefunden"),0}}}const v=i(h,g),_=n.getItem(v);return JSON.parse(_||'{"used": 0}').used||0}function u(h,g){if(!g||!h)return;const v=i(h,g),_={counter:1,used:0,maxVotesToUse:null,updatedAt:Date.now()};n.setItem(v,JSON.stringify(_))}function d(h,g,v=null){if(!g||!h)return;const _=i(h,g),w={counter:1,used:0,maxVotesToUse:v,updatedAt:Date.now()};n.setItem(_,JSON.stringify(w))}function f(h,g,v){if(!h||!g||!v){console.warn("[Storage] saveVote: Ungültige Parameter",{pollId:h,eventUser:g,event:v});return}const _=v.id||(typeof v=="object"&&v.value?v.value.id:null);if(!_){console.warn("[Storage] saveVote: Keine Event-ID gefunden",{event:v});return}const w=i(h,_),C=parseInt(g.voteAmount||1,10),k={counter:99999,used:C,maxVotesToUse:C,voteAmount:C,completed:!0,updatedAt:Date.now()};n.setItem(w,JSON.stringify(k))}return{canVote:r,upsertPollState:s,restoreVoteCounter:o,getUsedVotes:c,resetVoteState:u,resetVoteStateButKeepMaxVotes:d,getMaxVotesToUse:a,setMaxVotesToUse:l,saveVote:f}}const Vqe=mt`
  mutation createPollSubmitAnswer($input: PollSubmitAnswerInput!) {
    createPollSubmitAnswer(input: $input)
  }
`,Dqe=mt`
  mutation createBulkPollSubmitAnswer($input: BulkPollSubmitAnswerInput!) {
    createBulkPollSubmitAnswer(input: $input)
  }
`,SS=mt`
  query userVoteCycle($eventUserId: ID!, $pollId: ID!) {
    userVoteCycle(eventUserId: $eventUserId, pollId: $pollId) {
      voteCycle
      maxVotes
    }
  }
`,xl=new Map;typeof window<"u"&&(window.votingProcessModule={usedVotesCount:0,voteCounter:1});function mx(n,t){const e=Z(!1),i=Z(!1),r=Z(1),s=Z(0),o=Z(1),a=hx(),l=Z(()=>{}),c=Z(null),u=Z(!1),d=pl(),f=Z(0),h=Z(Date.now().toString()+"-"+Math.random().toString(36).substring(2,15)+"-"+crypto.getRandomValues(new Uint32Array(1))[0].toString(36)),g=Z(null),v=Z(!1);function _(S){l.value=S}function w(){const S=h.value;return xl.set(S,{timestamp:Date.now(),isActive:!0,expectedVotes:r.value}),S}function C(){return xl.has(h.value)&&xl.get(h.value).isActive===!0}function k(){if(xl.has(h.value)){const S=xl.get(h.value);S.isActive=!1,xl.set(h.value,S)}}function E(S){const I=s.value;if(o.value,console.log(`[DEBUG:VOTING] resetVoteCountersForNewPoll aufgerufen: newPollId=${S}, currentPollId=${c.value}, usedVotesCount=${I}`),S!==c.value){const q=S===c.value;console.log(`[DEBUG:VOTING] Neue Poll erkannt, isContinuation=${q} (wird immer false sein!)`),q||(console.log(`[DEBUG:VOTING] Setze usedVotesCount von ${I} auf 0 zurück`),s.value=0,o.value=1)}else console.log("[DEBUG:VOTING] Gleiche Poll, KEIN Reset");const F=c.value;c.value=S,v.value=!1;const H=t&&typeof t.value=="object"?t.value:t;if(H&&H.id)if(F!==null&&F!==S){const q=a.getMaxVotesToUse(S,H.id);a.resetVoteStateButKeepMaxVotes(S,H.id,q),localStorage.removeItem(`poll_form_data_${F}`)}else a.getMaxVotesToUse(S,H.id);else console.warn("[DEBUG:VOTING] Konnte Zustand nicht zurücksetzen: Event-ID nicht verfügbar");k()}async function A(S,I,F=null){var Q,ue,ve,ce,J,ae,xe;if(!S)return console.error("[ERROR:VOTING] Keine Formular-Daten für Stimmabgabe!"),!1;if(!I||!I.value)return console.error("[ERROR:VOTING] Kein gültiges Poll-Objekt für Stimmabgabe!"),!1;if(window._newPollActive===!0)return console.error("[ERROR:VOTING] Neue Poll wurde aktiviert während eine Stimmabgabe im Gange war!"),R(),k(),i.value=!1,!1;if(typeof window<"u"&&window.pollClosedEventReceived===!0)return console.error("[ERROR:VOTING] Poll wurde bereits geschlossen, blockiere Stimmabgabe!"),R(),k(),!1;const H=s.value,q=o.value;if(I.value&&I.value.closed)return console.warn("[DEBUG:VOTING] Poll ist geschlossen, blockiere Stimmabgabe!"),!1;const N=t&&typeof t.value=="object"?t.value:t;if(N&&N.id&&I.value&&I.value.id){const he=a.getMaxVotesToUse(I.value.id,N.id);he!==null&&he>0&&(F===null||F!==he)&&(F=he)}const $=((Q=n.value)==null?void 0:Q.voteAmount)||0;if((s.value||0)>=$)return v.value=!0,!1;if(C())return!1;g.value=Date.now(),f.value=0,e.value=!0,i.value=!0,u.value=!0,v.value=!1;const re=w();let K=1;if(S.useAllAvailableVotes?K=n.value.voteAmount-s.value:F!==null&&F>0&&(K=F),s.value>0&&o.value>1||(o.value=1),r.value=K,xl.has(re)){const he=xl.get(re);he.expectedVotes=K,xl.set(re,he)}const ge=Z(()=>{});try{const he=((ue=I.value)==null?void 0:ue.id)??0;if(E(he),H>0&&s.value===0&&(s.value=H),q>1&&o.value===1&&(o.value=q),I.value&&I.value.closed)return e.value=!1,u.value=!1,i.value=!1,k(),!1;const Ae=n.value.voteAmount,We=Ae-s.value,Ee=he&&N&&N.id?a.getMaxVotesToUse(he,N.id):null;if(Ee!==null&&Ee>0?(F===null||F!==Ee)&&(F=Ee):he&&N&&N.id&&console.warn(`[DEBUG:VOTING] Keine gespeicherte Stimmanzahl gefunden für: pollId=${he}, eventId=${N.id}`),We<=0)return console.error("[DEBUG:VOTING] Keine verbleibenden Stimmen mehr. Blockiere weitere Abstimmungsversuche."),he&&(t.value&&t.value.id?a.upsertPollState(he,99999,pe,t.value.id):a.upsertPollState(he,99999)),e.value=!1,i.value=!1,u.value=!1,k(),v.value=!0,await l.value(),!1;let G=1;const Y=he&&N&&N.id?a.getMaxVotesToUse(he,N.id):null;if(S.useAllAvailableVotes)G=We;else if(Y!==null&&Y>0){const Re=parseInt(Y,10);G=Math.min(Re,We)}else if(F!==null&&F>0){const Re=parseInt(F,10);G=Math.min(Re,We),he&&N&&N.id?a.setMaxVotesToUse(he,N.id,Re):console.error(`[DEBUG:VOTING] Konnte Stimmanzahl nicht speichern: Poll=${he}, Event=${JSON.stringify(N)}`)}const oe=Ae-s.value;if(oe<=0)return!1;const Ue=Math.min(G,oe);let Oe=0;r.value=Ue;let Le=0;try{(ve=n.value)!=null&&ve.id&&((ce=I.value)!=null&&ce.id)&&(Le=((ae=(J=(await d.client.query({query:SS,variables:{eventUserId:n.value.id.toString(),pollId:I.value.id.toString()},fetchPolicy:"network-only",errorPolicy:"all"})).data)==null?void 0:J.userVoteCycle)==null?void 0:ae.voteCycle)||0,console.log(`[DEBUG:VOTING] Server-Vote-Cycle abgerufen: ${Le} für User ${n.value.id}, Poll ${I.value.id}`))}catch(Re){console.error("[DEBUG:VOTING] Fehler beim Abrufen des Server-Vote-Cycles:",Re),Le=0}const Ye=Le>s.value;let te=1;if(S.useAllAvailableVotes?te=We:F!==null&&F>0&&(te=F),window&&(window._lastRequestedVoteCount=te,console.warn(`[DEBUG:VOTING] Benutzeranfrage gespeichert: ${te} Stimmen`)),console.warn(`[DEBUG:VOTING] Reload-Status: ${Ye?"Reload erkannt":"Keine Reload"} (serverVoteCycle=${Le}, usedVotesCount=${s.value}, userRequestedVotes=${te})`),Ue>0)if(await x(S,I,!1)){Oe++,f.value=1,console.warn(`[DEBUG:VOTING] Erste Stimme abgegeben, localSuccessCount=${Oe}`);const Me=s.value||0;if(Me>=Ae&&Ae>0)return console.warn(`[DEBUG:VOTING] ✅ Alle Stimmen bereits abgegeben via Bulk-Vote (${Me}/${Ae}), beende handleFormSubmit SOFORT`),!0}else return typeof window<"u"&&(window.pollClosedEventReceived===!0||window._newPollActive===!0)?console.warn("[DEBUG:VOTING] Erste Stimme nicht abgegeben - Poll wurde geschlossen oder gewechselt. Normal."):console.warn("[DEBUG:VOTING] Erste Stimme konnte nicht abgegeben werden. Verarbeitung wird beendet."),!1;else console.warn(`[DEBUG:VOTING] Keine Stimmen mehr verfügbar (adjustedVotesToUse=${Ue})`),f.value=0;const se=Ue-1;if(console.warn(`[DEBUG:VOTING] Verbleibende zu verarbeitende Stimmen: ${se} (adjustedVotesToUse=${Ue}, isReload=${Ye})`),se>0){if(I.value&&I.value.closed)return console.warn("[DEBUG:VOTING] Poll wurde zwischenzeitlich geschlossen. Batch-Verarbeitung wird abgebrochen."),!1;let Me;if(Me=se,Me<=0)return console.warn(`[DEBUG:VOTING] Keine verbleibenden Stimmen zum Verarbeiten (remainingVotesToProcess=${Me})`),!0;const Ie=Math.max(0,Ae-s.value);Me=Math.min(Me,Ie);let Se=1;if(window&&window._lastRequestedVoteCount&&window._lastRequestedVoteCount>0&&(Se=window._lastRequestedVoteCount,console.warn(`[DEBUG:VOTING] Benutzeranfrage gefunden: ${Se} Stimmen`)),console.warn(`[DEBUG:VOTING] Stimmen-Berechnung: votesStillToProcess=${se}, max=${Ae}, used=${s.value}, trueRemaining=${Ie}, userRequested=${Se}, finalToProcess=${Me}`),he&&N&&N.id){const ie=a.getMaxVotesToUse(he,N.id);if(ie!==null&&ie>0)if(Ye)if(window&&window._lastRequestedVoteCount&&window._lastRequestedVoteCount>0){const _e=Math.min(window._lastRequestedVoteCount,Ie);console.warn(`[DEBUG:VOTING] RELOAD: Respektiere Benutzeranfrage: ${_e} Stimmen`),Me=_e}else Me>ie&&(Me=ie);else if(window&&window._lastRequestedVoteCount&&window._lastRequestedVoteCount>0){const _e=Math.min(window._lastRequestedVoteCount-1,Ie);console.warn(`[DEBUG:VOTING] Respektiere Benutzeranfrage: ${_e+1} Stimmen (minus 1 bereits verarbeitet)`),Me=_e}else Me>ie-1&&(Me=ie-1)}else if(console.warn(`[DEBUG:VOTING] Konnte gespeichertes Limit nicht abrufen: Poll=${he}, Event=${JSON.stringify(N)}`),window&&window._lastRequestedVoteCount&&window._lastRequestedVoteCount>0)if(Ye){const ie=Math.min(window._lastRequestedVoteCount,Ie);console.warn(`[DEBUG:VOTING] FALLBACK+RELOAD: Respektiere Benutzeranfrage: ${ie} Stimmen`),Me=ie}else{const ie=Math.min(window._lastRequestedVoteCount-1,Ie);console.warn(`[DEBUG:VOTING] FALLBACK: Respektiere Benutzeranfrage: ${ie+1} Stimmen (minus 1 bereits verarbeitet)`),Me=ie}let ye=0;for(let ie=0;ie<Me;ie+=500){if(I.value&&I.value.closed)return console.warn("[DEBUG:VOTING] Poll wurde während der Batch-Verarbeitung geschlossen. Verarbeitung wird SOFORT abgebrochen."),k(),i.value=!1,R(),u.value=!1,e.value=!1,v.value=!1,!1;if(typeof window<"u"&&window.pollClosedEventReceived===!0)return console.warn("[DEBUG:VOTING] Poll wurde global als geschlossen markiert während der Batch-Verarbeitung. Abbruch!"),k(),i.value=!1,R(),u.value=!1,e.value=!1,v.value=!1,!1;const _e=[],Je=Math.min(500,Me-ie),ut=Math.max(0,Ae-(s.value+Oe)),ft=Math.min(Je,ut);ft<Je&&console.warn(`[DEBUG:VOTING] Begrenze Batch-Größe auf ${ft} (statt ${Je}) wegen verbleibender Stimmen`);for(let ee=0;ee<ft;ee++)_e.push(x(S,I,!1));let Ot=!1,Qt=0;const me=3;for(;!Ot&&Qt<me;)try{if(I.value&&I.value.closed)return console.warn("[DEBUG:VOTING] Poll wurde bei Promise.all geschlossen. Verarbeitung wird abgebrochen."),!1;if(typeof window<"u"&&window.pollClosedEventReceived===!0)return console.warn("[DEBUG:VOTING] Poll global als geschlossen markiert bei Promise.all. Abbruch!"),!1;const ee=await Promise.all(_e);if(I.value&&I.value.closed||typeof window<"u"&&window.pollClosedEventReceived===!0){console.warn("[DEBUG:VOTING] Poll wurde während Promise.all geschlossen. Speichere erfolgreiche Stimmen.");const rt=ee.filter(Rt=>Rt===!0).length;return rt>0&&(Oe+=rt,f.value=Oe+1,console.warn(`[DEBUG:VOTING] ${rt} erfolgreiche Stimmen trotz Poll-Schließung gezählt.`),typeof window<"u"&&(window._pollClosedDuringVoting=!0,window._successfulVotesBeforeClose=Oe+1)),!0}const Te=ee.filter(rt=>rt===!0).length;Oe+=Te,f.value=Oe+1,Ot=!0,ye=0}catch(ee){if(I.value&&I.value.closed)return console.warn("[DEBUG:VOTING] Poll wurde während eines Fehlers geschlossen. Speichere bisherige erfolgreiche Stimmen."),Oe>0&&typeof window<"u"&&(window._pollClosedDuringVoting=!0,window._successfulVotesBeforeClose=Oe+1),!0;if(typeof window<"u"&&window.pollClosedEventReceived===!0)return console.warn("[DEBUG:VOTING] Poll global als geschlossen markiert während eines Fehlers. Speichere bisherige Stimmen."),Oe>0&&typeof window<"u"&&(window._pollClosedDuringVoting=!0,window._successfulVotesBeforeClose=Oe+1),!0;if(Qt++,ye++,console.error(`Fehler bei der Batch-Verarbeitung (Versuch ${Qt}/${me}):`,ee),Qt<me){const Te=Math.min(100*2**ye,2e3);await new Promise(rt=>setTimeout(rt,Te))}}if(ie+500<Me){const ee=ie/Me,Te=Math.min(1,(Me-ie)/1e3),rt=ye>0?1.5:1,Rt=30,Gn=Math.min(ee*Te*250,120),Kn=Rt+Gn*rt,yt=Kn*.3,Zr=Math.random()*yt-yt/2,ai=Math.max(10,Math.round(Kn+Zr));console.warn(`[DEBUG:VOTING] Adaptive Pause zwischen Batches: ${ai}ms (Basis=${Rt}, Adaptiv=${Gn}, Last=${rt})`),await new Promise(Fn=>setTimeout(Fn,ai))}}}if(f.value=Oe,Oe>500&&(console.warn(`[DEBUG:VOTING] Explizite Freigabe nach großem Batch von ${Oe} Stimmen`),u.value=!1,e.value=!1,i.value=!1,typeof window<"u")){window._pollFormSubmitting=!1,window._isProcessingVotes=!1,window._currentlyProcessingBatch=!1;try{window.dispatchEvent(new CustomEvent("voting:complete",{detail:{timestamp:Date.now(),usedVotes:s.value}}))}catch(Re){console.error("[DEBUG:VOTING] Fehler beim Auslösen des voting:complete Events:",Re)}}if(Oe>0){if(Ye&&(console.warn(`[DEBUG:VOTING] Bei Reload: usedVotesCount war vor Abstimmung ${s.value}`),console.warn(`[DEBUG:VOTING] Bei Reload: Verarbeite ${Oe} neue Stimmen für diesen Batch`)),typeof window<"u")try{window.dispatchEvent(new CustomEvent("voting:progress",{detail:{count:Oe,total:s.value}}))}catch(Me){console.error("[DEBUG:VOTING] Fehler beim Feuern des voting:progress Events:",Me)}const Re=n.value.voteAmount;if(Ye&&Le>0){const Me=Math.max(Le,s.value),Ie=Me+Oe;if(Ie>Re){const Se=Math.max(0,Re-Me);console.warn(`[DEBUG:VOTING] Reload-Fall: Begrenze Stimmenaddition auf ${Se} (statt ${Oe})`),s.value=Me+Se}else s.value=Ie}else if(s.value+Oe>Re){const Ie=Math.max(0,Re-s.value);console.warn(`[DEBUG:VOTING] Begrenze Stimmenaddition auf ${Ie} (statt ${Oe})`),s.value+=Ie}else s.value+=Oe;console.warn(`[DEBUG:VOTING] usedVotesCount nach Aktualisierung: ${s.value}/${Re}`)}else console.warn("[DEBUG:VOTING] Keine neuen Stimmen in diesem Batch (localSuccessCount = 0)");if(i.value=!1,u.value=!1,e.value=!1,typeof window<"u"){window._pollFormSubmitting=!1,window._isProcessingVotes=!1,window._currentlyProcessingBatch=!1;try{window.dispatchEvent(new CustomEvent("voting:complete",{detail:{timestamp:Date.now(),usedVotes:s.value}}))}catch(Re){console.error("[DEBUG:VOTING] Fehler beim Auslösen des voting:complete Events:",Re)}}k(),console.log("[DEBUG:VOTING] ALLE UI-Sperren wurden zurückgesetzt nach erfolgreicher Stimmabgabe");const pe=n.value.voteAmount;s.value>=pe?(v.value=!0,s.value>pe&&(console.warn(`[DEBUG:VOTING] Stimmenzähler korrigiert: ${s.value} auf ${pe}`),s.value=pe)):(v.value=!1,s.value>pe&&(console.warn(`[DEBUG:VOTING] Zusätzliche Korrektur: usedVotesCount begrenzt von ${s.value} auf ${pe}`),s.value=pe,v.value=!0),i.value&&(i.value=!1)),e.value=!1,u.value=!1,i.value=!1,typeof window<"u"&&(window._pollFormSubmitting=!1,window._isProcessingVotes=!1,window._currentlyProcessingBatch=!1),s.value<n.value.voteAmount&&!v.value&&console.log("[DEBUG:VOTING] Noch Stimmen übrig für Split-Voting, alle UI-Sperren garantiert freigegeben");for(let Re=1;Re<=5;Re++)setTimeout(()=>{(e.value||u.value||i.value)&&(console.log(`[DEBUG:VOTING] UI-Flags zurücksetzen (Versuch ${Re}/5)`),e.value=!1,u.value=!1,i.value=!1,typeof window<"u"&&(window._pollFormSubmitting=!1,window._isProcessingVotes=!1,window._currentlyProcessingBatch=!1))},1e3*Re);if(s.value>=Ae)he&&(t.value&&t.value.id?a.upsertPollState(he,99999,s.value,t.value.id):a.upsertPollState(he,99999)),o.value=1,ge.value=async()=>{await new Promise(Re=>setTimeout(Re,500)),await l.value()};else{if(H>0&&s.value<H&&(s.value=H),he&&t.value&&t.value.id){const Re=a.restoreVoteCounter(he,t.value.id),Me=s.value+1,Ie=n.value.voteAmount||0,Se=Math.min(Me,Ie);Re>Se?o.value=Math.min(Re,Ie):o.value=Se}else{const Re=n.value.voteAmount||0;o.value=Math.min(s.value+1,Re)}if(t.value&&t.value.id)a.upsertPollState(he,o.value,s.value,t.value.id);else{const Re=t&&typeof t=="object"?t:null,Me=(Re==null?void 0:Re.id)||((xe=Re==null?void 0:Re.value)==null?void 0:xe.id);Me?a.upsertPollState(he,o.value,s.value,Me):(console.warn("[DEBUG:VOTING] KRITISCH: Keine Event-ID verfügbar! Dies kann zu Inkonsistenzen führen."),a.upsertPollState(he,o.value,s.value))}ge.value=()=>{}}return!0}catch(he){console.error("Fehler bei der Stimmabgabe:",he),i.value=!1,e.value=!1,u.value=!1,k(),e.value=!1,i.value=!1,u.value=!1;try{if(typeof window<"u"){window._pollFormSubmitting=!1,window._isProcessingVotes=!1,window._currentlyProcessingBatch=!1;try{const Ae=Date.now();if(!window._lastVotingErrorTimestamp||Ae-window._lastVotingErrorTimestamp>50){window._lastVotingErrorTimestamp=Ae;const Ee=`error-${Ae}-${Math.random().toString(36).substring(2,9)}`;window.dispatchEvent(new CustomEvent("voting:error",{detail:{timestamp:Ae,error:"Error during vote processing",id:Ee,source:"errorHandler"}}))}}catch(Ae){console.error("[DEBUG:VOTING] Fehler beim Auslösen des voting:error Events:",Ae)}typeof window.releaseUILocks=="function"&&window.releaseUILocks()}}catch(Ae){console.error("[DEBUG:VOTING] Fehler beim Zurücksetzen der UI-Sperren:",Ae)}return!1}finally{try{await ge.value();const he=n.value.voteAmount;s.value>=he&&(v.value=!0),u.value=!1,e.value=!1,k()}catch(he){console.error("Fehler im Update-Callback",he),u.value=!1,e.value=!1,i.value=!1,k()}}}async function x(S,I,F){var K,z,ge,Q,ue,ve;if(I.value&&I.value.closed)return console.warn("[DEBUG:VOTING] Poll ist geschlossen. Stimmabgabe wird abgebrochen."),k(),i.value=!1,u.value=!1,e.value=!1,typeof R=="function"&&R(),!1;if(!S)return console.error("[ERROR:VOTING] Keine Formular-Daten vorhanden für Stimmabgabe!"),!1;if(c.value&&I.value&&I.value.id&&c.value!==I.value.id)return console.error(`[ERROR:VOTING] Poll-ID-Mismatch! Aktuelle Poll: ${c.value}, Versuchte Stimmabgabe für: ${I.value.id}`),!1;if(typeof window<"u"&&window._currentActivePollId!==null&&window._currentActivePollId!==void 0&&I.value&&I.value.id&&window._currentActivePollId!==I.value.id)return window._currentActivePollId=I.value.id,k(),R(),!1;const H=n.value.voteAmount||0,q=s.value||0,N=Math.max(0,H-q);if(N<=0)return!1;if(S.useAllAvailableVotes&&N>1){let ce;if(S.abstain)return ce={eventUserId:n.value.id,pollId:((K=I.value)==null?void 0:K.id)??0,type:I.value.type,answerContent:ss.global.tc("view.polls.modal.abstain"),possibleAnswerId:null,voteCount:N},await p(ce);if(S.singleAnswer&&!((z=S.multipleAnswers)!=null&&z.length)){if(!I.value||!I.value.possibleAnswers||!Array.isArray(I.value.possibleAnswers))return console.error(`[ERROR:VOTING] possibleAnswers ist nicht verfügbar für Bulk Vote: ${JSON.stringify(I.value)}`),!1;const J=String(S.singleAnswer),ae=I.value.possibleAnswers.find(xe=>xe&&xe.id&&(String(xe.id)===J||parseInt(xe.id,10)===parseInt(S.singleAnswer,10)));return ae?(ce={eventUserId:n.value.id,pollId:((ge=I.value)==null?void 0:ge.id)??0,type:I.value.type,answerContent:ae.content,possibleAnswerId:ae.id,voteCount:N},await p(ce)):(console.error(`[ERROR:VOTING] Ungültige singleAnswer-ID für Bulk Vote: ${S.singleAnswer}`),!1)}}const $=1,U=((Q=S.multipleAnswers)==null?void 0:Q.length)===0,re={eventUserId:n.value.id,pollId:((ue=I.value)==null?void 0:ue.id)??0,type:I.value.type,voteCycle:$,answerItemLength:1,answerItemCount:1,multivote:F,isLastAnswerInBallot:U};try{if(S.abstain){const ce={...re,answerContent:ss.global.tc("view.polls.modal.abstain"),possibleAnswerId:null};await BE(ce)}else if(((ve=S.multipleAnswers)==null?void 0:ve.length)>0){let ce=1;if(!I.value||!I.value.possibleAnswers||!Array.isArray(I.value.possibleAnswers))return console.error(`[ERROR:VOTING] possibleAnswers ist nicht verfügbar: ${JSON.stringify(I.value)}`),I.value&&I.value.id&&localStorage.removeItem(`poll_form_data_${I.value.id}`),R(),k(),i.value=!1,!1;if(window._newPollActive===!0)return console.error("[ERROR:VOTING] Neue Poll wurde aktiviert während multipleAnswers verarbeitet wurden!"),R(),k(),i.value=!1,I.value&&I.value.id&&localStorage.removeItem(`poll_form_data_${I.value.id}`),!1;const J=[];for(const ae of S.multipleAnswers){if(!ae&&ae!==0){J.push("undefined");continue}I.value.possibleAnswers.some(he=>he&&he.id&&parseInt(he.id)===parseInt(ae))||J.push(ae)}if(J.length>0)return console.error(`[ERROR:VOTING] Ungültige Antwort-IDs gefunden: ${J.join(", ")}. Aktuelle possibleAnswers:`,I.value.possibleAnswers),I.value&&I.value.id&&localStorage.removeItem(`poll_form_data_${I.value.id}`),R(),k(),i.value=!1,!1;for await(const ae of S.multipleAnswers){const xe=I.value.possibleAnswers.find(Ae=>parseInt(Ae.id)===parseInt(ae)),he={...re,answerContent:xe.content,possibleAnswerId:xe.id,answerItemLength:S.multipleAnswers.length,answerItemCount:ce,isLastAnswerInBallot:ce===S.multipleAnswers.length};await BE(he),ce++}}else if(S.singleAnswer){if(!I.value||!I.value.possibleAnswers||!Array.isArray(I.value.possibleAnswers))return console.error(`[ERROR:VOTING] possibleAnswers ist nicht verfügbar: ${JSON.stringify(I.value)}`),I.value&&I.value.id&&localStorage.removeItem(`poll_form_data_${I.value.id}`),R(),k(),i.value=!1,!1;if(window._newPollActive===!0)return console.error("[ERROR:VOTING] Neue Poll wurde aktiviert während singleAnswer verarbeitet wurde!"),R(),k(),i.value=!1,I.value&&I.value.id&&localStorage.removeItem(`poll_form_data_${I.value.id}`),!1;if(!S.singleAnswer&&S.singleAnswer!==0)return console.error(`[ERROR:VOTING] singleAnswer ist nicht definiert oder ungültig: ${S.singleAnswer}`),I.value&&I.value.id&&localStorage.removeItem(`poll_form_data_${I.value.id}`),R(),k(),i.value=!1,!1;const ce=String(S.singleAnswer);if(!I.value.possibleAnswers.some(he=>he&&he.id&&(String(he.id)===ce||parseInt(he.id,10)===parseInt(S.singleAnswer,10))))return console.error(`[ERROR:VOTING] Ungültige singleAnswer-ID: ${S.singleAnswer}. Aktuelle possibleAnswers:`,I.value.possibleAnswers),I.value&&I.value.id&&localStorage.removeItem(`poll_form_data_${I.value.id}`),R(),k(),i.value=!1,!1;const ae=I.value.possibleAnswers.find(he=>String(he.id)===ce||parseInt(he.id,10)===parseInt(S.singleAnswer,10)),xe={...re,answerContent:ae.content,possibleAnswerId:ae.id};await BE(xe)}else return console.warn("Invalid form data. Submit wird ignoriert!"),!1;return!0}catch(ce){return console.error("Fehler bei der Stimmabgabe:",ce),R(),k(),!1}}async function p(S){var I;try{const F=performance.now(),H=In(Dqe,{variables:{input:S}});try{const N=((I=(await H.mutate()).data)==null?void 0:I.createBulkPollSubmitAnswer)||0,$=performance.now(),U=Math.round($-F);return N>0?(s.value+=N,o.value+=N,console.log(`CLIENT: BULK VOTE - usedVotesCount aktualisiert: ${s.value}`),console.log(`CLIENT: BULK VOTE - voteCounter aktualisiert: ${o.value}`),S.pollId&&n&&n.value&&n.value.id&&(a.upsertPollState(S.pollId,o.value,s.value,n.value.id),console.log(`CLIENT: BULK VOTE - Status persistiert: ${S.pollId}, ${o.value}, ${s.value}`)),R(),typeof window<"u"&&(window._pollFormSubmitting=!1,window._isProcessingVotes=!1,window._currentlyProcessingBatch=!1),console.log("CLIENT: BULK VOTE - Alle UI-Sperren wurden freigegeben nach erfolgreicher Bulk-Abstimmung")):(console.warn("CLIENT: BULK VOTE - Keine Stimmen erfolgreich verarbeitet"),R()),N>0}catch(q){return console.error("[ERROR:BULK_VOTE] GraphQL Fehler bei der Bulk-Mutation:",q),console.log("[ERROR:BULK_VOTE] GraphQL Fehler Details:",q.graphQLErrors||"Keine GraphQL-Fehlerdetails"),!1}}catch(F){return console.error(`[ERROR:BULK_VOTE] Fehler bei der Bulk-Mutation für ${S.voteCount} Stimmen:`,F),console.log("[ERROR:BULK_VOTE] Stack:",F.stack||"Kein Stack verfügbar"),!1}}function D(){console.log("[DEBUG:VOTING] In resetVoteCounts - Vor Reset: usedVotesCount =",s.value,"voteCounter =",o.value),s.value=0,o.value=1,typeof window<"u"&&window.votingProcessModule&&(window.votingProcessModule.usedVotesCount=0,window.votingProcessModule.voteCounter=1),console.log("[DEBUG:VOTING] In resetVoteCounts - Nach Reset: usedVotesCount =",s.value,"voteCounter =",o.value);const S=c.value;c.value=null,u.value=!1,e.value=!1,i.value=!1,r.value=1,g.value=null,f.value=0,v.value=!1,k(),S&&localStorage.removeItem(`poll_form_data_${S}`),setTimeout(()=>{u.value=!1,e.value=!1,i.value=!1,typeof window<"u"&&(window._pollFormSubmitting=!1,window._isProcessingVotes=!1,window._currentlyProcessingBatch=!1)},50)}function R(){if(console.log("[DEBUG:VOTING] releaseUILocks aufgerufen - usedVotesCount =",s.value,"voteCounter =",o.value),u.value=!1,e.value=!1,i.value=!1,typeof window<"u"){window._pollFormSubmitting=!1,window._isProcessingVotes=!1,window._currentlyProcessingBatch=!1;try{window.dispatchEvent(new CustomEvent("voting:complete",{detail:{timestamp:Date.now(),usedVotes:(s==null?void 0:s.value)||0}}))}catch(S){console.error("[DEBUG:VOTING] Fehler beim Auslösen des voting:complete Events bei releaseUILocks:",S)}try{const S=document.querySelectorAll(".modal-backdrop");S.length>0&&(S.forEach(I=>{I&&I.parentNode&&I.parentNode.removeChild(I)}),document.body.classList.remove("modal-open"),document.body.style.overflow="",document.body.style.paddingRight="")}catch(S){console.error("[DEBUG:VOTING] Fehler beim Entfernen von Modal-Elementen:",S)}}console.log("[DEBUG:VOTING] UI-Sperren vollständig freigegeben durch releaseUILocks()")}return gt(()=>s.value,S=>{typeof window<"u"&&window.votingProcessModule&&(window.votingProcessModule.usedVotesCount=S,console.log("[DEBUG:VOTING] Globales votingProcessModule aktualisiert: usedVotesCount =",S))}),gt(()=>o.value,S=>{typeof window<"u"&&window.votingProcessModule&&(window.votingProcessModule.voteCounter=S,console.log("[DEBUG:VOTING] Globales votingProcessModule aktualisiert: voteCounter =",S))}),{voteCounter:o,handleFormSubmit:A,setVotingCompletedCallback:_,resetVoteCounts:D,isProcessingVotes:u,usedVotesCount:s,pollFormSubmitting:e,currentlyProcessingBatch:i,expectedVoteCount:r,instanceId:h,lastBatchTimestamp:g,votingFullyCompleted:v,isActiveVotingSession:C,deactivateVotingSession:k,releaseUILocks:R}}async function BE(n){try{return await In(Vqe,{variables:{input:n}}).mutate(),!0}catch(t){throw console.error(`Fehler bei der Mutation für Zyklus ${n.voteCycle}/${n.answerItemCount}:`,t),t}}const Nqe={key:0,class:"alert alert-info mb-3"},Lqe=["disabled","onClick"],Mqe={key:1,class:"fw-bold"},$qe={class:"text-muted ms-2"},Bqe={key:2,class:"text-muted small"},Fqe={class:"fw-bold"},Uqe={class:"text-muted ms-2"},zqe={key:1,class:"alert alert-info"},Hqe={class:"mb-3"},Wqe={class:"form-label fw-bold"},jqe={class:"text-muted ms-2 small"},qqe={class:"progress mb-2"},Gqe=["aria-valuenow"],Kqe={key:0,class:"btn-group w-100 mb-2"},Yqe=["disabled"],Qqe=["disabled"],Zqe=["disabled"],Jqe=["disabled"],Xqe={class:"row mb-2"},eGe={class:"col-12 col-lg-8 d-flex align-items-center"},tGe=["max","disabled"],nGe={class:"col-12 col-lg-4"},iGe={class:"input-group"},rGe=["max","disabled"],sGe={class:"input-group-text"},oGe={class:"form-text"},aGe={key:1,class:"alert alert-warning mt-2 mb-2 p-2"},lGe={key:2,class:"mt-2"},cGe={key:2},uGe={class:"d-flex justify-content-center answer-wrapper"},dGe=["disabled"],fGe=["disabled"],hGe=["disabled"],mGe={class:"overlay-container position-relative"},gGe={key:0,class:"position-absolute w-100 h-100 top-0 start-0 z-1",style:{"background-color":"rgba(255,255,255,0.95)",cursor:"not-allowed"}},pGe={class:"position-absolute top-50 start-50 translate-middle text-center"},vGe={class:"mt-2 fw-bold text-dark"},bGe={key:0,class:"mt-2"},wGe=["disabled"],yGe={key:0,class:"h3"},_Ge={key:1,class:"d-flex align-items-center justify-content-center"},kGe={class:"h3"},Qb=1,FE=2,EGe={__name:"PollForm",props:{poll:{type:Object,required:!0},event:{type:Object,required:!0},eventUser:{type:Object,required:!0},voteCounter:{type:Number,required:!0}},emits:["submit"],setup(n,{expose:t,emit:e}){const i=e,r=n,s=mx(r.eventUser,r.event),o=Z(!1),a=Z(!1),l=Z(!0),c=le(()=>{if(!r.eventUser.pollHints)return[];try{const N=JSON.parse(r.eventUser.pollHints);return(Array.isArray(N)?N:[]).filter(U=>U.type==="received"||!U.type)}catch(N){return console.warn("Konnte pollHints nicht parsen:",N),[]}}),u=le(()=>{if(!r.eventUser.pollHints)return[];try{const N=JSON.parse(r.eventUser.pollHints);return(Array.isArray(N)?N:[]).filter(U=>U.type==="transferred")}catch(N){return console.warn("Konnte pollHints nicht parsen:",N),[]}}),d=le(()=>{if(r.poll.maxVotes===1)return Qb;if(r.poll.maxVotes>1||r.poll.maxVotes===0)return FE;throw Error("Invalid voting setup!")}),f=le(()=>r.poll.allowAbstain&&r.poll.pollAnswer==="custom"),h=le(()=>{const N=[];return r.poll.possibleAnswers.forEach($=>{N.push({label:$.content,value:parseInt($.id,10)})}),N}),g=le(()=>{if(typeof window<"u"&&window._newPollActive===!0)return r.eventUser.voteAmount;let N=0;s&&s.usedVotesCount&&s.usedVotesCount.value!==void 0&&(N=Math.max(N,s.usedVotesCount.value||0)),window&&window.votingProcessModule&&window.votingProcessModule.usedVotesCount!==void 0&&(N=Math.max(N,window.votingProcessModule.usedVotesCount||0));const $=r.voteCounter>1?r.voteCounter-1:0;N=Math.max(N,$),s&&s.usedVotesCount&&(s.usedVotesCount.value=N),window&&window.votingProcessModule&&(window.votingProcessModule.usedVotesCount=N);const U=r.eventUser.voteAmount;return U<=N?(w&&w.votesToUse!==0&&setTimeout(()=>{w.votesToUse=0,w.useAllAvailableVotes=!0},0),0):U-N});le(()=>r.eventUser.voteAmount>1&&r.event.multivoteType===1);const v=le(()=>{const N=parseInt(r.eventUser.voteAmount||0,10)>1&&parseInt(r.event.multivoteType||0,10)===1;return a.value||!l.value?N||parseInt(r.eventUser.voteAmount||0,10)>1:N}),_=le(()=>Math.round(g.value/r.eventUser.voteAmount*100)),w=Kt({singleAnswer:null,multipleAnswers:[],abstain:!1,useAllAvailableVotes:!0,votesToUse:1});let C=!1;gt(()=>{var N;return(N=r.poll)==null?void 0:N.id},(N,$)=>{N&&$&&N!==$&&setTimeout(()=>{try{localStorage.removeItem(`poll_form_data_${$}`)}catch(U){console.error("Fehler beim Löschen der localStorage-Daten:",U)}H(!1),w.useAllAvailableVotes||(w.useAllAvailableVotes=!0),w.votesToUse!==g.value&&(w.votesToUse=g.value)},10)},{immediate:!0}),gt(()=>g.value,(N,$)=>{if(N!==$&&!C){C=!0;try{w.votesToUse!==N&&(w.votesToUse=N,w.useAllAvailableVotes||(w.useAllAvailableVotes=!0))}finally{C=!1}}},{flush:"post"}),Jt(()=>{if(setTimeout(()=>{const U=g.value;w.useAllAvailableVotes=!0,w.votesToUse=U},100),r.poll&&r.poll.id)try{localStorage.removeItem(`poll_form_data_${r.poll.id}`)}catch(U){console.error("Fehler beim Löschen von localStorage-Daten:",U),l.value=!1}const N=setInterval(()=>{var z,ge;const U=((z=r.eventUser)==null?void 0:z.voteAmount)||0,re=((ge=s==null?void 0:s.usedVotesCount)==null?void 0:ge.value)||0;if(re>0&&re<U&&o.value){const Q=window._lastSubmittingStartTime||0;Date.now()-Q>1e4&&(console.warn("[DEBUG:VOTING] Safety Timer: isSubmitting wird zurückgesetzt nach 10s in Split-Voting"),o.value=!1,s&&(s.pollFormSubmitting&&s.pollFormSubmitting.value===!0&&(s.pollFormSubmitting.value=!1),s.isProcessingVotes&&s.isProcessingVotes.value===!0&&(s.isProcessingVotes.value=!1),typeof s.releaseUILocks=="function"&&s.releaseUILocks()))}},5e3);wo(()=>{clearInterval(N)}),R4().isSafari&&(console.info("Safari erkannt - Prüfe localStorage-Funktionalität"),l.value=O4(),l.value||(console.warn("localStorage-Probleme erkannt - aktiviere Safari-Kompatibilitätsmodus"),a.value=!0)),(typeof r.eventUser.voteAmount>"u"||r.eventUser.voteAmount===null)&&(console.warn("voteAmount ist undefiniert oder null - aktiviere Kompatibilitätsmodus"),a.value=!0),a.value&&setTimeout(()=>{w.useAllAvailableVotes=!0,w.votesToUse=g.value},100)});function k(N){const $=Math.max(1,Math.min(g.value,Math.round(g.value*N/100)));w.votesToUse=$,N===100?w.useAllAvailableVotes=!0:w.useAllAvailableVotes=!1}function E(N){N<=g.value&&N>0&&(w.votesToUse=N,w.useAllAvailableVotes=N===g.value)}function A(N){const U=parseInt(N.target.value,10)===g.value;C=!0;try{w.useAllAvailableVotes=U}finally{C=!1}}function x(N){const $=parseInt(N.target.value,10);if(!isNaN($)&&$>=1&&$<=g.value){const U=$===g.value;C=!0;try{w.useAllAvailableVotes=U}finally{C=!1}}}function p(N){if(w.useAllAvailableVotes!==N){C=!0;try{w.useAllAvailableVotes=N,N?w.votesToUse!==g.value&&(w.votesToUse=g.value):w.votesToUse=1}finally{C=!1}window.pollFormSubmitting!==void 0&&(o.value=window.pollFormSubmitting)}}function D(N){w.abstain=N}gt(()=>w.votesToUse,(N,$)=>{if(window._formResetInProgress===!0||C)return;typeof window._votesToUsePreviousValues>"u"&&(window._votesToUsePreviousValues=[]),window._votesToUsePreviousValues.push(N),window._votesToUsePreviousValues.length>5&&window._votesToUsePreviousValues.shift();const U=new Set(window._votesToUsePreviousValues);if(window._votesToUsePreviousValues.length>=4&&U.size<=2){console.warn("[DEBUG:VOTING] Mögliche Endlosschleife erkannt in votesToUse watch. Überspringe Update.");return}if(N!==$){C=!0;try{if(g.value===0){N!==0&&(w.votesToUse=0),w.useAllAvailableVotes||(w.useAllAvailableVotes=!0);return}let re=N;N<1?re=1:N>g.value&&(re=g.value),re!==N&&(w.votesToUse=re);const K=re===g.value;w.useAllAvailableVotes!==K&&(w.useAllAvailableVotes=K)}finally{C=!1}}},{flush:"post"}),gt(()=>w.abstain,()=>{});const R=le(()=>({singleAnswer:{or:YR(rV("value",d,Qb),Wu(Da("minVotes",r.poll,1),Da("maxVotes",r.poll,1),Bt),Wu(Da("minVotes",r.poll,0),Da("maxVotes",r.poll,1)))},multipleAnswers:{or:YR(rV("value",d,FE),Wu(Da("minVotes",r.poll,0),Da("maxVotes",r.poll,0)),Wu(Da("minVotes",r.poll,0),pb("maxVotes",r.poll,0),iV(r.poll.maxVotes)),Wu(pb("minVotes",r.poll,0),Da("maxVotes",r.poll,0),nV(r.poll.minVotes)),Wu(pb("minVotes",r.poll,0),pb("maxVotes",r.poll,0),iV(r.poll.maxVotes),nV(r.poll.minVotes)),Wu(Da("allowAbstain",r.poll,!0),Da("abstain",w,!0)))},votesToUse:{required:Bt}})),S=us(R,w);async function I(){if(!o.value)try{if(!w.abstain){if(!w.singleAnswer&&(!w.multipleAnswers||w.multipleAnswers.length===0)){alert("Bitte treffen Sie eine Auswahl");return}}if(d.value===Qb&&!w.singleAnswer&&!w.abstain){console.error("Keine Antwort bei Single-Choice ausgewählt"),alert("Bitte wählen Sie eine Antwort aus.");return}if((typeof w.votesToUse!="number"||w.votesToUse<1)&&(w.votesToUse=1),!await S.value.$validate()){console.error("[ERROR:FORM] Validierungsfehler:",S.value.$errors);const $=S.value.$errors.map(U=>U.$message).join(", ");alert(`Bitte überprüfen Sie Ihre Eingaben: ${$}`);return}o.value=!0,w.type=d.value,i("submit",{...w})}catch(N){console.error("Fehler beim Absenden:",N),o.value=!1}}function F(){o.value=!1,o.value=!1}function H(N=!1){o.value=!1,N||(S.value.$reset(),r.poll&&r.poll.id&&localStorage.removeItem(`poll_form_data_${r.poll.id}`),w.singleAnswer=null,w.multipleAnswers=[],w.abstain=!1,w.useAllAvailableVotes=!0,setTimeout(()=>{var U;const $=g.value;if(typeof $!="number"||$<1){console.warn("[DEBUG:VOTING] Ungültiger remainingVotes-Wert:",$);const re=((U=r.eventUser)==null?void 0:U.voteAmount)||1;w.votesToUse=re}else w.votesToUse=$},50),setTimeout(()=>{w.useAllAvailableVotes=!0,w.votesToUse=g.value,document.querySelectorAll('input[type="radio"]').forEach(U=>{U.checked=!1})},50)),o.value=!1}function q(N){if(!N)return"";try{return new Date(N*1e3).toLocaleString("de-DE",{timeZone:"Europe/Berlin",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch($){return console.warn("Fehler beim Formatieren des Timestamps:",$),""}}return t({isSubmitting:o,reset:H,resetSubmitState:F}),(N,$)=>{var U,re,K,z,ge,Q,ue,ve,ce,J,ae,xe,he,Ae,We,Ee,G,Y,oe,Ue,Oe,Le,Ye,te,se,pe,Re,Me,Ie,Se,ye,ie;return P(),V("form",{id:"poll-form",class:"needs-validation",onSubmit:bt(I,["prevent"])},[c.value&&c.value.length>0||u.value&&u.value.length>0?(P(),V("div",Nqe,[$[8]||($[8]=m("div",{class:"fw-bold mb-2"},[m("i",{class:"bi bi-info-circle me-2"}),fe(" Stimmenhinweise: ")],-1)),(P(!0),V(Fe,null,ct(c.value,_e=>(P(),V("div",{key:_e.fromUserName+"-received-"+_e.timestamp,class:"mb-1"},[v.value&&r.event.multivoteType!==2?(P(),V("button",{key:0,type:"button",class:Ze(["btn btn-link p-0 text-decoration-none fw-bold",{"text-muted":_e.voteAmount>g.value}]),disabled:_e.voteAmount>g.value,onClick:Je=>E(_e.voteAmount)},B(_e.voteAmount)+" Stimme(n) ",11,Lqe)):(P(),V("span",Mqe,B(_e.voteAmount)+" Stimme(n) ",1)),fe(" von "+B(_e.fromUserName)+" erhalten ",1),m("small",$qe,B(q(_e.timestamp)),1),_e.voteAmount>g.value?(P(),V("span",Bqe," (nicht genügend Stimmen übrig) ")):ne("",!0)]))),128)),(P(!0),V(Fe,null,ct(u.value,_e=>(P(),V("div",{key:_e.fromUserName+"-transferred-"+_e.timestamp,class:"mb-1"},[m("span",Fqe,B(_e.voteAmount)+" Stimme(n)",1),fe(" an "+B(_e.fromUserName)+" übertragen ",1),m("small",Uqe,B(q(_e.timestamp)),1)]))),128))])):ne("",!0),v.value?(P(),V("fieldset",zqe,[m("div",Hqe,[m("label",Wqe,[fe(B(N.$t("view.polls.modal.voteAllocation",{voteAmount:g.value}))+" ",1),m("span",jqe," ("+B(Math.round(g.value/r.eventUser.voteAmount*100))+"% "+B(N.$t("view.polls.modal.ofTotalVotes"))+") ",1)]),m("div",qqe,[m("div",{class:Ze(["progress-bar",{"bg-success":_.value>50,"bg-warning":_.value<=50&&_.value>25,"bg-danger":_.value<=25}]),role:"progressbar",style:Di({width:_.value+"%"}),"aria-valuenow":_.value,"aria-valuemin":"0","aria-valuemax":"100"},B(g.value)+" / "+B(r.eventUser.voteAmount)+" "+B(N.$t("view.polls.modal.votes")),15,Gqe)]),g.value>3?(P(),V("div",Kqe,[m("button",{type:"button",class:"btn btn-outline-primary",disabled:o.value&&!(((U=M(s).usedVotesCount)==null?void 0:U.value)>0&&((re=M(s).usedVotesCount)==null?void 0:re.value)<r.eventUser.voteAmount),onClick:$[0]||($[0]=_e=>k(25))}," 25% ("+B(Math.round(g.value*.25))+") ",9,Yqe),m("button",{type:"button",class:"btn btn-outline-primary",disabled:o.value&&!(((K=M(s).usedVotesCount)==null?void 0:K.value)>0&&((z=M(s).usedVotesCount)==null?void 0:z.value)<r.eventUser.voteAmount),onClick:$[1]||($[1]=_e=>k(50))}," 50% ("+B(Math.round(g.value*.5))+") ",9,Qqe),m("button",{type:"button",class:"btn btn-outline-primary",disabled:o.value&&!(((ge=M(s).usedVotesCount)==null?void 0:ge.value)>0&&((Q=M(s).usedVotesCount)==null?void 0:Q.value)<r.eventUser.voteAmount),onClick:$[2]||($[2]=_e=>k(75))}," 75% ("+B(Math.round(g.value*.75))+") ",9,Zqe),m("button",{type:"button",class:"btn btn-outline-primary",disabled:o.value&&!(((ue=M(s).usedVotesCount)==null?void 0:ue.value)>0&&((ve=M(s).usedVotesCount)==null?void 0:ve.value)<r.eventUser.voteAmount),onClick:$[3]||($[3]=_e=>k(100))}," 100% ("+B(g.value)+") ",9,Jqe)])):ne("",!0),m("div",Xqe,[m("div",eGe,[vn(m("input",{"onUpdate:modelValue":$[4]||($[4]=_e=>w.votesToUse=_e),type:"range",class:"form-range flex-grow-1 me-2",min:"1",max:g.value,disabled:o.value&&!(((ce=M(s).usedVotesCount)==null?void 0:ce.value)>0&&((J=M(s).usedVotesCount)==null?void 0:J.value)<r.eventUser.voteAmount),onInput:A},null,40,tGe),[[Bi,w.votesToUse,void 0,{number:!0}]])]),m("div",nGe,[m("div",iGe,[vn(m("input",{"onUpdate:modelValue":$[5]||($[5]=_e=>w.votesToUse=_e),type:"number",class:"form-control",min:"1",max:g.value,disabled:o.value&&!(((ae=M(s).usedVotesCount)==null?void 0:ae.value)>0&&((xe=M(s).usedVotesCount)==null?void 0:xe.value)<r.eventUser.voteAmount),onInput:x},null,40,rGe),[[Bi,w.votesToUse,void 0,{number:!0}]]),m("span",sGe,B(N.$t("view.polls.modal.votes")),1)])])]),m("div",oGe,B(N.$t("view.polls.modal.votesToUseHelptext")),1),_.value<=15?(P(),V("div",aGe,[$[9]||($[9]=m("i",{class:"bi bi-exclamation-triangle-fill me-2"},null,-1)),fe(" "+B(N.$t("view.polls.modal.fewVotesRemaining",{remaining:g.value,total:r.eventUser.voteAmount,percentage:_.value})),1)])):ne("",!0),g.value>1?(P(),V("div",lGe,[Ce(Sr,{id:"submit-answer-for-each-vote",label:N.$t("view.polls.modal.useAllVotes"),"help-text":N.$t("view.polls.modal.canSubmitAnswerForEachVoteHelptext"),checked:w.useAllAvailableVotes,disabled:o.value&&!(((he=M(s).usedVotesCount)==null?void 0:he.value)>0&&((Ae=M(s).usedVotesCount)==null?void 0:Ae.value)<r.eventUser.voteAmount),"onUpdate:checked":p},null,8,["label","help-text","checked","disabled"])])):ne("",!0)])])):ne("",!0),v.value?(P(),V("hr",cGe)):ne("",!0),m("div",uGe,[d.value===Qb?(P(),V("fieldset",{key:0,disabled:o.value&&!(((We=M(s).usedVotesCount)==null?void 0:We.value)>0&&((Ee=M(s).usedVotesCount)==null?void 0:Ee.value)<r.eventUser.voteAmount)},[Ce(h_,{id:"poll-answer",items:h.value,value:w.singleAnswer,"has-errors":!1,onChange:$[6]||($[6]=({value:_e})=>{w.singleAnswer!==_e&&(w.singleAnswer=_e)})},null,8,["items","value"])],8,dGe)):d.value===FE?(P(),V("fieldset",{key:1,disabled:w.abstain||o.value&&!(((G=M(s).usedVotesCount)==null?void 0:G.value)>0&&((Y=M(s).usedVotesCount)==null?void 0:Y.value)<r.eventUser.voteAmount),class:Ze({"opacity-50":w.abstain})},[Ce(Rqe,{items:h.value,"has-errors":((Ue=(oe=M(S).multipleAnswers)==null?void 0:oe.$errors)==null?void 0:Ue.length)>0,"max-checked-items":n.poll.maxVotes||null,"min-checked-items":n.poll.minVotes||null,"selected-values":w.multipleAnswers,onChange:$[7]||($[7]=_e=>{(!Array.isArray(w.multipleAnswers)||!Array.isArray(_e)||w.multipleAnswers.length!==_e.length||w.multipleAnswers.some((Je,ut)=>Je!==_e[ut]))&&(w.multipleAnswers=_e)})},null,8,["items","has-errors","max-checked-items","min-checked-items","selected-values"])],10,fGe)):ne("",!0)]),f.value?(P(),V(Fe,{key:3},[$[10]||($[10]=m("hr",null,null,-1)),m("fieldset",{disabled:o.value&&!(((Oe=M(s).usedVotesCount)==null?void 0:Oe.value)>0&&((Le=M(s).usedVotesCount)==null?void 0:Le.value)<r.eventUser.voteAmount)},[Ce(Sr,{id:"allow-abstain",label:N.$t("view.polls.modal.abstain"),"help-text":N.$t("view.polls.modal.abstainHelptext"),checked:w.abstain,"onUpdate:checked":D},null,8,["label","help-text","checked"])],8,hGe)],64)):ne("",!0),$[14]||($[14]=m("hr",null,null,-1)),m("div",mGe,[o.value&&!(((Ye=M(s).usedVotesCount)==null?void 0:Ye.value)>0&&((te=M(s).usedVotesCount)==null?void 0:te.value)<r.eventUser.voteAmount)?(P(),V("div",gGe,[m("div",pGe,[$[11]||($[11]=m("span",{class:"spinner-border spinner-border-lg text-primary",role:"status"},null,-1)),m("div",vGe,B(N.$t("view.polls.modal.submitting"))+"...",1),$[12]||($[12]=m("div",{class:"mt-2 small"},"Bitte warten Sie, Ihre Stimmen werden gezählt",-1)),((se=M(s).usedVotesCount)==null?void 0:se.value)>0?(P(),V("div",bGe," Fortschritt: "+B((pe=M(s).usedVotesCount)==null?void 0:pe.value)+" von "+B(r.eventUser.voteAmount)+" Stimmen ",1)):ne("",!0)])])):ne("",!0),m("button",{type:"submit",class:Ze(["btn btn-primary mx-auto d-block h1",{"opacity-50":o.value&&!(((Re=M(s).usedVotesCount)==null?void 0:Re.value)>0&&((Me=M(s).usedVotesCount)==null?void 0:Me.value)<r.eventUser.voteAmount)}]),disabled:o.value&&!(((Ie=M(s).usedVotesCount)==null?void 0:Ie.value)>0&&((Se=M(s).usedVotesCount)==null?void 0:Se.value)<r.eventUser.voteAmount)},[o.value&&!(((ye=M(s).usedVotesCount)==null?void 0:ye.value)>0&&((ie=M(s).usedVotesCount)==null?void 0:ie.value)<r.eventUser.voteAmount)?(P(),V("span",_Ge,[$[13]||($[13]=m("span",{class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},null,-1)),m("span",kGe,B(N.$t("view.polls.modal.submitting")),1)])):(P(),V("span",yGe,B(N.$t("view.polls.modal.submitPoll")),1))],10,wGe)])],32)}}},CGe=mt`
  query CachedActivePollDetails($eventId: ID!) {
    cachedActivePollEventUser(eventId: $eventId) {
      state
      pollResultId
      pollAnswers {
        id
        pollUserId
        answerContent
      }
      pollUser {
        id
        eventUserId
        publicName
      }
      pollUserVoted {
        id
        eventUserId
      }
      poll {
        id
        title
        type
      }
    }
  }
`;mt`
  query ActivePollDetailsFallback($eventId: ID!) {
    activePollEventUser(eventId: $eventId) {
      pollResultId
      pollAnswers {
        id
        pollUserId
        answerContent
      }
      pollUser {
        id
        eventUserId
        publicName
      }
      pollUserVoted {
        id
        eventUserId
      }
      poll {
        id
        title
        type
      }
    }
  }
`;const TGe={key:0,class:"card mb-3"},SGe={class:"card-header d-flex justify-content-between align-items-center"},AGe={class:"card-title mb-0"},IGe={class:"d-flex gap-2 align-items-center"},PGe={key:0,class:"text-muted me-2"},xGe={key:0,class:"text-success ms-1"},OGe=["disabled","title"],RGe={class:"card-body"},VGe={class:"row"},DGe={class:"d-flex flex-wrap"},NGe={class:"d-flex align-items-center"},LGe=["innerHTML"],MGe={class:"mx-2 fw-medium"},$Ge={class:"ms-2"},BGe={key:1,class:"badge rounded-pill bg-light text-dark border"},C$="active_poll_collapsed",FGe={__name:"VotingDetailsWithSubscription",props:{activePollEventUser:{type:Object,required:!0},eventId:{type:[String,Number],required:!0},event:{type:Object,required:!1,default:()=>({})},poll:{type:Object,required:!1,default:()=>({})}},setup(n){const t=localStorage.getItem(C$),e=Z(t?JSON.parse(t):!1);gt(e,E=>{localStorage.setItem(C$,JSON.stringify(E))});const i=Z(15),r=Z(null),s=()=>{r.value&&clearInterval(r.value);const A=new Date().getSeconds(),p=(Math.ceil(A/15)*15+1)%60;let D;p>A?D=p-A:D=60-A+p,i.value=D,r.value=setInterval(async()=>{if(i.value--,i.value<=0){try{await g.refetch()}catch(R){console.error("[VotingDetails] Auto-refresh error via countdown:",R)}i.value=15}},1e3)},o=()=>{r.value&&(clearInterval(r.value),r.value=null)},a=()=>{i.value=15},l=n,c=Z(l.activePollEventUser),u=Z(null);gt(()=>l.activePollEventUser,(E,A)=>{var x,p,D,R,S;if(E){const I=(x=E.poll)==null?void 0:x.id,F=((p=A==null?void 0:A.poll)==null?void 0:p.id)||u.value;if(F===void 0)c.value={...E};else if(I===F){const H=Array.isArray(E.pollAnswers)&&E.pollAnswers.length>0?E.pollAnswers:((D=c.value)==null?void 0:D.pollAnswers)||[],q=Array.isArray(E.pollUser)&&E.pollUser.length>0?E.pollUser:((R=c.value)==null?void 0:R.pollUser)||[],N=Array.isArray(E.pollUserVoted)&&E.pollUserVoted.length>0?E.pollUserVoted:((S=c.value)==null?void 0:S.pollUserVoted)||[];c.value={...E,pollAnswers:H,pollUser:q,pollUserVoted:N}}else I!==F&&(c.value={...E},u.value=I)}else c.value={state:"inactive",pollAnswers:[],pollUser:[],pollUserVoted:[],poll:null}},{immediate:!0,deep:!0}),gt(()=>{var E;return(E=l.activePollEventUser)==null?void 0:E.state},(E,A)=>{var p,D;if(!E||E===A)return;const x=(D=(p=l.activePollEventUser)==null?void 0:p.poll)==null?void 0:D.id;E==="new"?(c.value={...l.activePollEventUser,pollAnswers:[],pollUser:[],pollUserVoted:[]},u.value=x):E==="closed"&&(c.value={...l.activePollEventUser,pollAnswers:[],pollUser:[],pollUserVoted:[]},u.value=x)});const d=Z(!1),f=le(()=>{var E,A;return((E=l.poll)==null?void 0:E.type)==="PUBLIC"&&((A=l.event)==null?void 0:A.publicVoteVisible)===!0});gt(()=>l.activePollEventUser,E=>{E&&E.poll&&E.poll.id&&f.value?d.value=!0:d.value=!1},{immediate:!0}),gt([()=>l.poll,()=>l.event],()=>{l.activePollEventUser&&l.activePollEventUser.poll&&l.activePollEventUser.poll.id&&f.value?d.value=!0:d.value=!1}),sy(Tr);const h=Z(!1),g=ln(CGe,{eventId:l.eventId},{fetchPolicy:"no-cache",nextFetchPolicy:"no-cache",enabled:!0,errorPolicy:"all"});gt(f,E=>{E?s():o()},{immediate:!0}),s(),gt(()=>g.loading.value,E=>{!E&&f.value&&a()}),wo(()=>{o()});async function v(){if(!h.value)try{h.value=!0,o(),await g.refetch(),s()}catch(E){console.error("Fehler beim manuellen Refresh:",E)}finally{h.value=!1}}g.onResult(({data:E,loading:A})=>{var D,R,S;if(A||!(E!=null&&E.cachedActivePollEventUser))return;const x=(D=E.cachedActivePollEventUser.poll)==null?void 0:D.id,p=(S=(R=c.value)==null?void 0:R.poll)==null?void 0:S.id;x&&(!p||x===p)&&(c.value={...c.value,...E.cachedActivePollEventUser,pollAnswers:E.cachedActivePollEventUser.pollAnswers||[],pollUser:E.cachedActivePollEventUser.pollUser||[],pollUserVoted:E.cachedActivePollEventUser.pollUserVoted||[]})});const _=le(()=>{var E;return!((E=c.value)!=null&&E.pollUser)||!Array.isArray(c.value.pollUser)?[]:[...c.value.pollUser].sort((A,x)=>{const p=k(A),D=k(x);if(p&&!D)return-1;if(!p&&D)return 1;const R=A.publicName||"",S=x.publicName||"";return R.localeCompare(S)})});function w(E){var A;return!((A=c.value)!=null&&A.pollAnswers)||!Array.isArray(c.value.pollAnswers)?[]:c.value.pollAnswers.filter(x=>x&&x.pollUserId===E)||[]}function C(E){const A=w(E),x={};return Array.isArray(A)&&A.forEach(p=>{p&&p.answerContent&&(x[p.answerContent]=(x[p.answerContent]||0)+1)}),x}function k(E){var A;return!E||!E.eventUserId||!((A=c.value)!=null&&A.pollUserVoted)||!Array.isArray(c.value.pollUserVoted)?!1:c.value.pollUserVoted.find(x=>x&&x.eventUserId&&parseInt(x.eventUserId,10)===parseInt(E.eventUserId,10))}return(E,A)=>c.value?(P(),V("div",TGe,[m("div",SGe,[m("h5",AGe,B(E.$t("view.polls.active.title")),1),m("div",IGe,[h.value?ne("",!0):(P(),V("small",PGe,[A[1]||(A[1]=m("i",{class:"bi bi-clock"},null,-1)),fe(" "+B(i.value)+"s ",1),f.value?(P(),V("span",xGe,"(Live)")):ne("",!0)])),m("button",{class:"btn btn-sm btn-outline-primary",onClick:v,disabled:h.value,title:E.$t("view.polls.active.refresh")},[m("i",{class:Ze(h.value?"bi bi-arrow-clockwise spinning":"bi bi-arrow-clockwise")},null,2)],8,OGe),m("button",{class:"btn btn-sm btn-outline-secondary",onClick:A[0]||(A[0]=x=>e.value=!e.value)},[m("i",{class:Ze(e.value?"bi bi-chevron-down":"bi bi-chevron-up")},null,2)])])]),vn(m("div",RGe,[m("div",VGe,[m("div",DGe,[(P(!0),V(Fe,null,ct(_.value,(x,p)=>(P(),V("div",{key:x.id,class:Ze(["d-flex align-items-center px-3 mb-3",{"border-end border-secondary":p<_.value.length-1}])},[m("div",NGe,[m("span",{innerHTML:k(x)?"<i class='bi bi-check-square text-success'></i>":"<i class='bi bi-x-square text-danger'></i>"},null,8,LGe),m("span",MGe,B(x.publicName),1)]),m("div",$Ge,[w(x.id).length?(P(!0),V(Fe,{key:0},ct(C(x.id),(D,R)=>(P(),V("span",{key:R,class:Ze(["badge rounded-pill me-1 fs-6",{"bg-success text-white":R==="Ja","bg-danger text-white":R==="Nein","bg-warning text-dark":R==="Enthaltung","bg-secondary text-white":R!=="Ja"&&R!=="Nein"&&R!=="Enthaltung"}])},[fe(B(R),1),D>1?(P(),V(Fe,{key:0},[fe(" ("+B(D)+"x)",1)],64)):ne("",!0)],2))),128)):(P(),V("span",BGe,B(E.$t("view.polls.active.noVote")),1))])],2))),128))])])],512),[[md,!e.value]])])):ne("",!0)}},vW=Yt(FGe,[["__scopeId","data-v-3ea860b4"]]),UGe={class:"container-modal d-print-none"},zGe={class:"modal-dialog modal-dialog-centered modal-xl modal-dialog-scrollable"},HGe={key:0,class:"modal-content position-relative"},WGe={key:0,class:"position-absolute w-100 h-100 top-0 start-0 z-3",style:{"background-color":"rgba(255,255,255,0.95)",cursor:"not-allowed"}},jGe={class:"position-absolute top-50 start-50 translate-middle text-center"},qGe={class:"mt-2 fw-bold text-dark"},GGe={key:0,class:"mt-2"},KGe={class:"modal-header"},YGe={class:"modal-title"},QGe={key:0,id:"pollCounter"},ZGe={class:"modal-body"},JGe={key:0,class:"alert alert-warning mb-3"},XGe={key:1,class:"alert alert-info mb-3"},eKe={key:2},tKe={key:3},nKe={key:4},iKe={key:6,class:"d-inline-block w-100"},bW={__name:"PollModal",props:{poll:{type:Object,required:!1,default:null},event:{type:Object,required:!0},eventUser:{type:Object,required:!0},activePollEventUser:{type:Object,required:!1,default:null},voteCounter:{type:Number,required:!0},votingProcess:{type:Object,required:!0}},emits:["submit"],setup(n,{expose:t,emit:e}){const i=e,r=Z(null),s=Z(null);let o=null;const a=Z(!1),l=Z(!1);let c=null,u=null;function d(){var N;const q=document.getElementById("pollModal");if(q){const $=q.classList.contains("show")&&window.getComputedStyle(q).display!=="none";if($!==l.value&&(l.value=$,!$&&f.poll&&!f.poll.closed&&f.eventUser.voteAmount>0&&f.eventUser.allowToVote)){const U=f.eventUser.voteAmount>1&&((N=h.value.usedVotesCount)==null?void 0:N.value)||0,re=f.eventUser.voteAmount||0;U>0&&U<re&&(console.warn("[DEBUG:VOTING] Modal verschwunden bei Teilabstimmung! Versuche erneut zu öffnen..."),setTimeout(()=>{try{S()}catch(K){console.error("[DEBUG:VOTING] Fehler bei auto-reopen:",K)}},250))}}}const f=n,h=le(()=>f.votingProcess),g=Z(1),v=le(()=>({isDisabled:a.value||s.value&&s.value.isSubmitting}));let _=!1;const w=()=>{a.value=!1,_||E()},C=()=>{a.value=!1,_||E()},k=()=>{a.value=!1,_||E()};function E(){var re,K,z,ge;if(_)return;_=!0,a.value=!1;const q=((K=(re=h.value)==null?void 0:re.usedVotesCount)==null?void 0:K.value)||0,N=((z=f.eventUser)==null?void 0:z.voteAmount)||0;if(q<N&&((ge=r.value)!=null&&ge.classList.contains("show"))&&(document.body.classList.contains("modal-open")||(document.body.classList.add("modal-open"),document.body.style.overflow="hidden"),requestAnimationFrame(()=>{if(!document.querySelector(".modal-backdrop")){const ue=document.createElement("div");ue.className="modal-backdrop fade show",ue.style.zIndex="1050",document.body.appendChild(ue)}})),s.value&&typeof s.value.resetSubmitState=="function")try{s.value.resetSubmitState()}catch(Q){console.error("[DEBUG:VOTING] Fehler beim Reset des PollForm:",Q)}a.value=!1;const U=()=>{if(typeof window<"u")try{window.removeEventListener("voting:complete",w),window.removeEventListener("voting:error",C),window.removeEventListener("voting:reset",k),setTimeout(()=>{try{window.addEventListener("voting:complete",w),window.addEventListener("voting:error",C),window.addEventListener("voting:reset",k),_=!1}catch(Q){console.error("[DEBUG:VOTING] Fehler beim Hinzufügen der Event-Listener nach Pause:",Q),_=!1}},100)}catch(Q){console.error("[DEBUG:VOTING] Fehler beim Entfernen der Event-Listener:",Q),_=!1}};try{const Q=document.querySelector('.modal-content > div[style*="background-color: rgba(255,255,255,0.95)"]');Q&&(Q.style.display="none")}catch(Q){console.error("[DEBUG:VOTING] Fehler bei DOM-Manipulation:",Q)}U()}Jt(()=>{if(console.log("[DEBUG:VOTING] PollModal wird gemounted, prüfe auf Zombie-Modals"),document.querySelectorAll(".modal").forEach($=>{$!==r.value&&(console.log("[DEBUG:VOTING] Entferne Zombie-Modal:",$.id),$.remove())}),document.querySelectorAll(".modal-backdrop").forEach($=>{console.log("[DEBUG:VOTING] Entferne Zombie-Backdrop"),$.remove()}),document.body.classList.contains("modal-open")&&(console.log("[DEBUG:VOTING] Entferne modal-open von body beim Mount"),document.body.classList.remove("modal-open"),document.body.style.overflow="",document.body.style.paddingRight=""),o=new Hn(r.value),r.value){r.value.addEventListener("shown.bs.modal",()=>{l.value=!0}),r.value.addEventListener("hidden.bs.modal",()=>{l.value=!1,E()});let $=!1;u=new MutationObserver(U=>{U.forEach(re=>{var K,z,ge;if(re.type==="attributes"&&re.attributeName==="class"){if(!r.value){console.warn("[DEBUG:VOTING] Observer läuft, aber modal.value ist null - überspringe");return}const Q=r.value.classList.contains("show"),ue=((z=(K=h.value)==null?void 0:K.usedVotesCount)==null?void 0:z.value)||0,ve=((ge=f.eventUser)==null?void 0:ge.voteAmount)||0,ce=ue>0&&ue<ve;$&&!Q?(console.warn("[DEBUG:VOTING] ⚠️ show-Klasse wurde ENTFERNT",{usedVotes:ue,maxVotes:ve,inSplitVoting:ce,stack:new Error().stack}),ce&&console.error("[DEBUG:VOTING] ❌ KRITISCH: Dies passierte während Split-Voting!")):!$&&Q&&console.log("[DEBUG:VOTING] ✅ show-Klasse wurde HINZUGEFÜGT",{usedVotes:ue,maxVotes:ve}),$=Q}})}),u.observe(r.value,{attributes:!0,attributeFilter:["class"]})}h.value.setVotingCompletedCallback(()=>{h.value.votingFullyCompleted.value=!0,E()}),c=setInterval(d,1e3),setTimeout(d,300)}),typeof window<"u"&&(window.addEventListener("voting:complete",w),window.addEventListener("voting:error",C),window.addEventListener("voting:reset",k)),wa(()=>{if(typeof window<"u"&&(window.removeEventListener("voting:complete",w),window.removeEventListener("voting:error",C),window.removeEventListener("voting:reset",k)),u&&(u.disconnect(),u=null,console.log("[DEBUG:VOTING] MutationObserver disconnected")),c&&(clearInterval(c),c=null,console.log("[DEBUG:VOTING] Visibility check interval cleared")),o)try{o.dispose(),console.log("[DEBUG:VOTING] Bootstrap Modal disposed")}catch(N){console.error("[DEBUG:VOTING] Fehler beim Dispose des Bootstrap Modals:",N)}r.value&&r.value.parentNode&&(console.log("[DEBUG:VOTING] Entferne Modal-Element direkt aus DOM"),r.value.parentNode.removeChild(r.value)),console.log("[DEBUG:VOTING] PollModal wird unmounted, entferne Backdrop und modal-open"),document.querySelectorAll(".modal-backdrop").forEach(N=>{N&&N.parentNode&&(N.parentNode.removeChild(N),console.log("[DEBUG:VOTING] Backdrop entfernt"))}),document.body.classList.remove("modal-open"),document.body.style.overflow="",document.body.style.paddingRight="",console.log("[DEBUG:VOTING] modal-open von body entfernt")});const A=gt(()=>{var q;return(q=f.poll)==null?void 0:q.closed},q=>{var N,$,U;if(q){console.warn("[DEBUG:VOTING] Poll wurde geschlossen (reactive watch), schließe Modal");const re=((N=f.eventUser)==null?void 0:N.voteAmount)||0,K=((U=($=h.value)==null?void 0:$.usedVotesCount)==null?void 0:U.value)||0;K>=re||K===0?I():console.warn("[DEBUG:VOTING] Split-Vote-Situation erkannt, Modal bleibt geöffnet für weitere Stimmen")}},{immediate:!1}),x=gt(()=>{var q;return(q=f.activePollEventUser)==null?void 0:q.state},q=>{var N,$,U;if(q==="closed"){console.warn("[DEBUG:VOTING] Poll-State wurde auf 'closed' gesetzt (reactive watch)");const re=((N=f.eventUser)==null?void 0:N.voteAmount)||0,K=((U=($=h.value)==null?void 0:$.usedVotesCount)==null?void 0:U.value)||0;K>=re||K===0?(console.warn("[DEBUG:VOTING] Schließe Modal, da alle Stimmen abgegeben wurden oder keine Split-Vote-Situation vorliegt"),I()):console.warn("[DEBUG:VOTING] Split-Vote-Situation erkannt, Modal bleibt geöffnet für weitere Stimmen")}},{immediate:!1}),p=gt(()=>{var q,N;return(N=(q=h.value)==null?void 0:q.usedVotesCount)==null?void 0:N.value},q=>{var $;const N=(($=f.eventUser)==null?void 0:$.voteAmount)||0;q>=N&&N>0&&(console.warn(`[DEBUG:VOTING] Alle Stimmen abgegeben (${q}/${N}), schließe Modal SOFORT`),I())},{immediate:!1});wa(()=>{if(A(),x(),p(),c&&(clearInterval(c),c=null),r.value)try{r.value.removeEventListener("shown.bs.modal",()=>{l.value=!0}),r.value.removeEventListener("hidden.bs.modal",()=>{l.value=!1})}catch(q){console.error("[DEBUG:VOTING] Fehler beim Entfernen der Event-Listener:",q)}});function D(){window.location.reload()}function R(q){if(a.value){console.warn("Vermeidung von doppelter Stimmabgabe: Formular ist bereits im Submitting-Zustand");return}a.value=!0,typeof window<"u"&&(window._lastSubmittingStartTime=Date.now());const N=setTimeout(()=>{a.value&&(console.warn("[DEBUG:VOTING] Safety-Timeout ausgelöst: isSubmitting wird zurückgesetzt"),E(),h.value&&h.value.releaseUILocks())},45e3);i("submit",q);const $=()=>{clearTimeout(N),E()},U=()=>{clearTimeout(N),E()};typeof window<"u"&&(window.addEventListener("voting:complete",$),window.addEventListener("voting:error",U),setTimeout(()=>{window.removeEventListener("voting:complete",$),window.removeEventListener("voting:error",U)},5e3))}function S(){var ve,ce,J,ae,xe,he;const q=document.getElementById("pollModal"),N=(q==null?void 0:q.classList.contains("show"))||!1,$=q?window.getComputedStyle(q).display:"none",U=$==="block",re=document.body.classList.contains("modal-open"),K=((ve=f.eventUser)==null?void 0:ve.voteAmount)||0;console.log("[DEBUG:VOTING] Lese votingProcess.usedVotesCount.value:",(J=(ce=h.value)==null?void 0:ce.usedVotesCount)==null?void 0:J.value,"votingProcess exists:",!!h.value);const z=((xe=(ae=h.value)==null?void 0:ae.usedVotesCount)==null?void 0:xe.value)||0,ge=z>0&&z<K,Q=N;if(console.log(`[DEBUG:VOTING] showModal() aufgerufen: hasShowClass=${N}, computedDisplay=${$}, hasVisibleDisplay=${U}, bodyHasModalOpen=${re}, inSplitVoteSituation=${ge}, usedVotes=${z}/${K}, isModalAlreadyVisible=${Q}`),z>=K&&K>0)return;if(f.poll&&f.poll.closed&&!ge){if(console.warn("[DEBUG:VOTING] Poll ist geschlossen, Modal wird geschlossen"),o)try{o.hide()}catch(Ae){console.error("[DEBUG:VOTING] Fehler beim Schließen des geschlossenen Poll-Modals:",Ae)}return}if(!ge)try{if(((he=f.activePollEventUser)==null?void 0:he.state)==="closed"){console.warn("[DEBUG:VOTING] Poll-State ist 'closed' laut activePollEventUser, Modal wird nicht geöffnet");return}}catch(Ae){console.error("[DEBUG:VOTING] Fehler bei extra Poll-State-Prüfung:",Ae)}if(a.value=!1,!Q&&f.poll&&f.poll.id&&localStorage.removeItem(`poll_form_data_${f.poll.id}`),!Q&&s.value?(s.value.reset(!1),console.log("[DEBUG:VOTING] Formular zurückgesetzt (Modal war nicht sichtbar)")):Q&&console.log("[DEBUG:VOTING] Formular wird NICHT zurückgesetzt (Modal bereits sichtbar)"),Q||(g.value+=1),h.value&&(h.value.isProcessingVotes.value=!1,h.value.pollFormSubmitting.value=!1,h.value.currentlyProcessingBatch.value=!1),f.poll&&f.poll.closed){console.warn("[DEBUG:VOTING] Poll wurde während der Vorbereitung geschlossen, Modal wird nicht geöffnet");return}const ue=document.body.classList.contains("modal-open");if(!Q&&!ue)try{document.body.classList.remove("modal-open"),document.body.style.overflow="",document.body.style.paddingRight="",document.body.style.pointerEvents="",document.body.style.position=""}catch(Ae){console.error("[DEBUG:VOTING] Fehler beim Bereinigen vorheriger Modal-Elemente:",Ae)}try{if(!r.value){console.error("[DEBUG:VOTING] Kann Modal nicht öffnen: DOM-Element nicht verfügbar");return}if(o){const Ae=z<K;if(Q&&Ae){console.log("[DEBUG:VOTING] Modal bereits sichtbar mit verbleibenden Stimmen: bleibt offen"),console.log("[DEBUG:VOTING] modal.value ist:",r.value?"vorhanden":"NULL/UNDEFINED"),console.log("[DEBUG:VOTING] Rufe bootstrapModal.show() auf um Modal sichtbar zu machen");try{o.show(),console.log("[DEBUG:VOTING] bootstrapModal.show() erfolgreich aufgerufen"),setTimeout(()=>{if(r.value){const Ee=r.value.classList.contains("show"),G=window.getComputedStyle(r.value).display;console.log(`[DEBUG:VOTING] Nach bootstrapModal.show(): hasShowClass=${Ee}, computedDisplay: ${G}`)}},100)}catch(Ee){console.error("[DEBUG:VOTING] Fehler beim Aufrufen von bootstrapModal.show():",Ee)}if(document.body.classList.contains("modal-open")||(document.body.classList.add("modal-open"),document.body.style.overflow="hidden",console.log("[DEBUG:VOTING] modal-open wiederhergestellt")),document.querySelector(".modal-backdrop"))console.log("[DEBUG:VOTING] Backdrop bereits vorhanden");else{console.log("[DEBUG:VOTING] Backdrop fehlt, erstelle neuen");const Ee=document.createElement("div");Ee.className="modal-backdrop fade show",Ee.style.zIndex="1050",document.body.appendChild(Ee)}if(r.value&&console.log("[DEBUG:VOTING] Modal-Zustand nach Wiederherstellung:",{hasShowClass:r.value.classList.contains("show"),display:r.value.style.display,computedDisplay:window.getComputedStyle(r.value).display,visibility:window.getComputedStyle(r.value).visibility,opacity:window.getComputedStyle(r.value).opacity,zIndex:window.getComputedStyle(r.value).zIndex}),r.value){const Ee=new MutationObserver(G=>{G.forEach(Y=>{Y.type==="attributes"&&Y.attributeName==="class"&&(r.value.classList.contains("show")||console.error("[DEBUG:VOTING] WARNUNG: show-Klasse wurde ENTFERNT!",new Error().stack))})});Ee.observe(r.value,{attributes:!0,attributeFilter:["class"]}),setTimeout(()=>Ee.disconnect(),5e3)}console.log("[DEBUG:VOTING] RETURN - showModal() wird hier beendet (Modal bleibt offen)");return}console.log("[DEBUG:VOTING] Modal wird geschlossen und neu geöffnet");try{console.log("[DEBUG:VOTING] Rufe bootstrapModal.hide() auf"),o.hide(),setTimeout(()=>{try{if(document.body.classList.contains("modal-open")){const G=document.getElementsByClassName("modal show");G.length>0&&Array.from(G).forEach(Y=>{if(Y&&Y.id!=="pollModal")try{const oe=Hn.getInstance(Y);oe&&oe.hide()}catch(oe){console.error("[DEBUG:VOTING] Fehler beim Schließen eines anderen Modals:",oe)}})}if(typeof Hn<"u"&&Hn._getInstance){const G=document.querySelector("#pollModal .modal-content");G&&(G.style.transitionDuration="0.1s")}o.show();const Ee=document.getElementById("pollModal");Ee&&(Ee.classList.add("force-show"),Ee.setAttribute("data-bs-keyboard","false"),Ee.setAttribute("data-bs-backdrop","static"),Ee.style.display="block",Ee.classList.add("show"),Ee.setAttribute("aria-modal","true"),Ee.setAttribute("role","dialog"),document.body.classList.add("modal-open"))}catch(We){console.error("[DEBUG:VOTING] Fehler beim Show nach Timeout:",We);try{o.show()}catch(Ee){console.error("[DEBUG:VOTING] Auch zweiter Versuch fehlgeschlagen:",Ee)}}},150)}catch(We){console.warn("[DEBUG:VOTING] Fehler beim Schließen vor Neuanzeige:",We);try{o.show()}catch(Ee){console.error("[DEBUG:VOTING] Fehler beim direkten Anzeigen:",Ee)}}}else{if(console.warn("[DEBUG:VOTING] bootstrapModal nicht initialisiert, erstelle neu"),typeof Hn>"u"){console.error("[DEBUG:VOTING] Bootstrap Modal-Klasse ist nicht verfügbar");return}if(!r.value){console.error("[DEBUG:VOTING] DOM-Element ist während der Initialisierung verschwunden");return}o=new Hn(r.value),o.show()}}catch(Ae){console.error("[DEBUG:VOTING] Fehler beim Öffnen des Modals:",Ae)}}function I(){try{if(a.value=!0,f.poll&&f.poll.id&&localStorage.removeItem(`poll_form_data_${f.poll.id}`),h.value&&(h.value.pollFormSubmitting.value=!0,h.value.currentlyProcessingBatch.value=!0,h.value.isProcessingVotes.value=!0),!r.value){console.warn("[DEBUG:VOTING] Modal-Element nicht verfügbar beim Schließen"),F();return}if(!o&&r.value)try{if(typeof Hn>"u"){console.error("[DEBUG:VOTING] Bootstrap Modal-Klasse ist nicht verfügbar"),F();return}o=new Hn(r.value)}catch(q){console.error("[DEBUG:VOTING] Fehler bei Bootstrap-Modal-Initialisierung:",q),F()}if(o)try{o.hide()}catch(q){console.error("[DEBUG:VOTING] Fehler beim Schließen des Modals:",q),F()}else F()}catch(q){console.error("[DEBUG:VOTING] Unerwarteter Fehler beim Schließen des Modals:",q),F()}}function F(){try{r.value&&(r.value.classList.remove("show"),r.value.style.display="none",r.value.setAttribute("aria-hidden","true")),setTimeout(()=>{document.querySelectorAll(".modal.show:not(#pollModal)").length===0&&(document.body.classList.remove("modal-open"),document.body.style.overflow="",document.body.style.paddingRight="",document.body.style.pointerEvents="",document.body.style.position="")},500),setTimeout(()=>{var q,N,$;try{o&&o.hide(),H(!1),g.value+=1;const U=((q=f.eventUser)==null?void 0:q.voteAmount)||0,re=(($=(N=h.value)==null?void 0:N.usedVotesCount)==null?void 0:$.value)||0,K=re>0&&re<U;(!K||re>=U)&&h.value?h.value.resetVoteCounts():!K&&h.value.isProcessingVotes.value&&setTimeout(()=>{h.value&&!K&&h.value.resetVoteCounts()},500)}catch(U){console.error("[DEBUG:VOTING] Fehler beim verzögerten Schließen des Modals:",U)}},100)}catch(q){console.error("[DEBUG:VOTING] Fehler beim Bereinigen der Modal-Effekte:",q)}}function H(q=!1){a.value=!1,f.poll&&f.poll.id&&localStorage.removeItem(`poll_form_data_${f.poll.id}`),s.value&&(q?s.value.resetSubmitState?s.value.resetSubmitState():s.value.isSubmitting=!1:s.value.reset&&s.value.reset(!1)),typeof window<"u"&&(window._pollFormSubmitting=!1,window._isProcessingVotes=!1,window._currentlyProcessingBatch=!1,window._lastSubmittingStartTime=null);try{const N=document.querySelector('.modal-content > div[style*="background-color: rgba(255,255,255,0.95)"]');N&&(N.style.display="none"),setTimeout(()=>{var ge,Q,ue;const $=((ge=h.value.usedVotesCount)==null?void 0:ge.value)||0,U=((Q=f.eventUser)==null?void 0:Q.voteAmount)||0,re=$<U,K=(ue=r.value)==null?void 0:ue.classList.contains("show"),z=document.querySelectorAll(".modal.show:not(#pollModal)");!re&&!K&&z.length===0&&(document.body.classList.remove("modal-open"),document.body.style.overflow="",document.body.style.paddingRight="")},500)}catch(N){console.error("[DEBUG:VOTING] Fehler bei DOM-basierter UI-Entsperrung:",N)}setTimeout(()=>{a.value=!1,f.poll&&f.poll.id&&localStorage.removeItem(`poll_form_data_${f.poll.id}`),h.value&&typeof h.value.releaseUILocks=="function"&&h.value.releaseUILocks(),typeof window<"u"&&window.dispatchEvent(new CustomEvent("modal:reset-complete"))},50)}return t({showModal:S,hideModal:I,modalState:v,isSubmitting:a,pollForm:s,reset:H,resetSubmittingState:E}),(q,N)=>{var $,U,re,K,z,ge,Q,ue,ve,ce;return P(),V("div",UGe,[m("div",{id:"pollModal",ref_key:"modal",ref:r,class:"modal fade",tabindex:"-1","data-bs-keyboard":"false","data-bs-backdrop":"static","aria-hidden":"true"},[m("div",zGe,[n.poll?(P(),V("div",HGe,[a.value&&!((($=h.value.usedVotesCount)==null?void 0:$.value)>0&&((U=h.value.usedVotesCount)==null?void 0:U.value)<n.eventUser.voteAmount)?(P(),V("div",WGe,[m("div",jGe,[N[0]||(N[0]=m("span",{class:"spinner-border spinner-border-lg text-primary",role:"status"},null,-1)),m("div",qGe,B(q.$t("view.polls.modal.submitting"))+"...",1),N[1]||(N[1]=m("div",{class:"mt-2 small"},"Bitte warten Sie, Ihre Stimmen werden gezählt",-1)),((re=h.value.usedVotesCount)==null?void 0:re.value)>0?(P(),V("div",GGe," Fortschritt: "+B((K=h.value.usedVotesCount)==null?void 0:K.value)+" von "+B(n.eventUser.voteAmount)+" Stimmzetteln ",1)):ne("",!0)])])):ne("",!0),m("div",KGe,[m("h5",YGe,[fe(B(n.poll.title),1),N[2]||(N[2]=m("br",null,null,-1)),f.event.multivoteType!==2&&((z=h.value.usedVotesCount)==null?void 0:z.value)<n.eventUser.voteAmount?(P(),V("small",QGe,[m("b",null,"("+B(q.$t("view.polls.modal.ballotCounter",{current:((ge=h.value.usedVotesCount)==null?void 0:ge.value)+1,total:n.eventUser.voteAmount}))+")",1)])):ne("",!0)]),m("button",{type:"button",class:"btn btn-sm btn-outline-secondary ms-auto",onClick:D,title:"Seite neu laden"},[...N[3]||(N[3]=[m("i",{class:"bi bi-arrow-clockwise"},null,-1)])])]),m("div",ZGe,[n.poll.closed?(P(),V("div",JGe,[...N[4]||(N[4]=[m("i",{class:"bi bi-exclamation-triangle me-2"},null,-1),m("strong",null,"Diese Abstimmung ist geschlossen und kann nicht mehr verwendet werden.",-1)])])):(Q=h.value.votingFullyCompleted)!=null&&Q.value||n.eventUser.voteAmount&&((ue=h.value.usedVotesCount)==null?void 0:ue.value)>=n.eventUser.voteAmount?(P(),V("div",XGe,[...N[5]||(N[5]=[m("i",{class:"bi bi-check-circle me-2"},null,-1),m("strong",null,"Sie haben alle verfügbaren Stimmen für diese Abstimmung abgegeben.",-1)])])):ne("",!0),n.poll.maxVotes===1?(P(),V("p",eKe,B(q.$t("view.polls.modal.maxVote1")),1)):ne("",!0),n.poll.maxVotes>1?(P(),V("p",tKe,B(q.$t("view.polls.modal.maxVoteGreater1"))+" "+B(n.poll.maxVotes),1)):ne("",!0),n.poll.minVotes>0?(P(),V("p",nKe,B(q.$t("view.polls.modal.minVoteGreater0"))+" "+B(n.poll.minVotes),1)):ne("",!0),!n.poll.closed&&!((ve=h.value.votingFullyCompleted)!=null&&ve.value||n.eventUser.voteAmount&&((ce=h.value.usedVotesCount)==null?void 0:ce.value)>=n.eventUser.voteAmount)?(P(),Ge(EGe,{ref_key:"pollForm",ref:s,key:g.value,event:n.event,"event-user":n.eventUser,poll:n.poll,"vote-counter":n.voteCounter,onSubmit:R},null,8,["event","event-user","poll","vote-counter"])):ne("",!0),n.poll.type==="PUBLIC"&&n.activePollEventUser&&n.event.publicVoteVisible?(P(),V("div",iKe,[N[6]||(N[6]=m("hr",null,null,-1)),Ce(vW,{"active-poll-event-user":n.activePollEventUser,"event-id":n.event.id,event:n.event,poll:n.poll},null,8,["active-poll-event-user","event-id","event","poll"])])):ne("",!0)])])):ne("",!0)])],512)])}}},rKe={class:"created-polls list-group"},sKe={class:"mb-1"},oKe=["title"],aKe=["disabled","onClick"],lKe={__name:"PollList",props:{polls:{type:Array,required:!0},completedPolls:{type:Array,default:()=>[],deprecated:"Use userVoteCycle from poll data instead"}},emits:["play"],setup(n,{emit:t}){const e=t,i=n;function r(s){return s.userVoteCycle&&s.userVoteCycle.voteCycle>0?!0:i.completedPolls&&i.completedPolls.length>0?i.completedPolls.filter(a=>a.id===s.id).length>0:!1}return(s,o)=>(P(),V("div",rKe,[(P(!0),V(Fe,null,ct(n.polls,(a,l)=>(P(),V("div",{key:l,class:"list-group-item d-flex justify-content-between align-items-center"},[m("div",null,[m("h5",sKe,[fe(B(a.title)+" ",1),r(a)?(P(),V("i",{key:0,class:"bi bi-check-circle-fill text-success ms-2",title:s.$t("view.polls.completed")},null,8,oKe)):ne("",!0)])]),m("button",{class:Ze({btn:!0,"btn-success":!r(a),"btn-secondary":r(a)}),disabled:r(a),onClick:c=>e("play",a)},[...o[0]||(o[0]=[m("i",{class:"bi bi-play-fill bi--2xl"},null,-1)])],10,aKe)]))),128))]))}},cKe=mt`
  query pollsWithVoteStatus($eventId: ID!, $eventUserId: ID!) {
    polls(eventId: $eventId) {
      id
      title
      pollAnswer
      type
      list
      possibleAnswers {
        id
        content
      }
      minVotes
      maxVotes
      allowAbstain
      userVoteCycle(eventUserId: $eventUserId) {
        voteCycle
        maxVotes
      }
    }
  }
`,uKe={__name:"AsyncEventDashboard",props:{event:{type:Object,required:!0}},setup(n){const t=n,e=nn(),i=Z(e.getEventUser),r=Z(null),s=Z(null),o=Z(!1),a=Z([]),l=Z([]),c=hx(),u=mx(i,t.event),d=u.voteCounter;u.setVotingCompletedCallback(x);const f=le(()=>{var p,D;return!((p=i.value)!=null&&p.online)||!((D=i.value)!=null&&D.id)}),h=le(()=>{var p,D,R,S;return(((p=t.event)==null?void 0:p.active)===!0||((D=t.event)==null?void 0:D.active)===1)&&((R=t.event)==null?void 0:R.scheduledDatetime)>0&&((S=t.event)==null?void 0:S.scheduledDatetime)<=Y_()}),g=le(()=>{var p,D;return((p=t.event)==null?void 0:p.finished)===!0||((D=t.event)==null?void 0:D.finished)===1}),v=le(()=>{var p;return kJ((p=t.event)==null?void 0:p.scheduledDatetime)}),_=le(()=>{var p;return EJ((p=t.event)==null?void 0:p.scheduledDatetime)}),w=ln(cKe,{eventId:t.event.id,eventUserId:i.value.id},{fetchPolicy:"cache-and-network"});w.onResult(({data:p})=>{a.value=(p==null?void 0:p.polls)||[],a.value.length!=0&&r.value===null&&a.value.length>0&&u.resetVoteCounts&&u.resetVoteCounts()}),ln(xh,{eventId:t.event.id,page:0,pageSize:99999},{fetchPolicy:"cache-and-network"}).onResult(({data:p})=>{var D;!((D=p==null?void 0:p.pollResult)!=null&&D.length)>0||(l.value=p.pollResult)}),Ur(t1,{eventUserId:i.value.id}).onResult(({data:p})=>{if(p.updateEventUserAccessRights){const{verified:D,voteAmount:R,allowToVote:S,pollHints:I}=p.updateEventUserAccessRights;e.updateEventUserAccessRights(D,R,S,I),ze(ss.global.tc("view.polls.userUpdate"),{type:"info",autoClose:!1,onOpen:()=>o.value=!0,onClose:()=>o.value=!1})}});function E(p){var D;((D=r.value)==null?void 0:D.id)!==p.id&&(u.resetVoteCounts&&u.resetVoteCounts(),d.value=1),r.value=p,s.value.showModal()}async function A(p){try{if(p.votesToUse&&parseInt(p.votesToUse,10)>0){const D=parseInt(p.votesToUse,10);D===i.value.voteAmount?(p.useAllAvailableVotes=!0,await u.handleFormSubmit(p,r)):await u.handleFormSubmit(p,r,D)}else await u.handleFormSubmit(p,r)}catch{ze(ss.global.tc("view.polls.error.submission"),{type:"error"})}}async function x(){r.value&&(c.saveVote(r.value.id,i.value,t.event),s.value.hideModal(),r.value=null,w.refetch()),ze(ss.global.t("view.user.verified.voted"),{type:"success",autoClose:3e3,hideProgressBar:!1,closeButton:!0,position:"top-right"})}return(p,D)=>{var R,S;return P(),V(Fe,null,[f.value?(P(),Ge(gW,{key:0})):ne("",!0),i.value&&!i.value.verified?(P(),Ge(mW,{key:1,"event-user":i.value},null,8,["event-user"])):ne("",!0),i.value&&i.value.verified?(P(),V(Fe,{key:2},[n.event&&i.value&&i.value.verified?(P(),Ge(pW,{key:0,event:n.event,"highlight-status-change":o.value,"event-user":i.value},null,8,["event","highlight-status-change","event-user"])):ne("",!0),h.value&&!g.value?(P(),V(Fe,{key:1},[((R=a.value)==null?void 0:R.length)>0?(P(),Ge(lKe,{key:0,polls:a.value,onPlay:E},null,8,["polls"])):ne("",!0),Ce(bW,{ref_key:"pollModal",ref:s,poll:r.value,event:n.event,"event-user":i.value,"vote-counter":M(d),onSubmit:A},null,8,["poll","event","event-user","vote-counter"])],64)):ne("",!0),!h.value&&!g.value?(P(),Ge(qr,{key:2,type:"warning",message:p.$t("view.polls.eventIsNotRunning",{date:v.value,time:_.value})},null,8,["message"])):ne("",!0),g.value?(P(),Ge(qr,{key:3,type:"info",message:p.$t("view.polls.eventIsFinish")},null,8,["message"])):ne("",!0),g.value&&((S=l.value)==null?void 0:S.length)>0?(P(),Ge(n1,{key:4,"event-record":n.event,"poll-results":l.value},null,8,["event-record","poll-results"])):ne("",!0)],64)):ne("",!0)],64)}}},dKe={__name:"JoinMeetingControl",props:{event:{type:Object,required:!0}},emits:["joinMeeting"],setup(n,{emit:t}){const e=t;function i(){e("joinMeeting")}return(r,s)=>(P(),V(Fe,null,[m("button",{class:"btn btn-primary",onClick:bt(i,["prevent"])},[s[0]||(s[0]=m("i",{class:"bi bi-camera-video-fill me-2"},null,-1)),fe(B(r.$t("view.event.meeting.join")),1)]),s[1]||(s[1]=m("hr",null,null,-1))],64))}};function fKe(n){const t=Qr.ZOOM_AUTH,r={method:"POST",redirect:"follow",referrerPolicy:"no-referrer",cache:"no-cache",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json",Authorization:`Bearer ${nn().getAuthToken}`},body:JSON.stringify({meetingNumber:n,role:0})};return hc(t,r)}const hKe={class:"iframe-container"},mKe={__name:"ZoomFrame",props:{sdkKey:{type:String,required:!0},sdkSecret:{type:String,required:!0},nickname:{type:String,required:!0},meetingNumber:{type:String,required:!0},password:{type:String,required:!0},returnUrl:{type:String,required:!0}},emits:["loaded"],setup(n,{emit:t}){const e=t,i=Z({}),r=Z(null),s=n;Jt(async()=>{var c,u,d,f,h;const{ZoomMtg:a}=await eo(async()=>{const{ZoomMtg:g}=await import("./index-QhAAntOZ.js").then(v=>v.i);return{ZoomMtg:g}},[]);r.value=a,document.getElementById("zmmtg-root").style.display="block",r.value.setZoomJSLib("/lib/zoom/lib","/av"),(c=r.value)==null||c.preLoadWasm(),(u=r.value)==null||u.prepareJssdk(),(d=r.value)==null||d.i18n.load("de-DE"),(f=r.value)==null||f.i18n.reload("de-DE"),i.value={sdkKey:s.sdkKey,sdkSecret:s.sdkSecret,meetingNumber:s.meetingNumber,userName:s.nickname,passWord:s.password,leaveUrl:s.returnUrl,role:0,lang:"de-DE",china:!1,userEmail:""},sR("meeting_number",s.meetingNumber),sR("meeting_pwd",s.password),e("loaded");const{signature:l}=await fKe((h=i.value)==null?void 0:h.meetingNumber);i.value.signature=l,o()});function o(){var a,l,c;(c=r.value)==null||c.init({leaveUrl:(a=i.value)==null?void 0:a.leaveUrl,webEndpoint:(l=i.value)==null?void 0:l.webEndpoint,success:()=>{var u,d,f,h,g,v,_,w,C,k,E;(d=r.value)==null||d.i18n.load((u=i.value)==null?void 0:u.lang),(h=r.value)==null||h.i18n.reload((f=i.value)==null?void 0:f.lang),(E=r.value)==null||E.join({sdkKey:(g=i.value)==null?void 0:g.sdkKey,signature:(v=i.value)==null?void 0:v.signature,meetingNumber:(_=i.value)==null?void 0:_.meetingNumber,passWord:(w=i.value)==null?void 0:w.passWord,userName:(C=i.value)==null?void 0:C.userName,userEmail:(k=i.value)==null?void 0:k.userEmail,success:function(){var A,x;(A=r.value)==null||A.getAttendeeslist({}),(x=r.value)==null||x.getCurrentUser()},error:function(A){console.error(A)}})},error:function(u){console.error(u)}})}return(a,l)=>(P(),V("div",hKe))}},gKe={class:"meeting"},pKe={class:"container-zoom"},vKe=["title"],bKe={__name:"MeetingContainer",props:{event:{type:Object,required:!0},eventUser:{type:Object,required:!0}},setup(n){const t=Z(!1),e=Z(!1);function i(){const s=document.querySelector("body"),o=document.querySelector("#zmmtg-root");s&&o&&!t.value?(s.classList.add("zoom-hidden"),s.classList.remove("zoom-show"),o.classList.add("hidden"),o.style.display="none"):(s.classList.add("zoom-show"),s.classList.remove("zoom-hidden"),o.classList.remove("hidden"),o.style.display="block"),t.value=!t.value}function r(){e.value=!0}return(s,o)=>(P(),V("div",gKe,[m("div",pKe,[o[2]||(o[2]=m("div",{id:"zoom-hook"},null,-1)),n.event.meeting.credentials?(P(),Ge(mKe,{key:0,"sdk-key":n.event.meeting.sdkKey,"sdk-secret":n.event.meeting.sdkSecret,nickname:n.eventUser.publicName,"meeting-number":n.event.meeting.credentials.meetingId,password:n.event.meeting.credentials.password,"return-url":n.event.slug,onLoaded:r},null,8,["sdk-key","sdk-secret","nickname","meeting-number","password","return-url"])):ne("",!0),e.value?(P(),V("div",{key:1,class:"btn btn-primary position-fixed sticky-top mt-2",title:s.$t("view.event.meeting.switchView"),onClick:bt(i,["prevent"])},[t.value?(P(),V(Fe,{key:0},[o[0]||(o[0]=m("i",{class:"bi bi bi-fullscreen me-2"},null,-1)),m("span",null,B(s.$t("view.event.meeting.backToMeeting")),1)],64)):(P(),V(Fe,{key:1},[o[1]||(o[1]=m("i",{class:"bi bi-fullscreen-exit me-2"},null,-1)),m("span",null,B(s.$t("view.event.meeting.backToDashboard")),1)],64))],8,vKe)):ne("",!0)])]))}},wKe={class:"container-poll-status d-print-none"},yKe={key:0,class:"container-poll-voted text-center alert alert-success"},_Ke=["innerHTML"],kKe={key:0,class:"container-active-poll text-center alert alert-primary",role:"alert"},EKe=["innerHTML"],CKe={key:1,class:"container-no-active-poll text-center alert alert-warning d-flex justify-content-center align-items-center",role:"alert"},TKe={class:"mb-0"},SKe={__name:"PollStatus",props:{pollState:{type:String,required:!0},existActivePoll:{type:Boolean,required:!0}},setup(n){return(t,e)=>(P(),V(Fe,null,[m("div",wKe,[n.pollState==="voted"?(P(),V("div",yKe,[e[0]||(e[0]=m("i",{class:"bi-check bi--4xl my-3"},null,-1)),m("h2",{innerHTML:t.$t("view.user.verified.voted")},null,8,_Ke)])):ne("",!0)]),n.existActivePoll?(P(),V("div",kKe,[e[1]||(e[1]=m("i",{class:"bi-arrow-repeat bi--spin bi--4xl my-3"},null,-1)),m("p",{innerHTML:t.$t("view.user.verified.activePoll")},null,8,EKe)])):(P(),V("div",CKe,[m("p",TKe,B(t.$t("view.user.verified.noActivePoll")),1)])),e[2]||(e[2]=m("hr",{class:"d-print-none"},null,-1))],64))}},AKe={class:"container-modal d-print-none"},IKe={class:"modal-dialog modal-dialog-centered modal-xl modal-dialog-scrollable"},PKe={key:0,class:"modal-content"},xKe={class:"modal-header"},OKe={class:"modal-title"},RKe={class:"modal-body"},VKe={key:1,class:"alert alert-info"},DKe={class:"modal-footer"},NKe={"aria-hidden":"true"},LKe={__name:"ResultModal",props:{pollResult:{type:Object,required:!1,default:null},event:{type:Object,required:!0,default:()=>({})}},setup(n,{expose:t}){const e=Z(null);let i=null;const r=Z("validVotes"),s=Z(!1),o=Z(!1);let a=null;window.setTimeout(()=>{s.value=!1},0),window._resultModalTracking=window._resultModalTracking||{},window._resultModalTracking.activeModalId=window._resultModalTracking.activeModalId||null,Jt(()=>{try{i=new Hn(e.value,{backdrop:"static",keyboard:!1})}catch(f){console.error("[DEBUG:RESULT] Fehler bei Bootstrap-Modal-Initialisierung im onMounted:",f)}e.value&&(e.value.addEventListener("shown.bs.modal",()=>{s.value=!0,o.value=!0,a&&clearTimeout(a),a=setTimeout(()=>{o.value=!1},1e3)}),e.value.addEventListener("hidden.bs.modal",()=>{s.value=!1}))});function l(){if(s.value||window._newPollActive)return;if(o.value=!1,a&&(clearTimeout(a),a=null),r.value="validVotes",!i&&e.value)try{i=new Hn(e.value,{backdrop:"static",keyboard:!1})}catch(h){console.error("[DEBUG:RESULT] Fehler bei Bootstrap-Modal-Initialisierung:",h),s.value=!1;return}if(!i){console.error("[DEBUG:RESULT] Bootstrap Modal konnte nicht initialisiert werden"),s.value=!1;return}const f=Date.now().toString();window._resultModalTracking.activeModalId=f,s.value=!0;try{i.show(),document.body.classList.contains("modal-open")||(document.body.classList.add("modal-open"),document.body.style.overflow="hidden")}catch(h){console.error("[DEBUG:RESULT] Fehler beim Öffnen des Modals:",h),s.value=!1}}function c(){if(s.value=!1,window._resultModalTracking.activeModalId=null,!i&&e.value)try{i=new Hn(e.value)}catch(f){console.error("[DEBUG:VOTING] Fehler bei Bootstrap-Modal-Initialisierung:",f)}try{i&&i.hide(),o.value=!1,a&&(clearTimeout(a),a=null)}catch(f){console.error("[DEBUG:VOTING] Fehler bei Standard-Bootstrap-Schließung:",f)}try{if(e.value&&typeof Hn<"u"&&typeof Hn.getInstance=="function"){const f=Hn.getInstance(e.value);f&&f.hide()}}catch(f){console.error("[DEBUG:VOTING] Fehler bei nativem Bootstrap-Modal-Zugriff:",f)}try{if(e.value){e.value.classList.remove("show"),e.value.style.display="none",e.value.setAttribute("aria-hidden","true");const h=document.getElementsByClassName("modal-backdrop");h.length>0&&Array.from(h).forEach(g=>{g&&g.parentNode&&g.parentNode.removeChild(g)}),document.body.classList.remove("modal-open"),document.body.style.overflow="",document.body.style.paddingRight="",document.body.style.pointerEvents="",document.body.style.position=""}document.querySelectorAll('.modal-backdrop, [data-bs-backdrop="static"]').forEach(h=>{h&&h.parentNode&&h.parentNode.removeChild(h)})}catch(f){console.error("[DEBUG:VOTING] Fehler bei DOM-Manipulation:",f)}}function u(f){r.value=f}function d(f){f&&(r.value="validVotes")}return t({showModal:l,hideModal:c,isVisible:s,updatePollResult:d}),(f,h)=>(P(),V("div",AKe,[m("div",{id:"resultModal",ref_key:"modal",ref:e,class:"modal fade",tabindex:"-1","data-bs-keyboard":"false","data-bs-backdrop":"false","aria-hidden":"true"},[m("div",IKe,[n.pollResult?(P(),V("div",PKe,[m("div",xKe,[m("h5",OKe,B(M(Xe)("view.polls.modal.result")),1),m("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:h[0]||(h[0]=g=>c())})]),m("div",RKe,[n.pollResult&&n.pollResult.poll?(P(),Ge(rW,{key:0,"poll-result":n.pollResult,"event-record":n.event,"initial-percentage-type":r.value,onPercentageTypeChange:u},null,8,["poll-result","event-record","initial-percentage-type"])):(P(),V("div",VKe," Lade Ergebnisse... "))]),m("div",DKe,[m("button",{type:"button",class:"btn btn-danger","aria-label":"Schließen",onClick:h[1]||(h[1]=g=>c())},[m("span",NKe,B(M(Xe)("view.polls.modal.close")),1)])])])):ne("",!0)])],512)]))}},MKe=Yt(LKe,[["__scopeId","data-v-6d0ade80"]]),$Ke=mt`
  subscription ($eventId: ID) {
    pollLifeCycle(eventId: $eventId) {
      eventId
      state
      poll {
        id
        title
        pollAnswer
        type
        list
        possibleAnswers {
          id
          content
        }
        minVotes
        maxVotes
        allowAbstain
      }
      pollResultId
    }
  }
`,BKe={__name:"SyncEventDashboard",props:{event:{type:Object,required:!0}},setup(n){const t=nn(),{t:e}=e4.useI18n(),i=n,r=Z(t.getEventUser),s=Z(!1),o=Z(0),a=Z(3),l=Z(!0),c=Z("closed"),u=Z(null),d=Z(null),f=Z(null),h=Z([]),g=Z(null),v=Z(!1),_=hx(),w=mx(r,i.event),C=w.voteCounter,k=w.usedVotesCount,E=Z(null),A=Z(0);function x(){try{const ue=document.querySelectorAll(".modal-backdrop");ue.length>0&&Array.from(ue).forEach(ce=>{ce&&ce.parentNode&&ce.parentNode.removeChild(ce)}),document.body.classList.remove("modal-open"),document.body.style.overflow="",document.body.style.paddingRight="",document.body.style.pointerEvents="",document.body.style.position="",document.querySelectorAll('[data-bs-backdrop="static"]').forEach(ce=>{ce&&ce.parentNode&&!ce.closest(".modal")&&ce.parentNode.removeChild(ce)})}catch(ue){console.error("[DEBUG:VOTING] Fehler beim Entsperren der UI:",ue)}}Z(Date.now().toString()+"-"+Math.random().toString(36).substring(2,15));const p=Z(null),D=le(()=>{var he,Ae,We;const ue=((he=r.value)==null?void 0:he.voteAmount)>=1,ve=(Ae=r.value)==null?void 0:Ae.allowToVote,ce=k.value||0,J=((We=r.value)==null?void 0:We.voteAmount)||0,ae=ce<J,xe=ue&&ve&&ae;return console.log(`[DEBUG:VOTING] showVotingModal berechnet: hasVotesAvailable=${ue}, isAllowedToVote=${ve}, usedVotes=${ce}, maxVotes=${J}, hasRemainingVotes=${ae}, RESULT=${xe}`),xe});gt(k,(ue,ve)=>{var J,ae,xe,he;console.log(`[DEBUG:VOTING] 🔄 usedVotesCount GEÄNDERT von ${ve} zu ${ue}`),console.log(`[DEBUG:VOTING] 🔍 eventUser.voteAmount=${(J=r.value)==null?void 0:J.voteAmount}, eventUser.allowToVote=${(ae=r.value)==null?void 0:ae.allowToVote}`);const ce=((xe=r.value)==null?void 0:xe.voteAmount)||0;if(ue>=ce&&ce>0&&(console.log(`[DEBUG:VOTING] 🎯 Alle Stimmen abgegeben (${ue}/${ce}), setze isSubmitting zurück`),(he=d.value)!=null&&he.resetSubmittingState))try{d.value.resetSubmittingState(),console.log("[DEBUG:VOTING] ✅ isSubmitting erfolgreich zurückgesetzt via resetSubmittingState")}catch(Ae){console.error("[DEBUG:VOTING] ❌ Fehler beim Zurücksetzen von isSubmitting:",Ae)}},{immediate:!0}),gt(D,(ue,ve)=>{var ce;if(console.log(`[DEBUG:VOTING] ⚠️ showVotingModal GEÄNDERT von ${ve} zu ${ue}`),ue)console.log("[DEBUG:VOTING] ✅ Modal SOLLTE jetzt im DOM sein (v-if=true)");else if(console.log("[DEBUG:VOTING] ❌ Modal SOLLTE jetzt AUS dem DOM sein (v-if=false)"),(ce=d.value)!=null&&ce.hideModal)try{console.log("[DEBUG:VOTING] 🔧 Rufe hideModal() auf, bevor Modal unmounted wird"),d.value.hideModal()}catch(J){console.error("[DEBUG:VOTING] Fehler beim Schließen des Modals vor Unmount:",J)}},{immediate:!0,flush:"sync"}),w.setVotingCompletedCallback(()=>{c.value!=="closed"&&(c.value="voted"),d.value.hideModal()});const R=le(()=>u.value!==null&&c.value!=="closed"),S=le(()=>{var ue,ve;return!((ue=r.value)!=null&&ue.online)||!((ve=r.value)!=null&&ve.id)});let I=null;Jt(()=>{I=setInterval(()=>{var ue,ve;try{const ce=((ue=r.value)==null?void 0:ue.voteAmount)||0,J=((ve=w.usedVotesCount)==null?void 0:ve.value)||0;J>0&&J<ce&&(w.isProcessingVotes.value||w.pollFormSubmitting.value||w.currentlyProcessingBatch.value)&&!w.isActiveVotingSession()&&(console.warn("[DEBUG:VOTING] Watchdog: UI-Locks zurücksetzen"),w.isProcessingVotes.value=!1,w.pollFormSubmitting.value=!1,w.currentlyProcessingBatch.value=!1,d.value&&u.value&&!u.value.closed&&c.value!=="closed"&&(console.warn("[DEBUG:VOTING] Watchdog: Versuche Modal zu öffnen"),setTimeout(()=>{try{d.value.showModal()}catch(xe){console.error("[DEBUG:VOTING] Watchdog: Fehler beim Öffnen des Modals:",xe)}},100)))}catch(ce){console.error("[DEBUG:VOTING] Watchdog-Fehler:",ce)}},3e3)}),wa(()=>{I&&(clearInterval(I),I=null)});const F=ln(oW,{eventId:i.event.id},{fetchPolicy:"cache-and-network"});F.onResult(({data:ue})=>{var J,ae,xe,he,Ae,We,Ee,G;if(!(ue!=null&&ue.activePollEventUser))return;E.value=ue.activePollEventUser,u.value=ue.activePollEventUser.poll,c.value=ue.activePollEventUser.state;const ve=((J=r.value)==null?void 0:J.voteAmount)||0,ce=((ae=w.usedVotesCount)==null?void 0:ae.value)||0;if(ve>0&&ce>=ve){c.value="voted";return}if(!(w.isProcessingVotes.value===!0||w.pollFormSubmitting.value===!0||w.currentlyProcessingBatch.value===!0||p.value!==null)&&_.canVote(u.value.id,r.value,i.event))if((xe=r.value)!=null&&xe.id&&((he=u.value)!=null&&he.id)){const Y=(We=(Ae=r.value)==null?void 0:Ae.id)==null?void 0:We.toString(),oe=(G=(Ee=u.value)==null?void 0:Ee.id)==null?void 0:G.toString();if(!Y||!oe){console.error("Ungültige Parameter für userVoteCycle:",{eventUserId:Y,pollId:oe});return}const Ue=ln(SS,{eventUserId:Y,pollId:oe},{fetchPolicy:"network-only",errorPolicy:"all"});Ue.onError(Oe=>{console.error("GraphQL-Fehler bei userVoteCycle:",Oe)}),Ue.onResult(({data:Oe})=>{if(Oe!=null&&Oe.userVoteCycle){const Le=Oe.userVoteCycle.voteCycle||0,Ye=Oe.userVoteCycle.maxVotes||r.value.voteAmount;w.usedVotesCount.value=Le,C.value=Le+1,_.restoreVoteCounter(u.value.id,i.event.id),_.upsertPollState(u.value.id,C.value,Le,i.event.id);const te=_.restoreVoteCounter(u.value.id,i.event.id);if(te!==C.value&&console.warn(`[DEBUG:COUNTER] Problem beim Speichern! Expected=${C.value}, Got=${te}`),Le>=Ye){c.value="voted";return}w.pollFormSubmitting.value=!1,w.currentlyProcessingBatch.value=!1,w.isProcessingVotes.value=!1,p.value=null,A.value=0,C.value<=Ye?setTimeout(()=>{d.value?(Le===0?(d.value.reset(!1),console.log("[DEBUG:VOTING] Neuer Poll (activePollEventUser): Formular wird zurückgesetzt")):console.log(`[DEBUG:VOTING] Split-Voting (activePollEventUser, Zyklus ${Le}): Formular wird NICHT zurückgesetzt`),setTimeout(()=>{if(d.value)try{d.value.showModal()}catch(se){console.error("[DEBUG:VOTING] Fehler beim Öffnen des Modals nach reset:",se)}else console.warn("[DEBUG:VOTING] pollModal.value wurde null zwischen reset und showModal!")},50)):console.warn("[DEBUG:VOTING] pollModal.value ist null beim Versuch, reset aufzurufen und Modal zu öffnen")},100):c.value="voted"}else{const Le=_.restoreVoteCounter(u.value.id,i.event.id),Ye=_.getUsedVotes(u.value.id,i.event.id);C.value=Le,w.usedVotesCount.value=Ye,C.value>99e3&&(console.warn(`[DEBUG:COUNTER] Unplausibel hoher voteCounter (${C.value})! Setze auf ${Ye+1}`),C.value=Ye+1),w.pollFormSubmitting.value=!1,w.currentlyProcessingBatch.value=!1,w.isProcessingVotes.value=!1,p.value=null,A.value=0,C.value<=ve?setTimeout(()=>{if(d.value){const te=w.usedVotesCount.value||0;te===0?(d.value.reset(!1),console.log("[DEBUG:VOTING] Neuer Poll (activePollEventUser Fallback 1): Formular wird zurückgesetzt")):console.log(`[DEBUG:VOTING] Split-Voting (activePollEventUser Fallback 1, ${te} verwendet): Formular wird NICHT zurückgesetzt`),setTimeout(()=>{if(d.value)try{d.value.showModal()}catch(se){console.error("[DEBUG:VOTING] Fehler beim Öffnen des Modals nach reset:",se)}else console.warn("[DEBUG:VOTING] pollModal.value wurde null zwischen reset und showModal!")},50)}else console.warn("[DEBUG:VOTING] pollModal.value ist null beim Versuch, reset aufzurufen und Modal zu öffnen")},100):c.value="voted"}})}else C.value=_.restoreVoteCounter(u.value.id,i.event.id),w.usedVotesCount.value=_.getUsedVotes(u.value.id,i.event.id),w.pollFormSubmitting.value=!1,w.currentlyProcessingBatch.value=!1,w.isProcessingVotes.value=!1,p.value=null,A.value=0,C.value<=ve?(u.value&&u.value.id&&localStorage.removeItem(`poll_form_data_${u.value.id}`),setTimeout(()=>{var oe;const Y=w.usedVotesCount.value||0;Y===0?((oe=d.value)==null||oe.reset(!1),console.log("[DEBUG:VOTING] Neuer Poll (activePollEventUser Fallback 2): Formular wird zurückgesetzt")):console.log(`[DEBUG:VOTING] Split-Voting (activePollEventUser Fallback 2, ${Y} verwendet): Formular wird NICHT zurückgesetzt`),u.value&&u.value.id&&localStorage.removeItem(`poll_form_data_${u.value.id}`),d.value.showModal()},100)):c.value="voted"});const H=ln(xh,{eventId:i.event.id,page:o,pageSize:a},{fetchPolicy:"cache-and-network"});H.onResult(({data:ue})=>{ue!=null&&ue.pollResult&&(o.value===0&&ue.pollResult.length<a.value&&(l.value=!1),ue.pollResult.length>0&&(h.value=[...h.value.filter(ve=>!ue.pollResult.some(ce=>ce.id===ve.id)),...ue.pollResult].sort((ve,ce)=>ce.createDatetime-ve.createDatetime),g.value=h.value[0]))}),Ur(t1,{eventUserId:r.value.id}).onResult(({data:ue})=>{var ve,ce;if(ue.updateEventUserAccessRights){const{verified:J,voteAmount:ae,allowToVote:xe,pollHints:he}=ue.updateEventUserAccessRights,Ae=((ve=r.value)==null?void 0:ve.voteAmount)||0,We=((ce=r.value)==null?void 0:ce.allowToVote)||!1;t.updateEventUserAccessRights(J,ae,xe,he);let Ee;Ae!==ae?ae>Ae?Ee=e("view.polls.voteIncrease",{voteAmount:ae,previousVoteAmount:Ae,difference:ae-Ae}):Ee=e("view.polls.voteDecrease",{voteAmount:ae,previousVoteAmount:Ae,difference:Ae-ae}):We!==xe?xe?Ee=e("view.polls.voteEnabled"):Ee=e("view.polls.voteDisabled"):Ee=e("view.polls.userUpdate"),ze(Ee,{type:"info",autoClose:5e3,className:"vote-rights-update-toast",onOpen:()=>v.value=!0,onClose:()=>v.value=!1})}});const N=Z(!1),$=Z(!1);Ur($Ke,{eventId:i.event.id}).onResult(async({data:ue})=>{var ve,ce,J,ae,xe,he,Ae,We,Ee,G,Y;if(ue!=null&&ue.pollLifeCycle){if(ue.pollLifeCycle.state==="new"&&(console.warn("[DEBUG:VOTING] Life-Cycle-Event mit status='new' erhalten"),$.value=!1,window._newPollActive=!0,window._isHandlingPollClosure&&(window._isHandlingPollClosure=!1,delete window._currentClosureId)),$.value){console.warn("[DEBUG:VOTING] Poll ist bereits als geschlossen markiert, ignoriere weiteres Life-Cycle-Event");return}if(ue.pollLifeCycle.state==="closed"){if(console.warn("[DEBUG:VOTING] Life-Cycle-Event mit status='closed' erhalten"),$.value=!0,window.pollClosedEventReceived=!0,window._currentActivePollId=null,console.warn("[DEBUG:VOTING] Globale Poll-ID bei Schließung zurückgesetzt: null"),d.value)try{setTimeout(()=>{d.value.hideModal()},600),w.releaseUILocks(),w.isProcessingVotes.value=!1,w.pollFormSubmitting.value=!1,w.currentlyProcessingBatch.value=!1,c.value="closed"}catch(oe){console.error("[DEBUG:VOTING] Fehler beim Schließen des PollModals:",oe)}try{Tr.query({query:xh,variables:{eventId:i.event.id,page:0,pageSize:a.value},fetchPolicy:"network-only",errorPolicy:"all"}).then(oe=>{var Ue,Oe;if((Ue=oe.data)!=null&&Ue.pollResult&&oe.data.pollResult.length>0){h.value=[...oe.data.pollResult];const Le=[...oe.data.pollResult].sort((Ye,te)=>te.createDatetime-Ye.createDatetime);g.value=Le[0];try{f.value&&!((Oe=f.value.isVisible)!=null&&Oe.value)&&f.value.showModal()}catch(Ye){console.error("[DEBUG:VOTING] Fehler beim direkten Anzeigen des ResultModals:",Ye)}}}).catch(oe=>{console.error("[DEBUG:VOTING] SOFORTAKTION: Fehler beim sofortigen Laden der Ergebnisse:",oe)})}catch(oe){console.error("[DEBUG:VOTING] SOFORTAKTION: Fehler bei sofortiger Ergebnisabfrage:",oe)}}if(N.value&&(console.warn("[DEBUG:VOTING] Es wird bereits ein Life-Cycle-Event verarbeitet, warte kurz..."),await new Promise(oe=>setTimeout(oe,100)),N.value)){console.warn("[DEBUG:VOTING] Life-Cycle-Event wird immer noch verarbeitet, ignoriere dieses Event");return}N.value=!0;try{const oe=(ve=u.value)==null?void 0:ve.id,Ue=ue.pollLifeCycle.state==="new";if(Ue&&(window._newPollActive=!0,window.pollClosedEventReceived=!1,u.value&&u.value.id&&(window._currentActivePollId=u.value.id),w.deactivateVotingSession(),w.pollFormSubmitting.value=!1,w.isProcessingVotes.value=!1,w.currentlyProcessingBatch.value=!1,p.value=null,A.value=0,oe&&localStorage.removeItem(`poll_form_data_${oe}`)),u.value=ue.pollLifeCycle.poll,c.value=ue.pollLifeCycle.state,u.value&&u.value.id?(window._currentActivePollId=u.value.id,console.warn(`[DEBUG:VOTING] Aktuelle globale Poll-ID aktualisiert: ${window._currentActivePollId}`)):(window._currentActivePollId=null,console.warn("[DEBUG:VOTING] Globale Poll-ID zurückgesetzt: null")),Ue&&(window._newPollReceived=!0),oe&&u.value&&u.value.id&&oe!==u.value.id&&localStorage.removeItem(`poll_form_data_${oe}`),u.value&&u.value.id&&localStorage.removeItem(`poll_form_data_${u.value.id}`),c.value==="new"){if(f.value)try{window._newPollActive=!0,f.value.hideModal(),$.value=!1,window._isHandlingPollClosure&&(window._isHandlingPollClosure=!1,delete window._currentClosureId),setTimeout(()=>{if(f.value&&f.value.isVisible&&f.value.isVisible.value){f.value.hideModal();try{const pe=f.value.modal.value,Re=Hn.getInstance(pe);Re&&Re.hide()}catch(pe){console.error("[DEBUG:VOTING] Fehler beim Schließen des Modals:",pe)}}},1e3)}catch(pe){console.error("[DEBUG:VOTING] Fehler beim Schließen des ResultModals:",pe)}w.pollFormSubmitting.value=!1,w.isProcessingVotes.value=!1,w.currentlyProcessingBatch.value=!1;const Oe=((ce=r.value)==null?void 0:ce.voteAmount)||0,Le=((J=w==null?void 0:w.usedVotesCount)==null?void 0:J.value)||0;Le>0&&Le<Oe||(typeof window<"u"&&window.votingProcessModule&&(window.votingProcessModule.usedVotesCount=0,window.votingProcessModule.voteCounter=1),C.value=1,w.resetVoteCounts()),p.value=null,setTimeout(()=>{var Ie,Se;w.pollFormSubmitting.value=!1,w.isProcessingVotes.value=!1,w.currentlyProcessingBatch.value=!1,A.value=0;const pe=((Ie=r.value)==null?void 0:Ie.voteAmount)||0,Re=((Se=w==null?void 0:w.usedVotesCount)==null?void 0:Se.value)||0,Me=Re>0&&Re<pe;!Me&&C.value!==1&&(C.value=1)},100),setTimeout(()=>{window._newPollActive=!1},2e3),u.value&&u.value.id&&i.event&&i.event.id&&_.resetVoteState(u.value.id,i.event.id),u.value||(console.warn("Missing current poll. Try to refetch."),await F.refetch());const te=((ae=r.value)==null?void 0:ae.voteAmount)||0,se=((xe=w.usedVotesCount)==null?void 0:xe.value)||0;if(te>0&&se>=te){c.value="voted";return}if(u.value&&u.value.id&&localStorage.removeItem(`poll_form_data_${u.value.id}`),D.value)if((he=r.value)!=null&&he.id&&((Ae=u.value)!=null&&Ae.id)){const pe=(Ee=(We=r.value)==null?void 0:We.id)==null?void 0:Ee.toString(),Re=(Y=(G=u.value)==null?void 0:G.id)==null?void 0:Y.toString();if(!pe||!Re){console.error("Ungültige Parameter für userVoteCycle (neue Poll):",{eventUserId:pe,pollId:Re});return}const Me=ln(SS,{eventUserId:pe,pollId:Re},{fetchPolicy:"network-only",errorPolicy:"all"});Me.onError(Ie=>{console.error("GraphQL-Fehler bei userVoteCycle (neue Poll):",Ie)}),Me.onResult(({data:Ie})=>{if(Ie!=null&&Ie.userVoteCycle){const Se=Ie.userVoteCycle.voteCycle||0,ye=Ie.userVoteCycle.maxVotes||r.value.voteAmount,ie=_.getUsedVotes(u.value.id,i.event.id);let _e=Se;ie>=ye&&(_e=ie);const Je=w.usedVotesCount.value;if(_e>Je?(console.log(`[DEBUG:VOTING] Server hat höheren Wert (${_e} > ${Je}), übernehme Server-Wert`),w.usedVotesCount.value=_e):_e<Je?console.warn(`[DEBUG:VOTING] ⚠️ Server-Wert (${_e}) ist niedriger als Client-Wert (${Je}), behalte Client-Wert`):(console.log(`[DEBUG:VOTING] Server und Client sind synchron (${_e})`),w.usedVotesCount.value=_e),C.value=_e+1,Se>=ie&&_.upsertPollState(u.value.id,C.value,Se,i.event.id),_e>=ye){c.value="voted";return}setTimeout(()=>{var ft,Ot,Qt,me;const ut=w.usedVotesCount.value;if(console.log(`[DEBUG:VOTING] Modal-Öffnungsprüfung (pollLifeCycle): maxVotes=${ye}, serverVoteCycle=${Se}, clientUsedVotes=${ut}`),!((ft=window._resultModalTracking)!=null&&ft.activeModalId)&&!((Qt=(Ot=f.value)==null?void 0:Ot.isVisible)!=null&&Qt.value))if(ye>0&&Se<ye&&ut<ye){if(f.value)try{f.value.hideModal()}catch(ee){console.error("[DEBUG:VOTING] Fehler beim Schließen des ResultModals:",ee)}$.value=!1,Se===0?((me=d.value)==null||me.reset(!1),console.log("[DEBUG:VOTING] Neuer Poll: Formular wird zurückgesetzt")):console.log(`[DEBUG:VOTING] Split-Voting (pollLifeCycle, Zyklus ${Se}): Formular wird NICHT zurückgesetzt`),setTimeout(()=>{var rt;window._newPollActive&&(window._newPollActive=!1);const ee=w.usedVotesCount.value,Te=ye;if(console.log(`[DEBUG:VOTING] Finale Prüfung vor showModal (pollLifeCycleSubscription): finalUsedVotes=${ee}, finalMaxVotes=${Te}`),ee>=Te&&Te>0){console.log(`[DEBUG:VOTING] ABBRUCH: Alle Stimmen bereits abgegeben (${ee}/${Te}), Modal wird NICHT geöffnet`);return}console.log("[DEBUG:VOTING] >>> Rufe pollModal.showModal() auf (pollLifeCycleSubscription)"),(rt=d.value)==null||rt.showModal()},250)}else c.value="voted"},100)}else setTimeout(()=>{var ie,_e;C.value=1;const Se=w.usedVotesCount.value,ye=((ie=r.value)==null?void 0:ie.voteAmount)||0;if(ye>0&&Se<ye){if(f.value)try{f.value.hideModal()}catch(Je){console.error("[DEBUG:VOTING] Fehler beim Schließen des ResultModals:",Je)}$.value=!1,Se===0&&((_e=d.value)==null||_e.reset(!1),console.log("[DEBUG:VOTING] Neuer Poll (Fallback): Formular wird zurückgesetzt")),setTimeout(()=>{var ft;window._newPollActive&&(window._newPollActive=!1);const Je=w.usedVotesCount.value,ut=ye;if(console.log(`[DEBUG:VOTING] Finale Prüfung vor showModal (Fallback 1): finalUsedVotes=${Je}, finalMaxVotes=${ut}`),Je>=ut&&ut>0){console.log(`[DEBUG:VOTING] ABBRUCH (Fallback): Alle Stimmen bereits abgegeben (${Je}/${ut}), Modal wird NICHT geöffnet`);return}console.log("[DEBUG:VOTING] >>> Rufe pollModal.showModal() auf (Fallback 1)"),(ft=d.value)==null||ft.showModal()},250)}else c.value="voted"},100)})}else setTimeout(()=>{var Me,Ie;C.value=1;const pe=w.usedVotesCount.value,Re=((Me=r.value)==null?void 0:Me.voteAmount)||0;if(Re>0&&pe<Re){if(f.value)try{f.value.hideModal()}catch(Se){console.error("[DEBUG:VOTING] Fehler beim Schließen des ResultModals:",Se)}$.value=!1,pe===0&&((Ie=d.value)==null||Ie.reset(!1),console.log("[DEBUG:VOTING] Neuer Poll (Fallback 2): Formular wird zurückgesetzt")),setTimeout(()=>{var ie;window._newPollActive&&(window._newPollActive=!1);const Se=w.usedVotesCount.value,ye=Re;if(console.log(`[DEBUG:VOTING] Finale Prüfung vor showModal (Fallback 2): finalUsedVotes=${Se}, finalMaxVotes=${ye}`),Se>=ye&&ye>0){console.log(`[DEBUG:VOTING] ABBRUCH (Fallback 2): Alle Stimmen bereits abgegeben (${Se}/${ye}), Modal wird NICHT geöffnet`);return}console.log("[DEBUG:VOTING] >>> Rufe pollModal.showModal() auf (Fallback 2)"),(ie=d.value)==null||ie.showModal()},250)}else c.value="voted"},100)}else if(c.value==="closed"){if($.value){console.warn("[DEBUG:VOTING] Poll wurde bereits als geschlossen markiert, ignoriere weiteres Event");return}$.value=!0;const Oe=!!window._isHandlingPollClosure;if(window._isHandlingPollClosure=!0,d.value){d.value.hideModal();try{if(d.value.modal&&d.value.modal.value){const Le=d.value.modal.value;if(typeof Hn<"u"&&Hn.getInstance){const te=Hn.getInstance(Le);te&&te.hide()}const Ye=Hn.getInstance(Le);Ye&&Ye.hide()}}catch(Le){console.error("[DEBUG:VOTING] Fehler beim direkten Modal-Zugriff:",Le)}}if(c.value="closed",Oe){console.warn("[DEBUG:VOTING] Poll-Schließung wird bereits vollständig verarbeitet");return}try{console.warn("[DEBUG:VOTING] Poll geschlossen, breche alle laufenden Prozesse ab"),w.deactivateVotingSession(),w.currentlyProcessingBatch.value=!1,A.value=0,p.value=null,w.releaseUILocks(),w.isProcessingVotes.value=!1,w.pollFormSubmitting.value=!1,d.value&&(d.value.isSubmitting=!1,d.value.pollForm&&(d.value.pollForm.isSubmitting=!1),d.value.hideModal()),(w.isActiveVotingSession()||w.isProcessingVotes.value||w.pollFormSubmitting.value||w.currentlyProcessingBatch.value)&&ze(e("view.polls.info.pollClosed"),{type:"info"}),l.value=!0,o.value=0,h.value=[],c.value="closed";const Le=500,Ye=Date.now();window._currentClosureId=Ye,setTimeout(async()=>{var te;try{if(window._currentClosureId!==Ye){console.warn("[DEBUG:VOTING] Ein neuerer Closure-Prozess wurde gestartet, breche ab"),window._isHandlingPollClosure=!1;return}if(d.value)try{w.releaseUILocks(),w.isProcessingVotes.value=!1,w.pollFormSubmitting.value=!1,d.value.hideModal(),console.warn("[DEBUG:VOTING] PollModal vor Ergebnisanzeige geschlossen")}catch(se){console.error("[DEBUG:VOTING] Fehler beim erneuten Schließen des PollModals:",se)}try{h.value=[],o.value=0;const se=await Tr.query({query:xh,variables:{eventId:i.event.id,page:0,pageSize:a.value},fetchPolicy:"network-only",errorPolicy:"all"});if((te=se.data)!=null&&te.pollResult){if(h.value=[...se.data.pollResult],se.data.pollResult.length>0){const pe=[...se.data.pollResult].sort((Re,Me)=>Me.createDatetime-Re.createDatetime);g.value=pe[0]}}else console.warn("[DEBUG:VOTING] Direkte Abfrage lieferte keine Ergebnisse");await H.refetch()}catch(se){console.error("[DEBUG:VOTING] Fehler beim Laden der Ergebnisse:",se);try{await H.refetch()}catch(pe){console.error("[DEBUG:VOTING] Auch Fallback-Refetch fehlgeschlagen:",pe)}}setTimeout(()=>{try{if(window._currentClosureId!==Ye){console.warn("[DEBUG:VOTING] Ein neuerer Closure-Prozess wurde gestartet, breche Modal-Anzeige ab"),window._isHandlingPollClosure=!1;return}if(c.value="closed",u.value&&(u.value.closed=!0),d.value)try{console.warn("[DEBUG:VOTING] Schließe PollModal definitiv vor Ergebnisanzeige"),d.value.hideModal()}catch(se){console.error("[DEBUG:VOTING] Fehler beim Schließen des PollModals vor Ergebnisanzeige:",se)}setTimeout(()=>{try{if(!g.value&&h.value.length>0){const se=[...h.value].sort((pe,Re)=>Re.createDatetime-pe.createDatetime);g.value=se[0]}g.value?f.value?(typeof f.value.updatePollResult=="function"&&f.value.updatePollResult(g.value),f.value.showModal()):console.warn("[DEBUG:VOTING] ResultModal ist nicht verfügbar"):console.warn("[DEBUG:VOTING] Kein Ergebnis zum Anzeigen verfügbar!")}catch(se){console.error("[DEBUG:VOTING] Fehler beim Anzeigen des ResultModals:",se)}finally{window._isHandlingPollClosure=!1}},200)}catch(se){console.error("[DEBUG:VOTING] Fehler bei ResultModal-Anzeige:",se),window._isHandlingPollClosure=!1}},300)}catch(se){console.error("Fehler beim Laden der Ergebnisse:",se),window._isHandlingPollClosure=!1}},Le)}catch(Le){console.error("Fehler bei der Verarbeitung der Poll-Schließung:",Le),window._isHandlingPollClosure=!1}}}finally{N.value=!1,setTimeout(()=>{window._newPollActive=!1},5e3)}}}),Ur(lW,{eventId:i.event.id}).onResult(async({data:ue})=>{var Y,oe,Ue;if(!(ue!=null&&ue.pollAnswerLifeCycle))return;if(window._newPollActive){console.warn("[DEBUG:VOTING] Neuer Poll aktiv, ignoriere alte Answer-Events"),$.value=!1,w.releaseUILocks(),w.currentlyProcessingBatch.value=!1,w.isProcessingVotes.value=!1,w.pollFormSubmitting.value=!1,w.deactivateVotingSession(),p.value=null,A.value=0,u.value&&u.value.id&&(c.value="new");return}if($.value||c.value==="closed"){console.warn("[DEBUG:VOTING] Poll wurde bereits geschlossen, ignoriere weiteres Answer-Event"),w.releaseUILocks(),w.currentlyProcessingBatch.value=!1,w.isProcessingVotes.value=!1,w.pollFormSubmitting.value=!1,w.deactivateVotingSession(),p.value=null,A.value=0,d.value&&(d.value.isSubmitting=!1,d.value.pollForm&&(d.value.pollForm.isSubmitting=!1),d.value.hideModal());return}if(u.value&&u.value.closed){console.warn("[DEBUG:VOTING] Poll ist geschlossen, aber Subscription-Event empfangen. Setze closed-Flag und ignoriere Event."),$.value=!0,c.value="closed",w.releaseUILocks(),w.currentlyProcessingBatch.value=!1,w.isProcessingVotes.value=!1,w.pollFormSubmitting.value=!1,p.value=null,A.value=0,w.deactivateVotingSession(),d.value&&(d.value.isSubmitting=!1,d.value.pollForm&&(d.value.pollForm.isSubmitting=!1),d.value.hideModal());return}if(!((Y=r.value)!=null&&Y.voteAmount)||((oe=r.value)==null?void 0:oe.voteAmount)<=0||(!w.isActiveVotingSession()&&(w.isProcessingVotes.value||w.pollFormSubmitting.value)&&(w.releaseUILocks(),w.currentlyProcessingBatch.value=!1),!w.isActiveVotingSession())||!w.currentlyProcessingBatch.value)return;const ve=w.expectedVoteCount.value||1;if(A.value>=ve)return;ue.pollAnswerLifeCycle.pollUserVotedCount;const J=w.lastBatchTimestamp.value||0;if(Date.now()-J>3e5)return;const he=((Ue=r.value)==null?void 0:Ue.voteAmount)||0;A.value++;const Ae=ve,We=A.value>=Ae;if(Math.round(A.value/Ae*100),!We){w.isProcessingVotes.value=!0,w.pollFormSubmitting.value=!0,d.value&&(d.value.isSubmitting=!0,d.value.pollForm&&(d.value.pollForm.isSubmitting=!0));return}await F.refetch();const Ee=w.usedVotesCount.value;w.deactivateVotingSession(),Q(),A.value=0,p.value=null;const G=w.usedVotesCount.value;(w.votingFullyCompleted.value||G>=he)&&(w.votingFullyCompleted.value=!0),w.releaseUILocks(),w.currentlyProcessingBatch.value=!1,d.value&&(d.value.isSubmitting=!1,d.value.pollForm&&(d.value.pollForm.isSubmitting=!1)),Ee>=he&&(d.value&&d.value.hideModal(),c.value="voted")});function K(){s.value=!0}function z(){o.value+=1,H.fetchMore({variables:{page:o.value,pageSize:a.value},updateQuery:(ue,{fetchMoreResult:ve})=>!(ve!=null&&ve.pollResult)||ve.pollResult.length<a.value?(l.value=!1,ze(e("view.results.noMoreResults"),{type:"info"}),ue):{...ue,pollResult:[...(ue==null?void 0:ue.pollResult)||[],...ve.pollResult]}})}async function ge(ue){try{if(w.isActiveVotingSession()){ze(e("view.polls.info.stillProcessing"),{type:"info"});return}w.pollFormSubmitting.value=!1,w.currentlyProcessingBatch.value=!1,w.isProcessingVotes.value=!1,p.value=null,A.value=0,await new Promise(J=>setTimeout(J,50)),w.pollFormSubmitting.value===!0&&(console.warn("[DEBUG:VOTING] pollFormSubmitting ist nach dem Reset immer noch true! Setze explizit zurück."),w.pollFormSubmitting.value=!1),w.isProcessingVotes.value===!0&&(console.warn("[DEBUG:VOTING] isProcessingVotes ist nach dem Reset immer noch true! Setze explizit zurück."),w.isProcessingVotes.value=!1),w.currentlyProcessingBatch.value===!0&&(console.warn("[DEBUG:VOTING] currentlyProcessingBatch ist nach dem Reset immer noch true! Setze explizit zurück."),w.currentlyProcessingBatch.value=!1),w.pollFormSubmitting.value=!0,w.currentlyProcessingBatch.value=!0,w.isProcessingVotes.value=!0,d.value&&(d.value.isSubmitting=!0,d.value.pollForm&&(d.value.pollForm.isSubmitting=!0));let ve=!1;const ce=Date.now();p.value="poll-"+ce+"-"+Math.random().toString(36).substring(2,10),A.value=0;try{if(ue.votesToUse&&parseInt(ue.votesToUse,10)>0){const J=parseInt(ue.votesToUse,10);if(u.value&&u.value.id&&i.event&&i.event.id){_.setMaxVotesToUse(u.value.id,i.event.id,J);const ae=_.getMaxVotesToUse(u.value.id,i.event.id);(ae===null||ae!==J)&&_.setMaxVotesToUse(u.value.id,i.event.id,J)}J===r.value.voteAmount?(ue.useAllAvailableVotes=!0,ve=await w.handleFormSubmit(ue,u)):ve=await w.handleFormSubmit(ue,u,J)}else{if(u.value&&u.value.id&&i.event&&i.event.id){_.setMaxVotesToUse(u.value.id,i.event.id,1);const J=_.getMaxVotesToUse(u.value.id,i.event.id);(J===null||J!==1)&&_.setMaxVotesToUse(u.value.id,i.event.id,1)}ve=await w.handleFormSubmit(ue,u)}if(!ve)if(Q(),w.deactivateVotingSession(),typeof window<"u"&&window._pollClosedDuringVoting===!0){const J=window._successfulVotesBeforeClose||0;ze(`Poll wurde während der Abstimmung geschlossen. ${J} Stimme(n) wurden gezählt.`,{type:"info"}),window._pollClosedDuringVoting=!1,window._successfulVotesBeforeClose=0}else ze("Fehler bei der Stimmabgabe",{type:"warning"});if(w.releaseUILocks(),d.value&&(d.value.isSubmitting=!1,d.value.pollForm&&(d.value.pollForm.isSubmitting=!1),typeof d.value.resetSubmittingState=="function"))try{d.value.resetSubmittingState()}catch(J){console.error("[DEBUG:VOTING] Fehler beim Aufruf von resetSubmittingState:",J)}if(typeof window<"u")try{const J=Date.now();if(!window._lastSyncDashboardEventTimestamp||J-window._lastSyncDashboardEventTimestamp>100){window._lastSyncDashboardEventTimestamp=J;const xe=`sync-dashboard-${J}-${Math.random().toString(36).substring(2,9)}`;window.dispatchEvent(new CustomEvent("voting:complete",{detail:{timestamp:J,id:xe,source:"syncDashboard"}}))}}catch(J){console.error("[DEBUG:VOTING] Fehler beim Auslösen des globalen voting:complete Event:",J)}setTimeout(()=>{if(w.releaseUILocks(),w.currentlyProcessingBatch.value=!1,d.value&&(d.value.isSubmitting=!1,d.value.pollForm&&(d.value.pollForm.isSubmitting=!1),typeof d.value.resetSubmittingState=="function"))try{d.value.resetSubmittingState()}catch(J){console.error("[DEBUG:VOTING] Fehler beim Aufruf von resetSubmittingState im Timeout:",J)}if(typeof window<"u")try{const J=Date.now();if(!window._lastTimeoutEventTimestamp||J-window._lastTimeoutEventTimestamp>150){window._lastTimeoutEventTimestamp=J;const xe=`sync-timeout-${J}-${Math.random().toString(36).substring(2,9)}`;window.dispatchEvent(new CustomEvent("voting:complete",{detail:{timestamp:J,id:xe,isTimeout:!0,source:"syncDashboardTimeout"}}))}}catch(J){console.error("[DEBUG:VOTING] Fehler beim Auslösen des globalen voting:complete Event im Timeout:",J)}},1e3)}catch(J){if(console.error("Fehler bei der Stimmverarbeitung:",J),ve=!1,w.deactivateVotingSession(),typeof window<"u")try{window.dispatchEvent(new CustomEvent("voting:error",{detail:{timestamp:Date.now(),error:J}}))}catch(ae){console.error("[DEBUG:VOTING] Fehler beim Auslösen des voting:error Events:",ae)}Q(),ze("Fehler bei der Stimmverarbeitung",{type:"error"})}}catch(ve){console.error("Fehler bei der Stimmabgabe:",ve),ze("Fehler bei der Stimmabgabe",{type:"error"}),w.deactivateVotingSession(),Q()}}function Q(){var ce,J,ae;const ue=((ce=r.value)==null?void 0:ce.voteAmount)||0,ve=((J=w.usedVotesCount)==null?void 0:J.value)||0;if(typeof window<"u")try{window.dispatchEvent(new CustomEvent("voting:reset",{detail:{timestamp:Date.now()}}))}catch(xe){console.error("[DEBUG:VOTING] Fehler beim Auslösen des globalen voting:reset Event:",xe)}if((ae=d==null?void 0:d.value)!=null&&ae.resetSubmittingState)try{d.value.resetSubmittingState()}catch(xe){console.error("[DEBUG:VOTING] Fehler beim Aufruf von resetSubmittingState in resetUIAfterSubmission:",xe)}try{const xe=ue>0&&ve>=ue||w.votingFullyCompleted.value,he=ve>0&&ve<ue&&!w.votingFullyCompleted.value;ve>ue&&(console.warn(`[DEBUG:VOTING] UI-Reset: Stimmenzähler korrigiert: ${ve} auf ${ue}`),w.usedVotesCount.value=ue);try{const We=document.getElementsByClassName("modal-backdrop");We.length>0&&Array.from(We).forEach(Ee=>{Ee&&Ee.parentNode&&Ee.parentNode.removeChild(Ee)}),document.body.classList.remove("modal-open"),document.body.style.overflow="",document.body.style.paddingRight=""}catch(We){console.error("[DEBUG:VOTING] Fehler beim Bereinigen der Modal-Elemente:",We)}xe?(x(),d.value&&d.value.hideModal(),c.value="voted",w.votingFullyCompleted.value=!0):he&&(w.isProcessingVotes.value=!1,w.pollFormSubmitting.value=!1,w.currentlyProcessingBatch.value=!1,d.value&&(d.value.isSubmitting=!1,d.value.pollForm&&(d.value.pollForm.isSubmitting=!1),setTimeout(()=>{w.isProcessingVotes.value=!1,w.pollFormSubmitting.value=!1,w.currentlyProcessingBatch.value=!1,w.deactivateVotingSession(),console.error("[DEBUG:VOTING] pollModal.value ist nicht verfügbar!")},300))),d.value&&(d.value.isSubmitting=!1,d.value.pollForm&&(d.value.pollForm.isSubmitting=!1)),w.releaseUILocks(),w.currentlyProcessingBatch.value=!1,p.value=null,A.value=0;const Ae=ue-ve;console.warn(`[DEBUG:VOTING] Verbleibende Stimmen: ${Ae}/${ue}`)}catch(xe){console.error("Fehler beim Zurücksetzen der UI:",xe);try{w.releaseUILocks(),w.currentlyProcessingBatch.value=!1,w.deactivateVotingSession(),p.value=null,A.value=0,ve>0&&ve<ue&&u.value&&!u.value.closed&&c.value!=="closed"&&d.value&&setTimeout(()=>{try{d.value.showModal()}catch(he){console.error("[DEBUG:VOTING] Fehler-Notfall-Wiedereröffnung fehlgeschlagen:",he)}},500)}catch(he){console.error("Kritischer Fehler beim Zurücksetzen der Flags:",he)}}}return(ue,ve)=>{var ce,J,ae;return P(),V(Fe,null,[S.value?(P(),Ge(gW,{key:0})):ne("",!0),r.value&&!r.value.verified?(P(),Ge(mW,{key:1,"event-user":r.value},null,8,["event-user"])):ne("",!0),r.value&&r.value.verified?(P(),V(Fe,{key:2},[n.event&&r.value&&r.value.verified?(P(),Ge(pW,{key:0,event:n.event,"highlight-status-change":v.value,"event-user":r.value},null,8,["event","highlight-status-change","event-user"])):ne("",!0),n.event&&!s.value&&n.event.meeting?(P(),Ge(dKe,{key:1,event:n.event,onJoinMeeting:K},null,8,["event"])):ne("",!0),n.event&&r.value&&s.value&&n.event.meeting?(P(),Ge(bKe,{key:2,event:n.event,"event-user":r.value},null,8,["event","event-user"])):ne("",!0),Ce(SKe,{"exist-active-poll":R.value,"poll-state":c.value},null,8,["exist-active-poll","poll-state"]),((ce=u.value)==null?void 0:ce.type)==="PUBLIC"&&R.value&&n.event.publicVoteVisible?(P(),Ge(vW,{key:3,"active-poll-event-user":E.value,"event-id":n.event.id,event:n.event,poll:u.value},null,8,["active-poll-event-user","event-id","event","poll"])):ne("",!0),n.event&&((J=h.value)==null?void 0:J.length)>0?(P(),Ge(n1,{key:4,"event-record":n.event,"poll-results":h.value},null,8,["event-record","poll-results"])):ne("",!0),l.value&&((ae=h.value)==null?void 0:ae.length)>0?(P(),V("button",{key:5,class:"btn btn-secondary my-3 mx-auto py-2 d-flex align-items-center d-print-none mb-3",onClick:z},[ve[0]||(ve[0]=m("i",{class:"me-3 bi bi-plus-square-fill bi--2xl"},null,-1)),fe(" "+B(ue.$t("view.results.showMore")),1)])):ne("",!0),l.value?ne("",!0):(P(),Ge(qr,{key:6,type:"info",message:ue.$t("view.results.noMoreResults")},null,8,["message"])),D.value?(P(),Ge(bW,{key:7,ref_key:"pollModal",ref:d,poll:u.value,event:n.event,"event-user":r.value,"vote-counter":M(C),"active-poll-event-user":E.value,"voting-process":M(w),onSubmit:ge},null,8,["poll","event","event-user","vote-counter","active-poll-event-user","voting-process"])):ne("",!0),Ce(MKe,{ref_key:"resultModal",ref:f,"poll-result":g.value,event:n.event},null,8,["poll-result","event"])],64)):ne("",!0)],64)}}},FKe={class:"actions-container"},UKe={class:"actions"},zKe={__name:"DashboardActions",emits:["logout","terminateTokenSession"],setup(n,{emit:t}){const e=t,r=nn().isEventUserAuthorizedViaToken;function s(){e("logout")}function o(){e("terminateTokenSession")}function a(){location.reload()}return(l,c)=>(P(),V("div",FKe,[m("div",UKe,[M(r)?(P(),V("button",{key:1,class:"actions-item btn btn-danger d-print-none",onClick:o},[c[1]||(c[1]=m("i",{class:"me-2 bi bi-x-square"},null,-1)),fe(B(l.$t("navigation.terminateTokenSession")),1)])):(P(),V("button",{key:0,class:"actions-item btn btn-danger d-print-none",onClick:s},[c[0]||(c[0]=m("i",{class:"me-2 bi bi-x-square"},null,-1)),fe(B(l.$t("navigation.logOut")),1)])),m("button",{class:"actions-item btn btn-secondary d-print-none",onClick:a},[c[2]||(c[2]=m("i",{class:"me-2 bi bi-arrow-repeat"},null,-1)),fe(B(l.$t("navigation.reload")),1)])])]))}},HKe=Yt(zKe,[["__scopeId","data-v-6b629314"]]),WKe={class:"d-flex justify-content-between align-items-center"},jKe={class:"me-3"},qKe=["src"],T$={__name:"EventUserDashboard",props:{event:{type:Object,required:!0}},emits:["exit"],setup(n,{emit:t}){const e=n,i=t,r=le(()=>e.event.async===!0||e.event.async===1);function s(){Am().then(()=>ze(Xe("success.logout.eventUser"),{type:"success"})).then(()=>i("exit"))}function o(){const a=qs(lo,{message:Xe("view.event.user.confirm.terminateTokenSession")});a.onConfirm(()=>{s()}),a.reveal()}return(a,l)=>(P(),Ge(hW,null,{actions:$e(()=>[m("div",WKe,[m("span",jKe,[n.event.logo?(P(),V("img",{key:0,src:n.event.logo,alt:"Event Logo",class:"event-logo img img-fluid"},null,8,qKe)):ne("",!0)]),Ce(HKe,{onLogout:s,onTerminateTokenSession:o})])]),content:$e(()=>[r.value?(P(),Ge(uKe,{key:0,event:n.event},null,8,["event"])):(P(),Ge(BKe,{key:1,event:n.event},null,8,["event"]))]),_:1}))}},GKe=["id"],KKe={__name:"EventUserFrame",setup(n){const t=nn(),e=t.event,i=t.eventUser.value,r=ha(null);function s(){if(e!=null&&e.styles)try{const l=typeof e.styles=="string"?JSON.parse(e.styles):e.styles;t.updateEventStyles(l)}catch(l){console.error("Style processing error:",l)}}function o(){t.resetEventStyles()}i!=null&&i.eventId&&parseInt(e.id,10)!==parseInt(i==null?void 0:i.eventId,10)&&Am().then(()=>t.init()).then(()=>a()).then(()=>ze(Xe("notice.logout.wrongEvent"),{type:"info"})),document.addEventListener("visibilitychange",()=>{document.visibilityState!=="visible"?(console.warn("Tab is inactive. Now terminating websocket connection."),iI()):(console.log("Tab is active again. Reconnecting websocket client."),t.isActiveEventUserSession&&t.setEventUserOnlineState(!0),x4().then(()=>{console.log("WebSocket reconnection completed successfully."),t.isActiveEventUserSession&&(t.setEventUserOnlineState(!0),setTimeout(()=>{console.log("Forcing additional online status update after delay"),t.setEventUserOnlineState(!0)},1e3))}).catch(l=>{console.error("Error reconnecting websocket client:",l)}))}),r.value=t.isActiveEventUserSession?T$:E$;function a(){r.value=t.isActiveEventUserSession?T$:E$}return Jt(()=>{a(),s()}),wo(()=>{o()}),(l,c)=>(P(),V("div",{id:"event-"+M(e).slug},[r.value?(P(),Ge(Xl(r.value),{key:0,event:M(e),onExit:a},null,40,["event"])):ne("",!0)],8,GKe))}};function YKe(n){const t=Qr.EVENT_FETCH_BY_ID+"/"+n;return hc(t,{method:"GET",redirect:"follow",referrerPolicy:"no-referrer",mode:"cors"}).then(i=>i.event)}function QKe(n,t,e){const i=Qr.ACTIVATE_EVENT_USER_AUTH_TOKEN,r={method:"POST",body:JSON.stringify({token:n,username:t,publicName:e}),redirect:"follow",referrerPolicy:"no-referrer",cache:"no-cache",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json"}};return hc(i,r).then(s=>(s==null?void 0:s.success)||!1)}const ZKe={class:"login__headline text-center"},JKe={class:"login__subheadline mb-4 text-center subheader"},XKe={key:0,class:"d-flex flex-column align-items-center h-100 justify-content-around mt-5 p-3 card activate-auth-token-page mb-5"},eYe=["innerHTML"],tYe=["innerHTML"],nYe={class:"mb-3"},iYe={class:"mb-3"},rYe={class:"btn btn-primary btn-lg",type:"submit"},sYe={__name:"ActivateAuthToken",setup(n){const t=Ui(),e=Li(),i=t.params.eventId,r=t.params.token,s=Z(null),o=t.query.publicname||t.query.publicName||"";YKe(i).then(d=>{s.value=d,((d==null?void 0:d.publicnameReadonly)===!0||(d==null?void 0:d.publicnameReadonly)===1)&&o&&(a.publicName=o)});const a=Kt({username:"",publicName:o||""}),l=le(()=>({username:{required:Bt},publicName:{required:Bt}})),c=us(l,a);async function u(){if(!await c.value.$validate()){Mt(new Pr);return}QKe(r,a.username,a.publicName).then(f=>{if(f)return ze(Xe("success.login.activateEventUserAuthToken"),{type:"success"}),e.push({name:hU,params:{eventSlug:s.value.slug}})}).then(()=>window.location.reload()).catch(f=>Mt(f))}return(d,f)=>(P(),Ge(Zs,null,{default:$e(()=>{var h,g,v,_,w,C,k,E;return[m("h1",ZKe,B(d.$t("view.login.headline.title")),1),m("h2",JKe,B(d.$t("view.login.headline.subtitle")),1),s.value?(P(),V("div",XKe,[m("h3",{class:"text-center mb-4",innerHTML:d.$t("view.activateAuthToken.subTitle",{eventTitle:s.value.title})},null,8,eYe),m("p",{class:"description mb-4",innerHTML:d.$t("view.activateAuthToken.description")},null,8,tYe),m("form",{class:"card p-3 border-primary",onSubmit:bt(u,["prevent"])},[m("div",nYe,[Ce(yn,{label:d.$t("view.event.create.labels.eventUser.username"),errors:(h=M(c).username)==null?void 0:h.$errors,"has-errors":((v=(g=M(c).username)==null?void 0:g.$errors)==null?void 0:v.length)>0,value:a.username,onChange:f[0]||(f[0]=({value:A})=>{a.username=A})},null,8,["label","errors","has-errors","value"])]),m("div",iYe,[Ce(yn,{label:d.$t("view.event.create.labels.eventUser.publicName"),errors:(_=M(c).publicName)==null?void 0:_.$errors,"has-errors":((C=(w=M(c).publicName)==null?void 0:w.$errors)==null?void 0:C.length)>0,value:a.publicName,disabled:((k=s.value)==null?void 0:k.publicnameReadonly)===!0||((E=s.value)==null?void 0:E.publicnameReadonly)===1,onChange:f[1]||(f[1]=({value:A})=>{a.publicName=A})},null,8,["label","errors","has-errors","value","disabled"])]),m("button",rYe,B(d.$t("view.activateAuthToken.activateButtonText")),1)],32)])):ne("",!0)]}),_:1}))}},oYe=Yt(sYe,[["__scopeId","data-v-b0801adb"]]);async function aYe(n){const t=`${Qr.API_BASE_URL}/api/shortlink/${n}`;return fetch(t,{method:"GET",redirect:"follow",referrerPolicy:"no-referrer",cache:"no-cache",credentials:"include",mode:"cors"}).then(i=>{if((i==null?void 0:i.status)>=500)throw new cn(Xe("error.network.internalServerError"));if((i==null?void 0:i.status)>=400)throw new cn(Xe("error.network.consumerError"));if((i==null?void 0:i.status)===200)return i.json();throw new cn(Xe("error.network.undefinedError"))}).then(i=>{if(!i.success)throw new cn(i.error||"Shortlink not found");return i.data})}const lYe={class:"d-flex justify-content-center align-items-center",style:{"min-height":"100vh"}},cYe={class:"text-center"},uYe={key:0,class:"spinner-border text-primary",role:"status"},dYe={key:1,class:"alert alert-danger",role:"alert"},fYe={__name:"ShortlinkRedirect",setup(n){const t=Ui(),e=Li(),i=Z(!0),r=Z(null);return Jt(async()=>{const s=t.params.shortCode;try{const o=await aYe(s),a={};o.username&&(a.username=o.username),o.publicName&&(a.publicname=o.publicName),await e.push({path:`/event/${o.eventSlug}`,query:a})}catch(o){Mt(o),r.value="Der angeforderte Link konnte nicht gefunden werden.",i.value=!1}}),(s,o)=>{const a=si("router-link");return P(),V("div",lYe,[m("div",cYe,[i.value?(P(),V("div",uYe,[...o[0]||(o[0]=[m("span",{class:"visually-hidden"},"Lade...",-1)])])):r.value?(P(),V("div",dYe,[o[2]||(o[2]=m("h4",{class:"alert-heading"},"Link nicht gefunden",-1)),m("p",null,B(r.value),1),o[3]||(o[3]=m("hr",null,null,-1)),Ce(a,{to:"/",class:"btn btn-primary"},{default:$e(()=>[...o[1]||(o[1]=[fe("Zur Startseite",-1)])]),_:1})])):ne("",!0)])])}}},hYe="/assets/zt_logo_rgb-Bz5MbTQN.png",mYe="/assets/BMI_Fz_2018_Web_de-CbwDZys3.gif",gYe="/assets/dcj-AIOM5nfI.png",pYe="/assets/scv-IMCbtx4Q.jpg",vYe="/assets/bcv-CS3rRHNe.png",bYe="/assets/sjnrw-PZ592ZAD.png",wYe="/assets/ProStimme-CKFXKOs0.jpg",yYe={__name:"StaticPageImprint",setup(n){return(t,e)=>(P(),Ge(Zs,{"meta-title":"Impressum"},{default:$e(()=>[...e[0]||(e[0]=[m("div",{class:"imprint"},[m("h1",null,"Impressum"),m("p",null,[fe("Felix Herrmann"),m("br"),fe("Hambergstraße 27"),m("br"),fe("57074 Siegen")]),m("p",null,[m("a",{href:"mailto:info@digitalwahl.org"},"info@digitalwahl.org")]),m("p",null,[m("strong",null,"Steuernummer")]),m("p",null,"342/5119/3204"),m("h2",null,"Datenschutz"),m("p",null,[fe(" Eine ausführliche Datenschutzerklärung findest du "),m("a",{href:"/datenschutz"},"hier"),fe(". ")]),m("h2",null,"Nutzungsbedingungen"),m("p",null,[fe(" Die Bedingungen, unter denen digitalwahl.org genutzt werden kann, findest du "),m("a",{href:"/nutzerbedingungen"},"hier"),fe(". ")]),m("div",{class:"card border-primary p-3"},[m("h2",{class:"mb-3"},"Unterstützt und gefördert von:"),m("hr",{class:"d-none d-sm-block"}),m("div",{class:"row align-items-baseline"},[m("div",{class:"col-sm col-12"},[m("figure",{class:"figure"},[m("a",{href:"https://www.zusammenhalt-durch-teilhabe.de/",target:"_blank",rel:"noopener noreferrer"},[m("img",{src:hYe,class:"figure-img img-fluid",alt:"Z:T",width:"200"})]),m("figcaption",{class:"figure-caption"},"Z:T")])]),m("div",{class:"col-sm col-12"},[m("figure",{class:"figure"},[m("a",{href:"https://www.bmi.bund.de/",target:"_blank",rel:"noopener noreferrer"},[m("img",{src:mYe,class:"figure-img img-fluid",alt:"BMI"})]),m("figcaption",{class:"figure-caption"},"BMI")])]),m("div",{class:"col-sm col-12"},[m("figure",{class:"figure"},[m("a",{href:"https://www.deutsche-chorjugend.de/",target:"_blank",rel:"noopener noreferrer"},[m("img",{src:gYe,class:"figure-img img-fluid",alt:"Deutsche Chorjugend"})]),m("figcaption",{class:"figure-caption"}," Deutsche Chorjugend ")])])]),m("hr",{class:"d-none d-sm-block"}),m("div",{class:"row align-items-baseline"},[m("div",{class:"col-sm col-12"},[m("figure",{class:"figure"},[m("a",{href:"https://www.s-chorverband.de/",target:"_blank",rel:"noopener noreferrer"},[m("img",{src:pYe,class:"figure-img img-fluid",alt:"Schwäbischer Chorverband"})]),m("figcaption",{class:"figure-caption"}," Schwäbischer Chorverband ")])]),m("div",{class:"col-sm-auto col-12"},[m("figure",{class:"figure"},[m("a",{href:"http://www.bcvonline.de/",target:"_blank",rel:"noopener noreferrer"},[m("img",{src:vYe,class:"figure-img img-fluid",alt:"Badischer Chorverband"})]),m("figcaption",{class:"figure-caption"}," Badischer Chorverband ")])]),m("div",{class:"col-sm col-12"},[m("figure",{class:"figure"},[m("a",{href:"http://www.saengerjugend.de/",target:"_blank",rel:"noopener noreferrer"},[m("img",{src:bYe,class:"figure-img img-fluid",alt:"Sängerjugend im Chorverband NRW e. V."})]),m("figcaption",{class:"figure-caption"}," Sängerjugend im Chorverband NRW e. V. ")])])]),m("hr",{class:"d-none d-sm-block"}),m("div",{class:"row align-items-baseline"},[m("div",{class:"col-sm-4 col-12"},[m("figure",{class:"figure"},[m("a",{href:"https://www.pro-stimme.de/",target:"_blank",rel:"noopener noreferrer"},[m("img",{src:wYe,class:"figure-img img-fluid",alt:"proStimme GmbH"})]),m("figcaption",{class:"figure-caption"},"proStimme GmbH")])])])])],-1)])]),_:1}))}},_Ye={__name:"StaticPageDataProtection",setup(n){return(t,e)=>(P(),Ge(Zs,{"meta-title":"Datenschutz"},{default:$e(()=>[...e[0]||(e[0]=[m("div",{class:"dataprotection"},[m("h1",null,"Datenschutzerklärung"),m("hr"),m("p",null," digitalwahl.org erfüllt den Anspruch auf eine sichere, einfache und verlässliche digitale Wahl. Bei einer Wahl müssen je nach Wahlprozess personenbezogene und vertrauliche Daten verarbeitet werden. Wir stellen sicher, dass in allen Verarbeitungsprozessen hohe Standards für Sie und Ihre Daten eingehalten werden. "),m("p",null,[fe(" Unter "),m("a",{href:"mailto:info@digitalwahl.org"},"info@digitalwahl.org"),fe(" könnnen Sie gerne eine Anfrage stellen und ausführliche Informationen zu Art, Wege und Speicherdauer der vzu verarbeitenden Daten erhalten. ")]),m("p",null," "),m("hr"),m("h2",null,"zu verarbeitende Daten"),m("p",null," Technisch wird jeder Zugriff systematisch automatisiert und anonymisiert erfasst. Folgende Informationen werden erfasst: "),m("ul",null,[m("li",null,[fe(" IP-Adresse "),m("a",{href:"https://de.wikipedia.org/wiki/IP-Adresse",target:"_blank",rel:"nofollow noopener",title:"Was ist eine IP-Adresse?"},[m("i",{class:"bi-question-circle bi-2xl"})]),fe(": automatischer Server-Protokoll Eintrag ")]),m("li",null,"Zeitpunkt: Datum, Uhrzeit"),m("li",null,"Systeminformationen: Betriebssystem, Browser, Version")]),m("p",null," Diese Daten sind nicht bestimmten Personen zuordenbar. Eine Zusammenführung dieser Daten mit anderen Datenquellen wird nicht vorgenommen. Wir behalten uns vor, diese Daten nachträglich zu prüfen, wenn uns konkrete Anhaltspunkte für eine rechtswidrige Nutzung bekannt werden. Rechtsgrundlage für diese Verarbeitung ist Art. 6 Abs. 1 lit. f DSGVO (berechtigtes Interesse der Systemsicherheit). "),m("p",null," Das Online-Abstimmungssystem verarbeitet davon unabhängig in einer Datenbank folgende personenbezogene Daten pro Wahlveranstaltungs-Teilnahme: "),m("ul",null,[m("li",null," Selbst angegebener Name, Benutzername (Abhängig vom Veranstalter: E-Mail Adresse nicht zwingend erfoderlich!) und das verschlüsselte Passwort "),m("li",null,"Abstimmungsteilnahme")]),m("p",null," Organisator*innen haben nach der Veranstaltung 180 Tage Zugriff auf die Daten der Veranstaltung und den aufgeführten Informationen im Abstimmungsystem. Danach werden die Informationen unwiderruflich automatisch gelöscht. Die Pflicht zur Nachhaltung der Informationen (Wahlergebnisse, Teilnehmer) obliegt dem/der Organisator*in "),m("p",null," Die benutzerbezogenen Daten werden in einer Datenbank gespeichert. Jeder Teilnehmer einer Veranstaltung ist ein individueller Eintrag. Ein Teilnehmerdatensatz ist immer einmalig pro Veranstaltung. Es gibt keine Verknüpfung, wenn ein Nutzer mit den gleichen Zugangsdaten bei einem anderen Event teilnimmt. Hier wird ein neuer Nutzerdatensatz generiert und die 180 Tage Löschfrist gilt pro Veranstaltung. "),m("p",null,' Bei einer Veranstaltung werden Abstimmungs-Datensätze erstellt. Wenn ein Abstimmungsdatensatz als "offene Abstimmung" definiert wird, werden in der Tabelle "Abstimmungergebnis" die Antwort und der Benutzer gespeichert. Zusätzlich wird der Benutzer in einer Tabelle "Abstimmungsteilnehmer" gespeichert zur Sicherstellung, dass der Nutzer nicht mehrfach abgestimmt hat. Bei einer "geheimen Abstimmung" werden in der "Abstimmungsergebnis"-Tabelle nur die Antworten ohne Benutzer gespeichert. Der Benutzer wird in der "Abstimmungsteilnehmer" erfasst. '),m("p",null," Als Anmeldeprozess zwischen Benutzer und Server werden Tokens verwendet. Die Tokens dienen der verschlüsselten Kommunikation zwischen Endgerät und Server. "),m("p",null," Die Hauptkommunikation zwischen Endgerät und Server findet mittels Websockets statt. Die Kommunikation über Websocket wird nicht gespeichert. Es wird keine Protokoll-Datei der Websockets erstellt. "),m("p",null," Zur potentiellen Fehleranalyse werden serverseitig ausgeführte Datenbankverarbeitungen (SQL-Queries) protokolliert sowie auftretebde Fehlermeldungen der Server-Anwendung. Die Protokoll-Dateien können Nutzerinformationen enthalten. Gespeicherte und archivierte Protokoll-Dateien werden 14 Tage lang gespeichert. "),m("p",null," Rechtsgrundlage für unsere Verarbeitung sind Art. 6 Abs. 1 lit. a und c DSGVO (Einwilligung der Betroffenen, rechtliche Verpflichtung). "),m("p",null," "),m("hr"),m("h2",null,"Auftragsverarbeitung"),m("p",null,"Das Hosting liegt bei"),m("p",null,[fe(" PSV Digital GmbH"),m("br"),fe(" Martinshardt 5"),m("br"),fe(" 57074 Siegen"),m("br"),m("br"),fe(" Tel.: "),m("a",{href:"tel:+492717700160"},"+49 271 770016 - 0"),m("br"),fe(" E-Mail: "),m("a",{href:"mailto:info@psv-neo.de"},"info@psv-neo.de")]),m("p",null,"Der Serverstandort ist in Frankfurt am Main/Deutschland."),m("p",null," "),m("hr"),m("h2",null,"Weitergabe personenbezogener Daten an Dritte"),m("p",null,"digitalwahl.org bindet keine externen Dienste mit ein."),m("p",null," Daten, die beim Zugriff auf digitalwahl.org protokolliert werden, werden nur an Dritte übermittelt, soweit wir gesetzlich oder durch Gerichtsentscheidung dazu verpflichtet sind: im Falle von Angriffen auf die Internetinfrastruktur zur Rechts- oder Strafverfolgung. Eine Weitergabe zu anderen Zwecken erfolgt nicht. "),m("p",null," "),m("hr"),m("h2",null,"Verwendung von Cookies"),m("p",null,"Systeme mit Login-Funktionalität erfordern den Einsatz von Cookies."),m("p",null," Cookies im Zusammenhang mit dieser Website werden ausschließlich durch den Server erstellt und verarbeitet. "),m("p",null," Die meisten Browser sind so eingestellt, dass sie Cookies automatisch akzeptieren. Das Speichern von Cookies kann jedoch deaktiviert oder der Browser so eingestellt werden, dass Cookies nur für die Dauer der jeweiligen Verbindung zum Internet gespeichert werden. ")],-1)])]),_:1}))}},kYe=(n,t,e)=>{const i=n[t];return i?typeof i=="function"?i():Promise.resolve(i):new Promise((r,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==e?". Note that variables only represent file names one level deep.":""))))})},EYe={class:"faq"},CYe={key:0},TYe={key:0},SYe=["innerHTML"],AYe={key:0},IYe=["innerHTML"],PYe={key:1},xYe=["innerHTML"],OYe={key:2,class:"text-center py-4"},m_=["GeneralInfo","Security","Registration","Execution","Requirements","Results","Support","Legal","Feedback","Special"],RYe={components:m_.reduce((n,t)=>(n[t]=y5(()=>kYe(Object.assign({"./Faq/Execution.vue":()=>eo(()=>import("./Execution-CuYkvolT.js"),[]),"./Faq/Feedback.vue":()=>eo(()=>import("./Feedback-NVYWrMVW.js"),__vite__mapDeps([0,1])),"./Faq/GeneralInfo.vue":()=>eo(()=>import("./GeneralInfo-CKwKEjeZ.js"),__vite__mapDeps([2,1])),"./Faq/Legal.vue":()=>eo(()=>import("./Legal-dX-1Z-DU.js"),__vite__mapDeps([3,1])),"./Faq/Registration.vue":()=>eo(()=>import("./Registration-5TgI9OJa.js"),__vite__mapDeps([4,1])),"./Faq/Requirements.vue":()=>eo(()=>import("./Requirements-B00wPUk-.js"),__vite__mapDeps([5,1])),"./Faq/Results.vue":()=>eo(()=>import("./Results-D9eRi3wn.js"),__vite__mapDeps([6,1])),"./Faq/Security.vue":()=>eo(()=>import("./Security-BzGuQjLg.js"),__vite__mapDeps([7,1])),"./Faq/Special.vue":()=>eo(()=>import("./Special-ksRekcCe.js"),[]),"./Faq/Support.vue":()=>eo(()=>import("./Support-DN_HZWmm.js"),__vite__mapDeps([8,1]))}),`./Faq/${t}.vue`,3)),n),{}),data(){return{htmlContents:m_.reduce((n,t)=>(n[t]="",n),{})}},methods:{handleContentLoaded(n,t){this.htmlContents[n]=t}}},VYe=Object.assign(RYe,{__name:"StaticPageFaq",setup(n){const t=Z(!1),e=Z([]),i=Z(!1),{resolveClient:r}=pl();Jt(async()=>{t.value&&await s()});const s=async()=>{i.value=!0;try{const a=await r().query({query:mt`
        query GetFaqContent {
          staticContentsByPage(pageKey: "faq") {
            id
            sectionKey
            title
            content
            ordering
          }
        }
      `,fetchPolicy:"cache-first"});e.value=[...a.data.staticContentsByPage||[]],e.value.sort((l,c)=>l.ordering-c.ordering),e.value.length===0&&console.log("No content found in database, falling back to component mode")}catch(o){console.error("Failed to load FAQ content from database:",o),t.value=!1}finally{i.value=!1}};return(o,a)=>(P(),Ge(Zs,{"meta-title":"Häufige Fragen"},{default:$e(()=>[m("div",EYe,[a[1]||(a[1]=m("h1",null,"Häufige Fragen",-1)),t.value?(P(),V("div",CYe,[(P(!0),V(Fe,null,ct(e.value,l=>(P(),V("div",{key:l.sectionKey,class:"mb-4"},[l.title?(P(),V("h2",TYe,B(l.title),1)):ne("",!0),m("div",{innerHTML:l.content},null,8,SYe)]))),128)),e.value.length===0&&!i.value?(P(),V("div",AYe,[(P(),V(Fe,null,ct(m_,l=>m("div",{key:l},[(P(),Ge(Xl(l),{onLoaded:c=>o.handleContentLoaded(l,c)},null,40,["onLoaded"])),m("div",{class:"mb-4",innerHTML:o.htmlContents[l]},null,8,IYe)])),64))])):ne("",!0)])):(P(),V("div",PYe,[(P(),V(Fe,null,ct(m_,l=>m("div",{key:l},[(P(),Ge(Xl(l),{onLoaded:c=>o.handleContentLoaded(l,c)},null,40,["onLoaded"])),m("div",{class:"mb-4",innerHTML:o.htmlContents[l]},null,8,xYe)])),64))])),i.value?(P(),V("div",OYe,[...a[0]||(a[0]=[m("div",{class:"spinner-border text-primary",role:"status"},[m("span",{class:"visually-hidden"},"Wird geladen...")],-1),m("p",{class:"mt-2"},"Inhalte werden geladen...",-1)])])):ne("",!0)])]),_:1}))}}),DYe={__name:"StaticPageUserAgreement",setup(n){return(t,e)=>(P(),Ge(Zs,{"meta-title":"Nutzungsvereinbarung"},{default:$e(()=>[...e[0]||(e[0]=[m("div",{class:"user-agreement"},[m("h1",null,"Nutzervereinbarung"),m("div",{class:"alert alert-primary"},[m("div",{class:"row"},[m("div",{class:"col-1 text-center d-flex align-items-center"},[m("i",{class:"bi bi-exclamation-circle display-4"})]),m("div",{class:"col d-flex align-items-center"},[m("p",{class:"mb-0"},[fe(" Holen Sie sich einen Rechtsbeistand um zu klären, ob Ihr Verein/Verband Wahlen digital durchführen darf."),m("br"),m("br"),fe("digitalwahl.org ist eine unterstützende technische Plattform."),m("br"),m("b",null," digitalwahl.org kann keine Rechtssicherheit für die Gültigkeit der durchgeführten Wahlen gewährleisten! ")])])])]),m("div",{class:"alert alert-success"},[m("div",{class:"row"},[m("div",{class:"col-1 text-center d-flex align-items-center"},[m("span",{class:"h1 mx-auto d-inline-block"},"€")]),m("div",{class:"col d-flex align-items-center"},[m("p",{class:"mb-0"},[fe(" Das Angebot von digitalwahl.org erfolgt "),m("b",null,"kostenlos für gemeinnützige Vereine und Verbände"),fe(". Falls Funktionen gewünscht werden können Sie sich gerne an "),m("a",{href:"mailto:info@digitalwahl.org"},"info@digitalwahl.org"),fe(" wenden. ")])])])]),m("p",null,[m("b",null,"Verantwortung:"),fe(" Jeder Veranstalter einer Wahl auf digitalwahl.org ist selbst für das erstellte Event verantwortlich. Alle Daten zu dem Event obliegen der Datenhoheit des Veranstalters. digitalwahl.org nimmt keinen Einfluss auf eingebene und verwendete Daten für ein selbst organisiertes Event, außer es wird ein Missbrauch gemeldet. Wir behalten wir uns das Recht vor, Informationen nach Meldung eines Missbrauchs zum Zweck des Nachweises zu speichern und erst nach Aufforderung zu löschen. ")]),m("p",null,[m("b",null,"Haftung:"),fe(" Veranstalter haften für missbräuchlich verwendete Informationen und Daten. Sie versichern, dass keine Inhalte hinterlegt werden, die gegen geltende Gesetze verstoßen. ")]),m("p",null,[m("b",null,"Verfügbarkeit:"),fe(" Aufgrund technischer Beschränkungen kann es zu Einschränkungen oder Ausfällen kommen. Dies ist der Fall, wenn parallel stattfindene Events mit einer größeren Anzahl an Teilnehmer den Server überlasten. Wir versuchen durch Updates und technische Verbesserungen der Serverstruktur und Software eine automatische Skalierung zu implementieren. ")]),m("div",{class:"alert alert-info"},[m("div",{class:"row"},[m("div",{class:"col-1 text-center d-flex align-items-center"},[m("i",{class:"bi bi-exclamation-circle display-4"})]),m("div",{class:"col d-flex align-items-center"},[m("p",{class:"mb-0"},[fe(" Eine Veranstaltungen mit mehr als "),m("b",null,"100 Teilnehmern"),fe(" sollte bei "),m("a",{href:"mailto:info@digitalwahl.org"},"info@digitalwahl.org"),fe(" gemeldet werden. ")])])])]),m("p",null,[m("b",null,"Vertraulichkeit:"),fe(" Eingestellte Inhalte wie Abstimmungsergebnisse werden vertraulich behandelt und nicht an unbefugte Dritte veröffentlicht. Ein standardmäßiges Monitoring von Inhalten durch den Betreiber erfolgt nicht. Jedoch können Entwickler im Rahmen von technischen Arbeiten zufällig Kenntnis von Inhalten erlangen. ")]),m("p",null,[m("b",null,"Löschfristen:"),fe(" Registierte Organisator:innen ohne E-Mail Bestätigung werden automatisch nach 24 Stunden gelöscht. Durchgeführte Events werden 180 Tage nach angegeben Start-Datum gelöscht. Es obliegt dem Veranstalter, alle Ergebnisse und Informationen zur Nachweispflicht zu sichern. ")]),m("p",null,[m("b",null,"Nutzung von Kontaktdaten:"),fe(" digitalwahl.org nutzt ins System eingetragene E-Mail- oder Kontaktdaten nur, um systemspezifische Prozesse abzuwickeln (z.B. zur Passwortrücksetzung oder um von den Nutzer:innen bestellte Zusammenfassungen zu versenden) oder um starke Veränderungen am System zu kommunizieren (Ausfallzeiten o.ä.). Die Kontaktdaten werden nicht an Dritte weitergegeben. Die Organisator:innen von Veranstaltungen in digitalwahl.org sind dazu angehalten, die Daten der Teilnehmenden nicht für andere als die vereinbarten Zwecke zu nutzen. ")]),m("p",null,[m("b",null,"Aktualisierungen:"),fe(" Diese Nutzungsbedingungen können jederzeit den notwendigen Regelungsbedarfen angepasst werden. Es ist jedoch ausgeschlossen, dass die aus der Nutzung erhobenen Daten zum Zweck der Monetarisierung weitergegeben (verkauft) werden. ")]),m("p",null,"(Version: 10. Januar 2021)"),m("p",null," ")],-1)])]),_:1}))}},NYe="/assets/loginmaske-DANeA6hL.png",LYe="/assets/warteraum-BM46ElWZ.png",MYe="/assets/gast-D-ZpINiA.png",$Ye="/assets/stimmrecht-XZjZayVB.png",BYe="/assets/demoabstimmung-Di-UVLwx.png",FYe="/assets/dashboard-CoPYx2nJ.png",UYe="/assets/uebersicht-CTNf343E.png",zYe="/assets/eventerstellen-DZ-XHb5X.png",HYe="/assets/event-teilnehmer-DMMVxSf_.png",WYe="/assets/teilnehmer-erstellen-buttons-hvWoUylj.png",jYe="/assets/teilnehmer-erstellen-default-B1HKXgMB.png",qYe="/assets/teilnehmer-erstellen-token-mEiyhXoH.png",GYe="/assets/teilnehmer-editieren-hObPk0Fa.png",KYe="/assets/event-warteraum-DKJWX030.png",YYe="/assets/abstimmung-erstellen-HEj3xvV-.png",QYe="/assets/abstimmung-beenden-T4Yj0kqe.png",ZYe="/assets/ergebnisliste-DXB6czHg.png",JYe="/assets/zoom-anleitung-A1Snk01m.png",XYe={class:"manual"},eQe={id:"imagemodal",class:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"popLoginLabel","aria-hidden":"true"},tQe={class:"modal-dialog modal-lg"},nQe={class:"modal-content"},iQe={class:"modal-body text-center"},rQe=["src"],sQe={__name:"StaticPageManual",setup(n){let t;const e=Z("");function i({target:r}){e.value=r==null?void 0:r.src,t==null||t.show()}return Jt(()=>{t=new Hn(document.getElementById("imagemodal"),{})}),(r,s)=>(P(),Ge(Zs,{"meta-title":"Anleitung"},{default:$e(()=>[m("div",XYe,[s[20]||(s[20]=m("div",{class:"alert alert-danger"},[m("div",{class:"row align-items-center"},[m("div",{class:"col-2 text-center"},[m("i",{class:"bi bi-exclamation-circle bi--6xl"})]),m("div",{class:"col text-center"},[m("p",{class:"display-4 mb-3"},"HINWEIS"),m("p",null," Aufgrund einer technischen Aktualisierung hat sich die Link/URL Struktur von Veranstaltungen geändert! "),m("p",null,[fe("digitalwahl.org/"),m("b",null,"event/"),fe("meine-veranstaltung")]),m("p",{class:"mb-0"}," Bitte aktualisieren Sie vorhandene Anleitungen und Vorlagen. ")])])],-1)),s[21]||(s[21]=m("h1",null,"Anleitungen",-1)),s[22]||(s[22]=m("ul",{class:"list-unstyled"},[m("li",{class:"mb-3"},[m("a",{href:"#teilnehmer",class:"h3"},"Für Teilnehmer"),m("ol",{class:"mt-3"},[m("li",null,[m("a",{href:"#loginmaske"},"An einer Veranstaltung teilnehmen")]),m("li",null,[m("a",{href:"#warteraum"},"Warteraum")]),m("li",null,[m("a",{href:"#gast"},"Gast")]),m("li",null,[m("a",{href:"#stimmrecht"},"Teilnehmer")]),m("li",null,[m("a",{href:"#demoabstimmung"},"Abstimmung")])])]),m("li",null,[m("a",{href:"#organisator",class:"h3"},"Für Organisatoren"),m("ol",{class:"mt-3"},[m("li",null,[m("a",{href:"#dashboard"},"Dashboard")]),m("li",null,[m("a",{href:"#uebersicht"},"Meine Veranstaltungen")]),m("li",null,[m("a",{href:"#eventerstellen"},"Neue Veranstaltung erstellen")]),m("li",null,[m("a",{href:"#event-teilnehmer"},"Veranstaltungs-Details")]),m("li",null,[m("a",{href:"#teilnehmer-erstellen"},"Teilnehmer erstellen")]),m("li",null,[m("a",{href:"#teilnehmer-editieren"},"Einzelnen Teilnehmer editieren")]),m("li",null,[m("a",{href:"#event-warteraum"},"Teilnehmer freischalten")]),m("li",null,[m("a",{href:"#event-abstimmung"},"Abstimmung erstellen und starten")]),m("li",null,[m("a",{href:"#event-abstimmung-beenden"},"Abstimmung manuell beenden")]),m("li",null,[m("a",{href:"#event-ergebnisse"},"Ergebnisse")]),m("li",null,[m("a",{href:"#zoom-integration"},"Zoom Integration")])])])],-1)),s[23]||(s[23]=m("hr",null,null,-1)),s[24]||(s[24]=m("div",{class:"bg-secondary text-white p-3 mb-3 rounded"},[m("h2",{id:"teilnehmer"},"Für Teilnehmer")],-1)),m("div",{id:"loginmaske",class:"media flex-column flex-lg-row"},[m("span",{class:"btn pop"},[m("img",{src:NYe,alt:"loginmaske",class:"me-3 me-3 click-enlarge img-thumbnail",width:"300",onClick:i})]),s[0]||(s[0]=m("div",{class:"media-body"},[m("h3",null,"An einer Veranstaltung teilnehmen"),m("p",null," Sie können über einen vom Organisator bereitgestellten Link an dem Event teilnehmen. "),m("p",null,"Für eine Anmeldung sind folgende Informationen erforderlich:"),m("ol",null,[m("li",null,[m("b",null,"Benutzername, E-Mail Adresse oder Mitgliedsnummer:"),m("br"),fe("Je nach Verfahren wird der Organisator eine vorherige Anmeldung durchgeführt haben. Verwenden Sie hier die vom Organisator vorgegebene Möglichkeit. ")]),m("li",null,[m("b",null,"Passwort:"),m("br"),fe("Geben Sie ein eigenes Kennwort ein, um sich nach der Veranstaltung erneut anmelden zu können. Das Passwort dient auch zur Wiederanmeldung, falls Sie während der Veranstaltung das Endgerät wechseln oder sonstige technische Schwierigkeiten haben und sich neu anmelden müssen. ")]),m("li",null,[m("b",null,"Anzeige-Name:"),m("br"),fe(" Der Name wird bei der Auswertung der Wahlen angezeigt. Hier sollte eine Eindeutigkeit geschaffen werden, also nicht nur Ihr Name, sondern am besten auch die Information, für welchen Verein/Verband Sie teilnehmen und Ihre Stimme abgeben. ")])]),m("div",{class:"alert alert-info"},[m("div",{class:"row"},[m("div",{class:"col-2 text-center"},[m("i",{class:"bi bi-exclamation-circle bi--6xl"})]),m("div",{class:"col d-flex align-items-center"},[m("p",{class:"mb-0"},[fe(" Der Organisator hat die Möglichkeit, "),m("b",null,"personalisierte"),fe(" Links zu versenden. Falls also Felder nach Aufrufen der Seite schon vorausgefüllt sind tagen Sie nur noch fehlende Informationen ein. ")])])])])],-1))]),s[25]||(s[25]=m("hr",null,null,-1)),m("div",{id:"warteraum",class:"media flex-column flex-lg-row"},[m("span",{class:"btn pop"},[m("img",{src:LYe,alt:"Warteraum",class:"me-3 me-3 click-enlarge img-thumbnail",width:"300",onClick:i})]),s[1]||(s[1]=m("div",{class:"media-body"},[m("h3",null,"Warteraum"),m("p",null," Falls der Organisator keine Teilnehmer im Vorfeld der Veranstaltung hinterlegt hat, Sie andere Anmelde-Information verwenden oder einfach einen Rechtschreibfehler in Ihren Anmeldeinformationen haben sind Sie dem System nicht bekannt und müssen auf eine Freigabe warten. "),m("p",null," Der Organisator wird Sie entweder als Teilnehmer oder Gast freischalten. ")],-1))]),s[26]||(s[26]=m("hr",null,null,-1)),m("div",{id:"gast",class:"media flex-column flex-lg-row"},[m("span",{class:"btn pop"},[m("img",{src:MYe,alt:"Gast",class:"me-3 me-3 click-enlarge img-thumbnail",width:"300",onClick:i})]),s[2]||(s[2]=m("div",{class:"media-body"},[m("h3",null,"Gast"),m("p",null," Als Gast sehen Sie, ob eine Abstimmung in dem Moment stattfindet. Sie bekommen die Ergebnisse angezeigt und können auch die vergangenen Ergebnisse von vorherigen Wahlen einsehen. ")],-1))]),s[27]||(s[27]=m("hr",null,null,-1)),m("div",{id:"stimmrecht",class:"media flex-column flex-lg-row"},[m("span",{class:"btn pop"},[m("img",{src:$Ye,alt:"Stimmrecht",class:"me-3 me-3 click-enlarge img-thumbnail",width:"300",onClick:i})]),s[3]||(s[3]=m("div",{class:"media-body"},[m("h3",null,"Teilnehmer"),m("p",null," Als Teilnehmer haben Sie die gleichen Rechte wie ein Gast. Sie sehen neben Ihren Status auch die Anzahl Ihrer Stimmen, die Sie bei Wahlen abgeben dprfen. Wenn eine Abstimmung startet, können Sie in der erscheinenden Box Ihre Stimme(n) abgeben. Nach Stimmabgabe schließt sich die Box und ein Texthinweis mit erfolgreicher Stimmenabgabe erscheint. ")],-1))]),s[28]||(s[28]=m("hr",null,null,-1)),m("div",{id:"demoabstimmung",class:"media flex-column flex-lg-row"},[m("span",{class:"btn pop"},[m("img",{src:BYe,alt:"Demo-Abstimmung",class:"me-3 me-3 click-enlarge img-thumbnail",width:"300",onClick:i})]),s[4]||(s[4]=m("div",{class:"media-body"},[m("h3",null,"Abstimmung"),m("p",null," Als Teilnehmer haben Sie die gleichen Rechte wie ein Gast. Sie sehen neben Ihren Status auch die Anzahl Ihrer Stimmen, die Sie bei Wahlen abgeben dprfen. Wenn eine Abstimmung startet, können Sie in der erscheinenden Box Ihre Stimme(n) abgeben. Nach Stimmabgabe schließt sich die Box und ein Texthinweis mit erfolgreicher Stimmenabgabe erscheint. "),m("p",null,[m("b",null,"Hinweis für Teilnehmer mit mehreren Delegiertenstimmen:"),m("br"),fe("Sie dürfen bei der ersten Stimmenabgabe auswählen, ob Sie alle Ihre Stimmen auf einmal mit der ausgewählten Antwort abgeben."),m("br"),m("br"),fe(" Die Organisatoren haben die Möglichkeit, die Mehrfachstimmenabgabe zu erzwingen, wenn es die Satzung/Ordnung der Mitgliederversammlung vorsieht. ")])],-1))]),s[29]||(s[29]=m("hr",null,null,-1)),s[30]||(s[30]=m("div",{class:"bg-secondary text-white p-3 mb-3 rounded"},[m("h2",{id:"organisator"},"Für Organisatoren")],-1)),m("div",{id:"dashboard",class:"media flex-column flex-lg-row"},[m("span",{class:"btn pop"},[m("img",{src:FYe,alt:"Dashboard",class:"me-3 me-3 click-enlarge img-thumbnail",width:"300",onClick:i})]),s[5]||(s[5]=m("div",{class:"media-body"},[m("h3",null,"Dashboard"),m("p",null," Übersicht der aktuellsten Entwicklungen sowie geplanter Funktionen. ")],-1))]),s[31]||(s[31]=m("hr",null,null,-1)),m("div",{id:"uebersicht",class:"media flex-column flex-lg-row"},[m("span",{class:"btn pop"},[m("img",{src:UYe,alt:"Event-Übersicht",class:"me-3 me-3 click-enlarge img-thumbnail",width:"300",onClick:i})]),s[6]||(s[6]=m("div",{class:"media-body"},[m("h3",null,"Veranstaltungsübersicht"),m("p",null,' Hier sehen Sie die bevorstehende und vergangenen Veranstaltungen. Zusätzlich können Sie Veranstaltungen erstellen mit den Button "Neues Veranstaltung erstellen". '),m("p",null,' In der Aktionsspalte der erstellten Veranstaltungen können Sie die vorhandene Veranstaltung editieren, den Einladungslink kopieren, in die Detailansicht der Veranstaltung gehen und die Veranstaltung löschen. Das Löschen ist nur möglich, wenn die Veranstaltung vorher auf "Inaktiv" geschaltet wurde in der Bearbeitungsansicht. '),m("div",{class:"alert alert-danger"},[m("div",{class:"row"},[m("div",{class:"col-2 text-center"},[m("i",{class:"bi bi-exclamation-circle bi--6xl"})]),m("div",{class:"col d-flex align-items-center"},[m("p",{class:"mb-0"},[m("b",null,[fe("Die Veranstaltung und alle damit verbundenen Informationen werden automatisch nach 180 Tagen des geplanten Datums gelöscht."),m("br"),m("br"),fe("Als Organisator erhalten Sie 3 Tage vor dem Löschen eine Hinweis-E-Mail der bevorstehenden Löschung.")])])])])])],-1))]),s[32]||(s[32]=m("hr",null,null,-1)),m("div",{id:"eventerstellen",class:"media flex-column flex-lg-row"},[m("span",{class:"btn pop"},[m("img",{src:zYe,alt:"Event erstellen",class:"me-3 me-3 click-enlarge img-thumbnail",width:"300",onClick:i})]),s[7]||(s[7]=m("div",{class:"media-body"},[m("h3",null,"Veranstaltungen erstellen und bearbeiten"),m("p",null,"Folgende Felder werden benötigt:"),m("ol",null,[m("li",null,[m("b",null,"Titel:"),m("br"),fe("Beispiel: Jahreshauptversammlung 2025 des Musterchors aus Musterstadt ")]),m("li",null,[m("b",null,"Slug:"),m("br"),fe("Das Slug ist das Pfadsegment für die URL. Das Slug muss im System einmalig sein. Falls eine Veranstaltungen nicht erstellt werden kann liegt es zu 99% an einem Slug, der schon verwendet wird. Hier ist also darauf zu achten, einen kurze, aber prägnante Bezeichnung zu verwenden."),m("br"),m("br"),fe("Beispiel: musterchor-musterstadt-jhv-2025"),m("br"),m("br"),fe('Die Eingabe wird automatisch umformatiert in Kleinbuchstaben. Sonderzeichen werden entfernt und Leerezeilen mit "-" ersetzt. ')]),m("li",null,[m("b",null,"Beschreibung:"),m("br"),fe("Kurzer Beschreibungstext Ihrer Veranstaltung. ")]),m("li",null,[m("b",null,"Startdatum:"),m("br"),fe("Zeitpunkt der Durchführung Ihrer Veranstaltung. ")]),m("li",null,[m("b",null,"Lobby aktivieren:"),m("br"),fe("Personen können, falls dem System schon bekannt, sich im Vorfeld einloggen."),m("br"),fe("Alle unbekannten Personen werden als Nutzer erstellt und in eine Warteraum-Position gespeichert. Der Organisator muss den Nutzer als Teilnehmer oder Gast freischalten (siehe "),m("a",{href:"#event-warteraum"},"Warteraum"),fe(")."),m("br"),fe(" Der Warteraum lässt sich auch als vorzeitige Authentifizierungslogik nutzen: Senden Sie als Organisator den Link zur Veranstaltung frühzeitig zu mit der Bitte, sich als Nutzer einzutragen. Als Organisator können Sie alle Teilnehmer an einem Tag vorher entsprechend der Delegationsart freischalten. ")]),m("li",null,[m("b",null,"Veranstaltung aktiv schalten?:"),m("br"),fe("Solange die Veranstaltung als Aktiv markiert ist, können Teilnehmer und Gäste sich nach der Veranstaltung mit ihren Zugangsdaten erneut anmelden."),m("br"),fe(" Erst, wenn Sie den Haken entfernen und damit die Veranstaltung als Inaktiv schalten, dürfen Sie die Veranstaltung manuell löschen. ")]),m("li",null,[m("b",null,"Asynchrone Wahl:"),m("br"),fe(" Als Organisator müssen Sie neben dem Start- auch ein Enddatum angeben. Alle freigeschalteten Teilnehmer mit Stimmrecht dürfen ab dem Startdatum alle im Vorfeld hinterlegten Abstimmungen bearbeiten. Sobald das Enddatum überschritten ist, werden automatisch nur die Ergebnisse ausgegeben und es kann nicht weiter abgestimmt werden."),m("br"),m("br"),m("div",{class:"alert alert-danger"},[fe(" Als Organisator dürfen Sie auch "),m("u",null,"keine"),fe(" neuen Abstimmungen ab dem Startdatum "),m("br"),fe("erstellen oder die vorhandenen Abstimmungen editieren. ")])]),m("li",null,[m("b",null,"Videokonferenz-System:"),m("br"),fe(" Hier können Sie auswählen, welche Video-Konferenzsoftware eingebettet verwendet werden soll. Aktuell wird nur Zoom unterstützt."),m("br"),fe(" Siehe "),m("a",{href:"#zoom-integration"},"Zoom-Integration")]),m("li",null,[m("b",null,"Mehrfachstimmenabgabe:"),m("br"),fe(" Als Organisator bestimmen Sie, ob Delegierte mit mehreren Stimmen alternierend abstimmen dürfen oder alle Stimmen auf einmal abgeben müssen. ")])])],-1))]),s[33]||(s[33]=m("hr",null,null,-1)),m("div",{id:"event-teilnehmer",class:"media flex-column flex-lg-row"},[m("span",{class:"btn pop"},[m("img",{src:HYe,alt:"Event Teilnehmer",class:"me-3 me-3 click-enlarge img-thumbnail",width:"300",onClick:i})]),s[8]||(s[8]=m("div",{class:"media-body"},[m("h3",null,[fe("Veranstaltungs-Details"),m("br"),fe("Nutzer anlegen")]),m("p",null," Nach Klick auf die Veranstaltungens-Details erscheint die Übersicht der Nutzer "),m("p",null," Im oberen Bereich sehen Sie zusammengefasst Nutzerinformationen. "),m("p",null,' Es besteht die Möglichkeit, Nutzer zu bearbeiten. Sie können die Rolle (Teilnehmer/Gast) eines Nutzer mit einem Klick auf den Button "Setzen auf" ändern. Wenn man einen Teilnehmer auf Gast umschaltet wird automatisch das Stimmrecht entzogen. Bei der nächsten Wahl kann der geänderte Nutzer nicht teilnehmern, sieht jedoch wie jeder andere Gast auch die Ergebnisse. Man kann auch einen Gast zu einem Teilnehmer umwandeln. Der geänderte Teilnehmer erhält Stimmrecht mit einer Stimme. Falls der Teilnehmer mehrere Stimmen vertritt muss der Nutzer im Detail geändert werden. ')],-1))]),s[34]||(s[34]=m("div",{class:"alert alert-primary"},[m("div",{class:"row"},[m("div",{class:"col-1 text-center d-flex align-items-center"},[m("i",{class:"bi bi-exclamation-circle bi--6xl"})]),m("div",{class:"col d-flex flex-column"},[m("p",null,[m("b",null,"Tipp"),fe(":"),m("br"),fe("Um den Nutzern einen komfortablen Einstieg zu ermöglichen kann man den Link zum Versenden individualisieren. Nutzen Sie hierzu die Serienmail-Funktion von Google oder Microsoft mit einer Tabelle aller Empfänger. ")]),m("ul",null,[m("li",null,'Parameter username - Füllt das Feld "Benutzername" aus'),m("li",null,'Parameter publicname - Füllt das Feld "Anzeige-Name" aus')]),m("code",{class:"py-3 align-self-center"}," digitalwahl.org/event/meine-veranstaltung?username=0123456789&publicname=Felix%20Herrmann "),m("p",null," Die Links können in eine, Tabellenverarbeitungsprogramm wie Microsoft Excel oder Google Sheets automatisiert mit den Informationen erweitert werden. Diese Automatisierung lässt sicht auch auf verkürzte Links (tinyUrl) anwenden und auch auf die Generierung von QR Codes in einem Serienbrief zur Personalisierung einer Tagungsmappe. ")])])],-1)),s[35]||(s[35]=m("hr",null,null,-1)),m("div",{id:"teilnehmer-erstellen",class:"media flex-column flex-lg-row"},[m("span",{class:"btn pop flex-column"},[m("img",{src:WYe,alt:"Event Teilnehmer erstellen Buttons",class:"me-3 me-3 click-enlarge img-thumbnail mb-3",width:"300",onClick:i}),s[9]||(s[9]=m("br",null,null,-1)),m("img",{src:jYe,alt:"Event Teilnehmer",class:"me-3 me-3 click-enlarge img-thumbnail mb-3",width:"300",onClick:i}),s[10]||(s[10]=m("br",null,null,-1)),m("img",{src:qYe,alt:"Event Teilnehmer",class:"me-3 me-3 click-enlarge img-thumbnail mb-3",width:"300",onClick:i})]),s[11]||(s[11]=m("div",{class:"media-body"},[m("h3",null,"Teilnehmer anlegen"),m("h4",null,"Einfache Anlage"),m("p",null," Die Anlegen einzelner Nutzer ist für kleine Veranstaltungen oder nachzügler geeignet. Sie geben als Organisator den Benutzernamen und den Anzeige-Namen sowie die mögliche Stimmenanzahl an. "),m("h4",null,"Mehrere Teilnehmer anlegen"),m("p",null,[fe(" Das Anlegen mehrerer Nutzer ist für große Veranstaltungen geeignet, wenn Sie die Teilnehmer lokal in einer Tabelle vorliegen haben. Kopieren Sie hierzu einfach die Spalte mit dem Benutzernamen, den die Teilnehmer als Login verwenden sollen. Achten Sie darauf, dass die Spalte keine Überschrift enthält und dass es möglichst keine doppelten Eintragungen oder Leerzeilen gibt."),m("br"),m("br"),fe(" Sie tragen immer alle Teilnehmer gleichzeitig mit einer definierten Stimmenanzahl ein. Falls Sie Teilnehmer mit unterschiedlichen Stimmenanzahlen haben, müssen Sie diese nacheinander anlegen in Gruppen. Hierzu können Sie die Daten mit Ihrem lokalen Tabellenverarbeitungsprogramm filtern. ")]),m("h4",null,"Token-basierter Login"),m("p",null,[fe(" Nutzer erhalten per E-Mail einen Anmelde-Link zur Veranstaltung. Beim Aufrufen des Links wird der Nutzer aufgefordert, Zugangsdaten einzutragen. Diese Zugangsdaten werden nicht mit der E-Mail Adresse in Verbindung gespeichert. Beim verwendeten Endgerät des Nutzers wird ein Schlüssel (token) gespeichert. Mit diesem Token wird der Nutzer automatisch beim Aufrufen des Veranstaltungslinks angemeldet."),m("br"),m("br"),m("b",null,"Der Authentifizierungslink kann nur einmalig auf einem einzelnen Endgerät genutzt werden."),m("br"),m("br"),fe(" Der Veranstaltungslink wird nicht mit der E-Mail versendet. Nach dem erfolgreichen Authentifizieren des Endgerätes wird der Nutzer automatisch angemeldet und zur Veranstaltungsseite weitergeleitet."),m("br"),fe(" Sobald der Teilnehmer sich abmeldet über den Abmelden Button, wird der Token gelöscht und der Nutzer muss sich erneut authentifizieren. Dies kann nicht mit der gleichen E-Mail durchgeführt werden. ")])],-1))]),s[36]||(s[36]=m("hr",null,null,-1)),m("div",{id:"teilnehmer-editieren",class:"media flex-column flex-lg-row"},[m("span",{class:"btn pop"},[m("img",{src:GYe,alt:"Teilnehmer editieren",class:"me-3 me-3 click-enlarge img-thumbnail",width:"300",onClick:i})]),s[12]||(s[12]=m("div",{class:"media-body"},[m("h3",null,"Nutzer editieren"),m("p",null," Nach Klick auf den Stift bei einem Nutzer kann man die Benutzerinformationen bearbeiten. "),m("p",null," Man darf jedoch nicht das Passwort eines Nutzers zurücksetzt. Sollte ein Nutzer sein Passwort vergessen haben, muss er dies dem Organisator mitteilen und sich entweder einen neuen Zugangsnamen geben lassen oder falls der Warteraum aktiv ist, mit einem alternativen neuen Zugang anmelden und vom Organisator freigeschaltet werden. ")],-1))]),s[37]||(s[37]=m("hr",null,null,-1)),m("div",{id:"event-warteraum",class:"media flex-column flex-lg-row"},[m("span",{class:"btn pop"},[m("img",{src:KYe,alt:"Teilnehmer warteraum",class:"me-3 me-3 click-enlarge img-thumbnail",width:"300",onClick:i})]),s[13]||(s[13]=m("div",{class:"media-body"},[m("h3",null,"Warteraum"),m("p",null," Alle dem System unbekannten Benutzer landen im Warteraum (falls die Lobby aktiviert ist). "),m("p",null," Die Benutzer können als Teilnehmer (Standard mit einer Stimme) oder als Gast freigeschaltet werden. ")],-1))]),s[38]||(s[38]=m("hr",null,null,-1)),m("div",{id:"event-abstimmung",class:"media flex-column flex-lg-row"},[m("span",{class:"btn pop"},[m("img",{src:YYe,alt:"Abstimmung erstellen",class:"me-3 me-3 click-enlarge img-thumbnail",width:"300",onClick:i})]),s[14]||(s[14]=m("div",{class:"media-body"},[m("h3",null,"Abstimmung erstellen und starten"),m("div",{class:"alert alert-primary"},[m("div",{class:"row"},[m("div",{class:"col-1 text-center d-flex align-items-center"},[m("i",{class:"bi bi-exclamation-circle bi--3xl"})]),m("div",{class:"col d-flex align-items-center"},[m("p",{class:"mb-0"},[m("b",null,"Achtung"),fe(":"),m("br"),fe(' Nur Teilnehmer, die zum Zeitpunkt des Startens im System eingeloggt sind und als "Online" im System markiert sind dürfen abstimmen ')])])])]),m("p",null," Es kann ein Titel einer Abstimmung definiert werden und aus einer Vorauswahl von Antwortmöglichkeiten ausgewählt werden. "),m("p",null,' Falls Sie Personen wählen möchten sonstige individuelle Antwortoptionen vorgeben möchten können Sie "individuelle Antwortoption" auswählen. Es erscheint ein Freitextfeld, wo jede Zeile eine Antwortoption darstellt. Im unteren Bereich können Sie definieren, ob Teilnehmer mehr als eine Antwortoption auswählen dürfen. '),m("p",null," Als letztes ist die Einstellung der offenen oder geheimen Wahl zu treffen. "),m("p",null," Sie können die Wahlen mit den eingebenen Optionen abspeichern und zu einem späteren Zeitpunkt starten oder auch direkt starten. "),m("p",{class:"alert alert-secondary"},[fe(" Bei Problemen während der Wahl prüfen Sie bitte die Seite "),m("a",{href:"/haeufige-fragen#organisator"},"Häufige Fragen")])],-1))]),s[39]||(s[39]=m("hr",null,null,-1)),m("div",{id:"event-abstimmung-beenden",class:"media flex-column flex-lg-row"},[m("span",{class:"btn pop"},[m("img",{src:QYe,alt:"Abstimmung beenden",class:"me-3 me-3 click-enlarge img-thumbnail",width:"300",onClick:i})]),s[15]||(s[15]=m("div",{class:"media-body"},[m("h3",null,"Abstimmung beenden"),m("p",null," Nach dem Starten einer Abstimmung sehen Sie die Anzahl der abgegebenen Stimmen und die Anzahl der Personen, die gewählt haben und wie viel Stimmen/Personen insgesamt möglich sind. "),m("p",null," Falls ein Teilnehmer verhindert ist, die Stimme abzugeben bzw. Sie nach einer längeren Wartezeit keine Veränderung wahrnehmen können Sie die aktuell stattfindende Abstimmung auch manuell beenden. ")],-1))]),s[40]||(s[40]=m("hr",null,null,-1)),m("div",{id:"event-ergebnisse",class:"media flex-column flex-lg-row"},[m("span",{class:"btn pop"},[m("img",{src:ZYe,alt:"Ergebnisliste",class:"me-3 me-3 click-enlarge img-thumbnail",width:"300",onClick:i})]),s[16]||(s[16]=m("div",{class:"media-body"},[m("h3",null,"Ergebnisliste"),m("p",null,[fe(" Hier sehen Sie alle vergangenen Abstimmungen und deren Ergebnisse. Die Seite verfügt über eine optimierte Druckansicht."),m("br")]),m("p",null,[m("b",null,"Export:"),m("br"),fe("Es können folgende CSV Dateien heruntergeladen werden: ")]),m("ul",null,[m("li",null,"Übersicht"),m("li",null,"Ergebnisse"),m("li",null,"Ergebnisse mit Details"),m("li",null,"Teilnehmer mit abgegebener Stimmenanzahl")])],-1))]),s[41]||(s[41]=m("hr",null,null,-1)),m("div",{id:"zoom-integration",class:"media flex-column flex-lg-row"},[m("span",{class:"btn pop"},[m("img",{src:JYe,alt:"Zoom Anleitung",class:"me-3 me-3 click-enlarge img-thumbnail",width:"300",onClick:i})]),s[17]||(s[17]=m("div",{class:"media-body"},[m("h3",null,"Zoom Anleitung"),m("p",null,[fe(" Die Voraussetzung ist ein Zoom Pro Account oder höher. Zoom Lizenz auf der "),m("a",{href:"https://zoom.us/de/pricing",target:"_blank"},"Zoom-Website"),fe(" vergleichen und kaufen ")]),m("p",null,[m("a",{href:"/download/pdf/anleitung-zoom-integration-v2.pdf",class:"btn btn-primary",target:"_blank"},"Anleitung als PDF herunterladen")])],-1))]),m("div",eQe,[m("div",tQe,[m("div",nQe,[s[18]||(s[18]=m("div",{class:"modal-header"},[m("button",{type:"button",class:"close btn btn-danger","data-bs-dismiss":"modal"},[m("span",{"aria-hidden":"true"},"×"),m("span",{class:"visually-hidden"},"Schließen")]),m("h4",{id:"popLoginLabel",class:"modal-title d-none d-print-block"}," Vergrößerung ")],-1)),m("div",iQe,[m("img",{id:"imagepreview",src:e.value,alt:"",class:"img img-fluid"},null,8,rQe)]),s[19]||(s[19]=m("div",{class:"modal-footer"},[m("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"}," Schließen ")],-1))])])])])]),_:1}))}},oQe={__name:"StaticPageFunctions",setup(n){return(t,e)=>(P(),Ge(Zs,{"meta-title":"Funktionen"},{default:$e(()=>[...e[0]||(e[0]=[m("div",{class:"functions"},[m("h1",null,"Funktionsübersicht"),m("hr"),m("div",{class:"row"},[m("div",{class:"col-12 col-md-6"},[m("ul",{class:"list-group list-group-numbered"},[m("li",{class:"list-group-item"},[m("h3",{class:"mb-1"},[m("i",{class:"bi bi-check-circle bi--2xl"}),fe(" Synchrone Wahl ")]),m("p",{class:"mb-1"}," Begleitend zur laufenden Veranstaltung möglich. ")]),m("li",{class:"list-group-item"},[m("h3",{class:"mb-1"},[m("i",{class:"bi bi-check-circle bi--2xl"}),fe(" Asynchrone Wahl ")]),m("p",{class:"mb-1"},"Digitale Briefwahl - spart Porto und Papier.")]),m("li",{class:"list-group-item"},[m("h3",{class:"mb-1"},[m("i",{class:"bi bi-check-circle bi--2xl"}),fe(" Geheime und offene Wahlen ")]),m("p",{class:"mb-1"}," Antrag auf geheime Wahl? Kein Problem; hier bleibt es geheim. ")]),m("li",{class:"list-group-item"},[m("h3",{class:"mb-1"},[m("i",{class:"bi bi-check-circle bi--2xl"}),fe(" Teilnehmer- und Gästeverwaltung ")]),m("p",{class:"mb-1"}," Delegierter überträgt spontan sein Stimmrecht? Vorstand neu gewählt und das Stimmrecht ändert sich? Schnell und einfach für jeden Benutzer anpassbar - in Echtzeit. ")]),m("li",{class:"list-group-item"},[m("h3",{class:"mb-1"},[m("i",{class:"bi bi-check-circle bi--2xl"}),fe(" Einfacher Export der Ergebnisse ")]),m("p",{class:"mb-1"},"Ergebnisse können als CSV archiviert werden.")]),m("li",{class:"list-group-item"},[m("h3",{class:"mb-1"},[m("i",{class:"bi bi-check-circle bi--2xl"}),fe(" Integrierte Videokonferenz ")]),m("p",{class:"mb-1"}," Zwei Anwendungen gleichzeitig sind zu viel? Integrieren Sie die Videokonferenz in digitalwahl.org. "),m("small",null,"Aktuell unterstützt: Zoom")]),m("li",{class:"list-group-item"},[m("h3",{class:"mb-1"},[m("i",{class:"bi bi-check-circle bi--2xl"}),fe(" Endgeräte-bezogene Wahl ")]),m("p",{class:"mb-1"}," Pseudonymisieren Sie alles! Nutzer erhalten einen Link zur Endgeräte-Registrierung, danach kann nicht mehr nachvollzogen werden, wer der Teilnehmer ist. Nur, dass er ein berechtigter Teilnehmer ist. "),m("small",null,"E-Mail-Adresse des Teilnehmers wird einmalig benötigt und wird nicht gespeichert.")])])]),m("div",{class:"col-12 col-md-6"},[m("ul",{class:"list-group list-group-numbered"},[m("li",{class:"list-group-item"},[m("i",{class:"bi bi-github"}),fe(" Open Source; "),m("a",{href:"https://github.com/FailXSiegen/voting-service-client-v2",target:"_blank"},"Client"),fe(" | "),m("a",{href:"https://github.com/FailXSiegen/voting-service-api",target:"_blank"},"Server")]),m("li",{class:"list-group-item"},[m("i",{class:"bi bi-server"}),fe(" Installierbar auf eigenem Hosting ")]),m("li",{class:"list-group-item"},[m("i",{class:"bi bi-currency-euro"}),fe(" Kostenfrei auf digitalwahl.org nutzbar ")]),m("li",{class:"list-group-item"},[m("i",{class:"bi bi-clipboard-plus"}),fe(" Wünschen Sie sich eine bestimmte Funktion?"),m("br"),m("a",{href:"mailto:info@digitalwahl.org"},"Schreiben Sie uns Ihren Vorschlag per E-Mail.")])])])]),m("hr"),m("p",null,[fe(" Die Plattform digitalwahl.org kann aktuell als "),m("b",null,"Begleit-Anwendung"),fe(" für digitale, analoge oder hybride Versammlungen verwendet werden. ")]),m("p",null,"Mit der Anwendung als asynchrones Wahltool lassen sich auch")],-1)])]),_:1}))}},aQe={name:"MultiColumnContent",props:{columnCount:{type:Number,required:!0,validator:n=>[2,3,4].includes(n)},columnsContent:{type:Array,required:!0}},computed:{columns(){let n=[...this.columnsContent];if(n.length<this.columnCount)for(let t=n.length;t<this.columnCount;t++)n.push({content:""});else n.length>this.columnCount&&(n=n.slice(0,this.columnCount));return n}},methods:{getColumnClass(){switch(this.columnCount){case 4:return"col-md-3";case 3:return"col-md-4";case 2:default:return"col-md-6"}}}},lQe={class:"multi-column-content"},cQe={class:"row"},uQe=["innerHTML"];function dQe(n,t,e,i,r,s){return P(),V("div",lQe,[m("div",cQe,[(P(!0),V(Fe,null,ct(s.columns,(o,a)=>(P(),V("div",{key:a,class:Ze([s.getColumnClass(),"mb-3 mb-md-0"])},[m("div",{class:"column-content",innerHTML:o.content},null,8,uQe)],2))),128))])])}const fQe=Yt(aQe,[["render",dQe],["__scopeId","data-v-0f96b905"]]),hQe={name:"AccordionContent",props:{accordionItems:{type:Array,required:!0,validator:n=>n.every(t=>t.title&&t.content)},defaultOpenIndex:{type:Number,default:0},id:{type:String,default:()=>`accordion-${Math.random().toString(36).substring(2,10)}`}},data(){return{openIndex:this.defaultOpenIndex}},computed:{accordionId(){return this.id}},mounted(){const n=document.getElementById(this.accordionId);n&&n.addEventListener("shown.bs.collapse",t=>{const e=t.target.id.split("-"),i=parseInt(e[e.length-1],10);this.openIndex=i})},beforeUnmount(){const n=document.getElementById(this.accordionId);n&&n.removeEventListener("shown.bs.collapse")},methods:{getHeadingId(n){return`heading-${this.accordionId}-${n}`},getCollapseId(n){return`collapse-${this.accordionId}-${n}`},isItemOpen(n){return n===this.openIndex}}},mQe={class:"accordion-content"},gQe=["id"],pQe=["id"],vQe=["data-bs-target","aria-expanded","aria-controls"],bQe=["id","aria-labelledby","data-bs-parent"],wQe=["innerHTML"];function yQe(n,t,e,i,r,s){return P(),V("div",mQe,[m("div",{id:s.accordionId,class:"accordion"},[(P(!0),V(Fe,null,ct(e.accordionItems,(o,a)=>(P(),V("div",{key:a,class:"accordion-item"},[m("h2",{id:s.getHeadingId(a),class:"accordion-header"},[m("button",{class:Ze(["accordion-button",{collapsed:!s.isItemOpen(a)}]),type:"button","data-bs-toggle":"collapse","data-bs-target":`#${s.getCollapseId(a)}`,"aria-expanded":s.isItemOpen(a),"aria-controls":s.getCollapseId(a)},B(o.title),11,vQe)],8,pQe),m("div",{id:s.getCollapseId(a),class:Ze(["accordion-collapse collapse",{show:s.isItemOpen(a)}]),"aria-labelledby":s.getHeadingId(a),"data-bs-parent":`#${s.accordionId}`},[m("div",{class:"accordion-body",innerHTML:o.content},null,8,wQe)],10,bQe)]))),128))],8,gQe)])}const _Qe=Yt(hQe,[["render",yQe],["__scopeId","data-v-438e93e3"]]),kQe={class:"static-page"},EQe={key:0},CQe={key:0,class:"content-title h1"},TQe={key:1,class:"content-title h2"},SQe={key:2,class:"content-title h3"},AQe={key:3,class:"content-title h4"},IQe={key:4,class:"content-title h5"},PQe={key:5,class:"content-title"},xQe=["innerHTML"],OQe={key:1,class:"text-center py-4"},RQe={key:2,class:"alert alert-info"},VQe={__name:"GenericStaticPage",props:{pageKey:{type:String,required:!0},title:{type:String,default:""}},setup(n){const t=n,e=Ui(),i=le(()=>{const c=e.params.pageKey||e.params.directPageKey||t.pageKey;if(console.log("Loading static page with key:",c,"Route full path:",e.fullPath),c)return console.log("Using explicit pageKey from route params:",c),c;if(e.fullPath.startsWith("/static-page/")){const d=e.fullPath.replace("/static-page/","");return console.log("Extracted key from path:",d),d}const u=e.fullPath.replace(/^\//,"");return console.log("Using current path as key:",u),u}),r=Z([]),s=Z(!1),o=le(()=>{var c;return t.title||((c=r.value[0])==null?void 0:c.title)||""}),{resolveClient:a}=pl();Jt(async()=>{console.log("GenericStaticPage mounted with params:",e.params),await l()}),gt(()=>e.params,async(c,u)=>{console.log("Route params changed:",{from:u,to:c}),(c.pageKey!==u.pageKey||c.directPageKey!==u.directPageKey)&&await l()},{deep:!0});const l=async()=>{s.value=!0;try{console.log("Fetching content for static page:",{pageKey:i.value,route:e.fullPath,params:e.params});const c=a();["imprint","dataProtection","faq","userAgreement","manual","functions"].includes(i.value)&&console.log(`Note: ${i.value} is a predefined static page with its own component`);const d=await c.query({query:mt`
        query GetStaticContent($pageKey: String!) {
          staticContentsByPage(pageKey: $pageKey) {
            id
            sectionKey
            contentType
            title
            headerClass
            content
            ordering
            isPublished
            columnCount
            columnsContent {
              content
            }
            accordionItems {
              title
              content
            }
          }
        }
      `,variables:{pageKey:i.value},fetchPolicy:"network-only"});console.log(`Content for ${i.value} loaded:`,d.data);const f=(d.data.staticContentsByPage||[]).filter(h=>h.isPublished).sort((h,g)=>h.ordering-g.ordering);r.value=f,f.length===0&&console.warn(`No published content found for page: ${i.value}`)}catch(c){console.error(`Failed to load content for page "${i.value}" from database:`,c),c.graphQLErrors&&console.error("GraphQL errors:",c.graphQLErrors),c.networkError&&console.error("Network error:",c.networkError)}finally{s.value=!1}};return(c,u)=>(P(),Ge(Zs,{"meta-title":o.value},{default:$e(()=>[m("div",kQe,[r.value.length>0?(P(),V("div",EQe,[(P(!0),V(Fe,null,ct(r.value,d=>(P(),V("div",{key:d.sectionKey,class:"mb-4"},[d.title&&d.headerClass!=="d-none"?(P(),V(Fe,{key:0},[d.headerClass==="h1"?(P(),V("h1",CQe,B(d.title),1)):d.headerClass==="h2"?(P(),V("h2",TQe,B(d.title),1)):d.headerClass==="h3"?(P(),V("h3",SQe,B(d.title),1)):d.headerClass==="h4"?(P(),V("h4",AQe,B(d.title),1)):d.headerClass==="h5"?(P(),V("h5",IQe,B(d.title),1)):(P(),V("h2",PQe,B(d.title),1))],64)):ne("",!0),d.contentType==="multi-column"&&d.columnCount&&d.columnsContent?(P(),Ge(fQe,{key:1,"column-count":d.columnCount,"columns-content":d.columnsContent},null,8,["column-count","columns-content"])):d.contentType==="accordion"&&d.accordionItems?(P(),Ge(_Qe,{key:2,"accordion-items":d.accordionItems},null,8,["accordion-items"])):(P(),V("div",{key:3,innerHTML:d.content},null,8,xQe))]))),128))])):ne("",!0),s.value?(P(),V("div",OQe,[...u[0]||(u[0]=[m("div",{class:"spinner-border text-primary",role:"status"},[m("span",{class:"visually-hidden"},"Wird geladen...")],-1),m("p",{class:"mt-2"},"Inhalte werden geladen...",-1)])])):ne("",!0),!s.value&&r.value.length===0?(P(),V("div",RQe,[...u[1]||(u[1]=[m("strong",null,"Noch keine Inhalte vorhanden.",-1),m("p",null,"Für diese Seite wurden noch keine Inhalte angelegt.",-1)])])):ne("",!0)])]),_:1},8,["meta-title"]))}},Ol=Yt(VQe,[["__scopeId","data-v-0d5b93d9"]]);function DQe(n){const t=Qr.EVENT_VERIFY_SLUG,e={method:"POST",body:JSON.stringify({slug:n}),redirect:"follow",referrerPolicy:"no-referrer",cache:"no-cache",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json"}};return hc(t,e).then(i=>i.event)}const NQe=[new an("/debug-route","debugRoute",pk,{beforeEnter:(n,t)=>(console.log("Debug route was hit!"),!0)}),new an("/404",WR,pk),new an("/passwort-aendern",X4,Poe),new an("/passwort-aendern/:hash",Zre,Uoe,null,null,!0),new an("/register",eU,Tae),new an("/register/:hash",Jre,Rae,null,null,!0),new an("/",Gh,moe,{bootstrapIcon:"bi-box-arrow-in-right",redirectOrganizer:!0}),new an("/impressum",rU,yYe,null,null,null,null,async n=>{const t=await pf("impressum");return t&&t.pageKey?(console.log("Found custom page slug for impressum:",t),n.matched[0].components.default=Ol,n.params.pageKey=t.pageKey,console.log("Using GenericStaticPage with pageKey:",t.pageKey,"but keeping URL as /impressum"),!0):(console.log("Using default imprint page"),!0)}),new an("/datenschutz",tU,_Ye,null,null,null,null,async n=>{const t=await pf("datenschutz");return t&&t.pageKey?(console.log("Found custom page slug for datenschutz:",t),n.matched[0].components.default=Ol,n.params.pageKey=t.pageKey,console.log("Using GenericStaticPage with pageKey:",t.pageKey,"but keeping URL as /datenschutz"),!0):(console.log("Using default data protection page"),!0)}),new an("/haeufige-fragen",nU,VYe,null,null,null,null,async n=>{const t=await pf("haeufige-fragen");return t&&t.pageKey?(console.log("Found custom page slug for faq:",t),n.matched[0].components.default=Ol,n.params.pageKey=t.pageKey,console.log("Using GenericStaticPage with pageKey:",t.pageKey,"but keeping URL as /haeufige-fragen"),!0):(console.log("Using default faq page"),!0)}),new an("/nutzervereinbarung",sU,DYe,null,null,null,null,async n=>{const t=await pf("nutzervereinbarung");return t&&t.pageKey?(console.log("Found custom page slug for nutzervereinbarung:",t),n.matched[0].components.default=Ol,n.params.pageKey=t.pageKey,console.log("Using GenericStaticPage with pageKey:",t.pageKey,"but keeping URL as /nutzervereinbarung"),!0):(console.log("Using default user agreement page"),!0)}),new an("/anleitung",oI,sQe,null,null,null,null,async n=>{const t=await pf("anleitung");return t&&t.pageKey?(console.log("Found custom page slug for anleitung:",t),n.matched[0].components.default=Ol,n.params.pageKey=t.pageKey,console.log("Using GenericStaticPage with pageKey:",t.pageKey,"but keeping URL as /anleitung"),!0):(console.log("Using default manual page"),!0)}),new an("/funktionen-planung",iU,oQe),new an("/static-page/:pageKey",oU,Ol,null,null,!0,null,n=>(console.log("static-page route triggered with:",n.params.pageKey),n.params.pageKey&&console.log(`Navigating to static page: ${n.params.pageKey}`),!0)),new an("/static-page/imprint","staticPageImprint",Ol,null,null,!0,null,n=>(console.log("Static imprint page route triggered directly"),n.params={...n.params,pageKey:"imprint"},!0)),new an("/:directPageKey","directStaticPage",Ol,{isDirect:!0},null,!0,null,async n=>{var i;const t=((i=n.params)==null?void 0:i.directPageKey)??"",e=["admin","event","passwort-aendern","register","impressum","datenschutz","haeufige-fragen","nutzervereinbarung","anleitung","funktionen-planung","activate-user","static-page","404","s"];if(t.startsWith("static-page/"))return console.log("Path starts with static-page/, skipping direct path handling"),!0;console.log(`Direct path access attempted: /${t}`);try{const r=await pf(t);if(r&&r.pageKey)return console.log(`Found custom page slug for ${t}:`,r),n.matched[0].components.default=Ol,n.params.pageKey=r.pageKey,!0;const s=nn();return e.includes(t)?!0:s.getUseDirectStaticPaths?(console.log(`No existing page slug found, treating ${t} as pageKey`),n.params={...n.params,pageKeyOrSlug:t,isSlug:!0},!0):(console.log(`Direct paths not enabled, redirecting to /static-page/${t}`),{path:`/static-page/${t}`})}catch(r){console.error("Error in direct path resolution:",r)}return!0}),new an("/admin",mi,cle,{bootstrapIcon:"bi-calendar4-week",requireOrganizerRole:!0}),new an("/admin/profile",vd,Ele,{bootstrapIcon:"bi-calendar4-week",requireOrganizerRole:!0}),new an("/admin/event",pr,mce,{bootstrapIcon:"bi-card-list",requireOrganizerRole:!0}),new an("/admin/video-conference",Ir,Cce,{bootstrapIcon:"bi-camera-video",requireOrganizerRole:!0}),new an("/admin/event/new",cU,m8e,{requireOrganizerRole:!0}),new an("/admin/event/edit/:id",aI,w8e,{requireOrganizerRole:!0},null,!0),new an("/admin/event/member-room/:id",Ul,eHe,{bootstrapIcon:"bi-people",requireOrganizerRole:!0},null,!0,null,async n=>{var e;const t=nn();return await t.waitForAuth(),console.log("Member room - User auth status after init:",{isActiveOrganizer:t.isActiveOrganizerSession,userRole:t.getActiveUserRole,userId:(e=t.user)==null?void 0:e.id,token:!!localStorage.getItem(Ha)}),!0}),new an("/admin/event/member-room/:id/event-user/new",uU,fje,{requireOrganizerRole:!0},null,!0),new an("/admin/event/member-room/:id/event-user/multiple-new",fU,Gje,{requireOrganizerRole:!0},null,!0),new an("/admin/event/member-room/:id/event-user/edit/:eventUserId",dU,Zje,{requireOrganizerRole:!0},null,!0),new an("/admin/event/lobby-room/:id",Og,wHe,{bootstrapIcon:"bi-person-plus",requireOrganizerRole:!0},null,!0),new an("/admin/event/polls/:id",io,TWe,{bootstrapIcon:"bi-collection",requireOrganizerRole:!0},null,!0),new an("/admin/event/polls/:id/poll/new",lI,GWe,{requireOrganizerRole:!0},null,!0),new an("/admin/event/polls/:id/poll/edit/:pollId",cI,ZWe,{requireOrganizerRole:!0},null,!0),new an("/admin/event/polls/:id/poll/copy/:pollId",uI,eje,{requireOrganizerRole:!0},null,!0),new an("/admin/event/poll-results/:id",Rg,x9e,{bootstrapIcon:"bi-card-checklist",requireOrganizerRole:!0},null,!0),new an("/admin/video-conference/new",aU,Fce,{requireOrganizerRole:!0}),new an("/admin/video-conference/edit/:id",lU,Rce,{requireOrganizerRole:!0},null,!0),new an("/admin/organizers",_o,dve,{bootstrapIcon:"bi-people",requireOrganizerRole:!0,requireSuperOrganizerRole:!0}),new an("/admin/all-event",ko,pve,{bootstrapIcon:"bi-calendar2-range",requireOrganizerRole:!0,requireSuperOrganizerRole:!0}),new an("/admin/message-editor",cl,vbe,{bootstrapIcon:"bi-translate",requireOrganizerRole:!0,requireSuperOrganizerRole:!0}),new an("/admin/static-content-editor",dc,kBe,{bootstrapIcon:"bi-file-earmark-text",requireOrganizerRole:!0,requireSuperOrganizerRole:!0}),new an("/admin/global-settings",fc,()=>eo(()=>import("./OrganizerGlobalSettings-4_qpgsVx.js"),__vite__mapDeps([9,10])),{bootstrapIcon:"bi-gear-fill",requireOrganizerRole:!0,requireSuperOrganizerRole:!0}),new an("/event/:eventSlug",hU,KKe,null,null,null,null,async n=>{var e;const t=((e=n.params)==null?void 0:e.eventSlug)??"";try{const i=nn();if(i.isActiveOrganizerSession)return ze(Xe("router.redirect.activeOrganizerSession"),{type:"info"}),{name:mi};const r=await DQe(t);i.setEvent(r)}catch{return ze(Xe("router.redirect.invalidEventSlug",{slug:t}),{type:"error"}),{name:Gh}}}),new an("/activate-user/:eventId/:token",Xre,oYe),new an("/s/:shortCode",ese,fYe,null,null,!0),new an("/:pathMatch(.*)*",WR,pk,null,null,!1,null,n=>{if(console.log("404 Catch-All route triggered for:",n.fullPath),n.fullPath.startsWith("/static-page/")){const t=n.fullPath.replace("/static-page/","");if(console.log(`Detected static page path in 404 handler: ${t}`),t)return n.params={...n.params,pageKey:t},nn(),console.log(`StaticContent existence will be checked for: ${t}`),{path:`/static-page/${t}`,replace:!0}}return!0})],gx=Yre({history:Cre(),routes:NQe,scrollBehavior(){return{top:0}}});gx.beforeEach(async(n,t)=>{const e=nn();if(await e.waitForAuth(),n.meta.redirectOrganizer&&e.isActiveOrganizerSession)return ze(Xe("router.redirect.activeOrganizerSession"),{type:"info"}),{name:mi};if(n.meta.requireSuperOrganizerRole&&!e.isSuperOrganizer)return{name:mi};if(n.meta.requireOrganizerRole&&e.getActiveUserRole!==_ne)return{name:Gh}});const LQe="2.0.1";function AS(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,i=Array(t);e<t;e++)i[e]=n[e];return i}function MQe(n){if(Array.isArray(n))return n}function $Qe(n){if(Array.isArray(n))return AS(n)}function BQe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function wW(n,t,e){return t=pm(t),jQe(n,_W()?Reflect.construct(t,e||[],pm(n).constructor):t.apply(n,e))}function zv(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function FQe(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,kW(i.key),i)}}function Hv(n,t,e){return t&&FQe(n.prototype,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Wl(n,t,e){return(t=kW(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function IS(){return IS=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(n,t,e){var i=qQe(n,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?n:e):r.value}},IS.apply(null,arguments)}function pm(n){return pm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pm(n)}function yW(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&PS(n,t)}function _W(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_W=function(){return!!n})()}function UQe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function zQe(n,t){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var i,r,s,o,a=[],l=!0,c=!1;try{if(s=(e=e.call(n)).next,t===0){if(Object(e)!==e)return;l=!1}else for(;!(l=(i=s.call(e)).done)&&(a.push(i.value),a.length!==t);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&e.return!=null&&(o=e.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}function HQe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WQe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S$(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function Rf(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?S$(Object(e),!0).forEach(function(i){Wl(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):S$(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function jQe(n,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BQe(n)}function PS(n,t){return PS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},PS(n,t)}function A$(n,t){return MQe(n)||zQe(n,t)||EW(n,t)||HQe()}function qQe(n,t){for(;!{}.hasOwnProperty.call(n,t)&&(n=pm(n))!==null;);return n}function xo(n,t,e,i){var r=IS(pm(n.prototype),t,e);return 2&i&&typeof r=="function"?function(s){return r.apply(e,s)}:r}function GQe(n){return $Qe(n)||UQe(n)||EW(n)||WQe()}function KQe(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function kW(n){var t=KQe(n,"string");return typeof t=="symbol"?t:t+""}function xS(n){"@babel/helpers - typeof";return xS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xS(n)}function EW(n,t){if(n){if(typeof n=="string")return AS(n,t);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?AS(n,t):void 0}}function CW(n,t,e){var i=e||{},r=i.noTrailing,s=r===void 0?!1:r,o=i.noLeading,a=o===void 0?!1:o,l=i.debounceMode,c=l===void 0?void 0:l,u,d=!1,f=0;function h(){u&&clearTimeout(u)}function g(_){var w=_||{},C=w.upcomingOnly,k=C===void 0?!1:C;h(),d=!k}function v(){for(var _=arguments.length,w=new Array(_),C=0;C<_;C++)w[C]=arguments[C];var k=this,E=Date.now()-f;if(d)return;function A(){f=Date.now(),t.apply(k,w)}function x(){u=void 0}!a&&c&&!u&&A(),h(),c===void 0&&E>n?a?(f=Date.now(),s||(u=setTimeout(c?x:A,n))):A():s!==!0&&(u=setTimeout(c?x:A,c===void 0?n-E:n))}return v.cancel=g,v}function YQe(n,t,e){var i=e||{},r=i.atBegin,s=r===void 0?!1:r;return CW(n,t,{debounceMode:s!==!1})}var TW=Object.freeze({__proto__:null,debounce:YQe,throttle:CW});function SW(n){return function(t,e){return n(e,t)}}var I$=SW(TW.throttle),P$=SW(TW.debounce),OS=function(t,e){for(;typeof t=="function";)t=t.call(e);return t},RS=function(t,e){return Object.entries(t).filter(function(i){var r=A$(i,1),s=r[0];return!e.includes(s)}).reduce(function(i,r){var s=A$(r,2),o=s[0],a=s[1];return i[o]=a,i},{})},x$=function(t){t.graphQLErrors&&t.graphQLErrors.length&&(t.gqlError=t.graphQLErrors[0])},Ya=typeof window>"u",QQe=["variables","watch","update","result","error","loadingKey","watchLoading","skip","throttle","debounce","subscribeToMore","prefetch","manual"],ZQe={query:"_skipAllQueries",subscription:"_skipAllSubscriptions"},AW=function(){function n(t,e,i){zv(this,n),Wl(this,"type",null),Wl(this,"vueApolloSpecialKeys",[]),this.vm=t,this.key=e,this.initialOptions=i,this.options=Object.assign({},i),this._skip=!1,this._pollInterval=null,this._watchers=[],this._destroyed=!1,this.lastApolloOptions=null}return Hv(n,[{key:"autostart",value:function(){var e=this;typeof this.options.skip=="function"?this._skipWatcher=this.vm.$watch(function(){return e.options.skip.call(e.vm,e.vm,e.key)},this.skipChanged.bind(this),{immediate:!0,deep:this.options.deep}):!this.options.skip&&!this.allSkip?this.start():this._skip=!0,typeof this.options.pollInterval=="function"&&(this._pollWatcher=this.vm.$watch(this.options.pollInterval.bind(this.vm),this.pollIntervalChanged.bind(this),{immediate:!0}))}},{key:"pollIntervalChanged",value:function(e,i){e!==i&&(this.pollInterval=e,e==null?this.stopPolling():this.startPolling(e))}},{key:"skipChanged",value:function(e,i){e!==i&&(this.skip=e)}},{key:"pollInterval",get:function(){return this._pollInterval},set:function(e){this._pollInterval=e}},{key:"skip",get:function(){return this._skip},set:function(e){e||this.allSkip?this.stop():this.start(),this._skip=e}},{key:"allSkip",get:function(){return this.vm.$apollo[ZQe[this.type]]}},{key:"refresh",value:function(){this._skip||(this.stop(),this.start())}},{key:"start",value:function(){var e=this;this.starting=!0;for(var i=function(){var l=s[r];if(typeof e.initialOptions[l]=="function"){var c=e.initialOptions[l].bind(e.vm);e.options[l]=c();var u=function(f){e._destroyed||(e.options[l]=f,e.refresh())};Ya||(u=e.options.throttle?I$(u,e.options.throttle):u,u=e.options.debounce?P$(u,e.options.debounce):u),e._watchers.push(e.vm.$watch(c,u,{deep:e.options.deep}))}},r=0,s=["query","document","context"];r<s.length;r++)i();if(typeof this.options.variables=="function"){var o=this.executeApollo.bind(this);Ya||(o=this.options.throttle?I$(o,this.options.throttle):o,o=this.options.debounce?P$(o,this.options.debounce):o),this._watchers.push(this.vm.$watch(function(){return typeof e.options.variables=="function"?e.options.variables.call(e.vm):e.options.variables},o,{immediate:!0,deep:this.options.deep}))}else this.executeApollo(this.options.variables)}},{key:"stop",value:function(){for(var e=0,i=this._watchers;e<i.length;e++){var r=i[e];r()}this.sub&&(this.sub.unsubscribe(),this.sub=null)}},{key:"generateApolloOptions",value:function(e){var i=RS(this.options,this.vueApolloSpecialKeys);return i.variables=e,this.lastApolloOptions=i,i}},{key:"executeApollo",value:function(e){this.starting=!1}},{key:"nextResult",value:function(e){var i=e.error;i&&x$(i)}},{key:"callHandlers",value:function(e){for(var i=!1,r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];for(var a=0;a<e.length;a++){var l=e[a];if(l){i=!0;var c=l.apply(this.vm,s);if(typeof c<"u"&&!c)break}}return i}},{key:"errorHandler",value:function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return this.callHandlers.apply(this,[[this.options.error,this.vm.$apollo.error,this.vm.$apollo.provider.errorHandler]].concat(i))}},{key:"catchError",value:function(e){x$(e);var i=this.errorHandler(e,this.vm,this.key,this.type,this.lastApolloOptions);if(!i)if(e.graphQLErrors&&e.graphQLErrors.length!==0){console.error("GraphQL execution errors for ".concat(this.type," '").concat(this.key,"'"));for(var r=0,s=e.graphQLErrors;r<s.length;r++){var o=s[r];console.error(o)}}else if(e.networkError)console.error("Error sending the ".concat(this.type," '").concat(this.key,"'"),e.networkError);else if(console.error("[vue-apollo] An error has occurred for ".concat(this.type," '").concat(this.key,"'")),Array.isArray(e)){var a;(a=console).error.apply(a,GQe(e))}else console.error(e)}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this.stop(),this._skipWatcher&&this._skipWatcher())}}])}(),JQe=function(n){function t(e,i,r){var s,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;return zv(this,t),e.$data.$apolloData&&!e.$data.$apolloData.queries[i]&&(e.$data.$apolloData.queries[i]={loading:!1}),s=wW(this,t,[e,i,r]),Wl(s,"type","query"),Wl(s,"vueApolloSpecialKeys",QQe),Wl(s,"_loading",!1),Wl(s,"_linkedSubscriptions",[]),Ya&&(s.firstRun=new Promise(function(a,l){s._firstRunResolve=a,s._firstRunReject=l})),Ya&&(s.options.fetchPolicy="network-only"),r.manual||(s.hasDataField=Object.prototype.hasOwnProperty.call(s.vm.$data,i),s.hasDataField?Object.defineProperty(s.vm.$data.$apolloData.data,i,{get:function(){return s.vm.$data[i]},enumerable:!0,configurable:!0}):Object.defineProperty(s.vm.$data,i,{get:function(){return s.vm.$data.$apolloData.data[i]},enumerable:!0,configurable:!0})),o&&s.autostart(),s}return yW(t,n),Hv(t,[{key:"client",get:function(){return this.vm.$apollo.getClient(this.options)}},{key:"loading",get:function(){return this.vm.$data.$apolloData&&this.vm.$data.$apolloData.queries[this.key]?this.vm.$data.$apolloData.queries[this.key].loading:this._loading},set:function(i){this._loading!==i&&(this._loading=i,this.vm.$data.$apolloData&&this.vm.$data.$apolloData.queries[this.key]&&(this.vm.$data.$apolloData.queries[this.key].loading=i,this.vm.$data.$apolloData.loading+=i?1:-1))}},{key:"stop",value:function(){xo(t,"stop",this,3)([]),this.loadingDone(),this.observer&&(this.observer.stopPolling(),this.observer=null)}},{key:"generateApolloOptions",value:function(i){var r=xo(t,"generateApolloOptions",this,3)([i]);return this.vm.$isServer&&delete r.pollInterval,r}},{key:"executeApollo",value:function(i){if(!this._destroyed){var r=JSON.stringify(i);if(this.sub){if(r===this.previousVariablesJson)return;this.sub.unsubscribe();for(var s=0,o=this._linkedSubscriptions;s<o.length;s++){var a=o[s];a.stop()}}if(this.previousVariablesJson=r,this.observer=this.vm.$apollo.watchQuery(this.generateApolloOptions(i)),this.startQuerySubscription(),this.options.fetchPolicy!=="no-cache"||this.options.notifyOnNetworkStatusChange){var l=this.retrieveCurrentResult();(this.options.notifyOnNetworkStatusChange||this.observer.getCurrentResult&&!l.loading)&&this.nextResult(l)}xo(t,"executeApollo",this,3)([i]);for(var c=0,u=this._linkedSubscriptions;c<u.length;c++){var d=u[c];d.start()}}}},{key:"startQuerySubscription",value:function(){this.sub&&!this.sub.closed||(this.sub=this.observer.subscribe({next:this.nextResult.bind(this),error:this.catchError.bind(this)}))}},{key:"retrieveCurrentResult",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=this.observer.getCurrentResult?this.observer.getCurrentResult():this.observer.currentResult();return(i||r.loading)&&(this.loading||this.applyLoadingModifier(1),this.loading=!0),r}},{key:"nextResult",value:function(i){xo(t,"nextResult",this,3)([i]);var r=i.data,s=i.loading,o=i.error,a=i.errors,l=a&&a.length;if((o||l)&&this.firstRunReject(o),s||this.loadingDone(),!o&&l){var c=new Error("GraphQL error: ".concat(a.map(function(d){return d.message}).join(" | ")));Object.assign(c,{graphQLErrors:a,networkError:null}),xo(t,"catchError",this,3)([c])}if(!(this.observer.options.errorPolicy==="none"&&(o||l))){var u=typeof this.options.result=="function";r==null||(this.options.manual?u||console.error("".concat(this.key," query must have a 'result' hook in manual mode")):typeof this.options.update=="function"?this.setData(this.options.update.call(this.vm,r)):typeof r[this.key]>"u"&&Object.keys(r).length?console.error("Missing ".concat(this.key," attribute on result"),r):this.setData(r[this.key])),u&&this.options.result.call(this.vm,i,this.key)}}},{key:"setData",value:function(i){var r=this.hasDataField?this.vm.$data:this.vm.$data.$apolloData.data;r[this.key]=i}},{key:"catchError",value:function(i){xo(t,"catchError",this,3)([i]),this.firstRunReject(i),this.loadingDone(i),this.nextResult(this.observer.getCurrentResult?this.observer.getCurrentResult():this.observer.currentResult()),this.resubscribeToQuery()}},{key:"resubscribeToQuery",value:function(){var i=this.observer.getLastError(),r=this.observer.getLastResult();this.observer.resetLastResults(),this.startQuerySubscription(),Object.assign(this.observer,{lastError:i,lastResult:r})}},{key:"loadingKey",get:function(){return this.options.loadingKey||this.vm.$apollo.loadingKey}},{key:"watchLoading",value:function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return this.callHandlers.apply(this,[[this.options.watchLoading,this.vm.$apollo.watchLoading,this.vm.$apollo.provider.watchLoading]].concat(r,[this]))}},{key:"applyLoadingModifier",value:function(i){var r=this.loadingKey;r&&typeof this.vm[r]=="number"&&(this.vm[r]+=i),this.watchLoading(i===1,i)}},{key:"loadingDone",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.loading&&this.applyLoadingModifier(-1),this.loading=!1,i||this.firstRunResolve()}},{key:"fetchMore",value:function(){var i=this;if(this.observer){var r;return this.retrieveCurrentResult(!0),(r=this.observer).fetchMore.apply(r,arguments).then(function(s){return s.loading||i.loadingDone(),s})}}},{key:"subscribeToMore",value:function(){if(this.observer){var i;return{unsubscribe:(i=this.observer).subscribeToMore.apply(i,arguments)}}}},{key:"refetch",value:function(i){var r=this;if(i&&(this.options.variables=i),this.observer){var s=this.observer.refetch(i).then(function(o){return o.loading||r.loadingDone(),o});return this.retrieveCurrentResult(),s}}},{key:"setVariables",value:function(i,r){if(this.options.variables=i,this.observer){var s=this.observer.setVariables(i,r);return this.retrieveCurrentResult(),s}}},{key:"setOptions",value:function(i){if(Object.assign(this.options,i),this.observer){var r=this.observer.setOptions(i);return this.retrieveCurrentResult(),r}}},{key:"startPolling",value:function(){if(this.observer){var i;return(i=this.observer).startPolling.apply(i,arguments)}}},{key:"stopPolling",value:function(){if(this.observer){var i;return(i=this.observer).stopPolling.apply(i,arguments)}}},{key:"firstRunResolve",value:function(){this._firstRunResolve&&(this._firstRunResolve(),this._firstRunResolve=null)}},{key:"firstRunReject",value:function(i){this._firstRunReject&&(this._firstRunReject(i),this._firstRunReject=null)}},{key:"destroy",value:function(){xo(t,"destroy",this,3)([]),this.loading&&this.watchLoading(!1,-1),this.loading=!1}}])}(AW),XQe=5,eZe=500,tZe=function(n){function t(e,i,r){var s,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;return zv(this,t),s=wW(this,t,[e,i,r]),Wl(s,"type","subscription"),Wl(s,"vueApolloSpecialKeys",["variables","result","error","throttle","debounce","linkedQuery"]),s.attempts=0,o&&s.autostart(),s}return yW(t,n),Hv(t,[{key:"generateApolloOptions",value:function(i){var r=xo(t,"generateApolloOptions",this,3)([i]);return r.onError=this.catchError.bind(this),r}},{key:"executeApollo",value:function(i){if(!this._destroyed){var r=JSON.stringify(i);if(this.sub){if(r===this.previousVariablesJson)return;this.sub.unsubscribe()}this.previousVariablesJson=r;var s=this.generateApolloOptions(i);if(typeof s.updateQuery=="function"&&(s.updateQuery=s.updateQuery.bind(this.vm)),this.options.linkedQuery){if(typeof this.options.result=="function"){var o=this.options.result.bind(this.vm),a=s.updateQuery&&s.updateQuery.bind(this.vm);s.updateQuery=function(){return o.apply(void 0,arguments),a&&a.apply(void 0,arguments)}}this.sub=this.options.linkedQuery.subscribeToMore(s)}else this.observer=this.vm.$apollo.subscribe(s),this.sub=this.observer.subscribe({next:this.nextResult.bind(this),error:this.catchError.bind(this)});xo(t,"executeApollo",this,3)([i])}}},{key:"nextResult",value:function(i){xo(t,"nextResult",this,3)([i]),this.attempts=0,typeof this.options.result=="function"&&this.options.result.call(this.vm,i,this.key)}},{key:"catchError",value:function(i){xo(t,"catchError",this,3)([i]),!(this.skip||this.attempts>=XQe)&&(this.stop(),this.retryTimeout=setTimeout(this.start.bind(this),Math.pow(2,this.attempts)*eZe),this.attempts++)}},{key:"stop",value:function(){xo(t,"stop",this,3)([]),clearTimeout(this.retryTimeout)}}])}(AW),nZe=function(){function n(t,e){zv(this,n),this._apolloSubscriptions=[],this._watchers=[],this.vm=t,this.provider=e,this.queries={},this.subscriptions={},this.client=void 0,this.loadingKey=void 0,this.error=void 0}return Hv(n,[{key:"getClient",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(!e||!e.client){if(xS(this.client)==="object")return this.client;if(this.client)if(this.provider.clients){var i=this.provider.clients[this.client];if(!i)throw new Error("[vue-apollo] Missing client '".concat(this.client,"' in 'apolloProvider'"));return i}else throw new Error("[vue-apollo] Missing 'clients' options in 'apolloProvider'");return this.provider.defaultClient}var r=this.provider.clients[e.client];if(!r)throw new Error("[vue-apollo] Missing client '".concat(e.client,"' in 'apolloProvider'"));return r}},{key:"query",value:function(e){return this.getClient(e).query(e)}},{key:"watchQuery",value:function(e){var i=this,r=this.getClient(e).watchQuery(e),s=r.subscribe.bind(r);return r.subscribe=function(o){var a=s(o);return i._apolloSubscriptions.push(a),a},r}},{key:"mutate",value:function(e){return this.getClient(e).mutate(e)}},{key:"subscribe",value:function(e){var i=this;if(!Ya){var r=this.getClient(e).subscribe(e),s=r.subscribe.bind(r);return r.subscribe=function(o){var a=s(o);return i._apolloSubscriptions.push(a),a},r}}},{key:"loading",get:function(){return this.vm.$data.$apolloData.loading!==0}},{key:"data",get:function(){return this.vm.$data.$apolloData.data}},{key:"addSmartQuery",value:function(e,i){var r=this,s=OS(i,this.vm);if(!s.query){var o=s;s={query:o}}var a=this.vm.$options.apollo,l=this.provider.defaultOptions,c;if(l&&l.$query&&(c=l.$query),a&&a.$query&&(c=Rf(Rf({},c||{}),a.$query)),c)for(var u in c)typeof s[u]>"u"&&(s[u]=c[u]);var d=this.queries[e]=new JQe(this.vm,e,s,!1);if((!Ya||s.prefetch!==!1)&&d.autostart(),!Ya){var f=s.subscribeToMore;f&&(Array.isArray(f)?f.forEach(function(h,g){r.addSmartSubscription("".concat(e).concat(g),Rf(Rf({},h),{},{linkedQuery:d}))}):this.addSmartSubscription(e,Rf(Rf({},f),{},{linkedQuery:d})))}return d}},{key:"addSmartSubscription",value:function(e,i){if(!Ya){i=OS(i,this.vm);var r=this.subscriptions[e]=new tZe(this.vm,e,i,!1);if(r.autostart(),i.linkedQuery){var s=i.linkedQuery._linkedSubscriptions.findIndex(function(o){return o.key===e});s!==-1?i.linkedQuery._linkedSubscriptions[s]=r:i.linkedQuery._linkedSubscriptions.push(r)}return r}}},{key:"defineReactiveSetter",value:function(e,i,r){var s=this;this._watchers.push(this.vm.$watch(i,function(o){s[e]=o},{immediate:!0,deep:r}))}},{key:"skipAllQueries",set:function(e){this._skipAllQueries=e;for(var i in this.queries)this.queries[i].skip=e}},{key:"skipAllSubscriptions",set:function(e){this._skipAllSubscriptions=e;for(var i in this.subscriptions)this.subscriptions[i].skip=e}},{key:"skipAll",set:function(e){this.skipAllQueries=e,this.skipAllSubscriptions=e}},{key:"destroy",value:function(){for(var e=0,i=this._watchers;e<i.length;e++){var r=i[e];r()}for(var s in this.queries)this.queries[s].destroy();for(var o in this.subscriptions)this.subscriptions[o].destroy();this._apolloSubscriptions.forEach(function(a){a.unsubscribe()}),this._apolloSubscriptions=null,this.vm=null}}])}();function UE(n,t){return typeof n<"u"&&Object.prototype.hasOwnProperty.call(n,t)}function iZe(){var n=this,t=this.$apolloProvider;if(!(this._apolloLaunched||!t)){this._apolloLaunched=!0;var e=this.$options.apollo;if(e){this.$_apolloPromises=[],e.$init||(e.$init=!0,t.defaultOptions&&(e=this.$options.apollo=Object.assign({},t.defaultOptions,e))),Qu(this.$apollo,"skipAll",e.$skipAll,e.$deep),Qu(this.$apollo,"skipAllQueries",e.$skipAllQueries,e.$deep),Qu(this.$apollo,"skipAllSubscriptions",e.$skipAllSubscriptions,e.$deep),Qu(this.$apollo,"client",e.$client,e.$deep),Qu(this.$apollo,"loadingKey",e.$loadingKey,e.$deep),Qu(this.$apollo,"error",e.$error,e.$deep),Qu(this.$apollo,"watchLoading",e.$watchLoading,e.$deep),Object.defineProperty(this,"$apolloData",{get:function(){return n.$data.$apolloData},enumerable:!0,configurable:!0});for(var i in e)if(i.charAt(0)!=="$"){var r=e[i],s=this.$apollo.addSmartQuery(i,r);Ya&&(r=OS(r,this),t.prefetch!==!1&&r.prefetch!==!1&&e.$prefetch!==!1&&!s.skip&&this.$_apolloPromises.push(s.firstRun))}if(e.subscribe&&console.warn("vue-apollo -> `subscribe` option is deprecated. Use the `$subscribe` option instead."),e.$subscribe)for(var o in e.$subscribe)this.$apollo.addSmartSubscription(o,e.$subscribe[o])}}}function Qu(n,t,e,i){typeof e<"u"&&(typeof e=="function"?n.defineReactiveSetter(t,e,i):n[t]=e)}function Zb(){this.$apollo&&(this.$apollo.destroy(),this.$apollo=null)}function rZe(n,t){n.mixin({data:function(){var i={$apolloData:{queries:{},loading:0,data:{}}},r=this.$options.apollo;if(r){for(var s in r)if(s.charAt(0)!=="$"){var o=r[s];!o.manual&&!UE(this.$options.props,s)&&!UE(this.$options.computed,s)&&!UE(this.$options.methods,s)&&(i[s]=null)}}return i},beforeCreate:function(){var i=this;if(this.$apollo=new nZe(this,t),Ya){var r=this.$options.ssrRender;if(!r||r.__IS_VUE_APOLLO_WRAPPED)return;this.$options.ssrRender=function(s){var o=r.call(i,s);return Zb.call(i),o},this.$options.ssrRender.__IS_VUE_APOLLO_WRAPPED=!0}},serverPrefetch:function(){var i=this;if(this.$_apolloPromises)return Promise.all(this.$_apolloPromises).then(function(){var r={vm:i,provider:i.$apollo.provider,loading:!1,queries:{},subscriptions:{}};Zb.call(i),i.$apollo=r}).catch(function(r){return Zb.call(i),Promise.reject(r)})},created:iZe,unmounted:Zb})}var Jb=["$subscribe"],sZe=function(){function n(t){if(zv(this,n),!t)throw new Error("Options argument required");this.clients=t.clients||{},t.defaultClient&&(this.clients.defaultClient=this.defaultClient=t.defaultClient),this.defaultOptions=t.defaultOptions,this.watchLoading=t.watchLoading,this.errorHandler=t.errorHandler,this.prefetch=t.prefetch}return Hv(n,[{key:"install",value:function(e){e.config.optionMergeStrategies.apollo=function(i,r,s){if(!i)return r;if(!r)return i;for(var o=Object.assign({},RS(i,Jb),i.data),a=Object.assign({},RS(r,Jb),r.data),l={},c=0;c<Jb.length;c++){var u=Jb[c];l[u]=O$(i[u],r[u])}return Object.assign(l,O$(o,a))},e.config.globalProperties.$apolloProvider=this,rZe(e,this)}}])}();function O$(n,t){return n?Object.assign(Object.assign(Object.create(null),n),t):t}function oZe(n){return new sZe(n)}var aZe=Object.defineProperty,lZe=Object.defineProperties,cZe=Object.getOwnPropertyDescriptors,R$=Object.getOwnPropertySymbols,uZe=Object.prototype.hasOwnProperty,dZe=Object.prototype.propertyIsEnumerable,V$=(n,t,e)=>t in n?aZe(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,qa=(n,t)=>{for(var e in t||(t={}))uZe.call(t,e)&&V$(n,e,t[e]);if(R$)for(var e of R$(t))dZe.call(t,e)&&V$(n,e,t[e]);return n},Nw=(n,t)=>lZe(n,cZe(t)),Du=(n,t)=>{const e=n.__vccOpts||n;for(const[i,r]of t)e[i]=r;return e};const fZe=n=>(Hd("data-v-e0a0b7f0"),n=n(),Wd(),n),hZe=["onClick"],mZe=["checked"],gZe=fZe(()=>m("label",{for:"checbox"},null,-1)),pZe=Cn({__name:"MultipleSelectCheckBox",props:{status:{type:String,required:!0}},emits:["change"],setup(n,{emit:t}){const e=n;ku(o=>({"51ab8a49":M(s)}));const i=le(()=>e.status==="allSelected"),r=()=>{t("change",!i.value)},s=Ci("themeColor");return(o,a)=>(P(),V("div",{class:"easy-checkbox",onClick:bt(r,["stop","prevent"])},[m("input",{type:"checkbox",checked:M(i),class:Ze(n.status)},null,10,mZe),gZe],8,hZe))}});var vZe=Du(pZe,[["__scopeId","data-v-e0a0b7f0"]]);const bZe=n=>(Hd("data-v-7e69a276"),n=n(),Wd(),n),wZe=["checked"],yZe=bZe(()=>m("label",{for:"checbox"},null,-1)),_Ze=Cn({__name:"SingleSelectCheckBox",props:{checked:{type:Boolean,required:!0}},emits:["change"],setup(n,{emit:t}){ku(i=>({fdaf7e9e:M(e)}));const e=Ci("themeColor");return(i,r)=>(P(),V("div",{class:"easy-checkbox",onClick:r[0]||(r[0]=bt(s=>t("change"),["stop","prevent"]))},[m("input",{type:"checkbox",checked:n.checked},null,8,wZe),yZe]))}});var kZe=Du(_Ze,[["__scopeId","data-v-7e69a276"]]);const EZe=n=>(Hd("data-v-4ca5de3a"),n=n(),Wd(),n),CZe={class:"easy-data-table__rows-selector"},TZe={class:"rows-input"},SZe=EZe(()=>m("div",{class:"triangle"},null,-1)),AZe=["onClick"],IZe=Cn({__name:"RowsSelector",props:{modelValue:{type:Number,required:!0},rowsItems:{type:Array,required:!0}},emits:["update:modelValue"],setup(n,{emit:t}){const e=n;ku(d=>({"1b889342":M(u)}));const i=Z(!1),r=Z(!1),s=Ci("dataTable");gt(i,d=>{if(d&&s){const f=window.innerHeight,h=s.value.getBoundingClientRect().height,g=s.value.getBoundingClientRect().top;f-(h+g)<=100?r.value=!0:r.value=!1}});const o=le({get:()=>e.modelValue,set:d=>{t("update:modelValue",d)}}),a=d=>{o.value=d,i.value=!1},l=(d,f)=>{let h=d.parentNode;for(;h!=null;){if(h.classList&&h.classList.contains(f))return!0;h=h.parentNode}return!1},c=d=>{l(d.target,"easy-data-table__rows-selector")||(i.value=!1)};Jt(()=>{document.addEventListener("click",c)}),wa(()=>{document.removeEventListener("click",c)});const u=Ci("themeColor");return(d,f)=>(P(),V("div",CZe,[m("div",{class:"rows-input__wrapper",onClick:f[0]||(f[0]=h=>i.value=!i.value)},[m("div",TZe,B(M(o)),1),SZe]),m("ul",{class:Ze(["select-items",{show:i.value,inside:r.value}])},[(P(!0),V(Fe,null,ct(n.rowsItems,h=>(P(),V("li",{key:h,class:Ze({selected:h===M(o)}),onClick:g=>a(h)},B(h),11,AZe))),128))],2)]))}});var PZe=Du(IZe,[["__scopeId","data-v-4ca5de3a"]]);const i1=n=>(Hd("data-v-1fa3a520"),n=n(),Wd(),n),xZe={class:"lds-ring"},OZe=i1(()=>m("div",null,null,-1)),RZe=i1(()=>m("div",null,null,-1)),VZe=i1(()=>m("div",null,null,-1)),DZe=i1(()=>m("div",null,null,-1)),NZe=[OZe,RZe,VZe,DZe],LZe=Cn({__name:"Loading",setup(n){ku(e=>({26774109:M(t)}));const t=Ci("themeColor");return(e,i)=>(P(),V("div",xZe,NZe))}});var MZe=Du(LZe,[["__scopeId","data-v-1fa3a520"]]);const $Ze={class:"loader-line"},BZe=Cn({__name:"LoadingLine",setup(n){ku(e=>({"0d327f57":M(t)}));const t=Ci("themeColor");return(e,i)=>(P(),V("div",$Ze))}});var FZe=Du(BZe,[["__scopeId","data-v-7d281cac"]]);const UZe={class:"buttons-pagination"},zZe=["onClick"],HZe=Cn({__name:"ButtonsPagination",props:{maxPaginationNumber:{type:Number,required:!0},currentPaginationNumber:{type:Number,required:!0}},emits:["updatePage"],setup(n,{emit:t}){const e=n;ku(a=>({"40dd4f07":M(o)}));const i=7,r=a=>{a.type==="button"&&!a.active&&t("updatePage",a.page)},s=le(()=>{const a=[];if(e.maxPaginationNumber<=i)for(let l=1;l<=e.maxPaginationNumber;l+=1)a.push({type:"button",page:l,active:l===e.currentPaginationNumber,activePrev:l+1===e.currentPaginationNumber});else if([1,2,e.maxPaginationNumber,e.maxPaginationNumber-1].includes(e.currentPaginationNumber))for(let l=1;l<=i;l+=1)if(l<=3)a.push({type:"button",page:l,active:l===e.currentPaginationNumber,activePrev:l+1===e.currentPaginationNumber});else if(l===4)a.push({type:"omission"});else{const c=e.maxPaginationNumber-(i-l);a.push({type:"button",page:c,active:c===e.currentPaginationNumber,activePrev:c+1===e.currentPaginationNumber})}else if([3,4].includes(e.currentPaginationNumber))for(let l=1;l<=i;l+=1)l<=5?a.push({type:"button",page:l,active:l===e.currentPaginationNumber,activePrev:l+1===e.currentPaginationNumber}):l===6?a.push({type:"omission"}):a.push({type:"button",page:e.maxPaginationNumber,active:e.maxPaginationNumber===e.currentPaginationNumber,activePrev:l+1===e.currentPaginationNumber});else if([e.maxPaginationNumber-2,e.maxPaginationNumber-3].includes(e.currentPaginationNumber))for(let l=1;l<=i;l+=1)if(l===1)a.push({type:"button",page:1,active:e.currentPaginationNumber===1,activePrev:l+1===e.currentPaginationNumber});else if(l===2)a.push({type:"omission"});else{const c=e.maxPaginationNumber-(i-l);a.push({type:"button",page:c,active:c===e.currentPaginationNumber,activePrev:c+1===e.currentPaginationNumber})}else for(let l=1;l<=i;l+=1)if(l===1)a.push({type:"button",page:1,active:e.currentPaginationNumber===1,activePrev:l+1===e.currentPaginationNumber});else if(l===2||l===6)a.push({type:"omission"});else if(l===7)a.push({type:"button",page:e.maxPaginationNumber,active:e.maxPaginationNumber===e.currentPaginationNumber,activePrev:l+1===e.currentPaginationNumber});else{const c=4-l,u=e.currentPaginationNumber-c;a.push({type:"button",page:u,active:u===e.currentPaginationNumber,activePrev:u+1===e.currentPaginationNumber})}return a}),o=Ci("themeColor");return(a,l)=>(P(),V("div",UZe,[(P(!0),V(Fe,null,ct(M(s),(c,u)=>(P(),V("div",{key:u,class:Ze(["item",{button:c.type==="button",active:c.type==="button"&&c.active,"active-prev":c.type==="button"&&c.activePrev,omission:c.type==="omission"}]),onClick:d=>r(c)},B(c.type==="button"?c.page:"..."),11,zZe))),128))]))}});var WZe=Du(HZe,[["__scopeId","data-v-4c681fa2"]]);const IW=n=>(Hd("data-v-c9da5286"),n=n(),Wd(),n),jZe=IW(()=>m("span",{class:"arrow arrow-right"},null,-1)),qZe=[jZe],GZe=IW(()=>m("span",{class:"arrow arrow-left"},null,-1)),KZe=[GZe],YZe=Cn({__name:"PaginationArrows",props:{isFirstPage:{type:Boolean,required:!1},isLastPage:{type:Boolean,required:!1}},emits:["clickPrevPage","clickNextPage"],setup(n,{emit:t}){const e=ml();return(i,r)=>(P(),V(Fe,null,[m("div",{class:Ze(["previous-page__click-button",{"first-page":n.isFirstPage}]),onClick:r[0]||(r[0]=s=>t("clickPrevPage"))},qZe,2),M(e).buttonsPagination?ht(i.$slots,"buttonsPagination",{key:0},void 0,!0):ne("",!0),m("div",{class:Ze(["next-page__click-button",{"last-page":n.isLastPage}]),onClick:r[1]||(r[1]=s=>t("clickNextPage"))},KZe,2)],64))}});var QZe=Du(YZe,[["__scopeId","data-v-c9da5286"]]);function ZZe(n,t,e,i){return{clickRow:(s,o,a)=>{if(n.value!==o)return;const l=qa({},s);if(t.value){const{checkbox:c}=s;delete l.checkbox,l.isSelected=c}if(e.value){const{index:c}=s;delete l.index,l.indexInCurrentPage=c}i("clickRow",l,a)}}}function JZe(n,t,e){const i=Z([]);return{expandingItemIndexList:i,updateExpandingItemIndexList:(o,a,l)=>{l.stopPropagation();const c=i.value.indexOf(o);if(c!==-1)i.value.splice(c,1);else{const u=n.value.findIndex(d=>JSON.stringify(d)===JSON.stringify(a));e("expandRow",t.value+u,a),i.value.push(t.value+u)}},clearExpandingItemIndexList:()=>{i.value=[]}}}function XZe(n){const t=le(()=>n.value.filter(r=>r.fixed)),e=le(()=>t.value.length?t.value[t.value.length-1].value:""),i=le(()=>{if(!t.value.length)return[];const r=t.value.map(s=>{var o;return(o=s.width)!=null?o:100});return t.value.map((s,o)=>{var a,l;return{value:s.value,fixed:(a=s.fixed)!=null?a:!0,width:(l=s.width)!=null?l:100,distance:o===0?0:r.reduce((c,u,d)=>{let f=c;return d<o&&(f+=u),f})}})});return{fixedHeaders:t,lastFixedColumn:e,fixedColumnsInfos:i}}function eJe(n,t,e,i,r,s,o,a,l,c,u,d,f,h,g,v,_,w,C){const k=le(()=>o.value.findIndex(H=>H.fixed)!==-1),E=le(()=>k.value?o.value.filter(H=>H.fixed):[]),A=le(()=>o.value.filter(H=>!H.fixed)),p=Z(((H,q)=>Array.isArray(H)&&Array.isArray(q)?{sortBy:H,sortDesc:q.map(N=>N==="desc")}:H!==""?{sortBy:g.value,sortDesc:v.value==="desc"}:null)(g.value,v.value)),D=le(()=>{var H;const N=[...E.value,...A.value].map(K=>{const z=Object.assign(K);if(z.sortable&&(z.sortType="none"),f.value)if(Array.isArray(f.value.sortBy)&&Array.isArray(f.value.sortType)&&f.value.sortBy.includes(z.value)){const ge=f.value.sortBy.indexOf(z.value);z.sortType=f.value.sortType[ge]}else z.value===f.value.sortBy&&f.value.sortType&&(z.sortType=f.value.sortType);if(p.value&&Array.isArray(p.value.sortBy)&&Array.isArray(p.value.sortDesc)&&p.value.sortBy.includes(z.value)){const ge=p.value.sortBy.indexOf(z.value);z.sortType=p.value.sortDesc[ge]?"desc":"asc"}else p.value&&z.value===p.value.sortBy&&(z.sortType=p.value.sortDesc?"desc":"asc");return z});let $=[];a.value?$=[r.value||k.value?{text:"",value:"expand",fixed:!0,width:e.value}:{text:"",value:"expand"},...N]:$=N;let U=[];h.value?U=[s.value||k.value?{text:n.value,value:"index",fixed:!0,width:l.value}:{text:n.value,value:"index"},...$]:U=$;let re=[];return c.value?re=[i.value||k.value?{text:"checkbox",value:"checkbox",fixed:!0,width:(H=t.value)!=null?H:36}:{text:"checkbox",value:"checkbox"},...U]:re=U,re}),R=le(()=>D.value.map(H=>H.value));return{clientSortOptions:p,headerColumns:R,headersForRender:D,updateSortField:(H,q)=>{let N=null;if(q==="none"?N="asc":q==="asc"?N="desc":N=d.value?"asc":null,u.value&&w(H,N),p.value&&Array.isArray(p.value.sortBy)&&Array.isArray(p.value.sortDesc)){const $=p.value.sortBy.indexOf(H);$===-1?N!==null&&(p.value.sortBy.push(H),p.value.sortDesc.push(N==="desc")):N===null?(p.value.sortDesc.splice($,1),p.value.sortBy.splice($,1)):p.value.sortDesc[$]=N==="desc"}else N===null?p.value=null:p.value={sortBy:H,sortDesc:N==="desc"};C("updateSort",{sortType:N,sortBy:H})},isMultiSorting:H=>f.value&&Array.isArray(f.value.sortBy)?f.value.sortBy.includes(H):p.value&&Array.isArray(p.value.sortBy)?p.value.sortBy.includes(H):!1,getMultiSortNumber:H=>f.value&&Array.isArray(f.value.sortBy)?f.value.sortBy.indexOf(H)+1:p.value&&Array.isArray(p.value.sortBy)?p.value.sortBy.indexOf(H)+1:!1}}function tJe(n,t,e,i,r,s,o,a,l){const c=le(()=>(n.value-1)*r.value+1),u=le(()=>e.value?Math.min(l.value,n.value*r.value):Math.min(a.value.length,n.value*r.value)),d=le(()=>e.value?i.value:a.value.slice(c.value-1,u.value)),f=le(()=>o.value?d.value.map((v,_)=>qa({index:c.value+_},v)):d.value),h=le(()=>s.value.length===0||s.value.every(_=>a.value.findIndex(w=>JSON.stringify(_)===JSON.stringify(w))===-1)?"noneSelected":s.value.length===a.value.length&&s.value.every(w=>a.value.findIndex(C=>JSON.stringify(w)===JSON.stringify(C))!==-1)?"allSelected":"partSelected"),g=le(()=>t.value?h.value==="allSelected"?f.value.map(v=>qa({checkbox:!0},v)):h.value==="noneSelected"?f.value.map(v=>qa({checkbox:!1},v)):f.value.map(v=>{const _=s.value.findIndex(w=>{const C=qa({},v);return delete C.index,JSON.stringify(w)===JSON.stringify(C)})!==-1;return qa({checkbox:_},v)}):f.value);return{currentPageFirstIndex:c,currentPageLastIndex:u,multipleSelectStatus:h,pageItems:g}}function nJe(n,t,e,i,r,s,o){const a=Z(s.value?s.value.page:n.value),l=le(()=>Math.ceil(i.value/r.value)),c=le(()=>l.value===0||a.value===l.value),u=le(()=>a.value===1);return{currentPaginationNumber:a,maxPaginationNumber:l,isLastPage:c,isFirstPage:u,nextPage:()=>{if(i.value!==0&&!c.value&&!e.value)if(t.value){const v=a.value+1;o(v)}else a.value+=1},prevPage:()=>{if(i.value!==0&&!u.value&&!e.value)if(t.value){const v=a.value-1;o(v)}else a.value-=1},updatePage:v=>{e.value||(t.value?o(v):a.value=v)},updateCurrentPaginationNumber:v=>{a.value=v}}}function iJe(n,t,e,i){const r=le(()=>!n.value&&t.value.findIndex(a=>a===i.value)===-1?[i.value,...t.value]:t.value),s=Z(e.value?e.value.rowsPerPage:i.value);return{rowsItemsComputed:r,rowsPerPageRef:s,updateRowsPerPage:a=>{s.value=a}}}function rJe(n,t,e){const i=le({get:()=>{if(n.value){const{page:a,rowsPerPage:l,sortBy:c,sortType:u}=n.value;return{page:a,rowsPerPage:l,sortBy:c??null,sortType:u??null}}return null},set:a=>{e("update:serverOptions",a)}});return{serverOptionsComputed:i,updateServerOptionsPage:a=>{i.value&&(i.value=Nw(qa({},i.value),{page:a}))},updateServerOptionsSort:(a,l)=>{if(i.value)if(t.value&&Array.isArray(i.value.sortBy)&&Array.isArray(i.value.sortType)){const c=i.value.sortBy.findIndex(u=>u===a);c===-1&&l!==null&&(i.value.sortBy.push(a),i.value.sortType.push(l)),l===null?(i.value.sortBy.splice(c,1),i.value.sortType.splice(c,1)):i.value.sortType[c]=l}else i.value=Nw(qa({},i.value),{sortBy:l!==null?a:null,sortType:l})},updateServerOptionsRowsPerPage:a=>{i.value&&(i.value=Nw(qa({},i.value),{page:1,rowsPerPage:a}))}}}function gs(n,t){var e;if(n.includes(".")){const i=n.split("."),{length:r}=i;let s,o=0;for(;o<r;){if(o===0)s=t[i[0]];else if(s&&typeof s=="object")s=s[i[o]];else{s="";break}o+=1}return s??""}return(e=t[n])!=null?e:""}function sJe(n,t){const e=gs(n,t);return Array.isArray(e)?e.join(","):e}function oJe(n,t,e,i,r,s,o,a,l,c){const u=k=>{if(typeof s.value=="string"&&s.value!=="")return gs(s.value,k);if(Array.isArray(s.value)){let E="";return s.value.forEach(A=>{E+=gs(A,k)}),E}return Object.values(k).join(" ")},d=le(()=>{if(!e.value&&o.value!==""){const k=new RegExp(o.value,"i");return i.value.filter(E=>k.test(u(E)))}return i.value}),f=le(()=>{let k=[...d.value];return t.value?(t.value.forEach(E=>{k=k.filter(A=>{const{field:x,comparison:p,criteria:D}=E;if(typeof p=="function")return p(gs(x,A),D);const R=gs(x,A);switch(p){case"=":return R===D;case"!=":return R!==D;case">":return R>D;case"<":return R<D;case"<=":return R<=D;case">=":return R>=D;case"between":return R>=Math.min(...D)&&R<=Math.max(...D);case"in":return D.includes(R);default:return R===D}})}),k):d.value});gt(f,k=>{t.value&&c("updateFilter",k)},{immediate:!0,deep:!0});function h(k,E,A,x){const p=k[x],D=E[x];return(x===0?A:h(k,E,A,x-1)).sort((S,I)=>{let F=!0;for(let H=0;H<x;H+=1)if(gs(k[H],S)!==gs(k[H],I)){F=!1;break}return F?gs(p,S)<gs(p,I)?D?1:-1:gs(p,S)>gs(p,I)?D?-1:1:0:0})}const g=le(()=>{if(e.value)return i.value;if(n.value===null)return f.value;const{sortBy:k,sortDesc:E}=n.value,A=[...f.value];return l&&Array.isArray(k)&&Array.isArray(E)?k.length===0?A:h(k,E,A,k.length-1):A.sort((x,p)=>gs(k,x)<gs(k,p)?E?1:-1:gs(k,x)>gs(k,p)?E?-1:1:0)}),v=le(()=>e.value?a.value:g.value.length),_=le({get:()=>{var k;return(k=r.value)!=null?k:[]},set:k=>{c("update:itemsSelected",k)}});return{totalItems:g,selectItemsComputed:_,totalItemsLength:v,toggleSelectAll:k=>{_.value=k?g.value:[],k&&c("selectAll")},toggleSelectItem:k=>{const E=k.checkbox;if(delete k.checkbox,delete k.index,E)_.value=_.value.filter(A=>JSON.stringify(A)!==JSON.stringify(k)),c("deselectRow",k);else{const A=_.value;A.unshift(k),_.value=A,c("selectRow",k)}}}}var aJe={alternating:{type:Boolean,default:!1},buttonsPagination:{type:Boolean,default:!1},checkboxColumnWidth:{type:Number,default:null},currentPage:{type:Number,default:1},emptyMessage:{type:String,default:"No Available Data"},expandColumnWidth:{type:Number,default:36},filterOptions:{type:Array,default:null},fixedExpand:{type:Boolean,default:!1},fixedHeader:{type:Boolean,default:!0},fixedCheckbox:{type:Boolean,default:!1},fixedIndex:{type:Boolean,default:!1},headerTextDirection:{type:String,default:"left"},bodyTextDirection:{type:String,default:"left"},hideFooter:{type:Boolean,default:!1},hideRowsPerPage:{type:Boolean,default:!1},hideHeader:{type:Boolean,default:!1},indexColumnWidth:{type:Number,default:60},itemsSelected:{type:Array,default:null},loading:{type:Boolean,default:!1},rowsPerPage:{type:Number,default:25},rowsItems:{type:Array,default:()=>[25,50,100]},rowsPerPageMessage:{type:String,default:"rows per page:"},searchField:{type:[String,Array],default:""},searchValue:{type:String,default:""},serverOptions:{type:Object,default:null},serverItemsLength:{type:Number,default:0},showIndex:{type:Boolean,default:!1},sortBy:{type:[String,Array],default:""},sortType:{type:[String,Array],default:"asc"},multiSort:{type:Boolean,default:!1},tableMinHeight:{type:Number,default:180},tableHeight:{type:Number,default:null},themeColor:{type:String,default:"#42b883"},tableClassName:{type:String,default:""},headerClassName:{type:String,default:""},headerItemClassName:{type:[Function,String],default:""},bodyRowClassName:{type:[Function,String],default:""},bodyExpandRowClassName:{type:[Function,String],default:""},bodyItemClassName:{type:[Function,String],default:""},noHover:{type:Boolean,default:!1},borderCell:{type:Boolean,default:!1},mustSort:{type:Boolean,default:!1},rowsOfPageSeparatorMessage:{type:String,default:"of"},clickEventType:{type:String,default:"single"},clickRowToExpand:{type:Boolean,default:!1},tableNodeId:{type:String,default:""},showIndexSymbol:{type:String,default:"#"},preventContextMenuRow:{type:Boolean,default:!0}};const lJe=n=>(Hd("data-v-32683533"),n=n(),Wd(),n),cJe=["id"],uJe=["onClick"],dJe={key:3,class:"header-text"},fJe={key:5,class:"multi-sort__number"},hJe=["onClick","onDblclick","onContextmenu"],mJe=["onClick"],gJe=["colspan"],pJe={key:0,class:"vue3-easy-data-table__loading"},vJe=lJe(()=>m("div",{class:"vue3-easy-data-table__loading-mask"},null,-1)),bJe={class:"loading-entity"},wJe={key:1,class:"vue3-easy-data-table__message"},yJe={key:0,class:"vue3-easy-data-table__footer"},_Je={key:0,class:"pagination__rows-per-page"},kJe={class:"pagination__items-index"},EJe=Cn({__name:"DataTable",props:Nw(qa({},aJe),{items:{type:Array,required:!0},headers:{type:Array,required:!0}}),emits:["clickRow","contextmenuRow","selectRow","deselectRow","expandRow","updateSort","updateFilter","update:itemsSelected","update:serverOptions","updatePageItems","updateTotalItems","selectAll"],setup(n,{expose:t,emit:e}){const i=n;ku(Ut=>({da0d4328:M(ue),"3037e504":M(Q)}));const{tableNodeId:r,clickEventType:s,bodyTextDirection:o,checkboxColumnWidth:a,currentPage:l,expandColumnWidth:c,filterOptions:u,fixedCheckbox:d,fixedExpand:f,fixedHeader:h,fixedIndex:g,headers:v,headerTextDirection:_,indexColumnWidth:w,items:C,itemsSelected:k,loading:E,mustSort:A,multiSort:x,rowsItems:p,rowsPerPage:D,searchField:R,searchValue:S,serverItemsLength:I,serverOptions:F,showIndex:H,sortBy:q,sortType:N,tableHeight:$,tableMinHeight:U,themeColor:re,rowsOfPageSeparatorMessage:K,showIndexSymbol:z,preventContextMenuRow:ge}=jS(i),Q=le(()=>$.value?`${$.value}px`:null),ue=le(()=>`${U.value}px`);Qa("themeColor",re.value);const ve=ml(),ce=le(()=>!!ve.pagination),J=le(()=>!!ve.loading),ae=le(()=>!!ve.expand),xe=le(()=>!!ve.body),he=Z(),Ae=Z();Qa("dataTable",he);const We=Z(!1);Jt(()=>{Ae.value.addEventListener("scroll",()=>{We.value=Ae.value.scrollLeft>0})});const Ee=le(()=>k.value!==null),G=le(()=>F.value!==null),{serverOptionsComputed:Y,updateServerOptionsPage:oe,updateServerOptionsSort:Ue,updateServerOptionsRowsPerPage:Oe}=rJe(F,x,e),{clientSortOptions:Le,headerColumns:Ye,headersForRender:te,updateSortField:se,isMultiSorting:pe,getMultiSortNumber:Re}=eJe(z,a,c,d,f,g,v,ae,w,Ee,G,A,Y,H,q,N,x,Ue,e),{rowsItemsComputed:Me,rowsPerPageRef:Ie,updateRowsPerPage:Se}=iJe(G,p,F,D),{totalItems:ye,selectItemsComputed:ie,totalItemsLength:_e,toggleSelectAll:Je,toggleSelectItem:ut}=oJe(Le,u,G,C,k,R,S,I,x,e),{currentPaginationNumber:ft,maxPaginationNumber:Ot,isLastPage:Qt,isFirstPage:me,nextPage:ee,prevPage:Te,updatePage:rt,updateCurrentPaginationNumber:Rt}=nJe(l,G,E,_e,Ie,F,oe),{currentPageFirstIndex:Gn,currentPageLastIndex:Kn,multipleSelectStatus:Xt,pageItems:yt}=tJe(ft,Ee,G,C,Ie,ie,H,ye,_e),Zr=le(()=>ft.value===0?0:(ft.value-1)*Ie.value),{expandingItemIndexList:ai,updateExpandingItemIndexList:Fn,clearExpandingItemIndexList:Dn}=JZe(yt,Zr,e),{fixedHeaders:zi,lastFixedColumn:Tn,fixedColumnsInfos:Or}=XZe(te),{clickRow:gn}=ZZe(s,Ee,H,e),ir=(Ut,Ds)=>{ge.value&&Ds.preventDefault(),e("contextmenuRow",Ut,Ds)},bc=Ut=>{var Ds;const $t=(Ds=Ut.width)!=null?Ds:zi.value.length?100:null;if($t)return`width: ${$t}px; min-width: ${$t}px;`},Nu=(Ut,Ds="th")=>{if(!zi.value.length)return;const $t=Or.value.find(rr=>rr.value===Ut);if($t)return`left: ${$t.distance}px;z-index: ${Ds==="th"?3:1};position: sticky;`};return gt(E,(Ut,Ds)=>{Y.value&&Ut===!1&&Ds===!0&&(Rt(Y.value.page),Dn())}),gt(Ie,Ut=>{G.value?Oe(Ut):rt(1)}),gt([S,u],()=>{G.value||rt(1)}),gt([ft,Le,R,S,u],()=>{Dn()},{deep:!0}),gt(yt,Ut=>{e("updatePageItems",Ut)},{deep:!0}),gt(ye,Ut=>{e("updateTotalItems",Ut)},{deep:!0}),t({currentPageFirstIndex:Gn,currentPageLastIndex:Kn,clientItemsLength:_e,maxPaginationNumber:Ot,currentPaginationNumber:ft,isLastPage:Qt,isFirstPage:me,nextPage:ee,prevPage:Te,updatePage:rt,rowsPerPageOptions:Me,rowsPerPageActiveOption:Ie,updateRowsPerPageActiveOption:Se}),(Ut,Ds)=>(P(),V("div",{ref_key:"dataTable",ref:he,class:Ze(["vue3-easy-data-table",[Ut.tableClassName]])},[m("div",{ref_key:"tableBody",ref:Ae,class:Ze(["vue3-easy-data-table__main",{"fixed-header":M(h),"fixed-height":M($),"show-shadow":We.value,"table-fixed":M(zi).length,hoverable:!Ut.noHover,"border-cell":Ut.borderCell}])},[m("table",{id:M(r)},[m("colgroup",null,[(P(!0),V(Fe,null,ct(M(te),($t,rr)=>(P(),V("col",{key:rr,style:Di(bc($t))},null,4))),128))]),M(ve)["customize-headers"]?ht(Ut.$slots,"customize-headers",{key:0},void 0,!0):M(te).length&&!Ut.hideHeader?(P(),V("thead",{key:1,class:Ze(["vue3-easy-data-table__header",[Ut.headerClassName]])},[m("tr",null,[(P(!0),V(Fe,null,ct(M(te),($t,rr)=>(P(),V("th",{key:rr,class:Ze([{sortable:$t.sortable,none:$t.sortable&&$t.sortType==="none",desc:$t.sortable&&$t.sortType==="desc",asc:$t.sortable&&$t.sortType==="asc",shadow:$t.value===M(Tn)},typeof Ut.headerItemClassName=="string"?Ut.headerItemClassName:Ut.headerItemClassName($t,rr+1)]),style:Di(Nu($t.value)),onClick:bt(Si=>$t.sortable&&$t.sortType?M(se)($t.value,$t.sortType):null,["stop"])},[$t.text==="checkbox"?(P(),Ge(vZe,{key:M(Xt),status:M(Xt),onChange:M(Je)},null,8,["status","onChange"])):(P(),V("span",{key:1,class:Ze(["header",`direction-${M(_)}`])},[M(ve)[`header-${$t.value}`]?ht(Ut.$slots,`header-${$t.value}`,zn(An({key:0},$t)),void 0,!0):M(ve)[`header-${$t.value.toLowerCase()}`]?ht(Ut.$slots,`header-${$t.value.toLowerCase()}`,zn(An({key:1},$t)),void 0,!0):M(ve).header?ht(Ut.$slots,"header",zn(An({key:2},$t)),void 0,!0):(P(),V("span",dJe,B($t.text),1)),$t.sortable?(P(),V("i",{key:$t.sortType?$t.sortType:"none",class:Ze(["sortType-icon",{desc:$t.sortType==="desc"}])},null,2)):ne("",!0),M(x)&&M(pe)($t.value)?(P(),V("span",fJe,B(M(Re)($t.value)),1)):ne("",!0)],2))],14,uJe))),128))])],2)):ne("",!0),M(xe)?ht(Ut.$slots,"body",zn(An({key:2},M(yt))),void 0,!0):M(Ye).length?(P(),V("tbody",{key:3,class:Ze(["vue3-easy-data-table__body",{"row-alternation":Ut.alternating}])},[ht(Ut.$slots,"body-prepend",zn(lr({items:M(yt),pagination:{isFirstPage:M(me),isLastPage:M(Qt),currentPaginationNumber:M(ft),maxPaginationNumber:M(Ot),nextPage:M(ee),prevPage:M(Te)},headers:M(te)})),void 0,!0),(P(!0),V(Fe,null,ct(M(yt),($t,rr)=>(P(),V(Fe,{key:rr},[m("tr",{class:Ze([{"even-row":(rr+1)%2===0},typeof Ut.bodyRowClassName=="string"?Ut.bodyRowClassName:Ut.bodyRowClassName($t,rr+1)]),onClick:Si=>{M(gn)($t,"single",Si),Ut.clickRowToExpand&&M(Fn)(rr+M(Zr),$t,Si)},onDblclick:Si=>{M(gn)($t,"double",Si)},onContextmenu:Si=>{ir($t,Si)}},[(P(!0),V(Fe,null,ct(M(Ye),(Si,r1)=>(P(),V("td",{key:r1,style:Di(Nu(Si,"td")),class:Ze([{shadow:Si===M(Tn),"can-expand":Si==="expand"},typeof Ut.bodyItemClassName=="string"?Ut.bodyItemClassName:Ut.bodyItemClassName(Si,rr+1),`direction-${M(o)}`]),onClick:Um=>Si==="expand"?M(Fn)(rr+M(Zr),$t,Um):null},[M(ve)[`item-${Si}`]?ht(Ut.$slots,`item-${Si}`,zn(An({key:0},$t)),void 0,!0):M(ve)[`item-${Si.toLowerCase()}`]?ht(Ut.$slots,`item-${Si.toLowerCase()}`,zn(An({key:1},$t)),void 0,!0):Si==="expand"?(P(),V("i",{key:2,class:Ze(["expand-icon",{expanding:M(ai).includes(M(Zr)+rr)}])},null,2)):Si==="checkbox"?(P(),Ge(kZe,{key:3,checked:$t[Si],onChange:Um=>M(ut)($t)},null,8,["checked","onChange"])):M(ve).item?ht(Ut.$slots,"item",zn(An({key:4},{column:Si,item:$t})),void 0,!0):(P(),V(Fe,{key:5},[fe(B(M(sJe)(Si,$t)),1)],64))],14,mJe))),128))],42,hJe),M(ae)&&M(ai).includes(rr+M(Zr))?(P(),V("tr",{key:0,class:Ze([{"even-row":(rr+1)%2===0},typeof Ut.bodyExpandRowClassName=="string"?Ut.bodyExpandRowClassName:Ut.bodyExpandRowClassName($t,rr+1)])},[m("td",{colspan:M(te).length,class:"expand"},[$t.expandLoading?(P(),Ge(FZe,{key:0,class:"expand-loading"})):ne("",!0),ht(Ut.$slots,"expand",zn(lr($t)),void 0,!0)],8,gJe)],2)):ne("",!0)],64))),128)),ht(Ut.$slots,"body-append",zn(lr({items:M(yt),pagination:{isFirstPage:M(me),isLastPage:M(Qt),currentPaginationNumber:M(ft),maxPaginationNumber:M(Ot),nextPage:M(ee),prevPage:M(Te),updatePage:M(rt)},headers:M(te)})),void 0,!0)],2)):ne("",!0)],8,cJe),M(E)?(P(),V("div",pJe,[vJe,m("div",bJe,[M(J)?ht(Ut.$slots,"loading",{key:0},void 0,!0):(P(),Ge(MZe,{key:1}))])])):ne("",!0),!M(yt).length&&!M(E)?(P(),V("div",wJe,[ht(Ut.$slots,"empty-message",{},()=>[fe(B(Ut.emptyMessage),1)],!0)])):ne("",!0)],2),Ut.hideFooter?ne("",!0):(P(),V("div",yJe,[Ut.hideRowsPerPage?ne("",!0):(P(),V("div",_Je,[fe(B(Ut.rowsPerPageMessage)+" ",1),Ce(PZe,{modelValue:M(Ie),"onUpdate:modelValue":Ds[0]||(Ds[0]=$t=>En(Ie)?Ie.value=$t:null),"rows-items":M(Me)},null,8,["modelValue","rows-items"])])),m("div",kJe,B(`${M(Gn)}–${M(Kn)}`)+" "+B(M(K))+" "+B(M(_e)),1),M(ce)?ht(Ut.$slots,"pagination",zn(An({key:1},{isFirstPage:M(me),isLastPage:M(Qt),currentPaginationNumber:M(ft),maxPaginationNumber:M(Ot),nextPage:M(ee),prevPage:M(Te)})),void 0,!0):(P(),Ge(QZe,{key:2,"is-first-page":M(me),"is-last-page":M(Qt),onClickNextPage:M(ee),onClickPrevPage:M(Te)},Wr({_:2},[Ut.buttonsPagination?{name:"buttonsPagination",fn:$e(()=>[Ce(WZe,{"current-pagination-number":M(ft),"max-pagination-number":M(Ot),onUpdatePage:M(rt)},null,8,["current-pagination-number","max-pagination-number","onUpdatePage"])]),key:"0"}:void 0]),1032,["is-first-page","is-last-page","onClickNextPage","onClickPrevPage"]))]))],2))}});var PW=Du(EJe,[["__scopeId","data-v-32683533"]]);typeof window<"u"&&window.Vue&&window.Vue.createApp({}).component("Vue3EasyDataTable",PW);var xW={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */(function(n){(function(t,e){n.exports=t.document?e(t,!0):function(i){if(!i.document)throw new Error("jQuery requires a window with a document");return e(i)}})(typeof window<"u"?window:SJ,function(t,e){var i=[],r=Object.getPrototypeOf,s=i.slice,o=i.flat?function(b){return i.flat.call(b)}:function(b){return i.concat.apply([],b)},a=i.push,l=i.indexOf,c={},u=c.toString,d=c.hasOwnProperty,f=d.toString,h=f.call(Object),g={},v=function(T){return typeof T=="function"&&typeof T.nodeType!="number"&&typeof T.item!="function"},_=function(T){return T!=null&&T===T.window},w=t.document,C={type:!0,src:!0,nonce:!0,noModule:!0};function k(b,T,O){O=O||w;var L,W,j=O.createElement("script");if(j.text=b,T)for(L in C)W=T[L]||T.getAttribute&&T.getAttribute(L),W&&j.setAttribute(L,W);O.head.appendChild(j).parentNode.removeChild(j)}function E(b){return b==null?b+"":typeof b=="object"||typeof b=="function"?c[u.call(b)]||"object":typeof b}var A="3.7.1",x=/HTML$/i,p=function(b,T){return new p.fn.init(b,T)};p.fn=p.prototype={jquery:A,constructor:p,length:0,toArray:function(){return s.call(this)},get:function(b){return b==null?s.call(this):b<0?this[b+this.length]:this[b]},pushStack:function(b){var T=p.merge(this.constructor(),b);return T.prevObject=this,T},each:function(b){return p.each(this,b)},map:function(b){return this.pushStack(p.map(this,function(T,O){return b.call(T,O,T)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(p.grep(this,function(b,T){return(T+1)%2}))},odd:function(){return this.pushStack(p.grep(this,function(b,T){return T%2}))},eq:function(b){var T=this.length,O=+b+(b<0?T:0);return this.pushStack(O>=0&&O<T?[this[O]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:i.sort,splice:i.splice},p.extend=p.fn.extend=function(){var b,T,O,L,W,j,X=arguments[0]||{},ke=1,be=arguments.length,De=!1;for(typeof X=="boolean"&&(De=X,X=arguments[ke]||{},ke++),typeof X!="object"&&!v(X)&&(X={}),ke===be&&(X=this,ke--);ke<be;ke++)if((b=arguments[ke])!=null)for(T in b)L=b[T],!(T==="__proto__"||X===L)&&(De&&L&&(p.isPlainObject(L)||(W=Array.isArray(L)))?(O=X[T],W&&!Array.isArray(O)?j=[]:!W&&!p.isPlainObject(O)?j={}:j=O,W=!1,X[T]=p.extend(De,j,L)):L!==void 0&&(X[T]=L));return X},p.extend({expando:"jQuery"+(A+Math.random()).replace(/\D/g,""),isReady:!0,error:function(b){throw new Error(b)},noop:function(){},isPlainObject:function(b){var T,O;return!b||u.call(b)!=="[object Object]"?!1:(T=r(b),T?(O=d.call(T,"constructor")&&T.constructor,typeof O=="function"&&f.call(O)===h):!0)},isEmptyObject:function(b){var T;for(T in b)return!1;return!0},globalEval:function(b,T,O){k(b,{nonce:T&&T.nonce},O)},each:function(b,T){var O,L=0;if(D(b))for(O=b.length;L<O&&T.call(b[L],L,b[L])!==!1;L++);else for(L in b)if(T.call(b[L],L,b[L])===!1)break;return b},text:function(b){var T,O="",L=0,W=b.nodeType;if(!W)for(;T=b[L++];)O+=p.text(T);return W===1||W===11?b.textContent:W===9?b.documentElement.textContent:W===3||W===4?b.nodeValue:O},makeArray:function(b,T){var O=T||[];return b!=null&&(D(Object(b))?p.merge(O,typeof b=="string"?[b]:b):a.call(O,b)),O},inArray:function(b,T,O){return T==null?-1:l.call(T,b,O)},isXMLDoc:function(b){var T=b&&b.namespaceURI,O=b&&(b.ownerDocument||b).documentElement;return!x.test(T||O&&O.nodeName||"HTML")},merge:function(b,T){for(var O=+T.length,L=0,W=b.length;L<O;L++)b[W++]=T[L];return b.length=W,b},grep:function(b,T,O){for(var L,W=[],j=0,X=b.length,ke=!O;j<X;j++)L=!T(b[j],j),L!==ke&&W.push(b[j]);return W},map:function(b,T,O){var L,W,j=0,X=[];if(D(b))for(L=b.length;j<L;j++)W=T(b[j],j,O),W!=null&&X.push(W);else for(j in b)W=T(b[j],j,O),W!=null&&X.push(W);return o(X)},guid:1,support:g}),typeof Symbol=="function"&&(p.fn[Symbol.iterator]=i[Symbol.iterator]),p.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(b,T){c["[object "+T+"]"]=T.toLowerCase()});function D(b){var T=!!b&&"length"in b&&b.length,O=E(b);return v(b)||_(b)?!1:O==="array"||T===0||typeof T=="number"&&T>0&&T-1 in b}function R(b,T){return b.nodeName&&b.nodeName.toLowerCase()===T.toLowerCase()}var S=i.pop,I=i.sort,F=i.splice,H="[\\x20\\t\\r\\n\\f]",q=new RegExp("^"+H+"+|((?:^|[^\\\\])(?:\\\\.)*)"+H+"+$","g");p.contains=function(b,T){var O=T&&T.parentNode;return b===O||!!(O&&O.nodeType===1&&(b.contains?b.contains(O):b.compareDocumentPosition&&b.compareDocumentPosition(O)&16))};var N=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function $(b,T){return T?b==="\0"?"�":b.slice(0,-1)+"\\"+b.charCodeAt(b.length-1).toString(16)+" ":"\\"+b}p.escapeSelector=function(b){return(b+"").replace(N,$)};var U=w,re=a;(function(){var b,T,O,L,W,j=re,X,ke,be,De,Qe,tt=p.expando,je=0,lt=0,rn=Gv(),On=Gv(),hn=Gv(),Rr=Gv(),dr=function(de,Pe){return de===Pe&&(W=!0),0},Pa="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",xa="(?:\\\\[\\da-fA-F]{1,6}"+H+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",_n="\\["+H+"*("+xa+")(?:"+H+"*([*^$|!~]?=)"+H+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+xa+"))|)"+H+"*\\]",$u=":("+xa+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+_n+")*)|.*)\\)|)",Nn=new RegExp(H+"+","g"),Hi=new RegExp("^"+H+"*,"+H+"*"),qm=new RegExp("^"+H+"*([>+~]|"+H+")"+H+"*"),v1=new RegExp(H+"|>"),Oa=new RegExp($u),Gm=new RegExp("^"+xa+"$"),Ra={ID:new RegExp("^#("+xa+")"),CLASS:new RegExp("^\\.("+xa+")"),TAG:new RegExp("^("+xa+"|[*])"),ATTR:new RegExp("^"+_n),PSEUDO:new RegExp("^"+$u),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+H+"*(even|odd|(([+-]|)(\\d*)n|)"+H+"*(?:([+-]|)"+H+"*(\\d+)|))"+H+"*\\)|)","i"),bool:new RegExp("^(?:"+Pa+")$","i"),needsContext:new RegExp("^"+H+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+H+"*((?:-\\d)?\\d*)"+H+"*\\)|)(?=[^-]|$)","i")},wc=/^(?:input|select|textarea|button)$/i,yc=/^h\d$/i,Co=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,b1=/[+~]/,kl=new RegExp("\\\\[\\da-fA-F]{1,6}"+H+"?|\\\\([^\\r\\n\\f])","g"),El=function(de,Pe){var He="0x"+de.slice(1)-65536;return Pe||(He<0?String.fromCharCode(He+65536):String.fromCharCode(He>>10|55296,He&1023|56320))},sj=function(){_c()},oj=Yv(function(de){return de.disabled===!0&&R(de,"fieldset")},{dir:"parentNode",next:"legend"});function aj(){try{return X.activeElement}catch{}}try{j.apply(i=s.call(U.childNodes),U.childNodes),i[U.childNodes.length].nodeType}catch{j={apply:function(Pe,He){re.apply(Pe,s.call(He))},call:function(Pe){re.apply(Pe,s.call(arguments,1))}}}function li(de,Pe,He,Ke){var et,pt,Et,Lt,Ct,bn,Zt,sn=Pe&&Pe.ownerDocument,wn=Pe?Pe.nodeType:9;if(He=He||[],typeof de!="string"||!de||wn!==1&&wn!==9&&wn!==11)return He;if(!Ke&&(_c(Pe),Pe=Pe||X,be)){if(wn!==11&&(Ct=Co.exec(de)))if(et=Ct[1]){if(wn===9)if(Et=Pe.getElementById(et)){if(Et.id===et)return j.call(He,Et),He}else return He;else if(sn&&(Et=sn.getElementById(et))&&li.contains(Pe,Et)&&Et.id===et)return j.call(He,Et),He}else{if(Ct[2])return j.apply(He,Pe.getElementsByTagName(de)),He;if((et=Ct[3])&&Pe.getElementsByClassName)return j.apply(He,Pe.getElementsByClassName(et)),He}if(!Rr[de+" "]&&(!De||!De.test(de))){if(Zt=de,sn=Pe,wn===1&&(v1.test(de)||qm.test(de))){for(sn=b1.test(de)&&w1(Pe.parentNode)||Pe,(sn!=Pe||!g.scope)&&((Lt=Pe.getAttribute("id"))?Lt=p.escapeSelector(Lt):Pe.setAttribute("id",Lt=tt)),bn=Km(de),pt=bn.length;pt--;)bn[pt]=(Lt?"#"+Lt:":scope")+" "+Kv(bn[pt]);Zt=bn.join(",")}try{return j.apply(He,sn.querySelectorAll(Zt)),He}catch{Rr(de,!0)}finally{Lt===tt&&Pe.removeAttribute("id")}}}return Bx(de.replace(q,"$1"),Pe,He,Ke)}function Gv(){var de=[];function Pe(He,Ke){return de.push(He+" ")>T.cacheLength&&delete Pe[de.shift()],Pe[He+" "]=Ke}return Pe}function Zo(de){return de[tt]=!0,de}function df(de){var Pe=X.createElement("fieldset");try{return!!de(Pe)}catch{return!1}finally{Pe.parentNode&&Pe.parentNode.removeChild(Pe),Pe=null}}function lj(de){return function(Pe){return R(Pe,"input")&&Pe.type===de}}function cj(de){return function(Pe){return(R(Pe,"input")||R(Pe,"button"))&&Pe.type===de}}function Mx(de){return function(Pe){return"form"in Pe?Pe.parentNode&&Pe.disabled===!1?"label"in Pe?"label"in Pe.parentNode?Pe.parentNode.disabled===de:Pe.disabled===de:Pe.isDisabled===de||Pe.isDisabled!==!de&&oj(Pe)===de:Pe.disabled===de:"label"in Pe?Pe.disabled===de:!1}}function Bu(de){return Zo(function(Pe){return Pe=+Pe,Zo(function(He,Ke){for(var et,pt=de([],He.length,Pe),Et=pt.length;Et--;)He[et=pt[Et]]&&(He[et]=!(Ke[et]=He[et]))})})}function w1(de){return de&&typeof de.getElementsByTagName<"u"&&de}function _c(de){var Pe,He=de?de.ownerDocument||de:U;return He==X||He.nodeType!==9||!He.documentElement||(X=He,ke=X.documentElement,be=!p.isXMLDoc(X),Qe=ke.matches||ke.webkitMatchesSelector||ke.msMatchesSelector,ke.msMatchesSelector&&U!=X&&(Pe=X.defaultView)&&Pe.top!==Pe&&Pe.addEventListener("unload",sj),g.getById=df(function(Ke){return ke.appendChild(Ke).id=p.expando,!X.getElementsByName||!X.getElementsByName(p.expando).length}),g.disconnectedMatch=df(function(Ke){return Qe.call(Ke,"*")}),g.scope=df(function(){return X.querySelectorAll(":scope")}),g.cssHas=df(function(){try{return X.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),g.getById?(T.filter.ID=function(Ke){var et=Ke.replace(kl,El);return function(pt){return pt.getAttribute("id")===et}},T.find.ID=function(Ke,et){if(typeof et.getElementById<"u"&&be){var pt=et.getElementById(Ke);return pt?[pt]:[]}}):(T.filter.ID=function(Ke){var et=Ke.replace(kl,El);return function(pt){var Et=typeof pt.getAttributeNode<"u"&&pt.getAttributeNode("id");return Et&&Et.value===et}},T.find.ID=function(Ke,et){if(typeof et.getElementById<"u"&&be){var pt,Et,Lt,Ct=et.getElementById(Ke);if(Ct){if(pt=Ct.getAttributeNode("id"),pt&&pt.value===Ke)return[Ct];for(Lt=et.getElementsByName(Ke),Et=0;Ct=Lt[Et++];)if(pt=Ct.getAttributeNode("id"),pt&&pt.value===Ke)return[Ct]}return[]}}),T.find.TAG=function(Ke,et){return typeof et.getElementsByTagName<"u"?et.getElementsByTagName(Ke):et.querySelectorAll(Ke)},T.find.CLASS=function(Ke,et){if(typeof et.getElementsByClassName<"u"&&be)return et.getElementsByClassName(Ke)},De=[],df(function(Ke){var et;ke.appendChild(Ke).innerHTML="<a id='"+tt+"' href='' disabled='disabled'></a><select id='"+tt+"-\r\\' disabled='disabled'><option selected=''></option></select>",Ke.querySelectorAll("[selected]").length||De.push("\\["+H+"*(?:value|"+Pa+")"),Ke.querySelectorAll("[id~="+tt+"-]").length||De.push("~="),Ke.querySelectorAll("a#"+tt+"+*").length||De.push(".#.+[+~]"),Ke.querySelectorAll(":checked").length||De.push(":checked"),et=X.createElement("input"),et.setAttribute("type","hidden"),Ke.appendChild(et).setAttribute("name","D"),ke.appendChild(Ke).disabled=!0,Ke.querySelectorAll(":disabled").length!==2&&De.push(":enabled",":disabled"),et=X.createElement("input"),et.setAttribute("name",""),Ke.appendChild(et),Ke.querySelectorAll("[name='']").length||De.push("\\["+H+"*name"+H+"*="+H+`*(?:''|"")`)}),g.cssHas||De.push(":has"),De=De.length&&new RegExp(De.join("|")),dr=function(Ke,et){if(Ke===et)return W=!0,0;var pt=!Ke.compareDocumentPosition-!et.compareDocumentPosition;return pt||(pt=(Ke.ownerDocument||Ke)==(et.ownerDocument||et)?Ke.compareDocumentPosition(et):1,pt&1||!g.sortDetached&&et.compareDocumentPosition(Ke)===pt?Ke===X||Ke.ownerDocument==U&&li.contains(U,Ke)?-1:et===X||et.ownerDocument==U&&li.contains(U,et)?1:L?l.call(L,Ke)-l.call(L,et):0:pt&4?-1:1)}),X}li.matches=function(de,Pe){return li(de,null,null,Pe)},li.matchesSelector=function(de,Pe){if(_c(de),be&&!Rr[Pe+" "]&&(!De||!De.test(Pe)))try{var He=Qe.call(de,Pe);if(He||g.disconnectedMatch||de.document&&de.document.nodeType!==11)return He}catch{Rr(Pe,!0)}return li(Pe,X,null,[de]).length>0},li.contains=function(de,Pe){return(de.ownerDocument||de)!=X&&_c(de),p.contains(de,Pe)},li.attr=function(de,Pe){(de.ownerDocument||de)!=X&&_c(de);var He=T.attrHandle[Pe.toLowerCase()],Ke=He&&d.call(T.attrHandle,Pe.toLowerCase())?He(de,Pe,!be):void 0;return Ke!==void 0?Ke:de.getAttribute(Pe)},li.error=function(de){throw new Error("Syntax error, unrecognized expression: "+de)},p.uniqueSort=function(de){var Pe,He=[],Ke=0,et=0;if(W=!g.sortStable,L=!g.sortStable&&s.call(de,0),I.call(de,dr),W){for(;Pe=de[et++];)Pe===de[et]&&(Ke=He.push(et));for(;Ke--;)F.call(de,He[Ke],1)}return L=null,de},p.fn.uniqueSort=function(){return this.pushStack(p.uniqueSort(s.apply(this)))},T=p.expr={cacheLength:50,createPseudo:Zo,match:Ra,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(de){return de[1]=de[1].replace(kl,El),de[3]=(de[3]||de[4]||de[5]||"").replace(kl,El),de[2]==="~="&&(de[3]=" "+de[3]+" "),de.slice(0,4)},CHILD:function(de){return de[1]=de[1].toLowerCase(),de[1].slice(0,3)==="nth"?(de[3]||li.error(de[0]),de[4]=+(de[4]?de[5]+(de[6]||1):2*(de[3]==="even"||de[3]==="odd")),de[5]=+(de[7]+de[8]||de[3]==="odd")):de[3]&&li.error(de[0]),de},PSEUDO:function(de){var Pe,He=!de[6]&&de[2];return Ra.CHILD.test(de[0])?null:(de[3]?de[2]=de[4]||de[5]||"":He&&Oa.test(He)&&(Pe=Km(He,!0))&&(Pe=He.indexOf(")",He.length-Pe)-He.length)&&(de[0]=de[0].slice(0,Pe),de[2]=He.slice(0,Pe)),de.slice(0,3))}},filter:{TAG:function(de){var Pe=de.replace(kl,El).toLowerCase();return de==="*"?function(){return!0}:function(He){return R(He,Pe)}},CLASS:function(de){var Pe=rn[de+" "];return Pe||(Pe=new RegExp("(^|"+H+")"+de+"("+H+"|$)"))&&rn(de,function(He){return Pe.test(typeof He.className=="string"&&He.className||typeof He.getAttribute<"u"&&He.getAttribute("class")||"")})},ATTR:function(de,Pe,He){return function(Ke){var et=li.attr(Ke,de);return et==null?Pe==="!=":Pe?(et+="",Pe==="="?et===He:Pe==="!="?et!==He:Pe==="^="?He&&et.indexOf(He)===0:Pe==="*="?He&&et.indexOf(He)>-1:Pe==="$="?He&&et.slice(-He.length)===He:Pe==="~="?(" "+et.replace(Nn," ")+" ").indexOf(He)>-1:Pe==="|="?et===He||et.slice(0,He.length+1)===He+"-":!1):!0}},CHILD:function(de,Pe,He,Ke,et){var pt=de.slice(0,3)!=="nth",Et=de.slice(-4)!=="last",Lt=Pe==="of-type";return Ke===1&&et===0?function(Ct){return!!Ct.parentNode}:function(Ct,bn,Zt){var sn,wn,Wt,vi,Ls,Jr=pt!==Et?"nextSibling":"previousSibling",To=Ct.parentNode,Va=Lt&&Ct.nodeName.toLowerCase(),ff=!Zt&&!Lt,fs=!1;if(To){if(pt){for(;Jr;){for(Wt=Ct;Wt=Wt[Jr];)if(Lt?R(Wt,Va):Wt.nodeType===1)return!1;Ls=Jr=de==="only"&&!Ls&&"nextSibling"}return!0}if(Ls=[Et?To.firstChild:To.lastChild],Et&&ff){for(wn=To[tt]||(To[tt]={}),sn=wn[de]||[],vi=sn[0]===je&&sn[1],fs=vi&&sn[2],Wt=vi&&To.childNodes[vi];Wt=++vi&&Wt&&Wt[Jr]||(fs=vi=0)||Ls.pop();)if(Wt.nodeType===1&&++fs&&Wt===Ct){wn[de]=[je,vi,fs];break}}else if(ff&&(wn=Ct[tt]||(Ct[tt]={}),sn=wn[de]||[],vi=sn[0]===je&&sn[1],fs=vi),fs===!1)for(;(Wt=++vi&&Wt&&Wt[Jr]||(fs=vi=0)||Ls.pop())&&!((Lt?R(Wt,Va):Wt.nodeType===1)&&++fs&&(ff&&(wn=Wt[tt]||(Wt[tt]={}),wn[de]=[je,fs]),Wt===Ct)););return fs-=et,fs===Ke||fs%Ke===0&&fs/Ke>=0}}},PSEUDO:function(de,Pe){var He,Ke=T.pseudos[de]||T.setFilters[de.toLowerCase()]||li.error("unsupported pseudo: "+de);return Ke[tt]?Ke(Pe):Ke.length>1?(He=[de,de,"",Pe],T.setFilters.hasOwnProperty(de.toLowerCase())?Zo(function(et,pt){for(var Et,Lt=Ke(et,Pe),Ct=Lt.length;Ct--;)Et=l.call(et,Lt[Ct]),et[Et]=!(pt[Et]=Lt[Ct])}):function(et){return Ke(et,0,He)}):Ke}},pseudos:{not:Zo(function(de){var Pe=[],He=[],Ke=E1(de.replace(q,"$1"));return Ke[tt]?Zo(function(et,pt,Et,Lt){for(var Ct,bn=Ke(et,null,Lt,[]),Zt=et.length;Zt--;)(Ct=bn[Zt])&&(et[Zt]=!(pt[Zt]=Ct))}):function(et,pt,Et){return Pe[0]=et,Ke(Pe,null,Et,He),Pe[0]=null,!He.pop()}}),has:Zo(function(de){return function(Pe){return li(de,Pe).length>0}}),contains:Zo(function(de){return de=de.replace(kl,El),function(Pe){return(Pe.textContent||p.text(Pe)).indexOf(de)>-1}}),lang:Zo(function(de){return Gm.test(de||"")||li.error("unsupported lang: "+de),de=de.replace(kl,El).toLowerCase(),function(Pe){var He;do if(He=be?Pe.lang:Pe.getAttribute("xml:lang")||Pe.getAttribute("lang"))return He=He.toLowerCase(),He===de||He.indexOf(de+"-")===0;while((Pe=Pe.parentNode)&&Pe.nodeType===1);return!1}}),target:function(de){var Pe=t.location&&t.location.hash;return Pe&&Pe.slice(1)===de.id},root:function(de){return de===ke},focus:function(de){return de===aj()&&X.hasFocus()&&!!(de.type||de.href||~de.tabIndex)},enabled:Mx(!1),disabled:Mx(!0),checked:function(de){return R(de,"input")&&!!de.checked||R(de,"option")&&!!de.selected},selected:function(de){return de.parentNode&&de.parentNode.selectedIndex,de.selected===!0},empty:function(de){for(de=de.firstChild;de;de=de.nextSibling)if(de.nodeType<6)return!1;return!0},parent:function(de){return!T.pseudos.empty(de)},header:function(de){return yc.test(de.nodeName)},input:function(de){return wc.test(de.nodeName)},button:function(de){return R(de,"input")&&de.type==="button"||R(de,"button")},text:function(de){var Pe;return R(de,"input")&&de.type==="text"&&((Pe=de.getAttribute("type"))==null||Pe.toLowerCase()==="text")},first:Bu(function(){return[0]}),last:Bu(function(de,Pe){return[Pe-1]}),eq:Bu(function(de,Pe,He){return[He<0?He+Pe:He]}),even:Bu(function(de,Pe){for(var He=0;He<Pe;He+=2)de.push(He);return de}),odd:Bu(function(de,Pe){for(var He=1;He<Pe;He+=2)de.push(He);return de}),lt:Bu(function(de,Pe,He){var Ke;for(He<0?Ke=He+Pe:He>Pe?Ke=Pe:Ke=He;--Ke>=0;)de.push(Ke);return de}),gt:Bu(function(de,Pe,He){for(var Ke=He<0?He+Pe:He;++Ke<Pe;)de.push(Ke);return de})}},T.pseudos.nth=T.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[b]=lj(b);for(b in{submit:!0,reset:!0})T.pseudos[b]=cj(b);function $x(){}$x.prototype=T.filters=T.pseudos,T.setFilters=new $x;function Km(de,Pe){var He,Ke,et,pt,Et,Lt,Ct,bn=On[de+" "];if(bn)return Pe?0:bn.slice(0);for(Et=de,Lt=[],Ct=T.preFilter;Et;){(!He||(Ke=Hi.exec(Et)))&&(Ke&&(Et=Et.slice(Ke[0].length)||Et),Lt.push(et=[])),He=!1,(Ke=qm.exec(Et))&&(He=Ke.shift(),et.push({value:He,type:Ke[0].replace(q," ")}),Et=Et.slice(He.length));for(pt in T.filter)(Ke=Ra[pt].exec(Et))&&(!Ct[pt]||(Ke=Ct[pt](Ke)))&&(He=Ke.shift(),et.push({value:He,type:pt,matches:Ke}),Et=Et.slice(He.length));if(!He)break}return Pe?Et.length:Et?li.error(de):On(de,Lt).slice(0)}function Kv(de){for(var Pe=0,He=de.length,Ke="";Pe<He;Pe++)Ke+=de[Pe].value;return Ke}function Yv(de,Pe,He){var Ke=Pe.dir,et=Pe.next,pt=et||Ke,Et=He&&pt==="parentNode",Lt=lt++;return Pe.first?function(Ct,bn,Zt){for(;Ct=Ct[Ke];)if(Ct.nodeType===1||Et)return de(Ct,bn,Zt);return!1}:function(Ct,bn,Zt){var sn,wn,Wt=[je,Lt];if(Zt){for(;Ct=Ct[Ke];)if((Ct.nodeType===1||Et)&&de(Ct,bn,Zt))return!0}else for(;Ct=Ct[Ke];)if(Ct.nodeType===1||Et)if(wn=Ct[tt]||(Ct[tt]={}),et&&R(Ct,et))Ct=Ct[Ke]||Ct;else{if((sn=wn[pt])&&sn[0]===je&&sn[1]===Lt)return Wt[2]=sn[2];if(wn[pt]=Wt,Wt[2]=de(Ct,bn,Zt))return!0}return!1}}function y1(de){return de.length>1?function(Pe,He,Ke){for(var et=de.length;et--;)if(!de[et](Pe,He,Ke))return!1;return!0}:de[0]}function uj(de,Pe,He){for(var Ke=0,et=Pe.length;Ke<et;Ke++)li(de,Pe[Ke],He);return He}function Qv(de,Pe,He,Ke,et){for(var pt,Et=[],Lt=0,Ct=de.length,bn=Pe!=null;Lt<Ct;Lt++)(pt=de[Lt])&&(!He||He(pt,Ke,et))&&(Et.push(pt),bn&&Pe.push(Lt));return Et}function _1(de,Pe,He,Ke,et,pt){return Ke&&!Ke[tt]&&(Ke=_1(Ke)),et&&!et[tt]&&(et=_1(et,pt)),Zo(function(Et,Lt,Ct,bn){var Zt,sn,wn,Wt,vi=[],Ls=[],Jr=Lt.length,To=Et||uj(Pe||"*",Ct.nodeType?[Ct]:Ct,[]),Va=de&&(Et||!Pe)?Qv(To,vi,de,Ct,bn):To;if(He?(Wt=et||(Et?de:Jr||Ke)?[]:Lt,He(Va,Wt,Ct,bn)):Wt=Va,Ke)for(Zt=Qv(Wt,Ls),Ke(Zt,[],Ct,bn),sn=Zt.length;sn--;)(wn=Zt[sn])&&(Wt[Ls[sn]]=!(Va[Ls[sn]]=wn));if(Et){if(et||de){if(et){for(Zt=[],sn=Wt.length;sn--;)(wn=Wt[sn])&&Zt.push(Va[sn]=wn);et(null,Wt=[],Zt,bn)}for(sn=Wt.length;sn--;)(wn=Wt[sn])&&(Zt=et?l.call(Et,wn):vi[sn])>-1&&(Et[Zt]=!(Lt[Zt]=wn))}}else Wt=Qv(Wt===Lt?Wt.splice(Jr,Wt.length):Wt),et?et(null,Lt,Wt,bn):j.apply(Lt,Wt)})}function k1(de){for(var Pe,He,Ke,et=de.length,pt=T.relative[de[0].type],Et=pt||T.relative[" "],Lt=pt?1:0,Ct=Yv(function(sn){return sn===Pe},Et,!0),bn=Yv(function(sn){return l.call(Pe,sn)>-1},Et,!0),Zt=[function(sn,wn,Wt){var vi=!pt&&(Wt||wn!=O)||((Pe=wn).nodeType?Ct(sn,wn,Wt):bn(sn,wn,Wt));return Pe=null,vi}];Lt<et;Lt++)if(He=T.relative[de[Lt].type])Zt=[Yv(y1(Zt),He)];else{if(He=T.filter[de[Lt].type].apply(null,de[Lt].matches),He[tt]){for(Ke=++Lt;Ke<et&&!T.relative[de[Ke].type];Ke++);return _1(Lt>1&&y1(Zt),Lt>1&&Kv(de.slice(0,Lt-1).concat({value:de[Lt-2].type===" "?"*":""})).replace(q,"$1"),He,Lt<Ke&&k1(de.slice(Lt,Ke)),Ke<et&&k1(de=de.slice(Ke)),Ke<et&&Kv(de))}Zt.push(He)}return y1(Zt)}function dj(de,Pe){var He=Pe.length>0,Ke=de.length>0,et=function(pt,Et,Lt,Ct,bn){var Zt,sn,wn,Wt=0,vi="0",Ls=pt&&[],Jr=[],To=O,Va=pt||Ke&&T.find.TAG("*",bn),ff=je+=To==null?1:Math.random()||.1,fs=Va.length;for(bn&&(O=Et==X||Et||bn);vi!==fs&&(Zt=Va[vi])!=null;vi++){if(Ke&&Zt){for(sn=0,!Et&&Zt.ownerDocument!=X&&(_c(Zt),Lt=!be);wn=de[sn++];)if(wn(Zt,Et||X,Lt)){j.call(Ct,Zt);break}bn&&(je=ff)}He&&((Zt=!wn&&Zt)&&Wt--,pt&&Ls.push(Zt))}if(Wt+=vi,He&&vi!==Wt){for(sn=0;wn=Pe[sn++];)wn(Ls,Jr,Et,Lt);if(pt){if(Wt>0)for(;vi--;)Ls[vi]||Jr[vi]||(Jr[vi]=S.call(Ct));Jr=Qv(Jr)}j.apply(Ct,Jr),bn&&!pt&&Jr.length>0&&Wt+Pe.length>1&&p.uniqueSort(Ct)}return bn&&(je=ff,O=To),Ls};return He?Zo(et):et}function E1(de,Pe){var He,Ke=[],et=[],pt=hn[de+" "];if(!pt){for(Pe||(Pe=Km(de)),He=Pe.length;He--;)pt=k1(Pe[He]),pt[tt]?Ke.push(pt):et.push(pt);pt=hn(de,dj(et,Ke)),pt.selector=de}return pt}function Bx(de,Pe,He,Ke){var et,pt,Et,Lt,Ct,bn=typeof de=="function"&&de,Zt=!Ke&&Km(de=bn.selector||de);if(He=He||[],Zt.length===1){if(pt=Zt[0]=Zt[0].slice(0),pt.length>2&&(Et=pt[0]).type==="ID"&&Pe.nodeType===9&&be&&T.relative[pt[1].type]){if(Pe=(T.find.ID(Et.matches[0].replace(kl,El),Pe)||[])[0],Pe)bn&&(Pe=Pe.parentNode);else return He;de=de.slice(pt.shift().value.length)}for(et=Ra.needsContext.test(de)?0:pt.length;et--&&(Et=pt[et],!T.relative[Lt=Et.type]);)if((Ct=T.find[Lt])&&(Ke=Ct(Et.matches[0].replace(kl,El),b1.test(pt[0].type)&&w1(Pe.parentNode)||Pe))){if(pt.splice(et,1),de=Ke.length&&Kv(pt),!de)return j.apply(He,Ke),He;break}}return(bn||E1(de,Zt))(Ke,Pe,!be,He,!Pe||b1.test(de)&&w1(Pe.parentNode)||Pe),He}g.sortStable=tt.split("").sort(dr).join("")===tt,_c(),g.sortDetached=df(function(de){return de.compareDocumentPosition(X.createElement("fieldset"))&1}),p.find=li,p.expr[":"]=p.expr.pseudos,p.unique=p.uniqueSort,li.compile=E1,li.select=Bx,li.setDocument=_c,li.tokenize=Km,li.escape=p.escapeSelector,li.getText=p.text,li.isXML=p.isXMLDoc,li.selectors=p.expr,li.support=p.support,li.uniqueSort=p.uniqueSort})();var K=function(b,T,O){for(var L=[],W=O!==void 0;(b=b[T])&&b.nodeType!==9;)if(b.nodeType===1){if(W&&p(b).is(O))break;L.push(b)}return L},z=function(b,T){for(var O=[];b;b=b.nextSibling)b.nodeType===1&&b!==T&&O.push(b);return O},ge=p.expr.match.needsContext,Q=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function ue(b,T,O){return v(T)?p.grep(b,function(L,W){return!!T.call(L,W,L)!==O}):T.nodeType?p.grep(b,function(L){return L===T!==O}):typeof T!="string"?p.grep(b,function(L){return l.call(T,L)>-1!==O}):p.filter(T,b,O)}p.filter=function(b,T,O){var L=T[0];return O&&(b=":not("+b+")"),T.length===1&&L.nodeType===1?p.find.matchesSelector(L,b)?[L]:[]:p.find.matches(b,p.grep(T,function(W){return W.nodeType===1}))},p.fn.extend({find:function(b){var T,O,L=this.length,W=this;if(typeof b!="string")return this.pushStack(p(b).filter(function(){for(T=0;T<L;T++)if(p.contains(W[T],this))return!0}));for(O=this.pushStack([]),T=0;T<L;T++)p.find(b,W[T],O);return L>1?p.uniqueSort(O):O},filter:function(b){return this.pushStack(ue(this,b||[],!1))},not:function(b){return this.pushStack(ue(this,b||[],!0))},is:function(b){return!!ue(this,typeof b=="string"&&ge.test(b)?p(b):b||[],!1).length}});var ve,ce=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,J=p.fn.init=function(b,T,O){var L,W;if(!b)return this;if(O=O||ve,typeof b=="string")if(b[0]==="<"&&b[b.length-1]===">"&&b.length>=3?L=[null,b,null]:L=ce.exec(b),L&&(L[1]||!T))if(L[1]){if(T=T instanceof p?T[0]:T,p.merge(this,p.parseHTML(L[1],T&&T.nodeType?T.ownerDocument||T:w,!0)),Q.test(L[1])&&p.isPlainObject(T))for(L in T)v(this[L])?this[L](T[L]):this.attr(L,T[L]);return this}else return W=w.getElementById(L[2]),W&&(this[0]=W,this.length=1),this;else return!T||T.jquery?(T||O).find(b):this.constructor(T).find(b);else{if(b.nodeType)return this[0]=b,this.length=1,this;if(v(b))return O.ready!==void 0?O.ready(b):b(p)}return p.makeArray(b,this)};J.prototype=p.fn,ve=p(w);var ae=/^(?:parents|prev(?:Until|All))/,xe={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({has:function(b){var T=p(b,this),O=T.length;return this.filter(function(){for(var L=0;L<O;L++)if(p.contains(this,T[L]))return!0})},closest:function(b,T){var O,L=0,W=this.length,j=[],X=typeof b!="string"&&p(b);if(!ge.test(b)){for(;L<W;L++)for(O=this[L];O&&O!==T;O=O.parentNode)if(O.nodeType<11&&(X?X.index(O)>-1:O.nodeType===1&&p.find.matchesSelector(O,b))){j.push(O);break}}return this.pushStack(j.length>1?p.uniqueSort(j):j)},index:function(b){return b?typeof b=="string"?l.call(p(b),this[0]):l.call(this,b.jquery?b[0]:b):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(b,T){return this.pushStack(p.uniqueSort(p.merge(this.get(),p(b,T))))},addBack:function(b){return this.add(b==null?this.prevObject:this.prevObject.filter(b))}});function he(b,T){for(;(b=b[T])&&b.nodeType!==1;);return b}p.each({parent:function(b){var T=b.parentNode;return T&&T.nodeType!==11?T:null},parents:function(b){return K(b,"parentNode")},parentsUntil:function(b,T,O){return K(b,"parentNode",O)},next:function(b){return he(b,"nextSibling")},prev:function(b){return he(b,"previousSibling")},nextAll:function(b){return K(b,"nextSibling")},prevAll:function(b){return K(b,"previousSibling")},nextUntil:function(b,T,O){return K(b,"nextSibling",O)},prevUntil:function(b,T,O){return K(b,"previousSibling",O)},siblings:function(b){return z((b.parentNode||{}).firstChild,b)},children:function(b){return z(b.firstChild)},contents:function(b){return b.contentDocument!=null&&r(b.contentDocument)?b.contentDocument:(R(b,"template")&&(b=b.content||b),p.merge([],b.childNodes))}},function(b,T){p.fn[b]=function(O,L){var W=p.map(this,T,O);return b.slice(-5)!=="Until"&&(L=O),L&&typeof L=="string"&&(W=p.filter(L,W)),this.length>1&&(xe[b]||p.uniqueSort(W),ae.test(b)&&W.reverse()),this.pushStack(W)}});var Ae=/[^\x20\t\r\n\f]+/g;function We(b){var T={};return p.each(b.match(Ae)||[],function(O,L){T[L]=!0}),T}p.Callbacks=function(b){b=typeof b=="string"?We(b):p.extend({},b);var T,O,L,W,j=[],X=[],ke=-1,be=function(){for(W=W||b.once,L=T=!0;X.length;ke=-1)for(O=X.shift();++ke<j.length;)j[ke].apply(O[0],O[1])===!1&&b.stopOnFalse&&(ke=j.length,O=!1);b.memory||(O=!1),T=!1,W&&(O?j=[]:j="")},De={add:function(){return j&&(O&&!T&&(ke=j.length-1,X.push(O)),function Qe(tt){p.each(tt,function(je,lt){v(lt)?(!b.unique||!De.has(lt))&&j.push(lt):lt&&lt.length&&E(lt)!=="string"&&Qe(lt)})}(arguments),O&&!T&&be()),this},remove:function(){return p.each(arguments,function(Qe,tt){for(var je;(je=p.inArray(tt,j,je))>-1;)j.splice(je,1),je<=ke&&ke--}),this},has:function(Qe){return Qe?p.inArray(Qe,j)>-1:j.length>0},empty:function(){return j&&(j=[]),this},disable:function(){return W=X=[],j=O="",this},disabled:function(){return!j},lock:function(){return W=X=[],!O&&!T&&(j=O=""),this},locked:function(){return!!W},fireWith:function(Qe,tt){return W||(tt=tt||[],tt=[Qe,tt.slice?tt.slice():tt],X.push(tt),T||be()),this},fire:function(){return De.fireWith(this,arguments),this},fired:function(){return!!L}};return De};function Ee(b){return b}function G(b){throw b}function Y(b,T,O,L){var W;try{b&&v(W=b.promise)?W.call(b).done(T).fail(O):b&&v(W=b.then)?W.call(b,T,O):T.apply(void 0,[b].slice(L))}catch(j){O.apply(void 0,[j])}}p.extend({Deferred:function(b){var T=[["notify","progress",p.Callbacks("memory"),p.Callbacks("memory"),2],["resolve","done",p.Callbacks("once memory"),p.Callbacks("once memory"),0,"resolved"],["reject","fail",p.Callbacks("once memory"),p.Callbacks("once memory"),1,"rejected"]],O="pending",L={state:function(){return O},always:function(){return W.done(arguments).fail(arguments),this},catch:function(j){return L.then(null,j)},pipe:function(){var j=arguments;return p.Deferred(function(X){p.each(T,function(ke,be){var De=v(j[be[4]])&&j[be[4]];W[be[1]](function(){var Qe=De&&De.apply(this,arguments);Qe&&v(Qe.promise)?Qe.promise().progress(X.notify).done(X.resolve).fail(X.reject):X[be[0]+"With"](this,De?[Qe]:arguments)})}),j=null}).promise()},then:function(j,X,ke){var be=0;function De(Qe,tt,je,lt){return function(){var rn=this,On=arguments,hn=function(){var dr,Pa;if(!(Qe<be)){if(dr=je.apply(rn,On),dr===tt.promise())throw new TypeError("Thenable self-resolution");Pa=dr&&(typeof dr=="object"||typeof dr=="function")&&dr.then,v(Pa)?lt?Pa.call(dr,De(be,tt,Ee,lt),De(be,tt,G,lt)):(be++,Pa.call(dr,De(be,tt,Ee,lt),De(be,tt,G,lt),De(be,tt,Ee,tt.notifyWith))):(je!==Ee&&(rn=void 0,On=[dr]),(lt||tt.resolveWith)(rn,On))}},Rr=lt?hn:function(){try{hn()}catch(dr){p.Deferred.exceptionHook&&p.Deferred.exceptionHook(dr,Rr.error),Qe+1>=be&&(je!==G&&(rn=void 0,On=[dr]),tt.rejectWith(rn,On))}};Qe?Rr():(p.Deferred.getErrorHook?Rr.error=p.Deferred.getErrorHook():p.Deferred.getStackHook&&(Rr.error=p.Deferred.getStackHook()),t.setTimeout(Rr))}}return p.Deferred(function(Qe){T[0][3].add(De(0,Qe,v(ke)?ke:Ee,Qe.notifyWith)),T[1][3].add(De(0,Qe,v(j)?j:Ee)),T[2][3].add(De(0,Qe,v(X)?X:G))}).promise()},promise:function(j){return j!=null?p.extend(j,L):L}},W={};return p.each(T,function(j,X){var ke=X[2],be=X[5];L[X[1]]=ke.add,be&&ke.add(function(){O=be},T[3-j][2].disable,T[3-j][3].disable,T[0][2].lock,T[0][3].lock),ke.add(X[3].fire),W[X[0]]=function(){return W[X[0]+"With"](this===W?void 0:this,arguments),this},W[X[0]+"With"]=ke.fireWith}),L.promise(W),b&&b.call(W,W),W},when:function(b){var T=arguments.length,O=T,L=Array(O),W=s.call(arguments),j=p.Deferred(),X=function(ke){return function(be){L[ke]=this,W[ke]=arguments.length>1?s.call(arguments):be,--T||j.resolveWith(L,W)}};if(T<=1&&(Y(b,j.done(X(O)).resolve,j.reject,!T),j.state()==="pending"||v(W[O]&&W[O].then)))return j.then();for(;O--;)Y(W[O],X(O),j.reject);return j.promise()}});var oe=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;p.Deferred.exceptionHook=function(b,T){t.console&&t.console.warn&&b&&oe.test(b.name)&&t.console.warn("jQuery.Deferred exception: "+b.message,b.stack,T)},p.readyException=function(b){t.setTimeout(function(){throw b})};var Ue=p.Deferred();p.fn.ready=function(b){return Ue.then(b).catch(function(T){p.readyException(T)}),this},p.extend({isReady:!1,readyWait:1,ready:function(b){(b===!0?--p.readyWait:p.isReady)||(p.isReady=!0,!(b!==!0&&--p.readyWait>0)&&Ue.resolveWith(w,[p]))}}),p.ready.then=Ue.then;function Oe(){w.removeEventListener("DOMContentLoaded",Oe),t.removeEventListener("load",Oe),p.ready()}w.readyState==="complete"||w.readyState!=="loading"&&!w.documentElement.doScroll?t.setTimeout(p.ready):(w.addEventListener("DOMContentLoaded",Oe),t.addEventListener("load",Oe));var Le=function(b,T,O,L,W,j,X){var ke=0,be=b.length,De=O==null;if(E(O)==="object"){W=!0;for(ke in O)Le(b,T,ke,O[ke],!0,j,X)}else if(L!==void 0&&(W=!0,v(L)||(X=!0),De&&(X?(T.call(b,L),T=null):(De=T,T=function(Qe,tt,je){return De.call(p(Qe),je)})),T))for(;ke<be;ke++)T(b[ke],O,X?L:L.call(b[ke],ke,T(b[ke],O)));return W?b:De?T.call(b):be?T(b[0],O):j},Ye=/^-ms-/,te=/-([a-z])/g;function se(b,T){return T.toUpperCase()}function pe(b){return b.replace(Ye,"ms-").replace(te,se)}var Re=function(b){return b.nodeType===1||b.nodeType===9||!+b.nodeType};function Me(){this.expando=p.expando+Me.uid++}Me.uid=1,Me.prototype={cache:function(b){var T=b[this.expando];return T||(T={},Re(b)&&(b.nodeType?b[this.expando]=T:Object.defineProperty(b,this.expando,{value:T,configurable:!0}))),T},set:function(b,T,O){var L,W=this.cache(b);if(typeof T=="string")W[pe(T)]=O;else for(L in T)W[pe(L)]=T[L];return W},get:function(b,T){return T===void 0?this.cache(b):b[this.expando]&&b[this.expando][pe(T)]},access:function(b,T,O){return T===void 0||T&&typeof T=="string"&&O===void 0?this.get(b,T):(this.set(b,T,O),O!==void 0?O:T)},remove:function(b,T){var O,L=b[this.expando];if(L!==void 0){if(T!==void 0)for(Array.isArray(T)?T=T.map(pe):(T=pe(T),T=T in L?[T]:T.match(Ae)||[]),O=T.length;O--;)delete L[T[O]];(T===void 0||p.isEmptyObject(L))&&(b.nodeType?b[this.expando]=void 0:delete b[this.expando])}},hasData:function(b){var T=b[this.expando];return T!==void 0&&!p.isEmptyObject(T)}};var Ie=new Me,Se=new Me,ye=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ie=/[A-Z]/g;function _e(b){return b==="true"?!0:b==="false"?!1:b==="null"?null:b===+b+""?+b:ye.test(b)?JSON.parse(b):b}function Je(b,T,O){var L;if(O===void 0&&b.nodeType===1)if(L="data-"+T.replace(ie,"-$&").toLowerCase(),O=b.getAttribute(L),typeof O=="string"){try{O=_e(O)}catch{}Se.set(b,T,O)}else O=void 0;return O}p.extend({hasData:function(b){return Se.hasData(b)||Ie.hasData(b)},data:function(b,T,O){return Se.access(b,T,O)},removeData:function(b,T){Se.remove(b,T)},_data:function(b,T,O){return Ie.access(b,T,O)},_removeData:function(b,T){Ie.remove(b,T)}}),p.fn.extend({data:function(b,T){var O,L,W,j=this[0],X=j&&j.attributes;if(b===void 0){if(this.length&&(W=Se.get(j),j.nodeType===1&&!Ie.get(j,"hasDataAttrs"))){for(O=X.length;O--;)X[O]&&(L=X[O].name,L.indexOf("data-")===0&&(L=pe(L.slice(5)),Je(j,L,W[L])));Ie.set(j,"hasDataAttrs",!0)}return W}return typeof b=="object"?this.each(function(){Se.set(this,b)}):Le(this,function(ke){var be;if(j&&ke===void 0)return be=Se.get(j,b),be!==void 0||(be=Je(j,b),be!==void 0)?be:void 0;this.each(function(){Se.set(this,b,ke)})},null,T,arguments.length>1,null,!0)},removeData:function(b){return this.each(function(){Se.remove(this,b)})}}),p.extend({queue:function(b,T,O){var L;if(b)return T=(T||"fx")+"queue",L=Ie.get(b,T),O&&(!L||Array.isArray(O)?L=Ie.access(b,T,p.makeArray(O)):L.push(O)),L||[]},dequeue:function(b,T){T=T||"fx";var O=p.queue(b,T),L=O.length,W=O.shift(),j=p._queueHooks(b,T),X=function(){p.dequeue(b,T)};W==="inprogress"&&(W=O.shift(),L--),W&&(T==="fx"&&O.unshift("inprogress"),delete j.stop,W.call(b,X,j)),!L&&j&&j.empty.fire()},_queueHooks:function(b,T){var O=T+"queueHooks";return Ie.get(b,O)||Ie.access(b,O,{empty:p.Callbacks("once memory").add(function(){Ie.remove(b,[T+"queue",O])})})}}),p.fn.extend({queue:function(b,T){var O=2;return typeof b!="string"&&(T=b,b="fx",O--),arguments.length<O?p.queue(this[0],b):T===void 0?this:this.each(function(){var L=p.queue(this,b,T);p._queueHooks(this,b),b==="fx"&&L[0]!=="inprogress"&&p.dequeue(this,b)})},dequeue:function(b){return this.each(function(){p.dequeue(this,b)})},clearQueue:function(b){return this.queue(b||"fx",[])},promise:function(b,T){var O,L=1,W=p.Deferred(),j=this,X=this.length,ke=function(){--L||W.resolveWith(j,[j])};for(typeof b!="string"&&(T=b,b=void 0),b=b||"fx";X--;)O=Ie.get(j[X],b+"queueHooks"),O&&O.empty&&(L++,O.empty.add(ke));return ke(),W.promise(T)}});var ut=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ft=new RegExp("^(?:([+-])=|)("+ut+")([a-z%]*)$","i"),Ot=["Top","Right","Bottom","Left"],Qt=w.documentElement,me=function(b){return p.contains(b.ownerDocument,b)},ee={composed:!0};Qt.getRootNode&&(me=function(b){return p.contains(b.ownerDocument,b)||b.getRootNode(ee)===b.ownerDocument});var Te=function(b,T){return b=T||b,b.style.display==="none"||b.style.display===""&&me(b)&&p.css(b,"display")==="none"};function rt(b,T,O,L){var W,j,X=20,ke=L?function(){return L.cur()}:function(){return p.css(b,T,"")},be=ke(),De=O&&O[3]||(p.cssNumber[T]?"":"px"),Qe=b.nodeType&&(p.cssNumber[T]||De!=="px"&&+be)&&ft.exec(p.css(b,T));if(Qe&&Qe[3]!==De){for(be=be/2,De=De||Qe[3],Qe=+be||1;X--;)p.style(b,T,Qe+De),(1-j)*(1-(j=ke()/be||.5))<=0&&(X=0),Qe=Qe/j;Qe=Qe*2,p.style(b,T,Qe+De),O=O||[]}return O&&(Qe=+Qe||+be||0,W=O[1]?Qe+(O[1]+1)*O[2]:+O[2],L&&(L.unit=De,L.start=Qe,L.end=W)),W}var Rt={};function Gn(b){var T,O=b.ownerDocument,L=b.nodeName,W=Rt[L];return W||(T=O.body.appendChild(O.createElement(L)),W=p.css(T,"display"),T.parentNode.removeChild(T),W==="none"&&(W="block"),Rt[L]=W,W)}function Kn(b,T){for(var O,L,W=[],j=0,X=b.length;j<X;j++)L=b[j],L.style&&(O=L.style.display,T?(O==="none"&&(W[j]=Ie.get(L,"display")||null,W[j]||(L.style.display="")),L.style.display===""&&Te(L)&&(W[j]=Gn(L))):O!=="none"&&(W[j]="none",Ie.set(L,"display",O)));for(j=0;j<X;j++)W[j]!=null&&(b[j].style.display=W[j]);return b}p.fn.extend({show:function(){return Kn(this,!0)},hide:function(){return Kn(this)},toggle:function(b){return typeof b=="boolean"?b?this.show():this.hide():this.each(function(){Te(this)?p(this).show():p(this).hide()})}});var Xt=/^(?:checkbox|radio)$/i,yt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Zr=/^$|^module$|\/(?:java|ecma)script/i;(function(){var b=w.createDocumentFragment(),T=b.appendChild(w.createElement("div")),O=w.createElement("input");O.setAttribute("type","radio"),O.setAttribute("checked","checked"),O.setAttribute("name","t"),T.appendChild(O),g.checkClone=T.cloneNode(!0).cloneNode(!0).lastChild.checked,T.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!T.cloneNode(!0).lastChild.defaultValue,T.innerHTML="<option></option>",g.option=!!T.lastChild})();var ai={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ai.tbody=ai.tfoot=ai.colgroup=ai.caption=ai.thead,ai.th=ai.td,g.option||(ai.optgroup=ai.option=[1,"<select multiple='multiple'>","</select>"]);function Fn(b,T){var O;return typeof b.getElementsByTagName<"u"?O=b.getElementsByTagName(T||"*"):typeof b.querySelectorAll<"u"?O=b.querySelectorAll(T||"*"):O=[],T===void 0||T&&R(b,T)?p.merge([b],O):O}function Dn(b,T){for(var O=0,L=b.length;O<L;O++)Ie.set(b[O],"globalEval",!T||Ie.get(T[O],"globalEval"))}var zi=/<|&#?\w+;/;function Tn(b,T,O,L,W){for(var j,X,ke,be,De,Qe,tt=T.createDocumentFragment(),je=[],lt=0,rn=b.length;lt<rn;lt++)if(j=b[lt],j||j===0)if(E(j)==="object")p.merge(je,j.nodeType?[j]:j);else if(!zi.test(j))je.push(T.createTextNode(j));else{for(X=X||tt.appendChild(T.createElement("div")),ke=(yt.exec(j)||["",""])[1].toLowerCase(),be=ai[ke]||ai._default,X.innerHTML=be[1]+p.htmlPrefilter(j)+be[2],Qe=be[0];Qe--;)X=X.lastChild;p.merge(je,X.childNodes),X=tt.firstChild,X.textContent=""}for(tt.textContent="",lt=0;j=je[lt++];){if(L&&p.inArray(j,L)>-1){W&&W.push(j);continue}if(De=me(j),X=Fn(tt.appendChild(j),"script"),De&&Dn(X),O)for(Qe=0;j=X[Qe++];)Zr.test(j.type||"")&&O.push(j)}return tt}var Or=/^([^.]*)(?:\.(.+)|)/;function gn(){return!0}function ir(){return!1}function bc(b,T,O,L,W,j){var X,ke;if(typeof T=="object"){typeof O!="string"&&(L=L||O,O=void 0);for(ke in T)bc(b,ke,O,L,T[ke],j);return b}if(L==null&&W==null?(W=O,L=O=void 0):W==null&&(typeof O=="string"?(W=L,L=void 0):(W=L,L=O,O=void 0)),W===!1)W=ir;else if(!W)return b;return j===1&&(X=W,W=function(be){return p().off(be),X.apply(this,arguments)},W.guid=X.guid||(X.guid=p.guid++)),b.each(function(){p.event.add(this,T,W,L,O)})}p.event={global:{},add:function(b,T,O,L,W){var j,X,ke,be,De,Qe,tt,je,lt,rn,On,hn=Ie.get(b);if(Re(b))for(O.handler&&(j=O,O=j.handler,W=j.selector),W&&p.find.matchesSelector(Qt,W),O.guid||(O.guid=p.guid++),(be=hn.events)||(be=hn.events=Object.create(null)),(X=hn.handle)||(X=hn.handle=function(Rr){return typeof p<"u"&&p.event.triggered!==Rr.type?p.event.dispatch.apply(b,arguments):void 0}),T=(T||"").match(Ae)||[""],De=T.length;De--;)ke=Or.exec(T[De])||[],lt=On=ke[1],rn=(ke[2]||"").split(".").sort(),lt&&(tt=p.event.special[lt]||{},lt=(W?tt.delegateType:tt.bindType)||lt,tt=p.event.special[lt]||{},Qe=p.extend({type:lt,origType:On,data:L,handler:O,guid:O.guid,selector:W,needsContext:W&&p.expr.match.needsContext.test(W),namespace:rn.join(".")},j),(je=be[lt])||(je=be[lt]=[],je.delegateCount=0,(!tt.setup||tt.setup.call(b,L,rn,X)===!1)&&b.addEventListener&&b.addEventListener(lt,X)),tt.add&&(tt.add.call(b,Qe),Qe.handler.guid||(Qe.handler.guid=O.guid)),W?je.splice(je.delegateCount++,0,Qe):je.push(Qe),p.event.global[lt]=!0)},remove:function(b,T,O,L,W){var j,X,ke,be,De,Qe,tt,je,lt,rn,On,hn=Ie.hasData(b)&&Ie.get(b);if(!(!hn||!(be=hn.events))){for(T=(T||"").match(Ae)||[""],De=T.length;De--;){if(ke=Or.exec(T[De])||[],lt=On=ke[1],rn=(ke[2]||"").split(".").sort(),!lt){for(lt in be)p.event.remove(b,lt+T[De],O,L,!0);continue}for(tt=p.event.special[lt]||{},lt=(L?tt.delegateType:tt.bindType)||lt,je=be[lt]||[],ke=ke[2]&&new RegExp("(^|\\.)"+rn.join("\\.(?:.*\\.|)")+"(\\.|$)"),X=j=je.length;j--;)Qe=je[j],(W||On===Qe.origType)&&(!O||O.guid===Qe.guid)&&(!ke||ke.test(Qe.namespace))&&(!L||L===Qe.selector||L==="**"&&Qe.selector)&&(je.splice(j,1),Qe.selector&&je.delegateCount--,tt.remove&&tt.remove.call(b,Qe));X&&!je.length&&((!tt.teardown||tt.teardown.call(b,rn,hn.handle)===!1)&&p.removeEvent(b,lt,hn.handle),delete be[lt])}p.isEmptyObject(be)&&Ie.remove(b,"handle events")}},dispatch:function(b){var T,O,L,W,j,X,ke=new Array(arguments.length),be=p.event.fix(b),De=(Ie.get(this,"events")||Object.create(null))[be.type]||[],Qe=p.event.special[be.type]||{};for(ke[0]=be,T=1;T<arguments.length;T++)ke[T]=arguments[T];if(be.delegateTarget=this,!(Qe.preDispatch&&Qe.preDispatch.call(this,be)===!1)){for(X=p.event.handlers.call(this,be,De),T=0;(W=X[T++])&&!be.isPropagationStopped();)for(be.currentTarget=W.elem,O=0;(j=W.handlers[O++])&&!be.isImmediatePropagationStopped();)(!be.rnamespace||j.namespace===!1||be.rnamespace.test(j.namespace))&&(be.handleObj=j,be.data=j.data,L=((p.event.special[j.origType]||{}).handle||j.handler).apply(W.elem,ke),L!==void 0&&(be.result=L)===!1&&(be.preventDefault(),be.stopPropagation()));return Qe.postDispatch&&Qe.postDispatch.call(this,be),be.result}},handlers:function(b,T){var O,L,W,j,X,ke=[],be=T.delegateCount,De=b.target;if(be&&De.nodeType&&!(b.type==="click"&&b.button>=1)){for(;De!==this;De=De.parentNode||this)if(De.nodeType===1&&!(b.type==="click"&&De.disabled===!0)){for(j=[],X={},O=0;O<be;O++)L=T[O],W=L.selector+" ",X[W]===void 0&&(X[W]=L.needsContext?p(W,this).index(De)>-1:p.find(W,this,null,[De]).length),X[W]&&j.push(L);j.length&&ke.push({elem:De,handlers:j})}}return De=this,be<T.length&&ke.push({elem:De,handlers:T.slice(be)}),ke},addProp:function(b,T){Object.defineProperty(p.Event.prototype,b,{enumerable:!0,configurable:!0,get:v(T)?function(){if(this.originalEvent)return T(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[b]},set:function(O){Object.defineProperty(this,b,{enumerable:!0,configurable:!0,writable:!0,value:O})}})},fix:function(b){return b[p.expando]?b:new p.Event(b)},special:{load:{noBubble:!0},click:{setup:function(b){var T=this||b;return Xt.test(T.type)&&T.click&&R(T,"input")&&Nu(T,"click",!0),!1},trigger:function(b){var T=this||b;return Xt.test(T.type)&&T.click&&R(T,"input")&&Nu(T,"click"),!0},_default:function(b){var T=b.target;return Xt.test(T.type)&&T.click&&R(T,"input")&&Ie.get(T,"click")||R(T,"a")}},beforeunload:{postDispatch:function(b){b.result!==void 0&&b.originalEvent&&(b.originalEvent.returnValue=b.result)}}}};function Nu(b,T,O){if(!O){Ie.get(b,T)===void 0&&p.event.add(b,T,gn);return}Ie.set(b,T,!1),p.event.add(b,T,{namespace:!1,handler:function(L){var W,j=Ie.get(this,T);if(L.isTrigger&1&&this[T]){if(j)(p.event.special[T]||{}).delegateType&&L.stopPropagation();else if(j=s.call(arguments),Ie.set(this,T,j),this[T](),W=Ie.get(this,T),Ie.set(this,T,!1),j!==W)return L.stopImmediatePropagation(),L.preventDefault(),W}else j&&(Ie.set(this,T,p.event.trigger(j[0],j.slice(1),this)),L.stopPropagation(),L.isImmediatePropagationStopped=gn)}})}p.removeEvent=function(b,T,O){b.removeEventListener&&b.removeEventListener(T,O)},p.Event=function(b,T){if(!(this instanceof p.Event))return new p.Event(b,T);b&&b.type?(this.originalEvent=b,this.type=b.type,this.isDefaultPrevented=b.defaultPrevented||b.defaultPrevented===void 0&&b.returnValue===!1?gn:ir,this.target=b.target&&b.target.nodeType===3?b.target.parentNode:b.target,this.currentTarget=b.currentTarget,this.relatedTarget=b.relatedTarget):this.type=b,T&&p.extend(this,T),this.timeStamp=b&&b.timeStamp||Date.now(),this[p.expando]=!0},p.Event.prototype={constructor:p.Event,isDefaultPrevented:ir,isPropagationStopped:ir,isImmediatePropagationStopped:ir,isSimulated:!1,preventDefault:function(){var b=this.originalEvent;this.isDefaultPrevented=gn,b&&!this.isSimulated&&b.preventDefault()},stopPropagation:function(){var b=this.originalEvent;this.isPropagationStopped=gn,b&&!this.isSimulated&&b.stopPropagation()},stopImmediatePropagation:function(){var b=this.originalEvent;this.isImmediatePropagationStopped=gn,b&&!this.isSimulated&&b.stopImmediatePropagation(),this.stopPropagation()}},p.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},p.event.addProp),p.each({focus:"focusin",blur:"focusout"},function(b,T){function O(L){if(w.documentMode){var W=Ie.get(this,"handle"),j=p.event.fix(L);j.type=L.type==="focusin"?"focus":"blur",j.isSimulated=!0,W(L),j.target===j.currentTarget&&W(j)}else p.event.simulate(T,L.target,p.event.fix(L))}p.event.special[b]={setup:function(){var L;if(Nu(this,b,!0),w.documentMode)L=Ie.get(this,T),L||this.addEventListener(T,O),Ie.set(this,T,(L||0)+1);else return!1},trigger:function(){return Nu(this,b),!0},teardown:function(){var L;if(w.documentMode)L=Ie.get(this,T)-1,L?Ie.set(this,T,L):(this.removeEventListener(T,O),Ie.remove(this,T));else return!1},_default:function(L){return Ie.get(L.target,b)},delegateType:T},p.event.special[T]={setup:function(){var L=this.ownerDocument||this.document||this,W=w.documentMode?this:L,j=Ie.get(W,T);j||(w.documentMode?this.addEventListener(T,O):L.addEventListener(b,O,!0)),Ie.set(W,T,(j||0)+1)},teardown:function(){var L=this.ownerDocument||this.document||this,W=w.documentMode?this:L,j=Ie.get(W,T)-1;j?Ie.set(W,T,j):(w.documentMode?this.removeEventListener(T,O):L.removeEventListener(b,O,!0),Ie.remove(W,T))}}}),p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(b,T){p.event.special[b]={delegateType:T,bindType:T,handle:function(O){var L,W=this,j=O.relatedTarget,X=O.handleObj;return(!j||j!==W&&!p.contains(W,j))&&(O.type=X.origType,L=X.handler.apply(this,arguments),O.type=T),L}}}),p.fn.extend({on:function(b,T,O,L){return bc(this,b,T,O,L)},one:function(b,T,O,L){return bc(this,b,T,O,L,1)},off:function(b,T,O){var L,W;if(b&&b.preventDefault&&b.handleObj)return L=b.handleObj,p(b.delegateTarget).off(L.namespace?L.origType+"."+L.namespace:L.origType,L.selector,L.handler),this;if(typeof b=="object"){for(W in b)this.off(W,T,b[W]);return this}return(T===!1||typeof T=="function")&&(O=T,T=void 0),O===!1&&(O=ir),this.each(function(){p.event.remove(this,b,O,T)})}});var Ut=/<script|<style|<link/i,Ds=/checked\s*(?:[^=]|=\s*.checked.)/i,$t=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function rr(b,T){return R(b,"table")&&R(T.nodeType!==11?T:T.firstChild,"tr")&&p(b).children("tbody")[0]||b}function Si(b){return b.type=(b.getAttribute("type")!==null)+"/"+b.type,b}function r1(b){return(b.type||"").slice(0,5)==="true/"?b.type=b.type.slice(5):b.removeAttribute("type"),b}function Um(b,T){var O,L,W,j,X,ke,be;if(T.nodeType===1){if(Ie.hasData(b)&&(j=Ie.get(b),be=j.events,be)){Ie.remove(T,"handle events");for(W in be)for(O=0,L=be[W].length;O<L;O++)p.event.add(T,W,be[W][O])}Se.hasData(b)&&(X=Se.access(b),ke=p.extend({},X),Se.set(T,ke))}}function OW(b,T){var O=T.nodeName.toLowerCase();O==="input"&&Xt.test(b.type)?T.checked=b.checked:(O==="input"||O==="textarea")&&(T.defaultValue=b.defaultValue)}function cf(b,T,O,L){T=o(T);var W,j,X,ke,be,De,Qe=0,tt=b.length,je=tt-1,lt=T[0],rn=v(lt);if(rn||tt>1&&typeof lt=="string"&&!g.checkClone&&Ds.test(lt))return b.each(function(On){var hn=b.eq(On);rn&&(T[0]=lt.call(this,On,hn.html())),cf(hn,T,O,L)});if(tt&&(W=Tn(T,b[0].ownerDocument,!1,b,L),j=W.firstChild,W.childNodes.length===1&&(W=j),j||L)){for(X=p.map(Fn(W,"script"),Si),ke=X.length;Qe<tt;Qe++)be=W,Qe!==je&&(be=p.clone(be,!0,!0),ke&&p.merge(X,Fn(be,"script"))),O.call(b[Qe],be,Qe);if(ke)for(De=X[X.length-1].ownerDocument,p.map(X,r1),Qe=0;Qe<ke;Qe++)be=X[Qe],Zr.test(be.type||"")&&!Ie.access(be,"globalEval")&&p.contains(De,be)&&(be.src&&(be.type||"").toLowerCase()!=="module"?p._evalUrl&&!be.noModule&&p._evalUrl(be.src,{nonce:be.nonce||be.getAttribute("nonce")},De):k(be.textContent.replace($t,""),be,De))}return b}function px(b,T,O){for(var L,W=T?p.filter(T,b):b,j=0;(L=W[j])!=null;j++)!O&&L.nodeType===1&&p.cleanData(Fn(L)),L.parentNode&&(O&&me(L)&&Dn(Fn(L,"script")),L.parentNode.removeChild(L));return b}p.extend({htmlPrefilter:function(b){return b},clone:function(b,T,O){var L,W,j,X,ke=b.cloneNode(!0),be=me(b);if(!g.noCloneChecked&&(b.nodeType===1||b.nodeType===11)&&!p.isXMLDoc(b))for(X=Fn(ke),j=Fn(b),L=0,W=j.length;L<W;L++)OW(j[L],X[L]);if(T)if(O)for(j=j||Fn(b),X=X||Fn(ke),L=0,W=j.length;L<W;L++)Um(j[L],X[L]);else Um(b,ke);return X=Fn(ke,"script"),X.length>0&&Dn(X,!be&&Fn(b,"script")),ke},cleanData:function(b){for(var T,O,L,W=p.event.special,j=0;(O=b[j])!==void 0;j++)if(Re(O)){if(T=O[Ie.expando]){if(T.events)for(L in T.events)W[L]?p.event.remove(O,L):p.removeEvent(O,L,T.handle);O[Ie.expando]=void 0}O[Se.expando]&&(O[Se.expando]=void 0)}}}),p.fn.extend({detach:function(b){return px(this,b,!0)},remove:function(b){return px(this,b)},text:function(b){return Le(this,function(T){return T===void 0?p.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=T)})},null,b,arguments.length)},append:function(){return cf(this,arguments,function(b){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var T=rr(this,b);T.appendChild(b)}})},prepend:function(){return cf(this,arguments,function(b){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var T=rr(this,b);T.insertBefore(b,T.firstChild)}})},before:function(){return cf(this,arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this)})},after:function(){return cf(this,arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this.nextSibling)})},empty:function(){for(var b,T=0;(b=this[T])!=null;T++)b.nodeType===1&&(p.cleanData(Fn(b,!1)),b.textContent="");return this},clone:function(b,T){return b=b??!1,T=T??b,this.map(function(){return p.clone(this,b,T)})},html:function(b){return Le(this,function(T){var O=this[0]||{},L=0,W=this.length;if(T===void 0&&O.nodeType===1)return O.innerHTML;if(typeof T=="string"&&!Ut.test(T)&&!ai[(yt.exec(T)||["",""])[1].toLowerCase()]){T=p.htmlPrefilter(T);try{for(;L<W;L++)O=this[L]||{},O.nodeType===1&&(p.cleanData(Fn(O,!1)),O.innerHTML=T);O=0}catch{}}O&&this.empty().append(T)},null,b,arguments.length)},replaceWith:function(){var b=[];return cf(this,arguments,function(T){var O=this.parentNode;p.inArray(this,b)<0&&(p.cleanData(Fn(this)),O&&O.replaceChild(T,this))},b)}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b,T){p.fn[b]=function(O){for(var L,W=[],j=p(O),X=j.length-1,ke=0;ke<=X;ke++)L=ke===X?this:this.clone(!0),p(j[ke])[T](L),a.apply(W,L.get());return this.pushStack(W)}});var s1=new RegExp("^("+ut+")(?!px)[a-z%]+$","i"),o1=/^--/,Wv=function(b){var T=b.ownerDocument.defaultView;return(!T||!T.opener)&&(T=t),T.getComputedStyle(b)},vx=function(b,T,O){var L,W,j={};for(W in T)j[W]=b.style[W],b.style[W]=T[W];L=O.call(b);for(W in T)b.style[W]=j[W];return L},RW=new RegExp(Ot.join("|"),"i");(function(){function b(){if(De){be.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",De.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Qt.appendChild(be).appendChild(De);var Qe=t.getComputedStyle(De);O=Qe.top!=="1%",ke=T(Qe.marginLeft)===12,De.style.right="60%",j=T(Qe.right)===36,L=T(Qe.width)===36,De.style.position="absolute",W=T(De.offsetWidth/3)===12,Qt.removeChild(be),De=null}}function T(Qe){return Math.round(parseFloat(Qe))}var O,L,W,j,X,ke,be=w.createElement("div"),De=w.createElement("div");De.style&&(De.style.backgroundClip="content-box",De.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle=De.style.backgroundClip==="content-box",p.extend(g,{boxSizingReliable:function(){return b(),L},pixelBoxStyles:function(){return b(),j},pixelPosition:function(){return b(),O},reliableMarginLeft:function(){return b(),ke},scrollboxSize:function(){return b(),W},reliableTrDimensions:function(){var Qe,tt,je,lt;return X==null&&(Qe=w.createElement("table"),tt=w.createElement("tr"),je=w.createElement("div"),Qe.style.cssText="position:absolute;left:-11111px;border-collapse:separate",tt.style.cssText="box-sizing:content-box;border:1px solid",tt.style.height="1px",je.style.height="9px",je.style.display="block",Qt.appendChild(Qe).appendChild(tt).appendChild(je),lt=t.getComputedStyle(tt),X=parseInt(lt.height,10)+parseInt(lt.borderTopWidth,10)+parseInt(lt.borderBottomWidth,10)===tt.offsetHeight,Qt.removeChild(Qe)),X}}))})();function zm(b,T,O){var L,W,j,X,ke=o1.test(T),be=b.style;return O=O||Wv(b),O&&(X=O.getPropertyValue(T)||O[T],ke&&X&&(X=X.replace(q,"$1")||void 0),X===""&&!me(b)&&(X=p.style(b,T)),!g.pixelBoxStyles()&&s1.test(X)&&RW.test(T)&&(L=be.width,W=be.minWidth,j=be.maxWidth,be.minWidth=be.maxWidth=be.width=X,X=O.width,be.width=L,be.minWidth=W,be.maxWidth=j)),X!==void 0?X+"":X}function bx(b,T){return{get:function(){if(b()){delete this.get;return}return(this.get=T).apply(this,arguments)}}}var wx=["Webkit","Moz","ms"],yx=w.createElement("div").style,_x={};function VW(b){for(var T=b[0].toUpperCase()+b.slice(1),O=wx.length;O--;)if(b=wx[O]+T,b in yx)return b}function a1(b){var T=p.cssProps[b]||_x[b];return T||(b in yx?b:_x[b]=VW(b)||b)}var DW=/^(none|table(?!-c[ea]).+)/,NW={position:"absolute",visibility:"hidden",display:"block"},kx={letterSpacing:"0",fontWeight:"400"};function Ex(b,T,O){var L=ft.exec(T);return L?Math.max(0,L[2]-(O||0))+(L[3]||"px"):T}function l1(b,T,O,L,W,j){var X=T==="width"?1:0,ke=0,be=0,De=0;if(O===(L?"border":"content"))return 0;for(;X<4;X+=2)O==="margin"&&(De+=p.css(b,O+Ot[X],!0,W)),L?(O==="content"&&(be-=p.css(b,"padding"+Ot[X],!0,W)),O!=="margin"&&(be-=p.css(b,"border"+Ot[X]+"Width",!0,W))):(be+=p.css(b,"padding"+Ot[X],!0,W),O!=="padding"?be+=p.css(b,"border"+Ot[X]+"Width",!0,W):ke+=p.css(b,"border"+Ot[X]+"Width",!0,W));return!L&&j>=0&&(be+=Math.max(0,Math.ceil(b["offset"+T[0].toUpperCase()+T.slice(1)]-j-be-ke-.5))||0),be+De}function Cx(b,T,O){var L=Wv(b),W=!g.boxSizingReliable()||O,j=W&&p.css(b,"boxSizing",!1,L)==="border-box",X=j,ke=zm(b,T,L),be="offset"+T[0].toUpperCase()+T.slice(1);if(s1.test(ke)){if(!O)return ke;ke="auto"}return(!g.boxSizingReliable()&&j||!g.reliableTrDimensions()&&R(b,"tr")||ke==="auto"||!parseFloat(ke)&&p.css(b,"display",!1,L)==="inline")&&b.getClientRects().length&&(j=p.css(b,"boxSizing",!1,L)==="border-box",X=be in b,X&&(ke=b[be])),ke=parseFloat(ke)||0,ke+l1(b,T,O||(j?"border":"content"),X,L,ke)+"px"}p.extend({cssHooks:{opacity:{get:function(b,T){if(T){var O=zm(b,"opacity");return O===""?"1":O}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(b,T,O,L){if(!(!b||b.nodeType===3||b.nodeType===8||!b.style)){var W,j,X,ke=pe(T),be=o1.test(T),De=b.style;if(be||(T=a1(ke)),X=p.cssHooks[T]||p.cssHooks[ke],O!==void 0){if(j=typeof O,j==="string"&&(W=ft.exec(O))&&W[1]&&(O=rt(b,T,W),j="number"),O==null||O!==O)return;j==="number"&&!be&&(O+=W&&W[3]||(p.cssNumber[ke]?"":"px")),!g.clearCloneStyle&&O===""&&T.indexOf("background")===0&&(De[T]="inherit"),(!X||!("set"in X)||(O=X.set(b,O,L))!==void 0)&&(be?De.setProperty(T,O):De[T]=O)}else return X&&"get"in X&&(W=X.get(b,!1,L))!==void 0?W:De[T]}},css:function(b,T,O,L){var W,j,X,ke=pe(T),be=o1.test(T);return be||(T=a1(ke)),X=p.cssHooks[T]||p.cssHooks[ke],X&&"get"in X&&(W=X.get(b,!0,O)),W===void 0&&(W=zm(b,T,L)),W==="normal"&&T in kx&&(W=kx[T]),O===""||O?(j=parseFloat(W),O===!0||isFinite(j)?j||0:W):W}}),p.each(["height","width"],function(b,T){p.cssHooks[T]={get:function(O,L,W){if(L)return DW.test(p.css(O,"display"))&&(!O.getClientRects().length||!O.getBoundingClientRect().width)?vx(O,NW,function(){return Cx(O,T,W)}):Cx(O,T,W)},set:function(O,L,W){var j,X=Wv(O),ke=!g.scrollboxSize()&&X.position==="absolute",be=ke||W,De=be&&p.css(O,"boxSizing",!1,X)==="border-box",Qe=W?l1(O,T,W,De,X):0;return De&&ke&&(Qe-=Math.ceil(O["offset"+T[0].toUpperCase()+T.slice(1)]-parseFloat(X[T])-l1(O,T,"border",!1,X)-.5)),Qe&&(j=ft.exec(L))&&(j[3]||"px")!=="px"&&(O.style[T]=L,L=p.css(O,T)),Ex(O,L,Qe)}}}),p.cssHooks.marginLeft=bx(g.reliableMarginLeft,function(b,T){if(T)return(parseFloat(zm(b,"marginLeft"))||b.getBoundingClientRect().left-vx(b,{marginLeft:0},function(){return b.getBoundingClientRect().left}))+"px"}),p.each({margin:"",padding:"",border:"Width"},function(b,T){p.cssHooks[b+T]={expand:function(O){for(var L=0,W={},j=typeof O=="string"?O.split(" "):[O];L<4;L++)W[b+Ot[L]+T]=j[L]||j[L-2]||j[0];return W}},b!=="margin"&&(p.cssHooks[b+T].set=Ex)}),p.fn.extend({css:function(b,T){return Le(this,function(O,L,W){var j,X,ke={},be=0;if(Array.isArray(L)){for(j=Wv(O),X=L.length;be<X;be++)ke[L[be]]=p.css(O,L[be],!1,j);return ke}return W!==void 0?p.style(O,L,W):p.css(O,L)},b,T,arguments.length>1)}});function Ns(b,T,O,L,W){return new Ns.prototype.init(b,T,O,L,W)}p.Tween=Ns,Ns.prototype={constructor:Ns,init:function(b,T,O,L,W,j){this.elem=b,this.prop=O,this.easing=W||p.easing._default,this.options=T,this.start=this.now=this.cur(),this.end=L,this.unit=j||(p.cssNumber[O]?"":"px")},cur:function(){var b=Ns.propHooks[this.prop];return b&&b.get?b.get(this):Ns.propHooks._default.get(this)},run:function(b){var T,O=Ns.propHooks[this.prop];return this.options.duration?this.pos=T=p.easing[this.easing](b,this.options.duration*b,0,1,this.options.duration):this.pos=T=b,this.now=(this.end-this.start)*T+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),O&&O.set?O.set(this):Ns.propHooks._default.set(this),this}},Ns.prototype.init.prototype=Ns.prototype,Ns.propHooks={_default:{get:function(b){var T;return b.elem.nodeType!==1||b.elem[b.prop]!=null&&b.elem.style[b.prop]==null?b.elem[b.prop]:(T=p.css(b.elem,b.prop,""),!T||T==="auto"?0:T)},set:function(b){p.fx.step[b.prop]?p.fx.step[b.prop](b):b.elem.nodeType===1&&(p.cssHooks[b.prop]||b.elem.style[a1(b.prop)]!=null)?p.style(b.elem,b.prop,b.now+b.unit):b.elem[b.prop]=b.now}}},Ns.propHooks.scrollTop=Ns.propHooks.scrollLeft={set:function(b){b.elem.nodeType&&b.elem.parentNode&&(b.elem[b.prop]=b.now)}},p.easing={linear:function(b){return b},swing:function(b){return .5-Math.cos(b*Math.PI)/2},_default:"swing"},p.fx=Ns.prototype.init,p.fx.step={};var uf,jv,LW=/^(?:toggle|show|hide)$/,MW=/queueHooks$/;function c1(){jv&&(w.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(c1):t.setTimeout(c1,p.fx.interval),p.fx.tick())}function Tx(){return t.setTimeout(function(){uf=void 0}),uf=Date.now()}function qv(b,T){var O,L=0,W={height:b};for(T=T?1:0;L<4;L+=2-T)O=Ot[L],W["margin"+O]=W["padding"+O]=b;return T&&(W.opacity=W.width=b),W}function Sx(b,T,O){for(var L,W=(Qo.tweeners[T]||[]).concat(Qo.tweeners["*"]),j=0,X=W.length;j<X;j++)if(L=W[j].call(O,T,b))return L}function $W(b,T,O){var L,W,j,X,ke,be,De,Qe,tt="width"in T||"height"in T,je=this,lt={},rn=b.style,On=b.nodeType&&Te(b),hn=Ie.get(b,"fxshow");O.queue||(X=p._queueHooks(b,"fx"),X.unqueued==null&&(X.unqueued=0,ke=X.empty.fire,X.empty.fire=function(){X.unqueued||ke()}),X.unqueued++,je.always(function(){je.always(function(){X.unqueued--,p.queue(b,"fx").length||X.empty.fire()})}));for(L in T)if(W=T[L],LW.test(W)){if(delete T[L],j=j||W==="toggle",W===(On?"hide":"show"))if(W==="show"&&hn&&hn[L]!==void 0)On=!0;else continue;lt[L]=hn&&hn[L]||p.style(b,L)}if(be=!p.isEmptyObject(T),!(!be&&p.isEmptyObject(lt))){tt&&b.nodeType===1&&(O.overflow=[rn.overflow,rn.overflowX,rn.overflowY],De=hn&&hn.display,De==null&&(De=Ie.get(b,"display")),Qe=p.css(b,"display"),Qe==="none"&&(De?Qe=De:(Kn([b],!0),De=b.style.display||De,Qe=p.css(b,"display"),Kn([b]))),(Qe==="inline"||Qe==="inline-block"&&De!=null)&&p.css(b,"float")==="none"&&(be||(je.done(function(){rn.display=De}),De==null&&(Qe=rn.display,De=Qe==="none"?"":Qe)),rn.display="inline-block")),O.overflow&&(rn.overflow="hidden",je.always(function(){rn.overflow=O.overflow[0],rn.overflowX=O.overflow[1],rn.overflowY=O.overflow[2]})),be=!1;for(L in lt)be||(hn?"hidden"in hn&&(On=hn.hidden):hn=Ie.access(b,"fxshow",{display:De}),j&&(hn.hidden=!On),On&&Kn([b],!0),je.done(function(){On||Kn([b]),Ie.remove(b,"fxshow");for(L in lt)p.style(b,L,lt[L])})),be=Sx(On?hn[L]:0,L,je),L in hn||(hn[L]=be.start,On&&(be.end=be.start,be.start=0))}}function BW(b,T){var O,L,W,j,X;for(O in b)if(L=pe(O),W=T[L],j=b[O],Array.isArray(j)&&(W=j[1],j=b[O]=j[0]),O!==L&&(b[L]=j,delete b[O]),X=p.cssHooks[L],X&&"expand"in X){j=X.expand(j),delete b[L];for(O in j)O in b||(b[O]=j[O],T[O]=W)}else T[L]=W}function Qo(b,T,O){var L,W,j=0,X=Qo.prefilters.length,ke=p.Deferred().always(function(){delete be.elem}),be=function(){if(W)return!1;for(var tt=uf||Tx(),je=Math.max(0,De.startTime+De.duration-tt),lt=je/De.duration||0,rn=1-lt,On=0,hn=De.tweens.length;On<hn;On++)De.tweens[On].run(rn);return ke.notifyWith(b,[De,rn,je]),rn<1&&hn?je:(hn||ke.notifyWith(b,[De,1,0]),ke.resolveWith(b,[De]),!1)},De=ke.promise({elem:b,props:p.extend({},T),opts:p.extend(!0,{specialEasing:{},easing:p.easing._default},O),originalProperties:T,originalOptions:O,startTime:uf||Tx(),duration:O.duration,tweens:[],createTween:function(tt,je){var lt=p.Tween(b,De.opts,tt,je,De.opts.specialEasing[tt]||De.opts.easing);return De.tweens.push(lt),lt},stop:function(tt){var je=0,lt=tt?De.tweens.length:0;if(W)return this;for(W=!0;je<lt;je++)De.tweens[je].run(1);return tt?(ke.notifyWith(b,[De,1,0]),ke.resolveWith(b,[De,tt])):ke.rejectWith(b,[De,tt]),this}}),Qe=De.props;for(BW(Qe,De.opts.specialEasing);j<X;j++)if(L=Qo.prefilters[j].call(De,b,Qe,De.opts),L)return v(L.stop)&&(p._queueHooks(De.elem,De.opts.queue).stop=L.stop.bind(L)),L;return p.map(Qe,Sx,De),v(De.opts.start)&&De.opts.start.call(b,De),De.progress(De.opts.progress).done(De.opts.done,De.opts.complete).fail(De.opts.fail).always(De.opts.always),p.fx.timer(p.extend(be,{elem:b,anim:De,queue:De.opts.queue})),De}p.Animation=p.extend(Qo,{tweeners:{"*":[function(b,T){var O=this.createTween(b,T);return rt(O.elem,b,ft.exec(T),O),O}]},tweener:function(b,T){v(b)?(T=b,b=["*"]):b=b.match(Ae);for(var O,L=0,W=b.length;L<W;L++)O=b[L],Qo.tweeners[O]=Qo.tweeners[O]||[],Qo.tweeners[O].unshift(T)},prefilters:[$W],prefilter:function(b,T){T?Qo.prefilters.unshift(b):Qo.prefilters.push(b)}}),p.speed=function(b,T,O){var L=b&&typeof b=="object"?p.extend({},b):{complete:O||!O&&T||v(b)&&b,duration:b,easing:O&&T||T&&!v(T)&&T};return p.fx.off?L.duration=0:typeof L.duration!="number"&&(L.duration in p.fx.speeds?L.duration=p.fx.speeds[L.duration]:L.duration=p.fx.speeds._default),(L.queue==null||L.queue===!0)&&(L.queue="fx"),L.old=L.complete,L.complete=function(){v(L.old)&&L.old.call(this),L.queue&&p.dequeue(this,L.queue)},L},p.fn.extend({fadeTo:function(b,T,O,L){return this.filter(Te).css("opacity",0).show().end().animate({opacity:T},b,O,L)},animate:function(b,T,O,L){var W=p.isEmptyObject(b),j=p.speed(T,O,L),X=function(){var ke=Qo(this,p.extend({},b),j);(W||Ie.get(this,"finish"))&&ke.stop(!0)};return X.finish=X,W||j.queue===!1?this.each(X):this.queue(j.queue,X)},stop:function(b,T,O){var L=function(W){var j=W.stop;delete W.stop,j(O)};return typeof b!="string"&&(O=T,T=b,b=void 0),T&&this.queue(b||"fx",[]),this.each(function(){var W=!0,j=b!=null&&b+"queueHooks",X=p.timers,ke=Ie.get(this);if(j)ke[j]&&ke[j].stop&&L(ke[j]);else for(j in ke)ke[j]&&ke[j].stop&&MW.test(j)&&L(ke[j]);for(j=X.length;j--;)X[j].elem===this&&(b==null||X[j].queue===b)&&(X[j].anim.stop(O),W=!1,X.splice(j,1));(W||!O)&&p.dequeue(this,b)})},finish:function(b){return b!==!1&&(b=b||"fx"),this.each(function(){var T,O=Ie.get(this),L=O[b+"queue"],W=O[b+"queueHooks"],j=p.timers,X=L?L.length:0;for(O.finish=!0,p.queue(this,b,[]),W&&W.stop&&W.stop.call(this,!0),T=j.length;T--;)j[T].elem===this&&j[T].queue===b&&(j[T].anim.stop(!0),j.splice(T,1));for(T=0;T<X;T++)L[T]&&L[T].finish&&L[T].finish.call(this);delete O.finish})}}),p.each(["toggle","show","hide"],function(b,T){var O=p.fn[T];p.fn[T]=function(L,W,j){return L==null||typeof L=="boolean"?O.apply(this,arguments):this.animate(qv(T,!0),L,W,j)}}),p.each({slideDown:qv("show"),slideUp:qv("hide"),slideToggle:qv("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(b,T){p.fn[b]=function(O,L,W){return this.animate(T,O,L,W)}}),p.timers=[],p.fx.tick=function(){var b,T=0,O=p.timers;for(uf=Date.now();T<O.length;T++)b=O[T],!b()&&O[T]===b&&O.splice(T--,1);O.length||p.fx.stop(),uf=void 0},p.fx.timer=function(b){p.timers.push(b),p.fx.start()},p.fx.interval=13,p.fx.start=function(){jv||(jv=!0,c1())},p.fx.stop=function(){jv=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fn.delay=function(b,T){return b=p.fx&&p.fx.speeds[b]||b,T=T||"fx",this.queue(T,function(O,L){var W=t.setTimeout(O,b);L.stop=function(){t.clearTimeout(W)}})},function(){var b=w.createElement("input"),T=w.createElement("select"),O=T.appendChild(w.createElement("option"));b.type="checkbox",g.checkOn=b.value!=="",g.optSelected=O.selected,b=w.createElement("input"),b.value="t",b.type="radio",g.radioValue=b.value==="t"}();var Ax,Hm=p.expr.attrHandle;p.fn.extend({attr:function(b,T){return Le(this,p.attr,b,T,arguments.length>1)},removeAttr:function(b){return this.each(function(){p.removeAttr(this,b)})}}),p.extend({attr:function(b,T,O){var L,W,j=b.nodeType;if(!(j===3||j===8||j===2)){if(typeof b.getAttribute>"u")return p.prop(b,T,O);if((j!==1||!p.isXMLDoc(b))&&(W=p.attrHooks[T.toLowerCase()]||(p.expr.match.bool.test(T)?Ax:void 0)),O!==void 0){if(O===null){p.removeAttr(b,T);return}return W&&"set"in W&&(L=W.set(b,O,T))!==void 0?L:(b.setAttribute(T,O+""),O)}return W&&"get"in W&&(L=W.get(b,T))!==null?L:(L=p.find.attr(b,T),L??void 0)}},attrHooks:{type:{set:function(b,T){if(!g.radioValue&&T==="radio"&&R(b,"input")){var O=b.value;return b.setAttribute("type",T),O&&(b.value=O),T}}}},removeAttr:function(b,T){var O,L=0,W=T&&T.match(Ae);if(W&&b.nodeType===1)for(;O=W[L++];)b.removeAttribute(O)}}),Ax={set:function(b,T,O){return T===!1?p.removeAttr(b,O):b.setAttribute(O,O),O}},p.each(p.expr.match.bool.source.match(/\w+/g),function(b,T){var O=Hm[T]||p.find.attr;Hm[T]=function(L,W,j){var X,ke,be=W.toLowerCase();return j||(ke=Hm[be],Hm[be]=X,X=O(L,W,j)!=null?be:null,Hm[be]=ke),X}});var FW=/^(?:input|select|textarea|button)$/i,UW=/^(?:a|area)$/i;p.fn.extend({prop:function(b,T){return Le(this,p.prop,b,T,arguments.length>1)},removeProp:function(b){return this.each(function(){delete this[p.propFix[b]||b]})}}),p.extend({prop:function(b,T,O){var L,W,j=b.nodeType;if(!(j===3||j===8||j===2))return(j!==1||!p.isXMLDoc(b))&&(T=p.propFix[T]||T,W=p.propHooks[T]),O!==void 0?W&&"set"in W&&(L=W.set(b,O,T))!==void 0?L:b[T]=O:W&&"get"in W&&(L=W.get(b,T))!==null?L:b[T]},propHooks:{tabIndex:{get:function(b){var T=p.find.attr(b,"tabindex");return T?parseInt(T,10):FW.test(b.nodeName)||UW.test(b.nodeName)&&b.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(p.propHooks.selected={get:function(b){var T=b.parentNode;return T&&T.parentNode&&T.parentNode.selectedIndex,null},set:function(b){var T=b.parentNode;T&&(T.selectedIndex,T.parentNode&&T.parentNode.selectedIndex)}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){p.propFix[this.toLowerCase()]=this});function Lu(b){var T=b.match(Ae)||[];return T.join(" ")}function Mu(b){return b.getAttribute&&b.getAttribute("class")||""}function u1(b){return Array.isArray(b)?b:typeof b=="string"?b.match(Ae)||[]:[]}p.fn.extend({addClass:function(b){var T,O,L,W,j,X;return v(b)?this.each(function(ke){p(this).addClass(b.call(this,ke,Mu(this)))}):(T=u1(b),T.length?this.each(function(){if(L=Mu(this),O=this.nodeType===1&&" "+Lu(L)+" ",O){for(j=0;j<T.length;j++)W=T[j],O.indexOf(" "+W+" ")<0&&(O+=W+" ");X=Lu(O),L!==X&&this.setAttribute("class",X)}}):this)},removeClass:function(b){var T,O,L,W,j,X;return v(b)?this.each(function(ke){p(this).removeClass(b.call(this,ke,Mu(this)))}):arguments.length?(T=u1(b),T.length?this.each(function(){if(L=Mu(this),O=this.nodeType===1&&" "+Lu(L)+" ",O){for(j=0;j<T.length;j++)for(W=T[j];O.indexOf(" "+W+" ")>-1;)O=O.replace(" "+W+" "," ");X=Lu(O),L!==X&&this.setAttribute("class",X)}}):this):this.attr("class","")},toggleClass:function(b,T){var O,L,W,j,X=typeof b,ke=X==="string"||Array.isArray(b);return v(b)?this.each(function(be){p(this).toggleClass(b.call(this,be,Mu(this),T),T)}):typeof T=="boolean"&&ke?T?this.addClass(b):this.removeClass(b):(O=u1(b),this.each(function(){if(ke)for(j=p(this),W=0;W<O.length;W++)L=O[W],j.hasClass(L)?j.removeClass(L):j.addClass(L);else(b===void 0||X==="boolean")&&(L=Mu(this),L&&Ie.set(this,"__className__",L),this.setAttribute&&this.setAttribute("class",L||b===!1?"":Ie.get(this,"__className__")||""))}))},hasClass:function(b){var T,O,L=0;for(T=" "+b+" ";O=this[L++];)if(O.nodeType===1&&(" "+Lu(Mu(O))+" ").indexOf(T)>-1)return!0;return!1}});var zW=/\r/g;p.fn.extend({val:function(b){var T,O,L,W=this[0];return arguments.length?(L=v(b),this.each(function(j){var X;this.nodeType===1&&(L?X=b.call(this,j,p(this).val()):X=b,X==null?X="":typeof X=="number"?X+="":Array.isArray(X)&&(X=p.map(X,function(ke){return ke==null?"":ke+""})),T=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],(!T||!("set"in T)||T.set(this,X,"value")===void 0)&&(this.value=X))})):W?(T=p.valHooks[W.type]||p.valHooks[W.nodeName.toLowerCase()],T&&"get"in T&&(O=T.get(W,"value"))!==void 0?O:(O=W.value,typeof O=="string"?O.replace(zW,""):O??"")):void 0}}),p.extend({valHooks:{option:{get:function(b){var T=p.find.attr(b,"value");return T??Lu(p.text(b))}},select:{get:function(b){var T,O,L,W=b.options,j=b.selectedIndex,X=b.type==="select-one",ke=X?null:[],be=X?j+1:W.length;for(j<0?L=be:L=X?j:0;L<be;L++)if(O=W[L],(O.selected||L===j)&&!O.disabled&&(!O.parentNode.disabled||!R(O.parentNode,"optgroup"))){if(T=p(O).val(),X)return T;ke.push(T)}return ke},set:function(b,T){for(var O,L,W=b.options,j=p.makeArray(T),X=W.length;X--;)L=W[X],(L.selected=p.inArray(p.valHooks.option.get(L),j)>-1)&&(O=!0);return O||(b.selectedIndex=-1),j}}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(b,T){if(Array.isArray(T))return b.checked=p.inArray(p(b).val(),T)>-1}},g.checkOn||(p.valHooks[this].get=function(b){return b.getAttribute("value")===null?"on":b.value})});var Wm=t.location,Ix={guid:Date.now()},d1=/\?/;p.parseXML=function(b){var T,O;if(!b||typeof b!="string")return null;try{T=new t.DOMParser().parseFromString(b,"text/xml")}catch{}return O=T&&T.getElementsByTagName("parsererror")[0],(!T||O)&&p.error("Invalid XML: "+(O?p.map(O.childNodes,function(L){return L.textContent}).join(`
`):b)),T};var Px=/^(?:focusinfocus|focusoutblur)$/,xx=function(b){b.stopPropagation()};p.extend(p.event,{trigger:function(b,T,O,L){var W,j,X,ke,be,De,Qe,tt,je=[O||w],lt=d.call(b,"type")?b.type:b,rn=d.call(b,"namespace")?b.namespace.split("."):[];if(j=tt=X=O=O||w,!(O.nodeType===3||O.nodeType===8)&&!Px.test(lt+p.event.triggered)&&(lt.indexOf(".")>-1&&(rn=lt.split("."),lt=rn.shift(),rn.sort()),be=lt.indexOf(":")<0&&"on"+lt,b=b[p.expando]?b:new p.Event(lt,typeof b=="object"&&b),b.isTrigger=L?2:3,b.namespace=rn.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+rn.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=O),T=T==null?[b]:p.makeArray(T,[b]),Qe=p.event.special[lt]||{},!(!L&&Qe.trigger&&Qe.trigger.apply(O,T)===!1))){if(!L&&!Qe.noBubble&&!_(O)){for(ke=Qe.delegateType||lt,Px.test(ke+lt)||(j=j.parentNode);j;j=j.parentNode)je.push(j),X=j;X===(O.ownerDocument||w)&&je.push(X.defaultView||X.parentWindow||t)}for(W=0;(j=je[W++])&&!b.isPropagationStopped();)tt=j,b.type=W>1?ke:Qe.bindType||lt,De=(Ie.get(j,"events")||Object.create(null))[b.type]&&Ie.get(j,"handle"),De&&De.apply(j,T),De=be&&j[be],De&&De.apply&&Re(j)&&(b.result=De.apply(j,T),b.result===!1&&b.preventDefault());return b.type=lt,!L&&!b.isDefaultPrevented()&&(!Qe._default||Qe._default.apply(je.pop(),T)===!1)&&Re(O)&&be&&v(O[lt])&&!_(O)&&(X=O[be],X&&(O[be]=null),p.event.triggered=lt,b.isPropagationStopped()&&tt.addEventListener(lt,xx),O[lt](),b.isPropagationStopped()&&tt.removeEventListener(lt,xx),p.event.triggered=void 0,X&&(O[be]=X)),b.result}},simulate:function(b,T,O){var L=p.extend(new p.Event,O,{type:b,isSimulated:!0});p.event.trigger(L,null,T)}}),p.fn.extend({trigger:function(b,T){return this.each(function(){p.event.trigger(b,T,this)})},triggerHandler:function(b,T){var O=this[0];if(O)return p.event.trigger(b,T,O,!0)}});var HW=/\[\]$/,Ox=/\r?\n/g,WW=/^(?:submit|button|image|reset|file)$/i,jW=/^(?:input|select|textarea|keygen)/i;function f1(b,T,O,L){var W;if(Array.isArray(T))p.each(T,function(j,X){O||HW.test(b)?L(b,X):f1(b+"["+(typeof X=="object"&&X!=null?j:"")+"]",X,O,L)});else if(!O&&E(T)==="object")for(W in T)f1(b+"["+W+"]",T[W],O,L);else L(b,T)}p.param=function(b,T){var O,L=[],W=function(j,X){var ke=v(X)?X():X;L[L.length]=encodeURIComponent(j)+"="+encodeURIComponent(ke??"")};if(b==null)return"";if(Array.isArray(b)||b.jquery&&!p.isPlainObject(b))p.each(b,function(){W(this.name,this.value)});else for(O in b)f1(O,b[O],T,W);return L.join("&")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var b=p.prop(this,"elements");return b?p.makeArray(b):this}).filter(function(){var b=this.type;return this.name&&!p(this).is(":disabled")&&jW.test(this.nodeName)&&!WW.test(b)&&(this.checked||!Xt.test(b))}).map(function(b,T){var O=p(this).val();return O==null?null:Array.isArray(O)?p.map(O,function(L){return{name:T.name,value:L.replace(Ox,`\r
`)}}):{name:T.name,value:O.replace(Ox,`\r
`)}}).get()}});var qW=/%20/g,GW=/#.*$/,KW=/([?&])_=[^&]*/,YW=/^(.*?):[ \t]*([^\r\n]*)$/mg,QW=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ZW=/^(?:GET|HEAD)$/,JW=/^\/\//,Rx={},h1={},Vx="*/".concat("*"),m1=w.createElement("a");m1.href=Wm.href;function Dx(b){return function(T,O){typeof T!="string"&&(O=T,T="*");var L,W=0,j=T.toLowerCase().match(Ae)||[];if(v(O))for(;L=j[W++];)L[0]==="+"?(L=L.slice(1)||"*",(b[L]=b[L]||[]).unshift(O)):(b[L]=b[L]||[]).push(O)}}function Nx(b,T,O,L){var W={},j=b===h1;function X(ke){var be;return W[ke]=!0,p.each(b[ke]||[],function(De,Qe){var tt=Qe(T,O,L);if(typeof tt=="string"&&!j&&!W[tt])return T.dataTypes.unshift(tt),X(tt),!1;if(j)return!(be=tt)}),be}return X(T.dataTypes[0])||!W["*"]&&X("*")}function g1(b,T){var O,L,W=p.ajaxSettings.flatOptions||{};for(O in T)T[O]!==void 0&&((W[O]?b:L||(L={}))[O]=T[O]);return L&&p.extend(!0,b,L),b}function XW(b,T,O){for(var L,W,j,X,ke=b.contents,be=b.dataTypes;be[0]==="*";)be.shift(),L===void 0&&(L=b.mimeType||T.getResponseHeader("Content-Type"));if(L){for(W in ke)if(ke[W]&&ke[W].test(L)){be.unshift(W);break}}if(be[0]in O)j=be[0];else{for(W in O){if(!be[0]||b.converters[W+" "+be[0]]){j=W;break}X||(X=W)}j=j||X}if(j)return j!==be[0]&&be.unshift(j),O[j]}function ej(b,T,O,L){var W,j,X,ke,be,De={},Qe=b.dataTypes.slice();if(Qe[1])for(X in b.converters)De[X.toLowerCase()]=b.converters[X];for(j=Qe.shift();j;)if(b.responseFields[j]&&(O[b.responseFields[j]]=T),!be&&L&&b.dataFilter&&(T=b.dataFilter(T,b.dataType)),be=j,j=Qe.shift(),j){if(j==="*")j=be;else if(be!=="*"&&be!==j){if(X=De[be+" "+j]||De["* "+j],!X){for(W in De)if(ke=W.split(" "),ke[1]===j&&(X=De[be+" "+ke[0]]||De["* "+ke[0]],X)){X===!0?X=De[W]:De[W]!==!0&&(j=ke[0],Qe.unshift(ke[1]));break}}if(X!==!0)if(X&&b.throws)T=X(T);else try{T=X(T)}catch(tt){return{state:"parsererror",error:X?tt:"No conversion from "+be+" to "+j}}}}return{state:"success",data:T}}p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Wm.href,type:"GET",isLocal:QW.test(Wm.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vx,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(b,T){return T?g1(g1(b,p.ajaxSettings),T):g1(p.ajaxSettings,b)},ajaxPrefilter:Dx(Rx),ajaxTransport:Dx(h1),ajax:function(b,T){typeof b=="object"&&(T=b,b=void 0),T=T||{};var O,L,W,j,X,ke,be,De,Qe,tt,je=p.ajaxSetup({},T),lt=je.context||je,rn=je.context&&(lt.nodeType||lt.jquery)?p(lt):p.event,On=p.Deferred(),hn=p.Callbacks("once memory"),Rr=je.statusCode||{},dr={},Pa={},xa="canceled",_n={readyState:0,getResponseHeader:function(Nn){var Hi;if(be){if(!j)for(j={};Hi=YW.exec(W);)j[Hi[1].toLowerCase()+" "]=(j[Hi[1].toLowerCase()+" "]||[]).concat(Hi[2]);Hi=j[Nn.toLowerCase()+" "]}return Hi==null?null:Hi.join(", ")},getAllResponseHeaders:function(){return be?W:null},setRequestHeader:function(Nn,Hi){return be==null&&(Nn=Pa[Nn.toLowerCase()]=Pa[Nn.toLowerCase()]||Nn,dr[Nn]=Hi),this},overrideMimeType:function(Nn){return be==null&&(je.mimeType=Nn),this},statusCode:function(Nn){var Hi;if(Nn)if(be)_n.always(Nn[_n.status]);else for(Hi in Nn)Rr[Hi]=[Rr[Hi],Nn[Hi]];return this},abort:function(Nn){var Hi=Nn||xa;return O&&O.abort(Hi),$u(0,Hi),this}};if(On.promise(_n),je.url=((b||je.url||Wm.href)+"").replace(JW,Wm.protocol+"//"),je.type=T.method||T.type||je.method||je.type,je.dataTypes=(je.dataType||"*").toLowerCase().match(Ae)||[""],je.crossDomain==null){ke=w.createElement("a");try{ke.href=je.url,ke.href=ke.href,je.crossDomain=m1.protocol+"//"+m1.host!=ke.protocol+"//"+ke.host}catch{je.crossDomain=!0}}if(je.data&&je.processData&&typeof je.data!="string"&&(je.data=p.param(je.data,je.traditional)),Nx(Rx,je,T,_n),be)return _n;De=p.event&&je.global,De&&p.active++===0&&p.event.trigger("ajaxStart"),je.type=je.type.toUpperCase(),je.hasContent=!ZW.test(je.type),L=je.url.replace(GW,""),je.hasContent?je.data&&je.processData&&(je.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(je.data=je.data.replace(qW,"+")):(tt=je.url.slice(L.length),je.data&&(je.processData||typeof je.data=="string")&&(L+=(d1.test(L)?"&":"?")+je.data,delete je.data),je.cache===!1&&(L=L.replace(KW,"$1"),tt=(d1.test(L)?"&":"?")+"_="+Ix.guid+++tt),je.url=L+tt),je.ifModified&&(p.lastModified[L]&&_n.setRequestHeader("If-Modified-Since",p.lastModified[L]),p.etag[L]&&_n.setRequestHeader("If-None-Match",p.etag[L])),(je.data&&je.hasContent&&je.contentType!==!1||T.contentType)&&_n.setRequestHeader("Content-Type",je.contentType),_n.setRequestHeader("Accept",je.dataTypes[0]&&je.accepts[je.dataTypes[0]]?je.accepts[je.dataTypes[0]]+(je.dataTypes[0]!=="*"?", "+Vx+"; q=0.01":""):je.accepts["*"]);for(Qe in je.headers)_n.setRequestHeader(Qe,je.headers[Qe]);if(je.beforeSend&&(je.beforeSend.call(lt,_n,je)===!1||be))return _n.abort();if(xa="abort",hn.add(je.complete),_n.done(je.success),_n.fail(je.error),O=Nx(h1,je,T,_n),!O)$u(-1,"No Transport");else{if(_n.readyState=1,De&&rn.trigger("ajaxSend",[_n,je]),be)return _n;je.async&&je.timeout>0&&(X=t.setTimeout(function(){_n.abort("timeout")},je.timeout));try{be=!1,O.send(dr,$u)}catch(Nn){if(be)throw Nn;$u(-1,Nn)}}function $u(Nn,Hi,qm,v1){var Oa,Gm,Ra,wc,yc,Co=Hi;be||(be=!0,X&&t.clearTimeout(X),O=void 0,W=v1||"",_n.readyState=Nn>0?4:0,Oa=Nn>=200&&Nn<300||Nn===304,qm&&(wc=XW(je,_n,qm)),!Oa&&p.inArray("script",je.dataTypes)>-1&&p.inArray("json",je.dataTypes)<0&&(je.converters["text script"]=function(){}),wc=ej(je,wc,_n,Oa),Oa?(je.ifModified&&(yc=_n.getResponseHeader("Last-Modified"),yc&&(p.lastModified[L]=yc),yc=_n.getResponseHeader("etag"),yc&&(p.etag[L]=yc)),Nn===204||je.type==="HEAD"?Co="nocontent":Nn===304?Co="notmodified":(Co=wc.state,Gm=wc.data,Ra=wc.error,Oa=!Ra)):(Ra=Co,(Nn||!Co)&&(Co="error",Nn<0&&(Nn=0))),_n.status=Nn,_n.statusText=(Hi||Co)+"",Oa?On.resolveWith(lt,[Gm,Co,_n]):On.rejectWith(lt,[_n,Co,Ra]),_n.statusCode(Rr),Rr=void 0,De&&rn.trigger(Oa?"ajaxSuccess":"ajaxError",[_n,je,Oa?Gm:Ra]),hn.fireWith(lt,[_n,Co]),De&&(rn.trigger("ajaxComplete",[_n,je]),--p.active||p.event.trigger("ajaxStop")))}return _n},getJSON:function(b,T,O){return p.get(b,T,O,"json")},getScript:function(b,T){return p.get(b,void 0,T,"script")}}),p.each(["get","post"],function(b,T){p[T]=function(O,L,W,j){return v(L)&&(j=j||W,W=L,L=void 0),p.ajax(p.extend({url:O,type:T,dataType:j,data:L,success:W},p.isPlainObject(O)&&O))}}),p.ajaxPrefilter(function(b){var T;for(T in b.headers)T.toLowerCase()==="content-type"&&(b.contentType=b.headers[T]||"")}),p._evalUrl=function(b,T,O){return p.ajax({url:b,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(L){p.globalEval(L,T,O)}})},p.fn.extend({wrapAll:function(b){var T;return this[0]&&(v(b)&&(b=b.call(this[0])),T=p(b,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&T.insertBefore(this[0]),T.map(function(){for(var O=this;O.firstElementChild;)O=O.firstElementChild;return O}).append(this)),this},wrapInner:function(b){return v(b)?this.each(function(T){p(this).wrapInner(b.call(this,T))}):this.each(function(){var T=p(this),O=T.contents();O.length?O.wrapAll(b):T.append(b)})},wrap:function(b){var T=v(b);return this.each(function(O){p(this).wrapAll(T?b.call(this,O):b)})},unwrap:function(b){return this.parent(b).not("body").each(function(){p(this).replaceWith(this.childNodes)}),this}}),p.expr.pseudos.hidden=function(b){return!p.expr.pseudos.visible(b)},p.expr.pseudos.visible=function(b){return!!(b.offsetWidth||b.offsetHeight||b.getClientRects().length)},p.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var tj={0:200,1223:204},jm=p.ajaxSettings.xhr();g.cors=!!jm&&"withCredentials"in jm,g.ajax=jm=!!jm,p.ajaxTransport(function(b){var T,O;if(g.cors||jm&&!b.crossDomain)return{send:function(L,W){var j,X=b.xhr();if(X.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(j in b.xhrFields)X[j]=b.xhrFields[j];b.mimeType&&X.overrideMimeType&&X.overrideMimeType(b.mimeType),!b.crossDomain&&!L["X-Requested-With"]&&(L["X-Requested-With"]="XMLHttpRequest");for(j in L)X.setRequestHeader(j,L[j]);T=function(ke){return function(){T&&(T=O=X.onload=X.onerror=X.onabort=X.ontimeout=X.onreadystatechange=null,ke==="abort"?X.abort():ke==="error"?typeof X.status!="number"?W(0,"error"):W(X.status,X.statusText):W(tj[X.status]||X.status,X.statusText,(X.responseType||"text")!=="text"||typeof X.responseText!="string"?{binary:X.response}:{text:X.responseText},X.getAllResponseHeaders()))}},X.onload=T(),O=X.onerror=X.ontimeout=T("error"),X.onabort!==void 0?X.onabort=O:X.onreadystatechange=function(){X.readyState===4&&t.setTimeout(function(){T&&O()})},T=T("abort");try{X.send(b.hasContent&&b.data||null)}catch(ke){if(T)throw ke}},abort:function(){T&&T()}}}),p.ajaxPrefilter(function(b){b.crossDomain&&(b.contents.script=!1)}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(b){return p.globalEval(b),b}}}),p.ajaxPrefilter("script",function(b){b.cache===void 0&&(b.cache=!1),b.crossDomain&&(b.type="GET")}),p.ajaxTransport("script",function(b){if(b.crossDomain||b.scriptAttrs){var T,O;return{send:function(L,W){T=p("<script>").attr(b.scriptAttrs||{}).prop({charset:b.scriptCharset,src:b.url}).on("load error",O=function(j){T.remove(),O=null,j&&W(j.type==="error"?404:200,j.type)}),w.head.appendChild(T[0])},abort:function(){O&&O()}}}});var Lx=[],p1=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var b=Lx.pop()||p.expando+"_"+Ix.guid++;return this[b]=!0,b}}),p.ajaxPrefilter("json jsonp",function(b,T,O){var L,W,j,X=b.jsonp!==!1&&(p1.test(b.url)?"url":typeof b.data=="string"&&(b.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&p1.test(b.data)&&"data");if(X||b.dataTypes[0]==="jsonp")return L=b.jsonpCallback=v(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,X?b[X]=b[X].replace(p1,"$1"+L):b.jsonp!==!1&&(b.url+=(d1.test(b.url)?"&":"?")+b.jsonp+"="+L),b.converters["script json"]=function(){return j||p.error(L+" was not called"),j[0]},b.dataTypes[0]="json",W=t[L],t[L]=function(){j=arguments},O.always(function(){W===void 0?p(t).removeProp(L):t[L]=W,b[L]&&(b.jsonpCallback=T.jsonpCallback,Lx.push(L)),j&&v(W)&&W(j[0]),j=W=void 0}),"script"}),g.createHTMLDocument=function(){var b=w.implementation.createHTMLDocument("").body;return b.innerHTML="<form></form><form></form>",b.childNodes.length===2}(),p.parseHTML=function(b,T,O){if(typeof b!="string")return[];typeof T=="boolean"&&(O=T,T=!1);var L,W,j;return T||(g.createHTMLDocument?(T=w.implementation.createHTMLDocument(""),L=T.createElement("base"),L.href=w.location.href,T.head.appendChild(L)):T=w),W=Q.exec(b),j=!O&&[],W?[T.createElement(W[1])]:(W=Tn([b],T,j),j&&j.length&&p(j).remove(),p.merge([],W.childNodes))},p.fn.load=function(b,T,O){var L,W,j,X=this,ke=b.indexOf(" ");return ke>-1&&(L=Lu(b.slice(ke)),b=b.slice(0,ke)),v(T)?(O=T,T=void 0):T&&typeof T=="object"&&(W="POST"),X.length>0&&p.ajax({url:b,type:W||"GET",dataType:"html",data:T}).done(function(be){j=arguments,X.html(L?p("<div>").append(p.parseHTML(be)).find(L):be)}).always(O&&function(be,De){X.each(function(){O.apply(this,j||[be.responseText,De,be])})}),this},p.expr.pseudos.animated=function(b){return p.grep(p.timers,function(T){return b===T.elem}).length},p.offset={setOffset:function(b,T,O){var L,W,j,X,ke,be,De,Qe=p.css(b,"position"),tt=p(b),je={};Qe==="static"&&(b.style.position="relative"),ke=tt.offset(),j=p.css(b,"top"),be=p.css(b,"left"),De=(Qe==="absolute"||Qe==="fixed")&&(j+be).indexOf("auto")>-1,De?(L=tt.position(),X=L.top,W=L.left):(X=parseFloat(j)||0,W=parseFloat(be)||0),v(T)&&(T=T.call(b,O,p.extend({},ke))),T.top!=null&&(je.top=T.top-ke.top+X),T.left!=null&&(je.left=T.left-ke.left+W),"using"in T?T.using.call(b,je):tt.css(je)}},p.fn.extend({offset:function(b){if(arguments.length)return b===void 0?this:this.each(function(W){p.offset.setOffset(this,b,W)});var T,O,L=this[0];if(L)return L.getClientRects().length?(T=L.getBoundingClientRect(),O=L.ownerDocument.defaultView,{top:T.top+O.pageYOffset,left:T.left+O.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var b,T,O,L=this[0],W={top:0,left:0};if(p.css(L,"position")==="fixed")T=L.getBoundingClientRect();else{for(T=this.offset(),O=L.ownerDocument,b=L.offsetParent||O.documentElement;b&&(b===O.body||b===O.documentElement)&&p.css(b,"position")==="static";)b=b.parentNode;b&&b!==L&&b.nodeType===1&&(W=p(b).offset(),W.top+=p.css(b,"borderTopWidth",!0),W.left+=p.css(b,"borderLeftWidth",!0))}return{top:T.top-W.top-p.css(L,"marginTop",!0),left:T.left-W.left-p.css(L,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var b=this.offsetParent;b&&p.css(b,"position")==="static";)b=b.offsetParent;return b||Qt})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,T){var O=T==="pageYOffset";p.fn[b]=function(L){return Le(this,function(W,j,X){var ke;if(_(W)?ke=W:W.nodeType===9&&(ke=W.defaultView),X===void 0)return ke?ke[T]:W[j];ke?ke.scrollTo(O?ke.pageXOffset:X,O?X:ke.pageYOffset):W[j]=X},b,L,arguments.length)}}),p.each(["top","left"],function(b,T){p.cssHooks[T]=bx(g.pixelPosition,function(O,L){if(L)return L=zm(O,T),s1.test(L)?p(O).position()[T]+"px":L})}),p.each({Height:"height",Width:"width"},function(b,T){p.each({padding:"inner"+b,content:T,"":"outer"+b},function(O,L){p.fn[L]=function(W,j){var X=arguments.length&&(O||typeof W!="boolean"),ke=O||(W===!0||j===!0?"margin":"border");return Le(this,function(be,De,Qe){var tt;return _(be)?L.indexOf("outer")===0?be["inner"+b]:be.document.documentElement["client"+b]:be.nodeType===9?(tt=be.documentElement,Math.max(be.body["scroll"+b],tt["scroll"+b],be.body["offset"+b],tt["offset"+b],tt["client"+b])):Qe===void 0?p.css(be,De,ke):p.style(be,De,Qe,ke)},T,X?W:void 0,X)}})}),p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(b,T){p.fn[T]=function(O){return this.on(T,O)}}),p.fn.extend({bind:function(b,T,O){return this.on(b,null,T,O)},unbind:function(b,T){return this.off(b,null,T)},delegate:function(b,T,O,L){return this.on(T,b,O,L)},undelegate:function(b,T,O){return arguments.length===1?this.off(b,"**"):this.off(T,b||"**",O)},hover:function(b,T){return this.on("mouseenter",b).on("mouseleave",T||b)}}),p.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(b,T){p.fn[T]=function(O,L){return arguments.length>0?this.on(T,null,O,L):this.trigger(T)}});var nj=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;p.proxy=function(b,T){var O,L,W;if(typeof T=="string"&&(O=b[T],T=b,b=O),!!v(b))return L=s.call(arguments,2),W=function(){return b.apply(T||this,L.concat(s.call(arguments)))},W.guid=b.guid=b.guid||p.guid++,W},p.holdReady=function(b){b?p.readyWait++:p.ready(!0)},p.isArray=Array.isArray,p.parseJSON=JSON.parse,p.nodeName=R,p.isFunction=v,p.isWindow=_,p.camelCase=pe,p.type=E,p.now=Date.now,p.isNumeric=function(b){var T=p.type(b);return(T==="number"||T==="string")&&!isNaN(b-parseFloat(b))},p.trim=function(b){return b==null?"":(b+"").replace(nj,"$1")};var ij=t.jQuery,rj=t.$;return p.noConflict=function(b){return t.$===p&&(t.$=rj),b&&t.jQuery===p&&(t.jQuery=ij),p},typeof e>"u"&&(t.jQuery=t.$=p),p})})(xW);var CJe=xW.exports;const TJe=Q_(CJe);window.$=window.jQuery=TJe;const SJe=oZe({defaultClient:Tr}),co=xp({setup(){Qa(q3,Tr)},render:()=>ca(Gie)}),AJe=Hie();co.use(gx);co.use(bte());co.use(ss);co.use(SJe);co.use(AJe);co.use(Nle);co.use(m4,{autoClose:3e3,clearOnUrlChange:!0,hideProgressBar:!1,position:"top-right",pauseOnHover:!0,pauseOnFocusLoss:!1});co.provide("appVersion",LQe);co.component("EasyDataTable",PW);co.component("VueDatePicker",J0);gx.beforeEach(async(n,t,e)=>{if(t.path!==n.path&&!pd.value)try{await uy()}catch(i){console.error("[router] Error loading translations:",i)}e()});pd.value?co.mount("#app"):(gt(pd,n=>{n&&co.mount("#app")}),setTimeout(()=>{pd.value||co.mount("#app")},5e3));export{pr as A,Ir as B,_o as C,ko as D,cl as E,Fe as F,dc as G,fc as H,si as I,ht as J,Tt as K,RA as L,RI as M,SJ as N,qo as P,mi as R,Xoe as S,Yt as _,Kt as a,In as b,le as c,V as d,m as e,Ge as f,mt as g,ne as h,fe as i,bt as j,vn as k,Bi as l,gd as m,ze as n,P as o,Mt as p,jo as q,Z as r,$e as s,B as t,ln as u,e4 as v,gt as w,Ce as x,M as y,Ki as z};
